<!DOCTYPE html><html lang="zh" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://0richalcos.github.io/Note/Spring/Spring.html"><link rel="prev" href="../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%AE%97%E6%B3%95/DesignPattern.html"><link rel="next" href="SpringBoot.html"><link rel="icon" href="../assets/images/favicon.png"><meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Spring - éšä¾¿è®°è®°</title><link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css"><link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel="stylesheet" href="../_stylesheets/extra.css"><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head> <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal"> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a href="#1spring" class="md-skip"> è·³è½¬è‡³ </a> </div> <div data-md-component="announce"> </div> <header class="md-header md-header--shadow" data-md-component="header"> <nav class="md-header__inner md-grid" aria-label="é¡µçœ‰"> <a href="../index.html" title="éšä¾¿è®°è®°" class="md-header__button md-logo" aria-label="éšä¾¿è®°è®°" data-md-component="logo"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> </a> <label class="md-header__button md-icon" for="__drawer"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> éšä¾¿è®°è®° </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> Spring </span> </div> </div> </div> <form class="md-header__option" data-md-component="palette"> <input class="md-option" data-md-color-media data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal" aria-label="åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼" type="radio" name="__palette" id="__palette_0"> <label class="md-header__button md-icon" title="åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼" for="__palette_1" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> <input class="md-option" data-md-color-media data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="teal" aria-label="åˆ‡æ¢åˆ°äº®è‰²æ¨¡å¼" type="radio" name="__palette" id="__palette_1"> <label class="md-header__button md-icon" title="åˆ‡æ¢åˆ°äº®è‰²æ¨¡å¼" for="__palette_0" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input type="text" class="md-search__input" name="query" aria-label="æœç´¢" placeholder="æœç´¢" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required> <label class="md-search__icon md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav class="md-search__options" aria-label="æŸ¥æ‰¾"> <button type="reset" class="md-search__icon md-icon" title="æ¸…ç©ºå½“å‰å†…å®¹" aria-label="æ¸…ç©ºå½“å‰å†…å®¹" tabindex="-1"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> æ­£åœ¨åˆå§‹åŒ–æœç´¢å¼•æ“ </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> <div class="md-header__source"> <a href="https://github.com/0richalcos/Note" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class="md-source__repository"> GitHub </div> </a> </div> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--primary" aria-label="å¯¼èˆªæ " data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a href="../index.html" title="éšä¾¿è®°è®°" class="md-nav__button md-logo" aria-label="éšä¾¿è®°è®°" data-md-component="logo"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> </a> éšä¾¿è®°è®° </label> <div class="md-nav__source"> <a href="https://github.com/0richalcos/Note" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class="md-source__repository"> GitHub </div> </a> </div> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../index.html" class="md-nav__link"> <span class="md-ellipsis"> ğŸ  é¦–é¡µ </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2"> <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0"> <span class="md-ellipsis"> â™¨ï¸ Java </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2"> <span class="md-nav__icon md-icon"></span> â™¨ï¸ Java </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../Java/Java.html" class="md-nav__link"> <span class="md-ellipsis"> Java </span> </a> </li> <li class="md-nav__item"> <a href="../Java/Java8.html" class="md-nav__link"> <span class="md-ellipsis"> Java 8 </span> </a> </li> <li class="md-nav__item"> <a href="../Java/JavaBasics.html" class="md-nav__link"> <span class="md-ellipsis"> Java åŸºç¡€ </span> </a> </li> <li class="md-nav__item"> <a href="../Java/JavaCollection.html" class="md-nav__link"> <span class="md-ellipsis"> Java é›†åˆ </span> </a> </li> <li class="md-nav__item"> <a href="../Java/JavaObject.html" class="md-nav__link"> <span class="md-ellipsis"> Java ç±»å’Œå¯¹è±¡ </span> </a> </li> <li class="md-nav__item"> <a href="../Java/JavaWeb.html" class="md-nav__link"> <span class="md-ellipsis"> JavaWeb </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3"> <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0"> <span class="md-ellipsis"> ğŸ§® æ•°æ®ç»“æ„åŠç®—æ³• </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3"> <span class="md-nav__icon md-icon"></span> ğŸ§® æ•°æ®ç»“æ„åŠç®—æ³• </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%AE%97%E6%B3%95/Algorithm.html" class="md-nav__link"> <span class="md-ellipsis"> Algorithm </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%AE%97%E6%B3%95/DesignPattern.html" class="md-nav__link"> <span class="md-ellipsis"> DesignPattern </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked> <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0"> <span class="md-ellipsis"> ğŸƒ Spring </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_4"> <span class="md-nav__icon md-icon"></span> ğŸƒ Spring </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc"> <label class="md-nav__link md-nav__link--active" for="__toc"> <span class="md-ellipsis"> Spring </span> <span class="md-nav__icon md-icon"></span> </label> <a href="Spring.html" class="md-nav__link md-nav__link--active"> <span class="md-ellipsis"> Spring </span> </a> <nav class="md-nav md-nav--secondary" aria-label="ç›®å½•"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> ç›®å½• </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#1spring" class="md-nav__link"> <span class="md-ellipsis"> 1ã€Spring </span> </a> <nav class="md-nav" aria-label="1ã€Spring"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#11ç®€ä»‹" class="md-nav__link"> <span class="md-ellipsis"> 1.1ã€ç®€ä»‹ </span> </a> </li> <li class="md-nav__item"> <a href="#12ä¼˜ç‚¹" class="md-nav__link"> <span class="md-ellipsis"> 1.2ã€ä¼˜ç‚¹ </span> </a> </li> <li class="md-nav__item"> <a href="#13ç»„æˆ" class="md-nav__link"> <span class="md-ellipsis"> 1.3ã€ç»„æˆ </span> </a> </li> <li class="md-nav__item"> <a href="#14æ‰©å±•" class="md-nav__link"> <span class="md-ellipsis"> 1.4ã€æ‰©å±• </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#2ioc-ç†è®ºæ¨å¯¼di" class="md-nav__link"> <span class="md-ellipsis"> 2ã€IoC ç†è®ºæ¨å¯¼ï¼ˆDIï¼‰ </span> </a> <nav class="md-nav" aria-label="2ã€IoC ç†è®ºæ¨å¯¼ï¼ˆDIï¼‰"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#21ä¾èµ–å€’ç½®å’Œ-di" class="md-nav__link"> <span class="md-ellipsis"> 2.1ã€ä¾èµ–å€’ç½®å’Œ DI </span> </a> </li> <li class="md-nav__item"> <a href="#22ioc-æœ¬è´¨å’Œ-ioc-å®¹å™¨" class="md-nav__link"> <span class="md-ellipsis"> 2.2ã€IoC æœ¬è´¨å’Œ IoC å®¹å™¨ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#3hellospring" class="md-nav__link"> <span class="md-ellipsis"> 3ã€HelloSpring </span> </a> <nav class="md-nav" aria-label="3ã€HelloSpring"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#31å¯¼å…¥ä¾èµ–" class="md-nav__link"> <span class="md-ellipsis"> 3.1ã€å¯¼å…¥ä¾èµ– </span> </a> </li> <li class="md-nav__item"> <a href="#32ç¼–å†™ä»£ç " class="md-nav__link"> <span class="md-ellipsis"> 3.2ã€ç¼–å†™ä»£ç  </span> </a> </li> <li class="md-nav__item"> <a href="#33æ€è€ƒ" class="md-nav__link"> <span class="md-ellipsis"> 3.3ã€æ€è€ƒ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#4iocåˆ›å»ºå¯¹è±¡çš„æ–¹å¼" class="md-nav__link"> <span class="md-ellipsis"> 4ã€Iocåˆ›å»ºå¯¹è±¡çš„æ–¹å¼ </span> </a> </li> <li class="md-nav__item"> <a href="#5springé…ç½®" class="md-nav__link"> <span class="md-ellipsis"> 5ã€Springé…ç½® </span> </a> <nav class="md-nav" aria-label="5ã€Springé…ç½®"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#51åˆ«å" class="md-nav__link"> <span class="md-ellipsis"> 5.1ã€åˆ«å </span> </a> </li> <li class="md-nav__item"> <a href="#52beançš„é…ç½®" class="md-nav__link"> <span class="md-ellipsis"> 5.2ã€Beançš„é…ç½® </span> </a> </li> <li class="md-nav__item"> <a href="#53import" class="md-nav__link"> <span class="md-ellipsis"> 5.3ã€import </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#6ä¾èµ–æ³¨å…¥di" class="md-nav__link"> <span class="md-ellipsis"> 6ã€ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ </span> </a> <nav class="md-nav" aria-label="6ã€ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#61æ„é€ å™¨æ³¨å…¥" class="md-nav__link"> <span class="md-ellipsis"> 6.1ã€æ„é€ å™¨æ³¨å…¥ </span> </a> </li> <li class="md-nav__item"> <a href="#62setæ–¹å¼æ³¨å…¥" class="md-nav__link"> <span class="md-ellipsis"> 6.2ã€Setæ–¹å¼æ³¨å…¥ </span> </a> </li> <li class="md-nav__item"> <a href="#63æ‰©å±•æ–¹å¼æ³¨å…¥" class="md-nav__link"> <span class="md-ellipsis"> 6.3ã€æ‰©å±•æ–¹å¼æ³¨å…¥ </span> </a> </li> <li class="md-nav__item"> <a href="#64beançš„ä½œç”¨åŸŸ" class="md-nav__link"> <span class="md-ellipsis"> 6.4ã€beançš„ä½œç”¨åŸŸ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#7beançš„è£…é…æ–¹å¼" class="md-nav__link"> <span class="md-ellipsis"> 7ã€beançš„è£…é…æ–¹å¼ </span> </a> <nav class="md-nav" aria-label="7ã€beançš„è£…é…æ–¹å¼"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#71æµ‹è¯•" class="md-nav__link"> <span class="md-ellipsis"> 7.1ã€æµ‹è¯• </span> </a> </li> <li class="md-nav__item"> <a href="#72byname" class="md-nav__link"> <span class="md-ellipsis"> 7.2ã€ByName </span> </a> </li> <li class="md-nav__item"> <a href="#73bytype" class="md-nav__link"> <span class="md-ellipsis"> 7.3ã€ByType </span> </a> </li> <li class="md-nav__item"> <a href="#74æ³¨è§£å®ç°" class="md-nav__link"> <span class="md-ellipsis"> 7.4ã€æ³¨è§£å®ç° </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#8ä½¿ç”¨æ³¨è§£å¼€å‘" class="md-nav__link"> <span class="md-ellipsis"> 8ã€ä½¿ç”¨æ³¨è§£å¼€å‘ </span> </a> </li> <li class="md-nav__item"> <a href="#9ä½¿ç”¨javaçš„æ–¹å¼é…ç½®spring" class="md-nav__link"> <span class="md-ellipsis"> 9ã€ä½¿ç”¨Javaçš„æ–¹å¼é…ç½®Spring </span> </a> </li> <li class="md-nav__item"> <a href="#10ä»£ç†æ¨¡å¼" class="md-nav__link"> <span class="md-ellipsis"> 10ã€ä»£ç†æ¨¡å¼ </span> </a> <nav class="md-nav" aria-label="10ã€ä»£ç†æ¨¡å¼"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#101é™æ€ä»£ç†" class="md-nav__link"> <span class="md-ellipsis"> 10.1ã€é™æ€ä»£ç† </span> </a> </li> <li class="md-nav__item"> <a href="#102åŠ¨æ€ä»£ç†" class="md-nav__link"> <span class="md-ellipsis"> 10.2ã€åŠ¨æ€ä»£ç† </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#11aop" class="md-nav__link"> <span class="md-ellipsis"> 11ã€AOP </span> </a> <nav class="md-nav" aria-label="11ã€AOP"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#111ä»€ä¹ˆæ˜¯aop" class="md-nav__link"> <span class="md-ellipsis"> 11.1ã€ä»€ä¹ˆæ˜¯AOP </span> </a> </li> <li class="md-nav__item"> <a href="#112aopåœ¨springä¸­çš„ä½œç”¨" class="md-nav__link"> <span class="md-ellipsis"> 11.2ã€AOPåœ¨Springä¸­çš„ä½œç”¨ </span> </a> </li> <li class="md-nav__item"> <a href="#113ä½¿ç”¨springå®ç°aop" class="md-nav__link"> <span class="md-ellipsis"> 11.3ã€ä½¿ç”¨Springå®ç°AOP </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#12æ•´åˆmybatis" class="md-nav__link"> <span class="md-ellipsis"> 12ã€æ•´åˆMybatis </span> </a> <nav class="md-nav" aria-label="12ã€æ•´åˆMybatis"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#121å›å¿†mybatis" class="md-nav__link"> <span class="md-ellipsis"> 12.1ã€å›å¿†Mybatis </span> </a> </li> <li class="md-nav__item"> <a href="#122mybatis-spring" class="md-nav__link"> <span class="md-ellipsis"> 12.2ã€Mybatis-spring </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#13äº‹åŠ¡" class="md-nav__link"> <span class="md-ellipsis"> 13ã€äº‹åŠ¡ </span> </a> <nav class="md-nav" aria-label="13ã€äº‹åŠ¡"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#131ç¼–ç¨‹å¼äº‹åŠ¡" class="md-nav__link"> <span class="md-ellipsis"> 13.1ã€ç¼–ç¨‹å¼äº‹åŠ¡ </span> </a> </li> <li class="md-nav__item"> <a href="#132å£°æ˜å¼äº‹åŠ¡-1" class="md-nav__link"> <span class="md-ellipsis"> 13.2ã€å£°æ˜å¼äº‹åŠ¡ 1 </span> </a> </li> <li class="md-nav__item"> <a href="#133å£°æ˜å¼äº‹åŠ¡-2" class="md-nav__link"> <span class="md-ellipsis"> 13.3ã€å£°æ˜å¼äº‹åŠ¡ 2 </span> </a> </li> <li class="md-nav__item"> <a href="#134åŸºäºæ³¨è§£çš„äº‹åŠ¡" class="md-nav__link"> <span class="md-ellipsis"> 13.4ã€åŸºäºæ³¨è§£çš„äº‹åŠ¡ </span> </a> </li> <li class="md-nav__item"> <a href="#135äº‹åŠ¡çš„ä¼ æ’­å±æ€§" class="md-nav__link"> <span class="md-ellipsis"> 13.5ã€äº‹åŠ¡çš„ä¼ æ’­å±æ€§ </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="SpringBoot.html" class="md-nav__link"> <span class="md-ellipsis"> SpringBoot </span> </a> </li> <li class="md-nav__item"> <a href="SpringCloud.html" class="md-nav__link"> <span class="md-ellipsis"> SpringCloud </span> </a> </li> <li class="md-nav__item"> <a href="SpringMVC.html" class="md-nav__link"> <span class="md-ellipsis"> SpringMVC </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5"> <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0"> <span class="md-ellipsis"> ğŸ’¾ æŒä¹…å±‚æ¡†æ¶ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_5"> <span class="md-nav__icon md-icon"></span> ğŸ’¾ æŒä¹…å±‚æ¡†æ¶ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/MyBatis-Plus.html" class="md-nav__link"> <span class="md-ellipsis"> MyBatis-Plus </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/Mybatis.html" class="md-nav__link"> <span class="md-ellipsis"> Mybatis </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6"> <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0"> <span class="md-ellipsis"> ğŸ” è®¤è¯ä¸æˆæƒ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6"> <span class="md-nav__icon md-icon"></span> ğŸ” è®¤è¯ä¸æˆæƒ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/SSO.html" class="md-nav__link"> <span class="md-ellipsis"> SSO </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/Sa-Token.html" class="md-nav__link"> <span class="md-ellipsis"> Sa-Token </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/Shiro.html" class="md-nav__link"> <span class="md-ellipsis"> Shiro </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7"> <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0"> <span class="md-ellipsis"> ğŸŒ å‰ç«¯ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_7"> <span class="md-nav__icon md-icon"></span> ğŸŒ å‰ç«¯ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/CSS.html" class="md-nav__link"> <span class="md-ellipsis"> CSS </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/JavaScript.html" class="md-nav__link"> <span class="md-ellipsis"> JavaScript </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/Vue.html" class="md-nav__link"> <span class="md-ellipsis"> Vue </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/jQuery.html" class="md-nav__link"> <span class="md-ellipsis"> jQuery </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/Thymeleaf.html" class="md-nav__link"> <span class="md-ellipsis"> Thymeleaf </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_6"> <label class="md-nav__link" for="__nav_7_6" id="__nav_7_6_label" tabindex="0"> <span class="md-ellipsis"> ç»„ä»¶åº“ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_7_6"> <span class="md-nav__icon md-icon"></span> ç»„ä»¶åº“ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/AntV-X6.html" class="md-nav__link"> <span class="md-ellipsis"> AntV-X6 </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/ApacheECharts.html" class="md-nav__link"> <span class="md-ellipsis"> ApacheECharts </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/Axios.html" class="md-nav__link"> <span class="md-ellipsis"> Axios </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/BootstrapTable.html" class="md-nav__link"> <span class="md-ellipsis"> BootstrapTable </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/DHTMLXGantt.html" class="md-nav__link"> <span class="md-ellipsis"> DHTMLXGantt </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/Element.html" class="md-nav__link"> <span class="md-ellipsis"> Element </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/FullCalendar.html" class="md-nav__link"> <span class="md-ellipsis"> FullCalendar </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/X-editable.html" class="md-nav__link"> <span class="md-ellipsis"> X-editable </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8"> <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0"> <span class="md-ellipsis"> ğŸ“Š æ•°æ®åº“ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_8"> <span class="md-nav__icon md-icon"></span> ğŸ“Š æ•°æ®åº“ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/Dameng.html" class="md-nav__link"> <span class="md-ellipsis"> Dameng </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL.html" class="md-nav__link"> <span class="md-ellipsis"> MySQL </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/MySQLQuery.html" class="md-nav__link"> <span class="md-ellipsis"> MySQLQuery </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/OceanBase.html" class="md-nav__link"> <span class="md-ellipsis"> OceanBase </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/Oracle.html" class="md-nav__link"> <span class="md-ellipsis"> Oracle </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/Redis.html" class="md-nav__link"> <span class="md-ellipsis"> Redis </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/Vastbase.html" class="md-nav__link"> <span class="md-ellipsis"> Vastbase </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/Elasticsearch.html" class="md-nav__link"> <span class="md-ellipsis"> Elasticsearch </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10"> <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0"> <span class="md-ellipsis"> ğŸ“‡ åˆ†å¸ƒå¼å­˜å‚¨ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_10"> <span class="md-nav__icon md-icon"></span> ğŸ“‡ åˆ†å¸ƒå¼å­˜å‚¨ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8/FastDFS.html" class="md-nav__link"> <span class="md-ellipsis"> FastDFS </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8/MinIO.html" class="md-nav__link"> <span class="md-ellipsis"> MinIO </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11"> <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0"> <span class="md-ellipsis"> ğŸ›°ï¸ ç½‘ç»œé€šä¿¡ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_11"> <span class="md-nav__icon md-icon"></span> ğŸ›°ï¸ ç½‘ç»œé€šä¿¡ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/Encryption.html" class="md-nav__link"> <span class="md-ellipsis"> Encryption </span> </a> </li> <li class="md-nav__item"> <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/HTTP.html" class="md-nav__link"> <span class="md-ellipsis"> HTTP </span> </a> </li> <li class="md-nav__item"> <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/OpenVPN.html" class="md-nav__link"> <span class="md-ellipsis"> OpenVPN </span> </a> </li> <li class="md-nav__item"> <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/VNC.html" class="md-nav__link"> <span class="md-ellipsis"> VNC </span> </a> </li> <li class="md-nav__item"> <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/WebSocket.html" class="md-nav__link"> <span class="md-ellipsis"> WebSocket </span> </a> </li> <li class="md-nav__item"> <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/frp.html" class="md-nav__link"> <span class="md-ellipsis"> frp </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12"> <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0"> <span class="md-ellipsis"> ğŸ—ƒï¸ æ–‡ä»¶å¤„ç† </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_12"> <span class="md-nav__icon md-icon"></span> ğŸ—ƒï¸ æ–‡ä»¶å¤„ç† </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_1"> <label class="md-nav__link" for="__nav_12_1" id="__nav_12_1_label" tabindex="0"> <span class="md-ellipsis"> Office </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_1_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_12_1"> <span class="md-nav__icon md-icon"></span> Office </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/ApachePOI.html" class="md-nav__link"> <span class="md-ellipsis"> ApachePOI </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/EasyExcel.html" class="md-nav__link"> <span class="md-ellipsis"> EasyExcel </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/OnlyOffice.html" class="md-nav__link"> <span class="md-ellipsis"> OnlyOffice </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/Poi-tl.html" class="md-nav__link"> <span class="md-ellipsis"> Poi-tl </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/Spire.OfficeForJava.html" class="md-nav__link"> <span class="md-ellipsis"> Spire.OfficeForJava </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/PDF/ApachePDFBox.html" class="md-nav__link"> <span class="md-ellipsis"> ApachePDFBox </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/XML/XMLParse.html" class="md-nav__link"> <span class="md-ellipsis"> XMLParse </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/ZIP/Zip4j.html" class="md-nav__link"> <span class="md-ellipsis"> Zip4j </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/XXL-JOB.html" class="md-nav__link"> <span class="md-ellipsis"> XXL-JOB </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14"> <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0"> <span class="md-ellipsis"> ğŸ§‘â€ğŸ”§ è¿ç»´ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_14"> <span class="md-nav__icon md-icon"></span> ğŸ§‘â€ğŸ”§ è¿ç»´ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/Docker.html" class="md-nav__link"> <span class="md-ellipsis"> Docker </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/Linux.html" class="md-nav__link"> <span class="md-ellipsis"> Linux </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/NSSM.html" class="md-nav__link"> <span class="md-ellipsis"> NSSM </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/Nginx.html" class="md-nav__link"> <span class="md-ellipsis"> Nginx </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/Tomcat.html" class="md-nav__link"> <span class="md-ellipsis"> Tomcat </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/TongWeb.html" class="md-nav__link"> <span class="md-ellipsis"> TongWeb </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/WSL.html" class="md-nav__link"> <span class="md-ellipsis"> WSL </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/WebLogic.html" class="md-nav__link"> <span class="md-ellipsis"> WebLogic </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15"> <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0"> <span class="md-ellipsis"> ğŸ› ï¸ å¼€å‘å·¥å…· </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_15"> <span class="md-nav__icon md-icon"></span> ğŸ› ï¸ å¼€å‘å·¥å…· </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Git.html" class="md-nav__link"> <span class="md-ellipsis"> Git </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Maven.html" class="md-nav__link"> <span class="md-ellipsis"> Maven </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Node.js.html" class="md-nav__link"> <span class="md-ellipsis"> Node.js </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Swagger.html" class="md-nav__link"> <span class="md-ellipsis"> Swagger </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16"> <label class="md-nav__link" for="__nav_16" id="__nav_16_label" tabindex="0"> <span class="md-ellipsis"> ğŸ‘» å…¶ä»– </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_16"> <span class="md-nav__icon md-icon"></span> ğŸ‘» å…¶ä»– </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E5%85%B6%E4%BB%96/Settings.html" class="md-nav__link"> <span class="md-ellipsis"> Settings </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%85%B6%E4%BB%96/Solutions.html" class="md-nav__link"> <span class="md-ellipsis"> Solutions </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%85%B6%E4%BB%96/Weasel.html" class="md-nav__link"> <span class="md-ellipsis"> Weasel </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--secondary" aria-label="ç›®å½•"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> ç›®å½• </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#1spring" class="md-nav__link"> <span class="md-ellipsis"> 1ã€Spring </span> </a> <nav class="md-nav" aria-label="1ã€Spring"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#11ç®€ä»‹" class="md-nav__link"> <span class="md-ellipsis"> 1.1ã€ç®€ä»‹ </span> </a> </li> <li class="md-nav__item"> <a href="#12ä¼˜ç‚¹" class="md-nav__link"> <span class="md-ellipsis"> 1.2ã€ä¼˜ç‚¹ </span> </a> </li> <li class="md-nav__item"> <a href="#13ç»„æˆ" class="md-nav__link"> <span class="md-ellipsis"> 1.3ã€ç»„æˆ </span> </a> </li> <li class="md-nav__item"> <a href="#14æ‰©å±•" class="md-nav__link"> <span class="md-ellipsis"> 1.4ã€æ‰©å±• </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#2ioc-ç†è®ºæ¨å¯¼di" class="md-nav__link"> <span class="md-ellipsis"> 2ã€IoC ç†è®ºæ¨å¯¼ï¼ˆDIï¼‰ </span> </a> <nav class="md-nav" aria-label="2ã€IoC ç†è®ºæ¨å¯¼ï¼ˆDIï¼‰"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#21ä¾èµ–å€’ç½®å’Œ-di" class="md-nav__link"> <span class="md-ellipsis"> 2.1ã€ä¾èµ–å€’ç½®å’Œ DI </span> </a> </li> <li class="md-nav__item"> <a href="#22ioc-æœ¬è´¨å’Œ-ioc-å®¹å™¨" class="md-nav__link"> <span class="md-ellipsis"> 2.2ã€IoC æœ¬è´¨å’Œ IoC å®¹å™¨ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#3hellospring" class="md-nav__link"> <span class="md-ellipsis"> 3ã€HelloSpring </span> </a> <nav class="md-nav" aria-label="3ã€HelloSpring"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#31å¯¼å…¥ä¾èµ–" class="md-nav__link"> <span class="md-ellipsis"> 3.1ã€å¯¼å…¥ä¾èµ– </span> </a> </li> <li class="md-nav__item"> <a href="#32ç¼–å†™ä»£ç " class="md-nav__link"> <span class="md-ellipsis"> 3.2ã€ç¼–å†™ä»£ç  </span> </a> </li> <li class="md-nav__item"> <a href="#33æ€è€ƒ" class="md-nav__link"> <span class="md-ellipsis"> 3.3ã€æ€è€ƒ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#4iocåˆ›å»ºå¯¹è±¡çš„æ–¹å¼" class="md-nav__link"> <span class="md-ellipsis"> 4ã€Iocåˆ›å»ºå¯¹è±¡çš„æ–¹å¼ </span> </a> </li> <li class="md-nav__item"> <a href="#5springé…ç½®" class="md-nav__link"> <span class="md-ellipsis"> 5ã€Springé…ç½® </span> </a> <nav class="md-nav" aria-label="5ã€Springé…ç½®"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#51åˆ«å" class="md-nav__link"> <span class="md-ellipsis"> 5.1ã€åˆ«å </span> </a> </li> <li class="md-nav__item"> <a href="#52beançš„é…ç½®" class="md-nav__link"> <span class="md-ellipsis"> 5.2ã€Beançš„é…ç½® </span> </a> </li> <li class="md-nav__item"> <a href="#53import" class="md-nav__link"> <span class="md-ellipsis"> 5.3ã€import </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#6ä¾èµ–æ³¨å…¥di" class="md-nav__link"> <span class="md-ellipsis"> 6ã€ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ </span> </a> <nav class="md-nav" aria-label="6ã€ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#61æ„é€ å™¨æ³¨å…¥" class="md-nav__link"> <span class="md-ellipsis"> 6.1ã€æ„é€ å™¨æ³¨å…¥ </span> </a> </li> <li class="md-nav__item"> <a href="#62setæ–¹å¼æ³¨å…¥" class="md-nav__link"> <span class="md-ellipsis"> 6.2ã€Setæ–¹å¼æ³¨å…¥ </span> </a> </li> <li class="md-nav__item"> <a href="#63æ‰©å±•æ–¹å¼æ³¨å…¥" class="md-nav__link"> <span class="md-ellipsis"> 6.3ã€æ‰©å±•æ–¹å¼æ³¨å…¥ </span> </a> </li> <li class="md-nav__item"> <a href="#64beançš„ä½œç”¨åŸŸ" class="md-nav__link"> <span class="md-ellipsis"> 6.4ã€beançš„ä½œç”¨åŸŸ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#7beançš„è£…é…æ–¹å¼" class="md-nav__link"> <span class="md-ellipsis"> 7ã€beançš„è£…é…æ–¹å¼ </span> </a> <nav class="md-nav" aria-label="7ã€beançš„è£…é…æ–¹å¼"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#71æµ‹è¯•" class="md-nav__link"> <span class="md-ellipsis"> 7.1ã€æµ‹è¯• </span> </a> </li> <li class="md-nav__item"> <a href="#72byname" class="md-nav__link"> <span class="md-ellipsis"> 7.2ã€ByName </span> </a> </li> <li class="md-nav__item"> <a href="#73bytype" class="md-nav__link"> <span class="md-ellipsis"> 7.3ã€ByType </span> </a> </li> <li class="md-nav__item"> <a href="#74æ³¨è§£å®ç°" class="md-nav__link"> <span class="md-ellipsis"> 7.4ã€æ³¨è§£å®ç° </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#8ä½¿ç”¨æ³¨è§£å¼€å‘" class="md-nav__link"> <span class="md-ellipsis"> 8ã€ä½¿ç”¨æ³¨è§£å¼€å‘ </span> </a> </li> <li class="md-nav__item"> <a href="#9ä½¿ç”¨javaçš„æ–¹å¼é…ç½®spring" class="md-nav__link"> <span class="md-ellipsis"> 9ã€ä½¿ç”¨Javaçš„æ–¹å¼é…ç½®Spring </span> </a> </li> <li class="md-nav__item"> <a href="#10ä»£ç†æ¨¡å¼" class="md-nav__link"> <span class="md-ellipsis"> 10ã€ä»£ç†æ¨¡å¼ </span> </a> <nav class="md-nav" aria-label="10ã€ä»£ç†æ¨¡å¼"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#101é™æ€ä»£ç†" class="md-nav__link"> <span class="md-ellipsis"> 10.1ã€é™æ€ä»£ç† </span> </a> </li> <li class="md-nav__item"> <a href="#102åŠ¨æ€ä»£ç†" class="md-nav__link"> <span class="md-ellipsis"> 10.2ã€åŠ¨æ€ä»£ç† </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#11aop" class="md-nav__link"> <span class="md-ellipsis"> 11ã€AOP </span> </a> <nav class="md-nav" aria-label="11ã€AOP"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#111ä»€ä¹ˆæ˜¯aop" class="md-nav__link"> <span class="md-ellipsis"> 11.1ã€ä»€ä¹ˆæ˜¯AOP </span> </a> </li> <li class="md-nav__item"> <a href="#112aopåœ¨springä¸­çš„ä½œç”¨" class="md-nav__link"> <span class="md-ellipsis"> 11.2ã€AOPåœ¨Springä¸­çš„ä½œç”¨ </span> </a> </li> <li class="md-nav__item"> <a href="#113ä½¿ç”¨springå®ç°aop" class="md-nav__link"> <span class="md-ellipsis"> 11.3ã€ä½¿ç”¨Springå®ç°AOP </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#12æ•´åˆmybatis" class="md-nav__link"> <span class="md-ellipsis"> 12ã€æ•´åˆMybatis </span> </a> <nav class="md-nav" aria-label="12ã€æ•´åˆMybatis"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#121å›å¿†mybatis" class="md-nav__link"> <span class="md-ellipsis"> 12.1ã€å›å¿†Mybatis </span> </a> </li> <li class="md-nav__item"> <a href="#122mybatis-spring" class="md-nav__link"> <span class="md-ellipsis"> 12.2ã€Mybatis-spring </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#13äº‹åŠ¡" class="md-nav__link"> <span class="md-ellipsis"> 13ã€äº‹åŠ¡ </span> </a> <nav class="md-nav" aria-label="13ã€äº‹åŠ¡"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#131ç¼–ç¨‹å¼äº‹åŠ¡" class="md-nav__link"> <span class="md-ellipsis"> 13.1ã€ç¼–ç¨‹å¼äº‹åŠ¡ </span> </a> </li> <li class="md-nav__item"> <a href="#132å£°æ˜å¼äº‹åŠ¡-1" class="md-nav__link"> <span class="md-ellipsis"> 13.2ã€å£°æ˜å¼äº‹åŠ¡ 1 </span> </a> </li> <li class="md-nav__item"> <a href="#133å£°æ˜å¼äº‹åŠ¡-2" class="md-nav__link"> <span class="md-ellipsis"> 13.3ã€å£°æ˜å¼äº‹åŠ¡ 2 </span> </a> </li> <li class="md-nav__item"> <a href="#134åŸºäºæ³¨è§£çš„äº‹åŠ¡" class="md-nav__link"> <span class="md-ellipsis"> 13.4ã€åŸºäºæ³¨è§£çš„äº‹åŠ¡ </span> </a> </li> <li class="md-nav__item"> <a href="#135äº‹åŠ¡çš„ä¼ æ’­å±æ€§" class="md-nav__link"> <span class="md-ellipsis"> 13.5ã€äº‹åŠ¡çš„ä¼ æ’­å±æ€§ </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <nav class="md-path" aria-label="å¯¼èˆªæ "> <ol class="md-path__list"> <li class="md-path__item"> <a href="../index.html" class="md-path__link"> <span class="md-ellipsis"> ğŸ  é¦–é¡µ </span> </a> </li> <li class="md-path__item"> <a href="Spring.html" class="md-path__link"> <span class="md-ellipsis"> ğŸƒ Spring </span> </a> </li> </ol> </nav> <article class="md-content__inner md-typeset"> <h1 id="spring">Spring<a class="headerlink" href="#spring" title="é”šç‚¹é“¾æ¥">Â¶</a></h1> <h2 id="1spring">1ã€Spring<a class="headerlink" href="#1spring" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <h3 id="11ç®€ä»‹">1.1ã€ç®€ä»‹<a class="headerlink" href="#11ç®€ä»‹" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <ul> <li>Springï¼šæ˜¥å¤©-----&gt;ç»™è½¯ä»¶è¡Œä¸šå¸¦æ¥äº†æ˜¥å¤©ï¼</li> <li>2002ï¼Œé¦–æ¬¡æ¨å‡ºäº†Springæ¡†æ¶çš„é›å½¢ï¼šinterface21æ¡†æ¶ï¼</li> <li>Springæ¡†æ¶å³ä»¥interface21æ¡†æ¶ä¸ºåŸºç¡€ï¼Œç»è¿‡é‡æ–°è®¾è®¡ï¼Œå¹¶ä¸æ–­ä¸°å¯Œå…¶å†…æ¶µï¼Œäº2004å¹´3æœˆ24æ—¥ï¼Œå‘å¸ƒäº†1.0æ­£å¼ç‰ˆã€‚</li> <li><strong>Rod Johnosn</strong>ï¼ŒSpring Frameworkåˆ›å§‹äººï¼Œæ³¨æ˜ä½œè€…ã€‚å¾ˆéš¾æƒ³è±¡Rod Johnosnçš„å­¦å†ï¼ŒçœŸçš„è®©å¥½å¤šäººå¤§åƒä¸€æƒŠï¼Œä»–æ˜¯æ‚‰å°¼å¤§å­¦çš„åšå£«ï¼Œç„¶è€Œä»–çš„ä¸“ä¸šä¸æ˜¯è®¡ç®—æœºï¼Œè€Œæ˜¯éŸ³ä¹å­¦ã€‚</li> <li> <p>Springçš„ç†å¿µï¼šä½¿ç°æœ‰çš„æŠ€æœ¯æ›´åŠ å®¹æ˜“ä½¿ç”¨ï¼Œæœ¬èº«æ˜¯ä¸€ä¸ªå¤§æ‚çƒ©ï¼Œæ•´åˆäº†ç°æœ‰çš„æŠ€æœ¯æ¡†æ¶ï¼</p> </li> <li> <p>SSHï¼šStruct2 + Spring + Hibernate</p> </li> <li>SSMï¼šSpringMVC + Spring + Mybatis</li> </ul> <p>å®˜ç½‘ï¼šhttps://spring.io/</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="cm">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nt">&lt;dependency&gt;</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-webmvc<span class="nt">&lt;/artifactId&gt;</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="nt">&lt;version&gt;</span>5.2.4.RELEASE<span class="nt">&lt;/version&gt;</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="nt">&lt;/dependency&gt;</span>
</span></code></pre></div> <h3 id="12ä¼˜ç‚¹">1.2ã€ä¼˜ç‚¹<a class="headerlink" href="#12ä¼˜ç‚¹" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <ul> <li>Springæ˜¯ä¸€ä¸ªå¼€æºçš„å…è´¹æ¡†æ¶ï¼ˆå®¹å™¨ï¼‰ï¼</li> <li>Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€éå…¥ä¾µå¼çš„æ¡†æ¶ï¼</li> <li>æ§åˆ¶åè½¬ï¼ˆIoCï¼‰ï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰ï¼</li> <li>æ”¯æŒäº‹åŠ¡å¤„ç†ï¼Œå¯¹æ¡†æ¶æ•´åˆçš„æ”¯æŒï¼</li> </ul> <p><strong>è½»é‡</strong>ã€€ã€€</p> <p>ä»å¤§å°ä¸å¼€é”€ä¸¤æ–¹é¢è€Œè¨€ Spring éƒ½æ˜¯è½»é‡çš„ã€‚å®Œæ•´çš„ Spring æ¡†æ¶å¯ä»¥åœ¨ä¸€ä¸ªå¤§å°åªæœ‰ 1MB å¤šçš„ JAR æ–‡ä»¶é‡Œå‘å¸ƒã€‚å¹¶ä¸” Spring æ‰€éœ€çš„å¤„ç†å¼€é”€ä¹Ÿæ˜¯å¾®ä¸è¶³é“çš„ã€‚æ­¤å¤–ï¼ŒSpring æ˜¯éä¾µå…¥å¼çš„ï¼šå…¸å‹åœ°Springåº”ç”¨ä¸­çš„å¯¹è±¡ä¸ä¾èµ–äº Spring çš„ç‰¹å®šç±»ã€‚</p> <p><strong>æ§åˆ¶åè½¬</strong>ã€€ã€€</p> <p>Spring é€šè¿‡ä¸€ç§ç§°ä½œæ§åˆ¶åè½¬ï¼ˆIoCï¼‰çš„æŠ€æœ¯ä¿ƒè¿›äº†æ¾è€¦åˆã€‚å½“åº”ç”¨äº† IoCï¼Œä¸€ä¸ªå¯¹è±¡ä¾èµ–çš„å…¶å®ƒå¯¹è±¡ä¼šé€šè¿‡è¢«åŠ¨çš„æ–¹å¼ä¼ é€’è¿›æ¥ï¼Œè€Œä¸æ˜¯è¿™ä¸ªå¯¹è±¡è‡ªå·±åˆ›å»ºæˆ–è€…æŸ¥æ‰¾ä¾èµ–å¯¹è±¡ã€‚ä½ å¯ä»¥è®¤ä¸º IoC ä¸ JNDI ç›¸åâ€”â€”ä¸æ˜¯å¯¹è±¡ä»å®¹å™¨ä¸­æŸ¥æ‰¾ä¾èµ–ï¼Œè€Œæ˜¯å®¹å™¨åœ¨å¯¹è±¡åˆå§‹åŒ–æ—¶ä¸ç­‰å¯¹è±¡è¯·æ±‚å°±ä¸»åŠ¨å°†ä¾èµ–ä¼ é€’ç»™å®ƒã€‚</p> <p><strong>é¢å‘åˆ‡é¢</strong>ã€€ã€€</p> <p>Spring æä¾›äº†é¢å‘åˆ‡é¢ç¼–ç¨‹çš„ä¸°å¯Œæ”¯æŒï¼Œå…è®¸é€šè¿‡åˆ†ç¦»åº”ç”¨çš„ä¸šåŠ¡é€»è¾‘ä¸ç³»ç»Ÿçº§æœåŠ¡ï¼ˆä¾‹å¦‚å®¡è®¡ï¼ˆauditingï¼‰å’Œäº‹åŠ¡ï¼ˆtransactionï¼‰ç®¡ç†ï¼‰è¿›è¡Œå†…èšæ€§çš„å¼€å‘ã€‚åº”ç”¨å¯¹è±¡åªå®ç°å®ƒä»¬åº”è¯¥åšçš„â€”â€”å®Œæˆä¸šåŠ¡é€»è¾‘â€”â€”ä»…æ­¤è€Œå·²ã€‚å®ƒä»¬å¹¶ä¸è´Ÿè´£ï¼ˆç”šè‡³æ˜¯æ„è¯†ï¼‰å…¶å®ƒçš„ç³»ç»Ÿçº§å…³æ³¨ç‚¹ï¼Œä¾‹å¦‚æ—¥å¿—æˆ–äº‹åŠ¡æ”¯æŒã€‚</p> <p><strong>å®¹å™¨</strong></p> <p>Spring åŒ…å«å¹¶ç®¡ç†åº”ç”¨å¯¹è±¡çš„é…ç½®å’Œç”Ÿå‘½å‘¨æœŸï¼Œåœ¨è¿™ä¸ªæ„ä¹‰ä¸Šå®ƒæ˜¯ä¸€ç§å®¹å™¨ï¼Œä½ å¯ä»¥é…ç½®ä½ çš„æ¯ä¸ª bean å¦‚ä½•è¢«åˆ›å»ºâ€”â€”åŸºäºä¸€ä¸ªå¯é…ç½®åŸå‹ï¼ˆprototypeï¼‰ï¼Œä½ çš„ bean å¯ä»¥åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„å®ä¾‹æˆ–è€…æ¯æ¬¡éœ€è¦æ—¶éƒ½ç”Ÿæˆä¸€ä¸ªæ–°çš„å®ä¾‹â€”â€”ä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•ç›¸äº’å…³è”çš„ã€‚ç„¶è€Œï¼ŒSpring ä¸åº”è¯¥è¢«æ··åŒäºä¼ ç»Ÿçš„é‡é‡çº§çš„ EJB å®¹å™¨ï¼Œå®ƒä»¬ç»å¸¸æ˜¯åºå¤§ä¸ç¬¨é‡çš„ï¼Œéš¾ä»¥ä½¿ç”¨ã€‚</p> <p><strong>æ¡†æ¶</strong></p> <p>Spring å¯ä»¥å°†ç®€å•çš„ç»„ä»¶é…ç½®ã€ç»„åˆæˆä¸ºå¤æ‚çš„åº”ç”¨ã€‚åœ¨ Spring ä¸­ï¼Œåº”ç”¨å¯¹è±¡è¢«å£°æ˜å¼åœ°ç»„åˆï¼Œå…¸å‹åœ°æ˜¯åœ¨ä¸€ä¸ª XML æ–‡ä»¶é‡Œã€‚Spring ä¹Ÿæä¾›äº†å¾ˆå¤šåŸºç¡€åŠŸèƒ½ï¼ˆäº‹åŠ¡ç®¡ç†ã€æŒä¹…åŒ–æ¡†æ¶é›†æˆç­‰ç­‰ï¼‰ï¼Œå°†åº”ç”¨é€»è¾‘çš„å¼€å‘ç•™ç»™äº†ä½ ã€‚</p> <p>æ€»ç»“ï¼šSpringå°±æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ§åˆ¶åè½¬ï¼ˆIoCï¼‰å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰çš„æ¡†æ¶ï¼</p> <h3 id="13ç»„æˆ">1.3ã€ç»„æˆ<a class="headerlink" href="#13ç»„æˆ" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/image-20200316215023023.png" data-desc-position="bottom"><img src="!assets/Spring/image-20200316215023023.png" alt="image-20200316215616542" style="zoom:67%;"></a></p> <ul> <li> <p>Spring Core</p> <blockquote> <p>Coreå°è£…åŒ…æ˜¯æ¡†æ¶çš„æœ€åŸºç¡€éƒ¨åˆ†ï¼Œæä¾›IoCå’Œä¾èµ–æ³¨å…¥ç‰¹æ€§ã€‚è¿™é‡Œçš„åŸºç¡€æ¦‚å¿µæ˜¯ BeanFactoryï¼Œå®ƒæä¾›å¯¹ Factory æ¨¡å¼çš„ç»å…¸å®ç°æ¥æ¶ˆé™¤å¯¹ç¨‹åºæ€§å•ä¾‹æ¨¡å¼çš„éœ€è¦ï¼Œå¹¶çœŸæ­£åœ°å…è®¸ä½ ä»ç¨‹åºé€»è¾‘ä¸­åˆ†ç¦»å‡ºä¾èµ–å…³ç³»å’Œé…ç½®ã€‚</p> </blockquote> </li> <li> <p>Spring Context</p> <blockquote> <p>æ„å»ºäº Core å°è£…åŒ…åŸºç¡€ä¸Šçš„ Context å°è£…åŒ…ï¼Œæä¾›äº†ä¸€ç§æ¡†æ¶å¼çš„å¯¹è±¡è®¿é—®æ–¹æ³•ï¼Œæœ‰äº›åƒ JNDI æ³¨å†Œå™¨ã€‚Context å°è£…åŒ…çš„ç‰¹æ€§å¾—è‡ªäºBeans å°è£…åŒ…ï¼Œå¹¶æ·»åŠ äº†å¯¹å›½é™…åŒ–ï¼ˆI18Nï¼‰çš„æ”¯æŒï¼ˆä¾‹å¦‚èµ„æºç»‘å®šï¼‰ï¼Œäº‹ä»¶ä¼ æ’­ï¼Œèµ„æºè£…è½½çš„æ–¹å¼å’Œ Context çš„é€æ˜åˆ›å»ºï¼Œæ¯”å¦‚è¯´é€šè¿‡Servlet å®¹å™¨ã€‚</p> </blockquote> </li> <li> <p>Spring DAO</p> <blockquote> <p>DAOï¼ˆData Access Objectï¼‰æä¾› JDBC çš„æŠ½è±¡å±‚ï¼Œå®ƒå¯æ¶ˆé™¤å†—é•¿çš„ JDBC ç¼–ç å’Œè§£ææ•°æ®åº“å‚å•†ç‰¹æœ‰çš„é”™è¯¯ä»£ç ã€‚ å¹¶ä¸”ï¼ŒJDBC å°è£…åŒ…è¿˜æä¾›äº†ä¸€ç§æ¯”ç¼–ç¨‹æ€§æ›´å¥½çš„å£°æ˜æ€§äº‹åŠ¡ç®¡ç†æ–¹æ³•ï¼Œä¸ä»…ä»…æ˜¯å®ç°äº†ç‰¹å®šæ¥å£ï¼Œè€Œä¸”å¯¹æ‰€æœ‰çš„ POJOsï¼ˆplain old Java objectsï¼‰éƒ½é€‚ç”¨ã€‚</p> </blockquote> </li> <li> <p>Spring ORM</p> <blockquote> <p>ORM å°è£…åŒ…æä¾›äº†å¸¸ç”¨çš„ â€œå¯¹è±¡/å…³ç³»â€ æ˜ å°„ APIs çš„é›†æˆå±‚ã€‚ å…¶ä¸­åŒ…æ‹¬ JPAã€JDOã€Hibernate å’Œ iBatisã€‚åˆ©ç”¨ ORM å°è£…åŒ…ï¼Œå¯ä»¥æ··åˆä½¿ç”¨æ‰€æœ‰ Spring æä¾›çš„ç‰¹æ€§è¿›è¡Œ â€œå¯¹è±¡/å…³ç³»â€ æ˜ å°„ï¼Œå¦‚å‰è¾¹æåˆ°çš„ç®€å•å£°æ˜æ€§äº‹åŠ¡ç®¡ç†ã€‚</p> </blockquote> </li> <li> <p>Spring AOP</p> <blockquote> <p>Spring çš„ AOP å°è£…åŒ…æä¾›äº†ç¬¦åˆ AOP Alliance è§„èŒƒçš„é¢å‘åˆ‡é¢çš„ç¼–ç¨‹å®ç°ï¼Œè®©ä½ å¯ä»¥å®šä¹‰ï¼Œä¾‹å¦‚æ–¹æ³•æ‹¦æˆªå™¨ï¼ˆmethod-interceptorsï¼‰å’Œåˆ‡ç‚¹ï¼ˆpointcutsï¼‰ï¼Œä»é€»è¾‘ä¸Šè®²ï¼Œä»è€Œå‡å¼±ä»£ç çš„åŠŸèƒ½è€¦åˆï¼Œæ¸…æ™°çš„è¢«åˆ†ç¦»å¼€ã€‚è€Œä¸”ï¼Œåˆ©ç”¨ source-level çš„å…ƒæ•°æ®åŠŸèƒ½ï¼Œè¿˜å¯ä»¥å°†å„ç§è¡Œä¸ºä¿¡æ¯åˆå¹¶åˆ°ä½ çš„ä»£ç ä¸­ã€‚</p> </blockquote> </li> <li> <p>Spring Web</p> <blockquote> <p>Spring ä¸­çš„ Web åŒ…æä¾›äº†åŸºç¡€çš„é’ˆå¯¹ Web å¼€å‘çš„é›†æˆç‰¹æ€§ï¼Œä¾‹å¦‚å¤šæ–¹æ–‡ä»¶ä¸Šä¼ ï¼Œåˆ©ç”¨ Servlet listeners è¿›è¡Œ IOC å®¹å™¨åˆå§‹åŒ–å’Œé’ˆå¯¹ Web çš„ ApplicationContextã€‚å½“ä¸ WebWork æˆ– Struts ä¸€èµ·ä½¿ç”¨ Spring æ—¶ï¼Œè¿™ä¸ªåŒ…ä½¿ Spring å¯ä¸å…¶ä»–æ¡†æ¶ç»“åˆã€‚</p> </blockquote> </li> <li> <p>Spring Web MVC</p> <blockquote> <p>Spring ä¸­çš„ MVC å°è£…åŒ…æä¾›äº† Web åº”ç”¨çš„ Model-View-Controllerï¼ˆMVCï¼‰å®ç°ã€‚Spring çš„ MVC æ¡†æ¶å¹¶ä¸æ˜¯ä»…ä»…æä¾›ä¸€ç§ä¼ ç»Ÿçš„å®ç°ï¼Œå®ƒæä¾›äº†ä¸€ç§æ¸…æ™°çš„åˆ†ç¦»æ¨¡å‹ï¼Œåœ¨é¢†åŸŸæ¨¡å‹ä»£ç å’Œ Web Form ä¹‹é—´ã€‚å¹¶ä¸”ï¼Œè¿˜å¯ä»¥å€ŸåŠ© Spring æ¡†æ¶çš„å…¶ä»–ç‰¹æ€§ã€‚</p> </blockquote> </li> </ul> <h3 id="14æ‰©å±•">1.4ã€æ‰©å±•<a class="headerlink" href="#14æ‰©å±•" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>åœ¨Springçš„å®˜ç½‘æœ‰è¿™ä¸ªä»‹ç»ï¼šç°ä»£åŒ–çš„Javaå¼€å‘ï¼è¯´ç™½äº†å°±æ˜¯åŸºäºSpringçš„å¼€å‘</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/image-20200316215808451.png" data-desc-position="bottom"><img src="!assets/Spring/image-20200316215808451.png" alt style="zoom:80%;"></a></p> <ul> <li>Spring Boot<ul> <li>ä¸€ä¸ªå¿«é€Ÿå¼€å‘çš„è„šæ‰‹æ¶ã€‚</li> <li>åŸºäºSpringBootå¯ä»¥å¿«é€Ÿçš„å¼€å‘å•ä¸ªå¾®æœåŠ¡ã€‚</li> <li>çº¦å®šå¤§äºé…ç½®ï¼</li> </ul> </li> <li>Spring Cloud<ul> <li>Spring Cloudæ˜¯åŸºäºSpringBootå®ç°çš„</li> </ul> </li> </ul> <p>ç°åœ¨å¾ˆå¤šå…¬å¸éƒ½åœ¨ä½¿ç”¨SpringBootè¿›è¡Œå¿«é€Ÿå¼€å‘ï¼Œå­¦ä¹ SpringBootçš„å‰æï¼Œéœ€è¦å®Œå…¨æŒæ¡SpringåŠSpringMVCï¼</p> <p><strong>å¼Šç«¯ï¼šSpringå‘å±•äº†å¤ªä¹…ä¹‹åï¼Œè¿èƒŒäº†åŸæ¥çš„ç†å¿µï¼Œé…ç½®å˜å¾—ååˆ†ç¹çã€‚</strong></p> <h2 id="2ioc-ç†è®ºæ¨å¯¼di">2ã€IoC ç†è®ºæ¨å¯¼ï¼ˆDIï¼‰<a class="headerlink" href="#2ioc-ç†è®ºæ¨å¯¼di" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <ol> <li> <p>UserDao æ¥å£</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">UserDao</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">getUser</span><span class="p">();</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p>UserDaoImpl å®ç°ç±»</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserDaoImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">UserDao</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="nd">@Override</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">getUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"é»˜è®¤è·å–ç”¨æˆ·çš„æ•°æ®"</span><span class="p">);</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p>UserService ä¸šåŠ¡æ¥å£</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">UserService</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">getUser</span><span class="p">();</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p>UserServiceImpl ä¸šåŠ¡å®ç°ç±»</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserServiceImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">UserService</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserDao</span><span class="w"> </span><span class="n">userDao</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserDaoImpl</span><span class="p">();</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="nd">@Override</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">getUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">        </span><span class="n">userDao</span><span class="p">.</span><span class="na">getUser</span><span class="p">();</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p>æµ‹è¯•</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nd">@Test</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">(){</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="n">UserService</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserServiceImpl</span><span class="p">();</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="n">service</span><span class="p">.</span><span class="na">getUser</span><span class="p">();</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="p">}</span>
</span></code></pre></div> </li> </ol> <p>æŠŠ Userdao çš„å®ç°ç±»å¢åŠ ä¸€ä¸ª</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserDaoMySqlImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">UserDao</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">    </span><span class="nd">@Override</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">getUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"MySqlè·å–ç”¨æˆ·æ•°æ®"</span><span class="p">);</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="p">}</span>
</span></code></pre></div> <p>ç´§æ¥ç€æˆ‘ä»¬è¦å»ä½¿ç”¨ MySql çš„è¯ ï¼Œ æˆ‘ä»¬å°±éœ€è¦å» service å®ç°ç±»é‡Œé¢ä¿®æ”¹å¯¹åº”çš„å®ç° ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserServiceImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">UserService</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserDao</span><span class="w"> </span><span class="n">userDao</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserDaoMySqlImpl</span><span class="p">();</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="nd">@Override</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">getUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">        </span><span class="n">userDao</span><span class="p">.</span><span class="na">getUser</span><span class="p">();</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="p">}</span>
</span></code></pre></div> <p>å‡è®¾ï¼Œå†å¢åŠ ä¸€ä¸ª Userdao çš„å®ç°ç±»ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserDaoOracleImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">UserDao</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">    </span><span class="nd">@Override</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">getUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Oracleè·å–ç”¨æˆ·æ•°æ®"</span><span class="p">);</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="p">}</span>
</span></code></pre></div> <p>é‚£ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨ Oracleï¼Œåˆéœ€è¦å» service å®ç°ç±»é‡Œé¢ä¿®æ”¹å¯¹åº”çš„å®ç°ã€‚å‡è®¾æˆ‘ä»¬çš„è¿™ç§éœ€æ±‚éå¸¸å¤§ï¼Œè¿™ç§æ–¹å¼å°±æ ¹æœ¬ä¸é€‚ç”¨äº†ï¼Œæ¯æ¬¡å˜åŠ¨éƒ½éœ€è¦ä¿®æ”¹å¤§é‡ä»£ç ï¼Œè¿™ç§è®¾è®¡çš„è€¦åˆæ€§å¤ªé«˜äº†ï¼Œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ã€‚</p> <p><strong>å¦‚ä½•è§£å†³ï¼Ÿ</strong></p> <p>å¯ä»¥åœ¨éœ€è¦ç”¨åˆ°å®ƒçš„åœ°æ–¹ï¼Œä¸å»å®ç°å®ƒï¼Œè€Œæ˜¯ç•™å‡ºä¸€ä¸ªæ¥å£ ï¼Œåˆ©ç”¨ setï¼Œä¿®æ”¹ä»£ç ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserServiceImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">UserService</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserDao</span><span class="w"> </span><span class="n">userDao</span><span class="p">;</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span><span class="c1">// åˆ©ç”¨setå®ç°</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUserDao</span><span class="p">(</span><span class="n">UserDao</span><span class="w"> </span><span class="n">userDao</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">userDao</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userDao</span><span class="p">;</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">    </span><span class="nd">@Override</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">getUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">        </span><span class="n">userDao</span><span class="p">.</span><span class="na">getUser</span><span class="p">();</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="p">}</span>
</span></code></pre></div> <p>ç°åœ¨å»æµ‹è¯•ç±»é‡Œï¼Œè¿›è¡Œæµ‹è¯•ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nd">@Test</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">(){</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span><span class="n">UserServiceImpl</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserServiceImpl</span><span class="p">();</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span><span class="n">service</span><span class="p">.</span><span class="na">setUserDao</span><span class="p">(</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserDaoMySqlImpl</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">    </span><span class="n">service</span><span class="p">.</span><span class="na">getUser</span><span class="p">();</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">    </span><span class="c1">//é‚£æˆ‘ä»¬ç°åœ¨åˆæƒ³ç”¨Oracleå»å®ç°å‘¢?</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">    </span><span class="n">service</span><span class="p">.</span><span class="na">setUserDao</span><span class="p">(</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserDaoOracleImpl</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">    </span><span class="n">service</span><span class="p">.</span><span class="na">getUser</span><span class="p">();</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="p">}</span>
</span></code></pre></div> <p>åœ¨ä¹‹å‰çš„ä¸šåŠ¡ä¸­ï¼Œç”¨æˆ·çš„éœ€æ±‚å¯èƒ½ä¼šå½±å“æˆ‘ä»¬åŸæœ¬çš„ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚å»ä¿®æ”¹æºä»£ç ï¼å¦‚æœç¨‹åºä»£ç é‡ååˆ†å¤§ï¼Œä¿®æ”¹ä¸€æ¬¡çš„æˆæœ¬ååˆ†æ˜‚è´µï¼</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/image-20200316231355857.png" data-desc-position="bottom"><img src="!assets/Spring/image-20200316231355857.png" alt="image-20200316231355857" style="zoom: 67%;"></a></p> <p>ä½¿ç”¨ä¸€ä¸ª Set æ¥å£å®ç°ï¼Œå·²ç»å‘ç”Ÿäº†é©å‘½æ€§çš„å˜åŒ–ï¼</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kd">private</span><span class="w"> </span><span class="n">UserDao</span><span class="w"> </span><span class="n">userDao</span><span class="p">;</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="c1">//åˆ©ç”¨setè¿›è¡ŒåŠ¨æ€å®ç°å€¼å¾—æ³¨å…¥</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUserDao</span><span class="p">(</span><span class="n">UserDao</span><span class="w"> </span><span class="n">userDao</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="na">userDao</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userDao</span><span class="p">;</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="p">}</span>
</span></code></pre></div> <ul> <li>ä¹‹å‰ï¼Œç¨‹åºæ˜¯ä¸»åŠ¨åˆ›å»ºå¯¹è±¡ï¼æ§åˆ¶æƒåœ¨ç¨‹åºçŒ¿æ‰‹ä¸Šï¼</li> <li>ä½¿ç”¨äº† set æ³¨å…¥åï¼Œç¨‹åºä¸å†å…·æœ‰ä¸»åŠ¨æ€§ï¼Œè€Œæ˜¯å˜æˆäº†è¢«åŠ¨çš„æ¥å—å¯¹è±¡ï¼</li> </ul> <p>è¿™ç§æ€æƒ³ï¼Œä»æœ¬è´¨ä¸Šè§£å†³äº†é—®é¢˜ï¼Œç¨‹åºçŒ¿ä¸ç”¨å†å»ç®¡ç†å¯¹è±¡çš„åˆ›å»ºäº†ã€‚ç³»ç»Ÿçš„è€¦åˆæ€§å¤§å¤§é™ä½~ï¼Œå¯ä»¥æ›´åŠ åœ°ä¸“æ³¨åœ¨ä¸šåŠ¡çš„å®ç°ä¸Šï¼è¿™æ˜¯ IoC çš„åŸå‹ï¼</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/image-20200316231558028.png" data-desc-position="bottom"><img src="!assets/Spring/image-20200316231558028.png" alt="image-20200316231558028" style="zoom:67%;"></a></p> <h3 id="21ä¾èµ–å€’ç½®å’Œ-di">2.1ã€ä¾èµ–å€’ç½®å’Œ DI<a class="headerlink" href="#21ä¾èµ–å€’ç½®å’Œ-di" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>å‡è®¾æˆ‘ä»¬è®¾è®¡ä¸€è¾†æ±½è½¦ï¼šå…ˆè®¾è®¡è½®å­ï¼Œç„¶åæ ¹æ®è½®å­å¤§å°è®¾è®¡åº•ç›˜ï¼Œæ¥ç€æ ¹æ®åº•ç›˜è®¾è®¡è½¦èº«ï¼Œæœ€åæ ¹æ®è½¦èº«è®¾è®¡å¥½æ•´ä¸ªæ±½è½¦ã€‚è¿™é‡Œå°±å‡ºç°äº†ä¸€ä¸ª â€œä¾èµ–â€ å…³ç³»ï¼šæ±½è½¦ä¾èµ–è½¦èº«ï¼Œè½¦èº«ä¾èµ–åº•ç›˜ï¼Œåº•ç›˜ä¾èµ–è½®å­ã€‚</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/165d5a1e884dbb2b.webp" data-desc-position="bottom"><img src="!assets/Spring/165d5a1e884dbb2b.webp" alt="img" style="zoom:80%;"></a></p> <p>è¿™æ ·çš„è®¾è®¡çœ‹èµ·æ¥æ²¡é—®é¢˜ï¼Œä½†æ˜¯å¯ç»´æŠ¤æ€§å´å¾ˆä½ã€‚å‡è®¾è®¾è®¡å®Œå·¥ä¹‹åï¼Œä¸Šå¸å´çªç„¶è¯´æ ¹æ®å¸‚åœºéœ€æ±‚çš„å˜åŠ¨ï¼Œè¦æˆ‘ä»¬æŠŠè½¦å­çš„è½®å­è®¾è®¡éƒ½æ”¹å¤§ä¸€ç ã€‚è¿™ä¸‹æˆ‘ä»¬å°±è›‹ç–¼äº†ï¼šå› ä¸ºæˆ‘ä»¬æ˜¯æ ¹æ®è½®å­çš„å°ºå¯¸è®¾è®¡çš„åº•ç›˜ï¼Œè½®å­çš„å°ºå¯¸ä¸€æ”¹ï¼Œåº•ç›˜çš„è®¾è®¡å°±å¾—ä¿®æ”¹ï¼›åŒæ ·å› ä¸ºæˆ‘ä»¬æ˜¯æ ¹æ®åº•ç›˜è®¾è®¡çš„è½¦èº«ï¼Œé‚£ä¹ˆè½¦èº«ä¹Ÿå¾—æ”¹ï¼ŒåŒç†æ±½è½¦è®¾è®¡ä¹Ÿå¾—æ”¹â€”â€”æ•´ä¸ªè®¾è®¡å‡ ä¹éƒ½å¾—æ”¹ï¼æˆ‘ä»¬ç°åœ¨æ¢ä¸€ç§æ€è·¯ã€‚æˆ‘ä»¬å…ˆè®¾è®¡æ±½è½¦çš„å¤§æ¦‚æ ·å­ï¼Œç„¶åæ ¹æ®æ±½è½¦çš„æ ·å­æ¥è®¾è®¡è½¦èº«ï¼Œæ ¹æ®è½¦èº«æ¥è®¾è®¡åº•ç›˜ï¼Œæœ€åæ ¹æ®åº•ç›˜æ¥è®¾è®¡è½®å­ã€‚è¿™æ—¶å€™ï¼Œä¾èµ–å…³ç³»å°±å€’ç½®è¿‡æ¥äº†ï¼šè½®å­ä¾èµ–åº•ç›˜ï¼Œ åº•ç›˜ä¾èµ–è½¦èº«ï¼Œ è½¦èº«ä¾èµ–æ±½è½¦ã€‚</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/165d5a206b53e40b.png" data-desc-position="bottom"><img src="!assets/Spring/165d5a206b53e40b.png" alt="img" style="zoom:80%;"></a></p> <p>è¿™æ—¶å€™ï¼Œä¸Šå¸å†è¯´è¦æ”¹åŠ¨è½®å­çš„è®¾è®¡ï¼Œæˆ‘ä»¬å°±åªéœ€è¦æ”¹åŠ¨è½®å­çš„è®¾è®¡ï¼Œè€Œä¸éœ€è¦åŠ¨åº•ç›˜ï¼Œè½¦èº«ï¼Œæ±½è½¦çš„è®¾è®¡äº†ã€‚è¿™å°±æ˜¯ä¾èµ–å€’ç½®åŸåˆ™â€”â€”æŠŠåŸæœ¬çš„é«˜å±‚å»ºç­‘ä¾èµ–åº•å±‚å»ºç­‘ â€œå€’ç½®â€ è¿‡æ¥ï¼Œå˜æˆåº•å±‚å»ºç­‘ä¾èµ–é«˜å±‚å»ºç­‘ã€‚<strong>é«˜å±‚å»ºç­‘å†³å®šéœ€è¦ä»€ä¹ˆï¼Œåº•å±‚å»å®ç°è¿™æ ·çš„éœ€æ±‚ï¼Œä½†æ˜¯é«˜å±‚å¹¶ä¸ç”¨ç®¡åº•å±‚æ˜¯æ€ä¹ˆå®ç°çš„</strong>ã€‚è¿™æ ·å°±ä¸ä¼šå‡ºç°å‰é¢çš„ â€œç‰µä¸€å‘åŠ¨å…¨èº«â€ çš„æƒ…å†µã€‚</p> <p>å…ˆå®šä¹‰å››ä¸ª Classï¼Œè½¦ï¼Œè½¦èº«ï¼Œåº•ç›˜ï¼Œè½®èƒã€‚ç„¶ååˆå§‹åŒ–è¿™è¾†è½¦ï¼Œæœ€åè·‘è¿™è¾†è½¦ã€‚ä»£ç ç»“æ„å¦‚ä¸‹ï¼š</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/165d5a2528185a4f.webp" data-desc-position="bottom"><img src="!assets/Spring/165d5a2528185a4f.webp" alt="img" style="zoom:80%;"></a></p> <p>è¿™æ ·ï¼Œå°±ç›¸å½“äºä¸Šé¢ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œä¸Šå±‚å»ºç­‘ä¾èµ–ä¸‹å±‚å»ºç­‘â€”â€”æ¯ä¸€ä¸ªç±»çš„æ„é€ å‡½æ•°éƒ½ç›´æ¥è°ƒç”¨äº†åº•å±‚ä»£ç çš„æ„é€ å‡½æ•°ã€‚å‡è®¾æˆ‘ä»¬éœ€è¦æ”¹åŠ¨ä¸€ä¸‹è½®èƒï¼ˆTireï¼‰ç±»ï¼ŒæŠŠå®ƒçš„å°ºå¯¸å˜æˆåŠ¨æ€çš„ï¼Œè€Œä¸æ˜¯ä¸€ç›´éƒ½æ˜¯ 30ã€‚æˆ‘ä»¬éœ€è¦è¿™æ ·æ”¹ï¼š</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/165d5a290792f841.webp" data-desc-position="bottom"><img src="!assets/Spring/165d5a290792f841.webp" alt="img" style="zoom:80%;"></a></p> <p>ç”±äºæˆ‘ä»¬ä¿®æ”¹äº†è½®èƒçš„å®šä¹‰ï¼Œä¸ºäº†è®©æ•´ä¸ªç¨‹åºæ­£å¸¸è¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦åšä»¥ä¸‹æ”¹åŠ¨ï¼š</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/165d5a2a736b0ee8.webp" data-desc-position="bottom"><img src="!assets/Spring/165d5a2a736b0ee8.webp" alt="img" style="zoom:80%;"></a></p> <p>ç”±æ­¤æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä»…ä»…æ˜¯ä¸ºäº†ä¿®æ”¹è½®èƒçš„æ„é€ å‡½æ•°ï¼Œè¿™ç§è®¾è®¡å´éœ€è¦ä¿®æ”¹æ•´ä¸ªä¸Šå±‚æ‰€æœ‰ç±»çš„æ„é€ å‡½æ•°ï¼åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œè¿™æ ·çš„è®¾è®¡å‡ ä¹æ˜¯ä¸å¯ç»´æŠ¤çš„â€”â€”åœ¨å®é™…å·¥ç¨‹é¡¹ç›®ä¸­ï¼Œæœ‰çš„ç±»å¯èƒ½ä¼šæ˜¯å‡ åƒä¸ªç±»çš„åº•å±‚ï¼Œå¦‚æœæ¯æ¬¡ä¿®æ”¹è¿™ä¸ªç±»ï¼Œæˆ‘ä»¬éƒ½è¦ä¿®æ”¹æ‰€æœ‰ä»¥å®ƒä½œä¸ºä¾èµ–çš„ç±»ï¼Œé‚£è½¯ä»¶çš„ç»´æŠ¤æˆæœ¬å°±å¤ªé«˜äº†ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠåº•å±‚ç±»ä½œä¸ºå‚æ•°ä¼ å…¥ä¸Šå±‚ç±»ï¼Œå®ç°ä¸Šå±‚ç±»å¯¹ä¸‹å±‚ç±»çš„ â€œæ§åˆ¶â€ï¼Œç”¨æ„é€ æ–¹æ³•ä¼ é€’çš„ä¾èµ–æ³¨å…¥æ–¹å¼é‡æ–°å†™è½¦ç±»çš„å®šä¹‰ï¼š</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/165d5a2c1e041d1f.webp" data-desc-position="bottom"><img src="!assets/Spring/165d5a2c1e041d1f.webp" alt="img" style="zoom:80%;"></a></p> <p>è¿™é‡Œæˆ‘ä»¬å†æŠŠè½®èƒå°ºå¯¸å˜æˆåŠ¨æ€çš„ï¼ŒåŒæ ·ä¸ºäº†è®©æ•´ä¸ªç³»ç»Ÿé¡ºåˆ©è¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦åšå¦‚ä¸‹ä¿®æ”¹ï¼š</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/165d5a2f3b9840d6.webp" data-desc-position="bottom"><img src="!assets/Spring/165d5a2f3b9840d6.webp" alt="img" style="zoom:80%;"></a></p> <p>è¿™é‡Œæˆ‘åªéœ€è¦ä¿®æ”¹è½®èƒç±»å°±è¡Œäº†ï¼Œä¸ç”¨ä¿®æ”¹å…¶ä»–ä»»ä½•ä¸Šå±‚ç±»ã€‚è¿™æ˜¾ç„¶æ˜¯æ›´å®¹æ˜“ç»´æŠ¤çš„ä»£ç ã€‚</p> <h3 id="22ioc-æœ¬è´¨å’Œ-ioc-å®¹å™¨">2.2ã€IoC æœ¬è´¨å’Œ IoC å®¹å™¨<a class="headerlink" href="#22ioc-æœ¬è´¨å’Œ-ioc-å®¹å™¨" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p><strong>æ§åˆ¶åè½¬ IoCï¼ˆInversion of Controlï¼‰ï¼Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼ŒDIï¼ˆä¾èµ–æ³¨å…¥ï¼‰æ˜¯å®ç° IoC çš„ä¸€ç§æ–¹æ³•</strong>ï¼Œä¹Ÿæœ‰äººè®¤ä¸º DI åªæ˜¯ IoC çš„å¦ä¸€ç§è¯´æ³•ã€‚æ²¡æœ‰IoC çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå¯¹è±¡çš„åˆ›å»ºä¸å¯¹è±¡ä¸­çš„ä¾èµ–å…³ç³»å®Œå…¨ç¡¬ç¼–ç åœ¨ç¨‹åºä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºç”±ç¨‹åºè‡ªå·±æ§åˆ¶ï¼Œæ§åˆ¶åè½¬åå°†å¯¹è±¡çš„åˆ›å»ºè½¬ç§»ç»™ç¬¬ä¸‰æ–¹ï¼Œä¸ªäººè®¤ä¸ºæ‰€è°“çš„æ§åˆ¶åè½¬å°±æ˜¯ï¼šè·å¾—ä¾èµ–å¯¹è±¡çš„æ–¹å¼åè½¬äº†ã€‚</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/image-20200316232856255.png" data-desc-position="bottom"><img src="!assets/Spring/image-20200316232856255.png" alt="image-20200316232856255" style="zoom: 67%;"></a></p> <p>é‡‡ç”¨ XML æ–¹å¼é…ç½® Bean çš„æ—¶å€™ï¼ŒBean çš„å®šä¹‰ä¿¡æ¯æ˜¯å’Œå®ç°åˆ†ç¦»çš„ï¼Œè€Œé‡‡ç”¨æ³¨è§£çš„æ–¹å¼å¯ä»¥æŠŠäºŒè€…åˆä¸ºä¸€ä½“ï¼ŒBean çš„å®šä¹‰ä¿¡æ¯ç›´æ¥ä»¥æ³¨è§£çš„å½¢å¼å®šä¹‰åœ¨å®ç°ç±»ä¸­ï¼Œä»è€Œè¾¾åˆ°äº†é›¶é…ç½®çš„ç›®çš„ã€‚</p> <p>æ§åˆ¶åè½¬æ˜¯ä¸€ç§é€šè¿‡æè¿°ï¼ˆXML æˆ–æ³¨è§£ï¼‰å¹¶é€šè¿‡ç¬¬ä¸‰æ–¹å»ç”Ÿäº§æˆ–è·å–ç‰¹å®šå¯¹è±¡çš„æ–¹å¼ã€‚åœ¨ Spring ä¸­å®ç°æ§åˆ¶åè½¬çš„æ˜¯ IoC å®¹å™¨ï¼Œå…¶å®ç°æ–¹æ³•æ˜¯ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼ŒDIï¼‰ã€‚</p> <p>å…¶å®ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¯¹è½¦ç±»è¿›è¡Œåˆå§‹åŒ–çš„é‚£æ®µä»£ç å‘ç”Ÿçš„åœ°æ–¹ï¼Œå°±æ˜¯ IoC å®¹å™¨ã€‚</p> <p>å› ä¸ºé‡‡ç”¨äº†ä¾èµ–æ³¨å…¥ï¼Œåœ¨åˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­å°±ä¸å¯é¿å…çš„ä¼šå†™å¤§é‡çš„ newã€‚è¿™é‡Œ IoC å®¹å™¨å°±è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚è¿™ä¸ªå®¹å™¨å¯ä»¥è‡ªåŠ¨å¯¹ä½ çš„ä»£ç è¿›è¡Œåˆå§‹åŒ–ï¼Œä½ åªéœ€è¦ç»´æŠ¤ä¸€ä¸ª Configurationï¼ˆå¯ä»¥æ˜¯ xml å¯ä»¥æ˜¯ä¸€æ®µä»£ç ï¼‰ï¼Œè€Œä¸ç”¨æ¯æ¬¡åˆå§‹åŒ–ä¸€è¾†è½¦éƒ½è¦äº²æ‰‹å»å†™é‚£ä¸€å¤§æ®µåˆå§‹åŒ–çš„ä»£ç ã€‚è¿™æ˜¯å¼•å…¥ IoC Container çš„ç¬¬ä¸€ä¸ªå¥½å¤„ã€‚IoC Container çš„ç¬¬äºŒä¸ªå¥½å¤„æ˜¯ï¼šæˆ‘ä»¬åœ¨åˆ›å»ºå®ä¾‹çš„æ—¶å€™ä¸éœ€è¦äº†è§£å…¶ä¸­çš„ç»†èŠ‚ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªè½¦ instance æ—¶å€™ï¼Œæ˜¯ä»åº•å±‚å¾€ä¸Šå±‚ new çš„ï¼š</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/165d5a3a9c6d3ba9.webp" data-desc-position="bottom"><img src="!assets/Spring/165d5a3a9c6d3ba9.webp" alt="img" style="zoom:80%;"></a></p> <p>è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£æ•´ä¸ª Car/Framework/Bottom/Tire ç±»æ„é€ å‡½æ•°æ˜¯æ€ä¹ˆå®šä¹‰çš„ï¼Œæ‰èƒ½ä¸€æ­¥ä¸€æ­¥ new æ³¨å…¥ã€‚è€Œ IoC Container åœ¨è¿›è¡Œè¿™ä¸ªå·¥ä½œçš„æ—¶å€™æ˜¯åè¿‡æ¥çš„ï¼Œå®ƒå…ˆä»æœ€ä¸Šå±‚å¼€å§‹å¾€ä¸‹æ‰¾ä¾èµ–å…³ç³»ï¼Œåˆ°è¾¾æœ€åº•å±‚ä¹‹åå†å¾€ä¸Šä¸€æ­¥ä¸€æ­¥ newï¼ˆæœ‰ç‚¹åƒæ·±åº¦ä¼˜å…ˆéå†ï¼‰ï¼š</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/165d5a3be0740718.webp" data-desc-position="bottom"><img src="!assets/Spring/165d5a3be0740718.webp" alt="img" style="zoom:80%;"></a></p> <p>IoC Container å¯ä»¥ç›´æ¥éšè—å…·ä½“çš„åˆ›å»ºå®ä¾‹çš„ç»†èŠ‚.</p> <h2 id="3hellospring">3ã€HelloSpring<a class="headerlink" href="#3hellospring" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <h3 id="31å¯¼å…¥ä¾èµ–">3.1ã€å¯¼å…¥ä¾èµ–<a class="headerlink" href="#31å¯¼å…¥ä¾èµ–" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nt">&lt;dependency&gt;</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-webmvc<span class="nt">&lt;/artifactId&gt;</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">    </span><span class="nt">&lt;version&gt;</span>5.2.4.RELEASE<span class="nt">&lt;/version&gt;</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="nt">&lt;/dependency&gt;</span>
</span></code></pre></div> <h3 id="32ç¼–å†™ä»£ç ">3.2ã€ç¼–å†™ä»£ç <a class="headerlink" href="#32ç¼–å†™ä»£ç " title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <ol> <li> <p>ç¼–å†™ä¸€ä¸ªHelloå®ä½“ç±»</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Hello</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">str</span><span class="p">;</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getStr</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">str</span><span class="p">;</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setStr</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">str</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">str</span><span class="p">;</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="w">    </span><span class="nd">@Override</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">toString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">"Hello{"</span><span class="w"> </span><span class="o">+</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="w">                </span><span class="s">"str='"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="sc">'\''</span><span class="w"> </span><span class="o">+</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="w">                </span><span class="sc">'}'</span><span class="p">;</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p>ç¼–å†™Springé…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œå‘½åä¸ºbeans.xml</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="o">&lt;?</span><span class="n">xml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">"1.0"</span><span class="w"> </span><span class="n">encoding</span><span class="o">=</span><span class="s">"UTF-8"</span><span class="o">?&gt;</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="o">&lt;</span><span class="n">beans</span><span class="w"> </span><span class="n">xmlns</span><span class="o">=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">       </span><span class="n">xmlns</span><span class="p">:</span><span class="n">xsi</span><span class="o">=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">       </span><span class="n">xsi</span><span class="p">:</span><span class="n">schemaLocation</span><span class="o">=</span><span class="s">"http://www.springframework.org/schema/beans</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="s">        https://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="o">&gt;</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">    </span><span class="o">&lt;!--</span><span class="n">ä½¿ç”¨Springæ¥åˆ›å»ºå¯¹è±¡</span><span class="err">ï¼Œ</span><span class="n">åœ¨Springä¸­è¿™äº›éƒ½ç§°ä¸ºBean</span><span class="o">--&gt;</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">bean</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="s">"hello"</span><span class="w"> </span><span class="kd">class</span><span class="err">="</span><span class="nc">com</span><span class="p">.</span><span class="na">kuang</span><span class="p">.</span><span class="na">pojo</span><span class="p">.</span><span class="na">Hello</span><span class="s">"&gt;</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="s">        &lt;property name="</span><span class="n">str</span><span class="s">" value="</span><span class="n">Spring</span><span class="s">"/&gt;</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="s">    &lt;/bean&gt;</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="s">&lt;/beans&gt;</span>
</span></code></pre></div> </li> <li> <p>æµ‹è¯•</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyTest</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">        </span><span class="c1">//è·å–Springçš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">        </span><span class="n">ApplicationContext</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ClassPathXmlApplicationContext</span><span class="p">(</span><span class="s">"beans.xml"</span><span class="p">);</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="w">        </span><span class="c1">//å¯¹è±¡ç°åœ¨éƒ½åœ¨Springä¸­ç®¡ç†äº†ï¼Œå¦‚æœè¦ä½¿ç”¨ï¼Œç›´æ¥å»é‡Œé¢å–å‡ºæ¥å°±å¯ä»¥ï¼</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="w">        </span><span class="n">Hello</span><span class="w"> </span><span class="n">hello</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Hello</span><span class="p">)</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="s">"hello"</span><span class="p">);</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">hello</span><span class="p">.</span><span class="na">toString</span><span class="p">());</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="p">}</span>
</span></code></pre></div> </li> </ol> <h3 id="33æ€è€ƒ">3.3ã€æ€è€ƒ<a class="headerlink" href="#33æ€è€ƒ" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <ul> <li>Helloå¯¹è±¡æ˜¯è°åˆ›å»ºçš„ï¼Ÿ<ul> <li>ã€helloå¯¹è±¡æ˜¯ç”±Springåˆ›å»ºçš„ã€‘</li> </ul> </li> <li>Helloå¯¹è±¡çš„å±æ€§æ˜¯æ€ä¹ˆè®¾ç½®çš„ï¼Ÿ<ul> <li>ã€helloå¯¹è±¡çš„å±æ€§æ˜¯ç”±Springå®¹å™¨è®¾ç½®çš„ã€‘</li> </ul> </li> </ul> <p>è¿™ä¸ªè¿‡ç¨‹å°±å«åšæ§åˆ¶åè½¬ï¼š</p> <ul> <li>æ§åˆ¶ï¼šè°æ¥æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºï¼Œä¼ ç»Ÿåº”ç”¨ç¨‹åºçš„å¯¹è±¡ç”±ç¨‹åºæœ¬èº«æ§åˆ¶åˆ›å»ºçš„ï¼Œä½¿ç”¨Springåï¼Œå¯¹è±¡æ˜¯ç”±Springæ¥åˆ›å»ºçš„</li> <li>åè½¬ï¼šç¨‹åºæœ¬èº«ä¸åˆ›å»ºå¯¹è±¡ï¼Œç”±ä¸»åŠ¨çš„ç¼–ç¨‹å˜æˆè¢«åŠ¨çš„æ¥æ”¶ã€‚</li> </ul> <p>ä¾èµ–æ³¨å…¥ï¼šå°±æ˜¯åˆ©ç”¨setæ–¹æ³•æ¥è¿›è¡Œæ³¨å…¥çš„ã€‚</p> <p><strong>IoCæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œç”±ä¸»åŠ¨çš„ç¼–ç¨‹å˜æˆè¢«åŠ¨çš„æ¥æ”¶ã€‚</strong></p> <h2 id="4iocåˆ›å»ºå¯¹è±¡çš„æ–¹å¼">4ã€Iocåˆ›å»ºå¯¹è±¡çš„æ–¹å¼<a class="headerlink" href="#4iocåˆ›å»ºå¯¹è±¡çš„æ–¹å¼" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <ol> <li> <p>ä½¿ç”¨æ— å‚æ„é€ åˆ›å»ºå¯¹è±¡ï¼Œé»˜è®¤ï¼</p> </li> <li> <p>å¦‚æœä½¿ç”¨æœ‰å‚æ„é€ åˆ›å»ºå¯¹è±¡</p> <ol> <li> <p>ä¸‹æ ‡èµ‹å€¼</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="cm">&lt;!--ç¬¬ä¸€ç§ï¼Œä¸‹æ ‡èµ‹å€¼--&gt;</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"user"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.User"</span><span class="nt">&gt;</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">    </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">"0"</span><span class="w"> </span><span class="na">value=</span><span class="s">"ç´æ±Ÿ"</span><span class="nt">/&gt;</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div> </li> <li> <p>ç±»å‹</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="cm">&lt;!--ç¬¬äºŒç§æ–¹å¼ï¼Œé€šè¿‡ç±»å‹åˆ›å»º--&gt;</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"user"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.User"</span><span class="nt">&gt;</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">    </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">type=</span><span class="s">"java.lang.String"</span><span class="w"> </span><span class="na">value=</span><span class="s">"qinjiang"</span><span class="nt">/&gt;</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div> </li> <li> <p>å‚æ•°å</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="cm">&lt;!--ç¬¬ä¸‰ç§ï¼Œç›´æ¥é€šè¿‡å‚æ•°åæ¥è®¾ç½®--&gt;</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"user"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.User"</span><span class="nt">&gt;</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">    </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">name=</span><span class="s">"name"</span><span class="w"> </span><span class="na">value=</span><span class="s">"ç´æ±Ÿ"</span><span class="nt">/&gt;</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div> </li> </ol> </li> </ol> <p>æ€»ç»“ï¼šåœ¨é…ç½®æ–‡ä»¶åŠ è½½çš„æ—¶å€™ï¼Œå®¹å™¨ä¸­ç®¡ç†çš„å¯¹è±¡å°±å·²ç»å®ä¾‹åŒ–äº†ï¼</p> <h2 id="5springé…ç½®">5ã€Springé…ç½®<a class="headerlink" href="#5springé…ç½®" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <h3 id="51åˆ«å">5.1ã€åˆ«å<a class="headerlink" href="#51åˆ«å" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="cm">&lt;!--åˆ«åï¼Œå¦‚æœæ·»åŠ äº†åˆ«åï¼Œå°±å¯ä»¥ä½¿ç”¨åˆ«åè·å–åˆ°è¿™ä¸ªå¯¹è±¡--&gt;</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="nt">&lt;alias</span><span class="w"> </span><span class="na">name=</span><span class="s">"user"</span><span class="w"> </span><span class="na">alias=</span><span class="s">"userNew"</span><span class="nt">/&gt;</span>
</span></code></pre></div> <h3 id="52beançš„é…ç½®">5.2ã€Beançš„é…ç½®<a class="headerlink" href="#52beançš„é…ç½®" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="cm">&lt;!--</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="cm">    idï¼šbeançš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äºä»¥å‰å­¦çš„å¯¹è±¡å</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="cm">    classï¼šbeanå¯¹è±¡æ‰€å¯¹åº”çš„å…¨é™å®šåï¼šåŒ…å+ç±»å‹</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="cm">    nameï¼šä¹Ÿæ˜¯åˆ«åï¼Œè€Œä¸”nameå¯ä»¥åŒæ—¶å–å¤šä¸ªåˆ«å</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="cm">--&gt;</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"userT"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.UserT"</span><span class="w"> </span><span class="na">name=</span><span class="s">"user2,u2 u3;u4"</span><span class="nt">&gt;</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"name"</span><span class="w"> </span><span class="na">value=</span><span class="s">"hello"</span><span class="nt">/&gt;</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div> <h3 id="53import">5.3ã€import<a class="headerlink" href="#53import" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>importä¸€èˆ¬ç”¨äºå›¢é˜Ÿå¼€å‘ï¼Œå®ƒå¯ä»¥å°†å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œå¯¼å…¥åˆå¹¶ä¸ºä¸€ä¸ªã€‚</p> <p>å‡è®¾ï¼Œç°åœ¨é¡¹ç›®ä¸­æœ‰å¤šä¸ªäººå¼€å‘ï¼Œè¿™ä¸‰ä¸ªäººè´Ÿè´£ä¸åŒçš„ç±»çš„å¼€å‘ï¼Œä¸åŒçš„ç±»éœ€è¦æ³¨å†Œåœ¨ä¸åŒçš„beanä¸­ï¼Œå¯ä»¥åˆ©ç”¨importå°†æ‰€æœ‰äººçš„beans.xmlåˆå¹¶ä¸ºä¸€ä¸ªæ€»çš„ï¼</p> <ul> <li> <p>å¼ ä¸‰</p> </li> <li> <p>æå››</p> </li> <li> <p>ç‹äº”</p> </li> <li> <p>applicationContext.xml</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nt">&lt;import</span><span class="w"> </span><span class="na">resource=</span><span class="s">"beans.xml"</span><span class="nt">/&gt;</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="nt">&lt;import</span><span class="w"> </span><span class="na">resource=</span><span class="s">"beans2.xml"</span><span class="nt">/&gt;</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="nt">&lt;import</span><span class="w"> </span><span class="na">resource=</span><span class="s">"beans3.xml"</span><span class="nt">/&gt;</span>
</span></code></pre></div> </li> </ul> <p>ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥ä½¿ç”¨æ€»çš„å°±å¯ä»¥äº†ï¼</p> <h2 id="6ä¾èµ–æ³¨å…¥di">6ã€ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰<a class="headerlink" href="#6ä¾èµ–æ³¨å…¥di" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <h3 id="61æ„é€ å™¨æ³¨å…¥">6.1ã€æ„é€ å™¨æ³¨å…¥<a class="headerlink" href="#61æ„é€ å™¨æ³¨å…¥" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>è§ <a href="#4ã€IoCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼" style="text-decoration:none">4ã€ IoCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼</a></p> <h3 id="62setæ–¹å¼æ³¨å…¥">6.2ã€Setæ–¹å¼æ³¨å…¥<a class="headerlink" href="#62setæ–¹å¼æ³¨å…¥" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <ul> <li>ä¾èµ–æ³¨å…¥ï¼šSetæ³¨å…¥ï¼<ul> <li>ä¾èµ–ï¼šbeanå¯¹è±¡çš„åˆ›å»ºä¾èµ–äºå®¹å™¨ï¼</li> <li>æ³¨å…¥ï¼šbeanå¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§ï¼Œç”±å®¹å™¨æ¥æ³¨å…¥ï¼</li> </ul> </li> </ul> <p>ã€ç¯å¢ƒæ­å»ºã€‘</p> <ol> <li> <p>å¤æ‚ç±»å‹</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Address</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">address</span><span class="p">;</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getAddress</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">address</span><span class="p">;</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setAddress</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">address</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">address</span><span class="p">;</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p>çœŸå®æµ‹è¯•å¯¹è±¡</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Student</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Address</span><span class="w"> </span><span class="n">address</span><span class="p">;</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">books</span><span class="p">;</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hobbies</span><span class="p">;</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">card</span><span class="p">;</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">games</span><span class="p">;</span>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">wife</span><span class="p">;</span>
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Properties</span><span class="w"> </span><span class="n">info</span><span class="p">;</span>
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p>beans.xml</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="nt">&lt;beans</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w">       </span><span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="w">       </span><span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="s">        https://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"address"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.Address"</span><span class="nt">&gt;</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"address"</span><span class="w"> </span><span class="na">value=</span><span class="s">"è¥¿å®‰"</span><span class="nt">/&gt;</span>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="w">    </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"student"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.Student"</span><span class="nt">&gt;</span>
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="w">        </span><span class="cm">&lt;!--ç¬¬ä¸€ç§ï¼Œæ™®é€šå€¼æ³¨å…¥ï¼Œvalue--&gt;</span>
</span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"name"</span><span class="w"> </span><span class="na">value=</span><span class="s">"ç´æ±Ÿ"</span><span class="nt">/&gt;</span>
</span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a>
</span><span id="__span-24-15"><a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a><span class="w">        </span><span class="cm">&lt;!--ç¬¬äºŒç§ï¼ŒBeanæ³¨å…¥ï¼Œref--&gt;</span>
</span><span id="__span-24-16"><a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"address"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"address"</span><span class="nt">/&gt;</span>
</span><span id="__span-24-17"><a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a>
</span><span id="__span-24-18"><a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a><span class="w">        </span><span class="cm">&lt;!--æ•°ç»„--&gt;</span>
</span><span id="__span-24-19"><a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"books"</span><span class="nt">&gt;</span>
</span><span id="__span-24-20"><a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a><span class="w">            </span><span class="nt">&lt;array&gt;</span>
</span><span id="__span-24-21"><a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a><span class="w">                </span><span class="nt">&lt;value&gt;</span>çº¢æ¥¼æ¢¦<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-24-22"><a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a><span class="w">                </span><span class="nt">&lt;value&gt;</span>æ°´æµ’ä¼ <span class="nt">&lt;/value&gt;</span>
</span><span id="__span-24-23"><a id="__codelineno-24-23" name="__codelineno-24-23" href="#__codelineno-24-23"></a><span class="w">                </span><span class="nt">&lt;value&gt;</span>è¥¿æ¸¸è®°<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-24-24"><a id="__codelineno-24-24" name="__codelineno-24-24" href="#__codelineno-24-24"></a><span class="w">                </span><span class="nt">&lt;value&gt;</span>ä¸‰å›½æ¼”ä¹‰<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-24-25"><a id="__codelineno-24-25" name="__codelineno-24-25" href="#__codelineno-24-25"></a><span class="w">            </span><span class="nt">&lt;/array&gt;</span>
</span><span id="__span-24-26"><a id="__codelineno-24-26" name="__codelineno-24-26" href="#__codelineno-24-26"></a><span class="w">        </span><span class="nt">&lt;/property&gt;</span>
</span><span id="__span-24-27"><a id="__codelineno-24-27" name="__codelineno-24-27" href="#__codelineno-24-27"></a>
</span><span id="__span-24-28"><a id="__codelineno-24-28" name="__codelineno-24-28" href="#__codelineno-24-28"></a><span class="w">        </span><span class="cm">&lt;!--List--&gt;</span>
</span><span id="__span-24-29"><a id="__codelineno-24-29" name="__codelineno-24-29" href="#__codelineno-24-29"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"hobbies"</span><span class="nt">&gt;</span>
</span><span id="__span-24-30"><a id="__codelineno-24-30" name="__codelineno-24-30" href="#__codelineno-24-30"></a><span class="w">            </span><span class="nt">&lt;list&gt;</span>
</span><span id="__span-24-31"><a id="__codelineno-24-31" name="__codelineno-24-31" href="#__codelineno-24-31"></a><span class="w">                </span><span class="nt">&lt;value&gt;</span>å¬æ­Œ<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-24-32"><a id="__codelineno-24-32" name="__codelineno-24-32" href="#__codelineno-24-32"></a><span class="w">                </span><span class="nt">&lt;value&gt;</span>æ•²ä»£ç <span class="nt">&lt;/value&gt;</span>
</span><span id="__span-24-33"><a id="__codelineno-24-33" name="__codelineno-24-33" href="#__codelineno-24-33"></a><span class="w">                </span><span class="nt">&lt;value&gt;</span>çœ‹ç”µå½±<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-24-34"><a id="__codelineno-24-34" name="__codelineno-24-34" href="#__codelineno-24-34"></a><span class="w">            </span><span class="nt">&lt;/list&gt;</span>
</span><span id="__span-24-35"><a id="__codelineno-24-35" name="__codelineno-24-35" href="#__codelineno-24-35"></a><span class="w">        </span><span class="nt">&lt;/property&gt;</span>
</span><span id="__span-24-36"><a id="__codelineno-24-36" name="__codelineno-24-36" href="#__codelineno-24-36"></a>
</span><span id="__span-24-37"><a id="__codelineno-24-37" name="__codelineno-24-37" href="#__codelineno-24-37"></a><span class="w">        </span><span class="cm">&lt;!--Map--&gt;</span>
</span><span id="__span-24-38"><a id="__codelineno-24-38" name="__codelineno-24-38" href="#__codelineno-24-38"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"card"</span><span class="nt">&gt;</span>
</span><span id="__span-24-39"><a id="__codelineno-24-39" name="__codelineno-24-39" href="#__codelineno-24-39"></a><span class="w">            </span><span class="nt">&lt;map&gt;</span>
</span><span id="__span-24-40"><a id="__codelineno-24-40" name="__codelineno-24-40" href="#__codelineno-24-40"></a><span class="w">                </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">"èº«ä»½è¯"</span><span class="w"> </span><span class="na">value=</span><span class="s">"23424234232343"</span><span class="nt">/&gt;</span>
</span><span id="__span-24-41"><a id="__codelineno-24-41" name="__codelineno-24-41" href="#__codelineno-24-41"></a><span class="w">                </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">"é“¶è¡Œå¡"</span><span class="w"> </span><span class="na">value=</span><span class="s">"34223424242243"</span><span class="nt">/&gt;</span>
</span><span id="__span-24-42"><a id="__codelineno-24-42" name="__codelineno-24-42" href="#__codelineno-24-42"></a><span class="w">            </span><span class="nt">&lt;/map&gt;</span>
</span><span id="__span-24-43"><a id="__codelineno-24-43" name="__codelineno-24-43" href="#__codelineno-24-43"></a><span class="w">        </span><span class="nt">&lt;/property&gt;</span>
</span><span id="__span-24-44"><a id="__codelineno-24-44" name="__codelineno-24-44" href="#__codelineno-24-44"></a>
</span><span id="__span-24-45"><a id="__codelineno-24-45" name="__codelineno-24-45" href="#__codelineno-24-45"></a><span class="w">        </span><span class="cm">&lt;!--Set--&gt;</span>
</span><span id="__span-24-46"><a id="__codelineno-24-46" name="__codelineno-24-46" href="#__codelineno-24-46"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"games"</span><span class="nt">&gt;</span>
</span><span id="__span-24-47"><a id="__codelineno-24-47" name="__codelineno-24-47" href="#__codelineno-24-47"></a><span class="w">            </span><span class="nt">&lt;set&gt;</span>
</span><span id="__span-24-48"><a id="__codelineno-24-48" name="__codelineno-24-48" href="#__codelineno-24-48"></a><span class="w">                </span><span class="nt">&lt;value&gt;</span>LOL<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-24-49"><a id="__codelineno-24-49" name="__codelineno-24-49" href="#__codelineno-24-49"></a><span class="w">                </span><span class="nt">&lt;value&gt;</span>COC<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-24-50"><a id="__codelineno-24-50" name="__codelineno-24-50" href="#__codelineno-24-50"></a><span class="w">                </span><span class="nt">&lt;value&gt;</span>BOB<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-24-51"><a id="__codelineno-24-51" name="__codelineno-24-51" href="#__codelineno-24-51"></a><span class="w">            </span><span class="nt">&lt;/set&gt;</span>
</span><span id="__span-24-52"><a id="__codelineno-24-52" name="__codelineno-24-52" href="#__codelineno-24-52"></a><span class="w">        </span><span class="nt">&lt;/property&gt;</span>
</span><span id="__span-24-53"><a id="__codelineno-24-53" name="__codelineno-24-53" href="#__codelineno-24-53"></a>
</span><span id="__span-24-54"><a id="__codelineno-24-54" name="__codelineno-24-54" href="#__codelineno-24-54"></a><span class="w">        </span><span class="cm">&lt;!--null--&gt;</span>
</span><span id="__span-24-55"><a id="__codelineno-24-55" name="__codelineno-24-55" href="#__codelineno-24-55"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"wife"</span><span class="nt">&gt;</span>
</span><span id="__span-24-56"><a id="__codelineno-24-56" name="__codelineno-24-56" href="#__codelineno-24-56"></a><span class="w">            </span><span class="nt">&lt;null/&gt;</span>
</span><span id="__span-24-57"><a id="__codelineno-24-57" name="__codelineno-24-57" href="#__codelineno-24-57"></a><span class="w">        </span><span class="nt">&lt;/property&gt;</span>
</span><span id="__span-24-58"><a id="__codelineno-24-58" name="__codelineno-24-58" href="#__codelineno-24-58"></a>
</span><span id="__span-24-59"><a id="__codelineno-24-59" name="__codelineno-24-59" href="#__codelineno-24-59"></a><span class="w">        </span><span class="cm">&lt;!--Properties--&gt;</span>
</span><span id="__span-24-60"><a id="__codelineno-24-60" name="__codelineno-24-60" href="#__codelineno-24-60"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"info"</span><span class="nt">&gt;</span>
</span><span id="__span-24-61"><a id="__codelineno-24-61" name="__codelineno-24-61" href="#__codelineno-24-61"></a><span class="w">            </span><span class="nt">&lt;props&gt;</span>
</span><span id="__span-24-62"><a id="__codelineno-24-62" name="__codelineno-24-62" href="#__codelineno-24-62"></a><span class="w">                </span><span class="nt">&lt;prop</span><span class="w"> </span><span class="na">key=</span><span class="s">"å­¦å·"</span><span class="nt">&gt;</span>1412231<span class="nt">&lt;/prop&gt;</span>
</span><span id="__span-24-63"><a id="__codelineno-24-63" name="__codelineno-24-63" href="#__codelineno-24-63"></a><span class="w">                </span><span class="nt">&lt;prop</span><span class="w"> </span><span class="na">key=</span><span class="s">"æ€§åˆ«"</span><span class="nt">&gt;</span>ç”·<span class="nt">&lt;/prop&gt;</span>
</span><span id="__span-24-64"><a id="__codelineno-24-64" name="__codelineno-24-64" href="#__codelineno-24-64"></a><span class="w">                </span><span class="nt">&lt;prop</span><span class="w"> </span><span class="na">key=</span><span class="s">"å§“å"</span><span class="nt">&gt;</span>å°æ˜<span class="nt">&lt;/prop&gt;</span>
</span><span id="__span-24-65"><a id="__codelineno-24-65" name="__codelineno-24-65" href="#__codelineno-24-65"></a><span class="w">            </span><span class="nt">&lt;/props&gt;</span>
</span><span id="__span-24-66"><a id="__codelineno-24-66" name="__codelineno-24-66" href="#__codelineno-24-66"></a><span class="w">        </span><span class="nt">&lt;/property&gt;</span>
</span><span id="__span-24-67"><a id="__codelineno-24-67" name="__codelineno-24-67" href="#__codelineno-24-67"></a><span class="w">    </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-24-68"><a id="__codelineno-24-68" name="__codelineno-24-68" href="#__codelineno-24-68"></a>
</span><span id="__span-24-69"><a id="__codelineno-24-69" name="__codelineno-24-69" href="#__codelineno-24-69"></a><span class="nt">&lt;/beans&gt;</span>
</span></code></pre></div> </li> <li> <p>æµ‹è¯•ç±»</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyTest</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="w">        </span><span class="n">ApplicationContext</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ClassPathXmlApplicationContext</span><span class="p">(</span><span class="s">"beans.xml"</span><span class="p">);</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="w">        </span><span class="n">Student</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Student</span><span class="p">)</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="s">"student"</span><span class="p">);</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">student</span><span class="p">.</span><span class="na">toString</span><span class="p">());</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="p">}</span>
</span></code></pre></div> </li> </ol> <h3 id="63æ‰©å±•æ–¹å¼æ³¨å…¥">6.3ã€æ‰©å±•æ–¹å¼æ³¨å…¥<a class="headerlink" href="#63æ‰©å±•æ–¹å¼æ³¨å…¥" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>å¯ä»¥ä½¿ç”¨på‘½åç©ºé—´å’Œcå‘½åç©ºé—´è¿›è¡Œæ³¨å…¥</p> <p>å®˜æ–¹è§£é‡Šï¼š <a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/image-20200317234553650.png" data-desc-position="bottom"><img src="!assets/Spring/image-20200317234553650.png" alt="image-20200317234553650" style></a></p> <p>ä½¿ç”¨ï¼š</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="nt">&lt;beans</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">       </span><span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">       </span><span class="na">xmlns:p=</span><span class="s">"http://www.springframework.org/schema/p"</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">       </span><span class="na">xmlns:c=</span><span class="s">"http://www.springframework.org/schema/c"</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">       </span><span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="s">        https://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="w">    </span><span class="cm">&lt;!--på‘½åç©ºé—´æ³¨å…¥ï¼Œå¯ä»¥ç›´æ¥æ³¨å…¥å±æ€§çš„å€¼ï¼šproperty--&gt;</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"user"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.User"</span><span class="w"> </span><span class="na">p:age=</span><span class="s">"19"</span><span class="w"> </span><span class="na">p:name=</span><span class="s">"ç´æ±Ÿ"</span><span class="nt">/&gt;</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="w">    </span><span class="cm">&lt;!--cå‘½åç©ºé—´æ³¨å…¥ï¼Œé€šè¿‡æ„é€ å™¨æ³¨å…¥ï¼šconstructor-args--&gt;</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"user2"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.User"</span><span class="w"> </span><span class="na">c:age=</span><span class="s">"12"</span><span class="w"> </span><span class="na">c:name=</span><span class="s">"å°çº¢"</span><span class="nt">/&gt;</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="nt">&lt;/beans&gt;</span>
</span></code></pre></div> <p>æµ‹è¯•ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="nd">@Test</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test2</span><span class="p">(){</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="w">    </span><span class="n">ApplicationContext</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ClassPathXmlApplicationContext</span><span class="p">(</span><span class="s">"userbeans.xml"</span><span class="p">);</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="w">    </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="s">"user"</span><span class="p">,</span><span class="w"> </span><span class="n">User</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="w">    </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="s">"user2"</span><span class="p">,</span><span class="w"> </span><span class="n">User</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user2</span><span class="p">);</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="p">}</span>
</span></code></pre></div> <h3 id="64beançš„ä½œç”¨åŸŸ">6.4ã€beançš„ä½œç”¨åŸŸ<a class="headerlink" href="#64beançš„ä½œç”¨åŸŸ" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/image-20200318144358878.png" data-desc-position="bottom"><img src="!assets/Spring/image-20200318144358878.png" alt="image-20200318144358878" style></a></p> <ol> <li> <p>å•ä¾‹æ¨¡å¼ï¼ˆSpringçš„é»˜è®¤æœºåˆ¶ï¼‰</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="o">&lt;</span><span class="n">bean</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="s">"user2"</span><span class="w"> </span><span class="kd">class</span><span class="err">="</span><span class="nc">com</span><span class="p">.</span><span class="na">kuang</span><span class="p">.</span><span class="na">pojo</span><span class="p">.</span><span class="na">User</span><span class="s">" c:age="</span><span class="mi">12</span><span class="s">" c:name="</span><span class="n">å°çº¢</span><span class="s">" scope="</span><span class="n">singleton</span><span class="s">"/&gt;</span>
</span></code></pre></div> </li> <li> <p>åŸå‹æ¨¡å¼ï¼šæ¯æ¬¡ä»å®¹å™¨ä¸­getçš„æ—¶å€™ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°å¯¹è±¡ï¼</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="o">&lt;</span><span class="n">bean</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="s">"user2"</span><span class="w"> </span><span class="kd">class</span><span class="err">="</span><span class="nc">com</span><span class="p">.</span><span class="na">kuang</span><span class="p">.</span><span class="na">pojo</span><span class="p">.</span><span class="na">User</span><span class="s">" c:age="</span><span class="mi">12</span><span class="s">" c:name="</span><span class="n">å°çº¢</span><span class="s">" scope="</span><span class="n">prototype</span><span class="s">"/&gt;</span>
</span></code></pre></div> </li> <li> <p>å…¶ä½™çš„requestã€sessionã€applicationè¿™äº›åªèƒ½åœ¨webå¼€å‘ä¸­ä½¿ç”¨åˆ°ï¼</p> </li> </ol> <h2 id="7beançš„è£…é…æ–¹å¼">7ã€beançš„è£…é…æ–¹å¼<a class="headerlink" href="#7beançš„è£…é…æ–¹å¼" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>åœ¨Springä¸­æœ‰ä¸‰ç§è£…é…çš„æ–¹å¼</p> <ol> <li>åœ¨xmlä¸­æ˜¾ç¤ºåœ°é…ç½®</li> <li>åœ¨javaä¸­æ˜¾ç¤ºåœ°é…ç½®</li> <li>éšå¼åœ°è‡ªåŠ¨è£…é…bean</li> </ol> <p>Spring ä¸­çš„ bean é»˜è®¤æ˜¯å•ä¾‹æ¨¡å¼ï¼ŒSpring æ¡†æ¶å¹¶æ²¡æœ‰å¯¹å•ä¾‹ bean è¿›è¡Œå¤šçº¿ç¨‹çš„å°è£…å¤„ç†ã€‚</p> <p>å®é™…ä¸Šå¤§éƒ¨åˆ†æ—¶å€™ Spring bean æ— çŠ¶æ€çš„ï¼ˆæ¯”å¦‚ dao ç±»ï¼‰ï¼Œæ‰€æœ‰æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ bean ä¹Ÿæ˜¯å®‰å…¨çš„ï¼Œä½†å¦‚æœ bean æœ‰çŠ¶æ€çš„è¯ï¼ˆæ¯”å¦‚ view model å¯¹è±¡ï¼‰ï¼Œé‚£å°±è¦å¼€å‘è€…è‡ªå·±å»ä¿è¯çº¿ç¨‹å®‰å…¨äº†ï¼Œæœ€ç®€å•çš„å°±æ˜¯æ”¹å˜ bean çš„ä½œç”¨åŸŸï¼ŒæŠŠ â€œsingletonâ€ å˜æ›´ä¸º â€œprototypeâ€ï¼Œè¿™æ ·è¯·æ±‚ bean ç›¸å½“äº new Bean()äº†ï¼Œæ‰€ä»¥å°±å¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨äº†ã€‚</p> <ul> <li>æœ‰çŠ¶æ€å°±æ˜¯æœ‰æ•°æ®å­˜å‚¨åŠŸèƒ½ã€‚</li> <li>æ— çŠ¶æ€å°±æ˜¯ä¸ä¼šä¿å­˜æ•°æ®ã€‚</li> </ul> <h3 id="71æµ‹è¯•">7.1ã€æµ‹è¯•<a class="headerlink" href="#71æµ‹è¯•" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>ç¯å¢ƒæ­å»ºï¼šä¸€ä¸ªäººæœ‰ä¸¤ä¸ªå® ç‰©ï¼</p> <ol> <li> <p>Peopleç±»</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">People</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Dog</span><span class="w"> </span><span class="n">dog</span><span class="p">;</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Cat</span><span class="w"> </span><span class="n">cat</span><span class="p">;</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p>Dogç±»</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Dog</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">shout</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"wang~"</span><span class="p">);</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p>Catç±»</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Cat</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">shout</span><span class="p">(){</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"miao~"</span><span class="p">);</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p>beançš„é…ç½®</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"dog"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.Dog"</span><span class="nt">/&gt;</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"cat"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.Cat"</span><span class="nt">/&gt;</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"people"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.People"</span><span class="nt">&gt;</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"name"</span><span class="w"> </span><span class="na">value=</span><span class="s">"å°æ˜"</span><span class="nt">/&gt;</span>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"dog"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"dog"</span><span class="nt">/&gt;</span>
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"cat"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"cat"</span><span class="nt">/&gt;</span>
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div> </li> <li> <p>æµ‹è¯•</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyTest</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="w">    </span><span class="nd">@Test</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test1</span><span class="p">(){</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="w">        </span><span class="n">ApplicationContext</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ClassPathXmlApplicationContext</span><span class="p">(</span><span class="s">"beans.xml"</span><span class="p">);</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="w">        </span><span class="n">People</span><span class="w"> </span><span class="n">people</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="s">"people"</span><span class="p">,</span><span class="w"> </span><span class="n">People</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="w">        </span><span class="n">people</span><span class="p">.</span><span class="na">getDog</span><span class="p">().</span><span class="na">shout</span><span class="p">();</span>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a><span class="w">        </span><span class="n">people</span><span class="p">.</span><span class="na">getCat</span><span class="p">().</span><span class="na">shout</span><span class="p">();</span>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a><span class="p">}</span>
</span></code></pre></div> </li> </ol> <h3 id="72byname">7.2ã€ByName<a class="headerlink" href="#72byname" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"dog"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.Dog"</span><span class="nt">/&gt;</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"cat"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.Cat"</span><span class="nt">/&gt;</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="cm">&lt;!--</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="cm">    byNameï¼šä¼šè‡ªåŠ¨åœ¨å®¹å™¨ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡setæ–¹æ³•åé¢çš„å€¼å¯¹åº”çš„beanidï¼</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="cm">    --&gt;</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"people"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.People"</span><span class="w"> </span><span class="na">autowire=</span><span class="s">"byName"</span><span class="nt">&gt;</span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"name"</span><span class="w"> </span><span class="na">value=</span><span class="s">"å°æ˜"</span><span class="nt">/&gt;</span>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div> <p>æ³¨æ„ï¼šbyNameçš„æ—¶å€™ï¼Œéœ€è¦ä¿è¯æ‰€æœ‰çš„beançš„idå”¯ä¸€ï¼Œå¹¶ä¸”è¿™ä¸ªbeanéœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„setæ–¹æ³•çš„å€¼ä¸€è‡´ï¼</p> <h3 id="73bytype">7.3ã€ByType<a class="headerlink" href="#73bytype" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.Dog"</span><span class="nt">/&gt;</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.Cat"</span><span class="nt">/&gt;</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="cm">&lt;!--</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="cm">    byTypeï¼šä¼šè‡ªåŠ¨åœ¨å®¹å™¨ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡å±æ€§ç±»å‹ç›¸åŒçš„beanï¼</span>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="cm">    --&gt;</span>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"people"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.People"</span><span class="w"> </span><span class="na">autowire=</span><span class="s">"byType"</span><span class="nt">&gt;</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"name"</span><span class="w"> </span><span class="na">value=</span><span class="s">"å°æ˜"</span><span class="nt">/&gt;</span>
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div> <p>æ³¨æ„ï¼šbyTypeçš„æ—¶å€™ï¼Œéœ€è¦ä¿è¯æ‰€æœ‰beançš„classå”¯ä¸€ï¼Œå¹¶ä¸”è¿™ä¸ªbeanéœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„ç±»å‹ä¸€è‡´ï¼</p> <h3 id="74æ³¨è§£å®ç°">7.4ã€æ³¨è§£å®ç°<a class="headerlink" href="#74æ³¨è§£å®ç°" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>ä½¿ç”¨æ³¨è§£é¡»è¦é…ç½®æ³¨è§£çš„æ”¯æŒï¼š</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="nt">&lt;context:annotation-config/&gt;</span>
</span></code></pre></div> <p>å®Œæ•´æ–‡ä»¶ï¼š</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="nt">&lt;beans</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="w">    </span><span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="w">    </span><span class="na">xmlns:context=</span><span class="s">"http://www.springframework.org/schema/context"</span>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="w">    </span><span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="s">        https://www.springframework.org/schema/beans/spring-beans.xsd</span>
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="s">        http://www.springframework.org/schema/context</span>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a><span class="s">        https://www.springframework.org/schema/context/spring-context.xsd"</span><span class="nt">&gt;</span>
</span><span id="__span-38-9"><a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a>
</span><span id="__span-38-10"><a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="w">    </span><span class="nt">&lt;context:annotation-config/&gt;</span>
</span><span id="__span-38-11"><a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a>
</span><span id="__span-38-12"><a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a><span class="nt">&lt;/beans&gt;</span>
</span></code></pre></div> <p><strong>@Autowired</strong></p> <p>ç›´æ¥åœ¨å±æ€§ä¸Šä½¿ç”¨å³å¯ï¼ä¹Ÿå¯ä»¥åœ¨setæ–¹å¼ä¸Šä½¿ç”¨ï¼</p> <p>ä½¿ç”¨@Autowiredå¯ä»¥ä¸ç”¨ç¼–å†™setæ–¹æ³•ï¼Œå‰ææ˜¯è¿™ä¸ªè‡ªåŠ¨è£…é…çš„çš„å±æ€§åœ¨IoCï¼ˆSpringï¼‰å®¹å™¨ä¸­å­˜åœ¨ã€‚</p> <p>æµ‹è¯•ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">People</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="w">    </span><span class="c1">//å¦‚æœæ˜¾ç¤ºåœ°å®šä¹‰äº†Autowiredçš„requiredå±æ€§ä¸ºfalseï¼Œè¯´æ˜è¿™ä¸ªå¯¹è±¡å¯ä»¥ä¸ºnullï¼Œå¦åˆ™ä¸å…è®¸ä¸ºç©ºï¼</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="w">    </span><span class="nd">@Autowired</span><span class="p">(</span><span class="n">required</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Dog</span><span class="w"> </span><span class="n">dog</span><span class="p">;</span>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="w">    </span><span class="nd">@Autowired</span>
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Cat</span><span class="w"> </span><span class="n">cat</span><span class="p">;</span>
</span><span id="__span-39-7"><a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-39-8"><a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a><span class="p">}</span>
</span></code></pre></div> <p>@Autowiredé»˜è®¤æŒ‰byTypeæ–¹å¼è¿›è¡Œè£…é…ï¼Œå½“æœ‰å¤šä¸ªç›¸åŒçš„ç±»å‹æ—¶æŒ‰ç…§byNameæ–¹å¼è£…é…ï¼ˆé»˜è®¤è·å–å’Œå±æ€§åç›¸ç­‰çš„idçš„beanï¼‰ï¼Œå¦‚æœæ²¡æœ‰ç¬¦åˆbyNameçš„beanï¼Œéœ€è¦æ‰‹åŠ¨ä½¿ç”¨<strong>@Qualifier(value = "xxx")</strong>å»æŒ‡å®šå”¯ä¸€çš„beanå¯¹è±¡æ³¨å…¥ï¼</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"dog"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.Dog"</span><span class="nt">/&gt;</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"cat1"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.Cat"</span><span class="nt">/&gt;</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"cat2"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.Cat"</span><span class="nt">/&gt;</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"people"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.People"</span><span class="nt">/&gt;</span>
</span></code></pre></div> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">People</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="w">    </span><span class="nd">@Autowired</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Dog</span><span class="w"> </span><span class="n">dog</span><span class="p">;</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="w">    </span><span class="nd">@Autowired</span>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="w">    </span><span class="nd">@Qualifier</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"cat1"</span><span class="p">)</span>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Cat</span><span class="w"> </span><span class="n">cat</span><span class="p">;</span>
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-41-8"><a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a><span class="p">}</span>
</span></code></pre></div> <p><strong>@Resource</strong></p> <p>å’Œ @Autowired ç±»ä¼¼</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"dog"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.Dog"</span><span class="nt">/&gt;</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"cat1"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.Cat"</span><span class="nt">/&gt;</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"cat2"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.Cat"</span><span class="nt">/&gt;</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"people"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.pojo.People"</span><span class="nt">/&gt;</span>
</span></code></pre></div> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">People</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="w">    </span><span class="nd">@Resource</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Dog</span><span class="w"> </span><span class="n">dog</span><span class="p">;</span>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="w">    </span><span class="nd">@Resource</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"cat1"</span><span class="p">)</span>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Cat</span><span class="w"> </span><span class="n">cat</span><span class="p">;</span>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a><span class="p">}</span>
</span></code></pre></div> <p>å…³äº@Autowiredå’Œ@Resourceï¼š</p> <ul> <li>éƒ½æ˜¯ç”¨æ¥è‡ªåŠ¨è£…é…çš„ï¼Œéƒ½å¯ä»¥æ”¾åœ¨å±æ€§å­—æ®µä¸Šã€‚</li> <li>@Autowiredé»˜è®¤é€šè¿‡byTypeæ–¹å¼å®ç°ï¼Œè€Œä¸”å¿…é¡»è¦æ±‚è¿™ä¸ªå¯¹è±¡å­˜åœ¨ï¼</li> <li>@Resourceé»˜è®¤é€šè¿‡byNameæ–¹å¼å®ç°ï¼Œå¦‚æœæ‰¾ä¸åˆ°åå­—ï¼Œåˆ™é€šè¿‡byTypeæ–¹å¼å®ç°ã€‚</li> </ul> <p>æ‰©å±•ï¼š</p> <p><strong>@Nullable</strong>ï¼šå­—æ®µæ ‡è®°äº†è¿™ä¸ªæ³¨è§£ï¼Œè¯´æ˜è¿™ä¸ªå­—æ®µå¯ä»¥ä¸ºç©ºã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="kd">public</span><span class="w"> </span><span class="nf">People</span><span class="p">(</span><span class="nd">@Nullable</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="p">}</span>
</span></code></pre></div> <h2 id="8ä½¿ç”¨æ³¨è§£å¼€å‘">8ã€ä½¿ç”¨æ³¨è§£å¼€å‘<a class="headerlink" href="#8ä½¿ç”¨æ³¨è§£å¼€å‘" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>åœ¨Spring4ä¹‹åï¼Œè¦ä½¿ç”¨æ³¨è§£å¼€å‘ï¼Œå¿…é¡»è¦ä¿è¯aopçš„åŒ…å·²ç»å¯¼å…¥</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/image-20200318210404506.png" data-desc-position="bottom"><img src="!assets/Spring/image-20200318210404506.png" alt="image-20200318210404506" style="zoom:80%;"></a></p> <ol> <li> <p>bean</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="nt">&lt;beans</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a><span class="w">       </span><span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="w">       </span><span class="na">xmlns:context=</span><span class="s">"http://www.springframework.org/schema/context"</span>
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a><span class="w">       </span><span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
</span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a><span class="s">        https://www.springframework.org/schema/beans/spring-beans.xsd</span>
</span><span id="__span-45-7"><a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a><span class="s">        http://www.springframework.org/schema/context</span>
</span><span id="__span-45-8"><a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a><span class="s">        https://www.springframework.org/schema/context/spring-context.xsd"</span><span class="nt">&gt;</span>
</span><span id="__span-45-9"><a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a>
</span><span id="__span-45-10"><a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a><span class="w">    </span><span class="cm">&lt;!--æŒ‡å®šè¦æ‰«æçš„åŒ…ï¼Œè¿™ä¸ªåŒ…ä¸‹çš„æ³¨è§£å°±ä¼šç”Ÿæ•ˆ--&gt;</span>
</span><span id="__span-45-11"><a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a><span class="w">    </span><span class="nt">&lt;context:component-scan</span><span class="w"> </span><span class="na">base-package=</span><span class="s">"com.kuang.pojo"</span><span class="nt">/&gt;</span>
</span><span id="__span-45-12"><a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a>
</span><span id="__span-45-13"><a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a><span class="nt">&lt;/beans&gt;</span>
</span></code></pre></div> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="c1">//ç­‰ä»·äº &lt;bean id="user" class="com.kuang.pojo.User"/&gt;</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="nd">@Component</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"ç´æ±Ÿ"</span><span class="p">;</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p>å±æ€§å¦‚ä½•æ³¨å…¥</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="nd">@Component</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="w">    </span><span class="c1">//ç›¸å½“äº &lt;property name="name" value="hello"/&gt;</span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="w">    </span><span class="nd">@Value</span><span class="p">(</span><span class="s">"hello"</span><span class="p">)</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p>è¡ç”Ÿçš„æ³¨è§£ @componentæœ‰å‡ ä¸ªè¡ç”Ÿçš„æ³¨è§£ï¼Œåœ¨webå¼€å‘ä¸­ï¼Œä¼šæŒ‰ç…§MVCä¸‰å±‚æ¶æ„åˆ†å±‚ï¼</p> <ul> <li>dao ã€@Repositoryã€‘</li> <li>service ã€@Serviceã€‘ </li> <li>controller ã€@Controllerã€‘</li> </ul> <p>è¿™å››ä¸ªæ³¨è§£åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ä»£è¡¨å°†æŸä¸ªç±»æ³¨å†Œåˆ°Springä¸­ï¼Œè£…é…Beanã€‚</p> </li> <li> <p>è‡ªåŠ¨è£…é… <a href="#7.4ã€ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…" style="text-decoration:none">è§ 7.4ã€ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…</a></p> </li> <li> <p>ä½œç”¨åŸŸ</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="c1">//ç­‰ä»·äº &lt;bean id="user" class="com.kuang.pojo.User"/&gt;</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="nd">@Component</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="nd">@Scope</span><span class="p">(</span><span class="s">"singleton"</span><span class="p">)</span>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="w">    </span><span class="c1">//ç›¸å½“äº &lt;property name="name" value="hello"/&gt;</span>
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a><span class="w">    </span><span class="nd">@Value</span><span class="p">(</span><span class="s">"hello"</span><span class="p">)</span>
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-48-8"><a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p>å°ç»“ xmlä¸æ³¨è§£ï¼š</p> <ul> <li>xmlæ›´åŠ ä¸‡èƒ½ï¼Œé€‚ç”¨äºä»»ä½•åœºåˆï¼ç»´æŠ¤ç®€å•æ–¹ä¾¿</li> <li>æ³¨è§£ä¸æ˜¯è‡ªå·±ç±»ä½¿ç”¨ä¸äº†ï¼Œç»´æŠ¤ç›¸å¯¹å¤æ‚ï¼</li> </ul> <p>xmlä¸æ³¨è§£æœ€ä½³å®è·µï¼š</p> <ul> <li>xmlç”¨æ¥ç®¡ç†bean</li> <li>æ³¨è§£åªè´Ÿè´£å®Œæˆå±æ€§çš„æ³¨å…¥</li> </ul> </li> </ol> <h2 id="9ä½¿ç”¨javaçš„æ–¹å¼é…ç½®spring">9ã€ä½¿ç”¨Javaçš„æ–¹å¼é…ç½®Spring<a class="headerlink" href="#9ä½¿ç”¨javaçš„æ–¹å¼é…ç½®spring" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>å¯ä»¥ä¸ä½¿ç”¨Springçš„xmlé…ç½®ï¼Œå…¨æƒäº¤ç»™Javaæ¥åšï¼</p> <p>JavaConfigæ˜¯Springçš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œåœ¨Spring4ä¹‹åï¼Œå®ƒæˆä¸ºäº†ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼</p> <p><strong>æµ‹è¯•ç±»ï¼š</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyTest</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="w">        </span><span class="n">ApplicationContext</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AnnotationConfigApplicationContext</span><span class="p">(</span><span class="n">KuangConfig</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a><span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="s">"user"</span><span class="p">,</span><span class="w"> </span><span class="n">User</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-49-5"><a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a>
</span><span id="__span-49-6"><a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>
</span><span id="__span-49-7"><a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-49-8"><a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a><span class="p">}</span>
</span></code></pre></div> <p><strong>æ–¹å¼1</strong>ï¼š</p> <p>å®ä½“ç±»ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="w">    </span><span class="nd">@Value</span><span class="p">(</span><span class="s">"hello"</span><span class="p">)</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a><span class="p">}</span>
</span></code></pre></div> <p>é…ç½®æ–‡ä»¶</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="nd">@Configuration</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">KuangConfig</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a><span class="w">    </span><span class="nd">@Bean</span>
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="nf">user</span><span class="p">(){</span>
</span><span id="__span-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span>
</span><span id="__span-51-6"><a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-51-7"><a id="__codelineno-51-7" name="__codelineno-51-7" href="#__codelineno-51-7"></a><span class="p">}</span>
</span></code></pre></div> <p>æ­¤æ–¹æ³•åˆ›å»ºçš„Bean Idä¸ºæ–¹æ³•å</p> <p><strong>æ–¹å¼2</strong>ï¼š</p> <p>å®ä½“ç±»</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="nd">@Component</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="w">    </span><span class="nd">@Value</span><span class="p">(</span><span class="s">"hello"</span><span class="p">)</span>
</span><span id="__span-52-4"><a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-52-5"><a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a>
</span><span id="__span-52-6"><a id="__codelineno-52-6" name="__codelineno-52-6" href="#__codelineno-52-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-52-7"><a id="__codelineno-52-7" name="__codelineno-52-7" href="#__codelineno-52-7"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-52-8"><a id="__codelineno-52-8" name="__codelineno-52-8" href="#__codelineno-52-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-52-9"><a id="__codelineno-52-9" name="__codelineno-52-9" href="#__codelineno-52-9"></a><span class="p">}</span>
</span></code></pre></div> <p>é…ç½®æ–‡ä»¶</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="nd">@ComponentScan</span><span class="p">(</span><span class="s">"com.kuang.pojo"</span><span class="p">)</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">KuangConfig</span><span class="w"> </span><span class="p">{}</span>
</span></code></pre></div> <p>æ­¤æ–¹æ³•åˆ›å»ºçš„BeanIdä¸ºç±»åï¼Œä¹Ÿå¯ä»¥åœ¨@Component("")ä¸­è®¾ç½®BeanId</p> <h2 id="10ä»£ç†æ¨¡å¼">10ã€ä»£ç†æ¨¡å¼<a class="headerlink" href="#10ä»£ç†æ¨¡å¼" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>ä¸ºä»€ä¹ˆè¦å­¦ä»£ç†æ¨¡å¼ï¼Ÿå› ä¸ºè¿™å°±æ˜¯SpringAOPçš„åº•å±‚ï¼</p> <p>ä»£ç†æ¨¡å¼çš„åˆ†ç±»ï¼š</p> <ul> <li>é™æ€ä»£ç†</li> <li>åŠ¨æ€ä»£ç†</li> </ul> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/image-20200319123439283.png" data-desc-position="bottom"><img src="!assets/Spring/image-20200319123439283.png" alt="image-20200319123439283" style="zoom: 67%;"></a></p> <h3 id="101é™æ€ä»£ç†">10.1ã€é™æ€ä»£ç†<a class="headerlink" href="#101é™æ€ä»£ç†" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>è§’è‰²åˆ†æï¼š</p> <ul> <li>æŠ½è±¡è§’è‰²ï¼šä¸€èˆ¬ä¼šä½¿ç”¨æ¥å£æˆ–æŠ½è±¡ç±»æ¥è§£å†³</li> <li>çœŸå®è§’è‰²ï¼šè¢«ä»£ç†çš„è§’è‰²</li> <li>ä»£ç†è§’è‰²ï¼šä»£ç†çœŸå®è§’è‰²ï¼Œä»£ç†çœŸå®è§’è‰²åï¼Œä¸€èˆ¬ä¼šåšä¸€äº›é™„å±æ“ä½œ</li> <li>å®¢æˆ·ï¼šè®¿é—®ä»£ç†å¯¹è±¡çš„äºº</li> </ul> <p>æœ‰ä¸€ä¸ªæ‰“å°æœºçš„ç±»</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Printer</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">(){</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æ‰“å°ï¼"</span><span class="p">);</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a><span class="p">}</span>
</span></code></pre></div> <p>æˆ‘æƒ³åœ¨æ‰“å°ä¹‹å‰å…ˆè®°å½•ä¸€ä¸‹æ—¥å¿—æ€ä¹ˆåšï¼Ÿæœ€ç®€å•çš„æ–¹æ³•ï¼šåœ¨æ‰“å°çš„åŠŸèƒ½å‰é¢ç›´æ¥åŠ ä¸Šè®°å½•æ—¥å¿—çš„åŠŸèƒ½ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Printer</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">(){</span>
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"è®°å½•æ—¥å¿—ï¼"</span><span class="p">);</span>
</span><span id="__span-55-4"><a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æ‰“å°ï¼"</span><span class="p">);</span>
</span><span id="__span-55-5"><a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-55-6"><a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a><span class="p">}</span>
</span></code></pre></div> <p>çœ‹ä¸Šå»å¥½åƒæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬ä¿®æ”¹äº†æ‰“å°æœºçš„æºä»£ç ï¼Œ<strong>ç ´åäº†é¢å‘å¯¹è±¡çš„å¼€é—­åŸåˆ™</strong>ï¼Œæœ‰å¯èƒ½å½±å“åˆ°å…¶å®ƒåŠŸèƒ½ã€‚æ€ä¹ˆè§£å†³å‘¢ï¼Ÿå¾ˆå®¹æ˜“å¯ä»¥æƒ³åˆ°ï¼Œæ—¢ç„¶ä¸èƒ½ä¿®æ”¹åŸæ¥çš„ä»£ç ï¼Œé‚£æˆ‘æ–°å»ºä¸€ä¸ªç±»å§ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">LogPrinter</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Printer</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">(){</span>
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"è®°å½•æ—¥å¿—ï¼"</span><span class="p">);</span>
</span><span id="__span-56-4"><a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æ‰“å°ï¼"</span><span class="p">);</span>
</span><span id="__span-56-5"><a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-56-6"><a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a><span class="p">}</span>
</span></code></pre></div> <p>è¿™ä¸ªç±»ç»§æ‰¿äº†æ‰“å°æœºçš„ç±»ï¼Œ<strong>é‡å†™äº†æ‰“å°æœºçš„printæ–¹æ³•ï¼Œæä¾›äº†è®°å½•æ—¥å¿—çš„åŠŸèƒ½</strong>ï¼Œä»¥åéœ€è¦æ‰“å°æœºçš„æ—¶å€™ä½¿ç”¨è¿™ä¸ªç±»å°±å¥½ã€‚é—®é¢˜ä¼¼ä¹å¾—åˆ°äº†è§£å†³ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„åŸºç¡€ä¸Šè¿›ä¸€æ­¥çš„ä¼˜åŒ–ï¼š</p> <p>å…ˆæŠ½è±¡å‡ºä¸€ä¸ªæ¥å£ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">IPrinter</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">();</span>
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="p">}</span>
</span></code></pre></div> <p>æ‰“å°æœºç±»å®ç°è¿™ä¸ªæ¥å£:</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Printer</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">IPrinter</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a><span class="w">       </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">(){</span>
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="w">       </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æ‰“å°ï¼"</span><span class="p">);</span>
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a><span class="p">}</span>
</span></code></pre></div> <p><strong>åˆ›å»ºæ‰“å°æœºä»£ç†ç±»</strong>ä¹Ÿå®ç°è¯¥æ¥å£ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­å°†æ‰“å°æœºå¯¹è±¡ä¼ è¿›å»ï¼Œå®ç°æ¥å£çš„æ‰“å°æ–¹æ³•æ—¶è°ƒç”¨æ‰“å°æœºå¯¹è±¡çš„æ‰“å°æ–¹æ³•å¹¶åœ¨å‰é¢åŠ ä¸Šè®°å½•æ—¥å¿—çš„åŠŸèƒ½:</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PrinterProxy</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">IPrinter</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">IPrinter</span><span class="w"> </span><span class="n">printer</span><span class="p">;</span>
</span><span id="__span-59-3"><a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">PrinterProxy</span><span class="p">(){</span>
</span><span id="__span-59-4"><a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">printer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">printer</span><span class="p">();</span>
</span><span id="__span-59-5"><a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-59-6"><a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a><span class="w">    </span><span class="nd">@Override</span>
</span><span id="__span-59-7"><a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-59-8"><a id="__codelineno-59-8" name="__codelineno-59-8" href="#__codelineno-59-8"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"è®°å½•æ—¥å¿—"</span><span class="p">);</span>
</span><span id="__span-59-9"><a id="__codelineno-59-9" name="__codelineno-59-9" href="#__codelineno-59-9"></a><span class="w">        </span><span class="n">printer</span><span class="p">.</span><span class="na">print</span><span class="p">();</span>
</span><span id="__span-59-10"><a id="__codelineno-59-10" name="__codelineno-59-10" href="#__codelineno-59-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-59-11"><a id="__codelineno-59-11" name="__codelineno-59-11" href="#__codelineno-59-11"></a><span class="p">}</span>
</span></code></pre></div> <p>è¯•ä¸€æŠŠå§ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-60-3"><a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="w">        </span><span class="n">PrinterProxy</span><span class="w"> </span><span class="n">proxy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PrinterProxy</span><span class="p">();</span>
</span><span id="__span-60-4"><a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a><span class="w">        </span><span class="n">proxy</span><span class="p">.</span><span class="na">print</span><span class="p">();</span>
</span><span id="__span-60-5"><a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-60-6"><a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a><span class="p">}</span>
</span></code></pre></div> <p>ç»“æœå‡ºæ¥äº†ï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a>è®°å½•æ—¥å¿—
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a>æ‰“å°
</span></code></pre></div> <p>ä»¥åå°±å¯ä»¥ç›´æ¥å®ä¾‹åŒ–PrinterProxyå¯¹è±¡è°ƒç”¨å®ƒçš„æ‰“å°æ–¹æ³•äº†ï¼Œè¿™å°±æ˜¯é™æ€ä»£ç†æ¨¡å¼ï¼Œé€šè¿‡æŠ½è±¡å‡ºæ¥å£è®©ç¨‹åºçš„æ‰©å±•æ€§å’Œçµæ´»æ€§æ›´é«˜äº†ã€‚</p> <p>ä½†æ˜¯ï¼Œå¦‚æœæ‰“å°æœºç±»ä¸­è¿˜æœ‰åˆ«çš„æ–¹æ³•ï¼Œä¹Ÿéœ€è¦åŠ ä¸Šè®°å½•æ—¥å¿—çš„åŠŸèƒ½ï¼Œå°±ä¸å¾—ä¸å°†è®°å½•æ—¥å¿—çš„åŠŸèƒ½å†™néã€‚è¿›ä¸€æ­¥å¦‚æœè¿˜æœ‰ç”µè§†æœºï¼Œç”µå†°ç®±çš„ç±»é‡Œé¢çš„æ‰€æœ‰æ–¹æ³•ä¹Ÿéœ€è¦åŠ ä¸Šè®°å½•æ—¥å¿—çš„åŠŸèƒ½ï¼Œé‚£è¦é‡å¤çš„åœ°æ–¹å°±æ›´å¤šäº†ã€‚</p> <p>ä»£ç†æ¨¡å¼çš„å¥½å¤„ï¼š</p> <ul> <li>å¯ä»¥ä½¿çœŸå®è§’è‰²çš„æ“ä½œæ›´åŠ çº¯ç²¹ï¼ä¸ç”¨å»å…³æ³¨ä¸€äº›å…¬å…±çš„ä¸šåŠ¡</li> <li>å…¬å…±ä¸šåŠ¡å°±äº¤ç»™ä»£ç†è§’è‰²ï¼å®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥ï¼</li> <li>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•çš„æ—¶å€™ï¼Œæ–¹ä¾¿é›†ä¸­ç®¡ç†ï¼</li> </ul> <p>ç¼ºç‚¹ï¼šä¸€ä¸ªçœŸå®è§’è‰²å°±ä¼šäº§ç”Ÿä¸€ä¸ªä»£ç†è§’è‰²ï¼›ä»£ç é‡ä¼šç¿»å€ï¼Œå¼€å‘æ•ˆç‡ä¼šå˜ä½~</p> <h3 id="102åŠ¨æ€ä»£ç†">10.2ã€åŠ¨æ€ä»£ç†<a class="headerlink" href="#102åŠ¨æ€ä»£ç†" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <ul> <li>åŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†è§’è‰²ä¸€æ ·</li> <li>åŠ¨æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œä¸æ˜¯ç›´æ¥å†™å¥½çš„ï¼</li> <li>åŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤å¤§ç±»ï¼šåŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†ï¼›åŸºäºç±»çš„åŠ¨æ€ä»£ç†<ul> <li>åŸºäºæ¥å£--- JDK åŠ¨æ€ä»£ç†</li> <li>åŸºäºç±»ï¼šcglib</li> <li>javaå­—èŠ‚ç å®ç°ï¼šjavasist</li> </ul> </li> </ul> <p>è¦æƒ³ä¸é‡å¤å†™è®°å½•æ—¥å¿—çš„åŠŸèƒ½ï¼Œé’ˆå¯¹æ¯ä¸€ä¸ªæ¥å£å®ç°ä¸€ä¸ªä»£ç†ç±»çš„åšæ³•è‚¯å®šä¸å¯è¡Œäº†ï¼Œå¯ä¸å¯ä»¥è®©è¿™äº›ä»£ç†ç±»çš„å¯¹è±¡<strong>è‡ªåŠ¨ç”Ÿæˆ</strong>å‘¢ï¼ŸJdk æä¾›äº†<strong>invocationHandler </strong>æ¥å£å’Œ <strong>Proxy</strong> ç±»ï¼Œå€ŸåŠ©è¿™ä¸¤ä¸ªå·¥å…·å¯ä»¥è¾¾åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚</p> <p>invocationHandler æ¥å£ä¸Šåœºï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="c1">//Object proxy:è¢«ä»£ç†çš„å¯¹è±¡ </span>
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a><span class="c1">//Method method:è¦è°ƒç”¨çš„æ–¹æ³• </span>
</span><span id="__span-62-3"><a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a><span class="c1">//Object[] args:æ–¹æ³•è°ƒç”¨æ—¶æ‰€éœ€è¦å‚æ•° </span>
</span><span id="__span-62-4"><a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">InvocationHandler</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-62-5"><a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a><span class="w">     </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">invoke</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">proxy</span><span class="p">,</span><span class="w"> </span><span class="n">Method</span><span class="w"> </span><span class="n">method</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Throwable</span><span class="p">;</span>
</span><span id="__span-62-6"><a id="__codelineno-62-6" name="__codelineno-62-6" href="#__codelineno-62-6"></a><span class="p">}</span>
</span></code></pre></div> <p>æ¥å£é‡Œåªæœ‰ä¸€ä¸ªæ–¹æ³• invokeï¼Œè¿™ä¸ªæ–¹æ³•éå¸¸é‡è¦ã€‚</p> <p>Proxyç±»ä¸Šåœºï¼Œå®ƒé‡Œé¢æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„æ–¹æ³• newProxyInstanceï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="c1">//CLassLoader loader:è¢«ä»£ç†å¯¹è±¡çš„ç±»åŠ è½½å™¨ </span>
</span><span id="__span-63-2"><a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a><span class="c1">//Class&lt;?&gt; interfaces:è¢«ä»£ç†ç±»å…¨éƒ¨çš„æ¥å£ </span>
</span><span id="__span-63-3"><a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a><span class="c1">//InvocationHandler h:å®ç°InvocationHandleræ¥å£çš„å¯¹è±¡ </span>
</span><span id="__span-63-4"><a id="__codelineno-63-4" name="__codelineno-63-4" href="#__codelineno-63-4"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">newProxyInstance</span><span class="p">(</span><span class="n">ClassLoader</span><span class="w"> </span><span class="n">loader</span><span class="p">,</span><span class="w"> </span><span class="n">Class</span><span class="o">&lt;?&gt;[]</span><span class="w"> </span><span class="n">interfaces</span><span class="p">,</span><span class="w"> </span><span class="n">InvocationHandler</span><span class="w"> </span><span class="n">h</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="w"> </span><span class="p">{}</span>
</span></code></pre></div> <p>è°ƒç”¨ Proxy çš„ newProxyInstance æ–¹æ³•å¯ä»¥ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚</p> <p>æ¥å£IPrinter å’Œ è¯¥æ¥å£çš„å®ç°ç±» Printerçš„ä»£ç åŒå‰ã€‚</p> <p>å®ç°ä¸€ä¸ªç±»ï¼Œè¯¥ç±»ç”¨æ¥åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå®ƒå®ç°äº†InvocationHandleræ¥å£ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PrintHandler</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">InvocationHandler</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a><span class="w">    </span><span class="c1">//è¢«ä»£ç†çš„å¯¹è±¡</span>
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">object</span><span class="p">;</span>
</span><span id="__span-64-4"><a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a>
</span><span id="__span-64-5"><a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">newProxyInstance</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">targetObject</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-6"><a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">object</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">targetObject</span><span class="p">;</span>
</span><span id="__span-64-7"><a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a><span class="w">        </span><span class="c1">//object.getClass().getClassLoader()ï¼šè¢«ä»£ç†å¯¹è±¡çš„ç±»åŠ è½½å™¨</span>
</span><span id="__span-64-8"><a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a><span class="w">        </span><span class="c1">//object.getClass().getInterfaces()ï¼šè¢«ä»£ç†å¯¹è±¡çš„å®ç°æ¥å£</span>
</span><span id="__span-64-9"><a id="__codelineno-64-9" name="__codelineno-64-9" href="#__codelineno-64-9"></a><span class="w">        </span><span class="c1">//thisï¼šå½“å‰å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å®ç°äº† InvocationHandler æ¥å£ï¼Œæ‰€ä»¥æœ‰invokeæ–¹æ³•ï¼Œé€šè¿‡invokeæ–¹æ³•å¯ä»¥è°ƒç”¨è¢«ä»£ç†å¯¹è±¡çš„æ–¹æ³•</span>
</span><span id="__span-64-10"><a id="__codelineno-64-10" name="__codelineno-64-10" href="#__codelineno-64-10"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Proxy</span><span class="p">.</span><span class="na">newProxyInstance</span><span class="p">(</span><span class="n">object</span><span class="p">.</span><span class="na">getClass</span><span class="p">().</span><span class="na">getClassLoader</span><span class="p">(),</span><span class="w"> </span><span class="n">object</span><span class="p">.</span><span class="na">getClass</span><span class="p">().</span><span class="na">getInterfaces</span><span class="p">(),</span><span class="w"> </span><span class="k">this</span><span class="p">);</span>
</span><span id="__span-64-11"><a id="__codelineno-64-11" name="__codelineno-64-11" href="#__codelineno-64-11"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-64-12"><a id="__codelineno-64-12" name="__codelineno-64-12" href="#__codelineno-64-12"></a>
</span><span id="__span-64-13"><a id="__codelineno-64-13" name="__codelineno-64-13" href="#__codelineno-64-13"></a><span class="w">    </span><span class="c1">//è¯¥æ–¹æ³•åœ¨ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•æ—¶è°ƒç”¨</span>
</span><span id="__span-64-14"><a id="__codelineno-64-14" name="__codelineno-64-14" href="#__codelineno-64-14"></a><span class="w">    </span><span class="nd">@Override</span>
</span><span id="__span-64-15"><a id="__codelineno-64-15" name="__codelineno-64-15" href="#__codelineno-64-15"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">invoke</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">proxy</span><span class="p">,</span><span class="w"> </span><span class="n">Method</span><span class="w"> </span><span class="n">method</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Throwable</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-16"><a id="__codelineno-64-16" name="__codelineno-64-16" href="#__codelineno-64-16"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"è®°å½•æ—¥å¿—ï¼"</span><span class="p">);</span>
</span><span id="__span-64-17"><a id="__codelineno-64-17" name="__codelineno-64-17" href="#__codelineno-64-17"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">method</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="n">object</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">);</span>
</span><span id="__span-64-18"><a id="__codelineno-64-18" name="__codelineno-64-18" href="#__codelineno-64-18"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-64-19"><a id="__codelineno-64-19" name="__codelineno-64-19" href="#__codelineno-64-19"></a><span class="p">}</span>
</span></code></pre></div> <p>invoke() æ–¹æ³•å°±æ˜¯ç”Ÿæˆçš„ä»£ç†ç±»ä¸­çš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ä¼šå»è‡ªåŠ¨è°ƒç”¨çš„æ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è°ƒç”¨äº†è¢«ä»£ç†å¯¹è±¡çš„æ–¹æ³•: method.invoke(targetObject, args)ï¼›å¯ä»¥åœ¨è¿™é‡ŒåŠ ä¸Šéœ€è¦çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚è°ƒç”¨æ–¹æ³•å‰è®°å½•æ—¥å¿—åŠŸèƒ½ã€‚</p> <p>æµ‹è¯•ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-65-3"><a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="w">        </span><span class="n">ProxyHandler</span><span class="w"> </span><span class="n">proxyHandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ProxyHandler</span><span class="p">();</span>
</span><span id="__span-65-4"><a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a><span class="w">        </span><span class="n">IPrinter</span><span class="w"> </span><span class="n">printer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">IPrinter</span><span class="p">)</span><span class="w"> </span><span class="n">proxyHandler</span><span class="p">.</span><span class="na">newProxyInstance</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Printer</span><span class="p">());</span>
</span><span id="__span-65-5"><a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a><span class="w">        </span><span class="n">printer</span><span class="p">.</span><span class="na">print</span><span class="p">();</span>
</span><span id="__span-65-6"><a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-65-7"><a id="__codelineno-65-7" name="__codelineno-65-7" href="#__codelineno-65-7"></a><span class="p">}</span>
</span></code></pre></div> <p>æ‰“å°ç»“æœ ï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a>è®°å½•æ—¥å¿—
</span><span id="__span-66-2"><a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a>æ‰“å°
</span></code></pre></div> <h2 id="11aop">11ã€AOP<a class="headerlink" href="#11aop" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <h3 id="111ä»€ä¹ˆæ˜¯aop">11.1ã€ä»€ä¹ˆæ˜¯AOP<a class="headerlink" href="#111ä»€ä¹ˆæ˜¯aop" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>AOPï¼ˆAspect-Oriented Programmingï¼Œé¢å‘æ–¹é¢ç¼–ç¨‹ï¼‰ï¼Œé€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸé—´åŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ï¼Œå¯ä»¥è¯´æ˜¯OOPï¼ˆObject-Oriented Programingï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼‰çš„è¡¥å……å’Œå®Œå–„ã€‚OOPå¼•å…¥å°è£…ã€ç»§æ‰¿å’Œå¤šæ€æ€§ç­‰æ¦‚å¿µæ¥å»ºç«‹ä¸€ç§å¯¹è±¡å±‚æ¬¡ç»“æ„ï¼Œç”¨ä»¥æ¨¡æ‹Ÿå…¬å…±è¡Œä¸ºçš„ä¸€ä¸ªé›†åˆã€‚å½“æˆ‘ä»¬éœ€è¦ä¸ºåˆ†æ•£çš„å¯¹è±¡å¼•å…¥å…¬å…±è¡Œä¸ºçš„æ—¶å€™ï¼ŒOOPåˆ™æ˜¾å¾—æ— èƒ½ä¸ºåŠ›ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒOOPå…è®¸ä½ å®šä¹‰ä»ä¸Šåˆ°ä¸‹çš„å…³ç³»ï¼Œä½†å¹¶ä¸é€‚åˆå®šä¹‰ä»å·¦åˆ°å³çš„å…³ç³»ã€‚ä¾‹å¦‚æ—¥å¿—åŠŸèƒ½ã€‚æ—¥å¿—ä»£ç å¾€å¾€æ°´å¹³åœ°æ•£å¸ƒåœ¨æ‰€æœ‰å¯¹è±¡å±‚æ¬¡ä¸­ï¼Œè€Œä¸å®ƒæ‰€æ•£å¸ƒåˆ°çš„å¯¹è±¡çš„æ ¸å¿ƒåŠŸèƒ½æ¯«æ— å…³ç³»ã€‚å¯¹äºå…¶ä»–ç±»å‹çš„ä»£ç ï¼Œå¦‚å®‰å…¨æ€§ã€å¼‚å¸¸å¤„ç†å’Œé€æ˜çš„æŒç»­æ€§ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™ç§æ•£å¸ƒåœ¨å„å¤„çš„æ— å…³çš„ä»£ç è¢«ç§°ä¸ºæ¨ªåˆ‡ï¼ˆcross-cuttingï¼‰ä»£ç ï¼Œåœ¨OOPè®¾è®¡ä¸­ï¼Œå®ƒå¯¼è‡´äº†å¤§é‡ä»£ç çš„é‡å¤ï¼Œè€Œä¸åˆ©äºå„ä¸ªæ¨¡å—çš„é‡ç”¨ã€‚</p> <p>è€ŒAOPæŠ€æœ¯åˆ™æ°æ°ç›¸åï¼Œå®ƒåˆ©ç”¨ä¸€ç§ç§°ä¸ºâ€œæ¨ªåˆ‡â€çš„æŠ€æœ¯ï¼Œå‰–è§£å¼€å°è£…çš„å¯¹è±¡å†…éƒ¨ï¼Œå¹¶å°†é‚£äº›å½±å“äº†å¤šä¸ªç±»çš„å…¬å…±è¡Œä¸ºå°è£…åˆ°ä¸€ä¸ªå¯é‡ç”¨æ¨¡å—ï¼Œå¹¶å°†å…¶åä¸ºâ€œAspectâ€ï¼Œå³åˆ‡é¢ã€‚æ‰€è°“â€œåˆ‡é¢â€ï¼Œç®€å•åœ°è¯´ï¼Œå°±æ˜¯å°†é‚£äº›ä¸ä¸šåŠ¡æ— å…³ï¼Œå´ä¸ºä¸šåŠ¡æ¨¡å—æ‰€å…±åŒè°ƒç”¨çš„é€»è¾‘æˆ–è´£ä»»å°è£…èµ·æ¥ï¼Œä¾¿äºå‡å°‘ç³»ç»Ÿçš„é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—é—´çš„è€¦åˆåº¦ï¼Œå¹¶æœ‰åˆ©äºæœªæ¥çš„å¯æ“ä½œæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚AOPä»£è¡¨çš„æ˜¯ä¸€ä¸ªæ¨ªå‘çš„å…³ç³»ï¼Œå¦‚æœè¯´â€œå¯¹è±¡â€æ˜¯ä¸€ä¸ªç©ºå¿ƒçš„åœ†æŸ±ä½“ï¼Œå…¶ä¸­å°è£…çš„æ˜¯å¯¹è±¡çš„å±æ€§å’Œè¡Œä¸ºï¼›é‚£ä¹ˆé¢å‘æ–¹é¢ç¼–ç¨‹çš„æ–¹æ³•ï¼Œå°±ä»¿ä½›ä¸€æŠŠåˆ©åˆƒï¼Œå°†è¿™äº›ç©ºå¿ƒåœ†æŸ±ä½“å‰–å¼€ï¼Œä»¥è·å¾—å…¶å†…éƒ¨çš„æ¶ˆæ¯ã€‚è€Œå‰–å¼€çš„åˆ‡é¢ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„â€œåˆ‡é¢â€äº†ã€‚ç„¶åå®ƒåˆä»¥å·§å¤ºå¤©åŠŸçš„å¦™æ‰‹å°†è¿™äº›å‰–å¼€çš„åˆ‡é¢å¤åŸï¼Œä¸ç•™ç—•è¿¹ã€‚</p> <p>ä½¿ç”¨â€œæ¨ªåˆ‡â€æŠ€æœ¯ï¼ŒAOPæŠŠè½¯ä»¶ç³»ç»Ÿåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šæ ¸å¿ƒå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚ä¸šåŠ¡å¤„ç†çš„ä¸»è¦æµç¨‹æ˜¯æ ¸å¿ƒå…³æ³¨ç‚¹ï¼Œä¸ä¹‹å…³ç³»ä¸å¤§çš„éƒ¨åˆ†æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚æ¨ªåˆ‡å…³æ³¨ç‚¹çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼Œä»–ä»¬ç»å¸¸å‘ç”Ÿåœ¨æ ¸å¿ƒå…³æ³¨ç‚¹çš„å¤šå¤„ï¼Œè€Œå„å¤„éƒ½åŸºæœ¬ç›¸ä¼¼ã€‚æ¯”å¦‚æƒé™è®¤è¯ã€æ—¥å¿—ã€äº‹åŠ¡å¤„ç†ã€‚Aop çš„ä½œç”¨åœ¨äºåˆ†ç¦»ç³»ç»Ÿä¸­çš„å„ç§å…³æ³¨ç‚¹ï¼Œå°†æ ¸å¿ƒå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨ç‚¹åˆ†ç¦»å¼€æ¥ã€‚æ­£å¦‚Avanadeå…¬å¸çš„é«˜çº§æ–¹æ¡ˆæ„æ¶å¸ˆAdam Mageeæ‰€è¯´ï¼ŒAOPçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ â€œå°†åº”ç”¨ç¨‹åºä¸­çš„å•†ä¸šé€»è¾‘åŒå¯¹å…¶æä¾›æ”¯æŒçš„é€šç”¨æœåŠ¡è¿›è¡Œåˆ†ç¦»ã€‚â€</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/image-20200320011106852.png" data-desc-position="bottom"><img src="!assets/Spring/image-20200320011106852.png" alt="image-20200320011106852" style="zoom: 67%;"></a></p> <h3 id="112aopåœ¨springä¸­çš„ä½œç”¨">11.2ã€AOPåœ¨Springä¸­çš„ä½œç”¨<a class="headerlink" href="#112aopåœ¨springä¸­çš„ä½œç”¨" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p><mark>æä¾›å£°æ˜å¼äº‹åŠ¡ï¼›å…è®¸ç”¨æˆ·è‡ªå®šä¹‰åˆ‡é¢</mark></p> <ul> <li>æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼šè·¨è¶Šåº”ç”¨ç¨‹åºå¤šä¸ªæ¨¡å—çš„æ–¹æ³•æˆ–åŠŸèƒ½ã€‚å³æ˜¯ï¼Œä¸æˆ‘ä»¬ä¸šåŠ¡é€»è¾‘æ— å…³çš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„éƒ¨åˆ†ï¼Œå°±æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚å¦‚æ—¥å¿—ã€å®‰å…¨ã€ç¼“å­˜ã€äº‹åŠ¡ç­‰ç­‰...</li> <li>åˆ‡é¢ï¼ˆASPECTï¼‰ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹è¢«æ¨¡å—åŒ–çš„ç‰¹æ®Šå¯¹è±¡ã€‚å³ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»ã€‚</li> <li>é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šåˆ‡é¢å¿…é¡»è¦å®Œæˆçš„å·¥ä½œã€‚å³ï¼Œå®ƒæ˜¯ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚</li> <li>ç›®æ ‡ï¼ˆTargetï¼‰ï¼šè¢«é€šçŸ¥å¯¹è±¡ã€‚</li> <li>ä»£ç†ï¼ˆProxyï¼‰ï¼šå‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ä¹‹ååˆ›å»ºçš„å¯¹è±¡ã€‚</li> <li>åˆ‡å…¥ç‚¹ï¼ˆPointCutï¼‰ï¼šåˆ‡é¢é€šçŸ¥æ‰§è¡Œçš„ â€œåœ°ç‚¹â€ çš„å®šä¹‰ã€‚</li> <li>è¿æ¥ç‚¹ï¼ˆJointPointï¼‰ï¼šä¸åˆ‡å…¥ç‚¹åŒ¹é…çš„æ‰§è¡Œç‚¹ã€‚</li> </ul> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/image-20200320114822252.png" data-desc-position="bottom"><img src="!assets/Spring/image-20200320114822252.png" alt="image-20200320114822252" style="zoom: 67%;"></a></p> <p>SpringAOPä¸­ï¼Œé€šè¿‡Adviceå®šä¹‰æ¨ªåˆ‡é€»è¾‘ï¼ŒSpringä¸­æ”¯æŒ5ç§ç±»å‹çš„Adviceï¼š</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Spring/image-20200320115059707.png" data-desc-position="bottom"><img src="!assets/Spring/image-20200320115059707.png" alt="image-20200320115059707" style="zoom:67%;"></a></p> <p>å³AOPåœ¨ä¸æ”¹å˜åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œå»å¢åŠ æ–°çš„åŠŸèƒ½ã€‚</p> <h3 id="113ä½¿ç”¨springå®ç°aop">11.3ã€ä½¿ç”¨Springå®ç°AOP<a class="headerlink" href="#113ä½¿ç”¨springå®ç°aop" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>ä½¿ç”¨AOPç»‡å…¥ï¼Œéœ€è¦å¯¼å…¥ä¸€ä¸ªä¾èµ–åŒ…ï¼</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="cm">&lt;!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver --&gt;</span>
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a><span class="nt">&lt;dependency&gt;</span>
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a><span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.aspectj<span class="nt">&lt;/groupId&gt;</span>
</span><span id="__span-67-4"><a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a><span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>aspectjweaver<span class="nt">&lt;/artifactId&gt;</span>
</span><span id="__span-67-5"><a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a><span class="w">    </span><span class="nt">&lt;version&gt;</span>1.9.5<span class="nt">&lt;/version&gt;</span>
</span><span id="__span-67-6"><a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a><span class="nt">&lt;/dependency&gt;</span>
</span></code></pre></div> <p><strong>Execution</strong></p> <p>åœ¨ä½¿ç”¨Springæ¡†æ¶é…ç½®AOPçš„æ—¶å€™ï¼Œä¸ç®¡æ˜¯é€šè¿‡XMLé…ç½®æ–‡ä»¶è¿˜æ˜¯æ³¨è§£çš„æ–¹å¼éƒ½éœ€è¦å®šä¹‰pointcut â€œåˆ‡å…¥ç‚¹â€ ä¾‹å¦‚å®šä¹‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ <code>execution(* com.samp.service.impl..*.*(..))</code> ecexution()æ˜¯æœ€å¸¸ç”¨çš„åˆ‡ç‚¹å‡½æ•°ï¼Œå…¶è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š æ•´ä¸ªè¡¨è¾¾å¼å¯ä»¥åˆ†ä¸ºäº”ä¸ªéƒ¨åˆ†ï¼š</p> <ul> <li>execution()ï¼šè¡¨è¾¾å¼ä¸»ä½“</li> <li>ç¬¬ä¸€ä¸ª * å·ï¼šè¡¨ç¤ºè¿”å›ç±»å‹ï¼Œ* å·è¡¨ç¤ºæ‰€æœ‰çš„ç±»å‹ã€‚</li> <li>åŒ…åï¼šè¡¨ç¤ºéœ€è¦æ‹¦æˆªçš„åŒ…åï¼Œåé¢çš„ä¸¤ä¸ªå¥ç‚¹è¡¨ç¤ºå½“å‰åŒ…å’Œå½“å‰åŒ…çš„æ‰€æœ‰å­åŒ…ã€‚</li> <li>ç¬¬äºŒä¸ª * å·ï¼šè¡¨ç¤ºç±»å‹ï¼Œ* å·è¡¨ç¤ºæ‰€æœ‰çš„ç±»ã€‚</li> <li><em>(..)ï¼šæœ€åè¿™æ˜Ÿå·è¡¨ç¤ºæ–¹æ³•åï¼Œ </em>å·è¡¨ç¤ºæ‰€æœ‰çš„æ–¹æ³•ï¼Œåé¢æ‹¬å·é‡Œé¢è¡¨ç¤ºæ–¹æ³•çš„å‚æ•°ï¼Œä¸¤ä¸ªå¥ç‚¹è¡¨ç¤ºä»»ä½•å‚æ•°ã€‚</li> </ul> <p><strong>å‡†å¤‡ï¼š</strong></p> <p>UserServiceï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">UserService</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-68-2"><a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">add</span><span class="p">();</span>
</span><span id="__span-68-3"><a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a>
</span><span id="__span-68-4"><a id="__codelineno-68-4" name="__codelineno-68-4" href="#__codelineno-68-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">delete</span><span class="p">();</span>
</span><span id="__span-68-5"><a id="__codelineno-68-5" name="__codelineno-68-5" href="#__codelineno-68-5"></a>
</span><span id="__span-68-6"><a id="__codelineno-68-6" name="__codelineno-68-6" href="#__codelineno-68-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="p">();</span>
</span><span id="__span-68-7"><a id="__codelineno-68-7" name="__codelineno-68-7" href="#__codelineno-68-7"></a>
</span><span id="__span-68-8"><a id="__codelineno-68-8" name="__codelineno-68-8" href="#__codelineno-68-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">query</span><span class="p">();</span>
</span><span id="__span-68-9"><a id="__codelineno-68-9" name="__codelineno-68-9" href="#__codelineno-68-9"></a><span class="p">}</span>
</span></code></pre></div> <p>UserServiceImpl:</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserServiceImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">UserService</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-69-2"><a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a><span class="w">    </span><span class="nd">@Override</span>
</span><span id="__span-69-3"><a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">add</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-69-4"><a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"å¢åŠ äº†ä¸€ä¸ªç”¨æˆ·"</span><span class="p">);</span>
</span><span id="__span-69-5"><a id="__codelineno-69-5" name="__codelineno-69-5" href="#__codelineno-69-5"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-69-6"><a id="__codelineno-69-6" name="__codelineno-69-6" href="#__codelineno-69-6"></a>
</span><span id="__span-69-7"><a id="__codelineno-69-7" name="__codelineno-69-7" href="#__codelineno-69-7"></a><span class="w">    </span><span class="nd">@Override</span>
</span><span id="__span-69-8"><a id="__codelineno-69-8" name="__codelineno-69-8" href="#__codelineno-69-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">delete</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-69-9"><a id="__codelineno-69-9" name="__codelineno-69-9" href="#__codelineno-69-9"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"åˆ é™¤äº†ä¸€ä¸ªç”¨æˆ·"</span><span class="p">);</span>
</span><span id="__span-69-10"><a id="__codelineno-69-10" name="__codelineno-69-10" href="#__codelineno-69-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-69-11"><a id="__codelineno-69-11" name="__codelineno-69-11" href="#__codelineno-69-11"></a>
</span><span id="__span-69-12"><a id="__codelineno-69-12" name="__codelineno-69-12" href="#__codelineno-69-12"></a><span class="w">    </span><span class="nd">@Override</span>
</span><span id="__span-69-13"><a id="__codelineno-69-13" name="__codelineno-69-13" href="#__codelineno-69-13"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-69-14"><a id="__codelineno-69-14" name="__codelineno-69-14" href="#__codelineno-69-14"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"ä¿®æ”¹äº†ä¸€ä¸ªç”¨æˆ·"</span><span class="p">);</span>
</span><span id="__span-69-15"><a id="__codelineno-69-15" name="__codelineno-69-15" href="#__codelineno-69-15"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-69-16"><a id="__codelineno-69-16" name="__codelineno-69-16" href="#__codelineno-69-16"></a>
</span><span id="__span-69-17"><a id="__codelineno-69-17" name="__codelineno-69-17" href="#__codelineno-69-17"></a><span class="w">    </span><span class="nd">@Override</span>
</span><span id="__span-69-18"><a id="__codelineno-69-18" name="__codelineno-69-18" href="#__codelineno-69-18"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">query</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-69-19"><a id="__codelineno-69-19" name="__codelineno-69-19" href="#__codelineno-69-19"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æŸ¥è¯¢äº†ä¸€ä¸ªç”¨æˆ·"</span><span class="p">);</span>
</span><span id="__span-69-20"><a id="__codelineno-69-20" name="__codelineno-69-20" href="#__codelineno-69-20"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-69-21"><a id="__codelineno-69-21" name="__codelineno-69-21" href="#__codelineno-69-21"></a><span class="p">}</span>
</span></code></pre></div> <p>æµ‹è¯•ç±»ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyTest</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-70-2"><a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-70-3"><a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a><span class="w">        </span><span class="n">ApplicationContext</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ClassPathXmlApplicationContext</span><span class="p">(</span><span class="s">"applicationContext.xml"</span><span class="p">);</span>
</span><span id="__span-70-4"><a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a><span class="w">        </span><span class="n">UserService</span><span class="w"> </span><span class="n">useService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="s">"userService"</span><span class="p">,</span><span class="w"> </span><span class="n">UserService</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-70-5"><a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a><span class="w">        </span><span class="n">useService</span><span class="p">.</span><span class="na">add</span><span class="p">();</span>
</span><span id="__span-70-6"><a id="__codelineno-70-6" name="__codelineno-70-6" href="#__codelineno-70-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-70-7"><a id="__codelineno-70-7" name="__codelineno-70-7" href="#__codelineno-70-7"></a><span class="p">}</span>
</span></code></pre></div> <p><strong>æ–¹å¼ä¸€ï¼šSpringçš„æ¥å£</strong></p> <p>Log:</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Log</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">MethodBeforeAdvice</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-71-2"><a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a><span class="w">    </span><span class="c1">//methodï¼šè¦æ‰§è¡Œçš„ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</span>
</span><span id="__span-71-3"><a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a><span class="w">    </span><span class="c1">//argsï¼šå‚æ•°</span>
</span><span id="__span-71-4"><a id="__codelineno-71-4" name="__codelineno-71-4" href="#__codelineno-71-4"></a><span class="w">    </span><span class="c1">//targetï¼šç›®æ ‡å¯¹è±¡</span>
</span><span id="__span-71-5"><a id="__codelineno-71-5" name="__codelineno-71-5" href="#__codelineno-71-5"></a><span class="w">    </span><span class="nd">@Override</span>
</span><span id="__span-71-6"><a id="__codelineno-71-6" name="__codelineno-71-6" href="#__codelineno-71-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">before</span><span class="p">(</span><span class="n">Method</span><span class="w"> </span><span class="n">method</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="w"> </span><span class="n">objects</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">target</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Throwable</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-71-7"><a id="__codelineno-71-7" name="__codelineno-71-7" href="#__codelineno-71-7"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">target</span><span class="p">.</span><span class="na">getClass</span><span class="p">().</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"çš„"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">method</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"è¢«æ‰§è¡Œäº†"</span><span class="p">);</span>
</span><span id="__span-71-8"><a id="__codelineno-71-8" name="__codelineno-71-8" href="#__codelineno-71-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-71-9"><a id="__codelineno-71-9" name="__codelineno-71-9" href="#__codelineno-71-9"></a><span class="p">}</span>
</span></code></pre></div> <p>AfterLog:</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AfterLog</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">AfterReturningAdvice</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a><span class="w">    </span><span class="c1">//returnValueï¼šè¿”å›å€¼</span>
</span><span id="__span-72-3"><a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a><span class="w">    </span><span class="nd">@Override</span>
</span><span id="__span-72-4"><a id="__codelineno-72-4" name="__codelineno-72-4" href="#__codelineno-72-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">afterReturning</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">returnValue</span><span class="p">,</span><span class="w"> </span><span class="n">Method</span><span class="w"> </span><span class="n">method</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="w"> </span><span class="n">objects</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">target</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Throwable</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-72-5"><a id="__codelineno-72-5" name="__codelineno-72-5" href="#__codelineno-72-5"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æ‰§è¡Œäº†"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">method</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"æ–¹æ³•ï¼Œè¿”å›ç»“æœä¸ºï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">returnValue</span><span class="p">);</span>
</span><span id="__span-72-6"><a id="__codelineno-72-6" name="__codelineno-72-6" href="#__codelineno-72-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-72-7"><a id="__codelineno-72-7" name="__codelineno-72-7" href="#__codelineno-72-7"></a><span class="p">}</span>
</span></code></pre></div> <p>applicationContext.xml</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
</span><span id="__span-73-2"><a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a><span class="nt">&lt;beans</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
</span><span id="__span-73-3"><a id="__codelineno-73-3" name="__codelineno-73-3" href="#__codelineno-73-3"></a><span class="w">       </span><span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
</span><span id="__span-73-4"><a id="__codelineno-73-4" name="__codelineno-73-4" href="#__codelineno-73-4"></a><span class="w">       </span><span class="na">xmlns:aop=</span><span class="s">"http://www.springframework.org/schema/aop"</span>
</span><span id="__span-73-5"><a id="__codelineno-73-5" name="__codelineno-73-5" href="#__codelineno-73-5"></a><span class="w">       </span><span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
</span><span id="__span-73-6"><a id="__codelineno-73-6" name="__codelineno-73-6" href="#__codelineno-73-6"></a><span class="s">       http://www.springframework.org/schema/beans/spring-beans.xsd</span>
</span><span id="__span-73-7"><a id="__codelineno-73-7" name="__codelineno-73-7" href="#__codelineno-73-7"></a><span class="s">       http://www.springframework.org/schema/aop</span>
</span><span id="__span-73-8"><a id="__codelineno-73-8" name="__codelineno-73-8" href="#__codelineno-73-8"></a><span class="s">       https://www.springframework.org/schema/aop/spring-aop.xsd"</span><span class="nt">&gt;</span>
</span><span id="__span-73-9"><a id="__codelineno-73-9" name="__codelineno-73-9" href="#__codelineno-73-9"></a>
</span><span id="__span-73-10"><a id="__codelineno-73-10" name="__codelineno-73-10" href="#__codelineno-73-10"></a><span class="w">    </span><span class="cm">&lt;!--æ³¨å†Œbean--&gt;</span>
</span><span id="__span-73-11"><a id="__codelineno-73-11" name="__codelineno-73-11" href="#__codelineno-73-11"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"userService"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.service.UserServiceImpl"</span><span class="nt">/&gt;</span>
</span><span id="__span-73-12"><a id="__codelineno-73-12" name="__codelineno-73-12" href="#__codelineno-73-12"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"log"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.log.Log"</span><span class="nt">/&gt;</span>
</span><span id="__span-73-13"><a id="__codelineno-73-13" name="__codelineno-73-13" href="#__codelineno-73-13"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"afterLog"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.log.AfterLog"</span><span class="nt">/&gt;</span>
</span><span id="__span-73-14"><a id="__codelineno-73-14" name="__codelineno-73-14" href="#__codelineno-73-14"></a>
</span><span id="__span-73-15"><a id="__codelineno-73-15" name="__codelineno-73-15" href="#__codelineno-73-15"></a><span class="w">    </span><span class="cm">&lt;!--æ–¹å¼ä¸€ï¼šä½¿ç”¨åŸç”ŸSpring API--&gt;</span>
</span><span id="__span-73-16"><a id="__codelineno-73-16" name="__codelineno-73-16" href="#__codelineno-73-16"></a><span class="w">    </span><span class="cm">&lt;!--é…ç½®aop--&gt;</span>
</span><span id="__span-73-17"><a id="__codelineno-73-17" name="__codelineno-73-17" href="#__codelineno-73-17"></a><span class="w">    </span><span class="nt">&lt;aop:config&gt;</span>
</span><span id="__span-73-18"><a id="__codelineno-73-18" name="__codelineno-73-18" href="#__codelineno-73-18"></a><span class="w">        </span><span class="nt">&lt;aop:pointcut</span><span class="w"> </span><span class="na">id=</span><span class="s">"pointcut"</span><span class="w"> </span><span class="na">expression=</span><span class="s">"execution(* com.kuang.service.UserServiceImpl.*(..))"</span><span class="nt">/&gt;</span>
</span><span id="__span-73-19"><a id="__codelineno-73-19" name="__codelineno-73-19" href="#__codelineno-73-19"></a>
</span><span id="__span-73-20"><a id="__codelineno-73-20" name="__codelineno-73-20" href="#__codelineno-73-20"></a><span class="w">        </span><span class="cm">&lt;!--æ‰§è¡Œç¯ç»•å¢åŠ --&gt;</span>
</span><span id="__span-73-21"><a id="__codelineno-73-21" name="__codelineno-73-21" href="#__codelineno-73-21"></a><span class="w">        </span><span class="nt">&lt;aop:advisor</span><span class="w"> </span><span class="na">advice-ref=</span><span class="s">"log"</span><span class="w"> </span><span class="na">pointcut-ref=</span><span class="s">"pointcut"</span><span class="nt">/&gt;</span>
</span><span id="__span-73-22"><a id="__codelineno-73-22" name="__codelineno-73-22" href="#__codelineno-73-22"></a><span class="w">        </span><span class="nt">&lt;aop:advisor</span><span class="w"> </span><span class="na">advice-ref=</span><span class="s">"afterLog"</span><span class="w"> </span><span class="na">pointcut-ref=</span><span class="s">"pointcut"</span><span class="nt">/&gt;</span>
</span><span id="__span-73-23"><a id="__codelineno-73-23" name="__codelineno-73-23" href="#__codelineno-73-23"></a><span class="w">    </span><span class="nt">&lt;/aop:config&gt;</span>
</span><span id="__span-73-24"><a id="__codelineno-73-24" name="__codelineno-73-24" href="#__codelineno-73-24"></a>
</span><span id="__span-73-25"><a id="__codelineno-73-25" name="__codelineno-73-25" href="#__codelineno-73-25"></a><span class="nt">&lt;/beans&gt;</span>
</span></code></pre></div> <p><strong>æ–¹å¼äºŒï¼šè‡ªå®šä¹‰ç±»</strong></p> <p>DiyPointCutï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DiyPointCut</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-74-2"><a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">before</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-74-3"><a id="__codelineno-74-3" name="__codelineno-74-3" href="#__codelineno-74-3"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æ–¹æ³•æ‰§è¡Œå‰"</span><span class="p">);</span>
</span><span id="__span-74-4"><a id="__codelineno-74-4" name="__codelineno-74-4" href="#__codelineno-74-4"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-74-5"><a id="__codelineno-74-5" name="__codelineno-74-5" href="#__codelineno-74-5"></a>
</span><span id="__span-74-6"><a id="__codelineno-74-6" name="__codelineno-74-6" href="#__codelineno-74-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">after</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-74-7"><a id="__codelineno-74-7" name="__codelineno-74-7" href="#__codelineno-74-7"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æ–¹æ³•æ‰§è¡Œå"</span><span class="p">);</span>
</span><span id="__span-74-8"><a id="__codelineno-74-8" name="__codelineno-74-8" href="#__codelineno-74-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-74-9"><a id="__codelineno-74-9" name="__codelineno-74-9" href="#__codelineno-74-9"></a><span class="p">}</span>
</span></code></pre></div> <p>applicationContext.xml</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-75-1"><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
</span><span id="__span-75-2"><a id="__codelineno-75-2" name="__codelineno-75-2" href="#__codelineno-75-2"></a><span class="nt">&lt;beans</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
</span><span id="__span-75-3"><a id="__codelineno-75-3" name="__codelineno-75-3" href="#__codelineno-75-3"></a><span class="w">       </span><span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
</span><span id="__span-75-4"><a id="__codelineno-75-4" name="__codelineno-75-4" href="#__codelineno-75-4"></a><span class="w">       </span><span class="na">xmlns:aop=</span><span class="s">"http://www.springframework.org/schema/aop"</span>
</span><span id="__span-75-5"><a id="__codelineno-75-5" name="__codelineno-75-5" href="#__codelineno-75-5"></a><span class="w">       </span><span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
</span><span id="__span-75-6"><a id="__codelineno-75-6" name="__codelineno-75-6" href="#__codelineno-75-6"></a><span class="s">       http://www.springframework.org/schema/beans/spring-beans.xsd</span>
</span><span id="__span-75-7"><a id="__codelineno-75-7" name="__codelineno-75-7" href="#__codelineno-75-7"></a><span class="s">       http://www.springframework.org/schema/aop</span>
</span><span id="__span-75-8"><a id="__codelineno-75-8" name="__codelineno-75-8" href="#__codelineno-75-8"></a><span class="s">       https://www.springframework.org/schema/aop/spring-aop.xsd"</span><span class="nt">&gt;</span>
</span><span id="__span-75-9"><a id="__codelineno-75-9" name="__codelineno-75-9" href="#__codelineno-75-9"></a>
</span><span id="__span-75-10"><a id="__codelineno-75-10" name="__codelineno-75-10" href="#__codelineno-75-10"></a><span class="w">    </span><span class="cm">&lt;!--æ³¨å†Œbean--&gt;</span>
</span><span id="__span-75-11"><a id="__codelineno-75-11" name="__codelineno-75-11" href="#__codelineno-75-11"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"userService"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.service.UserServiceImpl"</span><span class="nt">/&gt;</span>
</span><span id="__span-75-12"><a id="__codelineno-75-12" name="__codelineno-75-12" href="#__codelineno-75-12"></a>
</span><span id="__span-75-13"><a id="__codelineno-75-13" name="__codelineno-75-13" href="#__codelineno-75-13"></a><span class="w">    </span><span class="cm">&lt;!--æ–¹å¼äºŒï¼šè‡ªå®šä¹‰ç±»--&gt;</span>
</span><span id="__span-75-14"><a id="__codelineno-75-14" name="__codelineno-75-14" href="#__codelineno-75-14"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"diy"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.diy.DiyPointCut"</span><span class="nt">/&gt;</span>
</span><span id="__span-75-15"><a id="__codelineno-75-15" name="__codelineno-75-15" href="#__codelineno-75-15"></a>
</span><span id="__span-75-16"><a id="__codelineno-75-16" name="__codelineno-75-16" href="#__codelineno-75-16"></a><span class="w">    </span><span class="nt">&lt;aop:config&gt;</span>
</span><span id="__span-75-17"><a id="__codelineno-75-17" name="__codelineno-75-17" href="#__codelineno-75-17"></a><span class="w">        </span><span class="cm">&lt;!--è‡ªå®šä¹‰åˆ‡é¢ï¼Œ ref è¦å¼•ç”¨çš„ç±»--&gt;</span>
</span><span id="__span-75-18"><a id="__codelineno-75-18" name="__codelineno-75-18" href="#__codelineno-75-18"></a><span class="w">        </span><span class="nt">&lt;aop:aspect</span><span class="w"> </span><span class="na">ref=</span><span class="s">"diy"</span><span class="nt">&gt;</span>
</span><span id="__span-75-19"><a id="__codelineno-75-19" name="__codelineno-75-19" href="#__codelineno-75-19"></a><span class="w">            </span><span class="cm">&lt;!--åˆ‡å…¥ç‚¹--&gt;</span>
</span><span id="__span-75-20"><a id="__codelineno-75-20" name="__codelineno-75-20" href="#__codelineno-75-20"></a><span class="w">            </span><span class="nt">&lt;aop:pointcut</span><span class="w"> </span><span class="na">id=</span><span class="s">"point"</span><span class="w"> </span><span class="na">expression=</span><span class="s">"execution(* com.kuang.service.UserServiceImpl.*(..))"</span><span class="nt">/&gt;</span>
</span><span id="__span-75-21"><a id="__codelineno-75-21" name="__codelineno-75-21" href="#__codelineno-75-21"></a><span class="w">            </span><span class="cm">&lt;!--é€šçŸ¥--&gt;</span>
</span><span id="__span-75-22"><a id="__codelineno-75-22" name="__codelineno-75-22" href="#__codelineno-75-22"></a><span class="w">            </span><span class="nt">&lt;aop:before</span><span class="w"> </span><span class="na">method=</span><span class="s">"before"</span><span class="w"> </span><span class="na">pointcut-ref=</span><span class="s">"point"</span><span class="nt">/&gt;</span>
</span><span id="__span-75-23"><a id="__codelineno-75-23" name="__codelineno-75-23" href="#__codelineno-75-23"></a><span class="w">            </span><span class="nt">&lt;aop:after</span><span class="w"> </span><span class="na">method=</span><span class="s">"after"</span><span class="w"> </span><span class="na">pointcut-ref=</span><span class="s">"point"</span><span class="nt">/&gt;</span>
</span><span id="__span-75-24"><a id="__codelineno-75-24" name="__codelineno-75-24" href="#__codelineno-75-24"></a><span class="w">        </span><span class="nt">&lt;/aop:aspect&gt;</span>
</span><span id="__span-75-25"><a id="__codelineno-75-25" name="__codelineno-75-25" href="#__codelineno-75-25"></a><span class="w">    </span><span class="nt">&lt;/aop:config&gt;</span>
</span><span id="__span-75-26"><a id="__codelineno-75-26" name="__codelineno-75-26" href="#__codelineno-75-26"></a>
</span><span id="__span-75-27"><a id="__codelineno-75-27" name="__codelineno-75-27" href="#__codelineno-75-27"></a><span class="nt">&lt;/beans&gt;</span>
</span></code></pre></div> <p><strong>æ–¹å¼ä¸‰ï¼šæ³¨è§£</strong></p> <p>AnnotationPointCutï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-76-1"><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a><span class="c1">//æ–¹æ³•ä¸‰ï¼šä½¿ç”¨æ³¨è§£æ–¹å¼å®ç°AOP</span>
</span><span id="__span-76-2"><a id="__codelineno-76-2" name="__codelineno-76-2" href="#__codelineno-76-2"></a><span class="nd">@Aspect</span>
</span><span id="__span-76-3"><a id="__codelineno-76-3" name="__codelineno-76-3" href="#__codelineno-76-3"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AnnotationPointCut</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-76-4"><a id="__codelineno-76-4" name="__codelineno-76-4" href="#__codelineno-76-4"></a><span class="w">    </span><span class="nd">@Before</span><span class="p">(</span><span class="s">"execution(* com.kuang.service.UserServiceImpl.*(..))"</span><span class="p">)</span>
</span><span id="__span-76-5"><a id="__codelineno-76-5" name="__codelineno-76-5" href="#__codelineno-76-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">before</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-76-6"><a id="__codelineno-76-6" name="__codelineno-76-6" href="#__codelineno-76-6"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"===æ–¹æ³•æ‰§è¡Œå‰==="</span><span class="p">);</span>
</span><span id="__span-76-7"><a id="__codelineno-76-7" name="__codelineno-76-7" href="#__codelineno-76-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-76-8"><a id="__codelineno-76-8" name="__codelineno-76-8" href="#__codelineno-76-8"></a>
</span><span id="__span-76-9"><a id="__codelineno-76-9" name="__codelineno-76-9" href="#__codelineno-76-9"></a><span class="w">    </span><span class="nd">@After</span><span class="p">(</span><span class="s">"execution(* com.kuang.service.UserServiceImpl.*(..))"</span><span class="p">)</span>
</span><span id="__span-76-10"><a id="__codelineno-76-10" name="__codelineno-76-10" href="#__codelineno-76-10"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">after</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-76-11"><a id="__codelineno-76-11" name="__codelineno-76-11" href="#__codelineno-76-11"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"===æ–¹æ³•æ‰§è¡Œå==="</span><span class="p">);</span>
</span><span id="__span-76-12"><a id="__codelineno-76-12" name="__codelineno-76-12" href="#__codelineno-76-12"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-76-13"><a id="__codelineno-76-13" name="__codelineno-76-13" href="#__codelineno-76-13"></a>
</span><span id="__span-76-14"><a id="__codelineno-76-14" name="__codelineno-76-14" href="#__codelineno-76-14"></a><span class="w">    </span><span class="nd">@Around</span><span class="p">(</span><span class="s">"execution(* com.kuang.service.UserServiceImpl.*(..))"</span><span class="p">)</span>
</span><span id="__span-76-15"><a id="__codelineno-76-15" name="__codelineno-76-15" href="#__codelineno-76-15"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">around</span><span class="p">(</span><span class="n">ProceedingJoinPoint</span><span class="w"> </span><span class="n">proceedingJoinPoint</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Throwable</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-76-16"><a id="__codelineno-76-16" name="__codelineno-76-16" href="#__codelineno-76-16"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"ç¯ç»•å‰"</span><span class="p">);</span>
</span><span id="__span-76-17"><a id="__codelineno-76-17" name="__codelineno-76-17" href="#__codelineno-76-17"></a><span class="w">        </span><span class="n">proceedingJoinPoint</span><span class="p">.</span><span class="na">proceed</span><span class="p">();</span>
</span><span id="__span-76-18"><a id="__codelineno-76-18" name="__codelineno-76-18" href="#__codelineno-76-18"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"ç¯ç»•å"</span><span class="p">);</span>
</span><span id="__span-76-19"><a id="__codelineno-76-19" name="__codelineno-76-19" href="#__codelineno-76-19"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-76-20"><a id="__codelineno-76-20" name="__codelineno-76-20" href="#__codelineno-76-20"></a><span class="p">}</span>
</span></code></pre></div> <p>applicationContext.xmlï¼š</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-77-1"><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
</span><span id="__span-77-2"><a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a><span class="nt">&lt;beans</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
</span><span id="__span-77-3"><a id="__codelineno-77-3" name="__codelineno-77-3" href="#__codelineno-77-3"></a><span class="w">       </span><span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
</span><span id="__span-77-4"><a id="__codelineno-77-4" name="__codelineno-77-4" href="#__codelineno-77-4"></a><span class="w">       </span><span class="na">xmlns:aop=</span><span class="s">"http://www.springframework.org/schema/aop"</span>
</span><span id="__span-77-5"><a id="__codelineno-77-5" name="__codelineno-77-5" href="#__codelineno-77-5"></a><span class="w">       </span><span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans</span>
</span><span id="__span-77-6"><a id="__codelineno-77-6" name="__codelineno-77-6" href="#__codelineno-77-6"></a><span class="s">       http://www.springframework.org/schema/beans/spring-beans.xsd</span>
</span><span id="__span-77-7"><a id="__codelineno-77-7" name="__codelineno-77-7" href="#__codelineno-77-7"></a><span class="s">       http://www.springframework.org/schema/aop</span>
</span><span id="__span-77-8"><a id="__codelineno-77-8" name="__codelineno-77-8" href="#__codelineno-77-8"></a><span class="s">       https://www.springframework.org/schema/aop/spring-aop.xsd"</span><span class="nt">&gt;</span>
</span><span id="__span-77-9"><a id="__codelineno-77-9" name="__codelineno-77-9" href="#__codelineno-77-9"></a>
</span><span id="__span-77-10"><a id="__codelineno-77-10" name="__codelineno-77-10" href="#__codelineno-77-10"></a><span class="w">    </span><span class="cm">&lt;!--æ³¨å†Œbean--&gt;</span>
</span><span id="__span-77-11"><a id="__codelineno-77-11" name="__codelineno-77-11" href="#__codelineno-77-11"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"userService"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.service.UserServiceImpl"</span><span class="nt">/&gt;</span>
</span><span id="__span-77-12"><a id="__codelineno-77-12" name="__codelineno-77-12" href="#__codelineno-77-12"></a>
</span><span id="__span-77-13"><a id="__codelineno-77-13" name="__codelineno-77-13" href="#__codelineno-77-13"></a><span class="w">    </span><span class="cm">&lt;!--æ–¹å¼ä¸‰--&gt;</span>
</span><span id="__span-77-14"><a id="__codelineno-77-14" name="__codelineno-77-14" href="#__codelineno-77-14"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"annotationPointCut"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.diy.AnnotationPointCut"</span><span class="nt">/&gt;</span>
</span><span id="__span-77-15"><a id="__codelineno-77-15" name="__codelineno-77-15" href="#__codelineno-77-15"></a>
</span><span id="__span-77-16"><a id="__codelineno-77-16" name="__codelineno-77-16" href="#__codelineno-77-16"></a><span class="w">    </span><span class="cm">&lt;!--å¼€å¯æ³¨è§£æ”¯æŒ--&gt;</span>
</span><span id="__span-77-17"><a id="__codelineno-77-17" name="__codelineno-77-17" href="#__codelineno-77-17"></a><span class="w">    </span><span class="nt">&lt;aop:aspectj-autoproxy/&gt;</span>
</span><span id="__span-77-18"><a id="__codelineno-77-18" name="__codelineno-77-18" href="#__codelineno-77-18"></a>
</span><span id="__span-77-19"><a id="__codelineno-77-19" name="__codelineno-77-19" href="#__codelineno-77-19"></a><span class="nt">&lt;/beans&gt;</span>
</span></code></pre></div> <h2 id="12æ•´åˆmybatis">12ã€æ•´åˆMybatis<a class="headerlink" href="#12æ•´åˆmybatis" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>æ­¥éª¤ï¼š</p> <ol> <li>å¯¼å…¥ç›¸å…³jar<ul> <li>junit</li> <li>mybatis</li> <li>mysql-connector</li> <li>spring-webmvc</li> <li>spring-jdbc</li> <li>aspectjweaver</li> <li>mybatis-spring</li> <li>lombok</li> </ul> </li> <li>ç¼–å†™é…ç½®æ–‡ä»¶</li> <li>æµ‹è¯•</li> </ol> <h3 id="121å›å¿†mybatis">12.1ã€å›å¿†Mybatis<a class="headerlink" href="#121å›å¿†mybatis" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <ol> <li> <p>ç¼–å†™å®ä½“ç±»</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-78-1"><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a><span class="nd">@Data</span>
</span><span id="__span-78-2"><a id="__codelineno-78-2" name="__codelineno-78-2" href="#__codelineno-78-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-78-3"><a id="__codelineno-78-3" name="__codelineno-78-3" href="#__codelineno-78-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
</span><span id="__span-78-4"><a id="__codelineno-78-4" name="__codelineno-78-4" href="#__codelineno-78-4"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-78-5"><a id="__codelineno-78-5" name="__codelineno-78-5" href="#__codelineno-78-5"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">pwd</span><span class="p">;</span>
</span><span id="__span-78-6"><a id="__codelineno-78-6" name="__codelineno-78-6" href="#__codelineno-78-6"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p>ç¼–å†™æ ¸å¿ƒé…ç½®æ–‡ä»¶</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-79-1"><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
</span><span id="__span-79-2"><a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a><span class="cp">&lt;!DOCTYPE configuration</span>
</span><span id="__span-79-3"><a id="__codelineno-79-3" name="__codelineno-79-3" href="#__codelineno-79-3"></a><span class="cp">        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"</span>
</span><span id="__span-79-4"><a id="__codelineno-79-4" name="__codelineno-79-4" href="#__codelineno-79-4"></a><span class="cp">        "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span>
</span><span id="__span-79-5"><a id="__codelineno-79-5" name="__codelineno-79-5" href="#__codelineno-79-5"></a><span class="nt">&lt;configuration&gt;</span>
</span><span id="__span-79-6"><a id="__codelineno-79-6" name="__codelineno-79-6" href="#__codelineno-79-6"></a><span class="w">    </span><span class="nt">&lt;typeAliases&gt;</span>
</span><span id="__span-79-7"><a id="__codelineno-79-7" name="__codelineno-79-7" href="#__codelineno-79-7"></a><span class="w">        </span><span class="nt">&lt;package</span><span class="w"> </span><span class="na">name=</span><span class="s">"com.kuang.pojo"</span><span class="nt">/&gt;</span>
</span><span id="__span-79-8"><a id="__codelineno-79-8" name="__codelineno-79-8" href="#__codelineno-79-8"></a><span class="w">    </span><span class="nt">&lt;/typeAliases&gt;</span>
</span><span id="__span-79-9"><a id="__codelineno-79-9" name="__codelineno-79-9" href="#__codelineno-79-9"></a>
</span><span id="__span-79-10"><a id="__codelineno-79-10" name="__codelineno-79-10" href="#__codelineno-79-10"></a><span class="w">    </span><span class="nt">&lt;environments</span><span class="w"> </span><span class="na">default=</span><span class="s">"development"</span><span class="nt">&gt;</span>
</span><span id="__span-79-11"><a id="__codelineno-79-11" name="__codelineno-79-11" href="#__codelineno-79-11"></a><span class="w">        </span><span class="nt">&lt;environment</span><span class="w"> </span><span class="na">id=</span><span class="s">"development"</span><span class="nt">&gt;</span>
</span><span id="__span-79-12"><a id="__codelineno-79-12" name="__codelineno-79-12" href="#__codelineno-79-12"></a><span class="w">            </span><span class="nt">&lt;transactionManager</span><span class="w"> </span><span class="na">type=</span><span class="s">"JDBC"</span><span class="nt">/&gt;</span>
</span><span id="__span-79-13"><a id="__codelineno-79-13" name="__codelineno-79-13" href="#__codelineno-79-13"></a><span class="w">            </span><span class="nt">&lt;dataSource</span><span class="w"> </span><span class="na">type=</span><span class="s">"POOLED"</span><span class="nt">&gt;</span>
</span><span id="__span-79-14"><a id="__codelineno-79-14" name="__codelineno-79-14" href="#__codelineno-79-14"></a><span class="w">                </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"driver"</span><span class="w"> </span><span class="na">value=</span><span class="s">"com.mysql.cj.jdbc.Driver"</span><span class="nt">/&gt;</span>
</span><span id="__span-79-15"><a id="__codelineno-79-15" name="__codelineno-79-15" href="#__codelineno-79-15"></a><span class="w">                </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"url"</span><span class="w"> </span><span class="na">value=</span><span class="s">"jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;useSSL=true&amp;amp;serverTimezone=Asia/Shanghai"</span><span class="nt">/&gt;</span>
</span><span id="__span-79-16"><a id="__codelineno-79-16" name="__codelineno-79-16" href="#__codelineno-79-16"></a><span class="w">                </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"username"</span><span class="w"> </span><span class="na">value=</span><span class="s">"root"</span><span class="nt">/&gt;</span>
</span><span id="__span-79-17"><a id="__codelineno-79-17" name="__codelineno-79-17" href="#__codelineno-79-17"></a><span class="w">                </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"password"</span><span class="w"> </span><span class="na">value=</span><span class="s">"root"</span><span class="nt">/&gt;</span>
</span><span id="__span-79-18"><a id="__codelineno-79-18" name="__codelineno-79-18" href="#__codelineno-79-18"></a><span class="w">            </span><span class="nt">&lt;/dataSource&gt;</span>
</span><span id="__span-79-19"><a id="__codelineno-79-19" name="__codelineno-79-19" href="#__codelineno-79-19"></a><span class="w">        </span><span class="nt">&lt;/environment&gt;</span>
</span><span id="__span-79-20"><a id="__codelineno-79-20" name="__codelineno-79-20" href="#__codelineno-79-20"></a><span class="w">    </span><span class="nt">&lt;/environments&gt;</span>
</span><span id="__span-79-21"><a id="__codelineno-79-21" name="__codelineno-79-21" href="#__codelineno-79-21"></a>
</span><span id="__span-79-22"><a id="__codelineno-79-22" name="__codelineno-79-22" href="#__codelineno-79-22"></a><span class="w">    </span><span class="nt">&lt;mappers&gt;</span>
</span><span id="__span-79-23"><a id="__codelineno-79-23" name="__codelineno-79-23" href="#__codelineno-79-23"></a><span class="w">        </span><span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.mapper.UserMapper"</span><span class="nt">/&gt;</span>
</span><span id="__span-79-24"><a id="__codelineno-79-24" name="__codelineno-79-24" href="#__codelineno-79-24"></a><span class="w">    </span><span class="nt">&lt;/mappers&gt;</span>
</span><span id="__span-79-25"><a id="__codelineno-79-25" name="__codelineno-79-25" href="#__codelineno-79-25"></a><span class="nt">&lt;/configuration&gt;</span>
</span></code></pre></div> </li> <li> <p>ç¼–å†™æ¥å£</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-80-1"><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">UserMapper</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-80-2"><a id="__codelineno-80-2" name="__codelineno-80-2" href="#__codelineno-80-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">selectUser</span><span class="p">();</span>
</span><span id="__span-80-3"><a id="__codelineno-80-3" name="__codelineno-80-3" href="#__codelineno-80-3"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p>ç¼–å†™Mapper.xml</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-81-1"><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
</span><span id="__span-81-2"><a id="__codelineno-81-2" name="__codelineno-81-2" href="#__codelineno-81-2"></a><span class="cp">&lt;!DOCTYPE mapper</span>
</span><span id="__span-81-3"><a id="__codelineno-81-3" name="__codelineno-81-3" href="#__codelineno-81-3"></a><span class="cp">        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"</span>
</span><span id="__span-81-4"><a id="__codelineno-81-4" name="__codelineno-81-4" href="#__codelineno-81-4"></a><span class="cp">        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span>
</span><span id="__span-81-5"><a id="__codelineno-81-5" name="__codelineno-81-5" href="#__codelineno-81-5"></a><span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">namespace=</span><span class="s">"com.kuang.mapper.UserMapper"</span><span class="nt">&gt;</span>
</span><span id="__span-81-6"><a id="__codelineno-81-6" name="__codelineno-81-6" href="#__codelineno-81-6"></a><span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">"selectUser"</span><span class="w"> </span><span class="na">resultType=</span><span class="s">"user"</span><span class="nt">&gt;</span>
</span><span id="__span-81-7"><a id="__codelineno-81-7" name="__codelineno-81-7" href="#__codelineno-81-7"></a><span class="w">        </span>select<span class="w"> </span>*<span class="w"> </span>from<span class="w"> </span>mybatis.user;
</span><span id="__span-81-8"><a id="__codelineno-81-8" name="__codelineno-81-8" href="#__codelineno-81-8"></a><span class="w">    </span><span class="nt">&lt;/select&gt;</span>
</span><span id="__span-81-9"><a id="__codelineno-81-9" name="__codelineno-81-9" href="#__codelineno-81-9"></a><span class="nt">&lt;/mapper&gt;</span>
</span></code></pre></div> </li> <li> <p>æµ‹è¯•</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-82-1"><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyTest</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-82-2"><a id="__codelineno-82-2" name="__codelineno-82-2" href="#__codelineno-82-2"></a><span class="w">    </span><span class="nd">@Test</span>
</span><span id="__span-82-3"><a id="__codelineno-82-3" name="__codelineno-82-3" href="#__codelineno-82-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-82-4"><a id="__codelineno-82-4" name="__codelineno-82-4" href="#__codelineno-82-4"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">resources</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"mybatis-config.xml"</span><span class="p">;</span>
</span><span id="__span-82-5"><a id="__codelineno-82-5" name="__codelineno-82-5" href="#__codelineno-82-5"></a><span class="w">        </span><span class="n">InputStream</span><span class="w"> </span><span class="n">inputStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resources</span><span class="p">.</span><span class="na">getResourceAsStream</span><span class="p">(</span><span class="n">resources</span><span class="p">);</span>
</span><span id="__span-82-6"><a id="__codelineno-82-6" name="__codelineno-82-6" href="#__codelineno-82-6"></a><span class="w">        </span><span class="n">SqlSessionFactory</span><span class="w"> </span><span class="n">sqlSessionFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlSessionFactoryBuilder</span><span class="p">().</span><span class="na">build</span><span class="p">(</span><span class="n">inputStream</span><span class="p">);</span>
</span><span id="__span-82-7"><a id="__codelineno-82-7" name="__codelineno-82-7" href="#__codelineno-82-7"></a><span class="w">        </span><span class="n">SqlSession</span><span class="w"> </span><span class="n">sqlSession</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSessionFactory</span><span class="p">.</span><span class="na">openSession</span><span class="p">();</span>
</span><span id="__span-82-8"><a id="__codelineno-82-8" name="__codelineno-82-8" href="#__codelineno-82-8"></a>
</span><span id="__span-82-9"><a id="__codelineno-82-9" name="__codelineno-82-9" href="#__codelineno-82-9"></a><span class="w">        </span><span class="n">UserMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSession</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">UserMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-82-10"><a id="__codelineno-82-10" name="__codelineno-82-10" href="#__codelineno-82-10"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">userList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">selectUser</span><span class="p">();</span>
</span><span id="__span-82-11"><a id="__codelineno-82-11" name="__codelineno-82-11" href="#__codelineno-82-11"></a>
</span><span id="__span-82-12"><a id="__codelineno-82-12" name="__codelineno-82-12" href="#__codelineno-82-12"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">userList</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-82-13"><a id="__codelineno-82-13" name="__codelineno-82-13" href="#__codelineno-82-13"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>
</span><span id="__span-82-14"><a id="__codelineno-82-14" name="__codelineno-82-14" href="#__codelineno-82-14"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-82-15"><a id="__codelineno-82-15" name="__codelineno-82-15" href="#__codelineno-82-15"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-82-16"><a id="__codelineno-82-16" name="__codelineno-82-16" href="#__codelineno-82-16"></a><span class="p">}</span>
</span></code></pre></div> </li> </ol> <h3 id="122mybatis-spring">12.2ã€Mybatis-spring<a class="headerlink" href="#122mybatis-spring" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p><strong>æ–¹å¼ä¸€ï¼š</strong></p> <p>å®ä½“ç±»ï¼šUser.java</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-83-1"><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a><span class="nd">@Data</span>
</span><span id="__span-83-2"><a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-83-3"><a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
</span><span id="__span-83-4"><a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-83-5"><a id="__codelineno-83-5" name="__codelineno-83-5" href="#__codelineno-83-5"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">pwd</span><span class="p">;</span>
</span><span id="__span-83-6"><a id="__codelineno-83-6" name="__codelineno-83-6" href="#__codelineno-83-6"></a><span class="p">}</span>
</span></code></pre></div> <p>æ¥å£ï¼šUserMapper.java</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-84-1"><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">UserMapper</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-84-2"><a id="__codelineno-84-2" name="__codelineno-84-2" href="#__codelineno-84-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">selectUser</span><span class="p">();</span>
</span><span id="__span-84-3"><a id="__codelineno-84-3" name="__codelineno-84-3" href="#__codelineno-84-3"></a><span class="p">}</span>
</span></code></pre></div> <p>Mapper.xmlï¼šUserMapper.xml</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-85-1"><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
</span><span id="__span-85-2"><a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a><span class="cp">&lt;!DOCTYPE mapper</span>
</span><span id="__span-85-3"><a id="__codelineno-85-3" name="__codelineno-85-3" href="#__codelineno-85-3"></a><span class="cp">        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"</span>
</span><span id="__span-85-4"><a id="__codelineno-85-4" name="__codelineno-85-4" href="#__codelineno-85-4"></a><span class="cp">        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span>
</span><span id="__span-85-5"><a id="__codelineno-85-5" name="__codelineno-85-5" href="#__codelineno-85-5"></a><span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">namespace=</span><span class="s">"com.kuang.mapper.UserMapper"</span><span class="nt">&gt;</span>
</span><span id="__span-85-6"><a id="__codelineno-85-6" name="__codelineno-85-6" href="#__codelineno-85-6"></a><span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">"selectUser"</span><span class="w"> </span><span class="na">resultType=</span><span class="s">"user"</span><span class="nt">&gt;</span>
</span><span id="__span-85-7"><a id="__codelineno-85-7" name="__codelineno-85-7" href="#__codelineno-85-7"></a><span class="w">        </span>select<span class="w"> </span>*<span class="w"> </span>from<span class="w"> </span>mybatis.user;
</span><span id="__span-85-8"><a id="__codelineno-85-8" name="__codelineno-85-8" href="#__codelineno-85-8"></a><span class="w">    </span><span class="nt">&lt;/select&gt;</span>
</span><span id="__span-85-9"><a id="__codelineno-85-9" name="__codelineno-85-9" href="#__codelineno-85-9"></a><span class="nt">&lt;/mapper&gt;</span>
</span></code></pre></div> <p>é…ç½®Mybatisï¼šspring-dao.xml å’Œ mybatis-config.xml</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-86-1"><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF8"?&gt;</span>
</span><span id="__span-86-2"><a id="__codelineno-86-2" name="__codelineno-86-2" href="#__codelineno-86-2"></a><span class="nt">&lt;beans</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
</span><span id="__span-86-3"><a id="__codelineno-86-3" name="__codelineno-86-3" href="#__codelineno-86-3"></a><span class="w">       </span><span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
</span><span id="__span-86-4"><a id="__codelineno-86-4" name="__codelineno-86-4" href="#__codelineno-86-4"></a><span class="w">       </span><span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>
</span><span id="__span-86-5"><a id="__codelineno-86-5" name="__codelineno-86-5" href="#__codelineno-86-5"></a><span class="w">    </span><span class="cm">&lt;!--</span>
</span><span id="__span-86-6"><a id="__codelineno-86-6" name="__codelineno-86-6" href="#__codelineno-86-6"></a><span class="cm">        DataSourceï¼šä½¿ç”¨Springçš„æ•°æ®æºæ›¿æ¢Mybatisçš„é…ç½®</span>
</span><span id="__span-86-7"><a id="__codelineno-86-7" name="__codelineno-86-7" href="#__codelineno-86-7"></a><span class="cm">        è¿™é‡Œä½¿ç”¨Springæä¾›çš„JDBCï¼š</span>
</span><span id="__span-86-8"><a id="__codelineno-86-8" name="__codelineno-86-8" href="#__codelineno-86-8"></a><span class="cm">    --&gt;</span>
</span><span id="__span-86-9"><a id="__codelineno-86-9" name="__codelineno-86-9" href="#__codelineno-86-9"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"dataSource"</span><span class="w"> </span><span class="na">class=</span><span class="s">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span><span class="nt">&gt;</span>
</span><span id="__span-86-10"><a id="__codelineno-86-10" name="__codelineno-86-10" href="#__codelineno-86-10"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"driverClassName"</span><span class="w"> </span><span class="na">value=</span><span class="s">"com.mysql.cj.jdbc.Driver"</span><span class="nt">/&gt;</span>
</span><span id="__span-86-11"><a id="__codelineno-86-11" name="__codelineno-86-11" href="#__codelineno-86-11"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"url"</span>
</span><span id="__span-86-12"><a id="__codelineno-86-12" name="__codelineno-86-12" href="#__codelineno-86-12"></a><span class="w">                  </span><span class="na">value=</span><span class="s">"jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;useSSL=true&amp;amp;serverTimezone=Asia/Shanghai"</span><span class="nt">/&gt;</span>
</span><span id="__span-86-13"><a id="__codelineno-86-13" name="__codelineno-86-13" href="#__codelineno-86-13"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"username"</span><span class="w"> </span><span class="na">value=</span><span class="s">"root"</span><span class="nt">/&gt;</span>
</span><span id="__span-86-14"><a id="__codelineno-86-14" name="__codelineno-86-14" href="#__codelineno-86-14"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"password"</span><span class="w"> </span><span class="na">value=</span><span class="s">"root"</span><span class="nt">/&gt;</span>
</span><span id="__span-86-15"><a id="__codelineno-86-15" name="__codelineno-86-15" href="#__codelineno-86-15"></a><span class="w">    </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-86-16"><a id="__codelineno-86-16" name="__codelineno-86-16" href="#__codelineno-86-16"></a>
</span><span id="__span-86-17"><a id="__codelineno-86-17" name="__codelineno-86-17" href="#__codelineno-86-17"></a><span class="w">    </span><span class="cm">&lt;!--sqlSessionFactory--&gt;</span>
</span><span id="__span-86-18"><a id="__codelineno-86-18" name="__codelineno-86-18" href="#__codelineno-86-18"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"sqlSessionFactory"</span><span class="w"> </span><span class="na">class=</span><span class="s">"org.mybatis.spring.SqlSessionFactoryBean"</span><span class="nt">&gt;</span>
</span><span id="__span-86-19"><a id="__codelineno-86-19" name="__codelineno-86-19" href="#__codelineno-86-19"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"dataSource"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"dataSource"</span><span class="nt">/&gt;</span>
</span><span id="__span-86-20"><a id="__codelineno-86-20" name="__codelineno-86-20" href="#__codelineno-86-20"></a><span class="w">        </span><span class="cm">&lt;!--ç»‘å®šMybatisé…ç½®æ–‡ä»¶--&gt;</span>
</span><span id="__span-86-21"><a id="__codelineno-86-21" name="__codelineno-86-21" href="#__codelineno-86-21"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"configLocation"</span><span class="w"> </span><span class="na">value=</span><span class="s">"classpath:mybatis-config.xml"</span><span class="nt">/&gt;</span>
</span><span id="__span-86-22"><a id="__codelineno-86-22" name="__codelineno-86-22" href="#__codelineno-86-22"></a><span class="w">    </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-86-23"><a id="__codelineno-86-23" name="__codelineno-86-23" href="#__codelineno-86-23"></a>
</span><span id="__span-86-24"><a id="__codelineno-86-24" name="__codelineno-86-24" href="#__codelineno-86-24"></a><span class="w">    </span><span class="cm">&lt;!--SqlSessionTemplateï¼šå°±æ˜¯ä»¥å‰ä½¿ç”¨çš„sqlSession--&gt;</span>
</span><span id="__span-86-25"><a id="__codelineno-86-25" name="__codelineno-86-25" href="#__codelineno-86-25"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"sqlSession"</span><span class="w"> </span><span class="na">class=</span><span class="s">"org.mybatis.spring.SqlSessionTemplate"</span><span class="nt">&gt;</span>
</span><span id="__span-86-26"><a id="__codelineno-86-26" name="__codelineno-86-26" href="#__codelineno-86-26"></a><span class="w">        </span><span class="cm">&lt;!--åªèƒ½é€šè¿‡æ„é€ å™¨æ³¨å…¥sqlSessionFactoryï¼Œå› ä¸ºå®ƒæ²¡æœ‰setæ–¹æ³•--&gt;</span>
</span><span id="__span-86-27"><a id="__codelineno-86-27" name="__codelineno-86-27" href="#__codelineno-86-27"></a><span class="w">        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">"0"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"sqlSessionFactory"</span><span class="nt">/&gt;</span>
</span><span id="__span-86-28"><a id="__codelineno-86-28" name="__codelineno-86-28" href="#__codelineno-86-28"></a><span class="w">    </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-86-29"><a id="__codelineno-86-29" name="__codelineno-86-29" href="#__codelineno-86-29"></a><span class="nt">&lt;/beans&gt;</span>
</span></code></pre></div> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-87-1"><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
</span><span id="__span-87-2"><a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a><span class="cp">&lt;!DOCTYPE configuration</span>
</span><span id="__span-87-3"><a id="__codelineno-87-3" name="__codelineno-87-3" href="#__codelineno-87-3"></a><span class="cp">        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"</span>
</span><span id="__span-87-4"><a id="__codelineno-87-4" name="__codelineno-87-4" href="#__codelineno-87-4"></a><span class="cp">        "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span>
</span><span id="__span-87-5"><a id="__codelineno-87-5" name="__codelineno-87-5" href="#__codelineno-87-5"></a><span class="nt">&lt;configuration&gt;</span>
</span><span id="__span-87-6"><a id="__codelineno-87-6" name="__codelineno-87-6" href="#__codelineno-87-6"></a><span class="w">    </span><span class="nt">&lt;typeAliases&gt;</span>
</span><span id="__span-87-7"><a id="__codelineno-87-7" name="__codelineno-87-7" href="#__codelineno-87-7"></a><span class="w">        </span><span class="nt">&lt;package</span><span class="w"> </span><span class="na">name=</span><span class="s">"com.kuang.pojo"</span><span class="nt">/&gt;</span>
</span><span id="__span-87-8"><a id="__codelineno-87-8" name="__codelineno-87-8" href="#__codelineno-87-8"></a><span class="w">    </span><span class="nt">&lt;/typeAliases&gt;</span>
</span><span id="__span-87-9"><a id="__codelineno-87-9" name="__codelineno-87-9" href="#__codelineno-87-9"></a>
</span><span id="__span-87-10"><a id="__codelineno-87-10" name="__codelineno-87-10" href="#__codelineno-87-10"></a><span class="w">    </span><span class="nt">&lt;mappers&gt;</span>
</span><span id="__span-87-11"><a id="__codelineno-87-11" name="__codelineno-87-11" href="#__codelineno-87-11"></a><span class="w">        </span><span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.mapper.UserMapper"</span><span class="nt">/&gt;</span>
</span><span id="__span-87-12"><a id="__codelineno-87-12" name="__codelineno-87-12" href="#__codelineno-87-12"></a><span class="w">    </span><span class="nt">&lt;/mappers&gt;</span>
</span><span id="__span-87-13"><a id="__codelineno-87-13" name="__codelineno-87-13" href="#__codelineno-87-13"></a><span class="nt">&lt;/configuration&gt;</span>
</span></code></pre></div> <p>ç¼–å†™å®ç°ç±»ï¼šUserMapperImpl.java</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-88-1"><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserMapperImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">UserMapper</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-88-2"><a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a><span class="w">    </span><span class="c1">//åŸæ¥æ‰€æœ‰çš„æ“ä½œï¼Œéƒ½ä½¿ç”¨sqlSessionæ¥æ‰§è¡Œï¼Œç°åœ¨éƒ½ä½¿ç”¨sqlSessionTemplate</span>
</span><span id="__span-88-3"><a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">SqlSessionTemplate</span><span class="w"> </span><span class="n">sqlSessionTemplate</span><span class="p">;</span>
</span><span id="__span-88-4"><a id="__codelineno-88-4" name="__codelineno-88-4" href="#__codelineno-88-4"></a>
</span><span id="__span-88-5"><a id="__codelineno-88-5" name="__codelineno-88-5" href="#__codelineno-88-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setSqlSessionTemplate</span><span class="p">(</span><span class="n">SqlSessionTemplate</span><span class="w"> </span><span class="n">sqlSessionTemplate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-88-6"><a id="__codelineno-88-6" name="__codelineno-88-6" href="#__codelineno-88-6"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">sqlSessionTemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSessionTemplate</span><span class="p">;</span>
</span><span id="__span-88-7"><a id="__codelineno-88-7" name="__codelineno-88-7" href="#__codelineno-88-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-88-8"><a id="__codelineno-88-8" name="__codelineno-88-8" href="#__codelineno-88-8"></a>
</span><span id="__span-88-9"><a id="__codelineno-88-9" name="__codelineno-88-9" href="#__codelineno-88-9"></a><span class="w">    </span><span class="nd">@Override</span>
</span><span id="__span-88-10"><a id="__codelineno-88-10" name="__codelineno-88-10" href="#__codelineno-88-10"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">selectUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-88-11"><a id="__codelineno-88-11" name="__codelineno-88-11" href="#__codelineno-88-11"></a><span class="w">        </span><span class="n">UserMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSessionTemplate</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">UserMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-88-12"><a id="__codelineno-88-12" name="__codelineno-88-12" href="#__codelineno-88-12"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">selectUser</span><span class="p">();</span>
</span><span id="__span-88-13"><a id="__codelineno-88-13" name="__codelineno-88-13" href="#__codelineno-88-13"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-88-14"><a id="__codelineno-88-14" name="__codelineno-88-14" href="#__codelineno-88-14"></a><span class="p">}</span>
</span></code></pre></div> <p>é…ç½®applicationContext.xmlï¼š</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-89-1"><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
</span><span id="__span-89-2"><a id="__codelineno-89-2" name="__codelineno-89-2" href="#__codelineno-89-2"></a><span class="nt">&lt;beans</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
</span><span id="__span-89-3"><a id="__codelineno-89-3" name="__codelineno-89-3" href="#__codelineno-89-3"></a><span class="w">       </span><span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
</span><span id="__span-89-4"><a id="__codelineno-89-4" name="__codelineno-89-4" href="#__codelineno-89-4"></a><span class="w">       </span><span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>
</span><span id="__span-89-5"><a id="__codelineno-89-5" name="__codelineno-89-5" href="#__codelineno-89-5"></a><span class="w">    </span><span class="nt">&lt;import</span><span class="w"> </span><span class="na">resource=</span><span class="s">"spring-dao.xml"</span><span class="nt">/&gt;</span>
</span><span id="__span-89-6"><a id="__codelineno-89-6" name="__codelineno-89-6" href="#__codelineno-89-6"></a>
</span><span id="__span-89-7"><a id="__codelineno-89-7" name="__codelineno-89-7" href="#__codelineno-89-7"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"userMapper"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.mapper.UserMapperImpl"</span><span class="nt">&gt;</span>
</span><span id="__span-89-8"><a id="__codelineno-89-8" name="__codelineno-89-8" href="#__codelineno-89-8"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"sqlSessionTemplate"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"sqlSession"</span><span class="nt">/&gt;</span>
</span><span id="__span-89-9"><a id="__codelineno-89-9" name="__codelineno-89-9" href="#__codelineno-89-9"></a><span class="w">    </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-89-10"><a id="__codelineno-89-10" name="__codelineno-89-10" href="#__codelineno-89-10"></a><span class="nt">&lt;/beans&gt;</span>
</span></code></pre></div> <p>æµ‹è¯•ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-90-1"><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyTest</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-90-2"><a id="__codelineno-90-2" name="__codelineno-90-2" href="#__codelineno-90-2"></a><span class="w">    </span><span class="nd">@Test</span>
</span><span id="__span-90-3"><a id="__codelineno-90-3" name="__codelineno-90-3" href="#__codelineno-90-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-90-4"><a id="__codelineno-90-4" name="__codelineno-90-4" href="#__codelineno-90-4"></a><span class="w">        </span><span class="n">ClassPathXmlApplicationContext</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ClassPathXmlApplicationContext</span><span class="p">(</span><span class="s">"applicationContext.xml"</span><span class="p">);</span>
</span><span id="__span-90-5"><a id="__codelineno-90-5" name="__codelineno-90-5" href="#__codelineno-90-5"></a><span class="w">        </span><span class="n">UserMapper</span><span class="w"> </span><span class="n">userMapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="s">"userMapper"</span><span class="p">,</span><span class="w"> </span><span class="n">UserMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-90-6"><a id="__codelineno-90-6" name="__codelineno-90-6" href="#__codelineno-90-6"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">userMapper</span><span class="p">.</span><span class="na">selectUser</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-90-7"><a id="__codelineno-90-7" name="__codelineno-90-7" href="#__codelineno-90-7"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>
</span><span id="__span-90-8"><a id="__codelineno-90-8" name="__codelineno-90-8" href="#__codelineno-90-8"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-90-9"><a id="__codelineno-90-9" name="__codelineno-90-9" href="#__codelineno-90-9"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-90-10"><a id="__codelineno-90-10" name="__codelineno-90-10" href="#__codelineno-90-10"></a><span class="p">}</span>
</span></code></pre></div> <p><strong>æ–¹å¼äºŒ</strong></p> <p>ä¿®æ”¹å®ç°ç±»ï¼šUserMapperImpl.java</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-91-1"><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserMapperImpl</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">SqlSessionDaoSupport</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">UserMapper</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-91-2"><a id="__codelineno-91-2" name="__codelineno-91-2" href="#__codelineno-91-2"></a><span class="w">    </span><span class="nd">@Override</span>
</span><span id="__span-91-3"><a id="__codelineno-91-3" name="__codelineno-91-3" href="#__codelineno-91-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">selectUser</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-91-4"><a id="__codelineno-91-4" name="__codelineno-91-4" href="#__codelineno-91-4"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">getSqlSession</span><span class="p">().</span><span class="na">getMapper</span><span class="p">(</span><span class="n">UserMapper</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">selectUser</span><span class="p">();</span>
</span><span id="__span-91-5"><a id="__codelineno-91-5" name="__codelineno-91-5" href="#__codelineno-91-5"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-91-6"><a id="__codelineno-91-6" name="__codelineno-91-6" href="#__codelineno-91-6"></a><span class="p">}</span>
</span></code></pre></div> <p>ä¿®æ”¹spring-dao.xmlï¼šSqlSessionTemplateä¸éœ€è¦ï¼Œåˆ äº†ã€‚</p> <p>é‡æ–°é…ç½®applicationContext.xmlï¼š</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-92-1"><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
</span><span id="__span-92-2"><a id="__codelineno-92-2" name="__codelineno-92-2" href="#__codelineno-92-2"></a><span class="nt">&lt;beans</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
</span><span id="__span-92-3"><a id="__codelineno-92-3" name="__codelineno-92-3" href="#__codelineno-92-3"></a><span class="w">       </span><span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
</span><span id="__span-92-4"><a id="__codelineno-92-4" name="__codelineno-92-4" href="#__codelineno-92-4"></a><span class="w">       </span><span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>
</span><span id="__span-92-5"><a id="__codelineno-92-5" name="__codelineno-92-5" href="#__codelineno-92-5"></a><span class="w">    </span><span class="nt">&lt;import</span><span class="w"> </span><span class="na">resource=</span><span class="s">"spring-dao.xml"</span><span class="nt">/&gt;</span>
</span><span id="__span-92-6"><a id="__codelineno-92-6" name="__codelineno-92-6" href="#__codelineno-92-6"></a>
</span><span id="__span-92-7"><a id="__codelineno-92-7" name="__codelineno-92-7" href="#__codelineno-92-7"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"userMapper"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.kuang.mapper.UserMapperImpl"</span><span class="nt">&gt;</span>
</span><span id="__span-92-8"><a id="__codelineno-92-8" name="__codelineno-92-8" href="#__codelineno-92-8"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"sqlSessionFactory"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"sqlSessionFactory"</span><span class="nt">/&gt;</span>
</span><span id="__span-92-9"><a id="__codelineno-92-9" name="__codelineno-92-9" href="#__codelineno-92-9"></a><span class="w">    </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-92-10"><a id="__codelineno-92-10" name="__codelineno-92-10" href="#__codelineno-92-10"></a><span class="nt">&lt;/beans&gt;</span>
</span></code></pre></div> <h2 id="13äº‹åŠ¡">13ã€äº‹åŠ¡<a class="headerlink" href="#13äº‹åŠ¡" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <ul> <li>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼Œåœ¨ä»£ç ä¸­è°ƒç”¨ commit()ã€rollback()ç­‰äº‹åŠ¡ç®¡ç†ç›¸å…³çš„æ–¹æ³•</li> <li>åŸºäº TransactionProxyFactoryBean çš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†</li> <li>åŸºäºæ³¨è§£ @Transactional çš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†</li> <li>åŸºäº Aspectj AOP é…ç½®ï¼ˆæ³¨è§£ï¼‰äº‹åŠ¡</li> </ul> <h3 id="131ç¼–ç¨‹å¼äº‹åŠ¡">13.1ã€ç¼–ç¨‹å¼äº‹åŠ¡<a class="headerlink" href="#131ç¼–ç¨‹å¼äº‹åŠ¡" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p><strong>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼Œåœ¨ä»£ç ä¸­è°ƒç”¨ commit()ã€rollback()ç­‰äº‹åŠ¡ç®¡ç†ç›¸å…³çš„æ–¹æ³•</strong></p> <p>maven pom.xml æ–‡ä»¶</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-93-1"><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a><span class="nt">&lt;dependency&gt;</span>
</span><span id="__span-93-2"><a id="__codelineno-93-2" name="__codelineno-93-2" href="#__codelineno-93-2"></a><span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
</span><span id="__span-93-3"><a id="__codelineno-93-3" name="__codelineno-93-3" href="#__codelineno-93-3"></a><span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-beans<span class="nt">&lt;/artifactId&gt;</span>
</span><span id="__span-93-4"><a id="__codelineno-93-4" name="__codelineno-93-4" href="#__codelineno-93-4"></a><span class="w">    </span><span class="nt">&lt;version&gt;</span>4.2.4.RELEASE<span class="nt">&lt;/version&gt;</span>
</span><span id="__span-93-5"><a id="__codelineno-93-5" name="__codelineno-93-5" href="#__codelineno-93-5"></a><span class="nt">&lt;/dependency&gt;</span>
</span><span id="__span-93-6"><a id="__codelineno-93-6" name="__codelineno-93-6" href="#__codelineno-93-6"></a>
</span><span id="__span-93-7"><a id="__codelineno-93-7" name="__codelineno-93-7" href="#__codelineno-93-7"></a><span class="nt">&lt;dependency&gt;</span>
</span><span id="__span-93-8"><a id="__codelineno-93-8" name="__codelineno-93-8" href="#__codelineno-93-8"></a><span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
</span><span id="__span-93-9"><a id="__codelineno-93-9" name="__codelineno-93-9" href="#__codelineno-93-9"></a><span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-context<span class="nt">&lt;/artifactId&gt;</span>
</span><span id="__span-93-10"><a id="__codelineno-93-10" name="__codelineno-93-10" href="#__codelineno-93-10"></a><span class="w">    </span><span class="nt">&lt;version&gt;</span>4.2.4.RELEASE<span class="nt">&lt;/version&gt;</span>
</span><span id="__span-93-11"><a id="__codelineno-93-11" name="__codelineno-93-11" href="#__codelineno-93-11"></a><span class="nt">&lt;/dependency&gt;</span>
</span><span id="__span-93-12"><a id="__codelineno-93-12" name="__codelineno-93-12" href="#__codelineno-93-12"></a>
</span><span id="__span-93-13"><a id="__codelineno-93-13" name="__codelineno-93-13" href="#__codelineno-93-13"></a><span class="nt">&lt;dependency&gt;</span>
</span><span id="__span-93-14"><a id="__codelineno-93-14" name="__codelineno-93-14" href="#__codelineno-93-14"></a><span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
</span><span id="__span-93-15"><a id="__codelineno-93-15" name="__codelineno-93-15" href="#__codelineno-93-15"></a><span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-aop<span class="nt">&lt;/artifactId&gt;</span>
</span><span id="__span-93-16"><a id="__codelineno-93-16" name="__codelineno-93-16" href="#__codelineno-93-16"></a><span class="w">    </span><span class="nt">&lt;version&gt;</span>4.2.4.RELEASE<span class="nt">&lt;/version&gt;</span>
</span><span id="__span-93-17"><a id="__codelineno-93-17" name="__codelineno-93-17" href="#__codelineno-93-17"></a><span class="nt">&lt;/dependency&gt;</span>
</span><span id="__span-93-18"><a id="__codelineno-93-18" name="__codelineno-93-18" href="#__codelineno-93-18"></a>
</span><span id="__span-93-19"><a id="__codelineno-93-19" name="__codelineno-93-19" href="#__codelineno-93-19"></a><span class="nt">&lt;dependency&gt;</span>
</span><span id="__span-93-20"><a id="__codelineno-93-20" name="__codelineno-93-20" href="#__codelineno-93-20"></a><span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
</span><span id="__span-93-21"><a id="__codelineno-93-21" name="__codelineno-93-21" href="#__codelineno-93-21"></a><span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-tx<span class="nt">&lt;/artifactId&gt;</span>
</span><span id="__span-93-22"><a id="__codelineno-93-22" name="__codelineno-93-22" href="#__codelineno-93-22"></a><span class="w">    </span><span class="nt">&lt;version&gt;</span>4.2.4.RELEASE<span class="nt">&lt;/version&gt;</span>
</span><span id="__span-93-23"><a id="__codelineno-93-23" name="__codelineno-93-23" href="#__codelineno-93-23"></a><span class="nt">&lt;/dependency&gt;</span>
</span><span id="__span-93-24"><a id="__codelineno-93-24" name="__codelineno-93-24" href="#__codelineno-93-24"></a>
</span><span id="__span-93-25"><a id="__codelineno-93-25" name="__codelineno-93-25" href="#__codelineno-93-25"></a><span class="nt">&lt;dependency&gt;</span>
</span><span id="__span-93-26"><a id="__codelineno-93-26" name="__codelineno-93-26" href="#__codelineno-93-26"></a><span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
</span><span id="__span-93-27"><a id="__codelineno-93-27" name="__codelineno-93-27" href="#__codelineno-93-27"></a><span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-jdbc<span class="nt">&lt;/artifactId&gt;</span>
</span><span id="__span-93-28"><a id="__codelineno-93-28" name="__codelineno-93-28" href="#__codelineno-93-28"></a><span class="w">    </span><span class="nt">&lt;version&gt;</span>4.2.4.RELEASE<span class="nt">&lt;/version&gt;</span>
</span><span id="__span-93-29"><a id="__codelineno-93-29" name="__codelineno-93-29" href="#__codelineno-93-29"></a><span class="nt">&lt;/dependency&gt;</span>
</span><span id="__span-93-30"><a id="__codelineno-93-30" name="__codelineno-93-30" href="#__codelineno-93-30"></a>
</span><span id="__span-93-31"><a id="__codelineno-93-31" name="__codelineno-93-31" href="#__codelineno-93-31"></a><span class="cm">&lt;!-- mysqlé©±åŠ¨ --&gt;</span>
</span><span id="__span-93-32"><a id="__codelineno-93-32" name="__codelineno-93-32" href="#__codelineno-93-32"></a><span class="nt">&lt;dependency&gt;</span>
</span><span id="__span-93-33"><a id="__codelineno-93-33" name="__codelineno-93-33" href="#__codelineno-93-33"></a><span class="w">    </span><span class="nt">&lt;groupId&gt;</span>mysql<span class="nt">&lt;/groupId&gt;</span>
</span><span id="__span-93-34"><a id="__codelineno-93-34" name="__codelineno-93-34" href="#__codelineno-93-34"></a><span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>mysql-connector-java<span class="nt">&lt;/artifactId&gt;</span>
</span><span id="__span-93-35"><a id="__codelineno-93-35" name="__codelineno-93-35" href="#__codelineno-93-35"></a><span class="w">    </span><span class="nt">&lt;version&gt;</span>5.1.18<span class="nt">&lt;/version&gt;</span>
</span><span id="__span-93-36"><a id="__codelineno-93-36" name="__codelineno-93-36" href="#__codelineno-93-36"></a><span class="nt">&lt;/dependency&gt;</span>
</span></code></pre></div> <p>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼Œå¯ä»¥é€šè¿‡ java.sql.Connection æ§åˆ¶äº‹åŠ¡ã€‚spring é…ç½®æ–‡ä»¶</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-94-1"><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
</span><span id="__span-94-2"><a id="__codelineno-94-2" name="__codelineno-94-2" href="#__codelineno-94-2"></a><span class="nt">&lt;beans</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
</span><span id="__span-94-3"><a id="__codelineno-94-3" name="__codelineno-94-3" href="#__codelineno-94-3"></a><span class="w">    </span><span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
</span><span id="__span-94-4"><a id="__codelineno-94-4" name="__codelineno-94-4" href="#__codelineno-94-4"></a><span class="w">    </span><span class="na">xmlns:context=</span><span class="s">"http://www.springframework.org/schema/context"</span>
</span><span id="__span-94-5"><a id="__codelineno-94-5" name="__codelineno-94-5" href="#__codelineno-94-5"></a><span class="w">    </span><span class="na">xsi:schemaLocation=</span><span class="s">"</span>
</span><span id="__span-94-6"><a id="__codelineno-94-6" name="__codelineno-94-6" href="#__codelineno-94-6"></a><span class="s">        http://www.springframework.org/schema/beans </span>
</span><span id="__span-94-7"><a id="__codelineno-94-7" name="__codelineno-94-7" href="#__codelineno-94-7"></a><span class="s">        http://www.springframework.org/schema/beans/spring-beans.xsd</span>
</span><span id="__span-94-8"><a id="__codelineno-94-8" name="__codelineno-94-8" href="#__codelineno-94-8"></a><span class="s">        http://www.springframework.org/schema/context</span>
</span><span id="__span-94-9"><a id="__codelineno-94-9" name="__codelineno-94-9" href="#__codelineno-94-9"></a><span class="s">        http://www.springframework.org/schema/context/spring-context.xsd"</span><span class="nt">&gt;</span>
</span><span id="__span-94-10"><a id="__codelineno-94-10" name="__codelineno-94-10" href="#__codelineno-94-10"></a>
</span><span id="__span-94-11"><a id="__codelineno-94-11" name="__codelineno-94-11" href="#__codelineno-94-11"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"driver"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="nt">&gt;&lt;/bean&gt;</span>
</span><span id="__span-94-12"><a id="__codelineno-94-12" name="__codelineno-94-12" href="#__codelineno-94-12"></a>
</span><span id="__span-94-13"><a id="__codelineno-94-13" name="__codelineno-94-13" href="#__codelineno-94-13"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"datasource"</span><span class="w"> </span><span class="na">class=</span><span class="s">"org.springframework.jdbc.datasource.SimpleDriverDataSource"</span><span class="nt">&gt;</span>
</span><span id="__span-94-14"><a id="__codelineno-94-14" name="__codelineno-94-14" href="#__codelineno-94-14"></a><span class="w">        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">"0"</span><span class="w"> </span><span class="na">name=</span><span class="s">"driver"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"driver"</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-94-15"><a id="__codelineno-94-15" name="__codelineno-94-15" href="#__codelineno-94-15"></a><span class="w">        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">"1"</span><span class="nt">&gt;</span>
</span><span id="__span-94-16"><a id="__codelineno-94-16" name="__codelineno-94-16" href="#__codelineno-94-16"></a><span class="w">            </span><span class="nt">&lt;value&gt;</span>jdbc:mysql://localhost:3306/test<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-94-17"><a id="__codelineno-94-17" name="__codelineno-94-17" href="#__codelineno-94-17"></a><span class="w">        </span><span class="nt">&lt;/constructor-arg&gt;</span>
</span><span id="__span-94-18"><a id="__codelineno-94-18" name="__codelineno-94-18" href="#__codelineno-94-18"></a><span class="w">        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">"2"</span><span class="nt">&gt;</span>
</span><span id="__span-94-19"><a id="__codelineno-94-19" name="__codelineno-94-19" href="#__codelineno-94-19"></a><span class="w">            </span><span class="nt">&lt;value&gt;</span>root<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-94-20"><a id="__codelineno-94-20" name="__codelineno-94-20" href="#__codelineno-94-20"></a><span class="w">        </span><span class="nt">&lt;/constructor-arg&gt;</span>
</span><span id="__span-94-21"><a id="__codelineno-94-21" name="__codelineno-94-21" href="#__codelineno-94-21"></a><span class="w">        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">"3"</span><span class="nt">&gt;</span>
</span><span id="__span-94-22"><a id="__codelineno-94-22" name="__codelineno-94-22" href="#__codelineno-94-22"></a><span class="w">            </span><span class="nt">&lt;value&gt;</span>root<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-94-23"><a id="__codelineno-94-23" name="__codelineno-94-23" href="#__codelineno-94-23"></a><span class="w">        </span><span class="nt">&lt;/constructor-arg&gt;</span>
</span><span id="__span-94-24"><a id="__codelineno-94-24" name="__codelineno-94-24" href="#__codelineno-94-24"></a><span class="w">    </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-94-25"><a id="__codelineno-94-25" name="__codelineno-94-25" href="#__codelineno-94-25"></a><span class="nt">&lt;/beans&gt;</span>
</span></code></pre></div> <p>æµ‹è¯•ä»£ç </p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-95-1"><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TransactionTest</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-95-2"><a id="__codelineno-95-2" name="__codelineno-95-2" href="#__codelineno-95-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-95-3"><a id="__codelineno-95-3" name="__codelineno-95-3" href="#__codelineno-95-3"></a><span class="w">        </span><span class="n">testManualTransaction</span><span class="p">();</span><span class="c1">//æµ‹è¯•å‡½æ•°å¼æ§åˆ¶äº‹åŠ¡</span>
</span><span id="__span-95-4"><a id="__codelineno-95-4" name="__codelineno-95-4" href="#__codelineno-95-4"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-95-5"><a id="__codelineno-95-5" name="__codelineno-95-5" href="#__codelineno-95-5"></a>
</span><span id="__span-95-6"><a id="__codelineno-95-6" name="__codelineno-95-6" href="#__codelineno-95-6"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testManualTransaction</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-95-7"><a id="__codelineno-95-7" name="__codelineno-95-7" href="#__codelineno-95-7"></a><span class="w">        </span><span class="n">ApplicationContext</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ClassPathXmlApplicationContext</span><span class="p">(</span><span class="s">"spring_transaction.xml"</span><span class="p">);</span>
</span><span id="__span-95-8"><a id="__codelineno-95-8" name="__codelineno-95-8" href="#__codelineno-95-8"></a><span class="w">        </span><span class="n">DataSource</span><span class="w"> </span><span class="n">ds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">DataSource</span><span class="p">)</span><span class="n">context</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="s">"datasource"</span><span class="p">);</span>
</span><span id="__span-95-9"><a id="__codelineno-95-9" name="__codelineno-95-9" href="#__codelineno-95-9"></a><span class="w">        </span><span class="n">Connection</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ds</span><span class="p">.</span><span class="na">getConnection</span><span class="p">();</span>
</span><span id="__span-95-10"><a id="__codelineno-95-10" name="__codelineno-95-10" href="#__codelineno-95-10"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-95-11"><a id="__codelineno-95-11" name="__codelineno-95-11" href="#__codelineno-95-11"></a><span class="w">            </span><span class="n">initTable</span><span class="p">(</span><span class="n">conn</span><span class="p">);</span><span class="c1">//åˆå§‹åŒ–è¡¨</span>
</span><span id="__span-95-12"><a id="__codelineno-95-12" name="__codelineno-95-12" href="#__codelineno-95-12"></a><span class="w">            </span><span class="n">conn</span><span class="p">.</span><span class="na">setAutoCommit</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span><span class="c1">//è®¾ç½®ä¸è‡ªåŠ¨æäº¤äº‹åŠ¡</span>
</span><span id="__span-95-13"><a id="__codelineno-95-13" name="__codelineno-95-13" href="#__codelineno-95-13"></a><span class="w">            </span><span class="n">queryUsers</span><span class="p">(</span><span class="n">conn</span><span class="p">);</span><span class="c1">//æŸ¥è¯¢æ‰“å°ç”¨æˆ·è¡¨</span>
</span><span id="__span-95-14"><a id="__codelineno-95-14" name="__codelineno-95-14" href="#__codelineno-95-14"></a><span class="w">            </span><span class="n">deleteUser</span><span class="p">(</span><span class="n">conn</span><span class="p">);</span><span class="c1">//åˆ é™¤ id=1 ç”¨æˆ·</span>
</span><span id="__span-95-15"><a id="__codelineno-95-15" name="__codelineno-95-15" href="#__codelineno-95-15"></a><span class="w">            </span><span class="n">conn</span><span class="p">.</span><span class="na">rollback</span><span class="p">();</span><span class="c1">//å›æ»š</span>
</span><span id="__span-95-16"><a id="__codelineno-95-16" name="__codelineno-95-16" href="#__codelineno-95-16"></a><span class="w">            </span><span class="n">queryUsers</span><span class="p">(</span><span class="n">conn</span><span class="p">);</span><span class="c1">//æŸ¥è¯¢æ‰“å°ç”¨æˆ·è¡¨</span>
</span><span id="__span-95-17"><a id="__codelineno-95-17" name="__codelineno-95-17" href="#__codelineno-95-17"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-95-18"><a id="__codelineno-95-18" name="__codelineno-95-18" href="#__codelineno-95-18"></a><span class="w">            </span><span class="n">conn</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
</span><span id="__span-95-19"><a id="__codelineno-95-19" name="__codelineno-95-19" href="#__codelineno-95-19"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-95-20"><a id="__codelineno-95-20" name="__codelineno-95-20" href="#__codelineno-95-20"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-95-21"><a id="__codelineno-95-21" name="__codelineno-95-21" href="#__codelineno-95-21"></a>
</span><span id="__span-95-22"><a id="__codelineno-95-22" name="__codelineno-95-22" href="#__codelineno-95-22"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">initTable</span><span class="p">(</span><span class="n">Connection</span><span class="w"> </span><span class="n">conn</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-95-23"><a id="__codelineno-95-23" name="__codelineno-95-23" href="#__codelineno-95-23"></a><span class="w">        </span><span class="n">conn</span><span class="p">.</span><span class="na">createStatement</span><span class="p">().</span><span class="na">execute</span><span class="p">(</span><span class="s">"drop table if exists user"</span><span class="p">);</span>
</span><span id="__span-95-24"><a id="__codelineno-95-24" name="__codelineno-95-24" href="#__codelineno-95-24"></a><span class="w">        </span><span class="n">conn</span><span class="p">.</span><span class="na">createStatement</span><span class="p">().</span><span class="na">execute</span><span class="p">(</span><span class="s">"create table user(id int, username varchar(60)) ENGINE=InnoDB DEFAULT CHARSET=utf8 "</span><span class="p">);</span><span class="c1">//æ˜¯å¦æ”¯æŒäº‹åŠ¡ä¸æ•°æ®åº“å¼•æ“æœ‰å…³ï¼Œæ­¤å¤„åˆ é™¤ ENGINE=InnoDB DEFAULT CHARSET=utf8 å¯èƒ½ä¸æ”¯æŒäº‹åŠ¡</span>
</span><span id="__span-95-25"><a id="__codelineno-95-25" name="__codelineno-95-25" href="#__codelineno-95-25"></a><span class="w">        </span><span class="n">conn</span><span class="p">.</span><span class="na">createStatement</span><span class="p">().</span><span class="na">execute</span><span class="p">(</span><span class="s">"insert into user values(1, 'user1')"</span><span class="p">);</span>
</span><span id="__span-95-26"><a id="__codelineno-95-26" name="__codelineno-95-26" href="#__codelineno-95-26"></a><span class="w">        </span><span class="n">conn</span><span class="p">.</span><span class="na">createStatement</span><span class="p">().</span><span class="na">execute</span><span class="p">(</span><span class="s">"insert into user values(2, 'user2')"</span><span class="p">);</span>
</span><span id="__span-95-27"><a id="__codelineno-95-27" name="__codelineno-95-27" href="#__codelineno-95-27"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-95-28"><a id="__codelineno-95-28" name="__codelineno-95-28" href="#__codelineno-95-28"></a>
</span><span id="__span-95-29"><a id="__codelineno-95-29" name="__codelineno-95-29" href="#__codelineno-95-29"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">deleteUser</span><span class="p">(</span><span class="n">Connection</span><span class="w"> </span><span class="n">conn</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-95-30"><a id="__codelineno-95-30" name="__codelineno-95-30" href="#__codelineno-95-30"></a><span class="w">        </span><span class="n">conn</span><span class="p">.</span><span class="na">createStatement</span><span class="p">().</span><span class="na">execute</span><span class="p">(</span><span class="s">"delete from user where id = 1"</span><span class="p">);</span>
</span><span id="__span-95-31"><a id="__codelineno-95-31" name="__codelineno-95-31" href="#__codelineno-95-31"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-95-32"><a id="__codelineno-95-32" name="__codelineno-95-32" href="#__codelineno-95-32"></a>
</span><span id="__span-95-33"><a id="__codelineno-95-33" name="__codelineno-95-33" href="#__codelineno-95-33"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">queryUsers</span><span class="p">(</span><span class="n">Connection</span><span class="w"> </span><span class="n">conn</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-95-34"><a id="__codelineno-95-34" name="__codelineno-95-34" href="#__codelineno-95-34"></a><span class="w">        </span><span class="n">Statement</span><span class="w"> </span><span class="n">st</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">conn</span><span class="p">.</span><span class="na">createStatement</span><span class="p">();</span>
</span><span id="__span-95-35"><a id="__codelineno-95-35" name="__codelineno-95-35" href="#__codelineno-95-35"></a><span class="w">        </span><span class="n">st</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="s">"select * from user"</span><span class="p">);</span>
</span><span id="__span-95-36"><a id="__codelineno-95-36" name="__codelineno-95-36" href="#__codelineno-95-36"></a><span class="w">        </span><span class="n">ResultSet</span><span class="w"> </span><span class="n">rs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">st</span><span class="p">.</span><span class="na">getResultSet</span><span class="p">();</span>
</span><span id="__span-95-37"><a id="__codelineno-95-37" name="__codelineno-95-37" href="#__codelineno-95-37"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">rs</span><span class="p">.</span><span class="na">next</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-95-38"><a id="__codelineno-95-38" name="__codelineno-95-38" href="#__codelineno-95-38"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">rs</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">"id"</span><span class="p">));</span>
</span><span id="__span-95-39"><a id="__codelineno-95-39" name="__codelineno-95-39" href="#__codelineno-95-39"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="s">" "</span><span class="p">);</span>
</span><span id="__span-95-40"><a id="__codelineno-95-40" name="__codelineno-95-40" href="#__codelineno-95-40"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">rs</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">"username"</span><span class="p">));</span>
</span><span id="__span-95-41"><a id="__codelineno-95-41" name="__codelineno-95-41" href="#__codelineno-95-41"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">();</span>
</span><span id="__span-95-42"><a id="__codelineno-95-42" name="__codelineno-95-42" href="#__codelineno-95-42"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-95-43"><a id="__codelineno-95-43" name="__codelineno-95-43" href="#__codelineno-95-43"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-95-44"><a id="__codelineno-95-44" name="__codelineno-95-44" href="#__codelineno-95-44"></a><span class="p">}</span>
</span></code></pre></div> <p>åˆ é™¤ç”¨æˆ·è¯­å¥å›æ»šï¼Œæ‰“å°å‡ºä¸¤ä¸ªç”¨æˆ·</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-96-1"><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a>1 user1
</span><span id="__span-96-2"><a id="__codelineno-96-2" name="__codelineno-96-2" href="#__codelineno-96-2"></a>2 user2
</span><span id="__span-96-3"><a id="__codelineno-96-3" name="__codelineno-96-3" href="#__codelineno-96-3"></a>1 user1
</span><span id="__span-96-4"><a id="__codelineno-96-4" name="__codelineno-96-4" href="#__codelineno-96-4"></a>2 user2
</span></code></pre></div> <h3 id="132å£°æ˜å¼äº‹åŠ¡-1">13.2ã€å£°æ˜å¼äº‹åŠ¡ 1<a class="headerlink" href="#132å£°æ˜å¼äº‹åŠ¡-1" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p><strong>åŸºäº TransactionProxyFactoryBean çš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†</strong></p> <p>æ–°å¢ UserDao æ¥å£</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-97-1"><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">UserDao</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-97-2"><a id="__codelineno-97-2" name="__codelineno-97-2" href="#__codelineno-97-2"></a>
</span><span id="__span-97-3"><a id="__codelineno-97-3" name="__codelineno-97-3" href="#__codelineno-97-3"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-97-4"><a id="__codelineno-97-4" name="__codelineno-97-4" href="#__codelineno-97-4"></a><span class="cm">     * æŸ¥è¯¢ç”¨æˆ·</span>
</span><span id="__span-97-5"><a id="__codelineno-97-5" name="__codelineno-97-5" href="#__codelineno-97-5"></a><span class="cm">     * @return</span>
</span><span id="__span-97-6"><a id="__codelineno-97-6" name="__codelineno-97-6" href="#__codelineno-97-6"></a><span class="cm">     */</span>
</span><span id="__span-97-7"><a id="__codelineno-97-7" name="__codelineno-97-7" href="#__codelineno-97-7"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">getUsers</span><span class="p">();</span>
</span><span id="__span-97-8"><a id="__codelineno-97-8" name="__codelineno-97-8" href="#__codelineno-97-8"></a>
</span><span id="__span-97-9"><a id="__codelineno-97-9" name="__codelineno-97-9" href="#__codelineno-97-9"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-97-10"><a id="__codelineno-97-10" name="__codelineno-97-10" href="#__codelineno-97-10"></a><span class="cm">     * åˆ é™¤ç”¨æˆ·</span>
</span><span id="__span-97-11"><a id="__codelineno-97-11" name="__codelineno-97-11" href="#__codelineno-97-11"></a><span class="cm">     * @param id</span>
</span><span id="__span-97-12"><a id="__codelineno-97-12" name="__codelineno-97-12" href="#__codelineno-97-12"></a><span class="cm">     * @return</span>
</span><span id="__span-97-13"><a id="__codelineno-97-13" name="__codelineno-97-13" href="#__codelineno-97-13"></a><span class="cm">     */</span>
</span><span id="__span-97-14"><a id="__codelineno-97-14" name="__codelineno-97-14" href="#__codelineno-97-14"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">deleteUser</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">);</span><span class="w">  </span>
</span><span id="__span-97-15"><a id="__codelineno-97-15" name="__codelineno-97-15" href="#__codelineno-97-15"></a><span class="p">}</span>
</span></code></pre></div> <p>æ–°å¢ UserDao å®ç°</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-98-1"><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserDaoImpl</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">JdbcDaoSupport</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">UserDao</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-98-2"><a id="__codelineno-98-2" name="__codelineno-98-2" href="#__codelineno-98-2"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-98-3"><a id="__codelineno-98-3" name="__codelineno-98-3" href="#__codelineno-98-3"></a><span class="cm">     * æŸ¥è¯¢ç”¨æˆ·</span>
</span><span id="__span-98-4"><a id="__codelineno-98-4" name="__codelineno-98-4" href="#__codelineno-98-4"></a><span class="cm">     * @return</span>
</span><span id="__span-98-5"><a id="__codelineno-98-5" name="__codelineno-98-5" href="#__codelineno-98-5"></a><span class="cm">     */</span>
</span><span id="__span-98-6"><a id="__codelineno-98-6" name="__codelineno-98-6" href="#__codelineno-98-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">getUsers</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-98-7"><a id="__codelineno-98-7" name="__codelineno-98-7" href="#__codelineno-98-7"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">sql</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"select * from user"</span><span class="p">;</span>
</span><span id="__span-98-8"><a id="__codelineno-98-8" name="__codelineno-98-8" href="#__codelineno-98-8"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">getJdbcTemplate</span><span class="p">().</span><span class="na">queryForList</span><span class="p">(</span><span class="n">sql</span><span class="p">);</span>
</span><span id="__span-98-9"><a id="__codelineno-98-9" name="__codelineno-98-9" href="#__codelineno-98-9"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-98-10"><a id="__codelineno-98-10" name="__codelineno-98-10" href="#__codelineno-98-10"></a>
</span><span id="__span-98-11"><a id="__codelineno-98-11" name="__codelineno-98-11" href="#__codelineno-98-11"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-98-12"><a id="__codelineno-98-12" name="__codelineno-98-12" href="#__codelineno-98-12"></a><span class="cm">     * åˆ é™¤ç”¨æˆ·</span>
</span><span id="__span-98-13"><a id="__codelineno-98-13" name="__codelineno-98-13" href="#__codelineno-98-13"></a><span class="cm">     * @param id</span>
</span><span id="__span-98-14"><a id="__codelineno-98-14" name="__codelineno-98-14" href="#__codelineno-98-14"></a><span class="cm">     * @return</span>
</span><span id="__span-98-15"><a id="__codelineno-98-15" name="__codelineno-98-15" href="#__codelineno-98-15"></a><span class="cm">     */</span>
</span><span id="__span-98-16"><a id="__codelineno-98-16" name="__codelineno-98-16" href="#__codelineno-98-16"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">deleteUser</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">){</span>
</span><span id="__span-98-17"><a id="__codelineno-98-17" name="__codelineno-98-17" href="#__codelineno-98-17"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">sql</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"delete from user where id = "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
</span><span id="__span-98-18"><a id="__codelineno-98-18" name="__codelineno-98-18" href="#__codelineno-98-18"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">getJdbcTemplate</span><span class="p">().</span><span class="na">update</span><span class="p">(</span><span class="n">sql</span><span class="p">);</span>
</span><span id="__span-98-19"><a id="__codelineno-98-19" name="__codelineno-98-19" href="#__codelineno-98-19"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-98-20"><a id="__codelineno-98-20" name="__codelineno-98-20" href="#__codelineno-98-20"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">();</span>
</span><span id="__span-98-21"><a id="__codelineno-98-21" name="__codelineno-98-21" href="#__codelineno-98-21"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-98-22"><a id="__codelineno-98-22" name="__codelineno-98-22" href="#__codelineno-98-22"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-98-23"><a id="__codelineno-98-23" name="__codelineno-98-23" href="#__codelineno-98-23"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-98-24"><a id="__codelineno-98-24" name="__codelineno-98-24" href="#__codelineno-98-24"></a><span class="p">}</span>
</span></code></pre></div> <p>ä¿®æ”¹ spring é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ äº‹åŠ¡ç®¡ç†å™¨ DataSourceTransactionManager å’Œäº‹åŠ¡ä»£ç†ç±» TransactionProxyFactoryBean</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-99-1"><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
</span><span id="__span-99-2"><a id="__codelineno-99-2" name="__codelineno-99-2" href="#__codelineno-99-2"></a><span class="nt">&lt;beans</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
</span><span id="__span-99-3"><a id="__codelineno-99-3" name="__codelineno-99-3" href="#__codelineno-99-3"></a><span class="w">    </span><span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
</span><span id="__span-99-4"><a id="__codelineno-99-4" name="__codelineno-99-4" href="#__codelineno-99-4"></a><span class="w">    </span><span class="na">xmlns:context=</span><span class="s">"http://www.springframework.org/schema/context"</span>
</span><span id="__span-99-5"><a id="__codelineno-99-5" name="__codelineno-99-5" href="#__codelineno-99-5"></a><span class="w">    </span><span class="na">xsi:schemaLocation=</span><span class="s">"</span>
</span><span id="__span-99-6"><a id="__codelineno-99-6" name="__codelineno-99-6" href="#__codelineno-99-6"></a><span class="s">        http://www.springframework.org/schema/beans </span>
</span><span id="__span-99-7"><a id="__codelineno-99-7" name="__codelineno-99-7" href="#__codelineno-99-7"></a><span class="s">        http://www.springframework.org/schema/beans/spring-beans.xsd</span>
</span><span id="__span-99-8"><a id="__codelineno-99-8" name="__codelineno-99-8" href="#__codelineno-99-8"></a><span class="s">        http://www.springframework.org/schema/context</span>
</span><span id="__span-99-9"><a id="__codelineno-99-9" name="__codelineno-99-9" href="#__codelineno-99-9"></a><span class="s">        http://www.springframework.org/schema/context/spring-context.xsd"</span><span class="nt">&gt;</span>
</span><span id="__span-99-10"><a id="__codelineno-99-10" name="__codelineno-99-10" href="#__codelineno-99-10"></a>
</span><span id="__span-99-11"><a id="__codelineno-99-11" name="__codelineno-99-11" href="#__codelineno-99-11"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"driver"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="nt">&gt;&lt;/bean&gt;</span>
</span><span id="__span-99-12"><a id="__codelineno-99-12" name="__codelineno-99-12" href="#__codelineno-99-12"></a>
</span><span id="__span-99-13"><a id="__codelineno-99-13" name="__codelineno-99-13" href="#__codelineno-99-13"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"datasource"</span><span class="w"> </span><span class="na">class=</span><span class="s">"org.springframework.jdbc.datasource.SimpleDriverDataSource"</span><span class="nt">&gt;</span>
</span><span id="__span-99-14"><a id="__codelineno-99-14" name="__codelineno-99-14" href="#__codelineno-99-14"></a><span class="w">        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">"0"</span><span class="w"> </span><span class="na">name=</span><span class="s">"driver"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"driver"</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-99-15"><a id="__codelineno-99-15" name="__codelineno-99-15" href="#__codelineno-99-15"></a><span class="w">        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">"1"</span><span class="nt">&gt;</span>
</span><span id="__span-99-16"><a id="__codelineno-99-16" name="__codelineno-99-16" href="#__codelineno-99-16"></a><span class="w">            </span><span class="nt">&lt;value&gt;</span>jdbc:mysql://localhost:3306/test<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-99-17"><a id="__codelineno-99-17" name="__codelineno-99-17" href="#__codelineno-99-17"></a><span class="w">        </span><span class="nt">&lt;/constructor-arg&gt;</span>
</span><span id="__span-99-18"><a id="__codelineno-99-18" name="__codelineno-99-18" href="#__codelineno-99-18"></a><span class="w">        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">"2"</span><span class="nt">&gt;</span>
</span><span id="__span-99-19"><a id="__codelineno-99-19" name="__codelineno-99-19" href="#__codelineno-99-19"></a><span class="w">            </span><span class="nt">&lt;value&gt;</span>root<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-99-20"><a id="__codelineno-99-20" name="__codelineno-99-20" href="#__codelineno-99-20"></a><span class="w">        </span><span class="nt">&lt;/constructor-arg&gt;</span>
</span><span id="__span-99-21"><a id="__codelineno-99-21" name="__codelineno-99-21" href="#__codelineno-99-21"></a><span class="w">        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">"3"</span><span class="nt">&gt;</span>
</span><span id="__span-99-22"><a id="__codelineno-99-22" name="__codelineno-99-22" href="#__codelineno-99-22"></a><span class="w">            </span><span class="nt">&lt;value&gt;</span>root<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-99-23"><a id="__codelineno-99-23" name="__codelineno-99-23" href="#__codelineno-99-23"></a><span class="w">        </span><span class="nt">&lt;/constructor-arg&gt;</span>
</span><span id="__span-99-24"><a id="__codelineno-99-24" name="__codelineno-99-24" href="#__codelineno-99-24"></a><span class="w">    </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-99-25"><a id="__codelineno-99-25" name="__codelineno-99-25" href="#__codelineno-99-25"></a>
</span><span id="__span-99-26"><a id="__codelineno-99-26" name="__codelineno-99-26" href="#__codelineno-99-26"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"userDao"</span><span class="w"> </span><span class="na">class=</span><span class="s">"constxiong.interview.transaction.UserDaoImpl"</span><span class="nt">&gt;</span>
</span><span id="__span-99-27"><a id="__codelineno-99-27" name="__codelineno-99-27" href="#__codelineno-99-27"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"dataSource"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"datasource"</span><span class="nt">&gt;&lt;/property&gt;</span>
</span><span id="__span-99-28"><a id="__codelineno-99-28" name="__codelineno-99-28" href="#__codelineno-99-28"></a><span class="w">    </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-99-29"><a id="__codelineno-99-29" name="__codelineno-99-29" href="#__codelineno-99-29"></a>
</span><span id="__span-99-30"><a id="__codelineno-99-30" name="__codelineno-99-30" href="#__codelineno-99-30"></a><span class="w">    </span><span class="cm">&lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span>
</span><span id="__span-99-31"><a id="__codelineno-99-31" name="__codelineno-99-31" href="#__codelineno-99-31"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"tracnsactionManager"</span><span class="w"> </span><span class="na">class=</span><span class="s">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span><span class="nt">&gt;</span>
</span><span id="__span-99-32"><a id="__codelineno-99-32" name="__codelineno-99-32" href="#__codelineno-99-32"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"dataSource"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"datasource"</span><span class="nt">&gt;&lt;/property&gt;</span>
</span><span id="__span-99-33"><a id="__codelineno-99-33" name="__codelineno-99-33" href="#__codelineno-99-33"></a><span class="w">    </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-99-34"><a id="__codelineno-99-34" name="__codelineno-99-34" href="#__codelineno-99-34"></a>
</span><span id="__span-99-35"><a id="__codelineno-99-35" name="__codelineno-99-35" href="#__codelineno-99-35"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"userProxy"</span><span class="w"> </span><span class="na">class=</span><span class="s">"org.springframework.transaction.interceptor.TransactionProxyFactoryBean"</span><span class="nt">&gt;</span>
</span><span id="__span-99-36"><a id="__codelineno-99-36" name="__codelineno-99-36" href="#__codelineno-99-36"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"transactionManager"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"tracnsactionManager"</span><span class="nt">&gt;&lt;/property&gt;</span>
</span><span id="__span-99-37"><a id="__codelineno-99-37" name="__codelineno-99-37" href="#__codelineno-99-37"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"target"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"userDao"</span><span class="nt">&gt;&lt;/property&gt;</span>
</span><span id="__span-99-38"><a id="__codelineno-99-38" name="__codelineno-99-38" href="#__codelineno-99-38"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"transactionAttributes"</span><span class="nt">&gt;</span>
</span><span id="__span-99-39"><a id="__codelineno-99-39" name="__codelineno-99-39" href="#__codelineno-99-39"></a><span class="w">            </span><span class="nt">&lt;props&gt;</span>
</span><span id="__span-99-40"><a id="__codelineno-99-40" name="__codelineno-99-40" href="#__codelineno-99-40"></a><span class="w">                </span><span class="cm">&lt;!-- ä¸»è¦ key æ˜¯æ–¹æ³•   </span>
</span><span id="__span-99-41"><a id="__codelineno-99-41" name="__codelineno-99-41" href="#__codelineno-99-41"></a><span class="cm">                    ISOLATION_DEFAULT  äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</span>
</span><span id="__span-99-42"><a id="__codelineno-99-42" name="__codelineno-99-42" href="#__codelineno-99-42"></a><span class="cm">                    PROPAGATION_REQUIRED  ä¼ æ’­è¡Œä¸º</span>
</span><span id="__span-99-43"><a id="__codelineno-99-43" name="__codelineno-99-43" href="#__codelineno-99-43"></a><span class="cm">                --&gt;</span>
</span><span id="__span-99-44"><a id="__codelineno-99-44" name="__codelineno-99-44" href="#__codelineno-99-44"></a><span class="w">                </span><span class="cm">&lt;!-- -Exception è¡¨ç¤ºå‘ç”ŸæŒ‡å®šå¼‚å¸¸å›æ»šï¼Œ+Exception è¡¨ç¤ºå‘ç”ŸæŒ‡å®šå¼‚å¸¸æäº¤ --&gt;</span>
</span><span id="__span-99-45"><a id="__codelineno-99-45" name="__codelineno-99-45" href="#__codelineno-99-45"></a><span class="w">                </span><span class="nt">&lt;prop</span><span class="w"> </span><span class="na">key=</span><span class="s">"deleteUser"</span><span class="nt">&gt;</span>-java.lang.RuntimeException<span class="nt">&lt;/prop&gt;</span>
</span><span id="__span-99-46"><a id="__codelineno-99-46" name="__codelineno-99-46" href="#__codelineno-99-46"></a><span class="w">            </span><span class="nt">&lt;/props&gt;</span>
</span><span id="__span-99-47"><a id="__codelineno-99-47" name="__codelineno-99-47" href="#__codelineno-99-47"></a><span class="w">        </span><span class="nt">&lt;/property&gt;</span>
</span><span id="__span-99-48"><a id="__codelineno-99-48" name="__codelineno-99-48" href="#__codelineno-99-48"></a><span class="w">    </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-99-49"><a id="__codelineno-99-49" name="__codelineno-99-49" href="#__codelineno-99-49"></a><span class="nt">&lt;/beans&gt;</span>
</span></code></pre></div> <p>æµ‹è¯•ä»£ç </p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-100-1"><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TransactionTest</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-100-2"><a id="__codelineno-100-2" name="__codelineno-100-2" href="#__codelineno-100-2"></a><span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">ApplicationContext</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ClassPathXmlApplicationContext</span><span class="p">(</span><span class="s">"spring_transaction.xml"</span><span class="p">);</span>
</span><span id="__span-100-3"><a id="__codelineno-100-3" name="__codelineno-100-3" href="#__codelineno-100-3"></a>
</span><span id="__span-100-4"><a id="__codelineno-100-4" name="__codelineno-100-4" href="#__codelineno-100-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-100-5"><a id="__codelineno-100-5" name="__codelineno-100-5" href="#__codelineno-100-5"></a><span class="w">        </span><span class="n">testUseTransactionProxy</span><span class="p">();</span><span class="w"> </span><span class="c1">//æµ‹è¯•ä½¿ç”¨ spring TransactionProxyFactoryBean</span>
</span><span id="__span-100-6"><a id="__codelineno-100-6" name="__codelineno-100-6" href="#__codelineno-100-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-100-7"><a id="__codelineno-100-7" name="__codelineno-100-7" href="#__codelineno-100-7"></a>
</span><span id="__span-100-8"><a id="__codelineno-100-8" name="__codelineno-100-8" href="#__codelineno-100-8"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testUseTransactionProxy</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-100-9"><a id="__codelineno-100-9" name="__codelineno-100-9" href="#__codelineno-100-9"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="n">UserDao</span><span class="w"> </span><span class="n">userDao</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">UserDao</span><span class="p">)</span><span class="n">context</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="s">"userProxy"</span><span class="p">);</span>
</span><span id="__span-100-10"><a id="__codelineno-100-10" name="__codelineno-100-10" href="#__codelineno-100-10"></a><span class="w">        </span><span class="n">printUsers</span><span class="p">(</span><span class="n">userDao</span><span class="p">);</span><span class="c1">//æ‰“å°ç”¨æˆ·</span>
</span><span id="__span-100-11"><a id="__codelineno-100-11" name="__codelineno-100-11" href="#__codelineno-100-11"></a><span class="w">        </span><span class="n">userDao</span><span class="p">.</span><span class="na">deleteUser</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="c1">//åˆ é™¤ id=1 ç”¨æˆ·</span>
</span><span id="__span-100-12"><a id="__codelineno-100-12" name="__codelineno-100-12" href="#__codelineno-100-12"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-100-13"><a id="__codelineno-100-13" name="__codelineno-100-13" href="#__codelineno-100-13"></a>
</span><span id="__span-100-14"><a id="__codelineno-100-14" name="__codelineno-100-14" href="#__codelineno-100-14"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">printUsers</span><span class="p">(</span><span class="n">UserDao</span><span class="w"> </span><span class="n">userDao</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-100-15"><a id="__codelineno-100-15" name="__codelineno-100-15" href="#__codelineno-100-15"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">userDao</span><span class="p">.</span><span class="na">getUsers</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-100-16"><a id="__codelineno-100-16" name="__codelineno-100-16" href="#__codelineno-100-16"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>
</span><span id="__span-100-17"><a id="__codelineno-100-17" name="__codelineno-100-17" href="#__codelineno-100-17"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-100-18"><a id="__codelineno-100-18" name="__codelineno-100-18" href="#__codelineno-100-18"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-100-19"><a id="__codelineno-100-19" name="__codelineno-100-19" href="#__codelineno-100-19"></a><span class="p">}</span>
</span></code></pre></div> <p>ç»“æœè¾“å‡º</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-101-1"><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a>{id=1, username=user1}
</span><span id="__span-101-2"><a id="__codelineno-101-2" name="__codelineno-101-2" href="#__codelineno-101-2"></a>{id=2, username=user2}
</span><span id="__span-101-3"><a id="__codelineno-101-3" name="__codelineno-101-3" href="#__codelineno-101-3"></a>Exception in thread "main" java.lang.RuntimeException
</span><span id="__span-101-4"><a id="__codelineno-101-4" name="__codelineno-101-4" href="#__codelineno-101-4"></a>    at constxiong.interview.transaction.UserDaoImpl.deleteUser(UserDaoImpl.java:28)...
</span></code></pre></div> <h3 id="133å£°æ˜å¼äº‹åŠ¡-2">13.3ã€å£°æ˜å¼äº‹åŠ¡ 2<a class="headerlink" href="#133å£°æ˜å¼äº‹åŠ¡-2" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p><strong>åŸºäºæ³¨è§£ @Transactional çš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†</strong></p> <p>UserDaoImpl åˆ é™¤ç”¨æˆ·æ–¹æ³•æ·»åŠ æ³¨è§£ @Transactional(rollbackFor=RuntimeException.class) å‡ºç° RuntimeException å›æ»š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-102-1"><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserDaoImpl</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">JdbcDaoSupport</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">UserDao</span><span class="w"> </span><span class="p">{</span><span class="w">    </span>
</span><span id="__span-102-2"><a id="__codelineno-102-2" name="__codelineno-102-2" href="#__codelineno-102-2"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-102-3"><a id="__codelineno-102-3" name="__codelineno-102-3" href="#__codelineno-102-3"></a><span class="cm">     * æŸ¥è¯¢ç”¨æˆ·</span>
</span><span id="__span-102-4"><a id="__codelineno-102-4" name="__codelineno-102-4" href="#__codelineno-102-4"></a><span class="cm">     * @return</span>
</span><span id="__span-102-5"><a id="__codelineno-102-5" name="__codelineno-102-5" href="#__codelineno-102-5"></a><span class="cm">     */</span>
</span><span id="__span-102-6"><a id="__codelineno-102-6" name="__codelineno-102-6" href="#__codelineno-102-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">getUsers</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-102-7"><a id="__codelineno-102-7" name="__codelineno-102-7" href="#__codelineno-102-7"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">sql</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"select * from user"</span><span class="p">;</span>
</span><span id="__span-102-8"><a id="__codelineno-102-8" name="__codelineno-102-8" href="#__codelineno-102-8"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">getJdbcTemplate</span><span class="p">().</span><span class="na">queryForList</span><span class="p">(</span><span class="n">sql</span><span class="p">);</span>
</span><span id="__span-102-9"><a id="__codelineno-102-9" name="__codelineno-102-9" href="#__codelineno-102-9"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-102-10"><a id="__codelineno-102-10" name="__codelineno-102-10" href="#__codelineno-102-10"></a>
</span><span id="__span-102-11"><a id="__codelineno-102-11" name="__codelineno-102-11" href="#__codelineno-102-11"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-102-12"><a id="__codelineno-102-12" name="__codelineno-102-12" href="#__codelineno-102-12"></a><span class="cm">     * åˆ é™¤ç”¨æˆ·</span>
</span><span id="__span-102-13"><a id="__codelineno-102-13" name="__codelineno-102-13" href="#__codelineno-102-13"></a><span class="cm">     * @param id</span>
</span><span id="__span-102-14"><a id="__codelineno-102-14" name="__codelineno-102-14" href="#__codelineno-102-14"></a><span class="cm">     * @return</span>
</span><span id="__span-102-15"><a id="__codelineno-102-15" name="__codelineno-102-15" href="#__codelineno-102-15"></a><span class="cm">     */</span>
</span><span id="__span-102-16"><a id="__codelineno-102-16" name="__codelineno-102-16" href="#__codelineno-102-16"></a><span class="w">    </span><span class="nd">@Transactional</span><span class="p">(</span><span class="n">rollbackFor</span><span class="o">=</span><span class="n">RuntimeException</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
</span><span id="__span-102-17"><a id="__codelineno-102-17" name="__codelineno-102-17" href="#__codelineno-102-17"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">deleteUser</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">){</span>
</span><span id="__span-102-18"><a id="__codelineno-102-18" name="__codelineno-102-18" href="#__codelineno-102-18"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">sql</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"delete from user where id = "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
</span><span id="__span-102-19"><a id="__codelineno-102-19" name="__codelineno-102-19" href="#__codelineno-102-19"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">getJdbcTemplate</span><span class="p">().</span><span class="na">update</span><span class="p">(</span><span class="n">sql</span><span class="p">);</span>
</span><span id="__span-102-20"><a id="__codelineno-102-20" name="__codelineno-102-20" href="#__codelineno-102-20"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-102-21"><a id="__codelineno-102-21" name="__codelineno-102-21" href="#__codelineno-102-21"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">();</span>
</span><span id="__span-102-22"><a id="__codelineno-102-22" name="__codelineno-102-22" href="#__codelineno-102-22"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-102-23"><a id="__codelineno-102-23" name="__codelineno-102-23" href="#__codelineno-102-23"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-102-24"><a id="__codelineno-102-24" name="__codelineno-102-24" href="#__codelineno-102-24"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-102-25"><a id="__codelineno-102-25" name="__codelineno-102-25" href="#__codelineno-102-25"></a><span class="p">}</span>
</span></code></pre></div> <p>ä¿®æ”¹ spring é…ç½®æ–‡ä»¶ï¼Œå¼€å¯ spring çš„äº‹åŠ¡æ³¨è§£èƒ½åŠ›</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-103-1"><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
</span><span id="__span-103-2"><a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a><span class="nt">&lt;beans</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
</span><span id="__span-103-3"><a id="__codelineno-103-3" name="__codelineno-103-3" href="#__codelineno-103-3"></a><span class="w">    </span><span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
</span><span id="__span-103-4"><a id="__codelineno-103-4" name="__codelineno-103-4" href="#__codelineno-103-4"></a><span class="w">    </span><span class="na">xmlns:context=</span><span class="s">"http://www.springframework.org/schema/context"</span>
</span><span id="__span-103-5"><a id="__codelineno-103-5" name="__codelineno-103-5" href="#__codelineno-103-5"></a><span class="w">    </span><span class="na">xmlns:tx=</span><span class="s">"http://www.springframework.org/schema/tx"</span>
</span><span id="__span-103-6"><a id="__codelineno-103-6" name="__codelineno-103-6" href="#__codelineno-103-6"></a><span class="w">    </span><span class="na">xsi:schemaLocation=</span><span class="s">"</span>
</span><span id="__span-103-7"><a id="__codelineno-103-7" name="__codelineno-103-7" href="#__codelineno-103-7"></a><span class="s">        http://www.springframework.org/schema/beans </span>
</span><span id="__span-103-8"><a id="__codelineno-103-8" name="__codelineno-103-8" href="#__codelineno-103-8"></a><span class="s">        http://www.springframework.org/schema/beans/spring-beans.xsd</span>
</span><span id="__span-103-9"><a id="__codelineno-103-9" name="__codelineno-103-9" href="#__codelineno-103-9"></a><span class="s">        http://www.springframework.org/schema/tx</span>
</span><span id="__span-103-10"><a id="__codelineno-103-10" name="__codelineno-103-10" href="#__codelineno-103-10"></a><span class="s">        http://www.springframework.org/schema/tx/spring-tx-3.2.xsd</span>
</span><span id="__span-103-11"><a id="__codelineno-103-11" name="__codelineno-103-11" href="#__codelineno-103-11"></a><span class="s">        http://www.springframework.org/schema/context</span>
</span><span id="__span-103-12"><a id="__codelineno-103-12" name="__codelineno-103-12" href="#__codelineno-103-12"></a><span class="s">        http://www.springframework.org/schema/context/spring-context.xsd"</span><span class="nt">&gt;</span>
</span><span id="__span-103-13"><a id="__codelineno-103-13" name="__codelineno-103-13" href="#__codelineno-103-13"></a>
</span><span id="__span-103-14"><a id="__codelineno-103-14" name="__codelineno-103-14" href="#__codelineno-103-14"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"driver"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="nt">&gt;&lt;/bean&gt;</span>
</span><span id="__span-103-15"><a id="__codelineno-103-15" name="__codelineno-103-15" href="#__codelineno-103-15"></a>
</span><span id="__span-103-16"><a id="__codelineno-103-16" name="__codelineno-103-16" href="#__codelineno-103-16"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"datasource"</span><span class="w"> </span><span class="na">class=</span><span class="s">"org.springframework.jdbc.datasource.SimpleDriverDataSource"</span><span class="nt">&gt;</span>
</span><span id="__span-103-17"><a id="__codelineno-103-17" name="__codelineno-103-17" href="#__codelineno-103-17"></a><span class="w">        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">"0"</span><span class="w"> </span><span class="na">name=</span><span class="s">"driver"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"driver"</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-103-18"><a id="__codelineno-103-18" name="__codelineno-103-18" href="#__codelineno-103-18"></a><span class="w">        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">"1"</span><span class="nt">&gt;</span>
</span><span id="__span-103-19"><a id="__codelineno-103-19" name="__codelineno-103-19" href="#__codelineno-103-19"></a><span class="w">            </span><span class="nt">&lt;value&gt;</span>jdbc:mysql://localhost:3306/test<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-103-20"><a id="__codelineno-103-20" name="__codelineno-103-20" href="#__codelineno-103-20"></a><span class="w">        </span><span class="nt">&lt;/constructor-arg&gt;</span>
</span><span id="__span-103-21"><a id="__codelineno-103-21" name="__codelineno-103-21" href="#__codelineno-103-21"></a><span class="w">        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">"2"</span><span class="nt">&gt;</span>
</span><span id="__span-103-22"><a id="__codelineno-103-22" name="__codelineno-103-22" href="#__codelineno-103-22"></a><span class="w">            </span><span class="nt">&lt;value&gt;</span>root<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-103-23"><a id="__codelineno-103-23" name="__codelineno-103-23" href="#__codelineno-103-23"></a><span class="w">        </span><span class="nt">&lt;/constructor-arg&gt;</span>
</span><span id="__span-103-24"><a id="__codelineno-103-24" name="__codelineno-103-24" href="#__codelineno-103-24"></a><span class="w">        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">"3"</span><span class="nt">&gt;</span>
</span><span id="__span-103-25"><a id="__codelineno-103-25" name="__codelineno-103-25" href="#__codelineno-103-25"></a><span class="w">            </span><span class="nt">&lt;value&gt;</span>root<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-103-26"><a id="__codelineno-103-26" name="__codelineno-103-26" href="#__codelineno-103-26"></a><span class="w">        </span><span class="nt">&lt;/constructor-arg&gt;</span>
</span><span id="__span-103-27"><a id="__codelineno-103-27" name="__codelineno-103-27" href="#__codelineno-103-27"></a><span class="w">    </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-103-28"><a id="__codelineno-103-28" name="__codelineno-103-28" href="#__codelineno-103-28"></a>
</span><span id="__span-103-29"><a id="__codelineno-103-29" name="__codelineno-103-29" href="#__codelineno-103-29"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"userDao"</span><span class="w"> </span><span class="na">class=</span><span class="s">"constxiong.interview.transaction.UserDaoImpl"</span><span class="nt">&gt;</span>
</span><span id="__span-103-30"><a id="__codelineno-103-30" name="__codelineno-103-30" href="#__codelineno-103-30"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"dataSource"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"datasource"</span><span class="nt">&gt;&lt;/property&gt;</span>
</span><span id="__span-103-31"><a id="__codelineno-103-31" name="__codelineno-103-31" href="#__codelineno-103-31"></a><span class="w">    </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-103-32"><a id="__codelineno-103-32" name="__codelineno-103-32" href="#__codelineno-103-32"></a>
</span><span id="__span-103-33"><a id="__codelineno-103-33" name="__codelineno-103-33" href="#__codelineno-103-33"></a><span class="w">    </span><span class="cm">&lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span>
</span><span id="__span-103-34"><a id="__codelineno-103-34" name="__codelineno-103-34" href="#__codelineno-103-34"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"tracnsactionManager"</span><span class="w"> </span><span class="na">class=</span><span class="s">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span><span class="nt">&gt;</span>
</span><span id="__span-103-35"><a id="__codelineno-103-35" name="__codelineno-103-35" href="#__codelineno-103-35"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"dataSource"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"datasource"</span><span class="nt">&gt;&lt;/property&gt;</span>
</span><span id="__span-103-36"><a id="__codelineno-103-36" name="__codelineno-103-36" href="#__codelineno-103-36"></a><span class="w">    </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-103-37"><a id="__codelineno-103-37" name="__codelineno-103-37" href="#__codelineno-103-37"></a>
</span><span id="__span-103-38"><a id="__codelineno-103-38" name="__codelineno-103-38" href="#__codelineno-103-38"></a><span class="w">    </span><span class="cm">&lt;!-- å¯ç”¨äº‹åŠ¡æ³¨è§£ --&gt;</span>
</span><span id="__span-103-39"><a id="__codelineno-103-39" name="__codelineno-103-39" href="#__codelineno-103-39"></a><span class="w">    </span><span class="nt">&lt;tx:annotation-driven</span><span class="w"> </span><span class="na">transaction-manager=</span><span class="s">"tracnsactionManager"</span><span class="nt">/&gt;</span>
</span><span id="__span-103-40"><a id="__codelineno-103-40" name="__codelineno-103-40" href="#__codelineno-103-40"></a>
</span><span id="__span-103-41"><a id="__codelineno-103-41" name="__codelineno-103-41" href="#__codelineno-103-41"></a><span class="nt">&lt;/beans&gt;</span>
</span></code></pre></div> <p>æµ‹è¯•ä»£ç </p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-104-1"><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TransactionTest</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-104-2"><a id="__codelineno-104-2" name="__codelineno-104-2" href="#__codelineno-104-2"></a><span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">ApplicationContext</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ClassPathXmlApplicationContext</span><span class="p">(</span><span class="s">"spring_transaction.xml"</span><span class="p">);</span>
</span><span id="__span-104-3"><a id="__codelineno-104-3" name="__codelineno-104-3" href="#__codelineno-104-3"></a>
</span><span id="__span-104-4"><a id="__codelineno-104-4" name="__codelineno-104-4" href="#__codelineno-104-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-104-5"><a id="__codelineno-104-5" name="__codelineno-104-5" href="#__codelineno-104-5"></a><span class="w">        </span><span class="n">testAnnotationTransaction</span><span class="p">();</span>
</span><span id="__span-104-6"><a id="__codelineno-104-6" name="__codelineno-104-6" href="#__codelineno-104-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-104-7"><a id="__codelineno-104-7" name="__codelineno-104-7" href="#__codelineno-104-7"></a>
</span><span id="__span-104-8"><a id="__codelineno-104-8" name="__codelineno-104-8" href="#__codelineno-104-8"></a>
</span><span id="__span-104-9"><a id="__codelineno-104-9" name="__codelineno-104-9" href="#__codelineno-104-9"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testAnnotationTransaction</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-104-10"><a id="__codelineno-104-10" name="__codelineno-104-10" href="#__codelineno-104-10"></a><span class="w">        </span><span class="n">UserDao</span><span class="w"> </span><span class="n">userDao</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">UserDao</span><span class="p">)</span><span class="n">context</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="s">"userDao"</span><span class="p">);</span>
</span><span id="__span-104-11"><a id="__codelineno-104-11" name="__codelineno-104-11" href="#__codelineno-104-11"></a><span class="w">        </span><span class="n">printUsers</span><span class="p">(</span><span class="n">userDao</span><span class="p">);</span>
</span><span id="__span-104-12"><a id="__codelineno-104-12" name="__codelineno-104-12" href="#__codelineno-104-12"></a><span class="w">        </span><span class="n">userDao</span><span class="p">.</span><span class="na">deleteUser</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-104-13"><a id="__codelineno-104-13" name="__codelineno-104-13" href="#__codelineno-104-13"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-104-14"><a id="__codelineno-104-14" name="__codelineno-104-14" href="#__codelineno-104-14"></a>
</span><span id="__span-104-15"><a id="__codelineno-104-15" name="__codelineno-104-15" href="#__codelineno-104-15"></a>
</span><span id="__span-104-16"><a id="__codelineno-104-16" name="__codelineno-104-16" href="#__codelineno-104-16"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">printUsers</span><span class="p">(</span><span class="n">UserDao</span><span class="w"> </span><span class="n">userDao</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-104-17"><a id="__codelineno-104-17" name="__codelineno-104-17" href="#__codelineno-104-17"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">userDao</span><span class="p">.</span><span class="na">getUsers</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-104-18"><a id="__codelineno-104-18" name="__codelineno-104-18" href="#__codelineno-104-18"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>
</span><span id="__span-104-19"><a id="__codelineno-104-19" name="__codelineno-104-19" href="#__codelineno-104-19"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-104-20"><a id="__codelineno-104-20" name="__codelineno-104-20" href="#__codelineno-104-20"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-104-21"><a id="__codelineno-104-21" name="__codelineno-104-21" href="#__codelineno-104-21"></a><span class="p">}</span>
</span></code></pre></div> <p>è¾“å‡ºç»“æœ</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-105-1"><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a>{id=1, username=user1}
</span><span id="__span-105-2"><a id="__codelineno-105-2" name="__codelineno-105-2" href="#__codelineno-105-2"></a>{id=2, username=user2}
</span><span id="__span-105-3"><a id="__codelineno-105-3" name="__codelineno-105-3" href="#__codelineno-105-3"></a>Exception in thread "main" java.lang.RuntimeException
</span><span id="__span-105-4"><a id="__codelineno-105-4" name="__codelineno-105-4" href="#__codelineno-105-4"></a>    at constxiong.interview.transaction.UserDaoImpl.deleteUser(UserDaoImpl.java:30)...
</span></code></pre></div> <h3 id="134åŸºäºæ³¨è§£çš„äº‹åŠ¡">13.4ã€åŸºäºæ³¨è§£çš„äº‹åŠ¡<a class="headerlink" href="#134åŸºäºæ³¨è§£çš„äº‹åŠ¡" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p><strong>åŸºäº Aspectj AOP é…ç½®ï¼ˆæ³¨è§£ï¼‰äº‹åŠ¡</strong></p> <p>maven pom.xml æ·»åŠ  Aspectj çš„æ”¯æŒ</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-106-1"><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a><span class="nt">&lt;dependency&gt;</span>
</span><span id="__span-106-2"><a id="__codelineno-106-2" name="__codelineno-106-2" href="#__codelineno-106-2"></a><span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.aspectj<span class="nt">&lt;/groupId&gt;</span>
</span><span id="__span-106-3"><a id="__codelineno-106-3" name="__codelineno-106-3" href="#__codelineno-106-3"></a><span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>aspectjweaver<span class="nt">&lt;/artifactId&gt;</span>
</span><span id="__span-106-4"><a id="__codelineno-106-4" name="__codelineno-106-4" href="#__codelineno-106-4"></a><span class="w">    </span><span class="nt">&lt;version&gt;</span>1.8.13<span class="nt">&lt;/version&gt;</span>
</span><span id="__span-106-5"><a id="__codelineno-106-5" name="__codelineno-106-5" href="#__codelineno-106-5"></a><span class="nt">&lt;/dependency&gt;</span>
</span></code></pre></div> <p>å»é™¤ UserDaoImpl æ³¨è§£@Transactional(rollbackFor=RuntimeException.class)</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-107-1"><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserDaoImpl</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">JdbcDaoSupport</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">UserDao</span><span class="w"> </span><span class="p">{</span><span class="w">    </span>
</span><span id="__span-107-2"><a id="__codelineno-107-2" name="__codelineno-107-2" href="#__codelineno-107-2"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-107-3"><a id="__codelineno-107-3" name="__codelineno-107-3" href="#__codelineno-107-3"></a><span class="cm">     * æŸ¥è¯¢ç”¨æˆ·</span>
</span><span id="__span-107-4"><a id="__codelineno-107-4" name="__codelineno-107-4" href="#__codelineno-107-4"></a><span class="cm">     * @return</span>
</span><span id="__span-107-5"><a id="__codelineno-107-5" name="__codelineno-107-5" href="#__codelineno-107-5"></a><span class="cm">     */</span>
</span><span id="__span-107-6"><a id="__codelineno-107-6" name="__codelineno-107-6" href="#__codelineno-107-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">getUsers</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-107-7"><a id="__codelineno-107-7" name="__codelineno-107-7" href="#__codelineno-107-7"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">sql</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"select * from user"</span><span class="p">;</span>
</span><span id="__span-107-8"><a id="__codelineno-107-8" name="__codelineno-107-8" href="#__codelineno-107-8"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">getJdbcTemplate</span><span class="p">().</span><span class="na">queryForList</span><span class="p">(</span><span class="n">sql</span><span class="p">);</span>
</span><span id="__span-107-9"><a id="__codelineno-107-9" name="__codelineno-107-9" href="#__codelineno-107-9"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-107-10"><a id="__codelineno-107-10" name="__codelineno-107-10" href="#__codelineno-107-10"></a>
</span><span id="__span-107-11"><a id="__codelineno-107-11" name="__codelineno-107-11" href="#__codelineno-107-11"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-107-12"><a id="__codelineno-107-12" name="__codelineno-107-12" href="#__codelineno-107-12"></a><span class="cm">     * åˆ é™¤ç”¨æˆ·</span>
</span><span id="__span-107-13"><a id="__codelineno-107-13" name="__codelineno-107-13" href="#__codelineno-107-13"></a><span class="cm">     * @param id</span>
</span><span id="__span-107-14"><a id="__codelineno-107-14" name="__codelineno-107-14" href="#__codelineno-107-14"></a><span class="cm">     * @return</span>
</span><span id="__span-107-15"><a id="__codelineno-107-15" name="__codelineno-107-15" href="#__codelineno-107-15"></a><span class="cm">     */</span>
</span><span id="__span-107-16"><a id="__codelineno-107-16" name="__codelineno-107-16" href="#__codelineno-107-16"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">deleteUser</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">){</span>
</span><span id="__span-107-17"><a id="__codelineno-107-17" name="__codelineno-107-17" href="#__codelineno-107-17"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">sql</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"delete from user where id = "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
</span><span id="__span-107-18"><a id="__codelineno-107-18" name="__codelineno-107-18" href="#__codelineno-107-18"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">getJdbcTemplate</span><span class="p">().</span><span class="na">update</span><span class="p">(</span><span class="n">sql</span><span class="p">);</span>
</span><span id="__span-107-19"><a id="__codelineno-107-19" name="__codelineno-107-19" href="#__codelineno-107-19"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-107-20"><a id="__codelineno-107-20" name="__codelineno-107-20" href="#__codelineno-107-20"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">();</span>
</span><span id="__span-107-21"><a id="__codelineno-107-21" name="__codelineno-107-21" href="#__codelineno-107-21"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-107-22"><a id="__codelineno-107-22" name="__codelineno-107-22" href="#__codelineno-107-22"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-107-23"><a id="__codelineno-107-23" name="__codelineno-107-23" href="#__codelineno-107-23"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-107-24"><a id="__codelineno-107-24" name="__codelineno-107-24" href="#__codelineno-107-24"></a><span class="p">}</span>
</span></code></pre></div> <p>ä¿®æ”¹ spring é…ç½®æ–‡ä»¶ï¼Œç»‡å…¥åˆ‡é¢</p> <div class="language-xml highlight"><span class="filename">XML</span><pre><span></span><code><span id="__span-108-1"><a id="__codelineno-108-1" name="__codelineno-108-1" href="#__codelineno-108-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
</span><span id="__span-108-2"><a id="__codelineno-108-2" name="__codelineno-108-2" href="#__codelineno-108-2"></a><span class="nt">&lt;beans</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
</span><span id="__span-108-3"><a id="__codelineno-108-3" name="__codelineno-108-3" href="#__codelineno-108-3"></a><span class="w">    </span><span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
</span><span id="__span-108-4"><a id="__codelineno-108-4" name="__codelineno-108-4" href="#__codelineno-108-4"></a><span class="w">    </span><span class="na">xmlns:context=</span><span class="s">"http://www.springframework.org/schema/context"</span>
</span><span id="__span-108-5"><a id="__codelineno-108-5" name="__codelineno-108-5" href="#__codelineno-108-5"></a><span class="w">    </span><span class="na">xmlns:tx=</span><span class="s">"http://www.springframework.org/schema/tx"</span>
</span><span id="__span-108-6"><a id="__codelineno-108-6" name="__codelineno-108-6" href="#__codelineno-108-6"></a><span class="w">    </span><span class="na">xmlns:aop=</span><span class="s">"http://www.springframework.org/schema/aop"</span>
</span><span id="__span-108-7"><a id="__codelineno-108-7" name="__codelineno-108-7" href="#__codelineno-108-7"></a><span class="w">    </span><span class="na">xsi:schemaLocation=</span><span class="s">"</span>
</span><span id="__span-108-8"><a id="__codelineno-108-8" name="__codelineno-108-8" href="#__codelineno-108-8"></a><span class="s">        http://www.springframework.org/schema/beans </span>
</span><span id="__span-108-9"><a id="__codelineno-108-9" name="__codelineno-108-9" href="#__codelineno-108-9"></a><span class="s">        http://www.springframework.org/schema/beans/spring-beans.xsd</span>
</span><span id="__span-108-10"><a id="__codelineno-108-10" name="__codelineno-108-10" href="#__codelineno-108-10"></a><span class="s">        http://www.springframework.org/schema/tx</span>
</span><span id="__span-108-11"><a id="__codelineno-108-11" name="__codelineno-108-11" href="#__codelineno-108-11"></a><span class="s">        http://www.springframework.org/schema/tx/spring-tx-3.2.xsd</span>
</span><span id="__span-108-12"><a id="__codelineno-108-12" name="__codelineno-108-12" href="#__codelineno-108-12"></a><span class="s">        http://www.springframework.org/schema/aop</span>
</span><span id="__span-108-13"><a id="__codelineno-108-13" name="__codelineno-108-13" href="#__codelineno-108-13"></a><span class="s">        http://www.springframework.org/schema/aop/spring-aop.xsd</span>
</span><span id="__span-108-14"><a id="__codelineno-108-14" name="__codelineno-108-14" href="#__codelineno-108-14"></a><span class="s">        http://www.springframework.org/schema/context</span>
</span><span id="__span-108-15"><a id="__codelineno-108-15" name="__codelineno-108-15" href="#__codelineno-108-15"></a><span class="s">        http://www.springframework.org/schema/context/spring-context.xsd"</span><span class="nt">&gt;</span>
</span><span id="__span-108-16"><a id="__codelineno-108-16" name="__codelineno-108-16" href="#__codelineno-108-16"></a>
</span><span id="__span-108-17"><a id="__codelineno-108-17" name="__codelineno-108-17" href="#__codelineno-108-17"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"driver"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="nt">&gt;&lt;/bean&gt;</span>
</span><span id="__span-108-18"><a id="__codelineno-108-18" name="__codelineno-108-18" href="#__codelineno-108-18"></a>
</span><span id="__span-108-19"><a id="__codelineno-108-19" name="__codelineno-108-19" href="#__codelineno-108-19"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"datasource"</span><span class="w"> </span><span class="na">class=</span><span class="s">"org.springframework.jdbc.datasource.SimpleDriverDataSource"</span><span class="nt">&gt;</span>
</span><span id="__span-108-20"><a id="__codelineno-108-20" name="__codelineno-108-20" href="#__codelineno-108-20"></a><span class="w">        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">"0"</span><span class="w"> </span><span class="na">name=</span><span class="s">"driver"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"driver"</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-108-21"><a id="__codelineno-108-21" name="__codelineno-108-21" href="#__codelineno-108-21"></a><span class="w">        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">"1"</span><span class="nt">&gt;</span>
</span><span id="__span-108-22"><a id="__codelineno-108-22" name="__codelineno-108-22" href="#__codelineno-108-22"></a><span class="w">            </span><span class="nt">&lt;value&gt;</span>jdbc:mysql://localhost:3306/test<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-108-23"><a id="__codelineno-108-23" name="__codelineno-108-23" href="#__codelineno-108-23"></a><span class="w">        </span><span class="nt">&lt;/constructor-arg&gt;</span>
</span><span id="__span-108-24"><a id="__codelineno-108-24" name="__codelineno-108-24" href="#__codelineno-108-24"></a><span class="w">        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">"2"</span><span class="nt">&gt;</span>
</span><span id="__span-108-25"><a id="__codelineno-108-25" name="__codelineno-108-25" href="#__codelineno-108-25"></a><span class="w">            </span><span class="nt">&lt;value&gt;</span>root<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-108-26"><a id="__codelineno-108-26" name="__codelineno-108-26" href="#__codelineno-108-26"></a><span class="w">        </span><span class="nt">&lt;/constructor-arg&gt;</span>
</span><span id="__span-108-27"><a id="__codelineno-108-27" name="__codelineno-108-27" href="#__codelineno-108-27"></a><span class="w">        </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">index=</span><span class="s">"3"</span><span class="nt">&gt;</span>
</span><span id="__span-108-28"><a id="__codelineno-108-28" name="__codelineno-108-28" href="#__codelineno-108-28"></a><span class="w">            </span><span class="nt">&lt;value&gt;</span>root<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-108-29"><a id="__codelineno-108-29" name="__codelineno-108-29" href="#__codelineno-108-29"></a><span class="w">        </span><span class="nt">&lt;/constructor-arg&gt;</span>
</span><span id="__span-108-30"><a id="__codelineno-108-30" name="__codelineno-108-30" href="#__codelineno-108-30"></a><span class="w">    </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-108-31"><a id="__codelineno-108-31" name="__codelineno-108-31" href="#__codelineno-108-31"></a>
</span><span id="__span-108-32"><a id="__codelineno-108-32" name="__codelineno-108-32" href="#__codelineno-108-32"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"userDao"</span><span class="w"> </span><span class="na">class=</span><span class="s">"constxiong.interview.transaction.UserDaoImpl"</span><span class="nt">&gt;</span>
</span><span id="__span-108-33"><a id="__codelineno-108-33" name="__codelineno-108-33" href="#__codelineno-108-33"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"dataSource"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"datasource"</span><span class="nt">&gt;&lt;/property&gt;</span>
</span><span id="__span-108-34"><a id="__codelineno-108-34" name="__codelineno-108-34" href="#__codelineno-108-34"></a><span class="w">    </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-108-35"><a id="__codelineno-108-35" name="__codelineno-108-35" href="#__codelineno-108-35"></a>
</span><span id="__span-108-36"><a id="__codelineno-108-36" name="__codelineno-108-36" href="#__codelineno-108-36"></a><span class="w">    </span><span class="cm">&lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span>
</span><span id="__span-108-37"><a id="__codelineno-108-37" name="__codelineno-108-37" href="#__codelineno-108-37"></a><span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"tracnsactionManager"</span><span class="w"> </span><span class="na">class=</span><span class="s">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span><span class="nt">&gt;</span>
</span><span id="__span-108-38"><a id="__codelineno-108-38" name="__codelineno-108-38" href="#__codelineno-108-38"></a><span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"dataSource"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"datasource"</span><span class="nt">&gt;&lt;/property&gt;</span>
</span><span id="__span-108-39"><a id="__codelineno-108-39" name="__codelineno-108-39" href="#__codelineno-108-39"></a><span class="w">    </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-108-40"><a id="__codelineno-108-40" name="__codelineno-108-40" href="#__codelineno-108-40"></a>
</span><span id="__span-108-41"><a id="__codelineno-108-41" name="__codelineno-108-41" href="#__codelineno-108-41"></a><span class="w">    </span><span class="nt">&lt;tx:advice</span><span class="w"> </span><span class="na">id=</span><span class="s">"txAdvice"</span><span class="w"> </span><span class="na">transaction-manager=</span><span class="s">"tracnsactionManager"</span><span class="nt">&gt;</span>
</span><span id="__span-108-42"><a id="__codelineno-108-42" name="__codelineno-108-42" href="#__codelineno-108-42"></a><span class="w">        </span><span class="nt">&lt;tx:attributes&gt;</span>
</span><span id="__span-108-43"><a id="__codelineno-108-43" name="__codelineno-108-43" href="#__codelineno-108-43"></a><span class="w">            </span><span class="cm">&lt;!-- ä¸ºè¿æ¥ç‚¹æŒ‡å®šäº‹åŠ¡å±æ€§ --&gt;</span>
</span><span id="__span-108-44"><a id="__codelineno-108-44" name="__codelineno-108-44" href="#__codelineno-108-44"></a><span class="w">            </span><span class="nt">&lt;tx:method</span><span class="w"> </span><span class="na">name=</span><span class="s">"deleteUser"</span><span class="w"> </span><span class="na">rollback-for=</span><span class="s">"java.lang.RuntimeException"</span><span class="nt">/&gt;</span>
</span><span id="__span-108-45"><a id="__codelineno-108-45" name="__codelineno-108-45" href="#__codelineno-108-45"></a><span class="w">        </span><span class="nt">&lt;/tx:attributes&gt;</span>
</span><span id="__span-108-46"><a id="__codelineno-108-46" name="__codelineno-108-46" href="#__codelineno-108-46"></a><span class="w">    </span><span class="nt">&lt;/tx:advice&gt;</span>
</span><span id="__span-108-47"><a id="__codelineno-108-47" name="__codelineno-108-47" href="#__codelineno-108-47"></a>
</span><span id="__span-108-48"><a id="__codelineno-108-48" name="__codelineno-108-48" href="#__codelineno-108-48"></a><span class="w">    </span><span class="nt">&lt;aop:config&gt;</span>
</span><span id="__span-108-49"><a id="__codelineno-108-49" name="__codelineno-108-49" href="#__codelineno-108-49"></a><span class="w">        </span><span class="cm">&lt;!-- åˆ‡å…¥ç‚¹é…ç½® --&gt;</span>
</span><span id="__span-108-50"><a id="__codelineno-108-50" name="__codelineno-108-50" href="#__codelineno-108-50"></a><span class="w">        </span><span class="nt">&lt;aop:pointcut</span><span class="w"> </span><span class="na">id=</span><span class="s">"point"</span><span class="w"> </span><span class="na">expression=</span><span class="s">"execution(* *constxiong.interview.transaction.UserDao.deleteUser(..))"</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-108-51"><a id="__codelineno-108-51" name="__codelineno-108-51" href="#__codelineno-108-51"></a><span class="w">        </span><span class="nt">&lt;aop:advisor</span><span class="w"> </span><span class="na">advice-ref=</span><span class="s">"txAdvice"</span><span class="w"> </span><span class="na">pointcut-ref=</span><span class="s">"point"</span><span class="nt">/&gt;</span>
</span><span id="__span-108-52"><a id="__codelineno-108-52" name="__codelineno-108-52" href="#__codelineno-108-52"></a><span class="w">    </span><span class="nt">&lt;/aop:config&gt;</span>
</span><span id="__span-108-53"><a id="__codelineno-108-53" name="__codelineno-108-53" href="#__codelineno-108-53"></a>
</span><span id="__span-108-54"><a id="__codelineno-108-54" name="__codelineno-108-54" href="#__codelineno-108-54"></a><span class="nt">&lt;/beans&gt;</span>
</span></code></pre></div> <p>æµ‹è¯•ä»£ç </p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-109-1"><a id="__codelineno-109-1" name="__codelineno-109-1" href="#__codelineno-109-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TransactionTest</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-109-2"><a id="__codelineno-109-2" name="__codelineno-109-2" href="#__codelineno-109-2"></a><span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">ApplicationContext</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ClassPathXmlApplicationContext</span><span class="p">(</span><span class="s">"spring_transaction.xml"</span><span class="p">);</span>
</span><span id="__span-109-3"><a id="__codelineno-109-3" name="__codelineno-109-3" href="#__codelineno-109-3"></a>
</span><span id="__span-109-4"><a id="__codelineno-109-4" name="__codelineno-109-4" href="#__codelineno-109-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-109-5"><a id="__codelineno-109-5" name="__codelineno-109-5" href="#__codelineno-109-5"></a><span class="w">        </span><span class="n">testAspectjTransaction</span><span class="p">();</span>
</span><span id="__span-109-6"><a id="__codelineno-109-6" name="__codelineno-109-6" href="#__codelineno-109-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-109-7"><a id="__codelineno-109-7" name="__codelineno-109-7" href="#__codelineno-109-7"></a>
</span><span id="__span-109-8"><a id="__codelineno-109-8" name="__codelineno-109-8" href="#__codelineno-109-8"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testAspectjTransaction</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-109-9"><a id="__codelineno-109-9" name="__codelineno-109-9" href="#__codelineno-109-9"></a><span class="w">        </span><span class="n">UserDao</span><span class="w"> </span><span class="n">userDao</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">UserDao</span><span class="p">)</span><span class="n">context</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="s">"userDao"</span><span class="p">);</span>
</span><span id="__span-109-10"><a id="__codelineno-109-10" name="__codelineno-109-10" href="#__codelineno-109-10"></a><span class="w">        </span><span class="n">printUsers</span><span class="p">(</span><span class="n">userDao</span><span class="p">);</span>
</span><span id="__span-109-11"><a id="__codelineno-109-11" name="__codelineno-109-11" href="#__codelineno-109-11"></a><span class="w">        </span><span class="n">userDao</span><span class="p">.</span><span class="na">deleteUser</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-109-12"><a id="__codelineno-109-12" name="__codelineno-109-12" href="#__codelineno-109-12"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-109-13"><a id="__codelineno-109-13" name="__codelineno-109-13" href="#__codelineno-109-13"></a>
</span><span id="__span-109-14"><a id="__codelineno-109-14" name="__codelineno-109-14" href="#__codelineno-109-14"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">printUsers</span><span class="p">(</span><span class="n">UserDao</span><span class="w"> </span><span class="n">userDao</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-109-15"><a id="__codelineno-109-15" name="__codelineno-109-15" href="#__codelineno-109-15"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">userDao</span><span class="p">.</span><span class="na">getUsers</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-109-16"><a id="__codelineno-109-16" name="__codelineno-109-16" href="#__codelineno-109-16"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>
</span><span id="__span-109-17"><a id="__codelineno-109-17" name="__codelineno-109-17" href="#__codelineno-109-17"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-109-18"><a id="__codelineno-109-18" name="__codelineno-109-18" href="#__codelineno-109-18"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span>
</span><span id="__span-109-19"><a id="__codelineno-109-19" name="__codelineno-109-19" href="#__codelineno-109-19"></a><span class="p">}</span>
</span></code></pre></div> <p>è¾“å‡ºç»“æœ</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-110-1"><a id="__codelineno-110-1" name="__codelineno-110-1" href="#__codelineno-110-1"></a>{id=1, username=user1}
</span><span id="__span-110-2"><a id="__codelineno-110-2" name="__codelineno-110-2" href="#__codelineno-110-2"></a>{id=2, username=user2}
</span><span id="__span-110-3"><a id="__codelineno-110-3" name="__codelineno-110-3" href="#__codelineno-110-3"></a>Exception in thread "main" java.lang.RuntimeException
</span><span id="__span-110-4"><a id="__codelineno-110-4" name="__codelineno-110-4" href="#__codelineno-110-4"></a>    at constxiong.interview.transaction.UserDaoImpl.deleteUser(UserDaoImpl.java:28)...
</span></code></pre></div> <h3 id="135äº‹åŠ¡çš„ä¼ æ’­å±æ€§">13.5ã€äº‹åŠ¡çš„ä¼ æ’­å±æ€§<a class="headerlink" href="#135äº‹åŠ¡çš„ä¼ æ’­å±æ€§" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <ul> <li> <p><strong>PROPAGATION_REQUIRED = 0</strong></p> <p>å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚</p> <ul> <li>æ— çˆ¶äº‹åŠ¡æ—¶ï¼šå­äº‹åŠ¡ä½œä¸ºç‹¬ç«‹äº‹åŠ¡æ‰§è¡Œ</li> <li>æœ‰çˆ¶äº‹åŠ¡æ—¶ï¼šå­äº‹åŠ¡ä¸­çš„æ“ä½œä¸²å…¥çˆ¶äº‹åŠ¡ä¸­æ‰§è¡Œï¼Œå¹¶ä¸”ä¸€èµ·æäº¤ï¼Œä¸€ä¸ªæ“ä½œå¤±è´¥å…¨éƒ¨å›æ»š</li> </ul> </li> <li> <p><strong>PROPAGATION_SUPPORTS = 1</strong></p> <p>å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™ä»¥éäº‹åŠ¡çš„æ–¹å¼ç»§ç»­è¿è¡Œã€‚</p> <ul> <li>æ— çˆ¶äº‹åŠ¡æ—¶ï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œ</li> <li>æœ‰çˆ¶äº‹åŠ¡æ—¶ï¼šåŠ å…¥çˆ¶äº‹åŠ¡æ‰§è¡Œï¼Œç­‰åŒäº PROPAGATION_REQUIRED</li> </ul> </li> <li> <p><strong>PROPAGATION_MANDATORY = 2</strong></p> <p>å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</p> <ul> <li>æ— çˆ¶äº‹åŠ¡æ—¶ï¼šæŠ›å‡ºå¼‚å¸¸</li> <li>æœ‰çˆ¶äº‹åŠ¡æ—¶ï¼šåŠ å…¥çˆ¶äº‹åŠ¡æ‰§è¡Œï¼Œç­‰åŒäº PROPAGATION_REQUIRED</li> </ul> </li> <li> <p><strong>PROPAGATION_REQUIRES_NEW = 3</strong></p> <p>åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</p> <ul> <li>æŒ‚èµ·ï¼ˆSuspendï¼‰ï¼šé€šçŸ¥ TransactionManager ä¸å†æ£€æŸ¥æŸäº‹åŠ¡çš„çŠ¶æ€ï¼Œç›´åˆ° Resume AbstractPlatformTransactionManager. handleExistingTransaction()</li> <li>æ— çˆ¶äº‹åŠ¡æ—¶ï¼šå­äº‹åŠ¡æ–°å»ºäº‹åŠ¡ä½œä¸ºç‹¬ç«‹äº‹åŠ¡æ‰§è¡Œ</li> <li>æœ‰çˆ¶äº‹åŠ¡æ—¶ï¼šå­äº‹åŠ¡æ–°å»ºäº‹åŠ¡ä½œä¸ºç‹¬ç«‹äº‹åŠ¡æ‰§è¡Œï¼Œç‹¬ç«‹æäº¤</li> </ul> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-111-1"><a id="__codelineno-111-1" name="__codelineno-111-1" href="#__codelineno-111-1"></a>T1{
</span><span id="__span-111-2"><a id="__codelineno-111-2" name="__codelineno-111-2" href="#__codelineno-111-2"></a>ã€€ã€€O(A);
</span><span id="__span-111-3"><a id="__codelineno-111-3" name="__codelineno-111-3" href="#__codelineno-111-3"></a>ã€€ã€€T2{
</span><span id="__span-111-4"><a id="__codelineno-111-4" name="__codelineno-111-4" href="#__codelineno-111-4"></a>ã€€ã€€ã€€ã€€O(B);
</span><span id="__span-111-5"><a id="__codelineno-111-5" name="__codelineno-111-5" href="#__codelineno-111-5"></a>ã€€ã€€ã€€ã€€O(C);
</span><span id="__span-111-6"><a id="__codelineno-111-6" name="__codelineno-111-6" href="#__codelineno-111-6"></a>ã€€ã€€};
</span><span id="__span-111-7"><a id="__codelineno-111-7" name="__codelineno-111-7" href="#__codelineno-111-7"></a>ã€€ã€€O(D);
</span><span id="__span-111-8"><a id="__codelineno-111-8" name="__codelineno-111-8" href="#__codelineno-111-8"></a>};
</span></code></pre></div> <p>å­äº‹åŠ¡ T2 ä¸å—çˆ¶äº‹åŠ¡ T1 å›æ»šçš„å½±å“ï¼Œä½†ä»ä½œä¸º T1 çš„å­é€»è¾‘ï¼ŒO(D) å¤±è´¥ï¼ŒO(A) å›æ»šï¼ŒT2 ä¸­çš„äº‹åŠ¡ä¸å›æ»šï¼›</p> <p>T2 å¤±è´¥å›æ»šï¼ŒT1 æ•è·å¼‚å¸¸åï¼Œå¯ä»¥é€‰æ‹©æäº¤æˆ–å›æ»šï¼Œæœªæ•è·å¼‚å¸¸ï¼ŒåŒ T2 ä¸€èµ·å›æ»šã€‚</p> </li> <li> <p><strong>PROPAGATION_NOT_SUPPORTED = 4</strong></p> <p>ä»¥éäº‹åŠ¡æ–¹å¼è¿è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</p> <ul> <li>æ— çˆ¶äº‹åŠ¡æ—¶ï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œ</li> <li>æœ‰çˆ¶äº‹åŠ¡æ—¶ï¼šæŒ‚èµ·çˆ¶äº‹åŠ¡ï¼Œè‡ªå·±æŒ‰ç…§æ— äº‹åŠ¡æ–¹å¼è¿è¡Œ</li> </ul> <p>å­äº‹åŠ¡è‡ªèº«æ— å›æ»šï¼Œå‡ºç°å¼‚å¸¸è‹¥å‘ä¸ŠæŠ›ï¼Œå¯èƒ½å¯¼è‡´çˆ¶äº‹åŠ¡å›æ»šï¼Œçˆ¶äº‹åŠ¡å›æ»šæ—¶ï¼Œä¸ä¼šå½±å“å­äº‹åŠ¡</p> </li> <li> <p><strong>PROPAGATION_NEVER = 5</strong></p> <p>ä»¥éäº‹åŠ¡æ–¹å¼è¿è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</p> <ul> <li>æ— çˆ¶äº‹åŠ¡æ—¶ï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œ</li> <li>æœ‰çˆ¶äº‹åŠ¡æ—¶ï¼šæŠ›å‡ºå¼‚å¸¸ï¼ˆè‹¥ä¸å¤„ç†ä¼šå¯¼è‡´çˆ¶äº‹åŠ¡å›æ»šï¼‰</li> </ul> </li> <li> <p><strong>PROPAGATION_NESTED = 6</strong></p> <p>å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªäº‹åŠ¡ä½œä¸ºå½“å‰äº‹åŠ¡çš„åµŒå¥—äº‹åŠ¡æ¥è¿è¡Œã€‚</p> <ul> <li>æ— çˆ¶äº‹åŠ¡æ—¶ï¼šåˆ›å»ºç‹¬ç«‹äº‹åŠ¡ï¼Œç­‰åŒäºPROPAGATION_REQUIRED</li> <li>æœ‰çˆ¶äº‹åŠ¡æ—¶ï¼šåµŒå¥—åœ¨çˆ¶äº‹åŠ¡ä¹‹å†…</li> <li>å­äº‹åŠ¡ä¾èµ–çˆ¶äº‹åŠ¡ï¼šå­äº‹åŠ¡äºçˆ¶äº‹åŠ¡æäº¤æ—¶æäº¤ï¼›çˆ¶äº‹åŠ¡å›æ»šï¼Œå­äº‹åŠ¡ä¹Ÿå›æ»š</li> <li>Savepointï¼šå­äº‹åŠ¡å›æ»šæ—¶ï¼Œçˆ¶äº‹åŠ¡ä¸å›æ»š</li> </ul> </li> </ul> <aside class="md-source-file"> <span class="md-source-file__fact"> <span class="md-icon" title="æœ€åæ›´æ–°"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="2026å¹´1æœˆ22æ—¥ 20:21:58 UTC">2026å¹´1æœˆ22æ—¥ 20:21:58</span> </span> <span class="md-source-file__fact"> <span class="md-icon" title="åˆ›å»ºæ—¥æœŸ"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="2021å¹´4æœˆ26æ—¥ 11:39:30 UTC">2021å¹´4æœˆ26æ—¥ 11:39:30</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type="button" class="md-top md-icon" data-md-component="top" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> å›åˆ°é¡µé¢é¡¶éƒ¨ </button> </main> <footer class="md-footer"> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-copyright"> Made with <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener"> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.top", "navigation.tracking", "navigation.instant", "navigation.path", "content.tabs.link", "content.code.copy"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script> <script src="../assets/javascripts/bundle.79ae519e.min.js"></script> <script src="../_javascripts/auto_title.js"></script>  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>