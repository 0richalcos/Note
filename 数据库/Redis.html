
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://0richalcos.github.io/Note/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis.html">
      
      
        <link rel="prev" href="Oracle.html">
      
      
        <link rel="next" href="Vastbase.html">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Redis - Èöè‰æøËÆ∞ËÆ∞</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../_stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1nosql" class="md-skip">
          Ë∑≥ËΩ¨Ëá≥
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="È°µÁúâ">
    <a href="../index.html" title="Èöè‰æøËÆ∞ËÆ∞" class="md-header__button md-logo" aria-label="Èöè‰æøËÆ∞ËÆ∞" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Èöè‰æøËÆ∞ËÆ∞
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Redis
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="ÂàáÊç¢Ê∑±Ëâ≤Ê®°Âºè"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="ÂàáÊç¢Ê∑±Ëâ≤Ê®°Âºè" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="ÂàáÊç¢‰∫ÆËâ≤Ê®°Âºè"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="ÂàáÊç¢‰∫ÆËâ≤Ê®°Âºè" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="ÊêúÁ¥¢" placeholder="ÊêúÁ¥¢" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Êü•Êâæ">
        
        <button type="reset" class="md-search__icon md-icon" title="Ê∏ÖÁ©∫ÂΩìÂâçÂÜÖÂÆπ" aria-label="Ê∏ÖÁ©∫ÂΩìÂâçÂÜÖÂÆπ" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Ê≠£Âú®ÂàùÂßãÂåñÊêúÁ¥¢ÂºïÊìé
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/0richalcos/Note" title="ÂâçÂæÄ‰ªìÂ∫ì" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="ÂØºËà™Ê†è" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Èöè‰æøËÆ∞ËÆ∞" class="md-nav__button md-logo" aria-label="Èöè‰æøËÆ∞ËÆ∞" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Èöè‰æøËÆ∞ËÆ∞
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/0richalcos/Note" title="ÂâçÂæÄ‰ªìÂ∫ì" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    üè† È¶ñÈ°µ
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ‚ô®Ô∏è Java
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    ‚ô®Ô∏è Java
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java/Java.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Java
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java/Java8.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Java 8
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java/JavaBasics.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Java Âü∫Á°Ä
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java/JavaCollection.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Java ÈõÜÂêà
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java/JavaObject.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Java Á±ªÂíåÂØπË±°
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java/JavaWeb.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JavaWeb
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java/%E6%B5%8B%E8%AF%95%E5%BA%8F%E5%8F%B7.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ÊµãËØïÂ∫èÂè∑
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üßÆ Êï∞ÊçÆÁªìÊûÑÂèäÁÆóÊ≥ï
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    üßÆ Êï∞ÊçÆÁªìÊûÑÂèäÁÆóÊ≥ï
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%AE%97%E6%B3%95/Algorithm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Algorithm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%AE%97%E6%B3%95/DesignPattern.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DesignPattern
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üçÉ Spring
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    üçÉ Spring
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Spring/Spring.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Spring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Spring/SpringBoot.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SpringBoot
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Spring/SpringCloud.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SpringCloud
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Spring/SpringMVC.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SpringMVC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üíæ ÊåÅ‰πÖÂ±ÇÊ°ÜÊû∂
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    üíæ ÊåÅ‰πÖÂ±ÇÊ°ÜÊû∂
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/MyBatis-Plus.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MyBatis-Plus
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/Mybatis.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mybatis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üîê ËÆ§ËØÅ‰∏éÊéàÊùÉ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    üîê ËÆ§ËØÅ‰∏éÊéàÊùÉ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/SSO.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SSO
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/Sa-Token.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sa-Token
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/Shiro.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shiro
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üåê ÂâçÁ´Ø
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    üåê ÂâçÁ´Ø
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/CSS.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CSS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/JavaScript.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JavaScript
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/Vue.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vue
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/jQuery.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    jQuery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/Thymeleaf.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Thymeleaf
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_6" >
        
          
          <label class="md-nav__link" for="__nav_7_6" id="__nav_7_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ÁªÑ‰ª∂Â∫ì
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    ÁªÑ‰ª∂Â∫ì
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/AntV-X6.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AntV-X6
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/ApacheECharts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ApacheECharts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/Axios.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Axios
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/BootstrapTable.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    BootstrapTable
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/DHTMLXGantt.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DHTMLXGantt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/Element.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Element
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/FullCalendar.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FullCalendar
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/X-editable.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    X-editable
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üìä Êï∞ÊçÆÂ∫ì
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    üìä Êï∞ÊçÆÂ∫ì
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Dameng.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dameng
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="MySQL.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MySQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="MySQLQuery.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MySQLQuery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="OceanBase.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OceanBase
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Oracle.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Oracle
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Redis
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="Redis.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="ÁõÆÂΩï">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ÁõÆÂΩï
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1nosql" class="md-nav__link">
    <span class="md-ellipsis">
      
        1„ÄÅNoSQLÊ¶ÇËø∞
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1„ÄÅNoSQLÊ¶ÇËø∞">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-nosql" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1„ÄÅ‰∏∫‰ªÄ‰πàË¶ÅÁî® NoSQLÔºü
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-nosql" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2„ÄÅ‰ªÄ‰πàÊòØ NoSQLÔºü
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2redis" class="md-nav__link">
    <span class="md-ellipsis">
      
        2„ÄÅRedis ÂÖ•Èó®
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2„ÄÅRedis ÂÖ•Èó®">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1„ÄÅÊ¶ÇËø∞
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22reids" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2„ÄÅReids ÂÆâË£Ö
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2„ÄÅReids ÂÆâË£Ö">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221linxu" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2.1„ÄÅLinxu
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2.1„ÄÅLinxu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reids" class="md-nav__link">
    <span class="md-ellipsis">
      
        ÂÆâË£Ö Reids
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#systemd" class="md-nav__link">
    <span class="md-ellipsis">
      
        ÈÖçÁΩÆ systemd ÊúçÂä°
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Âç∏ËΩΩÂπ∂Âà†Èô§
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222docker" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2.2„ÄÅDocker
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222windows" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2.2„ÄÅWindows
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2.3„ÄÅÂÆâË£ÖÈÅáÂà∞ÁöÑ‰∏Ä‰∫õÈóÆÈ¢ò
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2.3„ÄÅÂÆâË£ÖÈÅáÂà∞ÁöÑ‰∏Ä‰∫õÈóÆÈ¢ò">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arm64bug" class="md-nav__link">
    <span class="md-ellipsis">
      
        ARM64ÁéØÂ¢ÉÂêØÂä®BUG
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3„ÄÅÂü∫Á°ÄÁü•ËØÜ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3„ÄÅÂü∫Á°ÄÁü•ËØÜ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.1„ÄÅÂø´ÈÄü‰∏äÊâã
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3.1„ÄÅÂø´ÈÄü‰∏äÊâã">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        ÂêØÂä®
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        ËøûÊé•
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        ÂÖ≥Èó≠
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Redis Â∑•ÂÖ∑
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.2„ÄÅÂ∏∏Áî®ÂëΩ‰ª§
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      
        3„ÄÅ‰∫îÂ§ßÊï∞ÊçÆÁ±ªÂûã
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3„ÄÅ‰∫îÂ§ßÊï∞ÊçÆÁ±ªÂûã">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31string" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1„ÄÅStringÔºàÂ≠óÁ¨¶‰∏≤Ôºâ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32list" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2„ÄÅListÔºàÂàóË°®Ôºâ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33set" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3„ÄÅSetÔºàÈõÜÂêàÔºâ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34hash" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4„ÄÅHashÔºàÂìàÂ∏åÔºâ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35zset" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.5„ÄÅZsetÔºàÊúâÂ∫èÈõÜÂêàÔºâ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      
        4„ÄÅ‰∏âÂ§ßÁâπÊÆäÁ±ªÂûã
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4„ÄÅ‰∏âÂ§ßÁâπÊÆäÁ±ªÂûã">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41geospatial" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1„ÄÅgeospatialÔºàÂú∞ÁêÜ‰ΩçÁΩÆÔºâ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42hyperloglog" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2„ÄÅhyperloglog
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43bitmap" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3„ÄÅBitmap
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      
        5„ÄÅ‰∫ãÂä°
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5„ÄÅ‰∫ãÂä°">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1„ÄÅ‰∫ãÂä°ÁöÑÊµÅÁ®ã
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52watch" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2„ÄÅwatch
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3„ÄÅ‰∫ãÂä°ÈîôËØØ‰∏éÂõûÊªö
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6jedis" class="md-nav__link">
    <span class="md-ellipsis">
      
        6„ÄÅJedis
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7spring-boot" class="md-nav__link">
    <span class="md-ellipsis">
      
        7„ÄÅSpring Boot Êï¥Âêà
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7„ÄÅSpring Boot Êï¥Âêà">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71redistemplate" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1„ÄÅRedisTemplate ÂèäÂ∫èÂàóÂåñÊñπÂºè
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-redis" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2„ÄÅËé∑Âèñ Redis ËøûÊé•‰ø°ÊÅØ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8redis" class="md-nav__link">
    <span class="md-ellipsis">
      
        8„ÄÅRedis ÈÖçÁΩÆËØ¶Ëß£
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8„ÄÅRedis ÈÖçÁΩÆËØ¶Ëß£">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81redisconf" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1„ÄÅredis.conf ËØ¶Ëß£
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8.1„ÄÅredis.conf ËØ¶Ëß£">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#811" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.1„ÄÅÂçï‰Ωç
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#812" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.2„ÄÅÂåÖÂê´
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#813" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.3„ÄÅÁΩëÁªú
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#814" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.4„ÄÅÈÄöÁî®
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#815" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.5„ÄÅÂø´ÁÖß
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#816" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.6„ÄÅÂ§çÂà∂
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#817" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.7„ÄÅÂÆâÂÖ®
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#818" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.8„ÄÅÂÆ¢Êà∑Á´Ø
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#819" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.9„ÄÅÂÜÖÂ≠òÁÆ°ÁêÜ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8110aof" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.10„ÄÅAOF Ê®°Âºè
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8111" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.11„ÄÅÈõÜÁæ§
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8112" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.12„ÄÅÊÖ¢Êó•Âøó
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82sentinelconf" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.2„ÄÅsentinel.conf ËØ¶Ëß£
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9" class="md-nav__link">
    <span class="md-ellipsis">
      
        9„ÄÅÊåÅ‰πÖÂåñ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9„ÄÅÊåÅ‰πÖÂåñ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91rdb" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1„ÄÅRDB
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9.1„ÄÅRDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#911-rdb" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1.1„ÄÅÂºÄÂêØ RDB ÊåÅ‰πÖÂåñÊñπÂºè
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#912rdb" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1.2„ÄÅRDB Êñá‰ª∂
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#913rdb" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1.3„ÄÅRDB ÁöÑ‰ºòÁº∫ÁÇπ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#92aof" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.2„ÄÅAOF
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9.2„ÄÅAOF">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#921-aof" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.2.1„ÄÅÂºÄÂêØ AOF ÊåÅ‰πÖÂåñÊñπÂºè
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#922aof" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.2.2„ÄÅAOF Êñá‰ª∂
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#923aof" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.2.3„ÄÅAOF ÁöÑ‰ºòÁº∫ÁÇπ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10" class="md-nav__link">
    <span class="md-ellipsis">
      
        10„ÄÅËÆ¢ÈòÖ‰∏éÂèëÂ∏É
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10„ÄÅËÆ¢ÈòÖ‰∏éÂèëÂ∏É">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#101" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.1„ÄÅËÆ¢ÈòÖ‰∏éÈÄÄËÆ¢È¢ëÈÅì
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#102" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.2„ÄÅÂèëÈÄÅ‰ø°ÊÅØÂà∞È¢ëÈÅì
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#103" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3„ÄÅÊ®°ÂºèÁöÑËÆ¢ÈòÖ‰∏é‰ø°ÊÅØÂèëÈÄÅ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#104" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.4„ÄÅËÆ¢ÈòÖ‰∏éÈÄÄËÆ¢Ê®°Âºè
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#105" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.5„ÄÅÂèëÈÄÅ‰ø°ÊÅØÂà∞Ê®°Âºè
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11redis" class="md-nav__link">
    <span class="md-ellipsis">
      
        11„ÄÅRedis ÈõÜÁæ§
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11„ÄÅRedis ÈõÜÁæ§">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.1„ÄÅ‰∏ª‰ªéÂ§çÂà∂
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.1„ÄÅ‰∏ª‰ªéÂ§çÂà∂">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1111" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.1.1„ÄÅ‰∏ª‰ªéÂ§çÂà∂‰ªãÁªç
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1112" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.1.2„ÄÅ‰∏ª‰ªéÂ§çÂà∂Êê≠Âª∫
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112sentinel" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.2„ÄÅSentinel Ê®°Âºè
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.2„ÄÅSentinel Ê®°Âºè">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1121" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.2.1„ÄÅÂì®ÂÖµÊ®°Âºè‰ªãÁªç
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1122" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.2.2„ÄÅÂì®ÂÖµÊ®°ÂºèÊê≠Âª∫
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#113cluster" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.3„ÄÅCluster Ê®°Âºè
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.3„ÄÅCluster Ê®°Âºè">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1131cluster" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.3.1„ÄÅCluster Ê®°Âºè‰ªãÁªç
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1132cluster" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.3.2„ÄÅCluster Ê®°ÂºèÊê≠Âª∫
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1133redis-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.3.3„ÄÅRedis Cluster Êìç‰Ωú
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    <span class="md-ellipsis">
      
        12„ÄÅÁºìÂ≠òÈõ™Â¥©„ÄÅÂáªÁ©ø„ÄÅÁ©øÈÄè
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="12„ÄÅÁºìÂ≠òÈõ™Â¥©„ÄÅÂáªÁ©ø„ÄÅÁ©øÈÄè">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.1„ÄÅÁºìÂ≠òÈõ™Â¥©
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.2„ÄÅÁºìÂ≠òÂáªÁ©ø
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#123" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.3„ÄÅÁºìÂ≠òÁ©øÈÄè
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#124" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.4„ÄÅÁºìÂ≠òÈ¢ÑÁÉ≠
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#125" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.5„ÄÅÁºìÂ≠òÈôçÁ∫ß
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13redis" class="md-nav__link">
    <span class="md-ellipsis">
      
        13„ÄÅRedis ÂÆûÁé∞ÂàÜÂ∏ÉÂºèÈîÅ
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#14redis" class="md-nav__link">
    <span class="md-ellipsis">
      
        14„ÄÅRedis ÂÆûÁé∞ÂàÜÂ∏ÉÂºèÁºìÂ≠ò
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14„ÄÅRedis ÂÆûÁé∞ÂàÜÂ∏ÉÂºèÁºìÂ≠ò">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#141" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.1„ÄÅÊê≠Âª∫ÁéØÂ¢É
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#142-mybatis" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.2„ÄÅÂºÄÂêØ Mybatis ÁöÑ‰∫åÁ∫ßÁºìÂ≠ò
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#143-redis" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.3„ÄÅ‰ΩøÁî® Redis ‰Ωú‰∏∫ÁºìÂ≠ò
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#144" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.4„ÄÅÈóÆÈ¢òÂèä‰ºòÂåñ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#15redis-session" class="md-nav__link">
    <span class="md-ellipsis">
      
        15„ÄÅRedis Session ÁÆ°ÁêÜ
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Vastbase.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vastbase
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/Elasticsearch.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Elasticsearch
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üìá ÂàÜÂ∏ÉÂºèÂ≠òÂÇ®
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    üìá ÂàÜÂ∏ÉÂºèÂ≠òÂÇ®
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8/FastDFS.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FastDFS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8/MinIO.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MinIO
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üõ∞Ô∏è ÁΩëÁªúÈÄö‰ø°
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    üõ∞Ô∏è ÁΩëÁªúÈÄö‰ø°
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/Encryption.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Encryption
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/HTTP.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HTTP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/OpenVPN.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenVPN
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/VNC.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VNC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/WebSocket.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    WebSocket
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/frp.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    frp
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üóÉÔ∏è Êñá‰ª∂Â§ÑÁêÜ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    üóÉÔ∏è Êñá‰ª∂Â§ÑÁêÜ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_1" >
        
          
          <label class="md-nav__link" for="__nav_12_1" id="__nav_12_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Office
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Office
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/ApachePOI.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ApachePOI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/EasyExcel.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    EasyExcel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/OnlyOffice.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OnlyOffice
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/Poi-tl.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Poi-tl
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/Spire.OfficeForJava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Spire.OfficeForJava
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/PDF/ApachePDFBox.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ApachePDFBox
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/XML/XMLParse.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    XMLParse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/ZIP/Zip4j.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Zip4j
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/XXL-JOB.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    XXL-JOB
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üßë‚Äçüîß ËøêÁª¥
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    üßë‚Äçüîß ËøêÁª¥
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E7%BB%B4/Docker.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E7%BB%B4/Linux.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E7%BB%B4/NSSM.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NSSM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E7%BB%B4/Nginx.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nginx
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E7%BB%B4/Tomcat.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tomcat
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E7%BB%B4/TongWeb.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TongWeb
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E7%BB%B4/WSL.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    WSL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E7%BB%B4/WebLogic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    WebLogic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15" >
        
          
          <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üõ†Ô∏è ÂºÄÂèëÂ∑•ÂÖ∑
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    üõ†Ô∏è ÂºÄÂèëÂ∑•ÂÖ∑
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Git.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Git
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Maven.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Maven
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Node.js.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Node.js
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Swagger.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Swagger
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16" >
        
          
          <label class="md-nav__link" for="__nav_16" id="__nav_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üëª ÂÖ∂‰ªñ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    üëª ÂÖ∂‰ªñ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%85%B6%E4%BB%96/Settings.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%85%B6%E4%BB%96/Solutions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Solutions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%85%B6%E4%BB%96/Weasel.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Weasel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="ÁõÆÂΩï">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ÁõÆÂΩï
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1nosql" class="md-nav__link">
    <span class="md-ellipsis">
      
        1„ÄÅNoSQLÊ¶ÇËø∞
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1„ÄÅNoSQLÊ¶ÇËø∞">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-nosql" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1„ÄÅ‰∏∫‰ªÄ‰πàË¶ÅÁî® NoSQLÔºü
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-nosql" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2„ÄÅ‰ªÄ‰πàÊòØ NoSQLÔºü
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2redis" class="md-nav__link">
    <span class="md-ellipsis">
      
        2„ÄÅRedis ÂÖ•Èó®
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2„ÄÅRedis ÂÖ•Èó®">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1„ÄÅÊ¶ÇËø∞
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22reids" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2„ÄÅReids ÂÆâË£Ö
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2„ÄÅReids ÂÆâË£Ö">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221linxu" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2.1„ÄÅLinxu
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2.1„ÄÅLinxu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reids" class="md-nav__link">
    <span class="md-ellipsis">
      
        ÂÆâË£Ö Reids
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#systemd" class="md-nav__link">
    <span class="md-ellipsis">
      
        ÈÖçÁΩÆ systemd ÊúçÂä°
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Âç∏ËΩΩÂπ∂Âà†Èô§
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222docker" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2.2„ÄÅDocker
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222windows" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2.2„ÄÅWindows
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2.3„ÄÅÂÆâË£ÖÈÅáÂà∞ÁöÑ‰∏Ä‰∫õÈóÆÈ¢ò
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2.3„ÄÅÂÆâË£ÖÈÅáÂà∞ÁöÑ‰∏Ä‰∫õÈóÆÈ¢ò">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arm64bug" class="md-nav__link">
    <span class="md-ellipsis">
      
        ARM64ÁéØÂ¢ÉÂêØÂä®BUG
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3„ÄÅÂü∫Á°ÄÁü•ËØÜ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3„ÄÅÂü∫Á°ÄÁü•ËØÜ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.1„ÄÅÂø´ÈÄü‰∏äÊâã
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3.1„ÄÅÂø´ÈÄü‰∏äÊâã">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        ÂêØÂä®
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        ËøûÊé•
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        ÂÖ≥Èó≠
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Redis Â∑•ÂÖ∑
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.2„ÄÅÂ∏∏Áî®ÂëΩ‰ª§
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      
        3„ÄÅ‰∫îÂ§ßÊï∞ÊçÆÁ±ªÂûã
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3„ÄÅ‰∫îÂ§ßÊï∞ÊçÆÁ±ªÂûã">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31string" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1„ÄÅStringÔºàÂ≠óÁ¨¶‰∏≤Ôºâ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32list" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2„ÄÅListÔºàÂàóË°®Ôºâ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33set" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3„ÄÅSetÔºàÈõÜÂêàÔºâ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34hash" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4„ÄÅHashÔºàÂìàÂ∏åÔºâ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35zset" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.5„ÄÅZsetÔºàÊúâÂ∫èÈõÜÂêàÔºâ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      
        4„ÄÅ‰∏âÂ§ßÁâπÊÆäÁ±ªÂûã
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4„ÄÅ‰∏âÂ§ßÁâπÊÆäÁ±ªÂûã">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41geospatial" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1„ÄÅgeospatialÔºàÂú∞ÁêÜ‰ΩçÁΩÆÔºâ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42hyperloglog" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2„ÄÅhyperloglog
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43bitmap" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3„ÄÅBitmap
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      
        5„ÄÅ‰∫ãÂä°
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5„ÄÅ‰∫ãÂä°">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1„ÄÅ‰∫ãÂä°ÁöÑÊµÅÁ®ã
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52watch" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2„ÄÅwatch
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3„ÄÅ‰∫ãÂä°ÈîôËØØ‰∏éÂõûÊªö
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6jedis" class="md-nav__link">
    <span class="md-ellipsis">
      
        6„ÄÅJedis
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7spring-boot" class="md-nav__link">
    <span class="md-ellipsis">
      
        7„ÄÅSpring Boot Êï¥Âêà
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7„ÄÅSpring Boot Êï¥Âêà">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71redistemplate" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1„ÄÅRedisTemplate ÂèäÂ∫èÂàóÂåñÊñπÂºè
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-redis" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2„ÄÅËé∑Âèñ Redis ËøûÊé•‰ø°ÊÅØ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8redis" class="md-nav__link">
    <span class="md-ellipsis">
      
        8„ÄÅRedis ÈÖçÁΩÆËØ¶Ëß£
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8„ÄÅRedis ÈÖçÁΩÆËØ¶Ëß£">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81redisconf" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1„ÄÅredis.conf ËØ¶Ëß£
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8.1„ÄÅredis.conf ËØ¶Ëß£">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#811" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.1„ÄÅÂçï‰Ωç
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#812" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.2„ÄÅÂåÖÂê´
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#813" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.3„ÄÅÁΩëÁªú
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#814" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.4„ÄÅÈÄöÁî®
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#815" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.5„ÄÅÂø´ÁÖß
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#816" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.6„ÄÅÂ§çÂà∂
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#817" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.7„ÄÅÂÆâÂÖ®
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#818" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.8„ÄÅÂÆ¢Êà∑Á´Ø
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#819" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.9„ÄÅÂÜÖÂ≠òÁÆ°ÁêÜ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8110aof" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.10„ÄÅAOF Ê®°Âºè
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8111" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.11„ÄÅÈõÜÁæ§
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8112" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1.12„ÄÅÊÖ¢Êó•Âøó
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82sentinelconf" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.2„ÄÅsentinel.conf ËØ¶Ëß£
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9" class="md-nav__link">
    <span class="md-ellipsis">
      
        9„ÄÅÊåÅ‰πÖÂåñ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9„ÄÅÊåÅ‰πÖÂåñ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91rdb" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1„ÄÅRDB
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9.1„ÄÅRDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#911-rdb" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1.1„ÄÅÂºÄÂêØ RDB ÊåÅ‰πÖÂåñÊñπÂºè
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#912rdb" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1.2„ÄÅRDB Êñá‰ª∂
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#913rdb" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1.3„ÄÅRDB ÁöÑ‰ºòÁº∫ÁÇπ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#92aof" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.2„ÄÅAOF
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9.2„ÄÅAOF">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#921-aof" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.2.1„ÄÅÂºÄÂêØ AOF ÊåÅ‰πÖÂåñÊñπÂºè
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#922aof" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.2.2„ÄÅAOF Êñá‰ª∂
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#923aof" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.2.3„ÄÅAOF ÁöÑ‰ºòÁº∫ÁÇπ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10" class="md-nav__link">
    <span class="md-ellipsis">
      
        10„ÄÅËÆ¢ÈòÖ‰∏éÂèëÂ∏É
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10„ÄÅËÆ¢ÈòÖ‰∏éÂèëÂ∏É">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#101" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.1„ÄÅËÆ¢ÈòÖ‰∏éÈÄÄËÆ¢È¢ëÈÅì
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#102" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.2„ÄÅÂèëÈÄÅ‰ø°ÊÅØÂà∞È¢ëÈÅì
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#103" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3„ÄÅÊ®°ÂºèÁöÑËÆ¢ÈòÖ‰∏é‰ø°ÊÅØÂèëÈÄÅ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#104" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.4„ÄÅËÆ¢ÈòÖ‰∏éÈÄÄËÆ¢Ê®°Âºè
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#105" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.5„ÄÅÂèëÈÄÅ‰ø°ÊÅØÂà∞Ê®°Âºè
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11redis" class="md-nav__link">
    <span class="md-ellipsis">
      
        11„ÄÅRedis ÈõÜÁæ§
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11„ÄÅRedis ÈõÜÁæ§">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.1„ÄÅ‰∏ª‰ªéÂ§çÂà∂
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.1„ÄÅ‰∏ª‰ªéÂ§çÂà∂">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1111" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.1.1„ÄÅ‰∏ª‰ªéÂ§çÂà∂‰ªãÁªç
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1112" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.1.2„ÄÅ‰∏ª‰ªéÂ§çÂà∂Êê≠Âª∫
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112sentinel" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.2„ÄÅSentinel Ê®°Âºè
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.2„ÄÅSentinel Ê®°Âºè">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1121" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.2.1„ÄÅÂì®ÂÖµÊ®°Âºè‰ªãÁªç
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1122" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.2.2„ÄÅÂì®ÂÖµÊ®°ÂºèÊê≠Âª∫
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#113cluster" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.3„ÄÅCluster Ê®°Âºè
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.3„ÄÅCluster Ê®°Âºè">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1131cluster" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.3.1„ÄÅCluster Ê®°Âºè‰ªãÁªç
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1132cluster" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.3.2„ÄÅCluster Ê®°ÂºèÊê≠Âª∫
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1133redis-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.3.3„ÄÅRedis Cluster Êìç‰Ωú
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    <span class="md-ellipsis">
      
        12„ÄÅÁºìÂ≠òÈõ™Â¥©„ÄÅÂáªÁ©ø„ÄÅÁ©øÈÄè
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="12„ÄÅÁºìÂ≠òÈõ™Â¥©„ÄÅÂáªÁ©ø„ÄÅÁ©øÈÄè">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.1„ÄÅÁºìÂ≠òÈõ™Â¥©
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.2„ÄÅÁºìÂ≠òÂáªÁ©ø
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#123" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.3„ÄÅÁºìÂ≠òÁ©øÈÄè
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#124" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.4„ÄÅÁºìÂ≠òÈ¢ÑÁÉ≠
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#125" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.5„ÄÅÁºìÂ≠òÈôçÁ∫ß
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13redis" class="md-nav__link">
    <span class="md-ellipsis">
      
        13„ÄÅRedis ÂÆûÁé∞ÂàÜÂ∏ÉÂºèÈîÅ
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#14redis" class="md-nav__link">
    <span class="md-ellipsis">
      
        14„ÄÅRedis ÂÆûÁé∞ÂàÜÂ∏ÉÂºèÁºìÂ≠ò
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14„ÄÅRedis ÂÆûÁé∞ÂàÜÂ∏ÉÂºèÁºìÂ≠ò">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#141" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.1„ÄÅÊê≠Âª∫ÁéØÂ¢É
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#142-mybatis" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.2„ÄÅÂºÄÂêØ Mybatis ÁöÑ‰∫åÁ∫ßÁºìÂ≠ò
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#143-redis" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.3„ÄÅ‰ΩøÁî® Redis ‰Ωú‰∏∫ÁºìÂ≠ò
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#144" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.4„ÄÅÈóÆÈ¢òÂèä‰ºòÂåñ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#15redis-session" class="md-nav__link">
    <span class="md-ellipsis">
      
        15„ÄÅRedis Session ÁÆ°ÁêÜ
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="redis">Redis<a class="headerlink" href="#redis" title="Permanent link">&para;</a></h1>
<h2 id="1nosql">1„ÄÅNoSQLÊ¶ÇËø∞<a class="headerlink" href="#1nosql" title="Permanent link">&para;</a></h2>
<h3 id="11-nosql">1.1„ÄÅ‰∏∫‰ªÄ‰πàË¶ÅÁî® NoSQLÔºü<a class="headerlink" href="#11-nosql" title="Permanent link">&para;</a></h3>
<p><strong>ÂçïÊú∫ MySQL Âπ¥‰ª£</strong></p>
<p><img src="!assets/Redis/image-20200815224858013.png" alt="image-20200815224858013" style="zoom: 67%;" /></p>
<p>DAL ÊòØÊï∞ÊçÆËÆøÈóÆÂ±ÇÁöÑËã±ÊñáÁº©ÂÜôÔºåÂç≥‰∏∫Êï∞ÊçÆËÆøÈóÆÂ±ÇÔºàData Access LayerÔºâ„ÄÇÂÖ∂ÂäüËÉΩ‰∏ªË¶ÅÊòØË¥üË¥£Êï∞ÊçÆÂ∫ìÁöÑËÆøÈóÆ„ÄÇÁÆÄÂçïÂú∞ËØ¥Â∞±ÊòØÂÆûÁé∞ÂØπÊï∞ÊçÆË°®ÁöÑ SelectÔºàÊü•ËØ¢Ôºâ„ÄÅInsertÔºàÊèíÂÖ•Ôºâ„ÄÅUpdateÔºàÊõ¥Êñ∞Ôºâ„ÄÅDeleteÔºàÂà†Èô§ÔºâÁ≠âÊìç‰Ωú„ÄÇ</p>
<p>90Âπ¥‰ª£‰∏Ä‰∏™ÁΩëÁ´ôÁöÑËÆøÈóÆÈáè‰∏ç‰ºöÂ§™Â§ßÔºåÂçï‰∏™Êï∞ÊçÆÂ∫ìÂÆåÂÖ®Ë∂≥Â§üÔºåÈÇ£‰∏™Êó∂ÂÄôÔºåÊõ¥Â§öÁöÑÊòØÂéª‰ΩøÁî®ÈùôÊÄÅ HTMLÔºåÊúçÂä°Âô®Ê†πÊú¨Ê≤°ÊúâÂ§™Â§ßÂéãÂäõ„ÄÇ</p>
<p>ÈÇ£‰πàËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÁΩëÁ´ôÁöÑÁì∂È¢àÊòØ‰ªÄ‰πàÔºü</p>
<ul>
<li>Êï∞ÊçÆÈáèÂ¶ÇÊûúÂ§™Â§ßÔºå‰∏Ä‰∏™Êú∫Âô®Êîæ‰∏ç‰∏ã</li>
<li>Êï∞ÊçÆÁöÑÁ¥¢ÂºïÔºàB+TreeÔºâÔºå‰∏Ä‰∏™Êú∫Âô®ÂÜÖÂ≠ò‰πüÊîæ‰∏ç‰∏ã</li>
<li>ËÆøÈóÆÈáèÔºàËØªÂÜôÊ∑∑ÂêàÔºâÔºå‰∏Ä‰∏™ÊúçÂä°Âô®ÊâøÂèó‰∏ç‰∫Ü</li>
</ul>
<p><strong>MemcachedÔºàÁºìÂ≠òÔºâ+ MySQL + ÂûÇÁõ¥ÊãÜÂàÜÔºàËØªÂÜôÂàÜÁ¶ªÔºâ</strong></p>
<p>ÁΩëÁ´ô 80% ÁöÑÊÉÖÂÜµÈÉΩÊòØÂú®ËØªÔºåÊØèÊ¨°ÈÉΩË¶ÅÂéªÊü•ËØ¢Êï∞ÊçÆÂ∞±ÂçÅÂàÜÈ∫ªÁÉ¶Ôºå‰∏∫‰∫ÜÂáèËΩªÊï∞ÊçÆÂ∫ìÁöÑÂéãÂäõÔºåÂèØ‰ª•‰ΩøÁî®ÁºìÂ≠òÊù•‰øùËØÅÊïàÁéá„ÄÇ</p>
<p><img src="!assets/Redis/image-20200815225617475.png" alt="image-20200815225617475" style="zoom:67%;" /></p>
<p><strong>ÂàÜË°®ÂàÜÂ∫ì + Ê∞¥ÂìÅÊãÜÂàÜ + MySQL ÈõÜÁæ§</strong></p>
<p>Êó©‰∫õÂπ¥ MyISAMÔºöË°®ÈîÅ ÔºåÂçÅÂàÜÂΩ±ÂìçÊïàÁéáÔºåÈ´òÂπ∂Âèë‰∏ãÂ∞±‰ºöÂá∫Áé∞‰∏•ÈáçÁöÑÈîÅÈóÆÈ¢ò</p>
<p>ËΩ¨Êàò InnoDBÔºöË°åÈîÅÔºàÂ¶ÇÊûú‰ΩøÁî®ÈíàÂØπ InnoDB ÁöÑË°®‰ΩøÁî®Ë°åÈîÅÔºåË¢´ÈîÅÂÆöÂ≠óÊÆµ‰∏çÊòØ‰∏ªÈîÆÔºå‰πüÊ≤°ÊúâÈíàÂØπÂÆÉÂª∫Á´ãÁ¥¢ÂºïÁöÑËØùÔºåË°åÈîÅÈîÅÂÆöÁöÑ‰πüÊòØÊï¥Âº†Ë°®Ôºâ</p>
<p><img src="!assets/Redis/image-20200815230653794.png" alt="image-20200815230653794" style="zoom:80%;" /></p>
<p><strong>Áé∞‰ªäÔºàÂ§ßÊï∞ÊçÆÊó∂‰ª£Ôºâ</strong></p>
<p><img src="!assets/Redis/image-20200815235909929.png" alt="image-20200815235909929" style="zoom: 80%;" /></p>
<p>Áé∞‰ªäÂ¶ÇÊûúÊ∂âÂèäÂ§ßÊï∞ÊçÆÈáèÁöÑÈúÄÊ±ÇÔºåÊØîÂ¶Ç‰∏Ä‰∫õÂïÜÂìÅÊä¢Ë¥≠ÁöÑÊÉÖÊôØÔºåÊàñËÄÖÊòØ‰∏ªÈ°µËÆøÈóÆÈáèÁû¨Èó¥ËæÉÂ§ßÁöÑÊó∂ÂÄôÔºåÂçï‰∏Ä‰ΩøÁî®Êï∞ÊçÆÂ∫ìÊù•‰øùÂ≠òÊï∞ÊçÆÁöÑÁ≥ªÁªü‰ºöÂõ†‰∏∫Èù¢ÂêëÁ£ÅÁõòÔºåÁ£ÅÁõòËØª/ÂÜôÈÄüÂ∫¶ÊØîËæÉÊÖ¢ÁöÑÈóÆÈ¢òËÄåÂ≠òÂú®‰∏•ÈáçÁöÑÊÄßËÉΩÂºäÁ´ØÔºå‰∏ÄÁû¨Èó¥ÊàêÂçÉ‰∏ä‰∏áÁöÑËØ∑Ê±ÇÂà∞Êù•ÔºåÈúÄË¶ÅÁ≥ªÁªüÂú®ÊûÅÁü≠ÁöÑÊó∂Èó¥ÂÜÖÂÆåÊàêÊàêÂçÉ‰∏ä‰∏áÊ¨°ÁöÑËØª/ÂÜôÊìç‰ΩúÔºåËøô‰∏™Êó∂ÂÄôÂæÄÂæÄ‰∏çÊòØÊï∞ÊçÆÂ∫ìËÉΩÂ§üÊâøÂèóÁöÑÔºåÊûÅÂÖ∂ÂÆπÊòìÈÄ†ÊàêÊï∞ÊçÆÂ∫ìÁ≥ªÁªüÁò´Áó™ÔºåÊúÄÁªàÂá∫Áé∞ÊúçÂä°ÂÆïÊú∫ËøôÁßç‰∏•ÈáçÁöÑÈóÆÈ¢ò„ÄÇ‰∏∫‰∫ÜÂÖãÊúç‰∏äËø∞ÁöÑÈóÆÈ¢òÔºåÈ°πÁõÆÈÄöÂ∏∏‰ºöÂºïÂÖ• NoSQL ÊäÄÊúØ„ÄÇ</p>
<h3 id="12-nosql">1.2„ÄÅ‰ªÄ‰πàÊòØ NoSQLÔºü<a class="headerlink" href="#12-nosql" title="Permanent link">&para;</a></h3>
<p>NoSQL = Not Only SQLÔºà‰∏ç‰ªÖ‰ªÖÊòØ SQLÔºâ</p>
<p><strong>NoSQL ÁöÑÁâπÁÇπÔºö</strong></p>
<ul>
<li>Êñπ‰æøÊâ©Â±ïÔºàÊï∞ÊçÆ‰πãÈó¥Ê≤°ÊúâÂÖ≥Á≥ªÔºåÂæàÂ•ΩÊâ©Â±ïÔºâ</li>
<li>Â§ßÊï∞ÊçÆÈáèÈ´òÊÄßËÉΩÔºàRedis ‰∏ÄÁßíÂÜô 8 ‰∏áÊ¨°ÔºåËØªÂèñ 11 ‰∏áÔºåNoSQL ÁöÑÁºìÂ≠òËÆ∞ÂΩïÁ∫ßÔºåÊòØ‰∏ÄÁßçÁªÜÁ≤íÂ∫¶ÁöÑÁºìÂ≠òÔºåÊÄßËÉΩ‰ºöÊØîËæÉÈ´òÔºâ</li>
<li>Êï∞ÊçÆÁ±ªÂûãÊòØÂ§öÊ†∑ÂûãÁöÑÔºà‰∏çÈúÄË¶Å‰∫ãÂÖàËÆæËÆ°Êï∞ÊçÆÂ∫ìÔºåÈöèÁî®ÈöèÂèñÔºâ</li>
</ul>
<p><strong>‰º†Áªü RDBMS Âíå MySQL</strong></p>
<ul>
<li>
<p>‰º†ÁªüÁöÑ RDBMS</p>
<ul>
<li>ÁªìÊûÑÂåñÁªÑÁªá</li>
<li>SQL</li>
<li>Êï∞ÊçÆÂíåÂÖ≥Á≥ªÈÉΩÂ≠òÂú®ÂçïÁã¨ÁöÑË°®‰∏≠</li>
<li>‰∏•Ê†ºÁöÑ‰∏ÄËá¥ÊÄß</li>
<li>Âü∫Á°ÄÁöÑ‰∫ãÂä°</li>
</ul>
</li>
<li>
<p>NoSQL</p>
<ul>
<li>‰∏ç‰ªÖ‰ªÖÊòØÊï∞ÊçÆ</li>
<li>Ê≤°ÊúâÂõ∫ÂÆöÁöÑÊü•ËØ¢ËØ≠Ë®Ä</li>
<li>ÈîÆÂÄºÂØπÂ≠òÂÇ®„ÄÅÂàóÂ≠òÂÇ®„ÄÅÊñáÊ°£Â≠òÂÇ®ÔºåÂõæÂΩ¢Êï∞ÊçÆÂ∫ìÔºàÁ§æ‰∫§ÂÖ≥Á≥ªÔºâ</li>
<li>ÊúÄÁªà‰∏ÄËá¥ÊÄß</li>
<li>CPA ÂÆöÁêÜÂíå BASE</li>
<li>È´òÊÄßËÉΩ„ÄÅÈ´òÂèØÁî®„ÄÅÈ´òÂèØÊâ©</li>
</ul>
</li>
</ul>
<p><strong>‰∫ÜËß£ 3V + 3 È´ò</strong></p>
<p>Â§ßÊï∞ÊçÆÊó∂‰ª£ÁöÑ 3VÔºö‰∏ªË¶ÅÊèèËø∞ÈóÆÈ¢òÁöÑ</p>
<ul>
<li>Êµ∑Èáè Volume</li>
<li>Â§öÊ†∑ Variety</li>
<li>ÂÆûÊó∂ Velocity</li>
</ul>
<p>Â§ßÊï∞ÊçÆÊó∂‰ª£ÁöÑ 3 È´ò Ôºö‰∏ªË¶ÅÊòØÂØπÁ®ãÂ∫èÁöÑË¶ÅÊ±Ç</p>
<ul>
<li>È´òÂπ∂Âèë</li>
<li>È´òÂèØÊâ©</li>
<li>È´òÊÄßËÉΩ</li>
</ul>
<p><strong>NoSQL Êï∞ÊçÆÂ∫ìÁöÑÂõõÂ§ßÂàÜÁ±ªÁöÑÂàÜÊûê</strong></p>
<table>
<thead>
<tr>
<th>ÂàÜÁ±ª</th>
<th>Example ‰∏æ‰æã</th>
<th>ÂÖ∏ÂûãÂ∫îÁî®Âú∫ÊôØ</th>
<th>Êï∞ÊçÆÊ®°Âûã</th>
<th>‰ºòÁÇπ</th>
<th>Áº∫ÁÇπ</th>
</tr>
</thead>
<tbody>
<tr>
<td>ÈîÆÂÄºÔºàkey-valueÔºâ</td>
<td>Tokyo Cabinet/Tyrant, Redis, Voldemort, Oracle BDB</td>
<td>ÂÜÖÂÆπÁºìÂ≠òÔºå‰∏ªË¶ÅÁî®‰∫éÂ§ÑÁêÜÂ§ßÈáèÊï∞ÊçÆÁöÑÈ´òËÆøÈóÆË¥üËΩΩÔºå‰πüÁî®‰∫é‰∏Ä‰∫õÊó•ÂøóÁ≥ªÁªüÁ≠âÁ≠â„ÄÇ</td>
<td>Key ÊåáÂêë Value ÁöÑÈîÆÂÄºÂØπÔºåÈÄöÂ∏∏Áî® hash table Êù•ÂÆûÁé∞</td>
<td>Êü•ÊâæÈÄüÂ∫¶Âø´</td>
<td>Êï∞ÊçÆÊó†ÁªìÊûÑÂåñÔºåÈÄöÂ∏∏Âè™Ë¢´ÂΩì‰ΩúÂ≠óÁ¨¶‰∏≤ÊàñËÄÖ‰∫åËøõÂà∂Êï∞ÊçÆ</td>
</tr>
<tr>
<td>ÂàóÂ≠òÂÇ®Êï∞ÊçÆÂ∫ì</td>
<td>Cassandra, HBase, Riak</td>
<td>ÂàÜÂ∏ÉÂºèÁöÑÊñá‰ª∂Á≥ªÁªü</td>
<td>‰ª•ÂàóÁ∞áÂºèÂ≠òÂÇ®ÔºåÂ∞ÜÂêå‰∏ÄÂàóÊï∞ÊçÆÂ≠òÂú®‰∏ÄËµ∑</td>
<td>Êü•ÊâæÈÄüÂ∫¶Âø´ÔºåÂèØÊâ©Â±ïÊÄßÂº∫ÔºåÊõ¥ÂÆπÊòìËøõË°åÂàÜÂ∏ÉÂºèÊâ©Â±ï</td>
<td>ÂäüËÉΩÁõ∏ÂØπÂ±ÄÈôê</td>
</tr>
<tr>
<td>ÊñáÊ°£ÂûãÊï∞ÊçÆÂ∫ì</td>
<td>CouchDB, MongoDb</td>
<td>WebÂ∫îÁî®Ôºà‰∏éKey-ValueÁ±ª‰ººÔºåValueÊòØÁªìÊûÑÂåñÁöÑÔºå‰∏çÂêåÁöÑÊòØÊï∞ÊçÆÂ∫ìËÉΩÂ§ü‰∫ÜËß£ValueÁöÑÂÜÖÂÆπÔºâ</td>
<td>Key-Value ÂØπÂ∫îÁöÑÈîÆÂÄºÂØπÔºåValue ‰∏∫ÁªìÊûÑÂåñÊï∞ÊçÆ</td>
<td>Êï∞ÊçÆÁªìÊûÑË¶ÅÊ±Ç‰∏ç‰∏•Ê†ºÔºåË°®ÁªìÊûÑÂèØÂèòÔºå‰∏çÈúÄË¶ÅÂÉèÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ì‰∏ÄÊ†∑ÈúÄË¶ÅÈ¢ÑÂÖàÂÆö‰πâË°®ÁªìÊûÑ</td>
<td>Êü•ËØ¢ÊÄßËÉΩ‰∏çÈ´òÔºåËÄå‰∏îÁº∫‰πèÁªü‰∏ÄÁöÑÊü•ËØ¢ËØ≠Ê≥ï„ÄÇ</td>
</tr>
<tr>
<td>ÂõæÂΩ¢(Graph)Êï∞ÊçÆÂ∫ì</td>
<td>Neo4J, InfoGrid, Infinite Graph</td>
<td>Á§æ‰∫§ÁΩëÁªúÔºåÊé®ËçêÁ≥ªÁªüÁ≠â„ÄÇ‰∏ìÊ≥®‰∫éÊûÑÂª∫ÂÖ≥Á≥ªÂõæË∞±</td>
<td>ÂõæÁªìÊûÑ</td>
<td>Âà©Áî®ÂõæÁªìÊûÑÁõ∏ÂÖ≥ÁÆóÊ≥ï„ÄÇÊØîÂ¶ÇÊúÄÁü≠Ë∑ØÂæÑÂØªÂùÄÔºåN Â∫¶ÂÖ≥Á≥ªÊü•ÊâæÁ≠â</td>
<td>ÂæàÂ§öÊó∂ÂÄôÈúÄË¶ÅÂØπÊï¥‰∏™ÂõæÂÅöËÆ°ÁÆóÊâçËÉΩÂæóÂá∫ÈúÄË¶ÅÁöÑ‰ø°ÊÅØÔºåËÄå‰∏îËøôÁßçÁªìÊûÑ‰∏çÂ§™Â•ΩÂÅöÂàÜÂ∏ÉÂºèÁöÑÈõÜÁæ§</td>
</tr>
</tbody>
</table>
<h2 id="2redis">2„ÄÅRedis ÂÖ•Èó®<a class="headerlink" href="#2redis" title="Permanent link">&para;</a></h2>
<h3 id="21">2.1„ÄÅÊ¶ÇËø∞<a class="headerlink" href="#21" title="Permanent link">&para;</a></h3>
<p>RedisÔºàRemote Dictionary Server )ÔºåÂç≥ËøúÁ®ãÂ≠óÂÖ∏ÊúçÂä°ÔºåÊòØ‰∏Ä‰∏™ÂºÄÊ∫êÁöÑ‰ΩøÁî®ANSI CËØ≠Ë®ÄÁºñÂÜô„ÄÅÊîØÊåÅÁΩëÁªú„ÄÅÂèØÂü∫‰∫éÂÜÖÂ≠ò‰∫¶ÂèØÊåÅ‰πÖÂåñÁöÑÊó•ÂøóÂûã„ÄÅKey-ValueÊï∞ÊçÆÂ∫ìÔºåÂπ∂Êèê‰æõÂ§öÁßçËØ≠Ë®ÄÁöÑAPI„ÄÇ</p>
<p>Redis ‰ºöÂë®ÊúüÊÄßÁöÑÊääÊõ¥Êñ∞ÁöÑÊï∞ÊçÆÂÜôÂÖ•Á£ÅÁõòÊàñËÄÖÊää‰øÆÊîπÊìç‰ΩúÂÜôÂÖ•ËøΩÂä†ÁöÑËÆ∞ÂΩïÊñá‰ª∂ÔºåÂπ∂‰∏îÂú®Ê≠§Âü∫Á°Ä‰∏äÂÆûÁé∞‰∫Ü master-slaveÔºà‰∏ª‰ªéÔºâÂêåÊ≠•„ÄÇÊòØÂΩì‰∏ãÊúÄÁÉ≠Èó®ÁöÑ NoSQL ÊäÄÊúØ‰πã‰∏ÄÔºå‰πüË¢´‰∫∫‰ª¨Êàê‰∏∫ÁªìÊûÑÂåñÊï∞ÊçÆÂ∫ì„ÄÇ</p>
<p><strong>Redis ËÉΩÂπ≤ÂòõÔºü</strong></p>
<ul>
<li>ÂÜÖÂ≠òÂ≠òÂÇ®„ÄÅÊåÅ‰πÖÂåñÔºåÂÜÖÂ≠ò‰∏≠ÊòØÊñ≠ÁîµÂç≥Â§±ÔºåÊâÄ‰ª•ËØ¥ÊåÅ‰πÖÂåñÂæàÈáçË¶ÅÔºàRDB„ÄÅAOFÔºâ</li>
<li>ÊïàÁéáÈ´òÔºåÂèØ‰ª•Áî®‰∫éÈ´òÈÄüÁºìÂ≠ò</li>
<li>ÂèëÂ∏ÉËÆ¢ÈòÖÁ≥ªÁªü</li>
<li>Âú∞Âõæ‰ø°ÊÅØÂàÜÊûê</li>
<li>ËÆ°Êó∂Âô®„ÄÅËÆ°Êï∞Âô®ÔºàÊµèËßàÈáèÔºâ</li>
<li>...</li>
</ul>
<p><strong>Redis ÁöÑÁâπÊÄß</strong></p>
<ul>
<li>Â§öÊ†∑ÁöÑÊï∞ÊçÆÁ±ªÂûã</li>
<li>ÊåÅ‰πÖÂåñ</li>
<li>ÈõÜÁæ§</li>
<li>‰∫ãÂä°</li>
<li>...</li>
</ul>
<p>Redis ÊòØÂçïÁ∫øÁ®ãÁöÑÔºà6.0 ÊòØÂ§öÁ∫øÁ®ãÔºâÔºåÂõ†‰∏∫ Redis ÊòØÂü∫‰∫éÂÜÖÂ≠òÊìç‰ΩúÔºåCPU ‰∏çÊòØ Reids ÊÄßËÉΩÁì∂È¢àÔºåReids ÁöÑÁì∂È¢àÊòØÊ†πÊçÆÊú∫Âô®ÁöÑÂÜÖÂ≠òÂíåÁΩëÁªúÁöÑÂ∏¶ÂÆΩÔºåËÄå‰∏îRedis ÂçïÁ∫øÁ®ãÂçÅÂàÜÂø´„ÄÇ</p>
<h3 id="22reids">2.2„ÄÅReids ÂÆâË£Ö<a class="headerlink" href="#22reids" title="Permanent link">&para;</a></h3>
<h4 id="221linxu">2.2.1„ÄÅLinxu<a class="headerlink" href="#221linxu" title="Permanent link">&para;</a></h4>
<p>Â¶ÇÊûúÂ´åÈ∫ªÁÉ¶Âπ∂‰∏îÊúçÂä°Âô®ÂèØ‰ª•ËøûÊé•‰∫íËÅîÁΩëÔºåÂèØ‰ª•‰ΩøÁî®Âú®Á∫øÂÆâË£ÖÁöÑÊñπÂºèÔºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">## ÂÆâË£ÖredisÔºåÂÆâË£ÖÂêéredisÈªòËÆ§‰∏∫ÂêØÂä®Áä∂ÊÄÅ</span>
apt<span class="w"> </span>install<span class="w"> </span>redis

<span class="c1">## ÂêØÂä®redisÊúçÂä°</span>
redis-server<span class="w"> </span><span class="p">&amp;</span>

<span class="c1">## ÂêØÂä®ÂÆ¢Êà∑Á´Ø</span>
redis-cli

<span class="c1">## Âç∏ËΩΩ</span>
apt<span class="w"> </span>purge<span class="w"> </span>--auto-remove<span class="w"> </span>redis-server
</code></pre></div>
<p>‰∏ÄËà¨ÊúçÂä°Âô®‰∏ªË¶ÅËøòÊòØ‰ΩøÁî®Á¶ªÁ∫øÂÆâË£ÖÂπ∂‰∏îÊâãÂä®ÈÖçÁΩÆÁéØÂ¢É„ÄÇ</p>
<h5 id="reids">ÂÆâË£Ö Reids<a class="headerlink" href="#reids" title="Permanent link">&para;</a></h5>
<ol>
<li>
<p>‰∏ãËΩΩÊ∫êÁ†ÅÔºàÊúçÂä°Á¶ªÁ∫øÂèØ‰ª•‰ΩøÁî® SFTP Á≠âÂ∑•ÂÖ∑‰∏ä‰º†ËøáÂéªÔºâÔºö</p>
<div class="highlight"><pre><span></span><code>wget<span class="w"> </span>http://download.redis.io/releases/redis-6.0.5.tar.gz
</code></pre></div>
</li>
<li>
<p>Ëß£ÂéãÂà∞ <code>/usr/local</code> Ôºö</p>
<div class="highlight"><pre><span></span><code>tar<span class="w"> </span>-xzf<span class="w"> </span>./redis-6.0.5.tar.gz<span class="w"> </span>-C<span class="w"> </span>/usr/local/
</code></pre></div>
</li>
<li>
<p>Êõ¥ÊîπÊñá‰ª∂Â§πÂêçÁß∞‰∏∫ <code>redis</code>Ôºö</p>
<div class="highlight"><pre><span></span><code>mv<span class="w"> </span>/usr/local/redis-6.0.5/<span class="w"> </span>/usr/local/redis/
</code></pre></div>
</li>
<li>
<p>ËøõÂÖ•ÁõÆÂΩïÔºåC/C++ ÊûÑÂª∫ÔºåÁ±ª‰ºº mvn installÔºånpm buildÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/usr/local/redis
sudo<span class="w"> </span>make
</code></pre></div>
</li>
<li>
<p>ÂÆâË£ÖÔºö</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>make<span class="w"> </span>install
</code></pre></div>
</li>
<li>
<p>ÂêØÂä® RedisÔºö</p>
<div class="highlight"><pre><span></span><code>src/redis-server
</code></pre></div>
</li>
</ol>
<h5 id="systemd">ÈÖçÁΩÆ systemd ÊúçÂä°<a class="headerlink" href="#systemd" title="Permanent link">&para;</a></h5>
<ol>
<li>
<p>Redis ÂÆâË£ÖÂêéÔºåÈªòËÆ§ÈÖçÁΩÆÊñá‰ª∂‰Ωç‰∫éÊ∫êÁ†ÅÁõÆÂΩï‰∏≠ÁöÑ redis.conf Êñá‰ª∂„ÄÇÂèØ‰ª•Â∞ÜÂÖ∂Â§çÂà∂Âà∞ <code>/etc/redis/</code> ÁõÆÂΩïÔºåÂπ∂ËøõË°åËá™ÂÆö‰πâÈÖçÁΩÆÔºö</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>/etc/redis/
cp<span class="w"> </span>/usr/local/redis/redis.conf<span class="w"> </span>/etc/redis/
</code></pre></div>
</li>
<li>
<p>Êñ∞Âª∫‰∏Ä‰∏™Á≥ªÁªüÊúçÂä°Êñá‰ª∂Ôºö</p>
<div class="highlight"><pre><span></span><code>vim<span class="w"> </span>/etc/systemd/system/redis.service
</code></pre></div>
<p>Êñá‰ª∂ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>Unit<span class="o">]</span>
<span class="nv">Description</span><span class="o">=</span>Redis<span class="w"> </span>Server
<span class="nv">After</span><span class="o">=</span>network.target

<span class="o">[</span>Service<span class="o">]</span>
<span class="nv">ExecStart</span><span class="o">=</span>/usr/local/bin/redis-server<span class="w"> </span>/etc/redis/redis.conf
<span class="nv">ExecStop</span><span class="o">=</span>/usr/local/bin/redis-cli<span class="w"> </span>shutdown
<span class="nv">Restart</span><span class="o">=</span>always

<span class="o">[</span>Install<span class="o">]</span>
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</code></pre></div>
</li>
<li>
<p>ÈáçËΩΩÁ≥ªÁªüÊúçÂä°Ôºö</p>
<div class="highlight"><pre><span></span><code>systemctl<span class="w"> </span>daemon-reload
</code></pre></div>
</li>
<li>
<p>Êé•‰∏ãÊù•ÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§Êù•ÂêØÂä®„ÄÅÂÅúÊ≠¢„ÄÅÈáçÂêØÂíåÊ£ÄÊü• Redis ÊúçÂä°ÁöÑÁä∂ÊÄÅÔºö</p>
<div class="highlight"><pre><span></span><code>systemctl<span class="w"> </span>start<span class="w"> </span>redis
systemctl<span class="w"> </span>stop<span class="w"> </span>redis
systemctl<span class="w"> </span>restart<span class="w"> </span>redis
systemctl<span class="w"> </span>status<span class="w"> </span>redis
</code></pre></div>
</li>
<li>
<p>Â¶ÇÊûúÊÉ≥Ë¶ÅÂú®Á≥ªÁªüÂêØÂä®Êó∂Ëá™Âä®ÂêØÂä® Redis ÊúçÂä°ÔºåÂèØ‰ª•ËøêË°å‰ª•‰∏ãÂëΩ‰ª§Ôºö</p>
<div class="highlight"><pre><span></span><code>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>redis
</code></pre></div>
</li>
</ol>
<h5 id="_1">Âç∏ËΩΩÂπ∂Âà†Èô§<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="c1">## ÂÖàÂÅú‰∏ãredisÔºåÁÑ∂ÂêéÂà†Èô§ÂÆâË£ÖÁõÆÂΩï</span>
rm<span class="w"> </span>-rf<span class="w"> </span>/usr/local/redis<span class="w"> </span>

<span class="c1">## Âà†Èô§ÊâÄÊúâredisÁõ∏ÂÖ≥ÂëΩ‰ª§ËÑöÊú¨</span>
rm<span class="w"> </span>-rf<span class="w"> </span>/usr/bin/redis-*
</code></pre></div>
<h4 id="222docker">2.2.2„ÄÅDocker<a class="headerlink" href="#222docker" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p>‰∏ãËΩΩ redis ÈïúÂÉèÔºö</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>pull<span class="w"> </span>redis
</code></pre></div>
</li>
<li>
<p>ÂàõÂª∫ reids ÂÆπÂô®Ôºö</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>redis<span class="w"> </span>-td<span class="w"> </span>-p<span class="w"> </span><span class="m">6379</span>:6379<span class="w"> </span>redis
</code></pre></div>
</li>
<li>
<p>ËøõÂÖ• reids ÂÆπÂô®Ôºö</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>redis<span class="w"> </span>bash
</code></pre></div>
</li>
<li>
<p>ÂêØÂä®ÂÆ¢Êà∑Á´ØÔºö</p>
<div class="highlight"><pre><span></span><code>redis-cli
</code></pre></div>
</li>
</ol>
<h4 id="222windows">2.2.2„ÄÅWindows<a class="headerlink" href="#222windows" title="Permanent link">&para;</a></h4>
<p>ÂâçÂæÄ <a href="https://github.com/redis-windows/redis-windows/releases">Âú∞ÂùÄ</a> ‰∏ãËΩΩÂÆâË£ÖÂåÖÔºö</p>
<p><img src="./!assets/Redis/image-20250426033944475.png" alt="image-20250426033944475" style="zoom: 50%;" /></p>
<p>ÂêÑ‰∏™ÁâàÊú¨Â∑ÆÂºÇÔºö</p>
<table>
<thead>
<tr>
<th>ÁâπÊÄß</th>
<th>Cygwin ÁâàÊú¨</th>
<th>MSYS2 ÁâàÊú¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>ÊûÑÂª∫ÁéØÂ¢É</td>
<td>‰ΩøÁî® Cygwin ÁºñËØëÔºåÂÖºÂÆπ POSIX ÁâπÊÄßÊõ¥Â§ö„ÄÇ</td>
<td>‰ΩøÁî® MSYS2 ÁºñËØëÔºåÈÄüÂ∫¶Êõ¥Âø´„ÄÅÊõ¥ËΩªÈáè„ÄÇ</td>
</tr>
<tr>
<td>ÊÄßËÉΩË°®Áé∞</td>
<td>Áõ∏ÂØπËæÉÊÖ¢‰∏Ä‰∫õ„ÄÇ</td>
<td>Áõ∏ÂØπÊõ¥Âø´„ÄÅÊõ¥Êé•ËøëÂéüÁîü„ÄÇ</td>
</tr>
<tr>
<td>ÂÖºÂÆπÊÄß</td>
<td>‰∏é Linux Á®ãÂ∫èÊé•Âè£Êõ¥Áõ∏‰ºº„ÄÇ</td>
<td>Êõ¥ÈÄÇÂêà Windows ÂéüÁîüÂºÄÂèëÂú∫ÊôØ„ÄÇ</td>
</tr>
<tr>
<td>Â∫ïÂ±Ç‰æùËµñ</td>
<td>‰æùËµñ <code>cygwin1.dll</code>„ÄÇ</td>
<td>‰æùËµñ <code>msys-2.0.dll</code>„ÄÇ</td>
</tr>
<tr>
<td>with-Service</td>
<td>ÂèØÈÄöËøá Windows ÊúçÂä°ÊñπÂºèÂÆâË£ÖÂíåÂêØÂä® Redis„ÄÇ</td>
<td>ÂèØÈÄöËøá Windows ÊúçÂä°ÊñπÂºèÂÆâË£ÖÂíåÂêØÂä® Redis„ÄÇ</td>
</tr>
</tbody>
</table>
<p>‰∏ãËΩΩÂÆåÊàêÂêéËß£ÂéãÔºåÊèê‰æõ‰∏âÁßçËøêË°åÊ®°ÂºèÔºö</p>
<ul>
<li>ËøêË°åÈ°πÁõÆ‰∏≠ÁöÑ start.bat ËÑöÊú¨Ôºå‰∏ÄÈîÆÂêØÂä®„ÄÇ</li>
<li>‰ΩøÁî®ÂëΩ‰ª§Ë°å„ÄÇ</li>
<li>‰ª•Á≥ªÁªüÊúçÂä°ËøêË°å„ÄÇ</li>
</ul>
<p><strong>ÂëΩ‰ª§Ë°åÂêØÂä®</strong></p>
<p>ÂÖàÂ∞ÜÂÆâË£ÖÁõÆÂΩïÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáè„ÄÇ</p>
<p><code>cmd</code> ÂêØÂä®Ôºö</p>
<div class="highlight"><pre><span></span><code>redis-server.exe<span class="w"> </span>redis.conf
</code></pre></div>
<p><code>powershell</code> ÂêØÂä®Ôºö</p>
<div class="highlight"><pre><span></span><code>./redis-server.exe<span class="w"> </span>redis.conf
</code></pre></div>
<p><strong>ÂÆâË£ÖÊúçÂä°</strong></p>
<p>ÂèØÂÆûÁé∞ÂºÄÊú∫Ëá™ÂêØÂä® ËØ∑‰ª•ÁÆ°ÁêÜÂëòË∫´‰ªΩËøêË°åÔºåÂπ∂Â∞Ü RedisService.exe Êîπ‰∏∫ÂÆûÈôÖÂ≠òÊîæÁöÑË∑ØÂæÑÔºö</p>
<div class="highlight"><pre><span></span><code>sc<span class="w"> </span>create<span class="w"> </span>Redis<span class="w"> </span><span class="nv">binpath</span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;C:\Software\Redis\RedisService.exe&quot;</span><span class="w"> </span><span class="nv">start</span><span class="o">=</span><span class="w"> </span>auto
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>ÈÄâÈ°π‰∏éÂÖ∂ÂÄº‰πãÈó¥ÈúÄË¶ÅÁ©∫Ê†ºÔºà‰æãÂ¶Ç <code>start= auto</code>ÔºâÔºå Â¶ÇÊûúÁúÅÁï•Á©∫Ê†ºÔºåÊìç‰ΩúÂ∞ÜÂ§±Ë¥•Êñ∞Áâà Windows ÂèØÂøΩÁï•„ÄÇ</p>
</div>
<p>ÂÆåÊàêÂêéÂèØ‰ª•Âú®„ÄêÊúçÂä°„ÄëÁïåÈù¢ÁúãÂà∞Ôºö</p>
<p><img src="!assets/Redis/image-20221128134544993.png" alt="image-20221128134544993" style="zoom:50%;" /></p>
<p>ÊúçÂä°ÈªòËÆ§‰∏∫Ëá™Âä®ÂêØÂä®Áä∂ÊÄÅÔºàÂºÄÊú∫Ëá™ÂêØÔºâÔºåÂ¶ÇÊûú‰∏çÂ∏åÊúõËá™Âä®ÂêØÂä®ÂèØ‰ª•Êîπ‰∏∫ÊâãÂä®ÂêØÂä®ÔºåÈÄöËøáÊúçÂä°È°µÈù¢ÊàñËÄÖ‰ª•‰∏ãÂëΩ‰ª§ÊéßÂà∂ Redis ÊúçÂä°Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">## ÂêØÂä® Redis ÊúçÂä°</span>
sc<span class="w"> </span>start<span class="w"> </span>Redis

<span class="c1">## ÂÅúÊ≠¢ Redis ÊúçÂä°</span>
sc<span class="w"> </span>stop<span class="w"> </span>Redis

<span class="c1">## Âç∏ËΩΩ Redis ÊúçÂä°</span>
sc<span class="w"> </span>delete<span class="w"> </span>Redis
</code></pre></div>
<h4 id="223">2.2.3„ÄÅÂÆâË£ÖÈÅáÂà∞ÁöÑ‰∏Ä‰∫õÈóÆÈ¢ò<a class="headerlink" href="#223" title="Permanent link">&para;</a></h4>
<h5 id="arm64bug">ARM64ÁéØÂ¢ÉÂêØÂä®BUG<a class="headerlink" href="#arm64bug" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>1:C 24 Apr 2022 14:31:23.525 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
1:C 24 Apr 2022 14:31:23.525 # Redis version=6.2.6, bits=64, commit=00000000, modified=0, pid=1, just started
1:C 24 Apr 2022 14:31:23.525 # Configuration loaded
1:M 24 Apr 2022 14:31:23.526 * monotonic clock: POSIX clock_gettime
                _._                                                  
           _.-``__ &#39;&#39;-._                                             
      _.-``    `.  `_.  &#39;&#39;-._           Redis 6.2.6 (00000000/0) 64 bit
  .-`` .-```.  ```\/    _.,_ &#39;&#39;-._                                  
 (    &#39;      ,       .-`  | `,    )     Running in standalone mode
 |`-._`-...-` __...-.``-._|&#39;` _.-&#39;|     Port: 16379
 |    `-._   `._    /     _.-&#39;    |     PID: 1
  `-._    `-._  `-./  _.-&#39;    _.-&#39;                                   
 |`-._`-._    `-.__.-&#39;    _.-&#39;_.-&#39;|                                  
 |    `-._`-._        _.-&#39;_.-&#39;    |           https://redis.io       
  `-._    `-._`-.__.-&#39;_.-&#39;    _.-&#39;                                   
 |`-._`-._    `-.__.-&#39;    _.-&#39;_.-&#39;|                                  
 |    `-._`-._        _.-&#39;_.-&#39;    |                                  
  `-._    `-._`-.__.-&#39;_.-&#39;    _.-&#39;                                   
      `-._    `-.__.-&#39;    _.-&#39;                                       
          `-._        _.-&#39;                                           
              `-.__.-&#39;                                               

1:M 24 Apr 2022 14:31:23.526 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.
1:M 24 Apr 2022 14:31:23.526 # Server initialized
1:M 24 Apr 2022 14:31:23.527 # WARNING Your kernel has a bug that could lead to data corruption during background save. Please upgrade to the latest stable kernel.
1:M 24 Apr 2022 14:31:23.527 # Redis will now exit to prevent data corruption. Note that it is possible to suppress this warning by setting the following config: ignore-warnings ARM64-COW-BUG
</code></pre></div>
<p><strong>Ëß£ÂÜ≥ÂäûÊ≥ï</strong></p>
<p>Âú® redis.conf ÊúÄÂêé‰∏ÄË°åÂèñÊ∂à‰ª•‰∏ãÈÖçÁΩÆÊ≥®ÈáäÔºö</p>
<div class="highlight"><pre><span></span><code>ignore-warnings ARM64-COW-BUG
</code></pre></div>
<p>Â¶ÇÊûúÊ≤°ÊúâÁöÑËØùÂ∞±ÊâãÂä®Êñ∞Â¢ûÈÖçÁΩÆ„ÄÇ</p>
<h3 id="23">2.3„ÄÅÂü∫Á°ÄÁü•ËØÜ<a class="headerlink" href="#23" title="Permanent link">&para;</a></h3>
<h4 id="231">2.3.1„ÄÅÂø´ÈÄü‰∏äÊâã<a class="headerlink" href="#231" title="Permanent link">&para;</a></h4>
<h5 id="_2">ÂêØÂä®<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h5>
<p>ÂêØÂä® Redis ÊúçÂä°Âô®Ôºö</p>
<div class="highlight"><pre><span></span><code>redis-server
</code></pre></div>
<p>Â∏¶ÈÖçÁΩÆÊñá‰ª∂ÂêØÂä®Ôºà<code>/etc/redis/redis.conf</code> ‰∏∫ÈÖçÁΩÆÊñá‰ª∂Âú∞ÂùÄÔºå‰∏∫‰∫ÜÊñπ‰æøÁÆ°ÁêÜÔºåÂ∞ÜÈÖçÁΩÆÊñá‰ª∂Â§çÂà∂Âà∞‰∫Ü <code>/etc/redis</code> ‰∏ãÔºâÔºö</p>
<div class="highlight"><pre><span></span><code>redis-server<span class="w"> </span>/etc/redis/redis.conf
</code></pre></div>
<p>Â∏¶ÈÖçÁΩÆÊñá‰ª∂ÂêØÂä®Ôºå‰∏îÊåáÂÆöÊüêÂá†‰∏™ÈÖçÁΩÆÔºåÈÖçÁΩÆÂêçÁß∞ÂâçÂä† <code>--</code>Ôºå‰ºöË¶ÜÁõñÈÖçÁΩÆÊñá‰ª∂ÈáåÂÄºÔºö</p>
<div class="highlight"><pre><span></span><code>redis-server<span class="w"> </span>/etc/redis/redis.conf<span class="w"> </span>--daemonize<span class="w"> </span>yes<span class="w"> </span>--port<span class="w"> </span><span class="m">1123</span>
</code></pre></div>
<p>Êü•ÁúãÁâàÊú¨Âè∑Ôºö</p>
<div class="highlight"><pre><span></span><code>redis-server<span class="w"> </span>-v
</code></pre></div>
<h5 id="_3">ËøûÊé•<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h5>
<p>ÂêØÂä® Redis ÂÆ¢Êà∑Á´ØÔºö</p>
<div class="highlight"><pre><span></span><code>redis-cli
</code></pre></div>
<p>‰∫§‰∫íÊ®°ÂºèÔºö</p>
<div class="highlight"><pre><span></span><code>redis-cli<span class="w"> </span>-h<span class="w"> </span><span class="m">127</span>.0.0.1<span class="w"> </span>-p<span class="w"> </span><span class="m">6379</span>
</code></pre></div>
<h5 id="_4">ÂÖ≥Èó≠<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h5>
<p>ÂÖ≥Èó≠ RedisÔºö</p>
<div class="highlight"><pre><span></span><code>redis-cli<span class="w"> </span>shutdown
</code></pre></div>
<p>Â¶ÇÊûú Redis ËÆæÁΩÆÂØÜÁ†ÅÔºåÈúÄË¶ÅÁôªÂΩï Redis ÂêéÂÖàËÆ§ËØÅÂÜç <code>shutdown</code> ÂëΩ‰ª§ÂÖ≥Èó≠Ôºö</p>
<div class="highlight"><pre><span></span><code>auth<span class="w"> </span>&lt;ÂØÜÁ†Å&gt;
</code></pre></div>
<h5 id="redis_1">Redis Â∑•ÂÖ∑<a class="headerlink" href="#redis_1" title="Permanent link">&para;</a></h5>
<p>Redis ÊÄßËÉΩÊµãËØïÂ∑•ÂÖ∑Ôºö</p>
<div class="highlight"><pre><span></span><code>redis-benchmark
</code></pre></div>
<p>aof Êñá‰ª∂‰øÆÂ§çÂ∑•ÂÖ∑Ôºö</p>
<div class="highlight"><pre><span></span><code>redis-check-aof
</code></pre></div>
<p>rdb Êñá‰ª∂Ê£ÄÊü•Â∑•ÂÖ∑Ôºö</p>
<div class="highlight"><pre><span></span><code>redis-check-dump
</code></pre></div>
<h4 id="232">2.3.2„ÄÅÂ∏∏Áî®ÂëΩ‰ª§<a class="headerlink" href="#232" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>ÂëΩ‰ª§</th>
<th>ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>select [db_index]</code></td>
<td>ÂàáÊç¢Âà∞ db_index Âè∑Êï∞ÊçÆÂ∫ìÔºåRedis ÈªòËÆ§ 16 ‰∏™Êï∞ÊçÆÂ∫ìÔºåÈªòËÆ§ÊòØ‰ΩøÁî®Á¨¨ 0 ‰∏™</td>
</tr>
<tr>
<td><code>dbsize</code></td>
<td>Êü•ÁúãÊï∞ÊçÆÂ∫ìÂ§ßÂ∞è</td>
</tr>
<tr>
<td><code>keys *</code></td>
<td>Êü•ÁúãÊâÄÊúâÁöÑÈîÆ</td>
</tr>
<tr>
<td><code>flushdb</code></td>
<td>Ê∏ÖÁ©∫ÂΩìÂâçÊï∞ÊçÆÂ∫ì</td>
</tr>
<tr>
<td><code>flushall</code></td>
<td>Ê∏ÖÁ©∫ÊâÄÊúâÊï∞ÊçÆÂ∫ì</td>
</tr>
<tr>
<td><code>move [key] [db_index]</code></td>
<td>ÂΩìÂâçÊï∞ÊçÆÂ∫ìÁöÑ key ÁßªÂä®Âà∞ÁªôÂÆöÁöÑÊï∞ÊçÆÂ∫ì db_index ÂΩì‰∏≠</td>
</tr>
<tr>
<td><code>expire [key] [second]</code></td>
<td>ËÆæÁΩÆËØ• key Âú® second ÁßíÂêéËøáÊúü</td>
</tr>
<tr>
<td><code>ttl [key]</code></td>
<td>ÊòæÁ§∫ key ÁöÑÂâ©‰ΩôÊúâÊïàÊó∂Èó¥Ôºàtime to live Â≠òÊ¥ªÊó∂Èó¥Ôºâ</td>
</tr>
<tr>
<td><code>type [key]</code></td>
<td>ÊòæÁ§∫ key ÁöÑÁ±ªÂûã</td>
</tr>
<tr>
<td><code>exists [key]</code></td>
<td>Êü•Áúã key ÊòØÂê¶Â≠òÂú®Ôºå1 Ë°®Á§∫Â≠òÂú®Ôºå0 Ë°®Á§∫‰∏çÂ≠òÂú®</td>
</tr>
<tr>
<td><code>del [key]</code></td>
<td>Âà†Èô§ËØ• key</td>
</tr>
</tbody>
</table>
<h2 id="3">3„ÄÅ‰∫îÂ§ßÊï∞ÊçÆÁ±ªÂûã<a class="headerlink" href="#3" title="Permanent link">&para;</a></h2>
<p>Redis ÊòØ‰∏Ä‰∏™ÂºÄÊ∫êÔºàBSDËÆ∏ÂèØÔºâÁöÑÔºåÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÁªìÊûÑÂ≠òÂÇ®Á≥ªÁªüÔºåÂÆÉÂèØ‰ª•Áî®‰ΩúÊï∞ÊçÆÂ∫ì„ÄÅÁºìÂ≠òÂíåÊ∂àÊÅØ‰∏≠Èó¥‰ª∂„ÄÇ ÂÆÉÊîØÊåÅÂ§öÁßçÁ±ªÂûãÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂ¶Ç Â≠óÁ¨¶‰∏≤ÔºàstringsÔºâÔºå Êï£ÂàóÔºàhashesÔºâÔºå ÂàóË°®ÔºàlistsÔºâÔºå ÈõÜÂêàÔºàsetsÔºâÔºå ÊúâÂ∫èÈõÜÂêàÔºàsorted setsÔºâ ‰∏éËåÉÂõ¥Êü•ËØ¢Ôºå bitmapsÔºå hyperloglogs Âíå Âú∞ÁêÜÁ©∫Èó¥ÔºàgeospatialÔºâ Á¥¢ÂºïÂçäÂæÑÊü•ËØ¢„ÄÇ Redis ÂÜÖÁΩÆ‰∫Ü Â§çÂà∂ÔºàreplicationÔºâÔºåLUAËÑöÊú¨ÔºàLua scriptingÔºâÔºå LRUÈ©±Âä®‰∫ã‰ª∂ÔºàLRU evictionÔºâÔºå‰∫ãÂä°ÔºàtransactionsÔºâ Âíå‰∏çÂêåÁ∫ßÂà´ÁöÑ Á£ÅÁõòÊåÅ‰πÖÂåñÔºàpersistenceÔºâÔºå Âπ∂ÈÄöËøá RedisÂì®ÂÖµÔºàSentinelÔºâÂíåËá™Âä®ÂàÜÂå∫ÔºàClusterÔºâÊèê‰æõÈ´òÂèØÁî®ÊÄßÔºàhigh availabilityÔºâ„ÄÇ</p>
<h3 id="31string">3.1„ÄÅStringÔºàÂ≠óÁ¨¶‰∏≤Ôºâ<a class="headerlink" href="#31string" title="Permanent link">&para;</a></h3>
<p>string ÊòØ redis ÊúÄÂü∫Êú¨ÁöÑÁ±ªÂûãÔºåÂèØ‰ª•ÁêÜËß£Êàê‰∏é Memcached ‰∏ÄÊ®°‰∏ÄÊ†∑ÁöÑÁ±ªÂûãÔºå‰∏Ä‰∏™ key ÂØπÂ∫î‰∏Ä‰∏™ value„ÄÇvalue ÂÖ∂ÂÆû‰∏ç‰ªÖÊòØ StringÔºå‰πüÂèØ‰ª•ÊòØÊï∞Â≠ó„ÄÇstring Á±ªÂûãÊòØ‰∫åËøõÂà∂ÂÆâÂÖ®ÁöÑ„ÄÇÊÑèÊÄùÊòØ redis ÁöÑ string ÂèØ‰ª•ÂåÖÂê´‰ªª‰ΩïÊï∞ÊçÆ„ÄÇÊØîÂ¶Ç jpg ÂõæÁâáÊàñËÄÖÂ∫èÂàóÂåñÁöÑÂØπË±°„ÄÇstring Á±ªÂûãÊòØ Redis ÊúÄÂü∫Êú¨ÁöÑÊï∞ÊçÆÁ±ªÂûãÔºåstring Á±ªÂûãÁöÑÂÄºÊúÄÂ§ßËÉΩÂ≠òÂÇ® 512MB„ÄÇ</p>
<p>Â∏∏Áî®ÂëΩ‰ª§Ôºö<code>get</code>„ÄÅ<code>set</code>„ÄÅ<code>incr</code>„ÄÅ<code>decr</code>„ÄÅ<code>mget</code> Á≠â„ÄÇ</p>
<p>Â∫îÁî®Âú∫ÊôØÔºöString ÊòØÊúÄÂ∏∏Áî®ÁöÑ‰∏ÄÁßçÊï∞ÊçÆÁ±ªÂûãÔºåÊôÆÈÄöÁöÑ key / value Â≠òÂÇ®ÈÉΩÂèØ‰ª•ÂΩí‰∏∫Ê≠§Á±ªÔºåÂç≥ÂèØ‰ª•ÂÆåÂÖ®ÂÆûÁé∞ÁõÆÂâç Memcached ÁöÑÂäüËÉΩÔºåÂπ∂‰∏îÊïàÁéáÊõ¥È´ò„ÄÇËøòÂèØ‰ª•‰∫´Âèó Redis ÁöÑÂÆöÊó∂ÊåÅ‰πÖÂåñÔºåÊìç‰ΩúÊó•ÂøóÂèä Replication Á≠âÂäüËÉΩ„ÄÇ</p>
<p>‰ΩøÁî®Âú∫ÊôØÔºöÂ∏∏ËßÑ key-value ÁºìÂ≠òÂ∫îÁî®„ÄÇÂ∏∏ËßÑËÆ°Êï∞ÔºöÂæÆÂçöÊï∞ÔºåÁ≤â‰∏ùÊï∞„ÄÇ</p>
<p><strong>ËøΩÂä†Â≠óÁ¨¶‰∏≤</strong></p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>key1<span class="w"> </span>v1<span class="w"> </span><span class="c1"># ËÆæÁΩÆÂÄº</span>
OK
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>get<span class="w"> </span>key1<span class="w"> </span><span class="c1"># Ëé∑ÂèñÂÄº</span>
<span class="s2">&quot;v1&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>keys<span class="w"> </span>*<span class="w"> </span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;key1&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>exists<span class="w"> </span>key1
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>append<span class="w"> </span>key1<span class="w"> </span><span class="s1">&#39;hello&#39;</span><span class="w"> </span><span class="c1"># ËøΩÂä†Â≠óÁ¨¶‰∏≤ÔºåÂ¶ÇÊûúÂΩìÂâç key ‰∏çÂ≠òÂú®ÔºåÂ∞±Áõ∏ÂΩì‰∫é set key</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">7</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>get<span class="w"> </span>key1
<span class="s2">&quot;v1hello&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>strlen<span class="w"> </span>key1<span class="w"> </span><span class="c1"># Ëé∑ÂèñÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">7</span>
</code></pre></div>
<p><strong>ËÆ°Êï∞Âô®</strong></p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>views<span class="w"> </span><span class="m">0</span>
OK
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>get<span class="w"> </span>views
<span class="s2">&quot;0&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>incr<span class="w"> </span>views<span class="w"> </span><span class="c1"># Ëá™Â¢û 1</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>incr<span class="w"> </span>views
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">2</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>incrby<span class="w"> </span>views<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="c1"># Ëá™Â¢û 10</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">12</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>decr<span class="w"> </span>views<span class="w"> </span><span class="c1"># Ëá™Âáè 1</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">11</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>decrby<span class="w"> </span>views<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="c1"># Ëá™Âáè 10</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
<p><strong>Êà™ÂèñÂ≠óÁ¨¶‰∏≤</strong></p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>key1<span class="w"> </span><span class="s1">&#39;Orihcalcos&#39;</span>
OK
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>get<span class="w"> </span>key1
<span class="s2">&quot;Orihcalcos&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>getrange<span class="w"> </span>key1<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="c1"># Êà™ÂèñÂ≠óÁ¨¶‰∏≤ [2,3]ÔºåÂ∞Ü get Êîπ‰∏∫ set ÂàôË°®Á§∫ÊõøÊç¢</span>
<span class="s2">&quot;ih&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>getrange<span class="w"> </span>key1<span class="w"> </span><span class="m">2</span><span class="w"> </span>-1<span class="w"> </span><span class="c1"># Â¶ÇÊûú end ÂèÇÊï∞‰∏∫ -1 ÂàôË°®Á§∫Êà™ÂèñÂÆå</span>
<span class="s2">&quot;ihcalcos&quot;</span>
</code></pre></div>
<p><strong>ÊúâÊïàÊó∂Èó¥</strong></p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>setex<span class="w"> </span>key<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="s1">&#39;Orichalcos&#39;</span><span class="w"> </span><span class="c1"># ËÆæÁΩÆËøáÊúüÊó∂Èó¥ Ôºàset expireÔºâ</span>
OK
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>ttl<span class="w"> </span>key
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>ttl<span class="w"> </span>key
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span>-2
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>setnx<span class="w"> </span>mykey<span class="w"> </span><span class="s1">&#39;redis&#39;</span><span class="w"> </span><span class="c1"># ‰∏çÂ≠òÂú®ÂàôËÆæÁΩÆÔºàset not existÔºâ</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>setnx<span class="w"> </span>mykey<span class="w"> </span><span class="s1">&#39;Orichalcos&#39;</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">0</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>get<span class="w"> </span>mykey
<span class="s2">&quot;redis&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>get<span class="w"> </span>key
<span class="o">(</span>nil<span class="o">)</span>
</code></pre></div>
<p><strong>Áæ§‰ΩìÂØºÂÖ•</strong></p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>mset<span class="w"> </span>k1<span class="w"> </span>v1<span class="w"> </span>k2<span class="w"> </span>v2<span class="w"> </span><span class="c1"># Áæ§‰ΩìÂØºÂÖ•</span>
OK
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>msetnx<span class="w"> </span>k1<span class="w"> </span>v1<span class="w"> </span>k3<span class="w"> </span>v3<span class="w"> </span><span class="c1"># msetnx ÂÖ∑ÊúâÂéüÂ≠êÊÄß</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
<p><strong>ÂØπË±°</strong></p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>user:1<span class="w"> </span><span class="o">{</span>name:zhangsan,age:3<span class="o">}</span><span class="w"> </span><span class="c1"># ËÆæÁΩÆ‰∏Ä‰∏™ user:1 ÂØπË±°Ôºå‰ΩøÁî® json Â≠óÁ¨¶Êù•‰øùÂ≠ò‰∏Ä‰∏™ÂØπË±°</span>
OK
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>mset<span class="w"> </span>user:1:name<span class="w"> </span>zhangsan<span class="w"> </span>user:1:age<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="c1"># user:{id}:{filed}</span>
OK
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>mget<span class="w"> </span>user:1:name<span class="w"> </span>user:1:age
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;zhangsan&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;2&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>get<span class="w"> </span>user:1
<span class="s2">&quot;{name:zhangsan,age:3}&quot;</span>
</code></pre></div>
<p><strong>getset</strong></p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>getset<span class="w"> </span>db<span class="w"> </span>redis<span class="w"> </span><span class="c1"># Â¶ÇÊûú‰∏çÂ≠òÂú®ÂÄºÔºåÂàôËøîÂõû nil</span>
<span class="o">(</span>nil<span class="o">)</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>get<span class="w"> </span>db
<span class="s2">&quot;redis&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>getset<span class="w"> </span>db<span class="w"> </span>mongodb<span class="w"> </span><span class="c1"># Â¶ÇÊûúÂ≠òÂú®ÂÄºÔºåËé∑ÂèñÂéüÊù•ÁöÑÂÄºÔºåÂπ∂ËÆæÁΩÆÊñ∞ÁöÑÂÄº</span>
<span class="s2">&quot;redis&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>get<span class="w"> </span>db
<span class="s2">&quot;mongodb&quot;</span>
</code></pre></div>
<h3 id="32list">3.2„ÄÅListÔºàÂàóË°®Ôºâ<a class="headerlink" href="#32list" title="Permanent link">&para;</a></h3>
<p>ÂàóË°®ÊòØÁÆÄÂçïÁöÑÂ≠óÁ¨¶‰∏≤ÂàóË°®ÔºåÊåâÁÖßÊèíÂÖ•È°∫Â∫èÊéíÂ∫è„ÄÇÂèØ‰ª•Ê∑ªÂä†‰∏Ä‰∏™ÂÖÉÁ¥†Âà∞ÂàóË°®ÁöÑÂ§¥ÈÉ®ÔºàÂ∑¶ËæπÔºâÊàñËÄÖÂ∞æÈÉ®ÔºàÂè≥ËæπÔºâ„ÄÇ</p>
<p>Â∏∏Áî®ÂëΩ‰ª§Ôºö<code>lpush</code>ÔºàÊ∑ªÂä†Â∑¶ËæπÂÖÉÁ¥†ÔºâÔºå<code>rpush</code>Ôºå<code>lpop</code>ÔºàÁßªÈô§Â∑¶ËæπÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÔºâÔºå<code>rpop</code>Ôºå<code>lrange</code>ÔºàËé∑ÂèñÂàóË°®ÁâáÊÆµÔºåLrange key start stopÔºâÁ≠â„ÄÇ</p>
<p>Â∫îÁî®Âú∫ÊôØÔºöRedis list ÁöÑÂ∫îÁî®Âú∫ÊôØÈùûÂ∏∏Â§öÔºå‰πüÊòØ Redis ÊúÄÈáçË¶ÅÁöÑÊï∞ÊçÆÁªìÊûÑ‰πã‰∏ÄÔºåÊØîÂ¶Ç twitter ÁöÑÂÖ≥Ê≥®ÂàóË°®ÔºåÁ≤â‰∏ùÂàóË°®Á≠âÈÉΩÂèØ‰ª•Áî® Redis ÁöÑ list ÁªìÊûÑÊù•ÂÆûÁé∞„ÄÇ</p>
<p>ÂÆûÁé∞ÊñπÂºèÔºöRedis ÁöÑ list ÊòØÊØè‰∏™Â≠êÂÖÉÁ¥†ÈÉΩÊòØ String Á±ªÂûãÁöÑÂèåÂêëÈìæË°®ÔºåÂèØ‰ª•ÈÄöËøá <code>push</code> Âíå <code>pop</code> Êìç‰Ωú‰ªéÂàóË°®ÁöÑÂ§¥ÈÉ®ÊàñËÄÖÂ∞æÈÉ®Ê∑ªÂä†ÊàñËÄÖÂà†Èô§ÂÖÉÁ¥†ÔºåÂèØ‰ª•ÊîØÊåÅÂèçÂêëÊü•ÊâæÂíåÈÅçÂéÜÔºåËøôÊ†∑ List Êó¢ÂèØ‰ª•‰Ωú‰∏∫Ê†àÔºå‰πüÂèØ‰ª•‰Ωú‰∏∫ÈòüÂàóÔºå‰∏çËøáÂ∏¶Êù•‰∫ÜÈÉ®ÂàÜÈ¢ùÂ§ñÁöÑÂÜÖÂ≠òÂºÄÈîÄ„ÄÇËé∑ÂèñË∂äÊé•Ëøë‰∏§Á´ØÁöÑÂÖÉÁ¥†ÈÄüÂ∫¶Ë∂äÂø´ÔºåÈÄöËøáÁ¥¢ÂºïËÆøÈóÆÊó∂‰ºöÊØîËæÉÊÖ¢„ÄÇRedis ÂÜÖÈÉ®ÁöÑÂæàÂ§öÂÆûÁé∞ÔºåÂåÖÊã¨ÂèëÈÄÅÁºìÂÜ≤ÈòüÂàóÁ≠â‰πüÈÉΩÊòØÁî®ÁöÑËøô‰∏™Êï∞ÊçÆÁªìÊûÑ„ÄÇ</p>
<p>‰ΩøÁî®Âú∫ÊôØÔºö</p>
<ul>
<li>Ê∂àÊÅØÈòüÂàóÁ≥ªÁªüÔºö‰ΩøÁî® list ÂèØ‰ª•ÊûÑÂª∫ÈòüÂàóÁ≥ªÁªüÔºåËΩªÊùæÂú∞ÂÆûÁé∞ÊúÄÊñ∞Ê∂àÊÅØÊéíË°åÁ≠âÂäüËÉΩ„ÄÇÂà©Áî® List ÁöÑ <code>push</code> Êìç‰ΩúÔºåÂ∞Ü‰ªªÂä°Â≠òÂú® List ‰∏≠ÔºåÁÑ∂ÂêéÂ∑•‰ΩúÁ∫øÁ®ãÂÜçÁî® <code>pop</code> Êìç‰ΩúÂ∞Ü‰ªªÂä°ÂèñÂá∫ËøõË°åÊâßË°åÔºå‰ΩøÁî® sorted set ÁîöËá≥ÂèØ‰ª•ÊûÑÂª∫Êúâ‰ºòÂÖàÁ∫ßÁöÑÈòüÂàóÁ≥ªÁªü„ÄÇÊØîÂ¶ÇÔºöÂ∞Ü Redis Áî®‰ΩúÊó•ÂøóÊî∂ÈõÜÂô®ÔºåÂÆûÈôÖ‰∏äËøòÊòØ‰∏Ä‰∏™ÈòüÂàóÔºåÂ§ö‰∏™Á´ØÁÇπÂ∞ÜÊó•Âøó‰ø°ÊÅØÂÜôÂÖ• RedisÔºåÁÑ∂Âêé‰∏Ä‰∏™ worker Áªü‰∏ÄÂ∞ÜÊâÄÊúâÊó•ÂøóÂÜôÂà∞Á£ÅÁõò„ÄÇ</li>
<li>ÂèñÊúÄÊñ∞ N ‰∏™Êï∞ÊçÆÁöÑÊìç‰ΩúÔºöËÆ∞ÂΩïÂâç N ‰∏™ÊúÄÊñ∞ÁôªÈôÜÁöÑÁî®Êà∑ Id ÂàóË°®ÔºåË∂ÖÂá∫ÁöÑËåÉÂõ¥ÂèØ‰ª•‰ªéÊï∞ÊçÆÂ∫ì‰∏≠Ëé∑Âæó„ÄÇ</li>
</ul>
<p>ÂàóË°®ÊúÄÂ§öÂèØÂ≠òÂÇ® 2^32^ - 1 ÂÖÉÁ¥† (4294967295, ÊØè‰∏™ÂàóË°®ÂèØÂ≠òÂÇ®40Â§ö‰∫ø)„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lpush<span class="w"> </span>list<span class="w"> </span>one<span class="w"> </span><span class="c1"># Â∞Ü‰∏Ä‰∏™ÂÄºÊàñÂ§ö‰∏™ÂÄºÊèíÂÖ•Âà∞ÂàóË°®Â§¥ÈÉ®ÔºàÂ∑¶Ôºâ</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lpush<span class="w"> </span>list<span class="w"> </span>two
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">2</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lpush<span class="w"> </span>list<span class="w"> </span>three
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">3</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lrange<span class="w"> </span>list<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1<span class="w"> </span><span class="c1"># Ëé∑Âèñ list ‰∏≠ÊâÄÊúâÁöÑÂÄº</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;three&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;two&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;one&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lrange<span class="w"> </span>list<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="c1"># ÈÄöËøáÂå∫Èó¥Ëé∑ÂèñÂÖ∑‰ΩìÁöÑÂÄº [0,1]</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;three&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;two&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>rpush<span class="w"> </span>list<span class="w"> </span>zero<span class="w"> </span><span class="c1"># Â∞Ü‰∏Ä‰∏™ÂÄºÊàñÂ§ö‰∏™ÂÄºÊèíÂÖ•Âà∞ÂàóË°®Â∞æÈÉ®ÔºàÂè≥Ôºâ</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">4</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lrange<span class="w"> </span>list<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;three&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;two&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;one&quot;</span>
<span class="m">4</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;zero&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lrange<span class="w"> </span>list<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;three&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;two&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;one&quot;</span>
<span class="m">4</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;zero&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lpop<span class="w"> </span>list<span class="w"> </span><span class="c1"># ÁßªÈô§ list ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†</span>
<span class="s2">&quot;three&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>rpop<span class="w"> </span>list<span class="w"> </span><span class="c1"># ÁßªÈô§ list ÁöÑÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†</span>
<span class="s2">&quot;zero&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lrange<span class="w"> </span>list<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;two&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;one&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lrange<span class="w"> </span>list<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;two&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;one&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lindex<span class="w"> </span>list<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="c1"># ÈÄöËøá‰∏ãÊ†áËé∑Âèñ list ‰∏≠ÁöÑÊüê‰∏Ä‰∏™ÂÄº</span>
<span class="s2">&quot;one&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lindex<span class="w"> </span>list<span class="w"> </span><span class="m">0</span>
<span class="s2">&quot;two&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>llen<span class="w"> </span>list<span class="w"> </span><span class="c1"># ËøîÂõûÂàóË°®ÁöÑÈïøÂ∫¶</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">2</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lrange<span class="w"> </span>list<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;three&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;three&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;two&quot;</span>
<span class="m">4</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;one&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lrem<span class="w"> </span>list<span class="w"> </span><span class="m">1</span><span class="w"> </span>three<span class="w"> </span><span class="c1"># Âà†Èô§ list ‰∏≠ÁöÑ‰∏Ä‰∏™ keyÔºà1 ‰∏çÊòØ‰∏ãÊ†áËÄåÊòØÊï∞ÈáèÔºå‰ªéÂ∑¶ÂºÄÂßãÂà†Èô§Ôºâ</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lrange<span class="w"> </span>list<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;three&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;two&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;one&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lrange<span class="w"> </span>mylist<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello3&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello2&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello1&quot;</span>
<span class="m">4</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>ltrim<span class="w"> </span>mylist<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="c1"># ÈÄöËøá‰∏ãÊ†áÊà™ÂèñÊåáÂÆöÈïøÂ∫¶ÁöÑ listÔºåËøô‰∏™ list Â∞ÜË¢´ÊîπÂèòÔºålrange ‰∏ç‰ºöÊîπÂèòÂéü list</span>
OK
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lrange<span class="w"> </span>mylist<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello2&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello1&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lrange<span class="w"> </span>mylist<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello2&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello1&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>rpoplpush<span class="w"> </span>mylist<span class="w"> </span>myotherlist<span class="w"> </span><span class="c1"># ÁßªÈô§ÂàóË°®ÁöÑÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÂ∞ÜÂÆÉÁßªÂä®Âà∞Êñ∞ÁöÑÂàóË°®‰∏≠</span>
<span class="s2">&quot;hello1&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lrange<span class="w"> </span>mylist<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello2&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lrange<span class="w"> </span>myotherlist<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello1&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lrange<span class="w"> </span>list<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;v3&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;v2&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;v1&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lset<span class="w"> </span>list<span class="w"> </span><span class="m">0</span><span class="w"> </span>vv<span class="w"> </span><span class="c1"># ÊõøÊç¢ÊéâÊåáÂÆö‰∏ãÊ†áÁöÑÂÄºÔºålist Âíå index ÈÉΩÂøÖÈ°ªÂ≠òÂú®ÔºåÂê¶ÂàôÊä•Èîô</span>
OK
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lrange<span class="w"> </span>list<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;vv&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;v2&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;v1&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>rpush<span class="w"> </span>list<span class="w"> </span>hello
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>rpush<span class="w"> </span>list<span class="w"> </span>world
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">2</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lrange<span class="w"> </span>list<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;world&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>linsert<span class="w"> </span>list<span class="w"> </span>before<span class="w"> </span><span class="s1">&#39;world&#39;</span><span class="w"> </span>my<span class="w"> </span><span class="c1"># Âú®Êüê‰∏™ÂÖÉÁ¥† ‰πãÂâç/‰πãÂêé ÊèíÂÖ•Êñ∞ÁöÑÂÖÉÁ¥†</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">3</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>lrange<span class="w"> </span>list<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;my&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;world&quot;</span>
</code></pre></div>
<h3 id="33set">3.3„ÄÅSetÔºàÈõÜÂêàÔºâ<a class="headerlink" href="#33set" title="Permanent link">&para;</a></h3>
<p>Redis set ÊòØ string Á±ªÂûãÁöÑÊó†Â∫èÈõÜÂêà„ÄÇÈõÜÂêàÊòØÈÄöËøá intset Âíå hashtable ÂÆûÁé∞ÁöÑÔºåÊ¶ÇÂøµÂíåÊï∞Â≠¶‰∏≠‰∏™ÁöÑÈõÜÂêàÂü∫Êú¨Á±ª‰ººÔºåÂèØ‰ª•‰∫§ÈõÜÔºåÂπ∂ÈõÜÔºåÂ∑ÆÈõÜÁ≠âÁ≠âÔºåset ‰∏≠ÁöÑÂÖÉÁ¥†ÊòØÊ≤°ÊúâÈ°∫Â∫èÁöÑ„ÄÇÊâÄ‰ª•Ê∑ªÂä†ÔºåÂà†Èô§ÔºåÊü•ÊâæÁöÑÂ§çÊùÇÂ∫¶ÈÉΩÊòØO(1)„ÄÇ</p>
<p>Â∏∏Áî®ÂëΩ‰ª§Ôºö<code>sadd</code>Ôºå<code>spop</code>Ôºå<code>smembers</code>Ôºå<code>sunion</code> Á≠â„ÄÇ</p>
<p>Â∫îÁî®Âú∫ÊôØÔºöRedis set ÂØπÂ§ñÊèê‰æõÁöÑÂäüËÉΩ‰∏é list Á±ª‰ººÊòØ‰∏Ä‰∏™ÂàóË°®ÁöÑÂäüËÉΩÔºåÁâπÊÆä‰πãÂ§ÑÂú®‰∫é set ÊòØÂèØ‰ª•Ëá™Âä®ÊéíÈáçÁöÑÔºåÂΩìÈúÄË¶ÅÂ≠òÂÇ®‰∏Ä‰∏™ÂàóË°®Êï∞ÊçÆÔºåÂèà‰∏çÂ∏åÊúõÂá∫Áé∞ÈáçÂ§çÊï∞ÊçÆÊó∂Ôºåset ÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÈÄâÊã©ÔºåÂπ∂‰∏î set Êèê‰æõ‰∫ÜÂà§Êñ≠Êüê‰∏™ÊàêÂëòÊòØÂê¶Âú®‰∏Ä‰∏™ set ÈõÜÂêàÂÜÖÁöÑÈáçË¶ÅÊé•Âè£ÔºåËøô‰∏™‰πüÊòØ list ÊâÄ‰∏çËÉΩÊèê‰æõÁöÑ„ÄÇ</p>
<p>Ê°à‰æãÔºöÂú®ÂæÆÂçö‰∏≠ÔºåÂèØ‰ª•Â∞Ü‰∏Ä‰∏™Áî®Êà∑ÊâÄÊúâÁöÑÂÖ≥Ê≥®‰∫∫Â≠òÂú®‰∏Ä‰∏™ÈõÜÂêà‰∏≠ÔºåÂ∞ÜÂÖ∂ÊâÄÊúâÁ≤â‰∏ùÂ≠òÂú®‰∏Ä‰∏™ÈõÜÂêà„ÄÇRedisËøò‰∏∫ÈõÜÂêàÊèê‰æõ‰∫ÜÊ±Ç‰∫§ÈõÜ„ÄÅÂπ∂ÈõÜ„ÄÅÂ∑ÆÈõÜÁ≠âÊìç‰ΩúÔºåÂèØ‰ª•ÈùûÂ∏∏Êñπ‰æøÁöÑÂÆûÁé∞Â¶ÇÂÖ±ÂêåÂÖ≥Ê≥®„ÄÅÂÖ±ÂêåÂñúÂ•Ω„ÄÅ‰∫åÂ∫¶Â•ΩÂèãÁ≠âÂäüËÉΩÔºåÂØπ‰∏äÈù¢ÁöÑÊâÄÊúâÈõÜÂêàÊìç‰ΩúÔºåËøòÂèØ‰ª•‰ΩøÁî®‰∏çÂêåÁöÑÂëΩ‰ª§ÈÄâÊã©Â∞ÜÁªìÊûúËøîÂõûÁªôÂÆ¢Êà∑Á´ØËøòÊòØÂ≠òÈõÜÂà∞‰∏Ä‰∏™Êñ∞ÁöÑÈõÜÂêà‰∏≠„ÄÇ</p>
<p>ÈõÜÂêà‰∏≠ÊúÄÂ§ßÁöÑÊàêÂëòÊï∞‰∏∫ 2^32^ - 1(4294967295, ÊØè‰∏™ÈõÜÂêàÂèØÂ≠òÂÇ®40Â§ö‰∫ø‰∏™ÊàêÂëò)„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>sadd<span class="w"> </span>myset<span class="w"> </span>hello<span class="w"> </span><span class="c1"># ÈõÜÂêà‰∏≠Ê∑ªÂä†ÂÖÉÁ¥†ÔºåÊàêÂäüËøîÂõû1ÔºåÂ¶ÇÊûúÂÖÉÁ¥†Â∑≤ÁªèÂú®ÈõÜÂêà‰∏≠ËøîÂõû 0ÔºåÂ¶ÇÊûú key ÂØπÂ∫îÁöÑ set ‰∏çÂ≠òÂú®ÂàôËøîÂõûÈîôËØØ</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>sadd<span class="w"> </span>myset<span class="w"> </span>orichalcos
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>sadd<span class="w"> </span>myset<span class="w"> </span>hello_orichalcos
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>smembers<span class="w"> </span>myset<span class="w"> </span><span class="c1"># Êü•ÁúãÊåáÂÆö set ÁöÑÊâÄÊúâÂÄº</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello_orichalcos&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;orichalcos&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>sismember<span class="w"> </span>myset<span class="w"> </span>hello<span class="w"> </span><span class="c1"># Âà§Êñ≠Êüê‰∏Ä‰∏™ÂÄºÊòØ‰∏çÊòØÂú® set ÈõÜÂêà‰∏≠</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>sismember<span class="w"> </span>myset<span class="w"> </span>hell
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">0</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>scard<span class="w"> </span>myset<span class="w"> </span><span class="c1"># Ëé∑Âèñ set ÈõÜÂêà‰∏≠ÁöÑÂÜÖÂÆπÂÖÉÁ¥†‰∏™Êï∞</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">3</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>smembers<span class="w"> </span>myset
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello_orichalcos&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;orichalcos&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hei&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>srem<span class="w"> </span>myset<span class="w"> </span>hei<span class="w"> </span><span class="c1"># ÁßªÈô§ set ÈõÜÂêà‰∏≠ÁöÑÊåáÂÆöÂÖÉÁ¥†</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>smembers<span class="w"> </span>myset
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello_orichalcos&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;orichalcos&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>srandmember<span class="w"> </span>myset<span class="w"> </span><span class="c1"># ÈöèÊú∫ÊäΩÂá∫‰∏Ä‰∏™ÂÖÉÁ¥†</span>
<span class="s2">&quot;hello_orichalcos&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>srandmember<span class="w"> </span>myset
<span class="s2">&quot;hello_world&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>srandmember<span class="w"> </span>myset<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="c1"># ÈöèÊú∫ÊäΩÂá∫ÊåáÂÆö‰∏™Êï∞ÁöÑÂÖÉÁ¥†</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello_world&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>sadd<span class="w"> </span>mylist<span class="w"> </span>hello
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>sadd<span class="w"> </span>mylist<span class="w"> </span>world
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>sadd<span class="w"> </span>mylist<span class="w"> </span>orichalcos
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>spop<span class="w"> </span>mylist<span class="w"> </span><span class="c1"># ÈöèÊú∫Âà†Èô§‰∏Ä‰∏™ÂÖÉÁ¥†</span>
<span class="s2">&quot;orichalcos&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>smembers<span class="w"> </span>mylist
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;orichalcos&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;world&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>smove<span class="w"> </span>mylist<span class="w"> </span>myset<span class="w"> </span>orichalcos<span class="w"> </span><span class="c1"># Â∞Ü‰∏Ä‰∏™ÊåáÂÆöÁöÑÂÄºÔºåÁßªÂä®Âà∞Âè¶‰∏Ä‰∏™ set ÈõÜÂêà‰∏≠</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>smembers<span class="w"> </span>myset
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;orichalcos&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">## ÂèØ‰ª•Áî®‰∫éÂÖ±ÂêåÂÖ≥Ê≥®ÔºåÂÖ±ÂêåÁà±Â•ΩÔºåÊé®ËçêÂ•ΩÂèã</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>sadd<span class="w"> </span>key1<span class="w"> </span>a<span class="w"> </span>b<span class="w"> </span>c
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">3</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>sadd<span class="w"> </span>key2<span class="w"> </span>c<span class="w"> </span>d<span class="w"> </span>e
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">3</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>sdiff<span class="w"> </span>key1<span class="w"> </span>key2<span class="w"> </span><span class="c1"># Â∑ÆÈõÜ</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;b&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;a&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>sinter<span class="w"> </span>key1<span class="w"> </span>key2<span class="w"> </span><span class="c1"># ‰∫§ÈõÜ</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;c&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>sunion<span class="w"> </span>key1<span class="w"> </span>key2<span class="w"> </span><span class="c1"># Âπ∂ÈõÜ</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;b&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;c&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;d&quot;</span>
<span class="m">4</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;a&quot;</span>
<span class="m">5</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;e&quot;</span>
</code></pre></div>
<h3 id="34hash">3.4„ÄÅHashÔºàÂìàÂ∏åÔºâ<a class="headerlink" href="#34hash" title="Permanent link">&para;</a></h3>
<p>Redis hash ÊòØ‰∏Ä‰∏™ÈîÆÂÄº (key =&gt; value) ÂØπÈõÜÂêà„ÄÇRedis hash ÊòØ‰∏Ä‰∏™ string Á±ªÂûãÁöÑ field Âíå value ÁöÑÊò†Â∞ÑË°®Ôºåhash ÁâπÂà´ÈÄÇÂêàÁî®‰∫éÂ≠òÂÇ®ÂØπË±°„ÄÇ</p>
<p>Â∏∏Áî®ÂëΩ‰ª§Ôºö<code>hget</code>Ôºå<code>hset</code>Ôºå<code>hgetall</code> Á≠â„ÄÇ</p>
<p>‰ΩøÁî®Âú∫ÊôØÔºöÂ≠òÂÇ®ÈÉ®ÂàÜÂèòÊõ¥Êï∞ÊçÆÔºåÂ¶ÇÁî®Êà∑‰ø°ÊÅØÁ≠â„ÄÇÊØè‰∏™ hash ÂèØ‰ª•Â≠òÂÇ® 2^32^ -1 ÈîÆÂÄºÂØπÔºà40Â§ö‰∫øÔºâ„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>hset<span class="w"> </span>myhash<span class="w"> </span>field1<span class="w"> </span>orichalcos<span class="w"> </span><span class="c1"># set ‰∏Ä‰∏™ÂÖ∑‰Ωì key-value</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>hget<span class="w"> </span>myhash<span class="w"> </span>field1<span class="w"> </span><span class="c1"># Ëé∑Âèñ‰∏Ä‰∏™Â≠óÊÆµÂÄº</span>
<span class="s2">&quot;orichalcos&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>hmset<span class="w"> </span>myhash<span class="w"> </span>field2<span class="w"> </span>hello<span class="w"> </span>field3<span class="w"> </span>world<span class="w"> </span><span class="c1"># set Â§ö‰∏™ key-value</span>
OK
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>hmget<span class="w"> </span>myhash<span class="w"> </span>field2<span class="w"> </span>field3<span class="w"> </span><span class="c1"># Ëé∑ÂèñÂ§ö‰∏™Â≠óÊÆµÂÄº</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;world&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>hgetall<span class="w"> </span>myhash<span class="w"> </span><span class="c1"># Ëé∑ÂèñÂÖ®ÈÉ®ÁöÑÊï∞ÊçÆ</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;field1&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;orichalcos&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;field2&quot;</span>
<span class="m">4</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span>
<span class="m">5</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;field3&quot;</span>
<span class="m">6</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;world&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>hdel<span class="w"> </span>myhash<span class="w"> </span>field1<span class="w"> </span><span class="c1"># Âà†Èô§ hash ÊåáÂÆö key Â≠óÊÆµÔºåvalue ‰πü‰ºöÊ∂àÂ§±</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>hgetall<span class="w"> </span>myhash<span class="w"> </span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;field2&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;field3&quot;</span>
<span class="m">4</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;world&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>hgetall<span class="w"> </span>myhash
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;field2&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;field3&quot;</span>
<span class="m">4</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;world&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>hlen<span class="w"> </span>myhash<span class="w"> </span><span class="c1"># Ëé∑Âèñ hash Ë°®ÁöÑÂ≠óÊÆµÊï∞Èáè</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">2</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>hexists<span class="w"> </span>myhash<span class="w"> </span>field1<span class="w"> </span><span class="c1"># Âà§Êñ≠ hash ‰∏≠ÊåáÂÆöÂ≠óÊÆµÊòØÂê¶Â≠òÂú®</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">0</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>hexists<span class="w"> </span>myhash<span class="w"> </span>field2
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>hkeys<span class="w"> </span>myhash<span class="w"> </span><span class="c1"># Ëé∑ÂèñÊâÄÊúâÁöÑ field</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;field2&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;field3&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>hvals<span class="w"> </span>myhash<span class="w"> </span><span class="c1"># Ëé∑ÂèñÊâÄÊúâÁöÑ value</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;world&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>hset<span class="w"> </span>myash<span class="w"> </span>field4<span class="w"> </span><span class="m">5</span><span class="w"> </span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>hget<span class="w"> </span>myash<span class="w"> </span>field4
<span class="s2">&quot;5&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>hincrby<span class="w"> </span>myash<span class="w"> </span>field4<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="c1"># ÊåáÂÆöÂ¢ûÈáè</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">6</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>hsetnx<span class="w"> </span>myhash<span class="w"> </span>field4<span class="w"> </span>hello<span class="w"> </span><span class="c1"># Â¶ÇÊûú‰∏çÂ≠òÂú®ÂàôÂèØ‰ª•ËÆæÁΩÆ</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>hsetnx<span class="w"> </span>myhash<span class="w"> </span>field4<span class="w"> </span>hello
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
<p>‚Äã   </p>
<h3 id="35zset">3.5„ÄÅZsetÔºàÊúâÂ∫èÈõÜÂêàÔºâ<a class="headerlink" href="#35zset" title="Permanent link">&para;</a></h3>
<p>Redis zset Âíå set ‰∏ÄÊ†∑‰πüÊòØstringÁ±ªÂûãÂÖÉÁ¥†ÁöÑÈõÜÂêà,‰∏î‰∏çÂÖÅËÆ∏ÈáçÂ§çÁöÑÊàêÂëò„ÄÇ</p>
<p>Â∏∏Áî®ÂëΩ‰ª§Ôºö<code>zadd</code>Ôºå<code>zrange</code>Ôºå<code>zrem</code>Ôºå<code>zcard</code> Á≠â</p>
<p>‰ΩøÁî®Âú∫ÊôØÔºöRedis sorted set ÁöÑ‰ΩøÁî®Âú∫ÊôØ‰∏é set Á±ª‰ººÔºåÂå∫Âà´ÊòØ set ‰∏çÊòØËá™Âä®ÊúâÂ∫èÁöÑÔºåËÄå sorted set ÂèØ‰ª•ÈÄöËøáÁî®Êà∑È¢ùÂ§ñÊèê‰æõ‰∏Ä‰∏™‰ºòÂÖàÁ∫ß (score) ÁöÑÂèÇÊï∞Êù•‰∏∫ÊàêÂëòÊéíÂ∫èÔºåÂπ∂‰∏îÊòØÊèíÂÖ•ÊúâÂ∫èÁöÑÔºåÂç≥Ëá™Âä®ÊéíÂ∫è„ÄÇÂΩìÈúÄË¶Å‰∏Ä‰∏™ÊúâÂ∫èÁöÑÂπ∂‰∏î‰∏çÈáçÂ§çÁöÑÈõÜÂêàÂàóË°®ÔºåÈÇ£‰πàÂèØ‰ª•ÈÄâÊã© sorted set Êï∞ÊçÆÁªìÊûÑÔºåÊØîÂ¶Ç twitter ÁöÑ public timeline ÂèØ‰ª•‰ª•ÂèëË°®Êó∂Èó¥‰Ωú‰∏∫ score Êù•Â≠òÂÇ®ÔºåËøôÊ†∑Ëé∑ÂèñÊó∂Â∞±ÊòØËá™Âä®ÊåâÊó∂Èó¥ÊéíÂ•ΩÂ∫èÁöÑ„ÄÇÂíå Set Áõ∏ÊØîÔºåSorted Set ÂÖ≥ËÅî‰∫Ü‰∏Ä‰∏™ double Á±ªÂûãÊùÉÈáçÂèÇÊï∞scoreÔºå‰ΩøÂæóÈõÜÂêà‰∏≠ÁöÑÂÖÉÁ¥†ËÉΩÂ§üÊåâ score ËøõË°åÊúâÂ∫èÊéíÂàóÔºåredis Ê≠£ÊòØÈÄöËøáÂàÜÊï∞Êù•‰∏∫ÈõÜÂêà‰∏≠ÁöÑÊàêÂëòËøõË°å‰ªéÂ∞èÂà∞Â§ßÁöÑÊéíÂ∫è„ÄÇzset ÁöÑÊàêÂëòÊòØÂîØ‰∏ÄÁöÑÔºå‰ΩÜÂàÜÊï∞(score) Âç¥ÂèØ‰ª•ÈáçÂ§ç„ÄÇÊØîÂ¶Ç‰∏Ä‰∏™Â≠òÂÇ®ÂÖ®Áè≠ÂêåÂ≠¶ÊàêÁª©ÁöÑ Sorted SetÔºåÂÖ∂ÈõÜÂêà value ÂèØ‰ª•ÊòØÂêåÂ≠¶ÁöÑÂ≠¶Âè∑ÔºåËÄå score Â∞±ÂèØ‰ª•ÊòØÂÖ∂ËÄÉËØïÂæóÂàÜÔºåËøôÊ†∑Âú®Êï∞ÊçÆÊèíÂÖ•ÈõÜÂêàÁöÑÊó∂ÂÄôÔºåÂ∞±Â∑≤ÁªèËøõË°å‰∫ÜÂ§©ÁÑ∂ÁöÑÊéíÂ∫è„ÄÇÂè¶Â§ñËøòÂèØ‰ª•Áî® Sorted Set Êù•ÂÅöÂ∏¶ÊùÉÈáçÁöÑÈòüÂàóÔºåÊØîÂ¶ÇÊôÆÈÄöÊ∂àÊÅØÁöÑ score ‰∏∫1ÔºåÈáçË¶ÅÊ∂àÊÅØÁöÑ score ‰∏∫2ÔºåÁÑ∂ÂêéÂ∑•‰ΩúÁ∫øÁ®ãÂèØ‰ª•ÈÄâÊã©Êåâ score ÁöÑÂÄíÂ∫èÊù•Ëé∑ÂèñÂ∑•‰Ωú‰ªªÂä°„ÄÇËÆ©ÈáçË¶ÅÁöÑ‰ªªÂä°‰ºòÂÖàÊâßË°å„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>zadd<span class="w"> </span>myset<span class="w"> </span><span class="m">1</span><span class="w"> </span>one<span class="w"> </span><span class="c1"># Ê∑ªÂä†‰∏Ä‰∏™ÂÄº</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>zadd<span class="w"> </span>myset<span class="w"> </span><span class="m">2</span><span class="w"> </span>two<span class="w"> </span><span class="m">3</span><span class="w"> </span>threee<span class="w"> </span><span class="c1"># Ê∑ªÂä†Â§ö‰∏™ÂÄº</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">2</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>zrange<span class="w"> </span>myset<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;one&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;two&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;threee&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>zadd<span class="w"> </span>salary<span class="w"> </span><span class="m">2500</span><span class="w"> </span>xiaohong<span class="w"> </span><span class="m">2000</span><span class="w"> </span>zhangsan<span class="w"> </span><span class="m">500</span><span class="w"> </span>Orichalcos
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">3</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>zrange<span class="w"> </span>salary<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;Orichalcos&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;zhangsan&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;xiaohong&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>zrangebyscore<span class="w"> </span>salary<span class="w"> </span>-inf<span class="w"> </span>+inf<span class="w"> </span><span class="c1"># ÊòæÁ§∫ÊâÄÊúâÂÄº ‰ªéÂ∞èÂà∞Â§ß</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;Orichalcos&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;zhangsan&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;xiaohong&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>zrevrangebyscore<span class="w"> </span>salary<span class="w"> </span>+inf<span class="w"> </span>-inf<span class="w"> </span><span class="c1">#ÊòæÁ§∫ÊâÄÊúâÂÄº ‰ªéÂ§ßÂà∞Â∞è</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;xiaohong&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;zhangsan&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;Orichalcos&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>zrangebyscore<span class="w"> </span>salary<span class="w"> </span>-inf<span class="w"> </span>+inf<span class="w"> </span>withscores<span class="w"> </span><span class="c1"># ÊòæÁ§∫ÊâÄÊúâ‰ø°ÊÅØ ‰ªéÂ∞èÂà∞Â§ß</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;Orichalcos&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;500&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;zhangsan&quot;</span>
<span class="m">4</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;2000&quot;</span>
<span class="m">5</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;xiaohong&quot;</span>
<span class="m">6</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;2500&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>zrange<span class="w"> </span>salary<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;Orichalcos&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;zhangsan&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;xiaohong&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>zrem<span class="w"> </span>salary<span class="w"> </span>xiaohong<span class="w"> </span><span class="c1"># Âà†Èô§ÊåáÂÆöÂÖÉÁ¥†</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>zrange<span class="w"> </span>salary<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;Orichalcos&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;zhangsan&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>zcard<span class="w"> </span>salary<span class="w"> </span><span class="c1"># Ëé∑ÂèñÊúâÂ∫èÈõÜÂêà‰∏≠ÁöÑ‰∏™Êï∞</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">2</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>zrange<span class="w"> </span>myset<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;one&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;two&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;threee&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>zcount<span class="w"> </span>myset<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="c1"># Ëé∑ÂèñÊåáÂÆöÂå∫Èó¥ÁöÑÊàêÂëòÊï∞Èáè</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">2</span>
</code></pre></div>
<h2 id="4">4„ÄÅ‰∏âÂ§ßÁâπÊÆäÁ±ªÂûã<a class="headerlink" href="#4" title="Permanent link">&para;</a></h2>
<h3 id="41geospatial">4.1„ÄÅgeospatialÔºàÂú∞ÁêÜ‰ΩçÁΩÆÔºâ<a class="headerlink" href="#41geospatial" title="Permanent link">&para;</a></h3>
<p>ÊúãÂèãÁöÑÂÆö‰ΩçÔºåÈôÑËøëÁöÑ‰∫∫ÔºåÊâìËΩ¶Ë∑ùÁ¶ªÁöÑËÆ°ÁÆóÔºü</p>
<p>Reids ÁöÑ Geo Âú® Reids 3.2 ÁâàÊú¨Â∞±Êé®Âá∫‰∫ÜÔºÅËøô‰∏™ÂäüËÉΩÂèØ‰ª•Êé®ÁÆóÂú∞ÁêÜ‰ΩçÁΩÆÁöÑ‰ø°ÊÅØÔºå‰∏§Âú∞‰πãÈó¥ÁöÑË∑ùÁ¶ªÔºåÊñπÂúÜÂá†ÈáåÁöÑ‰∫∫„ÄÇ</p>
<p>Âè™ÊúâÂÖ≠‰∏™ÂëΩ‰ª§Ôºö</p>
<ul>
<li><code>geoadd</code></li>
<li><code>geodist</code></li>
<li><code>geohash</code></li>
<li><code>geopos</code></li>
<li><code>georadius</code></li>
<li><code>georadiusbymember</code></li>
</ul>
<p><strong>geoadd</strong></p>
<p>Ê∑ªÂä†Âú∞ÁêÜ‰ΩçÁΩÆÔºåËßÑÂàôÔºö‰∏§Á∫ßÊó†Ê≥ïÁõ¥Êé•Ê∑ªÂä†ÔºåÊàë‰ª¨‰∏ÄËà¨‰ºö‰∏ãËΩΩÂüéÂ∏ÇÊï∞ÊçÆÔºåÁõ¥Êé•ÈÄöËøá java Á®ãÂ∫è‰∏ÄÊ¨°ÊÄßÂØºÂÖ•ÔºÅ</p>
<p>ÊúâÊïàÁöÑÁªèÂ∫¶‰ªé -180 Â∫¶Âà∞ 180 Â∫¶ÔºåÊúâÊïàÁöÑÁ∫¨Â∫¶‰ªé -85.05112878 Â∫¶Âà∞ 85.05112878 Â∫¶ÔºåÂΩìÂùêÊ†á‰ΩçÁΩÆË∂ÖÂá∫‰∏äËØâÊåáÂÆöËåÉÂõ¥Êó∂ÔºåËØ•ÂëΩ‰ª§Â∞Ü‰ºöËøîÂõû‰∏Ä‰∏™ÈîôËØØ„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>geoadd<span class="w"> </span>china:city<span class="w"> </span><span class="m">116</span>.40<span class="w"> </span><span class="m">39</span>.90<span class="w"> </span>beijing
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>geoadd<span class="w"> </span>china:city<span class="w"> </span><span class="m">121</span>.47<span class="w"> </span><span class="m">31</span>.23<span class="w"> </span>shanghai
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>geoadd<span class="w"> </span>china:city<span class="w"> </span><span class="m">106</span>.50<span class="w"> </span><span class="m">29</span>.53<span class="w"> </span>chongqi<span class="w"> </span><span class="m">114</span>.05<span class="w"> </span><span class="m">22</span>.52<span class="w"> </span>shenzhen
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">2</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>geoadd<span class="w"> </span>china:city<span class="w"> </span><span class="m">120</span>.16<span class="w"> </span><span class="m">30</span>.24<span class="w"> </span>hangzhou<span class="w"> </span><span class="m">108</span>.96<span class="w"> </span><span class="m">34</span>.26<span class="w"> </span>xian
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">2</span><span class="w"> </span>
</code></pre></div>
<p><strong>geopos</strong></p>
<p>Ëé∑ÂèñÂΩìÂâçÂÆö‰ΩçÔºå‰∏ÄÂÆöÊòØ‰∏Ä‰∏™ÂùêÊ†áÂÄº„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>geopos<span class="w"> </span>china:city<span class="w"> </span>beijing
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;116.39999896287918091&quot;</span>
<span class="w">   </span><span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;39.90000009167092543&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>geopos<span class="w"> </span>china:city<span class="w"> </span>hangzhou
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;120.1600000262260437&quot;</span>
<span class="w">   </span><span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;30.2400003229490224&quot;</span>
</code></pre></div>
<p><strong>geodist</strong></p>
<p>‰∏§‰∫∫‰πãÈó¥ÁöÑË∑ùÁ¶ª„ÄÇ</p>
<p>Âçï‰ΩçÔºö</p>
<ul>
<li><strong>m</strong> Ë°®Á§∫Âçï‰Ωç‰∏∫ Á±≥„ÄÇ</li>
<li><strong>km</strong> Ë°®Á§∫Âçï‰Ωç‰∏∫ ÂçÉÁ±≥„ÄÇ</li>
<li><strong>mi</strong> Ë°®Á§∫Âçï‰Ωç‰∏∫ Ëã±Èáå„ÄÇ</li>
<li><strong>ft</strong> Ë°®Á§∫Âçï‰Ωç‰∏∫ Ëã±Â∞∫„ÄÇ</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>geodist<span class="w"> </span>china:city<span class="w"> </span>beijing<span class="w"> </span>chongqi
<span class="s2">&quot;1464070.8051&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>geodist<span class="w"> </span>china:city<span class="w"> </span>beijing<span class="w"> </span>chongqi<span class="w"> </span>km
<span class="s2">&quot;1464.0708&quot;</span>
</code></pre></div>
<p><strong>georadius</strong></p>
<p>‰ª•ÁªôÂÆöÁöÑÁöÑÁªèÂ∫¶Á∫¨Â∫¶‰∏∫‰∏≠ÂøÉÔºåÊâæÂá∫Êüê‰∏ÄÂçäÂæÑÂÜÖÁöÑÂÖÉÁ¥†„ÄÇ</p>
<p>ÊàëÈôÑËøëÁöÑ‰∫∫Ôºü</p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>georadius<span class="w"> </span>china:city<span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">1000</span><span class="w"> </span>km<span class="w"> </span><span class="c1"># ‰ª• 100Ôºå30 Ëøô‰∏™ÁªèÁ∫¨Â∫¶‰∏∫‰∏≠ÂøÉÔºåÂØªÊâæ 1000km ÂÜÖÁöÑÂüéÂ∏Ç</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;chongqi&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;xian&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>georadius<span class="w"> </span>china:city<span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">1000</span><span class="w"> </span>km<span class="w"> </span>withdist<span class="w"> </span><span class="c1"># ÊòæÁ§∫Âà∞‰∏≠ÂøÉÁöÑË∑ùÁ¶ª</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;chongqi&quot;</span>
<span class="w">   </span><span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;629.6756&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;xian&quot;</span>
<span class="w">   </span><span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;967.2846&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>georadius<span class="w"> </span>china:city<span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">1000</span><span class="w"> </span>km<span class="w"> </span>withcoord<span class="w"> </span><span class="c1"># ÊòæÁ§∫‰ªñ‰∫∫ÁöÑÂÆö‰Ωç‰ø°ÊÅØ</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;chongqi&quot;</span>
<span class="w">   </span><span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;106.49999767541885376&quot;</span>
<span class="w">      </span><span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;29.52999957900659211&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;xian&quot;</span>
<span class="w">   </span><span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;108.96000176668167114&quot;</span>
<span class="w">      </span><span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;34.25999964418929977&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>georadius<span class="w"> </span>china:city<span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">1000</span><span class="w"> </span>km<span class="w"> </span>withcoord<span class="w"> </span>count<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="c1"># Á≠õÈÄâÂá∫ÊåáÂÆöÁöÑÁªìÊûú</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;chongqi&quot;</span>
<span class="w">   </span><span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;106.49999767541885376&quot;</span>
<span class="w">      </span><span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;29.52999957900659211&quot;</span>
</code></pre></div>
<p><strong>georadiusbymember</strong></p>
<p>ÊâæÂá∫‰Ωç‰∫éÊåáÂÆöÂÖÉÁ¥†Âë®Âõ¥ÁöÑÂÖ∂‰ªñÂÖÉÁ¥†„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>georadiusbymember<span class="w"> </span>china:city<span class="w"> </span>beijing<span class="w"> </span><span class="m">1000</span><span class="w"> </span>km
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;beijing&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;xian&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>georadiusbymember<span class="w"> </span>china:city<span class="w"> </span>shanghai<span class="w"> </span><span class="m">1000</span><span class="w"> </span>km
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hangzhou&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;shanghai&quot;</span>
</code></pre></div>
<p><strong>geohash</strong></p>
<p>ËØ•ÂëΩ‰ª§Â∞ÜËøîÂõû11‰∏™Â≠óÁ¨¶ÁöÑGeohashÂ≠óÁ¨¶‰∏≤„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>geohash<span class="w"> </span>china:city<span class="w"> </span>beijing<span class="w"> </span>chongqi
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;wx4fbxxfke0&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;wm5xzrybty0&quot;</span>
</code></pre></div>
<p>GEO Â∫ïÂ±ÇÁöÑÂÆûÁé∞ÂéüÁêÜÂÖ∂ÂÆûÂ∞±ÊòØ ZsetÔºåÂèØ‰ª•‰ΩøÁî® Zset ÂëΩ‰ª§Êù•Êìç‰Ωú geo„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>zrange<span class="w"> </span>china:city<span class="w"> </span><span class="m">0</span><span class="w"> </span>-1
<span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;chongqi&quot;</span>
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;xian&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;shenzhen&quot;</span>
<span class="m">4</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;hangzhou&quot;</span>
<span class="m">5</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;shanghai&quot;</span>
<span class="m">6</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;beijing&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>zrem<span class="w"> </span>china:city<span class="w"> </span>xian
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
<h3 id="42hyperloglog">4.2„ÄÅhyperloglog<a class="headerlink" href="#42hyperloglog" title="Permanent link">&para;</a></h3>
<p>Redis Hyperloglog Âü∫Êï∞ÁªüËÆ°ÁÆóÊ≥ï„ÄÇ</p>
<p>‰ºòÁÇπÔºöÂç†Áî®ÂÜÖÂ≠òÊòØÂõ∫ÂÆöÁöÑÔºå2^64^ ‰∏çÂêåÁöÑÂÖÉÁ¥†ÁöÑÂè™ÈúÄË¶Å 12KB ÁöÑÂÜÖÂ≠òÔºåÂ¶ÇÊûúÂè™Ë¶Å‰ªéÂÜÖÂ≠òËßíÂ∫¶Êù•ÊØîËæÉÁöÑËØù Hyperloglog È¶ñÈÄâ„ÄÇ</p>
<p>‰º†ÁªüÁöÑÊñπÂºèÔºåset ‰øùÂ≠òÁî®Êà∑ÁöÑ idÔºåÁÑ∂ÂêéÂ∞±ÂèØ‰ª•ÁªüËÆ° set ‰∏≠ÁöÑÂÖÉÁ¥†ÁöÑÊï∞Èáè‰Ωú‰∏∫Ê†áÂáÜÂà§Êñ≠ÔºÅËøô‰∏™ÊñπÂºèÂ¶ÇÊûú‰øùÂ≠òÂ§ßÈáèÁöÑÁî®Êà∑ idÔºåÂ∞±‰ºöÊØîËæÉÈ∫ªÁÉ¶ÔºåÂõ†‰∏∫ÁõÆÁöÑÊòØ‰∏∫‰∫ÜËÆ°Êï∞ÔºåËÄå‰∏çÊòØ‰øùÂ≠òÁî®Êà∑ idÔºõÂπ∂‰∏îÂÖ∑Êúâ 0.81% ÁöÑÈîôËØØÁéáÔºå‰ΩÜÊòØÂ¶ÇÊûúÊòØÁî®‰∫é UV ‰ªªÂä°ÔºåËøô‰∏™ÂèØ‰ª•ÂøΩÁï•‰∏çËÆ∞„ÄÇ</p>
<blockquote>
<p><strong>UVÔºàUnique visitorÔºâ</strong>
ÊòØÊåáÈÄöËøá‰∫íËÅîÁΩëËÆøÈóÆ„ÄÅÊµèËßàËøô‰∏™ÁΩëÈ°µÁöÑËá™ÁÑ∂‰∫∫„ÄÇËÆøÈóÆÊÇ®ÁΩëÁ´ôÁöÑ‰∏ÄÂè∞ÁîµËÑëÂÆ¢Êà∑Á´Ø‰∏∫‰∏Ä‰∏™ËÆøÂÆ¢„ÄÇ00:00-24:00ÂÜÖÁõ∏ÂêåÁöÑÂÆ¢Êà∑Á´ØÂè™Ë¢´ËÆ°ÁÆó‰∏ÄÊ¨°„ÄÇ</p>
<p>‰∏ÄÂ§©ÂÜÖÂêå‰∏™ËÆøÂÆ¢Â§öÊ¨°ËÆøÈóÆ‰ªÖËÆ°ÁÆó‰∏Ä‰∏™UV„ÄÇ</p>
<p><strong>IPÔºàInternet ProtocolÔºâ</strong>
Áã¨Á´ãIPÊòØÊåáËÆøÈóÆËøáÊüêÁ´ôÁÇπÁöÑIPÊÄªÊï∞Ôºå‰ª•Áî®Êà∑ÁöÑIPÂú∞ÂùÄ‰Ωú‰∏∫ÁªüËÆ°‰æùÊçÆ„ÄÇ00:00-24:00ÂÜÖÁõ∏ÂêåIPÂú∞ÂùÄ‰πãË¢´ËÆ°ÁÆó‰∏ÄÊ¨°„ÄÇ</p>
<p><strong>UV‰∏éIPÂå∫Âà´Ôºö</strong>
Â¶ÇÔºö‰Ω†Âíå‰Ω†ÁöÑÂÆ∂‰∫∫Áî®ÂêÑËá™ÁöÑË¥¶Âè∑Âú®Âêå‰∏ÄÂè∞ÁîµËÑë‰∏äÁôªÂΩïÊñ∞Êµ™ÂæÆÂçöÔºåÂàôIPÊï∞+1ÔºåUVÊï∞+2„ÄÇÁî±‰∫é‰ΩøÁî®ÁöÑÊòØÂêå‰∏ÄÂè∞ÁîµËÑëÔºåÊâÄ‰ª•IP‰∏çÂèòÔºå‰ΩÜ‰ΩøÁî®ÁöÑ‰∏çÂêåË¥¶Âè∑ÔºåÊâÄ‰ª•UV+2</p>
<p><strong>PVÔºàPage ViewÔºâ</strong>
Âç≥È°µÈù¢ÊµèËßàÈáèÊàñÁÇπÂáªÈáèÔºåÁî®Êà∑ÊØè1Ê¨°ÂØπÁΩëÁ´ô‰∏≠ÁöÑÊØè‰∏™ÁΩëÈ°µËÆøÈóÆÂùáË¢´ËÆ∞ÂΩï1‰∏™PV„ÄÇÁî®Êà∑ÂØπÂêå‰∏ÄÈ°µÈù¢ÁöÑÂ§öÊ¨°ËÆøÈóÆÔºåËÆøÈóÆÈáèÁ¥ØËÆ°ÔºåÁî®‰ª•Ë°°ÈáèÁΩëÁ´ôÁî®Êà∑ËÆøÈóÆÁöÑÁΩëÈ°µÊï∞Èáè„ÄÇ</p>
<p><strong>VVÔºàVisit ViewÔºâ</strong>
Áî®‰ª•ÁªüËÆ°ÊâÄÊúâËÆøÂÆ¢1Â§©ÂÜÖËÆøÈóÆÁΩëÁ´ôÁöÑÊ¨°Êï∞„ÄÇÂΩìËÆøÂÆ¢ÂÆåÊàêÊâÄÊúâÊµèËßàÂπ∂ÊúÄÁªàÂÖ≥ÊéâËØ•ÁΩëÁ´ôÁöÑÊâÄÊúâÈ°µÈù¢Êó∂‰æøÂÆåÊàê‰∫Ü‰∏ÄÊ¨°ËÆøÈóÆÔºåÂêå‰∏ÄËÆøÂÆ¢1Â§©ÂÜÖÂèØËÉΩÊúâÂ§öÊ¨°ËÆøÈóÆË°å‰∏∫ÔºåËÆøÈóÆÊ¨°Êï∞Á¥ØËÆ°„ÄÇ</p>
<p><strong>PV‰∏éVVÂå∫Âà´Ôºö</strong>
Â¶ÇÔºö‰Ω†‰ªäÂ§©10ÁÇπÈíüÊâìÂºÄ‰∫ÜÁôæÂ∫¶ÔºåËÆøÈóÆ‰∫ÜÂÆÉÁöÑ‰∏â‰∏™È°µÈù¢Ôºõ11ÁÇπÈíüÂèàÊâìÂºÄ‰∫ÜÁôæÂ∫¶ÔºåËÆøÈóÆ‰∫ÜÂÆÉÁöÑ‰∏§‰∏™È°µÈù¢ÔºåÂàôPVÊï∞+5ÔºåVVÊï∞+2.
PVÊòØÊåáÈ°µÈù¢ÁöÑÊµèËßàÊ¨°Êï∞ÔºåVVÊòØÊåá‰Ω†ËÆøÈóÆÁΩëÁ´ôÁöÑÊ¨°Êï∞„ÄÇ</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>pfadd<span class="w"> </span>mykey<span class="w"> </span>a<span class="w"> </span>b<span class="w"> </span>c<span class="w"> </span>d<span class="w"> </span>e<span class="w"> </span>f<span class="w"> </span>g<span class="w"> </span>h<span class="w"> </span>i<span class="w"> </span>j<span class="w"> </span><span class="c1"># ÂàõÂª∫Á¨¨‰∏ÄÁªÑÂÖÉÁ¥† mykey</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>pfcount<span class="w"> </span>mykey<span class="w"> </span><span class="c1"># ÁªüËÆ° mykey ÂÖÉÁ¥†ÁöÑÂü∫Êï∞Êï∞Èáè</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">10</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>pfadd<span class="w"> </span>mykey2<span class="w"> </span>i<span class="w"> </span>j<span class="w"> </span>z<span class="w"> </span>x<span class="w"> </span>c<span class="w"> </span>v<span class="w"> </span>b<span class="w"> </span>n<span class="w"> </span>m<span class="w"> </span><span class="c1"># ÂàõÂª∫Á¨¨‰∫åÁªÑÂÖÉÁ¥† mykey2</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>pfcount<span class="w"> </span>mykey2
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">9</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>pfmerge<span class="w"> </span>mykey3<span class="w"> </span>mykey<span class="w"> </span>mykey2<span class="w"> </span><span class="c1"># ÂêàÂπ∂‰∏§ÁªÑ</span>
OK
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>pfcount<span class="w"> </span>mykey3
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">15</span>
</code></pre></div>
<h3 id="43bitmap">4.3„ÄÅBitmap<a class="headerlink" href="#43bitmap" title="Permanent link">&para;</a></h3>
<p>ÁªüËÆ°Áî®Êà∑‰ø°ÊÅØÔºåÊ¥ªË∑É-‰∏çÊ¥ªË∑ÉÔºõÁôªÂΩï-Êú™ÁôªÂΩïÔºõÊâìÂç°-Êú™ÊâìÂç°„ÄÇËøôÁßç‰∏§‰∏™Áä∂ÊÄÅÁöÑÔºåÈÉΩÂèØ‰ª•‰ΩøÁî® Bitmaps„ÄÇ</p>
<p>Bitmaps ‰ΩçÂõæÔºåÊï∞ÊçÆÁªìÊûÑÔºÅÈÉΩÊòØÊìç‰Ωú‰∫åËøõÂà∂‰ΩçÊù•ËÆ∞ÂΩïÔºåÂ∞±Âè™Êúâ 0 Âíå 1 ‰∏§‰∏™Áä∂ÊÄÅÔºÅ</p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>setbit<span class="w"> </span>sign<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">0</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>setbit<span class="w"> </span>sign<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">0</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>setbit<span class="w"> </span>sign<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">0</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">0</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>setbit<span class="w"> </span>sign<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">1</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">0</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>setbit<span class="w"> </span>sign<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">1</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">0</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>setbit<span class="w"> </span>sign<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">0</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">0</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>setbit<span class="w"> </span>sign<span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">0</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">0</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>getbit<span class="w"> </span>sign<span class="w"> </span><span class="m">3</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">1</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>getbit<span class="w"> </span>sign<span class="w"> </span><span class="m">6</span>
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">0</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>bitcount<span class="w"> </span>sign
<span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">3</span>
</code></pre></div>
<h2 id="5">5„ÄÅ‰∫ãÂä°<a class="headerlink" href="#5" title="Permanent link">&para;</a></h2>
<p>Redis ÈÄöËøá <code>multi</code>„ÄÅ <code>discard</code> „ÄÅ<code>exec</code> Âíå <code>watch</code> Âõõ‰∏™ÂëΩ‰ª§Êù•ÂÆûÁé∞‰∫ãÂä°ÂäüËÉΩ„ÄÇ</p>
<p>‰∫ãÂä°Êèê‰æõ‰∫Ü‰∏ÄÁßç ‚ÄúÂ∞ÜÂ§ö‰∏™ÂëΩ‰ª§ÊâìÂåÖÔºå ÁÑ∂Âêé‰∏ÄÊ¨°ÊÄß„ÄÅÊåâÈ°∫Â∫èÂú∞ÊâßË°å‚Äù ÁöÑÊú∫Âà∂Ôºå Âπ∂‰∏î‰∫ãÂä°Âú®ÊâßË°åÁöÑÊúüÈó¥‰∏ç‰ºö‰∏ªÂä®‰∏≠Êñ≠ÔºõÊúçÂä°Âô®Âú®ÊâßË°åÂÆå‰∫ãÂä°‰∏≠ÁöÑÊâÄÊúâÂëΩ‰ª§‰πãÂêéÔºå Êâç‰ºöÁªßÁª≠Â§ÑÁêÜÂÖ∂‰ªñÂÆ¢Êà∑Á´ØÁöÑÂÖ∂‰ªñÂëΩ‰ª§„ÄÇ</p>
<p>‰ª•‰∏ãÊòØ‰∏Ä‰∏™‰∫ãÂä°ÁöÑ‰æãÂ≠êÔºå ÂÆÉÂÖà‰ª• <code>multi</code> ÂºÄÂßã‰∏Ä‰∏™‰∫ãÂä°Ôºå ÁÑ∂ÂêéÂ∞ÜÂ§ö‰∏™ÂëΩ‰ª§ÂÖ•ÈòüÂà∞‰∫ãÂä°‰∏≠Ôºå ÊúÄÂêéÁî± <code>exec</code> ÂëΩ‰ª§Ëß¶Âèë‰∫ãÂä°Ôºå ‰∏ÄÂπ∂ÊâßË°å‰∫ãÂä°‰∏≠ÁöÑÊâÄÊúâÂëΩ‰ª§Ôºö</p>
<div class="highlight"><pre><span></span><code>redis&gt;<span class="w"> </span>multi
OK

redis&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>book-name<span class="w"> </span><span class="s2">&quot;Mastering C++ in 21 days&quot;</span>
QUEUED

redis&gt;<span class="w"> </span>get<span class="w"> </span>book-name
QUEUED

redis&gt;<span class="w"> </span>sadd<span class="w"> </span>tag<span class="w"> </span><span class="s2">&quot;C++&quot;</span><span class="w"> </span><span class="s2">&quot;Programming&quot;</span><span class="w"> </span><span class="s2">&quot;Mastering Series&quot;</span>
QUEUED

redis&gt;<span class="w"> </span>smembers<span class="w"> </span>tag
QUEUED

redis&gt;<span class="w"> </span><span class="nb">exec</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span>OK
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;Mastering C++ in 21 days&quot;</span>
<span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="o">(</span>integer<span class="o">)</span><span class="w"> </span><span class="m">3</span>
<span class="m">4</span><span class="o">)</span><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;Mastering Series&quot;</span>
<span class="w">   </span><span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;C++&quot;</span>
<span class="w">   </span><span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;Programming&quot;</span>
</code></pre></div>
<h3 id="51">5.1„ÄÅ‰∫ãÂä°ÁöÑÊµÅÁ®ã<a class="headerlink" href="#51" title="Permanent link">&para;</a></h3>
<p>‰∏Ä‰∏™‰∫ãÂä°‰ªéÂºÄÂßãÂà∞ÊâßË°å‰ºöÁªèÂéÜ‰ª•‰∏ã‰∏â‰∏™Èò∂ÊÆµÔºö</p>
<ol>
<li>ÂºÄÂêØ‰∫ãÂä°Ôºà<code>multi</code>Ôºâ</li>
<li>ÂëΩ‰ª§ÂÖ•Èòü</li>
<li>ÊâßË°å‰∫ãÂä°Ôºà<code>exec</code>Ôºâ</li>
</ol>
<p><strong>ÂºÄÂêØ‰∫ãÂä°</strong></p>
<p><code>multi</code> ÂëΩ‰ª§ÁöÑÊâßË°åÊ†áËÆ∞‰∫ãÂä°ÁöÑÂºÄÂßãÔºö</p>
<div class="highlight"><pre><span></span><code>redis&gt;<span class="w"> </span>multi
OK
</code></pre></div>
<p>Ëøô‰∏™ÂëΩ‰ª§ÂîØ‰∏ÄÂÅöÁöÑÂ∞±ÊòØÔºå Â∞ÜÂÆ¢Êà∑Á´ØÁöÑ REDIS_MULTI ÈÄâÈ°πÊâìÂºÄÔºå ËÆ©ÂÆ¢Êà∑Á´Ø‰ªéÈùû‰∫ãÂä°Áä∂ÊÄÅÂàáÊç¢Âà∞‰∫ãÂä°Áä∂ÊÄÅ„ÄÇ</p>
<p><img src="!assets/Redis/graphviz-0ff9f2e58803dbb8c1c400e1f8191f77d4c2917e.svg" alt="" style="" /></p>
<p>‰∫ãÂä°Áä∂ÊÄÅ‰∏ãÁöÑÂëΩ‰ª§‰ª•Âçï‰∏™ÂëΩ‰ª§‰∏∫Âçï‰ΩçÊâßË°åÔºåÂâç‰∏Ä‰∏™ÂëΩ‰ª§ÂíåÂêé‰∏Ä‰∏™ÂëΩ‰ª§ÁöÑÂÆ¢Êà∑Á´Ø‰∏ç‰∏ÄÂÆöÊòØÂêå‰∏Ä‰∏™ÔºõËÄå‰∫ãÂä°Áä∂ÊÄÅÂàôÊòØ‰ª•‰∏Ä‰∏™‰∫ãÂä°‰∏∫Âçï‰ΩçÔºåÊâßË°å‰∫ãÂä°ÈòüÂàó‰∏≠ÁöÑÊâÄÊúâÂëΩ‰ª§ÔºöÈô§ÈùûÂΩìÂâç‰∫ãÂä°ÊâßË°åÂÆåÊØïÔºåÂê¶ÂàôÊúçÂä°Âô®‰∏ç‰ºö‰∏≠Êñ≠‰∫ãÂä°Ôºå‰πü‰∏ç‰ºöÊâßË°åÂÖ∂‰ªñÂÆ¢Êà∑Á´ØÁöÑÂÖ∂‰ªñÂëΩ‰ª§„ÄÇ</p>
<p><strong>ÂëΩ‰ª§ÂÖ•Èòü</strong></p>
<p>ÂΩìÂÆ¢Êà∑Á´ØÂ§Ñ‰∫éÈùû‰∫ãÂä°Áä∂ÊÄÅ‰∏ãÊó∂Ôºå ÊâÄÊúâÂèëÈÄÅÁªôÊúçÂä°Âô®Á´ØÁöÑÂëΩ‰ª§ÈÉΩ‰ºöÁ´ãÂç≥Ë¢´ÊúçÂä°Âô®ÊâßË°åÔºö</p>
<div class="highlight"><pre><span></span><code>redis&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>msg<span class="w"> </span><span class="s2">&quot;hello moto&quot;</span>
OK

redis&gt;<span class="w"> </span>get<span class="w"> </span>msg
<span class="s2">&quot;hello moto&quot;</span>
</code></pre></div>
<p>‰ΩÜÊòØÔºå ÂΩìÂÆ¢Êà∑Á´ØËøõÂÖ•‰∫ãÂä°Áä∂ÊÄÅ‰πãÂêéÔºå ÊúçÂä°Âô®Âú®Êî∂Âà∞Êù•Ëá™ÂÆ¢Êà∑Á´ØÁöÑÂëΩ‰ª§Êó∂Ôºå ‰∏ç‰ºöÁ´ãÂç≥ÊâßË°åÂëΩ‰ª§Ôºå ËÄåÊòØÂ∞ÜËøô‰∫õÂëΩ‰ª§ÂÖ®ÈÉ®ÊîæËøõ‰∏Ä‰∏™‰∫ãÂä°ÈòüÂàóÈáåÔºå ÁÑ∂ÂêéËøîÂõû QUEUED Ôºå Ë°®Á§∫ÂëΩ‰ª§Â∑≤ÂÖ•ÈòüÔºö</p>
<div class="highlight"><pre><span></span><code>redis&gt;<span class="w"> </span>multi
OK

redis&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>msg<span class="w"> </span><span class="s2">&quot;hello moto&quot;</span>
QUEUED

redis&gt;<span class="w"> </span>get<span class="w"> </span>msg
QUEUED
</code></pre></div>
<p>‰ª•‰∏ãÊµÅÁ®ãÂõæÂ±ïÁ§∫‰∫ÜËøô‰∏ÄË°å‰∏∫Ôºö</p>
<p><img src="!assets/Redis/graphviz-8a0f8eae0bb8180e877b799921dd690267c2d3b4.svg" alt="" style="" /></p>
<p>‰∫ãÂä°ÈòüÂàóÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºå ÊØè‰∏™Êï∞ÁªÑÈ°πÊòØÈÉΩÂåÖÂê´‰∏â‰∏™Â±ûÊÄßÔºö</p>
<ul>
<li>Ë¶ÅÊâßË°åÁöÑÂëΩ‰ª§ÔºàcmdÔºâ</li>
<li>ÂëΩ‰ª§ÁöÑÂèÇÊï∞ÔºàargvÔºâ</li>
<li>ÂèÇÊï∞ÁöÑ‰∏™Êï∞ÔºàargcÔºâ</li>
</ul>
<p>‰∏æ‰∏™‰æãÂ≠êÔºå Â¶ÇÊûúÂÆ¢Êà∑Á´ØÊâßË°å‰ª•‰∏ãÂëΩ‰ª§Ôºö</p>
<div class="highlight"><pre><span></span><code>redis&gt;<span class="w"> </span>multi
OK

redis&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>book-name<span class="w"> </span><span class="s2">&quot;Mastering C++ in 21 days&quot;</span>
QUEUED

redis&gt;<span class="w"> </span>get<span class="w"> </span>book-name
QUEUED

redis&gt;<span class="w"> </span>sadd<span class="w"> </span>tag<span class="w"> </span><span class="s2">&quot;C++&quot;</span><span class="w"> </span><span class="s2">&quot;Programming&quot;</span><span class="w"> </span><span class="s2">&quot;Mastering Series&quot;</span>
QUEUED

redis&gt;<span class="w"> </span>smembers<span class="w"> </span>tag
QUEUED
</code></pre></div>
<p>ÈÇ£‰πàÁ®ãÂ∫èÂ∞Ü‰∏∫ÂÆ¢Êà∑Á´ØÂàõÂª∫‰ª•‰∏ã‰∫ãÂä°ÈòüÂàóÔºö</p>
<table>
<thead>
<tr>
<th>Êï∞ÁªÑÁ¥¢Âºï</th>
<th>cmd</th>
<th>argv</th>
<th>argc</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>set</td>
<td>["book-name", "Mastering C++ in 21 days"]</td>
<td>2</td>
</tr>
<tr>
<td>1</td>
<td>get</td>
<td>["book-name"]</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>sadd</td>
<td>["tag", "C++", "Programming", "Mastering Series"]</td>
<td>4</td>
</tr>
<tr>
<td>3</td>
<td>smembets</td>
<td>["tag"]</td>
<td>1</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Redis ÁöÑ‰∫ãÂä°ÊòØ‰∏çÂèØÂµåÂ•óÁöÑÔºå ÂΩìÂÆ¢Êà∑Á´ØÂ∑≤ÁªèÂ§Ñ‰∫é‰∫ãÂä°Áä∂ÊÄÅÔºå ËÄåÂÆ¢Êà∑Á´ØÂèàÂÜçÂêëÊúçÂä°Âô®ÂèëÈÄÅ <code>multi</code> Êó∂Ôºå ÊúçÂä°Âô®Âè™ÊòØÁÆÄÂçïÂú∞ÂêëÂÆ¢Êà∑Á´ØÂèëÈÄÅ‰∏Ä‰∏™ÈîôËØØÔºå ÁÑ∂ÂêéÁªßÁª≠Á≠âÂæÖÂÖ∂‰ªñÂëΩ‰ª§ÁöÑÂÖ•Èòü„ÄÇ <code>multi</code> ÂëΩ‰ª§ÁöÑÂèëÈÄÅ‰∏ç‰ºöÈÄ†ÊàêÊï¥‰∏™‰∫ãÂä°Â§±Ë¥•Ôºå ‰πü‰∏ç‰ºö‰øÆÊîπ‰∫ãÂä°ÈòüÂàó‰∏≠Â∑≤ÊúâÁöÑÊï∞ÊçÆ„ÄÇ</p>
</blockquote>
<p><strong>ÊâßË°å‰∫ãÂä°</strong></p>
<p>ÂΩìÂÆ¢Êà∑Á´ØËøõÂÖ•‰∫ãÂä°Áä∂ÊÄÅ‰πãÂêéÔºå ÂÆ¢Êà∑Á´ØÂèëÈÄÅÁöÑÂëΩ‰ª§Â∞±‰ºöË¢´ÊîæËøõ‰∫ãÂä°ÈòüÂàóÈáåÔºå‰ΩÜÂÖ∂ÂÆûÂπ∂‰∏çÊòØÊâÄÊúâÁöÑÂëΩ‰ª§ÈÉΩ‰ºöË¢´ÊîæËøõ‰∫ãÂä°ÈòüÂàóÔºå ÂÖ∂‰∏≠ÁöÑ‰æãÂ§ñÂ∞±ÊòØ <code>exec</code>„ÄÅ <code>discard</code>„ÄÅ <code>multi</code> Âíå <code>watch</code> ËøôÂõõ‰∏™ÂëΩ‰ª§ÔºõÂΩìËøôÂõõ‰∏™ÂëΩ‰ª§‰ªéÂÆ¢Êà∑Á´ØÂèëÈÄÅÂà∞ÊúçÂä°Âô®Êó∂Ôºå ÂÆÉ‰ª¨‰ºöÂÉèÂÆ¢Êà∑Á´ØÂ§Ñ‰∫éÈùû‰∫ãÂä°Áä∂ÊÄÅ‰∏ÄÊ†∑Ôºå Áõ¥Êé•Ë¢´ÊúçÂä°Âô®ÊâßË°åÔºö</p>
<p><img src="!assets/Redis/graphviz-836c8a3dc33526a649d9ecf5b7b959d72b38cc7d.svg" alt="" style="" /></p>
<p>Â¶ÇÊûúÂÆ¢Êà∑Á´ØÊ≠£Â§Ñ‰∫é‰∫ãÂä°Áä∂ÊÄÅÔºå ÈÇ£‰πàÂΩì <code>exec</code> ÂëΩ‰ª§ÊâßË°åÊó∂Ôºå ÊúçÂä°Âô®Ê†πÊçÆÂÆ¢Êà∑Á´ØÊâÄ‰øùÂ≠òÁöÑ‰∫ãÂä°ÈòüÂàóÔºå ‰ª•ÂÖàËøõÂÖàÂá∫ÔºàFIFOÔºâÁöÑÊñπÂºèÊâßË°å‰∫ãÂä°ÈòüÂàó‰∏≠ÁöÑÂëΩ‰ª§Ôºö ÊúÄÂÖàÂÖ•ÈòüÁöÑÂëΩ‰ª§ÊúÄÂÖàÊâßË°åÔºå ËÄåÊúÄÂêéÂÖ•ÈòüÁöÑÂëΩ‰ª§ÊúÄÂêéÊâßË°å„ÄÇ</p>
<p>ÊØîÂ¶ÇËØ¥ÔºåÂØπ‰∫é‰ª•‰∏ã‰∫ãÂä°ÈòüÂàóÔºö</p>
<table>
<thead>
<tr>
<th>Êï∞ÁªÑÁ¥¢Âºï</th>
<th>cmd</th>
<th>argv</th>
<th>argc</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>set</td>
<td>["book-name", "Mastering C++ in 21 days"]</td>
<td>2</td>
</tr>
<tr>
<td>1</td>
<td>get</td>
<td>["book-name"]</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>sadd</td>
<td>["tag", "C++", "Programming", "Mastering Series"]</td>
<td>4</td>
</tr>
<tr>
<td>3</td>
<td>smembets</td>
<td>["tag"]</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Á®ãÂ∫è‰ºöÈ¶ñÂÖàÊâßË°å <code>set</code> ÂëΩ‰ª§Ôºå ÁÑ∂ÂêéÊâßË°å <code>get</code> ÂëΩ‰ª§Ôºå ÂÜçÁÑ∂ÂêéÊâßË°å <code>sadd</code> ÂëΩ‰ª§Ôºå ÊúÄÂêéÊâßË°å <code>smembers</code> ÂëΩ‰ª§ÔºåÊâßË°å‰∫ãÂä°‰∏≠ÁöÑÂëΩ‰ª§ÊâÄÂæóÁöÑÁªìÊûú‰ºö‰ª• FIFO ÁöÑÈ°∫Â∫è‰øùÂ≠òÂà∞‰∏Ä‰∏™ÂõûÂ§çÈòüÂàó‰∏≠„ÄÇ</p>
<p>ÊØîÂ¶ÇËØ¥ÔºåÂØπ‰∫é‰∏äÈù¢ÁªôÂá∫ÁöÑ‰∫ãÂä°ÈòüÂàóÔºåÁ®ãÂ∫èÂ∞Ü‰∏∫ÈòüÂàó‰∏≠ÁöÑÂëΩ‰ª§ÂàõÂª∫Â¶Ç‰∏ãÂõûÂ§çÈòüÂàóÔºö</p>
<table>
<thead>
<tr>
<th>Êï∞ÁªÑÁ¥¢Âºï</th>
<th>ÂõûÂ§çÁ±ªÂûã</th>
<th>ÂõûÂ§çÂÜÖÂÆπ</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>status code reply</td>
<td>OK</td>
</tr>
<tr>
<td>1</td>
<td>bulk reply</td>
<td>"Mastering C++ in 21 days"</td>
</tr>
<tr>
<td>2</td>
<td>integer reply</td>
<td>3</td>
</tr>
<tr>
<td>3</td>
<td>multi-bulk reply</td>
<td>["Mastering Series", "C++", "Programming"]</td>
</tr>
</tbody>
</table>
<p>ÂΩì‰∫ãÂä°ÈòüÂàóÈáåÁöÑÊâÄÊúâÂëΩ‰ª§Ë¢´ÊâßË°åÂÆå‰πãÂêéÔºå <code>exec</code> ÂëΩ‰ª§‰ºöÂ∞ÜÂõûÂ§çÈòüÂàó‰Ωú‰∏∫Ëá™Â∑±ÁöÑÊâßË°åÁªìÊûúËøîÂõûÁªôÂÆ¢Êà∑Á´ØÔºå ÂÆ¢Êà∑Á´Ø‰ªé‰∫ãÂä°Áä∂ÊÄÅËøîÂõûÂà∞Èùû‰∫ãÂä°Áä∂ÊÄÅÔºå Ëá≥Ê≠§Ôºå ‰∫ãÂä°ÊâßË°åÂÆåÊØï„ÄÇ</p>
<blockquote>
<p><code>discard</code> ÂëΩ‰ª§Áî®‰∫éÂèñÊ∂à‰∏Ä‰∏™‰∫ãÂä°Ôºå ÂÆÉÊ∏ÖÁ©∫ÂÆ¢Êà∑Á´ØÁöÑÊï¥‰∏™‰∫ãÂä°ÈòüÂàóÔºå ÁÑ∂ÂêéÂ∞ÜÂÆ¢Êà∑Á´Ø‰ªé‰∫ãÂä°Áä∂ÊÄÅË∞ÉÊï¥ÂõûÈùû‰∫ãÂä°Áä∂ÊÄÅÔºå ÊúÄÂêéËøîÂõûÂ≠óÁ¨¶‰∏≤ OK ÁªôÂÆ¢Êà∑Á´ØÔºå ËØ¥Êòé‰∫ãÂä°Â∑≤Ë¢´ÂèñÊ∂à„ÄÇ</p>
</blockquote>
<h3 id="52watch">5.2„ÄÅwatch<a class="headerlink" href="#52watch" title="Permanent link">&para;</a></h3>
<p><code>watch</code> ÂëΩ‰ª§Áî®‰∫éÂú®‰∫ãÂä°ÂºÄÂßã‰πãÂâçÁõëËßÜ‰ªªÊÑèÊï∞ÈáèÁöÑÈîÆÔºö ÂΩìË∞ÉÁî® <code>exec</code> ÂëΩ‰ª§ÊâßË°å‰∫ãÂä°Êó∂Ôºå Â¶ÇÊûú‰ªªÊÑè‰∏Ä‰∏™Ë¢´ÁõëËßÜÁöÑÈîÆÂ∑≤ÁªèË¢´ÂÖ∂‰ªñÂÆ¢Êà∑Á´Ø‰øÆÊîπ‰∫ÜÔºå ÈÇ£‰πàÊï¥‰∏™‰∫ãÂä°‰∏çÂÜçÊâßË°åÔºå Áõ¥Êé•ËøîÂõûÂ§±Ë¥•„ÄÇ</p>
<div class="highlight"><pre><span></span><code>redis&gt;<span class="w"> </span>watch<span class="w"> </span>name
OK

redis&gt;<span class="w"> </span>multi
OK

redis&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>name<span class="w"> </span>peter
QUEUED

redis&gt;<span class="w"> </span><span class="nb">exec</span>
<span class="o">(</span>nil<span class="o">)</span>
</code></pre></div>
<p>‰ª•‰∏ãÊâßË°åÂ∫èÂàóÂ±ïÁ§∫‰∫Ü‰∏äÈù¢ÁöÑ‰æãÂ≠êÊòØÂ¶Ç‰ΩïÂ§±Ë¥•ÁöÑÔºö</p>
<table>
<thead>
<tr>
<th>Êó∂Èó¥</th>
<th>ÂÆ¢Êà∑Á´Ø A</th>
<th>ÂÆ¢Êà∑Á´Ø B</th>
</tr>
</thead>
<tbody>
<tr>
<td>T1</td>
<td>watch name</td>
<td></td>
</tr>
<tr>
<td>T2</td>
<td>multi</td>
<td></td>
</tr>
<tr>
<td>T3</td>
<td>set name peter</td>
<td></td>
</tr>
<tr>
<td>T4</td>
<td></td>
<td>set name john</td>
</tr>
<tr>
<td>T5</td>
<td>exec</td>
<td></td>
</tr>
</tbody>
</table>
<p>Âú®Êó∂Èó¥ T4 ÔºåÂÆ¢Êà∑Á´Ø B ‰øÆÊîπ‰∫Ü name ÈîÆÁöÑÂÄºÔºå ÂΩìÂÆ¢Êà∑Á´Ø A Âú® T5 ÊâßË°å <code>exec</code> Êó∂ÔºåRedis ‰ºöÂèëÁé∞ name Ëøô‰∏™Ë¢´ÁõëËßÜÁöÑÈîÆÂ∑≤ÁªèË¢´‰øÆÊîπÔºå Âõ†Ê≠§ÂÆ¢Êà∑Á´Ø A ÁöÑ‰∫ãÂä°‰∏ç‰ºöË¢´ÊâßË°åÔºåËÄåÊòØÁõ¥Êé•ËøîÂõûÂ§±Ë¥•„ÄÇ</p>
<p><strong>watch ÁöÑÂÆûÁé∞</strong></p>
<p>Âú®ÊØè‰∏™‰ª£Ë°®Êï∞ÊçÆÂ∫ìÁöÑ redis.h/redisDb ÁªìÊûÑÁ±ªÂûã‰∏≠Ôºå ÈÉΩ‰øùÂ≠ò‰∫Ü‰∏Ä‰∏™ watched_keys Â≠óÂÖ∏Ôºå Â≠óÂÖ∏ÁöÑÈîÆÊòØËøô‰∏™Êï∞ÊçÆÂ∫ìË¢´ÁõëËßÜÁöÑÈîÆÔºå ËÄåÂ≠óÂÖ∏ÁöÑÂÄºÂàôÊòØ‰∏Ä‰∏™ÈìæË°®Ôºå ÈìæË°®‰∏≠‰øùÂ≠ò‰∫ÜÊâÄÊúâÁõëËßÜËøô‰∏™ÈîÆÁöÑÂÆ¢Êà∑Á´Ø„ÄÇ</p>
<p>ÊØîÂ¶ÇËØ¥Ôºå‰ª•‰∏ãÂ≠óÂÖ∏Â∞±Â±ïÁ§∫‰∫Ü‰∏Ä‰∏™ watched_keys Â≠óÂÖ∏ÁöÑ‰æãÂ≠êÔºö</p>
<p><img src="!assets/Redis/graphviz-9aea81f33da1373550c590eb0b7ca0c2b3d38366.svg" alt="" style="" /></p>
<p>ÂÖ∂‰∏≠Ôºå ÈîÆ key1 Ê≠£Âú®Ë¢´ client2 „ÄÅ client5 Âíå client1 ‰∏â‰∏™ÂÆ¢Êà∑Á´ØÁõëËßÜÔºå ÂÖ∂‰ªñ‰∏Ä‰∫õÈîÆ‰πüÂàÜÂà´Ë¢´ÂÖ∂‰ªñÂà´ÁöÑÂÆ¢Êà∑Á´ØÁõëËßÜÁùÄ„ÄÇ</p>
<p><code>watch</code> ÂëΩ‰ª§ÁöÑ‰ΩúÁî®Ôºå Â∞±ÊòØÂ∞ÜÂΩìÂâçÂÆ¢Êà∑Á´ØÂíåË¶ÅÁõëËßÜÁöÑÈîÆÂú® watched_keys ‰∏≠ËøõË°åÂÖ≥ËÅî</p>
<p>Â¶ÇÊûúÂΩìÂâçÂÆ¢Êà∑Á´Ø‰∏∫ client10086 Ôºå ÈÇ£‰πàÂΩìÂÆ¢Êà∑Á´ØÊâßË°å <code>watch key1 key2</code> Êó∂Ôºå ÂâçÈù¢Â±ïÁ§∫ÁöÑ watched_keys Â∞ÜË¢´‰øÆÊîπÊàêËøô‰∏™Ê†∑Â≠êÔºö</p>
<p><img src="!assets/Redis/graphviz-fe5e31054c282a3cdd86656994fe1678a3d4f201.svg" alt="" style="" /></p>
<p>ÈÄöËøá watched_keys Â≠óÂÖ∏Ôºå Â¶ÇÊûúÁ®ãÂ∫èÊÉ≥Ê£ÄÊü•Êüê‰∏™ÈîÆÊòØÂê¶Ë¢´ÁõëËßÜÔºå ÈÇ£‰πàÂÆÉÂè™Ë¶ÅÊ£ÄÊü•Â≠óÂÖ∏‰∏≠ÊòØÂê¶Â≠òÂú®Ëøô‰∏™ÈîÆÂç≥ÂèØÔºõ Â¶ÇÊûúÁ®ãÂ∫èË¶ÅËé∑ÂèñÁõëËßÜÊüê‰∏™ÈîÆÁöÑÊâÄÊúâÂÆ¢Êà∑Á´ØÔºå ÈÇ£‰πàÂè™Ë¶ÅÂèñÂá∫ÈîÆÁöÑÂÄºÔºà‰∏Ä‰∏™ÈìæË°®ÔºâÔºå ÁÑ∂ÂêéÂØπÈìæË°®ËøõË°åÈÅçÂéÜÂç≥ÂèØ„ÄÇ</p>
<p><strong>watch ÁöÑËß¶Âèë</strong></p>
<p>Âú®‰ªª‰ΩïÂØπÊï∞ÊçÆÂ∫ìÈîÆÁ©∫Èó¥Ôºàkey spaceÔºâËøõË°å‰øÆÊîπÁöÑÂëΩ‰ª§ÊàêÂäüÊâßË°å‰πãÂêé ÔºàÊØîÂ¶Ç <code>flushdb</code>„ÄÅ <code>set</code>„ÄÅ <code>del</code>„ÄÅ <code>lpush</code>„ÄÅ <code>sadd</code>„ÄÅ <code>zrem</code>ÔºåËØ∏Â¶ÇÊ≠§Á±ªÔºâÔºå multi.c/touchWatchedKey ÂáΩÊï∞ÈÉΩ‰ºöË¢´Ë∞ÉÁî®ÔºõÂÆÉÊ£ÄÊü•Êï∞ÊçÆÂ∫ìÁöÑ watched_keys Â≠óÂÖ∏Ôºå ÁúãÊòØÂê¶ÊúâÂÆ¢Êà∑Á´ØÂú®ÁõëËßÜÂ∑≤ÁªèË¢´ÂëΩ‰ª§‰øÆÊîπÁöÑÈîÆÔºå Â¶ÇÊûúÊúâÁöÑËØùÔºå Á®ãÂ∫èÂ∞ÜÊâÄÊúâÁõëËßÜ Ëøô‰∏™/Ëøô‰∫õ Ë¢´‰øÆÊîπÈîÆÁöÑÂÆ¢Êà∑Á´ØÁöÑ REDIS_DIRTY_CAS ÈÄâÈ°πÊâìÂºÄÔºö</p>
<p><img src="!assets/Redis/graphviz-e5c66122242aa10939b696dfeeb905343c5202bd.svg" alt="" style="" /></p>
<p>ÂΩìÂÆ¢Êà∑Á´ØÂèëÈÄÅ <code>exec</code> ÂëΩ‰ª§„ÄÅËß¶Âèë‰∫ãÂä°ÊâßË°åÊó∂Ôºå ÊúçÂä°Âô®‰ºöÂØπÂÆ¢Êà∑Á´ØÁöÑÁä∂ÊÄÅËøõË°åÊ£ÄÊü•Ôºö</p>
<ul>
<li>Â¶ÇÊûúÂÆ¢Êà∑Á´ØÁöÑ REDIS_DIRTY_CAS ÈÄâÈ°πÂ∑≤ÁªèË¢´ÊâìÂºÄÔºåÈÇ£‰πàËØ¥ÊòéË¢´ÂÆ¢Êà∑Á´ØÁõëËßÜÁöÑÈîÆËá≥Â∞ëÊúâ‰∏Ä‰∏™Â∑≤ÁªèË¢´‰øÆÊîπ‰∫ÜÔºå‰∫ãÂä°ÁöÑÂÆâÂÖ®ÊÄßÂ∑≤ÁªèË¢´Á†¥Âùè„ÄÇÊúçÂä°Âô®‰ºöÊîæÂºÉÊâßË°åËøô‰∏™‰∫ãÂä°ÔºåÁõ¥Êé•ÂêëÂÆ¢Êà∑Á´ØËøîÂõûÁ©∫ÂõûÂ§çÔºåË°®Á§∫‰∫ãÂä°ÊâßË°åÂ§±Ë¥•„ÄÇ</li>
<li>Â¶ÇÊûú REDIS_DIRTY_CAS ÈÄâÈ°πÊ≤°ÊúâË¢´ÊâìÂºÄÔºåÈÇ£‰πàËØ¥ÊòéÊâÄÊúâÁõëËßÜÈîÆÈÉΩÂÆâÂÖ®ÔºåÊúçÂä°Âô®Ê≠£ÂºèÊâßË°å‰∫ãÂä°„ÄÇ</li>
</ul>
<p>‰∏æ‰∏™‰æãÂ≠êÔºåÂÅáËÆæÊï∞ÊçÆÂ∫ìÁöÑ watched_keys Â≠óÂÖ∏Â¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="!assets/Redis/graphviz-9aea81f33da1373550c590eb0b7ca0c2b3d38366.svg" alt="" style="" /></p>
<p>Â¶ÇÊûúÊüê‰∏™ÂÆ¢Êà∑Á´ØÂØπ key1 ËøõË°å‰∫Ü‰øÆÊîπÔºàÊØîÂ¶ÇÊâßË°å DEL key1 ÔºâÔºå ÈÇ£‰πàÊâÄÊúâÁõëËßÜ key1 ÁöÑÂÆ¢Êà∑Á´ØÔºå ÂåÖÊã¨ client2 „ÄÅ client5 Âíå client1 ÁöÑ REDIS_DIRTY_CAS ÈÄâÈ°πÈÉΩ‰ºöË¢´ÊâìÂºÄÔºå ÂΩìÂÆ¢Êà∑Á´Ø client2 „ÄÅ client5 Âíå client1 ÊâßË°å <code>exec</code> ÁöÑÊó∂ÂÄôÔºå ÂÆÉ‰ª¨ÁöÑ‰∫ãÂä°ÈÉΩ‰ºö‰ª•Â§±Ë¥•ÂëäÁªà„ÄÇ</p>
<p>ÊúÄÂêéÔºåÂΩì‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØÁªìÊùüÂÆÉÁöÑ‰∫ãÂä°Êó∂ÔºåÊó†ËÆ∫‰∫ãÂä°ÊòØÊàêÂäüÊâßË°åÔºåËøòÊòØÂ§±Ë¥•Ôºå watched_keys Â≠óÂÖ∏‰∏≠ÂíåËøô‰∏™ÂÆ¢Êà∑Á´ØÁõ∏ÂÖ≥ÁöÑËµÑÊñôÈÉΩ‰ºöË¢´Ê∏ÖÈô§„ÄÇ</p>
<h3 id="53">5.3„ÄÅ‰∫ãÂä°ÈîôËØØ‰∏éÂõûÊªö<a class="headerlink" href="#53" title="Permanent link">&para;</a></h3>
<p><strong>ÂΩìÂëΩ‰ª§ÂÖ•ÈòüÊó∂Â∞±Êä•ÈîôÔºåÈÇ£‰πàÊï¥‰∏™‰∫ãÂä°‰∏≠ÊâÄÊúâÁöÑÂëΩ‰ª§ÈÉΩ‰∏ç‰ºöÊâßË°åÔºö</strong></p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>multi
OK
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>k1<span class="w"> </span>v1
QUEUED
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>k2<span class="w"> </span>v2
QUEUED
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>getset<span class="w"> </span>k1
<span class="o">(</span>error<span class="o">)</span><span class="w"> </span>ERR<span class="w"> </span>wrong<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>arguments<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s1">&#39;getset&#39;</span><span class="w"> </span><span class="nb">command</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>k3<span class="w"> </span>v3
QUEUED
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span><span class="nb">exec</span>
<span class="o">(</span>error<span class="o">)</span><span class="w"> </span>EXECABORT<span class="w"> </span>Transaction<span class="w"> </span>discarded<span class="w"> </span>because<span class="w"> </span>of<span class="w"> </span>previous<span class="w"> </span>errors.
</code></pre></div>
<p><strong>Â¶ÇÊûúÂëΩ‰ª§ÊâßË°åÊó∂Âá∫ÈîôÔºå‰ΩÜÊòØÂÖ•ÈòüÊó∂ÊàêÂäüÔºåÈÇ£‰πà‰∫ãÂä°ÊâßË°åÊó∂ÔºåËØ•ÂëΩ‰ª§Âá∫ÈîôÔºå‰ΩÜÊòØÂÖ∂‰ªñÁöÑÂëΩ‰ª§‰ºöÊàêÂäüÊâßË°åÔºö</strong></p>
<div class="highlight"><pre><span></span><code><span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>multi
OK
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>k1<span class="w"> </span><span class="s1">&#39;v1&#39;</span>
QUEUED
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>incr<span class="w"> </span>k1
QUEUED
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>k2<span class="w"> </span>v2
QUEUED
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>get<span class="w"> </span>k1
QUEUED
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span><span class="nb">exec</span>
<span class="m">1</span><span class="o">)</span><span class="w"> </span>OK
<span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="o">(</span>error<span class="o">)</span><span class="w"> </span>ERR<span class="w"> </span>value<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>an<span class="w"> </span>integer<span class="w"> </span>or<span class="w"> </span>out<span class="w"> </span>of<span class="w"> </span>range
<span class="m">3</span><span class="o">)</span><span class="w"> </span>OK
<span class="m">4</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;v1&quot;</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span>get<span class="w"> </span>k1
<span class="s2">&quot;v1&quot;</span>
</code></pre></div>
<p>Âú®‰º†ÁªüÁöÑ ACID ÈáåÔºåÂéüÂ≠êÊÄßÊúâ‰∏Ä‰∏™ÁâπÁÇπÂ∞±ÊòØË¶Å‰πàÂÖ®ÈÉ®ÊàêÂäüÔºåË¶Å‰πàÂÖ®ÈÉ®Â§±Ë¥•Ôºå‰πüÂ∞±ÊòØÊàë‰ª¨‰º†Áªü DB ÈáåÈù¢ËØ¥ÁöÑÂõûÊªö„ÄÇÂΩìÊàë‰ª¨ÊâßË°å‰∏Ä‰∏™Â§±Ë¥•ÁöÑ‰∫ãÂä°ÂèØ‰ª•ÂèëÁé∞ÔºåÂ∞±ÁÆó‰∏≠Èó¥Âá∫Áé∞‰∫ÜÂ§±Ë¥•Ôºå<code>set k1 'v1'</code> Ëøô‰∏™Êìç‰Ωú‰πüÂ∑≤ÁªèË¢´ÊâßË°å‰∫ÜÔºåÂπ∂Ê≤°ÊúâËøõË°åÂõûÊªöÔºå‰ªé‰∏•Ê†ºÁöÑÊÑè‰πâ‰∏äÊù•ËØ¥ Redis Âπ∂‰∏çÂÖ∑Â§áÂéüÂ≠êÊÄß„ÄÇ</p>
<p>ÂÜçË∞àË∞àÈöîÁ¶ªÊÄßÔºåRedis Âõ†‰∏∫ÊòØÂçïÁ∫øÁ®ãÊìç‰ΩúÔºåÊâÄ‰ª•Âú®ÈöîÁ¶ªÊÄß‰∏äÊúâÂ§©ÁîüÁöÑÈöîÁ¶ªÊú∫Âà∂ÔºåÂΩì Redis ÊâßË°å‰∫ãÂä°Êó∂ÔºåRedis ÁöÑÊúçÂä°Á´Ø‰øùËØÅÂú®ÊâßË°å‰∫ãÂä°ÊúüÈó¥‰∏ç‰ºöÂØπ‰∫ãÂä°ËøõË°å‰∏≠Êñ≠ÔºåÊâÄ‰ª•ÔºåRedis ‰∫ãÂä°ÊÄªÊòØ‰ª•‰∏≤Ë°åÁöÑÊñπÂºèËøêË°åÔºå‰∫ãÂä°‰πüÂÖ∑Â§áÈöîÁ¶ªÊÄß„ÄÇ</p>
<p><strong>‰∫ãÂä°ÂõûÊªö</strong></p>
<p>Redis ‰∏çÊîØÊåÅ‰∫ãÂä°ÂõûÊªöÔºÅ</p>
<p>Ê†πÊçÆÂÆòÊñπÊñáÊ°£Â§ßÊ¶ÇÊÑèÊÄùÔºå‰ΩúËÄÖ‰∏çÊîØÊåÅ‰∫ãÂä°ÂõûÊªöÁöÑÂéüÂõ†Êúâ‰ª•‰∏ã‰∏§‰∏™Ôºö</p>
<ul>
<li>‰ªñËÆ§‰∏∫ Redis ‰∫ãÂä°ÁöÑÊâßË°åÊó∂ÔºåÈîôËØØÈÄöÂ∏∏ÈÉΩÊòØÁºñÁ®ãÈîôËØØÈÄ†ÊàêÁöÑÔºåËøôÁßçÈîôËØØÈÄöÂ∏∏Âè™‰ºöÂá∫Áé∞Âú®ÂºÄÂèëÁéØÂ¢É‰∏≠ÔºåËÄåÂæàÂ∞ë‰ºöÂú®ÂÆûÈôÖÁöÑÁîü‰∫ßÁéØÂ¢É‰∏≠Âá∫Áé∞ÔºåÊâÄ‰ª•‰ªñËÆ§‰∏∫Ê≤°ÊúâÂøÖË¶Å‰∏∫ Redis ÂºÄÂèë‰∫ãÂä°ÂõûÊªöÂäüËÉΩ</li>
<li>‰∏çÊîØÊåÅ‰∫ãÂä°ÂõûÊªöÊòØÂõ†‰∏∫ËøôÁßçÂ§çÊùÇÁöÑÂäüËÉΩÂíå Redis ËøΩÊ±ÇÁöÑÁÆÄÂçïÈ´òÊïàÁöÑËÆæËÆ°‰∏ªÊó®‰∏çÁ¨¶Âêà</li>
</ul>
<h2 id="6jedis">6„ÄÅJedis<a class="headerlink" href="#6jedis" title="Permanent link">&para;</a></h2>
<p>‰ªÄ‰πàÊòØ Jedis ÊòØ Redis Êé®ËçêÁöÑ Java ËøûÊé•ÂºÄÂèëÂ∑•ÂÖ∑ÔºÅ‰ΩøÁî® Java Êìç‰Ωú Redis ÁöÑ‰∏≠Èó¥‰ª∂ÔºåÂ¶ÇÊûúË¶Å‰ΩøÁî® Java Êìç‰Ωú RedisÔºåÈÇ£‰πà‰∏ÄÂÆöË¶ÅÂØπ Jedis ÂçÅÂàÜÁÜüÊÇâ„ÄÇ</p>
<ol>
<li>
<p>ÂØºÂÖ•Áõ∏ÂÖ≥ÁöÑ‰æùËµñ</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- https://mvnrepository.com/artifact/redis.clients/jedis --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>redis.clients<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>jedis<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>3.3.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>com.alibaba<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>fastjson<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>1.2.67<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
</li>
<li>
<p>ÁºñÁ†ÅÊµãËØïÔºö</p>
<ul>
<li>ËøûÊé•Êï∞ÊçÆÂ∫ì</li>
<li>Êìç‰ΩúÂëΩ‰ª§</li>
<li>Êñ≠ÂºÄËøûÊé•</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Jedis</span><span class="w"> </span><span class="n">jedis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Jedis</span><span class="p">(</span><span class="s">&quot;120.79.171.55&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">6379</span><span class="p">);</span>

<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">jedis</span><span class="p">.</span><span class="na">ping</span><span class="p">());</span>

<span class="w">        </span><span class="n">jedis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>ËæìÂá∫Ôºö</p>
<div class="highlight"><pre><span></span><code>PONG
</code></pre></div>
</li>
</ol>
<p>ÂÖ∂‰ΩôÁöÑ API Êìç‰ΩúÂíå  Reids ÁöÑÂëΩ‰ª§‰∏ÄÊ†∑„ÄÇ</p>
<p><strong>Jedis Êìç‰Ωú‰∫ãÂä°</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">RTransaction</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Jedis</span><span class="w"> </span><span class="n">jedis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Jedis</span><span class="p">(</span><span class="s">&quot;120.79.171.55&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">6379</span><span class="p">);</span>

<span class="w">        </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">jsonObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JSONObject</span><span class="p">();</span>
<span class="w">        </span><span class="n">jsonObject</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;world&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">jsonObject</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Orichalcos&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jsonObject</span><span class="p">.</span><span class="na">toString</span><span class="p">();</span>

<span class="w">        </span><span class="c1">//ÂºÄÂêØ‰∫ãÂä°</span>
<span class="w">        </span><span class="n">Transaction</span><span class="w"> </span><span class="n">multi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jedis</span><span class="p">.</span><span class="na">multi</span><span class="p">();</span>

<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">multi</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="s">&quot;user1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="p">);</span>
<span class="w">            </span><span class="n">multi</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="s">&quot;user2&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="p">);</span>

<span class="w">            </span><span class="c1">//ÊâßË°å‰∫ãÂä°</span>
<span class="w">            </span><span class="n">multi</span><span class="p">.</span><span class="na">exec</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">//ÊîæÂºÉ‰∫ãÂä°</span>
<span class="w">            </span><span class="n">multi</span><span class="p">.</span><span class="na">discard</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">jedis</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;user1&quot;</span><span class="p">));</span>
<span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">jedis</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;user2&quot;</span><span class="p">));</span>
<span class="w">            </span><span class="c1">//ÂÖ≥Èó≠ËøûÊé•</span>
<span class="w">            </span><span class="n">jedis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="7spring-boot">7„ÄÅSpring Boot Êï¥Âêà<a class="headerlink" href="#7spring-boot" title="Permanent link">&para;</a></h2>
<p>RedisTemplate ÊòØ Spring Data Redis Êèê‰æõÁöÑ‰∏Ä‰∏™Âº∫Â§ßÁöÑÊ®°ÊùøÁ±ªÔºåÁî®‰∫éÂú® Spring Â∫îÁî®‰∏≠‰∏é Redis ËøõË°å‰∫§‰∫í„ÄÇÂÆÉÊòØ‰∏é Spring Ê°ÜÊû∂Á¥ßÂØÜÈõÜÊàêÁöÑÔºåÂèØ‰ª•ÈÄÇÁî®‰∫éÂ§öÁßç Redis ÂÆ¢Êà∑Á´ØÂÆûÁé∞ÔºåÂåÖÊã¨ Jedis Âíå Lettuce„ÄÇ</p>
<p>Âú®Êó©ÊúüÁâàÊú¨ÁöÑ Spring Data Redis ‰∏≠ÔºåÈªòËÆ§‰ΩøÁî®ÁöÑÊòØ Jedis ‰Ωú‰∏∫ Redis ÂÆ¢Êà∑Á´Ø„ÄÇ‰ΩÜ‰ªé Spring Data Redis 2.0 ÁâàÊú¨ÂºÄÂßãÔºåLettuce Êàê‰∏∫‰∫ÜÈªòËÆ§ÁöÑ Redis ÂÆ¢Êà∑Á´ØÂÆûÁé∞„ÄÇ</p>
<p>Jedis ÊòØ‰∏Ä‰∏™Âü∫‰∫éÂêåÊ≠•„ÄÅÈùûÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ Redis ÂÆ¢Êà∑Á´ØÔºåÂ¶ÇÊûúÊÉ≥Ë¶ÅÈÅøÂÖç‰∏çÂÆâÂÖ®ÔºåÂèØ‰ª•‰ΩøÁî® Jedis Pool ËøûÊé•Ê±†„ÄÇ</p>
<p>Áõ∏ÊØî‰πã‰∏ãÔºåLettuce ÊòØ‰∏Ä‰∏™Âü∫‰∫éÂºÇÊ≠•„ÄÅÁ∫øÁ®ãÂÆâÂÖ®ÂíåÂèØÊâ©Â±ïÁöÑ Redis ÂÆ¢Êà∑Á´ØÔºåÊîØÊåÅÂ§ö‰∏™ËøûÊé•ÂíåÈ´òÁ∫ßÂäüËÉΩ„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†‰ΩøÁî® Spring BootÔºåÂΩìÊ∑ªÂä†‰∫Ü <code>spring-boot-starter-data-redis</code> ‰æùËµñÂêéÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ã‰ºö‰ΩøÁî® Lettuce ‰Ωú‰∏∫ Redis ÂÆ¢Êà∑Á´ØÂÆûÁé∞„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûú‰Ω†ÁöÑÂ∫îÁî®ÈúÄË¶ÅÔºå‰Ω†‰πüÂèØ‰ª•ÊâãÂä®ÈÖçÁΩÆ‰ΩøÁî® Jedis„ÄÇ</p>
<p>Êó†ËÆ∫‰ΩøÁî® Jedis ËøòÊòØ LettuceÔºåRedisTemplate ÈÉΩÊèê‰æõ‰∫Ü‰∏ÄÁßçÂú® Spring Â∫îÁî®‰∏≠Êõ¥Êñπ‰æøÂú∞‰∏é Redis ËøõË°å‰∫§‰∫íÁöÑÊñπÂºè„ÄÇ‰Ω†ÂèØ‰ª•‰ΩøÁî®ÂÆÉÊù•ÊâßË°åÂêÑÁßç Redis Êìç‰ΩúÔºåÂ¶ÇËÆæÁΩÆÈîÆÂÄº„ÄÅËé∑ÂèñÂÄº„ÄÅÊâßË°å‰∫ãÂä°Á≠â„ÄÇÂΩìÁÑ∂ÔºåÂÖ∑‰ΩìÁöÑ‰ª£Á†ÅÂíåÈÖçÁΩÆÂèØËÉΩÂõ†‰∏∫‰Ω†‰ΩøÁî®ÁöÑÂÆ¢Êà∑Á´ØÂÆûÁé∞ËÄåÁï•Êúâ‰∏çÂêåÔºå‰ΩÜ‰ΩøÁî® RedisTemplate ËÉΩÂ§üÂú®‰Ω†ÂàáÊç¢ Redis ÂÆ¢Êà∑Á´ØÂÆûÁé∞Êó∂ÂáèÂ∞ë‰ª£Á†ÅÊîπÂä®ÁöÑÂ∑•‰ΩúÈáè„ÄÇ</p>
<p><strong>Êï¥ÂêàÊµãËØï</strong></p>
<ol>
<li>
<p>ÂØºÂÖ•‰æùËµñ</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-data-redis<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
</li>
<li>
<p>ÈÖçÁΩÆËøûÊé•</p>
<div class="highlight"><pre><span></span><code><span class="na">spring.redis.host</span><span class="o">=</span><span class="s">120.79.171.55</span>
<span class="na">spring.redis.port</span><span class="o">=</span><span class="s">6379</span>
</code></pre></div>
</li>
<li>
<p>ÊµãËØï</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="kd">class</span> <span class="nc">Redis02SpringbootApplicationTests</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">RedisTemplate</span><span class="w"> </span><span class="n">redisTemplate</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">contextLoads</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">//redisTemplate</span>
<span class="w">        </span><span class="c1">//opsForValue()</span>
<span class="w">        </span><span class="c1">//opsForSet()</span>
<span class="w">        </span><span class="c1">//opsForHash()</span>

<span class="w">        </span><span class="c1">//Ëé∑Âèñ redis ÁöÑËøûÊé•ÂØπË±°</span>
<span class="w">        </span><span class="c1">//RedisConnection connection = redisTemplate.getConnectionFactory().getConnection();</span>
<span class="w">        </span><span class="c1">//connection.flushDb();</span>
<span class="w">        </span><span class="c1">//connection.flushAll();</span>

<span class="w">        </span><span class="n">redisTemplate</span><span class="p">.</span><span class="na">opsForValue</span><span class="p">().</span><span class="na">set</span><span class="p">(</span><span class="s">&quot;mykey&quot;</span><span class="p">,</span><span class="s">&quot;Orichalcos&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">redisTemplate</span><span class="p">.</span><span class="na">opsForValue</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;mykey&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</li>
</ol>
<h3 id="71redistemplate">7.1„ÄÅRedisTemplate ÂèäÂ∫èÂàóÂåñÊñπÂºè<a class="headerlink" href="#71redistemplate" title="Permanent link">&para;</a></h3>
<p>ËøêË°å‰∏ä‰∏™‰æãÂ≠êÂêéÔºåÂú® Redis ‰∏≠ÈÄöËøá <code>keys *</code> ÂëΩ‰ª§ÂèØ‰ª•ÁúãÂà∞Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="s2">&quot;\xac\xed\x00\x05t\x00\x05mykey&quot;</span>
</code></pre></div>
<p>ÂèØ‰ª•‰ΩøÁî® StringRedisTemplate Êù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ</p>
<p><strong>RedisSerializer</strong></p>
<p>RedisSerializer Êé•Âè£ ÊòØ Redis Â∫èÂàóÂåñÊé•Âè£ÔºåÁî®‰∫é Redis KEY Âíå VALUE ÁöÑÂ∫èÂàóÂåñÔºåÂÆûÁé∞Á±ªÂ¶Ç‰∏ãÔºö</p>
<p><img src="!assets/Redis/image-20210527235233341.png" alt="image-20210527235233341" style="zoom:50%;" /></p>
<p><strong>‰∏§Áßç Template ÁöÑÂå∫Âà´</strong></p>
<ul>
<li>
<p>‰∏§ËÄÖÁöÑÂÖ≥Á≥ªÔºö StringRedisTemplate ÁªßÊâø RedisTemplate„ÄÇ</p>
</li>
<li>
<p>‰ªñ‰ª¨ÁöÑÊï∞ÊçÆÊòØ‰∏çÂÖ±ÈÄöÁöÑÔºõ‰πüÂ∞±ÊòØËØ¥ StringRedisTemplate Âè™ËÉΩÁÆ°ÁêÜ StringRedisTemplate ÈáåÈù¢ÁöÑÊï∞ÊçÆÔºåRedisTemplate Âè™ËÉΩÁÆ°ÁêÜ RedisTemplate ‰∏≠ÁöÑÊï∞ÊçÆ„ÄÇ</p>
</li>
<li>
<p>‰∏§ËÄÖ‰πãÈó¥ÁöÑÂå∫Âà´‰∏ªË¶ÅÂú®‰∫é‰ªñ‰ª¨‰ΩøÁî®ÁöÑÂ∫èÂàóÂåñÁ±ªÔºö</p>
<blockquote>
<p>RedisTemplate ‰ΩøÁî®ÁöÑÊòØ JdkSerializationRedisSerializerÔºàÂ¶ÇÊûúÂ≠òÂÖ•ÂØπË±°ÔºåÂØπË±°Ë¶ÅÂÆûÁé∞ Serializable Êé•Âè£ÔºâÔºåÂ≠òÂÖ•Êï∞ÊçÆ‰ºöÂ∞ÜÊï∞ÊçÆÂÖàÂ∫èÂàóÂåñÊàêÂ≠óËäÇÊï∞ÁªÑÁÑ∂ÂêéÂú®Â≠òÂÖ• Redis Êï∞ÊçÆÂ∫ì„ÄÇËøô‰∏™Êó∂ÂÄôÊâìÂºÄ Redis Êü•ÁúãÁöÑÊó∂ÂÄôÔºå‰Ω†‰ºöÁúãÂà∞‰Ω†ÁöÑÊï∞ÊçÆ‰∏çÊòØ‰ª•ÂèØËØªÁöÑÂΩ¢ÂºèÂ±ïÁé∞ÁöÑÔºåËÄåÊòØ‰ª•Â≠óËäÇÊï∞ÁªÑÊòæÁ§∫ÔºåÁ±ª‰ºº‰∏ãÈù¢Ôºö</p>
<p><img src="!assets/Redis/20180311192010923.png" alt="img" style="zoom:80%;" /> </p>
<p>ÂΩìÁÑ∂‰ªé Redis Ëé∑ÂèñÊï∞ÊçÆÁöÑÊó∂ÂÄô‰πü‰ºöÈªòËÆ§Â∞ÜÊï∞ÊçÆÂΩìÂÅöÂ≠óËäÇÊï∞ÁªÑËΩ¨ÂåñÔºåËøôÊ†∑Â∞±‰ºöÂØºËá¥‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂΩìÈúÄË¶ÅËé∑ÂèñÁöÑÊï∞ÊçÆ‰∏çÊòØ‰ª•Â≠óËäÇÊï∞ÁªÑÂ≠òÂú® Redis ÂΩì‰∏≠ËÄåÊòØÊ≠£Â∏∏ÁöÑÂèØËØªÁöÑÂ≠óÁ¨¶‰∏≤ÁöÑÊó∂ÂÄôÔºåÊØîÂ¶ÇËØ¥‰∏ãÈù¢ËøôÁßçÂΩ¢ÂºèÁöÑÊï∞ÊçÆÔºö
<img src="!assets/Redis/20180311192129306.png" alt="img" style="zoom:80%;" /></p>
<p>RedisTemplate Â∞±Êó†Ê≥ïËé∑ÂèñÂØºÊï∞ÊçÆÔºåËøô‰∏™Êó∂ÂÄôËé∑ÂèñÂà∞ÁöÑÂÄºÂ∞±ÊòØ NULL„ÄÇÊ≠§Êó∂ StringRedisTempate Â∞±Ê¥æ‰∏ä‰∫ÜÁî®Âú∫Ôºå StringRedisTemplate ‰ΩøÁî®ÁöÑÊòØ StringRedisSerializerÔºåÂΩì Redis ÂΩì‰∏≠ÁöÑÊï∞ÊçÆÂÄºÊòØ‰ª•ÂèØËØªÁöÑÂΩ¢ÂºèÊòæÁ§∫Âá∫Êù•ÁöÑÊó∂ÂÄôÔºåÂè™ËÉΩ‰ΩøÁî® StringRedisTemplate ÊâçËÉΩËé∑ÂèñÂà∞ÈáåÈù¢ÁöÑÊï∞ÊçÆ„ÄÇ</p>
</blockquote>
</li>
</ul>
<p><strong>‰∏§Áßç Template ÁöÑÊ∫êÁ†ÅÂàÜÊûê</strong></p>
<p>StringRedisTemplate ÁöÑÈÉ®ÂàÜÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">StringRedisTemplate</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">RedisTemplate</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Constructs a new &lt;code&gt;StringRedisTemplate&lt;/code&gt; instance. {@link #setConnectionFactory(RedisConnectionFactory)}</span>
<span class="cm">     * and {@link #afterPropertiesSet()} still need to be called.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">StringRedisTemplate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">setKeySerializer</span><span class="p">(</span><span class="n">RedisSerializer</span><span class="p">.</span><span class="na">string</span><span class="p">());</span>
<span class="w">        </span><span class="n">setValueSerializer</span><span class="p">(</span><span class="n">RedisSerializer</span><span class="p">.</span><span class="na">string</span><span class="p">());</span>
<span class="w">        </span><span class="n">setHashKeySerializer</span><span class="p">(</span><span class="n">RedisSerializer</span><span class="p">.</span><span class="na">string</span><span class="p">());</span>
<span class="w">        </span><span class="n">setHashValueSerializer</span><span class="p">(</span><span class="n">RedisSerializer</span><span class="p">.</span><span class="na">string</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
<p>ÈÄöËøáËØ•Ê∫êÁ†ÅÂèØ‰ª•ÁúãÂà∞ StringRedisTemplate ÈááÁî®ÁöÑÊòØ <code>RedisSerializer.string()</code> Êù•Â∫èÂàóÂåñ Redis ‰∏≠Â≠òÂÇ®Êï∞ÊçÆÁöÑ Key ÁöÑ„ÄÇ</p>
<p>‰∏ãÈù¢ÂÜçÊù•ÁúãÁúã RedisTemplate ‰∏≠ÈªòËÆ§ÈááÁî®‰ªÄ‰πàÂΩ¢ÂºèÊù•Â∫èÂàóÂåñÂØπÂ∫îÁöÑ Key„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">RedisTemplate</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="w"> </span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">RedisAccessor</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">RedisOperations</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="w"> </span><span class="n">V</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">BeanClassLoaderAware</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ÁúÅÁï•ÂÖ∂‰ªñÊ∫êÁ†Å</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nd">@Nullable</span><span class="w"> </span><span class="n">RedisSerializer</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">defaultSerializer</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nd">@Nullable</span><span class="w"> </span><span class="n">ClassLoader</span><span class="w"> </span><span class="n">classLoader</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/*</span>
<span class="cm">     * (non-Javadoc)</span>
<span class="cm">     * @see org.springframework.data.redis.core.RedisAccessor#afterPropertiesSet()</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">afterPropertiesSet</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="kd">super</span><span class="p">.</span><span class="na">afterPropertiesSet</span><span class="p">();</span>

<span class="w">        </span><span class="kt">boolean</span><span class="w"> </span><span class="n">defaultUsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">defaultSerializer</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">            </span><span class="n">defaultSerializer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JdkSerializationRedisSerializer</span><span class="p">(</span>
<span class="w">                    </span><span class="n">classLoader</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">classLoader</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">getClass</span><span class="p">().</span><span class="na">getClassLoader</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">enableDefaultSerializer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">keySerializer</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">keySerializer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">defaultSerializer</span><span class="p">;</span>
<span class="w">                </span><span class="n">defaultUsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="c1">// ÁúÅÁï•ÂÖ∂‰ªñÊ∫êÁ†Å</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">enableDefaultSerializer</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">defaultUsed</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Assert</span><span class="p">.</span><span class="na">notNull</span><span class="p">(</span><span class="n">defaultSerializer</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;default serializer null and not all serializers initialized&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">scriptExecutor</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">scriptExecutor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DefaultScriptExecutor</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">initialized</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// ÁúÅÁï•ÂÖ∂‰ªñÊ∫êÁ†Å   </span>
<span class="p">}</span>
</code></pre></div>
<p>ÂèØ‰ª•ÁúãÂà∞ RedisTemplate ‰ΩøÁî®ÁöÑÂ∫èÂàóÂåñÁ±ª‰∏∫ defaultSerializerÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ã‰∏∫ JdkSerializationRedisSerializer„ÄÇÂ¶ÇÊûúÊú™ÊåáÂÆö Key ÁöÑÂ∫èÂàóÂåñÁ±ªÔºåkeySerializer ‰∏é defaultSerializer ÈááÁî®Áõ∏ÂêåÁöÑÂ∫èÂàóÂåñÁ±ª„ÄÇ</p>
<p>ÈÄöËøá‰∏äËø∞‰∏§‰∏™ Template ÁöÑÂàÜÊûêÂ∞±ÂèØ‰ª•ÁúãÂá∫ÂÆÉ‰ª¨Âú® Redis Â≠òÂÇ®ÁöÑ KeyÔºåÈááÁî®‰∫Ü‰∏çÂêåÁöÑÂ∫èÂàóÂåñÊñπÊ≥ï„ÄÇËÄå‰∏î JdkSerializationRedisSerializer Â∫èÂàóÂåñÊó∂‰ºöÂú® Key ÁöÑÂâçÈù¢Ê∑ªÂä†‰∏Ä‰∫õÁâπÊÆäÂ≠óÁ¨¶„ÄÇ</p>
<p>ÈÇ£‰πàÔºåÂ¶ÇÊûúÂú®Áîü‰∫ßÁéØÂ¢É‰∏≠ÊÉ≥ÈÄöÁî® StringRedisTemplate Âíå RedisTemplate ËøõË°åÂ≠óÁ¨¶‰∏≤ÁöÑÂ§ÑÁêÜËØ•ÊÄé‰πàÂäûÔºü</p>
<p>Ê≠§Êó∂Â∞±ÈúÄË¶ÅÊåáÂÆöÁªü‰∏ÄÁöÑ Key ÁöÑÂ∫èÂàóÂåñÂ§ÑÁêÜÁ±ªÔºåÊØîÂ¶ÇÂú® RedisTemplate Â∫èÂàóÂåñÊó∂ÊåáÂÆö‰∏é StringRedisTemplate Áõ∏ÂêåÁöÑÁ±ª„ÄÇÂú®‰∏äËø∞ÂçïÂÖÉÊµãËØï‰∏≠Ê∑ªÂä†Â¶Ç‰∏ãÊñπÊ≥ïÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@BeforeEach</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">init</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">redisTemplate</span><span class="p">.</span><span class="na">setKeySerializer</span><span class="p">(</span><span class="n">RedisSerializer</span><span class="p">.</span><span class="na">string</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div>
<p>‰πüÂ∞±ÊòØËÆæÁΩÆ RedisTemplate ‰πü‰ΩøÁî® <code>RedisSerializer.string()</code> Êù•Â∫èÂàóÂåñ Key„ÄÇÊ≥®ÊÑèÊ≠§Â§Ñ‰ΩøÁî®ÁöÑÊòØ Junit5„ÄÇ</p>
<p>ËøôÊ†∑Â∞±Ëß£ÂÜ≥ÈóÆÈ¢ò‰∫ÜÂêóÔºüÊ≤°Êúâ„ÄÇÂõ†‰∏∫ RedisTemplate ÁöÑ Value ‰πüÊòØÈááÁî®ÈªòËÆ§ÁöÑÂ∫èÂàóÂåñÁ±ªÔºå‰πüË¶ÅËøõË°åÁªü‰∏Ä‰øÆÊîπ„ÄÇ</p>
<p>Âõ†Ê≠§‰∏äÈù¢ÁöÑÊñπÊ≥ïÂèòÊàêÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@BeforeEach</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">init</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">redisTemplate</span><span class="p">.</span><span class="na">setKeySerializer</span><span class="p">(</span><span class="n">RedisSerializer</span><span class="p">.</span><span class="na">string</span><span class="p">());</span>
<span class="w">    </span><span class="n">redisTemplate</span><span class="p">.</span><span class="na">setValueSerializer</span><span class="p">(</span><span class="n">RedisSerializer</span><span class="p">.</span><span class="na">string</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Jackson ÂÆûÁé∞ JSON ÁöÑÂ∫èÂàóÂåñÊñπÂºè</strong></p>
<p><code>org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer</code> ‰ΩøÁî® Jackson ÂÆûÁé∞ JSON ÁöÑÂ∫èÂàóÂåñÊñπÂºèÔºåÂπ∂‰∏î‰ªé Generic ÂçïËØçÂèØ‰ª•ÁúãÂá∫ÔºåÊòØÊîØÊåÅÊâÄÊúâÁ±ª„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="nf">GenericJackson2JsonRedisSerializer</span><span class="p">(</span><span class="nd">@Nullable</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">classPropertyTypeName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">            </span><span class="p">.....</span>
<span class="w">            </span><span class="p">.....</span><span class="w"> </span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">StringUtils</span><span class="p">.</span><span class="na">hasText</span><span class="p">(</span><span class="n">classPropertyTypeName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">mapper</span><span class="p">.</span><span class="na">enableDefaultTypingAsProperty</span><span class="p">(</span><span class="n">DefaultTyping</span><span class="p">.</span><span class="na">NON_FINAL</span><span class="p">,</span><span class="w"> </span><span class="n">classPropertyTypeName</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">mapper</span><span class="p">.</span><span class="na">enableDefaultTyping</span><span class="p">(</span><span class="n">DefaultTyping</span><span class="p">.</span><span class="na">NON_FINAL</span><span class="p">,</span><span class="w"> </span><span class="n">As</span><span class="p">.</span><span class="na">PROPERTY</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<p><em>classPropertyTypeName</em> ‰∏ç‰∏∫Á©∫ÁöÑËØùÔºå‰ΩøÁî®‰º†ÂÖ•ÂØπË±°ÁöÑ <em>classPropertyTypeName</em> Â±ûÊÄßÂØπÂ∫îÁöÑÂÄºÔºå‰Ωú‰∏∫ÈªòËÆ§Á±ªÂûãÔºàDefault TypingÔºâ ÔºåÂê¶Âàô‰ΩøÁî®‰º†ÂÖ•ÂØπË±°ÁöÑÁ±ªÂÖ®ÂêçÔºå‰Ωú‰∏∫ÈªòËÆ§Á±ªÂûãÔºàDefault TypingÔºâ„ÄÇÂêåÊó∂ÈÄöËøá Default Typing Ôºå‰ºöÂú®Â≠óÁ¨¶‰∏≤Â§öÂÜó‰Ωô‰∏Ä‰∏™Á±ªÂûãÔºåËøôÊ†∑ÂèçÂ∫èÂàóÂåñÂ∞±Áü•ÈÅìÂÖ∑‰ΩìÁöÑÁ±ªÂûã‰∫Ü</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Bean</span>
<span class="kd">public</span><span class="w"> </span><span class="n">RedisTemplate</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">redisTemplate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ÂàõÂª∫ RedisTemplate ÂØπË±°</span>
<span class="w">    </span><span class="n">RedisTemplate</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RedisTemplate</span><span class="o">&lt;&gt;</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// ËÆæÁΩÆ RedisConnection Â∑•ÂéÇ„ÄÇ ÂÆÉÂ∞±ÊòØÂÆûÁé∞Â§öÁßç Java Redis ÂÆ¢Êà∑Á´ØÊé•ÂÖ•ÁöÑÁßòÂØÜÂ∑•ÂéÇ</span>
<span class="w">    </span><span class="n">template</span><span class="p">.</span><span class="na">setConnectionFactory</span><span class="p">(</span><span class="n">connectionFactory</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// ‰ΩøÁî® String Â∫èÂàóÂåñÊñπÂºèÔºåÂ∫èÂàóÂåñ KEY „ÄÇ</span>
<span class="w">    </span><span class="n">template</span><span class="p">.</span><span class="na">setKeySerializer</span><span class="p">(</span><span class="n">RedisSerializer</span><span class="p">.</span><span class="na">string</span><span class="p">());</span>

<span class="w">    </span><span class="c1">// ‰ΩøÁî® JSON Â∫èÂàóÂåñÊñπÂºèÔºàÂ∫ìÊòØ Jackson ÔºâÔºåÂ∫èÂàóÂåñ VALUE „ÄÇ</span>
<span class="w">    </span><span class="n">template</span><span class="p">.</span><span class="na">setValueSerializer</span><span class="p">(</span><span class="n">RedisSerializer</span><span class="p">.</span><span class="na">json</span><span class="p">());</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">template</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testJacksonSerializer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">(</span><span class="s">&quot;Orichalcos&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">18</span><span class="p">);</span>
<span class="w">    </span><span class="n">redisTemplate</span><span class="p">.</span><span class="na">opsForValue</span><span class="p">().</span><span class="na">set</span><span class="p">(</span><span class="s">&quot;user&quot;</span><span class="p">,</span><span class="n">user</span><span class="p">);</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">redisTemplate</span><span class="p">.</span><span class="na">opsForValue</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;user&quot;</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>###ÊâìÂç∞ËæìÂá∫
User(name=Orichalcos, age=18)
</code></pre></div>
<p><img src="!assets/Redis/image-20210528012258213.png" alt="image-20210528012258213" style="zoom: 50%;" /></p>
<p><strong>Ëá™ÂÆö‰πâ redisTemplate</strong></p>
<div class="highlight"><pre><span></span><code><span class="nd">@Configuration</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">RedisConfig</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Bean</span>
<span class="w">    </span><span class="nd">@SuppressWarnings</span><span class="p">(</span><span class="s">&quot;all&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">RedisTemplate</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">redisTemplate</span><span class="p">(</span><span class="n">RedisConnectionFactory</span><span class="w"> </span><span class="n">factory</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">//‰∏ÄËà¨‰∏∫‰∫ÜÂºÄÂèëÊñπ‰æø ‰ΩøÁî®&lt;String, Object&gt;</span>
<span class="w">        </span><span class="n">RedisTemplate</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RedisTemplate</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="w">        </span><span class="n">template</span><span class="p">.</span><span class="na">setConnectionFactory</span><span class="p">(</span><span class="n">factory</span><span class="p">);</span>

<span class="w">        </span><span class="c1">//JSONÂ∫èÂàóÂåñÈÖçÁΩÆ</span>
<span class="w">        </span><span class="n">Jackson2JsonRedisSerializer</span><span class="w"> </span><span class="n">jackson2JsonRedisSerializer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Jackson2JsonRedisSerializer</span><span class="p">(</span><span class="n">Object</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">        </span><span class="n">ObjectMapper</span><span class="w"> </span><span class="n">objectMapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectMapper</span><span class="p">();</span>
<span class="w">        </span><span class="n">objectMapper</span><span class="p">.</span><span class="na">setVisibility</span><span class="p">(</span><span class="n">PropertyAccessor</span><span class="p">.</span><span class="na">ALL</span><span class="p">,</span><span class="w"> </span><span class="n">JsonAutoDetect</span><span class="p">.</span><span class="na">Visibility</span><span class="p">.</span><span class="na">ANY</span><span class="p">);</span>
<span class="w">        </span><span class="n">objectMapper</span><span class="p">.</span><span class="na">enableDefaultTyping</span><span class="p">(</span><span class="n">ObjectMapper</span><span class="p">.</span><span class="na">DefaultTyping</span><span class="p">.</span><span class="na">NON_FINAL</span><span class="p">);</span>
<span class="w">        </span><span class="n">jackson2JsonRedisSerializer</span><span class="p">.</span><span class="na">setObjectMapper</span><span class="p">(</span><span class="n">objectMapper</span><span class="p">);</span>

<span class="w">        </span><span class="c1">//String ÁöÑÂ∫èÂàóÂåñ</span>
<span class="w">        </span><span class="n">StringRedisSerializer</span><span class="w"> </span><span class="n">stringRedisSerializer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StringRedisSerializer</span><span class="p">();</span>

<span class="w">        </span><span class="c1">//key ÈááÁî® String ÁöÑÂ∫èÂàóÂåñÊñπÂºè</span>
<span class="w">        </span><span class="n">template</span><span class="p">.</span><span class="na">setKeySerializer</span><span class="p">(</span><span class="n">RedisSerializer</span><span class="p">.</span><span class="na">string</span><span class="p">());</span>
<span class="w">        </span><span class="c1">//hash ÁöÑ key ‰πüÈááÁî® String ÁöÑÂ∫èÂàóÂåñÊñπÂºè</span>
<span class="w">        </span><span class="n">template</span><span class="p">.</span><span class="na">setHashKeySerializer</span><span class="p">(</span><span class="n">stringRedisSerializer</span><span class="p">);</span>
<span class="w">        </span><span class="c1">//value Â∫èÂàóÂåñÊñπÂºèÈááÁî® jackson</span>
<span class="w">        </span><span class="n">template</span><span class="p">.</span><span class="na">setValueSerializer</span><span class="p">(</span><span class="n">jackson2JsonRedisSerializer</span><span class="p">);</span>
<span class="w">        </span><span class="c1">//hash ÁöÑ value Â∫èÂàóÂåñÊñπÂºèÈááÁî® jackson</span>
<span class="w">        </span><span class="n">template</span><span class="p">.</span><span class="na">setHashValueSerializer</span><span class="p">(</span><span class="n">jackson2JsonRedisSerializer</span><span class="p">);</span>
<span class="w">        </span><span class="n">template</span><span class="p">.</span><span class="na">afterPropertiesSet</span><span class="p">();</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">template</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="kd">class</span> <span class="nc">Redis02SpringbootApplicationTests</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="nd">@Qualifier</span><span class="p">(</span><span class="s">&quot;redisTemplate&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">RedisTemplate</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">redisTemplate</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">JsonProcessingException</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">(</span><span class="s">&quot;Orichalcos&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="w">        </span><span class="c1">//String jsonUser = new ObjectMapper().writeValueAsString(user);</span>
<span class="w">        </span><span class="n">redisTemplate</span><span class="p">.</span><span class="na">opsForValue</span><span class="p">().</span><span class="na">set</span><span class="p">(</span><span class="s">&quot;user&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">jsonUser</span><span class="p">);</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">redisTemplate</span><span class="p">.</span><span class="na">opsForValue</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;user&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="72-redis">7.2„ÄÅËé∑Âèñ Redis ËøûÊé•‰ø°ÊÅØ<a class="headerlink" href="#72-redis" title="Permanent link">&para;</a></h3>
<p>Ëé∑Âèñ Redis ËøûÊé•ÁöÑ‰∏ªÊú∫ÂêçÂíåÁ´ØÂè£ÊòØÁî± Redis ÂÆ¢Êà∑Á´ØÂ∫ìËá™Ë∫´Êèê‰æõÁöÑÂäüËÉΩ„ÄÇËøô‰∫õÁªÜËäÇÂú®‰∏çÂêåÁöÑÂÆ¢Êà∑Á´ØÂ∫ìÔºàÂ¶Ç Jedis Âíå LettuceÔºâ‰∏≠ÂèØËÉΩÊúâÊâÄ‰∏çÂêå„ÄÇ</p>
<p>ÂØπ‰∫é Jedis ÂÆ¢Êà∑Á´ØÂ∫ìÔºåÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ãÊñπÂºèËé∑ÂèñËøûÊé•‰ø°ÊÅØÔºö</p>
<div class="highlight"><pre><span></span><code><span class="n">JedisConnectionFactory</span><span class="w"> </span><span class="n">jedisConnectionFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">JedisConnectionFactory</span><span class="p">)</span><span class="w"> </span><span class="n">redisTemplate</span><span class="p">.</span><span class="na">getConnectionFactory</span><span class="p">();</span>
<span class="n">String</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jedisConnectionFactory</span><span class="p">.</span><span class="na">getHostName</span><span class="p">();</span>
<span class="kt">int</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jedisConnectionFactory</span><span class="p">.</span><span class="na">getPort</span><span class="p">();</span>
</code></pre></div>
<p>ÂØπ‰∫é Lettuce ÂÆ¢Êà∑Á´ØÂ∫ìÔºåËé∑ÂèñËøûÊé•‰ø°ÊÅØÁöÑÊñπÂºèÂèØËÉΩ‰ºöÊúâÊâÄ‰∏çÂêåÔºö</p>
<div class="highlight"><pre><span></span><code><span class="n">LettuceConnectionFactory</span><span class="w"> </span><span class="n">lettuceConnectionFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">LettuceConnectionFactory</span><span class="p">)</span><span class="w"> </span><span class="n">redisTemplate</span><span class="p">.</span><span class="na">getConnectionFactory</span><span class="p">();</span>
<span class="n">RedisURI</span><span class="w"> </span><span class="n">redisUri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lettuceConnectionFactory</span><span class="p">.</span><span class="na">getStandaloneConfiguration</span><span class="p">().</span><span class="na">getClientOptions</span><span class="p">().</span><span class="na">getUris</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="n">String</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">redisUri</span><span class="p">.</span><span class="na">getHost</span><span class="p">();</span>
<span class="kt">int</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">redisUri</span><span class="p">.</span><span class="na">getPort</span><span class="p">();</span>
</code></pre></div>
<h2 id="8redis">8„ÄÅRedis ÈÖçÁΩÆËØ¶Ëß£<a class="headerlink" href="#8redis" title="Permanent link">&para;</a></h2>
<h3 id="81redisconf">8.1„ÄÅredis.conf ËØ¶Ëß£<a class="headerlink" href="#81redisconf" title="Permanent link">&para;</a></h3>
<h4 id="811">8.1.1„ÄÅÂçï‰Ωç<a class="headerlink" href="#811" title="Permanent link">&para;</a></h4>
<p><img src="!assets/Redis/image-20210531165111502.png" alt="image-20210531165111502" style="" /></p>
<p>Âçï‰ΩçÂ§ßÂ∞èÂÜô‰∏çÊïèÊÑüÔºå<code>1GB</code>„ÄÅ<code>1Gb</code>„ÄÅ<code>1gB</code>ÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ</p>
<h4 id="812">8.1.2„ÄÅÂåÖÂê´<a class="headerlink" href="#812" title="Permanent link">&para;</a></h4>
<p>INCLOUDESÔºö</p>
<p><img src="!assets/Redis/image-20210531171044748.png" alt="image-20210531171044748" style="" /></p>
<p>ÂèØ‰ª•ÊääÂ§ö‰∏™ÈÖçÁΩÆÊñá‰ª∂ÂåÖÂê´ËøõÊù•ÔºåÂ¶ÇÊûúÂ∞ÜÊ≠§ÈÖçÁΩÆÂÜôÂú® redis.conf Êñá‰ª∂ÁöÑÂºÄÂ§¥ÔºåÈÇ£‰πàÂêéÈù¢ÁöÑÈÖçÁΩÆ‰ºöË¶ÜÁõñÂºïÂÖ•Êñá‰ª∂ÁöÑÈÖçÁΩÆÔºåÂ¶ÇÊûúÊÉ≥‰ª•ÂºïÂÖ•Êñá‰ª∂ÁöÑÈÖçÁΩÆ‰∏∫‰∏ªÔºåÈÇ£‰πàÈúÄË¶ÅÂ∞Ü include ÈÖçÁΩÆÂÜôÂú® redis.conf Êñá‰ª∂ÁöÑÊú´Â∞æ</p>
<h4 id="813">8.1.3„ÄÅÁΩëÁªú<a class="headerlink" href="#813" title="Permanent link">&para;</a></h4>
<p>NETWORKÔºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">## ÁªëÂÆöÁöÑIPÔºåÈªòËÆ§‰∏∫Êú¨Êú∫Âú∞ÂùÄÔºåÂ¶ÇÊûú‰∏çÈôêÂà∂ÂèØ‰ª•Âú®ÂâçÈù¢Âä† # Ê≥®ÈáäÊéâ</span>
<span class="nb">bind</span><span class="w"> </span><span class="m">172</span>.0.0.1

<span class="c1">## ‰øùÊä§Ê®°ÂºèÔºåÂ¶ÇÊûúÊÉ≥Ë¶ÅËøúÁ®ãËÆøÈóÆÔºåËøô‰∏™Ë¶ÅÂÖ≥Êéâ</span>
protected-mode<span class="w"> </span>no

<span class="c1">## Á´ØÂè£Âè∑</span>
prot<span class="w"> </span><span class="m">6379</span>

<span class="c1">## ËÆæÁΩÆÂÆ¢Êà∑Á´ØËøûÊé•Êó∂ÁöÑË∂ÖÊó∂Êó∂Èó¥ÔºåÂçï‰Ωç‰∏∫Áßí„ÄÇÂΩìÂÆ¢Êà∑Á´ØÂú®ËøôÊÆµÊó∂Èó¥ÂÜÖÊ≤°ÊúâÂèëÂá∫‰ªª‰ΩïÊåá‰ª§ÔºåÈÇ£‰πàÂÖ≥Èó≠ËØ•ËøûÊé•</span>
<span class="c1">## 0ÊòØÂÖ≥Èó≠Ê≠§ËÆæÁΩÆ</span>
timeout<span class="w"> </span><span class="m">0</span>
</code></pre></div>
<h4 id="814">8.1.4„ÄÅÈÄöÁî®<a class="headerlink" href="#814" title="Permanent link">&para;</a></h4>
<p>GENERALÔºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">## ‰ª•ÂÆàÊä§Á∫øÁ®ãÁöÑÊñπÂºèËøêË°å</span>
<span class="c1">## Â¶ÇÊûú‰Ω† systemctl Êù•ÁÆ°ÁêÜ Redis ÊúçÂä°ÔºàÂç≥ÈÄöËøá systemd ÂêØÂä® RedisÔºâÔºåÂ∞±ÂøÖÈ°ªÊääËøôÈáåÊîπ‰∏∫ no</span>
deamonize<span class="w"> </span>yes

<span class="c1">## Â¶ÇÊûú‰ª•ÂêéÂè∞ÁöÑÊñπÂºèËøêË°åÔºåÈÇ£‰πàÂ∞±ÈúÄË¶ÅÊåáÂÆö‰∏Ä‰∏™ pid Êñá‰ª∂</span>
pidfile<span class="w"> </span>/var/run/redis/redis-server.pid

<span class="c1">## ÊåáÂÆöÊó•ÂøóËÆ∞ÂΩïÁ∫ßÂà´</span>
<span class="c1">## RedisÊÄªÂÖ±ÊîØÊåÅÂõõ‰∏™Á∫ßÂà´Ôºödebug„ÄÅverbose„ÄÅnotice„ÄÅwarning</span>
<span class="c1">## debug ËÆ∞ÂΩïÂæàÂ§ö‰ø°ÊÅØÔºåÁî®‰∫éÂºÄÂèëÂíåÊµãËØï</span>
<span class="c1">## varbose ÊúâÁî®ÁöÑ‰ø°ÊÅØÔºå‰∏çÂÉèdebug‰ºöËÆ∞ÂΩïÈÇ£‰πàÂ§ö</span>
<span class="c1">## notice ÊôÆÈÄöÁöÑverboseÔºåÂ∏∏Áî®‰∫éÁîü‰∫ßÁéØÂ¢É</span>
<span class="c1">## warning Âè™ÊúâÈùûÂ∏∏ÈáçË¶ÅÊàñËÄÖ‰∏•ÈáçÁöÑ‰ø°ÊÅØ‰ºöËÆ∞ÂΩïÂà∞Êó•Âøó</span>
loglevel<span class="w"> </span>debug

<span class="c1">## ÈÖçÁΩÆlogÊñá‰ª∂Âú∞ÂùÄ</span>
logfile<span class="w"> </span>/var/log/redis/redis.log

<span class="c1">## ÂèØÁî®Êï∞ÊçÆÂ∫ìÊï∞</span>
<span class="c1">## ÈªòËÆ§ÂÄº‰∏∫16ÔºåÈªòËÆ§Êï∞ÊçÆÂ∫ì‰∏∫0ÔºåÊï∞ÊçÆÂ∫ìËåÉÂõ¥Âú®0-Ôºàdatabase-1Ôºâ‰πãÈó¥</span>
databases<span class="w"> </span><span class="m">16</span>

<span class="c1">## ÊòØÂê¶ÊÄªÊòØÊòæÁ§∫ logo</span>
always-show-logo<span class="w"> </span>yes
</code></pre></div>
<h4 id="815">8.1.5„ÄÅÂø´ÁÖß<a class="headerlink" href="#815" title="Permanent link">&para;</a></h4>
<p>SNAPSHOTTINGÔºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">## ÊåáÂá∫Âú®Â§öÈïøÊó∂Èó¥ÂÜÖÔºåÊúâÂ§öÂ∞ëÊ¨°Êõ¥Êñ∞Êìç‰ΩúÔºåÂ∞±Â∞ÜÊï∞ÊçÆÂêåÊ≠•Âà∞Êï∞ÊçÆÊñá‰ª∂rdb„ÄÇ</span>
<span class="c1">## Áõ∏ÂΩì‰∫éÊù°‰ª∂Ëß¶ÂèëÊäìÂèñÂø´ÁÖßÔºåËøô‰∏™ÂèØ‰ª•Â§ö‰∏™Êù°‰ª∂ÈÖçÂêà</span>
<span class="c1">#</span>
<span class="c1">## ÊØîÂ¶ÇÈªòËÆ§ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑËÆæÁΩÆÔºåÂ∞±ËÆæÁΩÆ‰∫Ü‰∏â‰∏™Êù°‰ª∂</span>
<span class="c1">#</span>
<span class="c1">## save 900 1 900ÁßíÂÜÖËá≥Â∞ëÊúâ1‰∏™keyË¢´ÊîπÂèò</span>
<span class="c1">## save 300 10 300ÁßíÂÜÖËá≥Â∞ëÊúâ300‰∏™keyË¢´ÊîπÂèò</span>
<span class="c1">## save 60 10000 60ÁßíÂÜÖËá≥Â∞ëÊúâ10000‰∏™keyË¢´ÊîπÂèò</span>

save<span class="w"> </span><span class="m">900</span><span class="w"> </span><span class="m">1</span>
save<span class="w"> </span><span class="m">300</span><span class="w"> </span><span class="m">10</span>
save<span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">10000</span>

<span class="c1">## ÂàõÂª∫Âø´ÁÖßÂá∫ÈîôÂêéÊòØÂê¶ÂÅúÊ≠¢ÂÜôÂÖ•</span>
stop-writes-on-bgsave-error<span class="w"> </span>yes

<span class="c1">## Â≠òÂÇ®Ëá≥Êú¨Âú∞Êï∞ÊçÆÂ∫ìÊó∂ÔºàÊåÅ‰πÖÂåñÂà∞rdbÊñá‰ª∂ÔºâÊòØÂê¶ÂéãÁº©Êï∞ÊçÆ</span>
rdbcompression<span class="w"> </span>yes

<span class="c1">## ‰øùÂ≠ò rdb Êñá‰ª∂Êó∂ÔºåËøõË°åÈîôËØØÁöÑÊ£ÄÊü•Ê†°Ê£Ä</span>
rdbchecksum<span class="w"> </span>yes

<span class="c1">## Êú¨Âú∞ÊåÅ‰πÖÂåñÊï∞ÊçÆÂ∫ìÊñá‰ª∂Âêç</span>
dbfilename<span class="w"> </span>dump.rdb

<span class="c1">## Â∑•‰ΩúÁõÆÂΩï</span>
<span class="c1">#</span>
<span class="c1">## Êï∞ÊçÆÂ∫ìÈïúÂÉèÂ§á‰ªΩÁöÑÊñá‰ª∂ÊîæÁΩÆÁöÑË∑ØÂæÑ„ÄÇ</span>
<span class="c1">## ËøôÈáåÁöÑË∑ØÂæÑË∑üÊñá‰ª∂ÂêçË¶ÅÂàÜÂºÄÈÖçÁΩÆÊòØÂõ†‰∏∫redisÂú®ËøõË°åÂ§á‰ªΩÊó∂ÔºåÂÖà‰ºöÂ∞ÜÂΩìÂâçÊï∞ÊçÆÂ∫ìÁöÑÁä∂ÊÄÅÂÜôÂÖ•Âà∞‰∏Ä‰∏™‰∏¥Êó∂Êñá‰ª∂‰∏≠ÔºåÁ≠âÂ§á‰ªΩÂÆåÊàêÊó∂Ôºå</span>
<span class="c1">## ÂÜçÊääËØ•ËØ•‰∏¥Êó∂Êñá‰ª∂ÊõøÊç¢‰∏∫‰∏äÈù¢ÊâÄÊåáÂÆöÁöÑÊñá‰ª∂ÔºåËÄåËøôÈáåÁöÑ‰∏¥Êó∂Êñá‰ª∂Âíå‰∏äÈù¢ÊâÄÈÖçÁΩÆÁöÑÂ§á‰ªΩÊñá‰ª∂ÈÉΩ‰ºöÊîæÂú®Ëøô‰∏™ÊåáÂÆöÁöÑË∑ØÂæÑÂΩì‰∏≠„ÄÇ</span>
<span class="c1">#</span>
<span class="c1">## AOFÊñá‰ª∂‰πü‰ºöÂ≠òÊîæÂú®Ëøô‰∏™ÁõÆÂΩï‰∏ãÈù¢</span>
<span class="c1">#</span>
<span class="c1">## Ê≥®ÊÑèËøôÈáåÂøÖÈ°ªÊåáÂÆö‰∏Ä‰∏™ÁõÆÂΩïËÄå‰∏çÊòØÊñá‰ª∂</span>
dir<span class="w"> </span>./
</code></pre></div>
<h4 id="816">8.1.6„ÄÅÂ§çÂà∂<a class="headerlink" href="#816" title="Permanent link">&para;</a></h4>
<p>REPLICATIONÔºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">## ‰∏ª‰ªéÂ§çÂà∂. ËÆæÁΩÆËØ•Êï∞ÊçÆÂ∫ì‰∏∫ÂÖ∂‰ªñÊï∞ÊçÆÂ∫ìÁöÑ‰ªéÊï∞ÊçÆÂ∫ì.</span>
<span class="c1">## ËÆæÁΩÆÂΩìÊú¨Êú∫‰∏∫slaveÊúçÂä°Êó∂ÔºåËÆæÁΩÆmasterÊúçÂä°ÁöÑIPÂú∞ÂùÄÂèäÁ´ØÂè£ÔºåÂú®RedisÂêØÂä®Êó∂ÔºåÂÆÉ‰ºöËá™Âä®‰ªémasterËøõË°åÊï∞ÊçÆÂêåÊ≠•</span>
<span class="c1">#</span>
<span class="c1">## replicaof &lt;masterip&gt; &lt;masterport&gt;</span>

<span class="c1">## ÂΩìmasterÊúçÂä°ËÆæÁΩÆ‰∫ÜÂØÜÁ†Å‰øùÊä§Êó∂(Áî®requirepassÂà∂ÂÆöÁöÑÂØÜÁ†Å)</span>
<span class="c1">## slavÊúçÂä°ËøûÊé•masterÁöÑÂØÜÁ†Å</span>
<span class="c1">#</span>
<span class="c1">## masterauth &lt;master-password&gt;</span>

<span class="c1">## ÂΩì‰ªéÂ∫ìÂêå‰∏ªÊú∫Â§±ÂéªËøûÊé•ÊàñËÄÖÂ§çÂà∂Ê≠£Âú®ËøõË°åÔºå‰ªéÊú∫Â∫ìÊúâ‰∏§ÁßçËøêË°åÊñπÂºèÔºö</span>
<span class="c1">#</span>
<span class="c1">## 1) Â¶ÇÊûúreplica-serve-stale-dataËÆæÁΩÆ‰∏∫yes(ÈªòËÆ§ËÆæÁΩÆ)Ôºå‰ªéÂ∫ì‰ºöÁªßÁª≠Áõ∏Â∫îÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±Ç</span>
<span class="c1">#</span>
<span class="c1">## 2) Â¶ÇÊûúreplica-serve-stale-dataÊòØÊåá‰∏∫noÔºåÈô§ÂéªINFOÂíåSLAVOFÂëΩ‰ª§‰πãÂ§ñÁöÑ‰ªª‰ΩïËØ∑Ê±ÇÈÉΩ‰ºöËøîÂõû‰∏Ä‰∏™</span>
<span class="c1">## ÈîôËØØ&quot;SYNC with master in progress&quot;</span>
<span class="c1">#</span>
replica-serve-stale-data<span class="w"> </span>yes

<span class="c1">## ‰ªéÂ∫ì‰ºöÊåâÁÖß‰∏Ä‰∏™Êó∂Èó¥Èó¥ÈöîÂêë‰∏ªÂ∫ìÂèëÈÄÅPINGs.ÂèØ‰ª•ÈÄöËøárepl-ping-replica-periodËÆæÁΩÆËøô‰∏™Êó∂Èó¥Èó¥ÈöîÔºåÈªòËÆ§ÊòØ10Áßí</span>
<span class="c1">#</span>
<span class="c1">## repl-ping-replica-period 10</span>

<span class="c1">## ‚ÄúÂøÉË∑≥Ê£ÄÊµã‚Äù Ëøô‰∏™ÂÄºÂØπ‰∏â‰∏™Âú∫ÊôØÈÉΩÊúâÊïàÔºö</span>
<span class="c1">## Â§ßÈáèÁöÑI/OÊìç‰ΩúÔºå‰ªéËäÇÁÇπÊî∂Âà∞‰∏ªËäÇÁÇπÁöÑÂìçÂ∫îÊó∂Èó¥„ÄÇ</span>
<span class="c1">## ‰ªéËäÇÁÇπËÆ§‰∏∫‰∏ªËäÇÁÇπÁöÑË∂ÖÊó∂Êó∂Èó¥</span>
<span class="c1">## ‰∏ªËäÇÁÇπËÆ§‰∏∫‰ªéËäÇÁÇπÁöÑË∂ÖÊó∂Êó∂Èó¥</span>
<span class="c1">## repl-timeout 60</span>
</code></pre></div>
<h4 id="817">8.1.7„ÄÅÂÆâÂÖ®<a class="headerlink" href="#817" title="Permanent link">&para;</a></h4>
<p>SECURITYÔºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">## ËÆæÁΩÆÂÆ¢Êà∑Á´ØËøûÊé•ÂêéËøõË°å‰ªª‰ΩïÂÖ∂‰ªñÊåáÂÆöÂâçÈúÄË¶Å‰ΩøÁî®ÁöÑÂØÜÁ†Å„ÄÇ</span>
<span class="c1">## Ë≠¶ÂëäÔºöÂõ†‰∏∫redisÈÄüÂ∫¶Áõ∏ÂΩìÂø´ÔºåÊâÄ‰ª•Âú®‰∏ÄÂè∞ÊØîËæÉÂ•ΩÁöÑÊúçÂä°Âô®‰∏ãÔºå‰∏Ä‰∏™Â§ñÈÉ®ÁöÑÁî®Êà∑ÂèØ‰ª•Âú®‰∏ÄÁßíÈíüËøõË°å150KÊ¨°ÁöÑÂØÜÁ†ÅÂ∞ùËØïÔºå</span>
<span class="c1">## ËøôÊÑèÂë≥ÁùÄ‰Ω†ÈúÄË¶ÅÊåáÂÆöÈùûÂ∏∏ÈùûÂ∏∏Âº∫Â§ßÁöÑÂØÜÁ†ÅÊù•Èò≤Ê≠¢Êö¥ÂäõÁ†¥Ëß£</span>
<span class="c1">## </span>
<span class="c1">## ÂèñÊ∂à‰ª•‰∏ãÊ≥®ÈáäÂπ∂‰øÆÊîπ foobared Êù•Ê∞∏‰πÖËÆæÁΩÆÂØÜÁ†Å</span>
<span class="c1">## requirepass foobared</span>
</code></pre></div>
<p>‰πüÂèØ‰ª•ÈÄöËøáÂëΩ‰ª§Êù•ËÆæÁΩÆËøô‰∏™ÂØÜÁ†ÅÔºö</p>
<div class="highlight"><pre><span></span><code>config<span class="w"> </span><span class="nb">set</span><span class="w"> </span>requirepass<span class="w"> </span><span class="s2">&quot;123456&quot;</span>
</code></pre></div>
<p>Ëé∑ÂèñÂØÜÁ†ÅÔºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">## Ëé∑ÂèñÂâçÈúÄË¶ÅÈ™åËØÅ</span>
auth<span class="w"> </span><span class="m">123456</span>

<span class="c1">## Ëé∑ÂèñÂØÜÁ†Å</span>
config<span class="w"> </span>get<span class="w"> </span>requirepass
</code></pre></div>
<h4 id="818">8.1.8„ÄÅÂÆ¢Êà∑Á´Ø<a class="headerlink" href="#818" title="Permanent link">&para;</a></h4>
<p>CLIENTSÔºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">## ËÆæÁΩÆÂêå‰∏ÄÊó∂Èó¥ÊúÄÂ§ßÂÆ¢Êà∑Á´ØËøûÊé•Êï∞ÔºåÈªòËÆ§Êó†ÈôêÂà∂ÔºåRedisÂèØ‰ª•ÂêåÊó∂ÊâìÂºÄÁöÑÂÆ¢Êà∑Á´ØËøûÊé•Êï∞‰∏∫RedisËøõÁ®ãÂèØ‰ª•ÊâìÂºÄÁöÑÊúÄÂ§ßÊñá‰ª∂ÊèèËø∞Á¨¶Êï∞Ôºå</span>
<span class="c1">## Â¶ÇÊûúËÆæÁΩÆ maxclients 0ÔºåË°®Á§∫‰∏ç‰ΩúÈôêÂà∂„ÄÇ</span>
<span class="c1">## ÂΩìÂÆ¢Êà∑Á´ØËøûÊé•Êï∞Âà∞ËææÈôêÂà∂Êó∂ÔºåRedis‰ºöÂÖ≥Èó≠Êñ∞ÁöÑËøûÊé•Âπ∂ÂêëÂÆ¢Êà∑Á´ØËøîÂõûmax number of clients reachedÈîôËØØ‰ø°ÊÅØ</span>
<span class="c1">#</span>
<span class="c1">## maxclients 10000</span>
</code></pre></div>
<h4 id="819">8.1.9„ÄÅÂÜÖÂ≠òÁÆ°ÁêÜ<a class="headerlink" href="#819" title="Permanent link">&para;</a></h4>
<p>MEMORY MANAGEMENTÔºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">## ÊåáÂÆöRedisÊúÄÂ§ßÂÜÖÂ≠òÈôêÂà∂ÔºåRedisÂú®ÂêØÂä®Êó∂‰ºöÊääÊï∞ÊçÆÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠ÔºåËææÂà∞ÊúÄÂ§ßÂÜÖÂ≠òÂêéÔºåRedis‰ºöÂÖàÂ∞ùËØïÊ∏ÖÈô§Â∑≤Âà∞ÊúüÊàñÂç≥Â∞ÜÂà∞ÊúüÁöÑKey</span>
<span class="c1">## RedisÂêåÊó∂‰πü‰ºöÁßªÈô§Á©∫ÁöÑlistÂØπË±°</span>
<span class="c1">#</span>
<span class="c1">## ÂΩìÊ≠§ÊñπÊ≥ïÂ§ÑÁêÜÂêéÔºå‰ªçÁÑ∂Âà∞ËææÊúÄÂ§ßÂÜÖÂ≠òËÆæÁΩÆÔºåÂ∞ÜÊó†Ê≥ïÂÜçËøõË°åÂÜôÂÖ•Êìç‰ΩúÔºå‰ΩÜ‰ªçÁÑ∂ÂèØ‰ª•ËøõË°åËØªÂèñÊìç‰Ωú</span>
<span class="c1">#</span>
<span class="c1">## Ê≥®ÊÑèÔºöRedisÊñ∞ÁöÑvmÊú∫Âà∂Ôºå‰ºöÊääKeyÂ≠òÊîæÂÜÖÂ≠òÔºåValue‰ºöÂ≠òÊîæÂú®swapÂå∫</span>
<span class="c1">#</span>
<span class="c1">## maxmemoryÁöÑËÆæÁΩÆÊØîËæÉÈÄÇÂêà‰∫éÊääredisÂΩì‰Ωú‰∫éÁ±ª‰ººmemcachedÁöÑÁºìÂ≠òÊù•‰ΩøÁî®ÔºåËÄå‰∏çÈÄÇÂêàÂΩìÂÅö‰∏Ä‰∏™ÁúüÂÆûÁöÑDB„ÄÇ</span>
<span class="c1">## ÂΩìÊääRedisÂΩìÂÅö‰∏Ä‰∏™ÁúüÂÆûÁöÑÊï∞ÊçÆÂ∫ì‰ΩøÁî®ÁöÑÊó∂ÂÄôÔºåÂÜÖÂ≠ò‰ΩøÁî®Â∞ÜÊòØ‰∏Ä‰∏™ÂæàÂ§ßÁöÑÂºÄÈîÄ</span>
<span class="c1">## maxmemory &lt;bytes&gt;</span>

<span class="c1">## ÂΩìÂÜÖÂ≠òËææÂà∞ÊúÄÂ§ßÂÄºÁöÑÊó∂ÂÄôRedis‰ºöÈÄâÊã©Âà†Èô§Âì™‰∫õÊï∞ÊçÆÔºüÊúâ‰∫îÁßçÊñπÂºèÂèØ‰æõÈÄâÊã©</span>
<span class="c1">#</span>
<span class="c1">## volatile-lru -&gt; Âà©Áî®LRUÁÆóÊ≥ïÁßªÈô§ËÆæÁΩÆËøáËøáÊúüÊó∂Èó¥ÁöÑkey (LRU:ÊúÄËøë‰ΩøÁî® Least Recently Used )</span>
<span class="c1">## allkeys-lru -&gt; Âà©Áî®LRUÁÆóÊ≥ïÁßªÈô§‰ªª‰Ωïkey</span>
<span class="c1">## volatile-lfu -&gt; Âà©Áî®LFUÁÆóÊ≥ïÁßªÈô§ËÆæÁΩÆËøáËøáÊúüÊó∂Èó¥ÁöÑkey (LRU:ÊúÄÂ∞ë‰ΩøÁî® Least Frequently Used )</span>
<span class="c1">## allkeys-lfu -&gt; Âà©Áî®LFUÁÆóÊ≥ïÁßªÈô§‰ªª‰Ωïkey</span>
<span class="c1">## volatile-random -&gt; ÁßªÈô§ËÆæÁΩÆËøáËøáÊúüÊó∂Èó¥ÁöÑÈöèÊú∫key</span>
<span class="c1">## allkeys-&gt;random -&gt; remove a random key, any key (ÈöèÊú∫Âà†Èô§)</span>
<span class="c1">## volatile-ttl -&gt; ÁßªÈô§Âç≥Â∞ÜËøáÊúüÁöÑkey(minor TTL)</span>
<span class="c1">## noeviction -&gt; ‰∏çÁßªÈô§‰ªª‰ΩïkeyÔºåÂè™ÊòØËøîÂõû‰∏Ä‰∏™ÂÜôÈîôËØØ</span>
<span class="c1">#</span>
<span class="c1">## Ê≥®ÊÑèÔºöÂØπ‰∫é‰∏äÈù¢ÁöÑÁ≠ñÁï•ÔºåÂ¶ÇÊûúÊ≤°ÊúâÂêàÈÄÇÁöÑkeyÂèØ‰ª•ÁßªÈô§ÔºåÂΩìÂÜôÁöÑÊó∂ÂÄôRedis‰ºöËøîÂõû‰∏Ä‰∏™ÈîôËØØ</span>
<span class="c1">#</span>
<span class="c1">## ÂÜôÂëΩ‰ª§ÂåÖÊã¨: set setnx setex append</span>
<span class="c1">## incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd</span>
<span class="c1">## sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby</span>
<span class="c1">## zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby</span>
<span class="c1">## getset mset msetnx exec sort</span>
<span class="c1">#</span>
<span class="c1">## ÈªòËÆ§ÊòØ:</span>
<span class="c1">#</span>
<span class="c1">## maxmemory-policy volatile-lru</span>
</code></pre></div>
<h4 id="8110aof">8.1.10„ÄÅAOF Ê®°Âºè<a class="headerlink" href="#8110aof" title="Permanent link">&para;</a></h4>
<p>AOF APPEND ONLY MODEÔºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">## ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåredis‰ºöÂú®ÂêéÂè∞ÂºÇÊ≠•ÁöÑÊääÊï∞ÊçÆÂ∫ìÈïúÂÉèÂ§á‰ªΩÂà∞Á£ÅÁõòÔºå‰ΩÜÊòØËØ•Â§á‰ªΩÊòØÈùûÂ∏∏ËÄóÊó∂ÁöÑÔºåËÄå‰∏îÂ§á‰ªΩ‰πü‰∏çËÉΩÂæàÈ¢ëÁπÅÔºå</span>
<span class="c1">## Â¶ÇÊûúÂèëÁîüËØ∏Â¶ÇÊãâÈó∏ÈôêÁîµ„ÄÅÊãîÊèíÂ§¥Á≠âÁä∂ÂÜµÔºåÈÇ£‰πàÂ∞ÜÈÄ†ÊàêÊØîËæÉÂ§ßËåÉÂõ¥ÁöÑÊï∞ÊçÆ‰∏¢Â§±„ÄÇ</span>
<span class="c1">## ÊâÄ‰ª•redisÊèê‰æõ‰∫ÜÂè¶Â§ñ‰∏ÄÁßçÊõ¥Âä†È´òÊïàÁöÑÊï∞ÊçÆÂ∫ìÂ§á‰ªΩÂèäÁÅæÈöæÊÅ¢Â§çÊñπÂºè„ÄÇ</span>
<span class="c1">## ÂºÄÂêØappend onlyÊ®°Âºè‰πãÂêéÔºåredis‰ºöÊääÊâÄÊé•Êî∂Âà∞ÁöÑÊØè‰∏ÄÊ¨°ÂÜôÊìç‰ΩúËØ∑Ê±ÇÈÉΩËøΩÂä†Âà∞appendonly.aofÊñá‰ª∂‰∏≠Ôºå</span>
<span class="c1">## ÂΩìredisÈáçÊñ∞ÂêØÂä®Êó∂Ôºå‰ºö‰ªéËØ•Êñá‰ª∂ÊÅ¢Â§çÂá∫‰πãÂâçÁöÑÁä∂ÊÄÅ„ÄÇ</span>
<span class="c1">## ‰ΩÜÊòØËøôÊ†∑‰ºöÈÄ†Êàêappendonly.aofÊñá‰ª∂ËøáÂ§ßÔºåÊâÄ‰ª•redisËøòÊîØÊåÅ‰∫Ü BGREWRITEAOF Êåá‰ª§ÔºåÂØπ appendonly.aof ËøõË°åÈáçÊñ∞Êï¥ÁêÜ„ÄÇ</span>
<span class="c1">## ‰Ω†ÂèØ‰ª•ÂêåÊó∂ÂºÄÂêØasynchronous dumps Âíå AOF</span>
appendonly<span class="w"> </span>no

<span class="c1">## AOFÊñá‰ª∂ÂêçÁß∞ (ÈªòËÆ§: &quot;appendonly.aof&quot;)</span>
appendfilename<span class="w"> </span><span class="s2">&quot;appendonly.aof&quot;</span>

<span class="c1">## RedisÊîØÊåÅ‰∏âÁßçÂêåÊ≠•AOFÊñá‰ª∂ÁöÑÁ≠ñÁï•:</span>
<span class="c1">#</span>
<span class="c1">## no: ‰∏çËøõË°åÂêåÊ≠•ÔºåÁ≥ªÁªüÂéªÊìç‰Ωú . Faster.</span>
<span class="c1">## always: alwaysË°®Á§∫ÊØèÊ¨°ÊúâÂÜôÊìç‰ΩúÈÉΩËøõË°åÂêåÊ≠•. Slow, Safest.</span>
<span class="c1">## everysec: Ë°®Á§∫ÂØπÂÜôÊìç‰ΩúËøõË°åÁ¥ØÁßØÔºåÊØèÁßíÂêåÊ≠•‰∏ÄÊ¨°. Compromise.</span>
<span class="c1">#</span>
<span class="c1">## ÈªòËÆ§ÊòØ&quot;everysec&quot;ÔºåÊåâÁÖßÈÄüÂ∫¶ÂíåÂÆâÂÖ®Êäò‰∏≠ËøôÊòØÊúÄÂ•ΩÁöÑ„ÄÇ</span>
<span class="c1">## Â¶ÇÊûúÊÉ≥ËÆ©RedisËÉΩÊõ¥È´òÊïàÁöÑËøêË°åÔºå‰Ω†‰πüÂèØ‰ª•ËÆæÁΩÆ‰∏∫&quot;no&quot;ÔºåËÆ©Êìç‰ΩúÁ≥ªÁªüÂÜ≥ÂÆö‰ªÄ‰πàÊó∂ÂÄôÂéªÊâßË°å</span>
<span class="c1">## ÊàñËÄÖÁõ∏ÂèçÊÉ≥ËÆ©Êï∞ÊçÆÊõ¥ÂÆâÂÖ®‰Ω†‰πüÂèØ‰ª•ËÆæÁΩÆ‰∏∫&quot;always&quot;</span>
<span class="c1">#</span>
<span class="c1">## Â¶ÇÊûú‰∏çÁ°ÆÂÆöÂ∞±Áî® &quot;everysec&quot;.</span>

<span class="c1">## appendfsync always</span>
appendfsync<span class="w"> </span>everysec
<span class="c1">## appendfsync no</span>

<span class="c1">## bgrewriteaofÊú∫Âà∂ÔºåÂú®‰∏Ä‰∏™Â≠êËøõÁ®ã‰∏≠ËøõË°åaofÁöÑÈáçÂÜôÔºå‰ªéËÄå‰∏çÈòªÂ°û‰∏ªËøõÁ®ãÂØπÂÖ∂‰ΩôÂëΩ‰ª§ÁöÑÂ§ÑÁêÜÔºåÂêåÊó∂Ëß£ÂÜ≥‰∫ÜaofÊñá‰ª∂ËøáÂ§ßÈóÆÈ¢ò</span>
<span class="c1">## ÂêåÊó∂Âú®ÊâßË°åbgrewriteaofÊìç‰ΩúÂíå‰∏ªËøõÁ®ãÂÜôaofÊñá‰ª∂ÁöÑÊìç‰ΩúÔºå‰∏§ËÄÖÈÉΩ‰ºöÊìç‰ΩúÁ£ÅÁõòÔºåËÄåbgrewriteaofÂæÄÂæÄ‰ºöÊ∂âÂèäÂ§ßÈáèÁ£ÅÁõòÊìç‰ΩúÔºå</span>
<span class="c1">## ËøôÊ†∑Â∞±‰ºöÈÄ†Êàê‰∏ªËøõÁ®ãÂú®ÂÜôaofÊñá‰ª∂ÁöÑÊó∂ÂÄôÂá∫Áé∞ÈòªÂ°ûÁöÑÊÉÖÂΩ¢ÔºåÁé∞Âú®no-appendfsync-on-rewriteÂèÇÊï∞Âá∫Âú∫‰∫Ü„ÄÇ</span>
<span class="c1">## Â¶ÇÊûúËØ•ÂèÇÊï∞ËÆæÁΩÆ‰∏∫noÔºåÊòØÊúÄÂÆâÂÖ®ÁöÑÊñπÂºèÔºå‰∏ç‰ºö‰∏¢Â§±Êï∞ÊçÆÔºå‰ΩÜÊòØË¶ÅÂøçÂèóÈòªÂ°ûÁöÑÈóÆÈ¢ò„ÄÇ</span>
<span class="c1">## Â¶ÇÊûúËÆæÁΩÆ‰∏∫yesÂë¢ÔºüËøôÂ∞±Áõ∏ÂΩì‰∫éÂ∞ÜappendfsyncËÆæÁΩÆ‰∏∫noÔºåËøôËØ¥ÊòéÂπ∂Ê≤°ÊúâÊâßË°åÁ£ÅÁõòÊìç‰ΩúÔºåÂè™ÊòØÂÜôÂÖ•‰∫ÜÁºìÂÜ≤Âå∫Ôºå</span>
<span class="c1">## Âõ†Ê≠§ËøôÊ†∑Âπ∂‰∏ç‰ºöÈÄ†ÊàêÈòªÂ°ûÔºàÂõ†‰∏∫Ê≤°ÊúâÁ´û‰∫âÁ£ÅÁõòÔºâÔºå‰ΩÜÊòØÂ¶ÇÊûúËøô‰∏™Êó∂ÂÄôredisÊåÇÊéâÔºåÂ∞±‰ºö‰∏¢Â§±Êï∞ÊçÆ„ÄÇ</span>
<span class="c1">## ‰∏¢Â§±Â§öÂ∞ëÊï∞ÊçÆÂë¢ÔºüÂú®linuxÁöÑÊìç‰ΩúÁ≥ªÁªüÁöÑÈªòËÆ§ËÆæÁΩÆ‰∏ãÔºåÊúÄÂ§ö‰ºö‰∏¢Â§±30sÁöÑÊï∞ÊçÆ„ÄÇ</span>
no-appendfsync-on-rewrite<span class="w"> </span>no

<span class="c1">## Automatic rewrite of the append only file.</span>
<span class="c1">## AOF Ëá™Âä®ÈáçÂÜô</span>
<span class="c1">## ÂΩìAOFÊñá‰ª∂Â¢ûÈïøÂà∞‰∏ÄÂÆöÂ§ßÂ∞èÁöÑÊó∂ÂÄôRedisËÉΩÂ§üË∞ÉÁî® BGREWRITEAOF ÂØπÊó•ÂøóÊñá‰ª∂ËøõË°åÈáçÂÜô</span>
<span class="c1">#</span>
<span class="c1">## ÂÆÉÊòØËøôÊ†∑Â∑•‰ΩúÁöÑÔºöRedis‰ºöËÆ∞‰Ωè‰∏äÊ¨°ËøõË°å‰∫õÊó•ÂøóÂêéÊñá‰ª∂ÁöÑÂ§ßÂ∞è(Â¶ÇÊûú‰ªéÂºÄÊú∫‰ª•Êù•ËøòÊ≤°ËøõË°åËøáÈáçÂÜôÔºåÈÇ£Êó•Â≠êÂ§ßÂ∞èÂú®ÂºÄÊú∫ÁöÑÊó∂ÂÄôÁ°ÆÂÆö)</span>
<span class="c1">#</span>
<span class="c1">## Âü∫Á°ÄÂ§ßÂ∞è‰ºöÂêåÁé∞Âú®ÁöÑÂ§ßÂ∞èËøõË°åÊØîËæÉ„ÄÇÂ¶ÇÊûúÁé∞Âú®ÁöÑÂ§ßÂ∞èÊØîÂü∫Á°ÄÂ§ßÂ∞èÂ§ßÂà∂ÂÆöÁöÑÁôæÂàÜÊØîÔºåÈáçÂÜôÂäüËÉΩÂ∞ÜÂêØÂä®</span>
<span class="c1">## ÂêåÊó∂ÈúÄË¶ÅÊåáÂÆö‰∏Ä‰∏™ÊúÄÂ∞èÂ§ßÂ∞èÁî®‰∫éAOFÈáçÂÜôÔºåËøô‰∏™Áî®‰∫éÈòªÊ≠¢Âç≥‰ΩøÊñá‰ª∂ÂæàÂ∞è‰ΩÜÊòØÂ¢ûÈïøÂπÖÂ∫¶ÂæàÂ§ß‰πüÂéªÈáçÂÜôAOFÊñá‰ª∂ÁöÑÊÉÖÂÜµ</span>
<span class="c1">#</span>
<span class="c1">## auto-aof-rewrite-percentage:aofÊñá‰ª∂Â¢ûÈïøÊØî‰æãÔºåÊåáÂΩìÂâçaofÊñá‰ª∂ÊØî‰∏äÊ¨°ÈáçÂÜôÁöÑÂ¢ûÈïøÊØî‰æãÂ§ßÂ∞è„ÄÇ</span>
<span class="c1">## aofÈáçÂÜôÂç≥Âú®aofÊñá‰ª∂Âú®‰∏ÄÂÆöÂ§ßÂ∞è‰πãÂêéÔºåÈáçÊñ∞Â∞ÜÊï¥‰∏™ÂÜÖÂ≠òÂÜôÂà∞aofÊñá‰ª∂ÂΩì‰∏≠Ôºå‰ª•ÂèçÊò†ÊúÄÊñ∞ÁöÑÁä∂ÊÄÅ(Áõ∏ÂΩì‰∫ébgsave)„ÄÇ</span>
<span class="c1">## ËøôÊ†∑Â∞±ÈÅøÂÖç‰∫ÜaofÊñá‰ª∂ËøáÂ§ßËÄåÂÆûÈôÖÂÜÖÂ≠òÊï∞ÊçÆÂ∞èÁöÑÈóÆÈ¢ò(È¢ëÁπÅ‰øÆÊîπÊï∞ÊçÆÈóÆÈ¢ò).ËÆæÁΩÆ percentage ‰∏∫0Â∞±ÂÖ≥Èó≠Ëøô‰∏™ÁâπÊÄß</span>
<span class="c1">## </span>
<span class="c1">## auto-aof-rewrite-percentage:aofÊñá‰ª∂ÈáçÂÜôÊúÄÂ∞èÁöÑÊñá‰ª∂Â§ßÂ∞èÔºåÂç≥ÊúÄÂºÄÂßãaofÊñá‰ª∂ÂøÖÈ°ªË¶ÅËææÂà∞Ëøô‰∏™Â§ßÂ∞èÊâçËß¶ÂèëÔºå</span>
<span class="c1">## ÂêéÈù¢ÁöÑÊØèÊ¨°ÈáçÂÜôÂ∞±‰∏ç‰ºöÊ†πÊçÆËøô‰∏™ÂèòÈáè‰∫Ü(Ê†πÊçÆ‰∏ä‰∏ÄÊ¨°ÈáçÂÜôÂÆåÊàê‰πãÂêéÁöÑÂ§ßÂ∞è).</span>
<span class="c1">## Ê≠§ÂèòÈáè‰ªÖÂàùÂßãÂåñÂêØÂä®redisÊúâÊïàÔºåÂ¶ÇÊûúÊòØredisÊÅ¢Â§çÊó∂ÔºåÂàôlastSizeÁ≠â‰∫éÂàùÂßãaofÊñá‰ª∂Â§ßÂ∞è.</span>
auto-aof-rewrite-percentage<span class="w"> </span><span class="m">100</span>
auto-aof-rewrite-min-size<span class="w"> </span>64mb
</code></pre></div>
<h4 id="8111">8.1.11„ÄÅÈõÜÁæ§<a class="headerlink" href="#8111" title="Permanent link">&para;</a></h4>
<p>REDIS CLUSTERÔºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">## Âè™ÊúâÂºÄÂêØ‰∫Ü‰ª•‰∏ãÈÄâÈ°πÔºåredisÊâçËÉΩÊàê‰∏∫ÈõÜÁæ§ÊúçÂä°ÁöÑ‰∏ÄÈÉ®ÂàÜ</span>
<span class="c1">## cluster-enabled yes</span>

<span class="c1">## ÈÖçÁΩÆredisËá™Âä®ÁîüÊàêÁöÑÈõÜÁæ§ÈÖçÁΩÆÊñá‰ª∂Âêç„ÄÇÁ°Æ‰øùÂêå‰∏ÄÁ≥ªÁªü‰∏≠ËøêË°åÁöÑÂêÑredisÂÆû‰æãËØ•ÈÖçÁΩÆÊñá‰ª∂‰∏çË¶ÅÈáçÂêç„ÄÇ</span>
<span class="c1">## ‰∏ªË¶ÅÁî®‰∫éËÆ∞ÂΩïÈõÜÁæ§‰∏≠ÊúâÂì™‰∫õËäÇÁÇπ„ÄÅ‰ªñ‰ª¨ÁöÑÁä∂ÊÄÅ‰ª•Âèä‰∏Ä‰∫õÊåÅ‰πÖÂåñÂèÇÊï∞Á≠âÔºåÊñπ‰æøÂú®ÈáçÂêØÊó∂ÊÅ¢Â§çËøô‰∫õÁä∂ÊÄÅ„ÄÇ</span>
<span class="c1">## cluster-config-file nodes-6379.conf</span>

<span class="c1">## ÈõÜÁæ§ËäÇÁÇπË∂ÖÊó∂ÊØ´ÁßíÊï∞„ÄÇË∂ÖÊó∂ÁöÑËäÇÁÇπÂ∞ÜË¢´ËßÜ‰∏∫‰∏çÂèØÁî®Áä∂ÊÄÅ„ÄÇ</span>
<span class="c1">## cluster-node-timeout 15000</span>

<span class="c1">## Â¶ÇÊûúÊï∞ÊçÆÂ§™ÊóßÔºåÈõÜÁæ§‰∏≠ÁöÑ‰∏çÂèØÁî®masterÁöÑslaveËäÇÁÇπ‰ºöÈÅøÂÖçÊàê‰∏∫Â§áÁî®master„ÄÇ</span>
<span class="c1">## Â¶ÇÊûúslaveÂíåmasterÂ§±ËÅîÊó∂Èó¥Ë∂ÖËøá:</span>
<span class="c1">## (node-timeout * slave-validity-factor) + repl-ping-slave-period </span>
<span class="c1">## Âàô‰∏ç‰ºöË¢´ÊèêÂçá‰∏∫master„ÄÇ</span>
<span class="c1">#</span>
<span class="c1">## Â¶Çnode-timeout‰∏∫30ÁßíÔºåslave-validity-factor‰∏∫10, ÈªòËÆ§default repl-ping-slave-period‰∏∫10Áßí,</span>
<span class="c1">## Â§±ËÅîÊó∂Èó¥Ë∂ÖËøá310ÁßíslaveÂ∞±‰∏ç‰ºöÊàê‰∏∫master„ÄÇ</span>
<span class="c1">## </span>
<span class="c1">## ËæÉÂ§ßÁöÑslave-validity-factorÂÄºÂèØËÉΩÂÖÅËÆ∏ÂåÖÂê´ËøáÊóßÊï∞ÊçÆÁöÑslaveÊàê‰∏∫masterÔºåÂêåÊó∂ËæÉÂ∞èÁöÑÂÄºÂèØËÉΩ‰ºöÈòªÊ≠¢ÈõÜÁæ§ÈÄâ‰∏æÂá∫Êñ∞master„ÄÇ</span>
<span class="c1">## ‰∏∫‰∫ÜËææÂà∞ÊúÄÂ§ßÈôêÂ∫¶ÁöÑÈ´òÂèØÁî®ÊÄßÔºåÂèØ‰ª•ËÆæÁΩÆ‰∏∫0ÔºåÂç≥slave‰∏çÁÆ°ÂíåmasterÂ§±ËÅîÂ§ö‰πÖÈÉΩÂèØ‰ª•ÊèêÂçá‰∏∫master</span>
<span class="c1">## cluster-slave-validity-factor 10</span>

<span class="c1">## Âè™ÊúâÂú®‰πãÂâçmasterÊúâÂÖ∂ÂÆÉÊåáÂÆöÊï∞ÈáèÁöÑÂ∑•‰ΩúÁä∂ÊÄÅ‰∏ãÁöÑslaveËäÇÁÇπÊó∂ÔºåslaveËäÇÁÇπÊâçËÉΩÊèêÂçá‰∏∫master„ÄÇ</span>
<span class="c1">## ÈªòËÆ§‰∏∫1ÔºàÂç≥ËØ•ÈõÜÁæ§Ëá≥Â∞ëÊúâ3‰∏™ËäÇÁÇπÔºå1 masterÔºã2 slavesÔºåmasterÂÆïÊú∫Ôºå‰ªçÊúâÂè¶Â§ñ1‰∏™slaveÁöÑÊÉÖÂÜµ‰∏ãÂÖ∂‰∏≠1‰∏™slaveÂèØ‰ª•ÊèêÂçáÔºâ</span>
<span class="c1">## ÊµãËØïÁéØÂ¢ÉÂèØËÆæÁΩÆ‰∏∫0ÔºåÁîüÊàêÁéØÂ¢É‰∏≠Ëá≥Â∞ëËÆæÁΩÆ‰∏∫1</span>
<span class="c1">## cluster-migration-barrier 1</span>

<span class="c1">## ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÂ¶ÇÊûúredisÈõÜÁæ§Â¶ÇÊûúÊ£ÄÊµãÂà∞Ëá≥Â∞ëÊúâ1‰∏™hash slot‰∏çÂèØÁî®ÔºåÈõÜÁæ§Â∞ÜÂÅúÊ≠¢Êü•ËØ¢Êï∞ÊçÆ„ÄÇ</span>
<span class="c1">## Â¶ÇÊûúÊâÄÊúâslotÊÅ¢Â§çÂàôÈõÜÁæ§Ëá™Âä®ÊÅ¢Â§ç„ÄÇ</span>
<span class="c1">## Â¶ÇÊûúÈúÄË¶ÅÈõÜÁæ§ÈÉ®ÂàÜÂèØÁî®ÊÉÖÂÜµ‰∏ã‰ªçÂèØÊèê‰æõÊü•ËØ¢ÊúçÂä°ÔºåËÆæÁΩÆ‰∏∫no„ÄÇ</span>
<span class="c1">## cluster-require-full-coverage yes</span>
</code></pre></div>
<h4 id="8112">8.1.12„ÄÅÊÖ¢Êó•Âøó<a class="headerlink" href="#8112" title="Permanent link">&para;</a></h4>
<p>SLOW LOGÔºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">## Redis Slow Log ËÆ∞ÂΩïË∂ÖËøáÁâπÂÆöÊâßË°åÊó∂Èó¥ÁöÑÂëΩ‰ª§„ÄÇÊâßË°åÊó∂Èó¥‰∏çÂåÖÊã¨I/OËÆ°ÁÆóÊØîÂ¶ÇËøûÊé•ÂÆ¢Êà∑Á´ØÔºåËøîÂõûÁªìÊûúÁ≠âÔºåÂè™ÊòØÂëΩ‰ª§ÊâßË°åÊó∂Èó¥</span>
<span class="c1">#</span>
<span class="c1">## ÂèØ‰ª•ÈÄöËøá‰∏§‰∏™ÂèÇÊï∞ËÆæÁΩÆslow logÔºö‰∏Ä‰∏™ÊòØÂëäËØâRedisÊâßË°åË∂ÖËøáÂ§öÂ∞ëÊó∂Èó¥Ë¢´ËÆ∞ÂΩïÁöÑÂèÇÊï∞slowlog-log-slower-than(ÂæÆÂ¶ô)Ôºå</span>
<span class="c1">## Âè¶‰∏Ä‰∏™ÊòØslow log ÁöÑÈïøÂ∫¶„ÄÇÂΩì‰∏Ä‰∏™Êñ∞ÂëΩ‰ª§Ë¢´ËÆ∞ÂΩïÁöÑÊó∂ÂÄôÊúÄÊó©ÁöÑÂëΩ‰ª§Â∞ÜË¢´‰ªéÈòüÂàó‰∏≠ÁßªÈô§</span>

<span class="c1">## ‰∏ãÈù¢ÁöÑÊó∂Èó¥‰ª•ÂæÆÂ¶ôÂæÆÂçï‰ΩçÔºåÂõ†Ê≠§1000000‰ª£Ë°®‰∏ÄÂàÜÈíü„ÄÇ</span>
<span class="c1">## Ê≥®ÊÑèÂà∂ÂÆö‰∏Ä‰∏™Ë¥üÊï∞Â∞ÜÂÖ≥Èó≠ÊÖ¢Êó•ÂøóÔºåËÄåËÆæÁΩÆ‰∏∫0Â∞ÜÂº∫Âà∂ÊØè‰∏™ÂëΩ‰ª§ÈÉΩ‰ºöËÆ∞ÂΩï</span>
slowlog-log-slower-than<span class="w"> </span><span class="m">10000</span>

<span class="c1">## ÂØπÊó•ÂøóÈïøÂ∫¶Ê≤°ÊúâÈôêÂà∂ÔºåÂè™ÊòØË¶ÅÊ≥®ÊÑèÂÆÉ‰ºöÊ∂àËÄóÂÜÖÂ≠ò</span>
<span class="c1">## ÂèØ‰ª•ÈÄöËøá SLOWLOG RESET ÂõûÊî∂Ë¢´ÊÖ¢Êó•ÂøóÊ∂àËÄóÁöÑÂÜÖÂ≠ò</span>
slowlog-max-len<span class="w"> </span><span class="m">128</span>
</code></pre></div>
<h3 id="82sentinelconf">8.2„ÄÅsentinel.conf ËØ¶Ëß£<a class="headerlink" href="#82sentinelconf" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">## Example sentinel.conf</span>

<span class="c1">## *** IMPORTANT ***</span>
<span class="c1">## ÁªëÂÆöIPÂú∞ÂùÄ</span>
<span class="c1">## bind 127.0.0.1 192.168.1.1</span>
<span class="c1">## ‰øùÊä§Ê®°ÂºèÔºàÊòØÂê¶Á¶ÅÊ≠¢Â§ñÈÉ®ÈìæÊé•ÔºåÈô§ÁªëÂÆöÁöÑipÂú∞ÂùÄÂ§ñÔºâ</span>
<span class="c1">## protected-mode no</span>

<span class="c1">## port &lt;sentinel-port&gt;</span>
<span class="c1">## Ê≠§SentinelÂÆû‰æãËøêË°åÁöÑÁ´ØÂè£</span>
port<span class="w"> </span><span class="m">26379</span>

<span class="c1">## ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåRedis Sentinel‰∏ç‰Ωú‰∏∫ÂÆàÊä§Á®ãÂ∫èËøêË°å„ÄÇ Â¶ÇÊûúÈúÄË¶ÅÔºåÂèØ‰ª•ËÆæÁΩÆ‰∏∫ yes„ÄÇ</span>
daemonize<span class="w"> </span>no

<span class="c1">## ÂêØÁî®ÂÆàÊä§ËøõÁ®ãËøêË°åÂêéÔºåRedisÂ∞ÜÂú®/var/run/redis-sentinel.pid‰∏≠ÂÜôÂÖ•‰∏Ä‰∏™pidÊñá‰ª∂</span>
pidfile<span class="w"> </span>/var/run/redis-sentinel.pid

<span class="c1">## ÊåáÂÆöÊó•ÂøóÊñá‰ª∂Âêç„ÄÇ Â¶ÇÊûúÂÄº‰∏∫Á©∫ÔºåÂ∞ÜÂº∫Âà∂SentinelÊó•ÂøóÊ†áÂáÜËæìÂá∫„ÄÇÂÆàÊä§ËøõÁ®ã‰∏ãÔºåÂ¶ÇÊûú‰ΩøÁî®Ê†áÂáÜËæìÂá∫ËøõË°åÊó•ÂøóËÆ∞ÂΩïÔºåÂàôÊó•ÂøóÂ∞ÜÂèëÈÄÅÂà∞/dev/null</span>
logfile<span class="w"> </span><span class="s2">&quot;&quot;</span>

<span class="c1">## sentinel announce-ip &lt;ip&gt;</span>
<span class="c1">## sentinel announce-port &lt;port&gt;</span>
<span class="c1">#</span>
<span class="c1">## ‰∏äËø∞‰∏§‰∏™ÈÖçÁΩÆÊåá‰ª§Âú®ÁéØÂ¢É‰∏≠ÈùûÂ∏∏ÊúâÁî®ÔºåÂõ†‰∏∫NATÂèØ‰ª•ÈÄöËøáÈùûÊú¨Âú∞Âú∞ÂùÄ‰ªéÂ§ñÈÉ®ËÆøÈóÆSentinel„ÄÇ</span>
<span class="c1">#</span>
<span class="c1">## ÂΩìÊèê‰æõannounce-ipÊó∂ÔºåSentinelÂ∞ÜÂú®ÈÄö‰ø°‰∏≠Â£∞ÊòéÊåáÂÆöÁöÑIPÂú∞ÂùÄÔºåËÄå‰∏çÊòØÂÉèÈÄöÂ∏∏ÈÇ£Ê†∑Ëá™Âä®Ê£ÄÊµãÊú¨Âú∞Âú∞ÂùÄ„ÄÇ</span>
<span class="c1">#</span>
<span class="c1">## Á±ª‰ººÂú∞ÔºåÂΩìÊèê‰æõannounce-port ÊúâÊïà‰∏îÈùûÈõ∂Êó∂ÔºåSentinelÂ∞ÜÂÆ£Â∏ÉÊåáÂÆöÁöÑTCPÁ´ØÂè£„ÄÇ</span>
<span class="c1">#</span>
<span class="c1">## Ëøô‰∏§‰∏™ÈÄâÈ°π‰∏çÈúÄË¶Å‰∏ÄËµ∑‰ΩøÁî®ÔºåÂ¶ÇÊûúÂè™Êèê‰æõannounce-ipÔºåSentinelÂ∞ÜÂÆ£ÂëäÊåáÂÆöÁöÑIPÂíå‚Äúport‚ÄùÈÄâÈ°πÊåáÂÆöÁöÑÊúçÂä°Âô®Á´ØÂè£„ÄÇ</span>
<span class="c1">## Â¶ÇÊûú‰ªÖÊèê‰æõannounce-portÔºåSentinelÂ∞ÜÈÄöÂëäËá™Âä®Ê£ÄÊµãÂà∞ÁöÑÊú¨Âú∞IPÂíåÊåáÂÆöÁ´ØÂè£„ÄÇ</span>
<span class="c1">#</span>
<span class="c1">## Example:</span>
<span class="c1">## sentinel announce-ip 1.2.3.4</span>

<span class="c1">## dir &lt;working-directory&gt;</span>
<span class="c1">## ÊØè‰∏™ÈïøÊó∂Èó¥ËøêË°åÁöÑËøõÁ®ãÈÉΩÂ∫îËØ•Êúâ‰∏Ä‰∏™ÊòéÁ°ÆÂÆö‰πâÁöÑÂ∑•‰ΩúÁõÆÂΩï„ÄÇÂØπ‰∫éRedis SentinelÊù•ËØ¥Ôºå/tmpÂ∞±ÊòØËá™Â∑±ÁöÑÂ∑•‰ΩúÁõÆÂΩï„ÄÇ</span>
dir<span class="w"> </span>/tmp

<span class="c1">## sentinel monitor &lt;master-name&gt; &lt;ip&gt; &lt;redis-port&gt; &lt;quorum&gt;</span>
<span class="c1">#</span>
<span class="c1">## ÂëäËØâSentinelÁõëÂê¨ÊåáÂÆö‰∏ªËäÇÁÇπÔºåÂπ∂‰∏îÂè™ÊúâÂú®Ëá≥Â∞ë&lt;quorum&gt;Âì®ÂÖµËææÊàê‰∏ÄËá¥ÁöÑÊÉÖÂÜµ‰∏ãÊâç‰ºöÂà§Êñ≠ÂÆÉ O_DOWN Áä∂ÊÄÅ„ÄÇ</span>
<span class="c1">## ‰∏ÄËà¨Âª∫ËÆÆÂ∞ÜÂÖ∂ËÆæÁΩÆ‰∏∫SentinelËäÇÁÇπÁöÑ‰∏ÄÂçäÂä†1„ÄÇ‰∏ç‰ªÖÂ¶ÇÊ≠§ÔºåquorumËøò‰∏éSentinelËäÇÁÇπÁöÑÈ¢ÜÂØºËÄÖÈÄâ‰∏æÊúâÂÖ≥„ÄÇ</span>
<span class="c1">## ‰∏∫‰∫ÜÈÄâÂá∫SentinelÁöÑÈ¢ÜÂØºËÄÖÔºåËá≥Â∞ëÈúÄË¶Åmax(quorum, num(sentinels) / 2 + 1)‰∏™SentinelËäÇÁÇπÂèÇ‰∏éÈÄâ‰∏æ</span>
<span class="c1">#</span>
<span class="c1">## ÂâØÊú¨ÊòØËá™Âä®ÂèëÁé∞ÁöÑÔºåÂõ†Ê≠§ÊÇ®Êó†ÈúÄÊåáÂÆöÂâØÊú¨„ÄÇ</span>
<span class="c1">## SentinelÊú¨Ë∫´Â∞ÜÈáçÂÜôÊ≠§ÈÖçÁΩÆÊñá‰ª∂Ôºå‰ΩøÁî®ÂÖ∂‰ªñÈÖçÁΩÆÈÄâÈ°πÊ∑ªÂä†ÂâØÊú¨„ÄÇÂè¶ËØ∑Ê≥®ÊÑèÔºåÂΩìÂâØÊú¨ÂçáÁ∫ß‰∏∫‰∏ªÂâØÊú¨Êó∂ÔºåÂ∞ÜÈáçÂÜôÈÖçÁΩÆÊñá‰ª∂„ÄÇ</span>
<span class="c1">#</span>
<span class="c1">## Ê≥®ÊÑèÔºö‰∏ªËäÇÁÇπÔºàmasterÔºâÂêçÁß∞‰∏çËÉΩÂåÖÂê´ÁâπÊÆäÂ≠óÁ¨¶ÊàñÁ©∫Ê†º„ÄÇ</span>
<span class="c1">## ÊúâÊïàÂ≠óÁ¨¶ÂèØ‰ª•ÊòØ A-z 0-9 ÂíåËøô‰∏â‰∏™Â≠óÁ¨¶ &quot;.-_&quot;.</span>
sentinel<span class="w"> </span>monitor<span class="w"> </span>mymaster<span class="w"> </span><span class="m">127</span>.0.0.1<span class="w"> </span><span class="m">6379</span><span class="w"> </span><span class="m">2</span>

<span class="c1">## Â¶ÇÊûúredisÈÖçÁΩÆ‰∫ÜÂØÜÁ†ÅÔºåÈÇ£ËøôÈáåÂøÖÈ°ªÈÖçÁΩÆËÆ§ËØÅÔºåÂê¶Âàô‰∏çËÉΩËá™Âä®ÂàáÊç¢</span>
<span class="c1">## Example:</span>
<span class="c1">## sentinel auth-pass mymaster MySUPER--secret-0123passw0rd</span>

<span class="c1">## sentinel down-after-milliseconds &lt;master-name&gt; &lt;milliseconds&gt;</span>
<span class="c1">#</span>
<span class="c1">## ‰∏ªËäÇÁÇπÂú®ÊåáÂÆöÊó∂Èó¥ÂÜÖÊ≤°ÊúâÂõûÂ§çPINGÔºå‰æøËÆ§‰∏∫ËØ•ËäÇÁÇπ‰∏∫‰∏ªËßÇ‰∏ãÁ∫ø S_DOWN Áä∂ÊÄÅ„ÄÇ</span>
<span class="c1">## ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåËØ•ÂèÇÊï∞‰∏ç‰ªÖÁî®Êù•Âà§Êñ≠‰∏ªËäÇÁÇπÁä∂ÊÄÅÔºåÂêåÊ†∑‰πüÁî®Êù•Âà§Êñ≠ËØ•‰∏ªËäÇÁÇπ‰∏ãÈù¢ÁöÑ‰ªéËäÇÁÇπÂèäÂÖ∂ÂÆÉsentinelÁöÑÁä∂ÊÄÅ</span>
<span class="c1">## ÈªòËÆ§ÊòØ30Áßí</span>
sentinel<span class="w"> </span>down-after-milliseconds<span class="w"> </span>mymaster<span class="w"> </span><span class="m">30000</span>

<span class="c1">## sentinel parallel-syncs &lt;master-name&gt; &lt;numreplicas&gt;</span>
<span class="c1">#</span>
<span class="c1">## Âú®ÊïÖÈöúËΩ¨ÁßªÊúüÈó¥ÔºåÂ§öÂ∞ë‰∏™ÂâØÊú¨ËäÇÁÇπËøõË°åÊï∞ÊçÆÂêåÊ≠•</span>
<span class="c1">## Â¶ÇÊûúnumslavesËÆæÁΩÆËæÉÂ§ßÁöÑËØùÔºåËôΩÁÑ∂Â§çÂà∂Êìç‰ΩúÂπ∂‰∏ç‰ºöÈòªÂ°û‰∏ªËäÇÁÇπÔºå‰ΩÜÂ§ö‰∏™ËäÇÁÇπÂêåÊó∂ÊåáÂêëÊñ∞ÁöÑ‰∏ªËäÇÁÇπÔºå‰ºöÂ¢ûÂä†‰∏ªËäÇÁÇπÁöÑÁΩëÁªúÂíåÁ£ÅÁõòIOË¥üËΩΩ„ÄÇ</span>
sentinel<span class="w"> </span>parallel-syncs<span class="w"> </span>mymaster<span class="w"> </span><span class="m">1</span>

<span class="c1">## sentinel failover-timeout &lt;master-name&gt; &lt;milliseconds&gt;</span>
<span class="c1">#</span>
<span class="c1">## ÊåáÂÆöÊïÖÈöúËΩ¨ÁßªË∂ÖÊó∂Ôºà‰ª•ÊØ´Áßí‰∏∫Âçï‰ΩçÔºâ„ÄÇ ÂÆÉ‰ª•Â§öÁßçÊñπÂºè‰ΩøÁî®Ôºö</span>
<span class="c1">#</span>
<span class="c1">## - Âú®ÂÖàÂâçÁöÑÊïÖÈöúËΩ¨Áßª‰πãÂêéÈáçÊñ∞ÂêØÂä®ÊïÖÈöúËΩ¨ÁßªÊâÄÈúÄÁöÑÊó∂Èó¥Â∑≤Áî±ÁªôÂÆöÁöÑSentinelÈíàÂØπÂêå‰∏Ä‰∏ªÊúçÂä°Âô®Â∞ùËØïÔºåÊòØÊïÖÈöúËΩ¨ÁßªË∂ÖÊó∂ÁöÑ‰∏§ÂÄç„ÄÇ</span>
<span class="c1">## - ÂΩì‰∏Ä‰∏™slave‰ªé‰∏Ä‰∏™ÈîôËØØÁöÑmasterÈÇ£ÈáåÂêåÊ≠•Êï∞ÊçÆÂºÄÂßãËÆ°ÁÆóÊó∂Èó¥„ÄÇÁõ¥Âà∞slaveË¢´Á∫†Ê≠£‰∏∫ÂêëÊ≠£Á°ÆÁöÑmasterÈÇ£ÈáåÂêåÊ≠•Êï∞ÊçÆÊó∂„ÄÇ</span>
<span class="c1">## - ÂèñÊ∂àÂ∑≤Âú®ËøõË°å‰ΩÜÊú™ÁîüÊàê‰ªª‰ΩïÈÖçÁΩÆÊõ¥ÊîπÁöÑÊïÖÈöúËΩ¨ÁßªÊâÄÈúÄÁöÑÊó∂Èó¥</span>
<span class="c1">## - ÂΩìËøõË°åfailoverÊó∂ÔºåÈÖçÁΩÆÊâÄÊúâslavesÊåáÂêëÊñ∞ÁöÑmasterÊâÄÈúÄÁöÑÊúÄÂ§ßÊó∂Èó¥„ÄÇ</span>
<span class="c1">##   Âç≥‰ΩøËøá‰∫ÜËøô‰∏™Ë∂ÖÊó∂Ôºåslaves‰æùÁÑ∂‰ºöË¢´Ê≠£Á°ÆÈÖçÁΩÆ‰∏∫ÊåáÂêëmaster„ÄÇ</span>
<span class="c1">## ÈªòËÆ§3ÂàÜÈíü</span>
sentinel<span class="w"> </span>failover-timeout<span class="w"> </span>mymaster<span class="w"> </span><span class="m">180000</span>

<span class="c1">## ËÑöÊú¨ÊâßË°å</span>
<span class="c1">#</span>
<span class="c1">## sentinel notification-scriptÂíåsentinel reconfig-scriptÁî®‰∫éÈÖçÁΩÆË∞ÉÁî®ÁöÑËÑöÊú¨Ôºå‰ª•ÈÄöÁü•Á≥ªÁªüÁÆ°ÁêÜÂëòÊàñÂú®ÊïÖÈöúËΩ¨ÁßªÂêéÈáçÊñ∞ÈÖçÁΩÆÂÆ¢Êà∑Á´Ø„ÄÇ</span>
<span class="c1">## ËÑöÊú¨‰ΩøÁî®‰ª•‰∏ãËßÑÂàôÊâßË°å‰ª•ËøõË°åÈîôËØØÂ§ÑÁêÜÔºö</span>
<span class="c1">#</span>
<span class="c1">## Â¶ÇÊûúËÑöÊú¨‰ª•‚Äú1‚ÄùÈÄÄÂá∫ÔºåÂàôÁ®çÂêéÈáçËØïÊâßË°åÔºàÊúÄÂ§öÈáçËØïÊ¨°Êï∞‰∏∫ÂΩìÂâçËÆæÁΩÆÁöÑ10Ê¨°Ôºâ„ÄÇ</span>
<span class="c1">#</span>
<span class="c1">## Â¶ÇÊûúËÑöÊú¨‰ª•‚Äú2‚ÄùÔºàÊàñÊõ¥È´òÁöÑÂÄºÔºâÈÄÄÂá∫ÔºåÂàô‰∏ç‰ºöÈáçËØïÊâßË°å„ÄÇ</span>
<span class="c1">#</span>
<span class="c1">## Â¶ÇÊûúËÑöÊú¨Âõ†‰∏∫Êî∂Âà∞‰ø°Âè∑ËÄåÁªàÊ≠¢ÔºåÂàôË°å‰∏∫‰∏éÈÄÄÂá∫‰ª£Á†Å1Áõ∏Âêå„ÄÇ</span>
<span class="c1">#</span>
<span class="c1">## ËÑöÊú¨ÁöÑÊúÄÈïøËøêË°åÊó∂Èó¥‰∏∫60Áßí„ÄÇ ËææÂà∞Ê≠§ÈôêÂà∂ÂêéÔºåËÑöÊú¨Â∞Ü‰ª•SIGKILLÁªàÊ≠¢ÔºåÂπ∂ÈáçËØïÊâßË°å„ÄÇ</span>

<span class="c1">## ÈÄöÁü•ËÑöÊú¨</span>
<span class="c1">#</span>
<span class="c1">## sentinel notification-script &lt;master-name&gt; &lt;script-path&gt;</span>
<span class="c1">#</span>
<span class="c1">## ‰∏∫Ë≠¶ÂëäÁ∫ßÂà´ÁîüÊàêÁöÑ‰ªª‰ΩïSentinel‰∫ã‰ª∂Ë∞ÉÁî®ÊåáÂÆöÁöÑÈÄöÁü•ËÑöÊú¨Ôºà‰æãÂ¶Ç-sdownÔºå-odownÁ≠âÔºâ„ÄÇ</span>
<span class="c1">## Ê≠§ËÑöÊú¨Â∫îÈÄöËøáÁîµÂ≠êÈÇÆ‰ª∂ÔºåSMSÊàñ‰ªª‰ΩïÂÖ∂‰ªñÊ∂àÊÅØ‰º†ÈÄíÁ≥ªÁªüÈÄöÁü•Á≥ªÁªüÁÆ°ÁêÜÂëò ÁõëÊéßÁöÑRedisÁ≥ªÁªüÂá∫‰∫ÜÈóÆÈ¢ò„ÄÇ</span>
<span class="c1">#</span>
<span class="c1">## ‰ΩøÁî®‰∏§‰∏™ÂèÇÊï∞Ë∞ÉÁî®ËÑöÊú¨ÔºöÁ¨¨‰∏Ä‰∏™ÊòØ‰∫ã‰ª∂Á±ªÂûãÔºåÁ¨¨‰∫å‰∏™ÊòØ‰∫ã‰ª∂ÊèèËø∞„ÄÇ</span>
<span class="c1">#</span>
<span class="c1">## ËØ•ËÑöÊú¨ÂøÖÈ°ªÂ≠òÂú®‰∏îÂèØÊâßË°åÔºå‰ª•‰æøÂú®Êèê‰æõÊ≠§ÈÄâÈ°πÊó∂ÂêØÂä®sentinel„ÄÇ</span>
<span class="c1">#</span>
<span class="c1">## ‰∏æ‰æã:</span>
<span class="c1">## sentinel notification-script mymaster /var/redis/notify.sh</span>

<span class="c1">## ÂÆ¢Êà∑ÈáçÊñ∞ÈÖçÁΩÆËÑöÊú¨</span>
<span class="c1">#</span>
<span class="c1">## sentinel client-reconfig-script &lt;master-name&gt; &lt;script-path&gt;</span>
<span class="c1">#</span>
<span class="c1">## ÂΩì‰∏ªÊúçÂä°Âô®Âõ†ÊïÖÈöúËΩ¨ÁßªËÄåÂèòÊõ¥Êó∂ÔºåÂèØ‰ª•Ë∞ÉÁî®ËÑöÊú¨ÊâßË°åÁâπÂÆö‰∫éÂ∫îÁî®Á®ãÂ∫èÁöÑ‰ªªÂä°Ôºå‰ª•ÈÄöÁü•ÂÆ¢Êà∑Á´ØÔºåÈÖçÁΩÆÂ∑≤Êõ¥Êîπ‰∏î‰∏ªÊúçÂä°Âô®Âú∞ÂùÄÂ∑≤ÁªèÂèòÊõ¥„ÄÇ</span>
<span class="c1">#</span>
<span class="c1">## ‰ª•‰∏ãÂèÇÊï∞Â∞Ü‰º†ÈÄíÁªôËÑöÊú¨Ôºö</span>
<span class="c1">#</span>
<span class="c1">## &lt;master-name&gt; &lt;role&gt; &lt;state&gt; &lt;from-ip&gt; &lt;from-port&gt; &lt;to-ip&gt; &lt;to-port&gt;</span>
<span class="c1">#</span>
<span class="c1">## &lt;state&gt; ÁõÆÂâçÂßãÁªàÊòØÊïÖÈöúËΩ¨Áßª &quot;failover&quot;</span>
<span class="c1">## &lt;role&gt; ÊòØ &quot;leader&quot; Êàñ &quot;observer&quot;</span>
<span class="c1">#</span>
<span class="c1">## ÂèÇÊï∞ from-ip, from-port, to-ip, to-port Áî®‰∫é‰º†ÈÄí‰∏ªÊúçÂä°Âô®ÁöÑÊóßÂú∞ÂùÄÂíåÊâÄÈÄâÂâØÊú¨ÁöÑÊñ∞Âú∞ÂùÄ„ÄÇ</span>
<span class="c1">#</span>
<span class="c1">## ‰∏æ‰æã:</span>
<span class="c1">## sentinel client-reconfig-script mymaster /var/redis/reconfig.sh</span>

<span class="c1">## ÂÆâÂÖ®</span>
<span class="c1">## ÈÅøÂÖçËÑöÊú¨ÈáçÁΩÆÔºåÈªòËÆ§ÂÄºyes</span>
<span class="c1">## ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåSENTINEL SETÂ∞ÜÊó†Ê≥ïÂú®ËøêË°åÊó∂Êõ¥Êîπnotification-scriptÂíåclient-reconfig-script„ÄÇ</span>
<span class="c1">## ËøôÈÅøÂÖç‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂÆâÂÖ®ÈóÆÈ¢òÔºåÂÆ¢Êà∑Á´ØÂèØ‰ª•Â∞ÜËÑöÊú¨ËÆæÁΩÆ‰∏∫‰ªª‰ΩïÂÜÖÂÆπÂπ∂Ëß¶ÂèëÊïÖÈöúËΩ¨Áßª‰ª•‰æøÊâßË°åÁ®ãÂ∫è„ÄÇ</span>
sentinel<span class="w"> </span>deny-scripts-reconfig<span class="w"> </span>yes

<span class="c1">## REDISÂëΩ‰ª§ÈáçÂëΩÂêç</span>
<span class="c1">#</span>
<span class="c1">## Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂèØ‰ª•ÂëäËØâSentinel‰ΩøÁî®‰∏çÂêåÁöÑÂëΩ‰ª§ÂêçÁß∞ËÄå‰∏çÊòØÊ≠£Â∏∏ÁöÑÂëΩ‰ª§ÂêçÁß∞„ÄÇ</span>
<span class="c1">## ‰æãÂ¶ÇÔºåÂ¶ÇÊûú‰∏ª‚Äúmymaster‚ÄùÂíåÁõ∏ÂÖ≥ÂâØÊú¨ÁöÑ‚ÄúCONFIG‚ÄùÂÖ®ÈÉ®ÈáçÂëΩÂêç‰∏∫‚ÄúGUESSME‚ÄùÔºåÊàëÂèØ‰ª•‰ΩøÁî®Ôºö</span>
<span class="c1">#</span>
<span class="c1">## SENTINEL rename-command mymaster CONFIG GUESSME</span>
<span class="c1">#</span>
<span class="c1">## ËÆæÁΩÆÊ≠§Á±ªÈÖçÁΩÆÂêéÔºåÊØèÊ¨°Sentinel‰ΩøÁî®CONFIGÊó∂ÔºåÂÆÉÂ∞Ü‰ΩøÁî®GUESSME„ÄÇ </span>
<span class="c1">## ËØ∑Ê≥®ÊÑèÔºåÂÆûÈôÖ‰∏ä‰∏çÈúÄË¶ÅÂ∞äÈáçÂëΩ‰ª§Ê°à‰æãÔºåÂõ†Ê≠§Âú®‰∏äÈù¢ÁöÑÁ§∫‰æã‰∏≠ÂÜô‚Äúconfig guessme‚ÄùÊòØÁõ∏ÂêåÁöÑ„ÄÇ</span>
<span class="c1">#</span>
<span class="c1">## SENTINEL SET‰πüÂèØÁî®‰∫éÂú®ËøêË°åÊó∂ÊâßË°åÊ≠§ÈÖçÁΩÆ„ÄÇ</span>
<span class="c1">#</span>
<span class="c1">## ‰∏∫‰∫ÜÂ∞ÜÂëΩ‰ª§ËÆæÁΩÆÂõûÂÖ∂ÂéüÂßãÂêçÁß∞ÔºàÊí§Ê∂àÈáçÂëΩÂêçÔºâÔºåÂèØ‰ª•Â∞ÜÂëΩ‰ª§ÈáçÂëΩÂêç‰∏∫ÂÆÉËá™Ë∫´Ôºö</span>
<span class="c1">#</span>
<span class="c1">## SENTINEL rename-command mymaster CONFIG CONFIG</span>
</code></pre></div>
<h2 id="9">9„ÄÅÊåÅ‰πÖÂåñ<a class="headerlink" href="#9" title="Permanent link">&para;</a></h2>
<p>‰ªÄ‰πàÊòØRedisÊåÅ‰πÖÂåñÔºü</p>
<p>Redis ‰Ωú‰∏∫‰∏Ä‰∏™ÈîÆÂÄºÂØπÂÜÖÂ≠òÊï∞ÊçÆÂ∫ìÔºàNoSQLÔºâÔºåÊï∞ÊçÆÈÉΩÂ≠òÂÇ®Âú®ÂÜÖÂ≠òÂΩì‰∏≠ÔºåÂú®Â§ÑÁêÜÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÊó∂ÔºåÊâÄÊúâÊìç‰ΩúÈÉΩÂú®ÂÜÖÂ≠òÂΩì‰∏≠ËøõË°åÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö</p>
<p><img src="!assets/Redis/16b91484c4f516d5.webp" alt="img" style="zoom:67%;" /></p>
<p>‰ΩÜÊòØÔºå Â≠òÂÇ®Âú®ÂÜÖÂ≠òÂΩì‰∏≠ÁöÑÊï∞ÊçÆÔºåÂè™Ë¶ÅÊúçÂä°Âô®ÂÖ≥Êú∫(ÂêÑÁßçÂéüÂõ†ÂºïËµ∑ÁöÑ)ÔºåÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÂ∞±‰ºöÊ∂àÂ§±‰∫ÜÔºå‰∏ç‰ªÖÊúçÂä°Âô®ÂÖ≥Êú∫‰ºöÈÄ†ÊàêÊï∞ÊçÆÊ∂àÂ§±ÔºåRedis ÊúçÂä°Âô®ÂÆàÊä§ËøõÁ®ãÈÄÄÂá∫ÔºåÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆ‰πü‰∏ÄÊ†∑‰ºöÊ∂àÂ§±„ÄÇ</p>
<p>ÂØπ‰∫éÂè™Êää Redis ÂΩìÁºìÂ≠òÊù•Áî®ÁöÑÈ°πÁõÆÊù•ËØ¥ÔºåÊï∞ÊçÆÊ∂àÂ§±ÊàñËÆ∏ÈóÆÈ¢ò‰∏çÂ§ßÔºåÈáçÊñ∞‰ªéÊï∞ÊçÆÊ∫êÊääÊï∞ÊçÆÂä†ËΩΩËøõÊù•Â∞±ÂèØ‰ª•‰∫ÜÔºå‰ΩÜÂ¶ÇÊûúÁõ¥Êé•ÊääÁî®Êà∑Êèê‰∫§ÁöÑ‰∏öÂä°Êï∞ÊçÆÂ≠òÂÇ®Âú® Redis ÂΩì‰∏≠ÔºåÊää Redis ‰Ωú‰∏∫Êï∞ÊçÆÂ∫ìÊù•‰ΩøÁî®ÔºåÂú®ÂÖ∂ÊîæÂ≠òÂÇ®ÈáçË¶Å‰∏öÂä°Êï∞ÊçÆÔºåÈÇ£‰πà Redis ÁöÑÂÜÖÂ≠òÊï∞ÊçÆ‰∏¢Â§±ÊâÄÈÄ†ÊàêÁöÑÂΩ±Âìç‰πüËÆ∏ÊòØÊØÅÁÅ≠ÊÄß„ÄÇ</p>
<p>‰∏∫‰∫ÜÈÅøÂÖçÂÜÖÂ≠ò‰∏≠Êï∞ÊçÆ‰∏¢Â§±ÔºåRedis Êèê‰æõ‰∫Ü RDB Âíå AOF ‰∏§Áßç‰∏çÂêåÁöÑÊï∞ÊçÆÊåÅ‰πÖÂåñÊñπÂºèÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄâÊã©‰∏çÂêåÁöÑÊñπÂºèÂ∞ÜÊï∞ÊçÆ‰ªéÂÜÖÂ≠ò‰∏≠‰øùÂ≠òÂà∞Á°¨ÁõòÂΩì‰∏≠Ôºå‰ΩøÊï∞ÊçÆÂèØ‰ª•ÊåÅ‰πÖÂåñ‰øùÂ≠ò„ÄÇ</p>
<p><img src="!assets/Redis/16b9148bc2eb53a5.webp" alt="img" style="zoom:67%;" /></p>
<h3 id="91rdb">9.1„ÄÅRDB<a class="headerlink" href="#91rdb" title="Permanent link">&para;</a></h3>
<p>RDBÔºàRedis DataBaseÔºâ ÊòØ‰∏ÄÁßçÂø´ÁÖßÂ≠òÂÇ®ÊåÅ‰πÖÂåñÊñπÂºèÔºåÂÖ∑‰ΩìÂ∞±ÊòØÂ∞Ü Redis Êüê‰∏ÄÊó∂ÂàªÁöÑÂÜÖÂ≠òÊï∞ÊçÆ‰øùÂ≠òÂà∞Á°¨ÁõòÁöÑÊñá‰ª∂ÂΩì‰∏≠ÔºåÈªòËÆ§‰øùÂ≠òÁöÑÊñá‰ª∂Âêç‰∏∫ dump.rdbÔºåËÄåÂú® Redis ÊúçÂä°Âô®ÂêØÂä®Êó∂Ôºå‰ºöÈáçÊñ∞Âä†ËΩΩ dump.rdb Êñá‰ª∂ÁöÑÊï∞ÊçÆÂà∞ÂÜÖÂ≠òÂΩì‰∏≠ÊÅ¢Â§çÊï∞ÊçÆ„ÄÇ</p>
<h4 id="911-rdb">9.1.1„ÄÅÂºÄÂêØ RDB ÊåÅ‰πÖÂåñÊñπÂºè<a class="headerlink" href="#911-rdb" title="Permanent link">&para;</a></h4>
<p><strong>save</strong></p>
<p><code>save</code>ÂëΩ‰ª§ÂèØ‰ª•ÂêåÊ≠•Êï∞ÊçÆÂà∞Á£ÅÁõò‰∏ä„ÄÇ</p>
<p><img src="!assets/Redis/16b914a74a0c8ef5.webp" alt="img" style="zoom:67%;" /></p>
<p>ÂΩìÂÆ¢Êà∑Á´ØÂêëÊúçÂä°Âô®ÂèëÈÄÅ<code>save</code>ÂëΩ‰ª§ËØ∑Ê±ÇËøõË°åÊåÅ‰πÖÂåñÊó∂ÔºåÊúçÂä°Âô®‰ºöÈòªÂ°û<code>save</code>ÂëΩ‰ª§‰πãÂêéÁöÑÂÖ∂‰ªñÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÔºåÁõ¥Âà∞Êï∞ÊçÆÂêåÊ≠•ÂÆåÊàê„ÄÇÂ¶ÇÊûúÊï∞ÊçÆÈáèÂ§™Â§ßÔºåÂêåÊ≠•Êï∞ÊçÆ‰ºöÊâßË°åÂæà‰πÖÔºåËÄåËøôÊúüÈó¥ Redis ÊúçÂä°Âô®‰πüÊó†Ê≥ïÊé•Êî∂ÂÖ∂‰ªñËØ∑Ê±ÇÔºåÊâÄ‰ª•ÔºåÊúÄÂ•Ω‰∏çË¶ÅÂú®Áîü‰∫ßÁéØÂ¢É‰ΩøÁî®<code>save</code>ÂëΩ‰ª§„ÄÇ</p>
<p><strong>bgsave</strong></p>
<p>‰∏é<code>save</code>ÂëΩ‰ª§‰∏çÂêåÔºå<code>bgsave</code>ÂëΩ‰ª§ÊòØ‰∏Ä‰∏™ÂºÇÊ≠•Êìç‰Ωú„ÄÇ</p>
<p><img src="!assets/Redis/16b914b543343855.webp" alt="img" style="zoom:67%;" /></p>
<p>ÂΩìÂÆ¢Êà∑Á´ØÂèëÊúçÂä°ÂèëÂá∫<code>bgsave</code>ÂëΩ‰ª§Êó∂ÔºåRedis ÊúçÂä°Âô®‰∏ªËøõÁ®ã‰ºö forks ‰∏Ä‰∏™Â≠êËøõÁ®ãÊù•Êï∞ÊçÆÂêåÊ≠•ÈóÆÈ¢òÔºåÂú®Â∞ÜÊï∞ÊçÆ‰øùÂ≠òÂà∞ rdb Êñá‰ª∂‰πãÂêéÔºåÂ≠êËøõÁ®ã‰ºöÈÄÄÂá∫„ÄÇ</p>
<p>ÊâÄ‰ª•Ôºå‰∏é<code>save</code>ÂëΩ‰ª§Áõ∏ÊØîÔºåRedis ÊúçÂä°Âô®Âú®Â§ÑÁêÜ<code>bgsave</code>ÈááÁî®Â≠êÁ∫øÁ®ãËøõË°å IO ÂÜôÂÖ•ÔºåËÄå‰∏ªËøõÁ®ã‰ªçÁÑ∂ÂèØ‰ª•Êé•Êî∂ÂÖ∂‰ªñËØ∑Ê±ÇÔºå‰ΩÜ forks Â≠êËøõÁ®ãÊòØÂêåÊ≠•ÁöÑÔºåÊâÄ‰ª•     forks Â≠êËøõÁ®ãÊó∂Ôºå‰∏ÄÊ†∑‰∏çËÉΩÊé•Êî∂ÂÖ∂‰ªñËØ∑Ê±ÇÔºåËøôÊÑèÂë≥ÁùÄÔºåÂ¶ÇÊûú forks ‰∏Ä‰∏™Â≠êËøõÁ®ãËä±Ë¥πÁöÑÊó∂Èó¥Â§™‰πÖÔºà‰∏ÄËà¨ÊòØÂæàÂø´ÁöÑÔºâÔºå<code>bgsave</code>ÂëΩ‰ª§‰ªçÁÑ∂ÊúâÈòªÂ°ûÂÖ∂‰ªñÂÆ¢Êà∑ÁöÑËØ∑Ê±ÇÁöÑÊÉÖÂÜµÂèëÁîü„ÄÇ</p>
<p><strong>ÊúçÂä°Âô®ÈÖçÁΩÆËá™Âä®Ëß¶Âèë</strong></p>
<p>Èô§‰∫ÜÈÄöËøáÂÆ¢Êà∑Á´ØÂèëÈÄÅÂëΩ‰ª§Â§ñÔºåËøòÊúâ‰∏ÄÁßçÊñπÂºèÔºåÂ∞±ÊòØÂú® Redis ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑ save ÊåáÂÆöÂà∞ËææËß¶Âèë RDB ÊåÅ‰πÖÂåñÁöÑÊù°‰ª∂ÔºåÊØîÂ¶Ç„ÄêÂ§öÂ∞ëÁßíÂÜÖËá≥Â∞ëËææÂà∞Â§öÂ∞ëÂÜôÊìç‰Ωú„ÄëÂ∞±ÂºÄÂêØ RDB Êï∞ÊçÆÂêåÊ≠•„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="c1">## 900sÂÜÖËá≥Â∞ëËææÂà∞‰∏ÄÊù°ÂÜôÂëΩ‰ª§</span>
save<span class="w"> </span><span class="m">900</span><span class="w"> </span><span class="m">1</span>
<span class="c1">## 300sÂÜÖËá≥Â∞ëËææËá≥10Êù°ÂÜôÂëΩ‰ª§</span>
save<span class="w"> </span><span class="m">300</span><span class="w"> </span><span class="m">10</span>
<span class="c1">## 60sÂÜÖËá≥Â∞ëËææÂà∞10000Êù°ÂÜôÂëΩ‰ª§</span>
save<span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">10000</span>
</code></pre></div>
<p>ËøôÁßçÈÄöËøáÊúçÂä°Âô®ÈÖçÁΩÆÊñá‰ª∂Ëß¶Âèë RDB ÁöÑÊñπÂºèÔºå‰∏é bgsave ÂëΩ‰ª§Á±ª‰ººÔºåËææÂà∞Ëß¶ÂèëÊù°‰ª∂Êó∂Ôºå‰ºö forks ‰∏Ä‰∏™Â≠êËøõÁ®ãËøõË°åÊï∞ÊçÆÂêåÊ≠•„ÄÇ</p>
<p><strong><code>flushall</code>Âíå<code>exit</code>ÁöÑÊó∂ÂÄô‰πü‰ºöËß¶Âèë</strong></p>
<h4 id="912rdb">9.1.2„ÄÅRDB Êñá‰ª∂<a class="headerlink" href="#912rdb" title="Permanent link">&para;</a></h4>
<p>‰∏äÈù¢‰∏âÁßçËÆ©ÊúçÂä°Âô®ÁîüÊàê rdb Êñá‰ª∂ÁöÑÊñπÂºèÔºåÊó†ËÆ∫ÊòØÁî±‰∏ªËøõÁ®ãÁîüÊàêËøòÊòØÂ≠êËøõÁ®ãÊù•ÁîüÊàêÔºåÂÖ∂ËøáÁ®ãÂ¶Ç‰∏ãÔºö</p>
<ol>
<li>ÁîüÊàê‰∏¥Êó∂ rdb Êñá‰ª∂ÔºåÂπ∂ÂÜôÂÖ•Êï∞ÊçÆ„ÄÇ</li>
<li>ÂÆåÊàêÊï∞ÊçÆÂÜôÂÖ•ÔºåÁî®‰∏¥Êó∂Êñá‰ª£Êõø‰ª£Ê≠£Âºè rdb Êñá‰ª∂„ÄÇ</li>
<li>Âà†Èô§ÂéüÊù•ÁöÑ rdb Êñá‰ª∂„ÄÇ</li>
</ol>
<p>RDB ÈªòËÆ§ÁîüÊàêÁöÑÊñá‰ª∂Âêç‰∏∫ dump.rdbÔºåÂèØ‰ª•ÈÄöËøáÈÖçÁΩÆÊñá‰ª∂ËøõË°åÊõ¥Âä†ËØ¶ÁªÜÈÖçÁΩÆÔºåÊØîÂ¶ÇÂú®ÂçïÊú∫‰∏ãÂêØÂä®Â§ö‰∏™ Redis ÊúçÂä°Âô®ËøõÁ®ãÊó∂ÔºåÂèØ‰ª•ÈÄöËøáÁ´ØÂè£Âè∑ÈÖçÁΩÆ‰∏çÂêåÁöÑrdb ÂêçÁß∞ÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">## ÊòØÂê¶ÂéãÁº©rdbÊñá‰ª∂</span>
rdbcompression<span class="w"> </span>yes

<span class="c1">## rdbÊñá‰ª∂ÁöÑÂêçÁß∞</span>
dbfilename<span class="w"> </span>redis-6379.rdb

<span class="c1">## rdbÊñá‰ª∂‰øùÂ≠òÁõÆÂΩï</span>
dir<span class="w"> </span>~/redis/
</code></pre></div>
<h4 id="913rdb">9.1.3„ÄÅRDB ÁöÑ‰ºòÁº∫ÁÇπ<a class="headerlink" href="#913rdb" title="Permanent link">&para;</a></h4>
<p><strong>‰ºòÁÇπ</strong></p>
<ol>
<li>‰∏é AOF ÊñπÂºèÁõ∏ÊØîÔºåÈÄöËøá rdb Êñá‰ª∂ÊÅ¢Â§çÊï∞ÊçÆÊØîËæÉÂø´„ÄÇ</li>
<li>rdb Êñá‰ª∂ÈùûÂ∏∏Á¥ßÂáëÔºåÈÄÇÂêà‰∫éÊï∞ÊçÆÂ§á‰ªΩ„ÄÇ</li>
<li>ÈÄöËøá RDB ËøõË°åÊï∞ÊçÆÂ§áÔºåÁî±‰∫é‰ΩøÁî®Â≠êËøõÁ®ãÁîüÊàêÔºåÊâÄ‰ª•ÂØπ Redis ÊúçÂä°Âô®ÊÄßËÉΩÂΩ±ÂìçËæÉÂ∞è„ÄÇ</li>
</ol>
<p><strong>Áº∫ÁÇπ</strong></p>
<ol>
<li>Â¶ÇÊûúÊúçÂä°Âô®ÂÆïÊú∫ÁöÑËØùÔºåÈááÁî® RDB ÁöÑÊñπÂºè‰ºöÈÄ†ÊàêÊüê‰∏™Êó∂ÊÆµÂÜÖÊï∞ÊçÆÁöÑ‰∏¢Â§±ÔºåÊØîÂ¶ÇÊàë‰ª¨ËÆæÁΩÆ 10 ÂàÜÈíüÂêåÊ≠•‰∏ÄÊ¨°Êàñ 5 ÂàÜÈíüËææÂà∞ 1000Ê¨° ÂÜôÂÖ•Â∞±ÂêåÊ≠•‰∏ÄÊ¨°ÔºåÈÇ£‰πàÂ¶ÇÊûúËøòÊ≤°ËææÂà∞Ëß¶ÂèëÊù°‰ª∂ÊúçÂä°Âô®Â∞±Ê≠ªÊú∫‰∫ÜÔºåÈÇ£‰πàËøô‰∏™Êó∂Èó¥ÊÆµÁöÑÊï∞ÊçÆ‰ºö‰∏¢Â§±„ÄÇ</li>
<li>‰ΩøÁî®<code>save</code>ÂëΩ‰ª§‰ºöÈÄ†ÊàêÊúçÂä°Âô®ÈòªÂ°ûÔºåÁõ¥Êé•Êï∞ÊçÆÂêåÊ≠•ÂÆåÊàêÊâçËÉΩÊé•Êî∂ÂêéÁª≠ËØ∑Ê±Ç„ÄÇ</li>
<li>‰ΩøÁî®<code>bgsave</code>ÂëΩ‰ª§Âú® forks Â≠êËøõÁ®ãÊó∂ÔºåÂ¶ÇÊûúÊï∞ÊçÆÈáèÂ§™Â§ßÔºåforks ÁöÑËøáÁ®ã‰πü‰ºöÂèëÁîüÈòªÂ°ûÔºåÂè¶Â§ñÔºåforks Â≠êËøõÁ®ã‰ºöËÄóË¥πÂÜÖÂ≠ò„ÄÇ</li>
</ol>
<h3 id="92aof">9.2„ÄÅAOF<a class="headerlink" href="#92aof" title="Permanent link">&para;</a></h3>
<p>‰∏é RDB Â≠òÂÇ®Êüê‰∏™Êó∂ÂàªÁöÑÂø´ÁÖß‰∏çÂêåÔºåAOF ÔºàAppend-only fileÔºâÊåÅ‰πÖÂåñÊñπÂºè‰ºöËÆ∞ÂΩïÂÆ¢Êà∑Á´ØÂØπÊúçÂä°Âô®ÁöÑÊØè‰∏ÄÊ¨°ÂÜôÊìç‰ΩúÂëΩ‰ª§ÔºåÂπ∂Â∞ÜËøô‰∫õÂÜôÊìç‰Ωú‰ª• Redis ÂçèËÆÆËøΩÂä†‰øùÂ≠òÂà∞‰ª•ÂêéÁºÄ‰∏∫ aof Êñá‰ª∂Êú´Â∞æÔºåÂú® Redis ÊúçÂä°Âô®ÈáçÂêØÊó∂Ôºå‰ºöÂä†ËΩΩÂπ∂ËøêË°å aof Êñá‰ª∂ÁöÑÂëΩ‰ª§Ôºå‰ª•ËææÂà∞ÊÅ¢Â§çÊï∞ÊçÆÁöÑÁõÆÁöÑ„ÄÇ</p>
<p><img src="!assets/Redis/16b916ccf4224ec3.webp" alt="img" style="zoom: 80%;" /></p>
<h4 id="921-aof">9.2.1„ÄÅÂºÄÂêØ AOF ÊåÅ‰πÖÂåñÊñπÂºè<a class="headerlink" href="#921-aof" title="Permanent link">&para;</a></h4>
<p>Redis ÈªòËÆ§‰∏çÂºÄÂêØ AOF ÊåÅ‰πÖÂåñÊñπÂºèÔºåÂèØ‰ª•Âú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂºÄÂêØÂπ∂ËøõË°åÊõ¥Âä†ËØ¶ÁªÜÁöÑÈÖçÁΩÆÔºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">## ÂºÄÂêØaofÊú∫Âà∂</span>
appendonly<span class="w"> </span>yes

<span class="c1">## aofÊñá‰ª∂Âêç</span>
appendfilename<span class="w"> </span><span class="s2">&quot;appendonly.aof&quot;</span>

<span class="c1">## ÂÜôÂÖ•Á≠ñÁï•,alwaysË°®Á§∫ÊØè‰∏™ÂÜôÊìç‰ΩúÈÉΩ‰øùÂ≠òÂà∞aofÊñá‰ª∂‰∏≠,‰πüÂèØ‰ª•ÊòØeverysecÊàñno</span>
appendfsync<span class="w"> </span>always

<span class="c1">## ÈªòËÆ§‰∏çÈáçÂÜôaofÊñá‰ª∂</span>
no-appendfsync-on-rewrite<span class="w"> </span>no

<span class="c1">## ‰øùÂ≠òÁõÆÂΩï</span>
dir<span class="w"> </span>~/redis/
</code></pre></div>
<p>appendfsync ÈÄâÈ°πÊåáÂÆöÂÜôÂÖ•Á≠ñÁï•ÔºåÊúâ‰∏â‰∏™ÈÄâÈ°πÔºö</p>
<ul>
<li>noÔºö‰∏çËøõË°åÂêåÊ≠•Ôºå‰∫§Áî±Êìç‰ΩúÁ≥ªÁªüÊù•Â§ÑÁêÜ‰ªÄ‰πàÊó∂ÂÄôÂÜôÂÖ• aof Êñá‰ª∂</li>
<li>alwaysÔºöÊØèÊ¨°ÊúâÂÜôÊìç‰ΩúÈÉΩËøõË°åÂêåÊ≠•</li>
<li>everysecÔºöÂØπÂÜôÊìç‰ΩúËøõË°åÁ¥ØÁßØÔºåÊØèÁßíÂêåÊ≠•‰∏ÄÊ¨°</li>
</ul>
<h4 id="922aof">9.2.2„ÄÅAOF Êñá‰ª∂<a class="headerlink" href="#922aof" title="Permanent link">&para;</a></h4>
<p><strong>AOF Êñá‰ª∂ÈáçÂÜô</strong></p>
<p>AOF Â∞ÜÂÆ¢Êà∑Á´ØÁöÑÊØè‰∏Ä‰∏™ÂÜôÊìç‰ΩúÈÉΩËøΩÂä†Âà∞ aof Êñá‰ª∂Êú´Â∞æÔºåÊØîÂ¶ÇÂØπ‰∏Ä‰∏™ key Â§öÊ¨°ÊâßË°å incr ÂëΩ‰ª§ÔºåËøôÊó∂ÂÄôÔºåaof ‰øùÂ≠òÊØè‰∏ÄÊ¨°ÂëΩ‰ª§Âà∞ aof Êñá‰ª∂‰∏≠Ôºå‰ºö‰ΩøÊñá‰ª∂‰ºöÂèòÂæóÈùûÂ∏∏Â§ß„ÄÇ</p>
<div class="highlight"><pre><span></span><code>incr<span class="w"> </span>num<span class="w"> </span><span class="m">1</span>
incr<span class="w"> </span>num<span class="w"> </span><span class="m">2</span>
incr<span class="w"> </span>num<span class="w"> </span><span class="m">3</span>
incr<span class="w"> </span>num<span class="w"> </span><span class="m">4</span>
incr<span class="w"> </span>num<span class="w"> </span><span class="m">5</span>
incr<span class="w"> </span>num<span class="w"> </span><span class="m">6</span>
...
incr<span class="w"> </span>num<span class="w"> </span><span class="m">100000</span>
</code></pre></div>
<p>aof Êñá‰ª∂Â§™Â§ßÔºåÂä†ËΩΩ aof Êñá‰ª∂ÊÅ¢Â§çÊï∞ÊçÆÊó∂ÔºåÂ∞±‰ºöÈùûÂ∏∏ÊÖ¢Ôºå‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåRedis ÊîØÊåÅ aof Êñá‰ª∂ÈáçÂÜôÔºåÈÄöËøáÈáçÂÜô aofÔºåÂèØ‰ª•ÁîüÊàê‰∏Ä‰∏™ÊÅ¢Â§çÂΩìÂâçÊï∞ÊçÆÁöÑÊúÄÂ∞ëÂëΩ‰ª§ÈõÜÔºåÊØîÂ¶Ç‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÈÇ£‰πàÂ§öÊù°ÂëΩ‰ª§ÔºåÂèØ‰ª•ÈáçÂÜô‰∏∫Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nb">set</span><span class="w"> </span>num<span class="w"> </span><span class="m">100000</span>
</code></pre></div>
<p>ÈáçÂÜôaofÊñá‰ª∂ÁöÑÂ•ΩÂ§ÑÔºö</p>
<ol>
<li>ÂéãÁº© aof Êñá‰ª∂ÔºåÂáèÂ∞ëÁ£ÅÁõòÂç†Áî®Èáè</li>
<li>Â∞Ü aof ÁöÑÂëΩ‰ª§ÂéãÁº©‰∏∫ÊúÄÂ∞èÂëΩ‰ª§ÈõÜÔºåÂä†Âø´‰∫ÜÊï∞ÊçÆÊÅ¢Â§çÁöÑÈÄüÂ∫¶</li>
</ol>
<p><strong>AOFÊñá‰ª∂ÊçüÂùè</strong></p>
<p>Âú®ÂÜôÂÖ• aof Êó•ÂøóÊñá‰ª∂Êó∂ÔºåÂ¶ÇÊûú Redis ÊúçÂä°Âô®ÂÆïÊú∫ÔºåÂàô aof Êó•ÂøóÊñá‰ª∂Êñá‰ª∂‰ºöÂá∫Ê†ºÂºèÈîôËØØÔºåÂú®ÈáçÂêØ Redis ÊúçÂä°Âô®Êó∂ÔºåRedis ÊúçÂä°Âô®‰ºöÊãíÁªùËΩΩÂÖ•Ëøô‰∏™ aof Êñá‰ª∂ÔºåÂèØ‰ª•ÈÄöËøá‰ª•‰∏ãÊ≠•È™§‰øÆÂ§ç aof Âπ∂ÊÅ¢Â§çÊï∞ÊçÆÔºö</p>
<ol>
<li>
<p>Â§á‰ªΩÁé∞Âú®ÁöÑ aof Êñá‰ª∂Ôºå‰ª•Èò≤‰∏á‰∏Ä</p>
</li>
<li>
<p>‰ΩøÁî®<code>redis-check-aof</code>ÂëΩ‰ª§‰øÆÂ§ç aof Êñá‰ª∂ÔºåËØ•ÂëΩ‰ª§Ê†ºÂºèÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ‰øÆÂ§çaofÊó•ÂøóÊñá‰ª∂</span>
$<span class="w"> </span>redis-check-aof<span class="w"> </span>-fix<span class="w"> </span>file.aof
</code></pre></div>
</li>
<li>
<p>ÈáçÂêØ Redis ÊúçÂä°Âô®ÔºåÂä†ËΩΩÂ∑≤Áªè‰øÆÂ§çÁöÑ aof Êñá‰ª∂ÔºåÊÅ¢Â§çÊï∞ÊçÆ</p>
</li>
</ol>
<h4 id="923aof">9.2.3„ÄÅAOF ÁöÑ‰ºòÁº∫ÁÇπ<a class="headerlink" href="#923aof" title="Permanent link">&para;</a></h4>
<p><strong>‰ºòÁÇπ</strong></p>
<p>AOF Âè™ÊòØËøΩÂä†Êó•ÂøóÊñá‰ª∂ÔºåÂõ†Ê≠§ÂØπÊúçÂä°Âô®ÊÄßËÉΩÂΩ±ÂìçËæÉÂ∞èÔºåÈÄüÂ∫¶ÊØî RDB Ë¶ÅÂø´ÔºåÊ∂àËÄóÁöÑÂÜÖÂ≠òËæÉÂ∞ë„ÄÇ</p>
<p><strong>Áº∫ÁÇπ</strong></p>
<ol>
<li>AOF ÊñπÂºèÁîüÊàêÁöÑÊó•ÂøóÊñá‰ª∂Â§™Â§ßÔºåÂç≥‰ΩøÈÄöËøá AOF ÈáçÂÜôÔºåÊñá‰ª∂‰ΩìÁßØ‰ªçÁÑ∂ÂæàÂ§ß„ÄÇ</li>
<li>ÊÅ¢Â§çÊï∞ÊçÆÁöÑÈÄüÂ∫¶ÊØî RDB ÊÖ¢„ÄÇ</li>
</ol>
<h2 id="10">10„ÄÅËÆ¢ÈòÖ‰∏éÂèëÂ∏É<a class="headerlink" href="#10" title="Permanent link">&para;</a></h2>
<p>Redis ÈÄöËøá <code>publish</code> „ÄÅ <code>subscribe</code> Á≠âÂëΩ‰ª§ÂÆûÁé∞‰∫ÜËÆ¢ÈòÖ‰∏éÂèëÂ∏ÉÊ®°ÂºèÔºå Ëøô‰∏™ÂäüËÉΩÊèê‰æõ‰∏§Áßç‰ø°ÊÅØÊú∫Âà∂Ôºå ÂàÜÂà´ÊòØËÆ¢ÈòÖ/ÂèëÂ∏ÉÂà∞È¢ëÈÅìÂíåËÆ¢ÈòÖ/ÂèëÂ∏ÉÂà∞Ê®°Âºè„ÄÇ</p>
<p>Redis ÁöÑ<code>subscribe</code>ÂëΩ‰ª§ÂèØ‰ª•ËÆ©ÂÆ¢Êà∑Á´ØËÆ¢ÈòÖ‰ªªÊÑèÊï∞ÈáèÁöÑÈ¢ëÈÅìÔºå ÊØèÂΩìÊúâÊñ∞‰ø°ÊÅØÂèëÈÄÅÂà∞Ë¢´ËÆ¢ÈòÖÁöÑÈ¢ëÈÅìÊó∂Ôºå ‰ø°ÊÅØÂ∞±‰ºöË¢´ÂèëÈÄÅÁªôÊâÄÊúâËÆ¢ÈòÖÊåáÂÆöÈ¢ëÈÅìÁöÑÂÆ¢Êà∑Á´Ø„ÄÇ</p>
<p>‰∏ãÂõæÂ±ïÁ§∫‰∫ÜÈ¢ëÈÅì channel1 Ôºå ‰ª•ÂèäËÆ¢ÈòÖËøô‰∏™È¢ëÈÅìÁöÑ‰∏â‰∏™ÂÆ¢Êà∑Á´Ø ‚Äî‚Äî client2 „ÄÅ client5 Âíå client1 ‰πãÈó¥ÁöÑÂÖ≥Á≥ªÔºö</p>
<p><img src="!assets/Redis/graphviz-58f7b1f1f52b28f59291d194555fc9f4b1462a4c.svg" alt="" style="" /></p>
<p>ÂΩìÊúâÊñ∞Ê∂àÊÅØÈÄöËøá <code>publish</code> ÂëΩ‰ª§ÂèëÈÄÅÁªôÈ¢ëÈÅì channel1 Êó∂Ôºå Ëøô‰∏™Ê∂àÊÅØÂ∞±‰ºöË¢´ÂèëÈÄÅÁªôËÆ¢ÈòÖÂÆÉÁöÑ‰∏â‰∏™ÂÆ¢Êà∑Á´ØÔºö</p>
<p><img src="!assets/Redis/graphviz-84c95abf88d6c0ac55b007da08805a4b9a582fdf.svg" alt="" style="" /></p>
<h3 id="101">10.1„ÄÅËÆ¢ÈòÖ‰∏éÈÄÄËÆ¢È¢ëÈÅì<a class="headerlink" href="#101" title="Permanent link">&para;</a></h3>
<p><strong>ËÆ¢ÈòÖÈ¢ëÈÅì</strong></p>
<p>ÊØè‰∏™ Redis ÊúçÂä°Âô®ËøõÁ®ãÈÉΩÁª¥ÊåÅÁùÄ‰∏Ä‰∏™Ë°®Á§∫ÊúçÂä°Âô®Áä∂ÊÄÅÁöÑ redis.h/redisServer ÁªìÊûÑÔºå ÁªìÊûÑÁöÑ pubsub_channels Â±ûÊÄßÊòØ‰∏Ä‰∏™Â≠óÂÖ∏Ôºå Ëøô‰∏™Â≠óÂÖ∏Â∞±Áî®‰∫é‰øùÂ≠òËÆ¢ÈòÖÈ¢ëÈÅìÁöÑ‰ø°ÊÅØÔºö</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">redisServer</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="w">    </span><span class="n">dict</span><span class="w"> </span><span class="o">*</span><span class="n">pubsub_channels</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div>
<p>ÂÖ∂‰∏≠ÔºåÂ≠óÂÖ∏ÁöÑÈîÆ‰∏∫Ê≠£Âú®Ë¢´ËÆ¢ÈòÖÁöÑÈ¢ëÈÅìÔºå ËÄåÂ≠óÂÖ∏ÁöÑÂÄºÂàôÊòØ‰∏Ä‰∏™ÈìæË°®Ôºå ÈìæË°®‰∏≠‰øùÂ≠ò‰∫ÜÊâÄÊúâËÆ¢ÈòÖËøô‰∏™È¢ëÈÅìÁöÑÂÆ¢Êà∑Á´Ø„ÄÇ</p>
<p>Âú®‰∏ãÂõæÂ±ïÁ§∫ÁöÑËøô‰∏™ pubsub_channels Á§∫‰æã‰∏≠Ôºå client2 „ÄÅ client5 Âíå client1 Â∞±ËÆ¢ÈòÖ‰∫Ü channel1 Ôºå ËÄåÂÖ∂‰ªñÈ¢ëÈÅì‰πüÂàÜÂà´Ë¢´Âà´ÁöÑÂÆ¢Êà∑Á´ØÊâÄËÆ¢ÈòÖÔºö</p>
<p><img src="!assets/Redis/graphviz-241c988b86bb9bed6bf26537e654baaab4eef77b.svg" alt="" style="" /></p>
<p>ÂΩìÂÆ¢Êà∑Á´ØË∞ÉÁî® <code>subscribe</code> ÂëΩ‰ª§Êó∂Ôºå Á®ãÂ∫èÂ∞±Â∞ÜÂÆ¢Êà∑Á´ØÂíåË¶ÅËÆ¢ÈòÖÁöÑÈ¢ëÈÅìÂú® pubsub_channels Â≠óÂÖ∏‰∏≠ÂÖ≥ËÅîËµ∑Êù•„ÄÇ</p>
<p>Â¶ÇÊûúÂÆ¢Êà∑Á´Ø client10086 ÊâßË°åÂëΩ‰ª§ <code>subscribe channel1 channel2 channel3</code> ÔºåÈÇ£‰πàÂâçÈù¢Â±ïÁ§∫ÁöÑ pubsub_channels Â∞ÜÂèòÊàê‰∏ãÈù¢Ëøô‰∏™Ê†∑Â≠êÔºö</p>
<p><img src="!assets/Redis/graphviz-cb250b1be4aaaedc9d5ddde113a80998d7f9c480.svg" alt="" style="" /></p>
<p><code>subscribe</code> ÂëΩ‰ª§ÁöÑË°å‰∏∫ÂèØ‰ª•Áî®‰º™‰ª£Á†ÅË°®Á§∫Â¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">SUBSCRIBE</span><span class="p">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">channels</span><span class="p">)</span><span class="o">:</span>

<span class="w">    </span><span class="cp"># ÈÅçÂéÜÊâÄÊúâËæìÂÖ•È¢ëÈÅì</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">channel</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">channels</span><span class="o">:</span>

<span class="w">        </span><span class="cp"># Â∞ÜÂÆ¢Êà∑Á´ØÊ∑ªÂä†Âà∞ÈìæË°®ÁöÑÊú´Â∞æ</span>
<span class="w">        </span><span class="n">redisServer</span><span class="p">.</span><span class="n">pubsub_channels</span><span class="p">[</span><span class="n">channel</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
</code></pre></div>
<p>ÈÄöËøá pubsub_channels Â≠óÂÖ∏Ôºå Á®ãÂ∫èÂè™Ë¶ÅÊ£ÄÊü•Êüê‰∏™È¢ëÈÅìÊòØÂê¶‰∏∫Â≠óÂÖ∏ÁöÑÈîÆÔºå Â∞±ÂèØ‰ª•Áü•ÈÅìËØ•È¢ëÈÅìÊòØÂê¶Ê≠£Âú®Ë¢´ÂÆ¢Êà∑Á´ØËÆ¢ÈòÖÔºõ Âè™Ë¶ÅÂèñÂá∫Êüê‰∏™ÈîÆÁöÑÂÄºÔºå Â∞±ÂèØ‰ª•ÂæóÂà∞ÊâÄÊúâËÆ¢ÈòÖËØ•È¢ëÈÅìÁöÑÂÆ¢Êà∑Á´ØÁöÑ‰ø°ÊÅØ„ÄÇ</p>
<p><strong>ÈÄÄËÆ¢È¢ëÈÅì</strong></p>
<p>‰ΩøÁî® <code>unsubscribe</code> ÂëΩ‰ª§ÂèØ‰ª•ÈÄÄËÆ¢ÊåáÂÆöÁöÑÈ¢ëÈÅìÔºå Ëøô‰∏™ÂëΩ‰ª§ÊâßË°åÁöÑÊòØËÆ¢ÈòÖÁöÑÂèçÊìç‰ΩúÔºö ÂÆÉ‰ªé pubsub_channels Â≠óÂÖ∏ÁöÑÁªôÂÆöÈ¢ëÈÅìÔºàÈîÆÔºâ‰∏≠Ôºå Âà†Èô§ÂÖ≥‰∫éÂΩìÂâçÂÆ¢Êà∑Á´ØÁöÑ‰ø°ÊÅØÔºå ËøôÊ†∑Ë¢´ÈÄÄËÆ¢È¢ëÈÅìÁöÑ‰ø°ÊÅØÂ∞±‰∏ç‰ºöÂÜçÂèëÈÄÅÁªôËøô‰∏™ÂÆ¢Êà∑Á´Ø„ÄÇ</p>
<h3 id="102">10.2„ÄÅÂèëÈÄÅ‰ø°ÊÅØÂà∞È¢ëÈÅì<a class="headerlink" href="#102" title="Permanent link">&para;</a></h3>
<p>ÂΩìË∞ÉÁî® <code>publish channel message</code> ÂëΩ‰ª§Ôºå Á®ãÂ∫èÈ¶ñÂÖàÊ†πÊçÆ channel ÂÆö‰ΩçÂà∞Â≠óÂÖ∏ÁöÑÈîÆÔºå ÁÑ∂ÂêéÂ∞Ü‰ø°ÊÅØÂèëÈÄÅÁªôÂ≠óÂÖ∏ÂÄºÈìæË°®‰∏≠ÁöÑÊâÄÊúâÂÆ¢Êà∑Á´Ø„ÄÇ</p>
<p>ÂØπ‰∫é‰ª•‰∏ãËøô‰∏™ pubsub_channels ÂÆû‰æãÔºå Â¶ÇÊûúÊüê‰∏™ÂÆ¢Êà∑Á´ØÊâßË°åÂëΩ‰ª§ <code>publish channel1 "hello moto"</code> ÔºåÈÇ£‰πà client2 „ÄÅ client5 Âíå client1 ‰∏â‰∏™ÂÆ¢Êà∑Á´ØÈÉΩÂ∞ÜÊé•Êî∂Âà∞ "hello moto" ‰ø°ÊÅØÔºö</p>
<p><img src="!assets/Redis/graphviz-241c988b86bb9bed6bf26537e654baaab4eef77b.svg" alt="" style="" /></p>
<p><code>publish</code>ÂëΩ‰ª§ÁöÑÂÆûÁé∞ÂèØ‰ª•Áî®‰ª•‰∏ã‰º™‰ª£Á†ÅÊù•ÊèèËø∞Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">PUBLISH</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="o">:</span>

<span class="w">    </span><span class="cp"># ÈÅçÂéÜÊâÄÊúâËÆ¢ÈòÖÈ¢ëÈÅì channel ÁöÑÂÆ¢Êà∑Á´Ø</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">server</span><span class="p">.</span><span class="n">pubsub_channels</span><span class="p">[</span><span class="n">channel</span><span class="p">]</span><span class="o">:</span>

<span class="w">        </span><span class="cp"># Â∞Ü‰ø°ÊÅØÂèëÈÄÅÁªôÂÆÉ‰ª¨</span>
<span class="w">        </span><span class="n">send_message</span><span class="p">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">)</span>
</code></pre></div>
<h3 id="103">10.3„ÄÅÊ®°ÂºèÁöÑËÆ¢ÈòÖ‰∏é‰ø°ÊÅØÂèëÈÄÅ<a class="headerlink" href="#103" title="Permanent link">&para;</a></h3>
<p>ÂΩì‰ΩøÁî® <code>publish</code> ÂëΩ‰ª§ÂèëÈÄÅ‰ø°ÊÅØÂà∞Êüê‰∏™È¢ëÈÅìÊó∂Ôºå ‰∏ç‰ªÖÊâÄÊúâËÆ¢ÈòÖËØ•È¢ëÈÅìÁöÑÂÆ¢Êà∑Á´Ø‰ºöÊî∂Âà∞‰ø°ÊÅØÔºå Â¶ÇÊûúÊúâÊüê‰∏™/Êüê‰∫õÊ®°ÂºèÂíåËøô‰∏™È¢ëÈÅìÂåπÈÖçÁöÑËØùÔºå ÈÇ£‰πàÊâÄÊúâËÆ¢ÈòÖËøô‰∏™/Ëøô‰∫õÈ¢ëÈÅìÁöÑÂÆ¢Êà∑Á´Ø‰πüÂêåÊ†∑‰ºöÊî∂Âà∞‰ø°ÊÅØ„ÄÇ</p>
<p>‰∏ãÂõæÂ±ïÁ§∫‰∫Ü‰∏Ä‰∏™Â∏¶ÊúâÈ¢ëÈÅìÂíåÊ®°ÂºèÁöÑ‰æãÂ≠êÔºå ÂÖ∂‰∏≠ tweet.shop.* Ê®°ÂºèÂåπÈÖç‰∫Ü tweet.shop.kindle È¢ëÈÅìÂíå tweet.shop.ipad È¢ëÈÅìÔºå Âπ∂‰∏îÊúâ‰∏çÂêåÁöÑÂÆ¢Êà∑Á´ØÂàÜÂà´ËÆ¢ÈòÖÂÆÉ‰ª¨‰∏â‰∏™Ôºö</p>
<p><img src="!assets/Redis/graphviz-49c2b60cc3c2b52ec1623fbd8a9002eb6f335a54.svg" alt="" style="" /></p>
<p>ÂΩìÊúâ‰ø°ÊÅØÂèëÈÄÅÂà∞ tweet.shop.kindle È¢ëÈÅìÊó∂Ôºå Èô§‰∫ÜÂèëÈÄÅÁªô clientX Âíå clientY ‰πãÂ§ñÔºå Ëøò‰ºöÂèëÈÄÅÁªôËÆ¢ÈòÖ tweet.shop.* Ê®°ÂºèÁöÑ client123 Âíå client256 Ôºö</p>
<p><img src="!assets/Redis/graphviz-3d1f513ee0718a326d53152b2b97f82977e38ad6.svg" alt="" style="" /></p>
<p>Âè¶‰∏ÄÊñπÈù¢Ôºå Â¶ÇÊûúÊé•Êî∂Âà∞‰ø°ÊÅØÁöÑÊòØÈ¢ëÈÅì tweet.shop.ipad Ôºå ÈÇ£‰πà client123 Âíå client256 ÂêåÊ†∑‰ºöÊî∂Âà∞‰ø°ÊÅØÔºö</p>
<p><img src="!assets/Redis/graphviz-ba8c4d4dd538464659aeb52d6c366f23ad3d0dc1.svg" alt="" style="" /></p>
<h3 id="104">10.4„ÄÅËÆ¢ÈòÖ‰∏éÈÄÄËÆ¢Ê®°Âºè<a class="headerlink" href="#104" title="Permanent link">&para;</a></h3>
<p><strong>ËÆ¢ÈòÖÊ®°Âºè</strong></p>
<p>redisServer.pubsub_patterns Â±ûÊÄßÊòØ‰∏Ä‰∏™ÈìæË°®ÔºåÈìæË°®‰∏≠‰øùÂ≠òÁùÄÊâÄÊúâÂíåÊ®°ÂºèÁõ∏ÂÖ≥ÁöÑ‰ø°ÊÅØÔºö</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">redisServer</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="w">    </span><span class="n">list</span><span class="w"> </span><span class="o">*</span><span class="n">pubsub_patterns</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div>
<p>ÈìæË°®‰∏≠ÁöÑÊØè‰∏™ËäÇÁÇπÈÉΩÂåÖÂê´‰∏Ä‰∏™ redis.h/pubsubPattern ÁªìÊûÑÔºö</p>
<div class="highlight"><pre><span></span><code><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">pubsubPattern</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">redisClient</span><span class="w"> </span><span class="o">*</span><span class="n">client</span><span class="p">;</span>
<span class="w">    </span><span class="n">robj</span><span class="w"> </span><span class="o">*</span><span class="n">pattern</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">pubsubPattern</span><span class="p">;</span>
</code></pre></div>
<p>client Â±ûÊÄß‰øùÂ≠òÁùÄËÆ¢ÈòÖÊ®°ÂºèÁöÑÂÆ¢Êà∑Á´ØÔºåËÄå pattern Â±ûÊÄßÂàô‰øùÂ≠òÁùÄË¢´ËÆ¢ÈòÖÁöÑÊ®°Âºè„ÄÇ</p>
<p>ÊØèÂΩìË∞ÉÁî® <code>psubscribe</code> ÂëΩ‰ª§ËÆ¢ÈòÖ‰∏Ä‰∏™Ê®°ÂºèÊó∂Ôºå Á®ãÂ∫èÂ∞±ÂàõÂª∫‰∏Ä‰∏™ÂåÖÂê´ÂÆ¢Êà∑Á´Ø‰ø°ÊÅØÂíåË¢´ËÆ¢ÈòÖÊ®°ÂºèÁöÑ pubsubPattern ÁªìÊûÑÔºå Âπ∂Â∞ÜËØ•ÁªìÊûÑÊ∑ªÂä†Âà∞ redisServer.pubsub_patterns ÈìæË°®‰∏≠„ÄÇ</p>
<p>‰∏ãÂõæÂ±ïÁ§∫‰∫Ü‰∏Ä‰∏™ÂåÖÂê´‰∏§‰∏™Ê®°ÂºèÁöÑ pubsub_patterns ÈìæË°®Ôºå ÂÖ∂‰∏≠ client123 Âíå client256 ÈÉΩÊ≠£Âú®ËÆ¢ÈòÖ tweet.shop.* Ê®°ÂºèÔºö</p>
<p><img src="!assets/Redis/graphviz-b8d101c1b582531bce2b0daef87adbaf30ebc195.svg" alt="" style="" /></p>
<p>Â¶ÇÊûúËøôÊó∂ÂÆ¢Êà∑Á´Ø client10086 ÊâßË°å <code>psubscribe broadcast.list.*</code> Ôºå ÈÇ£‰πà pubsub_patterns ÈìæË°®Â∞ÜË¢´Êõ¥Êñ∞ÊàêËøôÊ†∑Ôºö</p>
<p><img src="!assets/Redis/graphviz-a84f3abf466ca19297faaa4e11d37f9257355c60.svg" alt="" style="" /></p>
<p>ÈÄöËøáÈÅçÂéÜÊï¥‰∏™ pubsub_patterns ÈìæË°®ÔºåÁ®ãÂ∫èÂèØ‰ª•Ê£ÄÊü•ÊâÄÊúâÊ≠£Âú®Ë¢´ËÆ¢ÈòÖÁöÑÊ®°ÂºèÔºå‰ª•ÂèäËÆ¢ÈòÖËøô‰∫õÊ®°ÂºèÁöÑÂÆ¢Êà∑Á´Ø„ÄÇ</p>
<p><strong>ÈÄÄËÆ¢Ê®°Âºè</strong></p>
<p>‰ΩøÁî® <code>punsubscribe</code> ÂëΩ‰ª§ÂèØ‰ª•ÈÄÄËÆ¢ÊåáÂÆöÁöÑÊ®°ÂºèÔºå Ëøô‰∏™ÂëΩ‰ª§ÊâßË°åÁöÑÊòØËÆ¢ÈòÖÊ®°ÂºèÁöÑÂèçÊìç‰ΩúÔºö Á®ãÂ∫è‰ºöÂà†Èô§ redisServer.pubsub_patterns ÈìæË°®‰∏≠Ôºå ÊâÄÊúâÂíåË¢´ÈÄÄËÆ¢Ê®°ÂºèÁõ∏ÂÖ≥ËÅîÁöÑ pubsubPattern ÁªìÊûÑÔºå ËøôÊ†∑ÂÆ¢Êà∑Á´ØÂ∞±‰∏ç‰ºöÂÜçÊî∂Âà∞ÂíåÊ®°ÂºèÁõ∏ÂåπÈÖçÁöÑÈ¢ëÈÅìÂèëÊù•ÁöÑ‰ø°ÊÅØ„ÄÇ</p>
<h3 id="105">10.5„ÄÅÂèëÈÄÅ‰ø°ÊÅØÂà∞Ê®°Âºè<a class="headerlink" href="#105" title="Permanent link">&para;</a></h3>
<p>ÂèëÈÄÅ‰ø°ÊÅØÂà∞Ê®°ÂºèÁöÑÂ∑•‰Ωú‰πüÊòØÁî±<code>publish</code>ÂëΩ‰ª§ËøõË°åÁöÑÔºå Âú®ÂâçÈù¢ËÆ≤Ëß£È¢ëÈÅìÁöÑÊó∂ÂÄôÔºå ÁªôÂá∫‰∫ÜËøôÊ†∑‰∏ÄÊÆµ‰º™‰ª£Á†ÅÔºå ËØ¥ÂÆÉÂÆö‰πâ‰∫Ü <code>publish</code> ÂëΩ‰ª§ÁöÑË°å‰∏∫</p>
<div class="highlight"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">PUBLISH</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="o">:</span>

<span class="w">    </span><span class="cp"># ÈÅçÂéÜÊâÄÊúâËÆ¢ÈòÖÈ¢ëÈÅì channel ÁöÑÂÆ¢Êà∑Á´Ø</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">server</span><span class="p">.</span><span class="n">pubsub_channels</span><span class="p">[</span><span class="n">channel</span><span class="p">]</span><span class="o">:</span>

<span class="w">        </span><span class="cp"># Â∞Ü‰ø°ÊÅØÂèëÈÄÅÁªôÂÆÉ‰ª¨</span>
<span class="w">        </span><span class="n">send_message</span><span class="p">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">)</span>
</code></pre></div>
<p>‰ΩÜÊòØÔºåËøôÊÆµ‰º™‰ª£Á†ÅÂπ∂Ê≤°ÊúâÂÆåÊï¥ÊèèËø∞ <code>publish</code> ÂëΩ‰ª§ÁöÑË°å‰∏∫Ôºå Âõ†‰∏∫ <code>publish</code> Èô§‰∫ÜÂ∞Ü message ÂèëÈÄÅÂà∞ÊâÄÊúâËÆ¢ÈòÖ channel ÁöÑÂÆ¢Êà∑Á´Ø‰πãÂ§ñÔºå ÂÆÉËøò‰ºöÂ∞Ü channel Âíå pubsub_patterns ‰∏≠ÁöÑÊ®°ÂºèËøõË°åÂØπÊØîÔºå Â¶ÇÊûú channel ÂíåÊüê‰∏™Ê®°ÂºèÂåπÈÖçÁöÑËØùÔºå ÈÇ£‰πà‰πüÂ∞Ü message ÂèëÈÄÅÂà∞ËÆ¢ÈòÖÈÇ£‰∏™Ê®°ÂºèÁöÑÂÆ¢Êà∑Á´Ø„ÄÇ</p>
<p>ÂÆåÊï¥ÊèèËø∞ <code>publish</code> ÂäüËÉΩÁöÑ‰º™‰ª£Á†ÅÂÆö‰∫éÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">PUBLISH</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="o">:</span>

<span class="w">    </span><span class="cp"># ÈÅçÂéÜÊâÄÊúâËÆ¢ÈòÖÈ¢ëÈÅì channel ÁöÑÂÆ¢Êà∑Á´Ø</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">server</span><span class="p">.</span><span class="n">pubsub_channels</span><span class="p">[</span><span class="n">channel</span><span class="p">]</span><span class="o">:</span>

<span class="w">        </span><span class="cp"># Â∞Ü‰ø°ÊÅØÂèëÈÄÅÁªôÂÆÉ‰ª¨</span>
<span class="w">        </span><span class="n">send_message</span><span class="p">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">)</span>

<span class="w">    </span><span class="cp"># ÂèñÂá∫ÊâÄÊúâÊ®°ÂºèÔºå‰ª•ÂèäËÆ¢ÈòÖÊ®°ÂºèÁöÑÂÆ¢Êà∑Á´Ø</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">pattern</span><span class="p">,</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">server</span><span class="p">.</span><span class="n">pubsub_patterns</span><span class="o">:</span>

<span class="w">        </span><span class="cp"># Â¶ÇÊûú channel ÂíåÊ®°ÂºèÂåπÈÖç</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">match</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span><span class="w"> </span><span class="n">pattern</span><span class="p">)</span><span class="o">:</span>

<span class="w">            </span><span class="cp"># ÈÇ£‰πà‰πüÂ∞Ü‰ø°ÊÅØÂèëÁªôËÆ¢ÈòÖËøô‰∏™Ê®°ÂºèÁöÑÂÆ¢Êà∑Á´Ø</span>
<span class="w">            </span><span class="n">send_message</span><span class="p">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">)</span>
</code></pre></div>
<p>Â¶ÇÊûú Redis ÊúçÂä°Âô®ÁöÑ pubsub_patterns Áä∂ÊÄÅÂ¶Ç‰∏ãÔºö</p>
<p><img src="!assets/Redis/graphviz-a84f3abf466ca19297faaa4e11d37f9257355c60.svg" alt="" style="" /></p>
<p>ÈÇ£‰πàÂΩìÊüê‰∏™ÂÆ¢Êà∑Á´ØÂèëÈÄÅ‰ø°ÊÅØ "Amazon Kindle, $69." Âà∞ tweet.shop.kindle È¢ëÈÅìÊó∂Ôºå Èô§‰∫ÜÊâÄÊúâËÆ¢ÈòÖ‰∫Ü tweet.shop.kindle È¢ëÈÅìÁöÑÂÆ¢Êà∑Á´Ø‰ºöÊî∂Âà∞‰ø°ÊÅØ‰πãÂ§ñÔºå ÂÆ¢Êà∑Á´Ø client123 Âíå client256 ‰πüÂêåÊ†∑‰ºöÊî∂Âà∞‰ø°ÊÅØÔºå Âõ†‰∏∫Ëøô‰∏§‰∏™ÂÆ¢Êà∑Á´ØËÆ¢ÈòÖÁöÑ tweet.shop.* Ê®°ÂºèÂíå tweet.shop.kindle È¢ëÈÅìÂåπÈÖç„ÄÇ</p>
<h2 id="11redis">11„ÄÅRedis ÈõÜÁæ§<a class="headerlink" href="#11redis" title="Permanent link">&para;</a></h2>
<p>Redis Êúâ‰∏âÁßçÈõÜÁæ§Ê®°ÂºèÔºåÂàÜÂà´ÊòØÔºö</p>
<ul>
<li>‰∏ª‰ªéÂ§çÂà∂Ê®°Âºè</li>
<li>Sentinel Ê®°Âºè</li>
<li>Cluster Ê®°Âºè</li>
</ul>
<h3 id="111">11.1„ÄÅ‰∏ª‰ªéÂ§çÂà∂<a class="headerlink" href="#111" title="Permanent link">&para;</a></h3>
<h4 id="1111">11.1.1„ÄÅ‰∏ª‰ªéÂ§çÂà∂‰ªãÁªç<a class="headerlink" href="#1111" title="Permanent link">&para;</a></h4>
<p>ÈÄöËøáÊåÅ‰πÖÂåñÂäüËÉΩÔºåRedis ‰øùËØÅ‰∫ÜÂç≥‰ΩøÂú®ÊúçÂä°Âô®ÈáçÂêØÁöÑÊÉÖÂÜµ‰∏ã‰πü‰∏ç‰ºö‰∏¢Â§±ÔºàÊàñÂ∞ëÈáè‰∏¢Â§±ÔºâÊï∞ÊçÆÔºåÂõ†‰∏∫ÊåÅ‰πÖÂåñ‰ºöÊääÂÜÖÂ≠ò‰∏≠Êï∞ÊçÆ‰øùÂ≠òÂà∞Á°¨Áõò‰∏äÔºåÈáçÂêØ‰ºö‰ªéÁ°¨Áõò‰∏äÂä†ËΩΩÊï∞ÊçÆ„ÄÇ ‰ΩÜÊòØÁî±‰∫éÊï∞ÊçÆÊòØÂ≠òÂÇ®Âú®‰∏ÄÂè∞ÊúçÂä°Âô®‰∏äÁöÑÔºåÂ¶ÇÊûúËøôÂè∞ÊúçÂä°Âô®Âá∫Áé∞Á°¨ÁõòÊïÖÈöúÁ≠âÈóÆÈ¢òÔºå‰πü‰ºöÂØºËá¥Êï∞ÊçÆ‰∏¢Â§±„ÄÇ</p>
<p>‰∏∫‰∫ÜÈÅøÂÖçÂçïÁÇπÊïÖÈöúÔºåÈÄöÂ∏∏ÁöÑÂÅöÊ≥ïÊòØÂ∞ÜÊï∞ÊçÆÂ∫ìÂ§çÂà∂Â§ö‰∏™ÂâØÊú¨‰ª•ÈÉ®ÁΩ≤Âú®‰∏çÂêåÁöÑÊúçÂä°Âô®‰∏äÔºåËøôÊ†∑Âç≥‰ΩøÊúâ‰∏ÄÂè∞ÊúçÂä°Âô®Âá∫Áé∞ÊïÖÈöúÔºåÂÖ∂‰ªñÊúçÂä°Âô®‰æùÁÑ∂ÂèØ‰ª•ÁªßÁª≠Êèê‰æõÊúçÂä°„ÄÇ</p>
<p>‰∏∫Ê≠§Ôºå Redis Êèê‰æõ‰∫ÜÂ§çÂà∂ÔºàreplicationÔºâÂäüËÉΩÔºåÂèØ‰ª•ÂÆûÁé∞ÂΩì‰∏ÄÂè∞Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊï∞ÊçÆÊõ¥Êñ∞ÂêéÔºåËá™Âä®Â∞ÜÊõ¥Êñ∞ÁöÑÊï∞ÊçÆÂêåÊ≠•Âà∞ÂÖ∂‰ªñÊï∞ÊçÆÂ∫ì‰∏ä„ÄÇ</p>
<p>Âú®Â§çÂà∂ÁöÑÊ¶ÇÂøµ‰∏≠ÔºåÊï∞ÊçÆÂ∫ìÂàÜ‰∏∫‰∏§Á±ªÔºå‰∏ÄÁ±ªÊòØ‰∏ªÊï∞ÊçÆÂ∫ìÔºàmasterÔºâÔºåÂè¶‰∏ÄÁ±ªÊòØ‰ªéÊï∞ÊçÆÂ∫ìÔºàslaveÔºâ„ÄÇmaster ÂèØ‰ª•ËøõË°åËØªÂÜôÊìç‰ΩúÔºåÂΩìÂÜôÊìç‰ΩúÂØºËá¥Êï∞ÊçÆÂèòÂåñÊó∂‰ºöËá™Âä®Â∞ÜÊï∞ÊçÆÂêåÊ≠•Áªô‰ªé slave„ÄÇËÄå slave ‰∏ÄËà¨ÊòØÂè™ËØªÁöÑÔºåÂπ∂Êé•Âèó master ÂêåÊ≠•ËøáÊù•ÁöÑÊï∞ÊçÆ„ÄÇ‰∏Ä‰∏™ master ÂèØ‰ª•Êã•ÊúâÂ§ö‰∏™ slaveÔºåËÄå‰∏Ä‰∏™ slave Âè™ËÉΩÊã•Êúâ‰∏Ä‰∏™ master„ÄÇ</p>
<p>slave ÊåÇ‰∫Ü‰∏çÂΩ±ÂìçÂÖ∂‰ªñ slave ÁöÑËØªÂíå master ÁöÑËØªÂíåÂÜôÔºåÈáçÊñ∞ÂêØÂä®Âêé‰ºöÂ∞ÜÊï∞ÊçÆ‰ªé master ÂêåÊ≠•ËøáÊù•Ôºå master ÊåÇ‰∫Ü‰ª•ÂêéÔºå‰∏çÂΩ±Âìç slave ÁöÑËØªÔºå‰ΩÜ Redis ‰∏çÂÜçÊèê‰æõÂÜôÊúçÂä°Ôºåmaster ÈáçÂêØÂêé Redis Â∞ÜÈáçÊñ∞ÂØπÂ§ñÊèê‰æõÂÜôÊúçÂä°„ÄÇ</p>
<p><img src="!assets/Redis/1460000022808581.png" alt="img" style="" /></p>
<p><strong>‰∏ª‰ªéÂ§çÂà∂ÂéüÁêÜ</strong></p>
<p><img src="!assets/Redis/1460000022808583.png" alt="img" style="zoom:80%;" /></p>
<ol>
<li>slave ÂêØÂä®ÊàêÂäüÂêéÔºåËøûÊé• masterÔºåÂèëÈÄÅ <code>sync</code> ÂëΩ‰ª§</li>
<li>master Êé•Êî∂Âà∞ <code>sync</code> ÂëΩ‰ª§ÂêéÔºåÂºÄÂßãÊâßË°å <code>bgsave</code> ÂëΩ‰ª§ÁîüÊàê RDB Êñá‰ª∂Âπ∂‰ΩøÁî®ÁºìÂÜ≤Âå∫ËÆ∞ÂΩïÊ≠§ÂêéÊâßË°åÁöÑÊâÄÊúâÂÜôÂëΩ‰ª§</li>
<li>master <code>bgsave</code> ÊâßË°åÂÆåÂêéÔºåÂêëÊâÄÊúâ slave ÂèëÈÄÅÂø´ÁÖßÊñá‰ª∂ÔºåÂπ∂Âú®ÂèëÈÄÅÊúüÈó¥ÁªßÁª≠ËÆ∞ÂΩïË¢´ÊâßË°åÁöÑÂÜôÂëΩ‰ª§</li>
<li>slave Êî∂Âà∞Âø´ÁÖßÊñá‰ª∂Âêé‰∏¢ÂºÉÊâÄÊúâÊóßÊï∞ÊçÆÔºåËΩΩÂÖ•Êî∂Âà∞ÁöÑÂø´ÁÖß</li>
<li>master Âø´ÁÖßÂèëÈÄÅÂÆåÊØïÂêéÂºÄÂßãÂêë slave ÂèëÈÄÅÁºìÂÜ≤Âå∫‰∏≠ÁöÑÂÜôÂëΩ‰ª§</li>
<li>slave ÂÆåÊàêÂØπÂø´ÁÖßÁöÑËΩΩÂÖ•ÔºåÂºÄÂßãÊé•Êî∂ÂëΩ‰ª§ËØ∑Ê±ÇÔºåÂπ∂ÊâßË°åÊù•Ëá™ master ÁºìÂÜ≤Âå∫ÁöÑÂÜôÂëΩ‰ª§Ôºà<strong>slave ÂàùÂßãÂåñÂÆåÊàê</strong>Ôºâ</li>
<li>master ÊØèÊâßË°å‰∏Ä‰∏™ÂÜôÂëΩ‰ª§Â∞±‰ºöÂêë slave ÂèëÈÄÅÁõ∏ÂêåÁöÑÂÜôÂëΩ‰ª§Ôºåslave Êé•Êî∂Âπ∂ÊâßË°åÊî∂Âà∞ÁöÑÂÜôÂëΩ‰ª§Ôºà<strong>slave ÂàùÂßãÂåñÂÆåÊàêÂêéÁöÑÊìç‰Ωú</strong>Ôºâ</li>
<li>Âá∫Áé∞Êñ≠ÂºÄÈáçËøûÂêéÔºå2.8 ‰πãÂêéÁöÑÁâàÊú¨‰ºöÂ∞ÜÊñ≠Á∫øÊúüÈó¥ÁöÑÂëΩ‰ª§‰º†ÁªôÈáçÊï∞ÊçÆÂ∫ìÔºåÂ¢ûÈáèÂ§çÂà∂</li>
<li>‰∏ª‰ªéÂàöÂàöËøûÊé•ÁöÑÊó∂ÂÄôÔºåËøõË°åÂÖ®ÈáèÂêåÊ≠•ÔºõÂÖ®ÂêåÊ≠•ÁªìÊùüÂêéÔºåËøõË°åÂ¢ûÈáèÂêåÊ≠•„ÄÇÂΩìÁÑ∂ÔºåÂ¶ÇÊûúÊúâÈúÄË¶ÅÔºåslave Âú®‰ªª‰ΩïÊó∂ÂÄôÈÉΩÂèØ‰ª•ÂèëËµ∑ÂÖ®ÈáèÂêåÊ≠•„ÄÇRedis ÁöÑÁ≠ñÁï•ÊòØÔºåÊó†ËÆ∫Â¶Ç‰ΩïÔºåÈ¶ñÂÖà‰ºöÂ∞ùËØïËøõË°åÂ¢ûÈáèÂêåÊ≠•ÔºåÂ¶Ç‰∏çÊàêÂäüÔºåË¶ÅÊ±Ç‰ªéÊú∫ËøõË°åÂÖ®ÈáèÂêåÊ≠•</li>
</ol>
<p>**‰∏ª‰ªéÂ§çÂà∂ÁöÑ‰ºòÁÇπ **</p>
<ol>
<li>ÊîØÊåÅ‰∏ª‰ªéÂ§çÂà∂Ôºå‰∏ªÊú∫‰ºöËá™Âä®Â∞ÜÊï∞ÊçÆÂêåÊ≠•Âà∞‰ªéÊú∫ÔºåÂèØ‰ª•ËøõË°åËØªÂÜôÂàÜÁ¶ª</li>
<li>‰∏∫‰∫ÜÂàÜËΩΩ master ÁöÑËØªÊìç‰ΩúÂéãÂäõÔºåslave ÊúçÂä°Âô®ÂèØ‰ª•‰∏∫ÂÆ¢Êà∑Á´ØÊèê‰æõÂè™ËØªÊìç‰ΩúÁöÑÊúçÂä°ÔºåÂÜôÊúçÂä°‰ªçÁÑ∂ÂøÖÈ°ªÁî± master Êù•ÂÆåÊàê</li>
<li>slave ÂêåÊ†∑ÂèØ‰ª•Êé•ÂèóÂÖ∂ÂÆÉ slave ÁöÑËøûÊé•ÂíåÂêåÊ≠•ËØ∑Ê±ÇÔºåËøôÊ†∑ÂèØ‰ª•ÊúâÊïàÁöÑÂàÜËΩΩ master ÁöÑÂêåÊ≠•ÂéãÂäõ</li>
<li>master server ÊòØ‰ª•ÈùûÈòªÂ°ûÁöÑÊñπÂºè‰∏∫ slave Êèê‰æõÊúçÂä°„ÄÇÊâÄ‰ª•Âú® master-slave ÂêåÊ≠•ÊúüÈó¥ÔºåÂÆ¢Êà∑Á´Ø‰ªçÁÑ∂ÂèØ‰ª•Êèê‰∫§Êü•ËØ¢Êàñ‰øÆÊîπËØ∑Ê±Ç</li>
<li>slave server ÂêåÊ†∑ÊòØ‰ª•ÈùûÈòªÂ°ûÁöÑÊñπÂºèÂÆåÊàêÊï∞ÊçÆÂêåÊ≠•„ÄÇÂú®ÂêåÊ≠•ÊúüÈó¥ÔºåÂ¶ÇÊûúÊúâÂÆ¢Êà∑Á´ØÊèê‰∫§Êü•ËØ¢ËØ∑Ê±ÇÔºåRedis ÂàôËøîÂõûÂêåÊ≠•‰πãÂâçÁöÑÊï∞ÊçÆ</li>
</ol>
<p>**‰∏ª‰ªéÂ§çÂà∂ÁöÑÁº∫ÁÇπ **</p>
<ol>
<li>Redis ‰∏çÂÖ∑Â§áËá™Âä®ÂÆπÈîôÂíåÊÅ¢Â§çÂäüËÉΩÔºå‰∏ªÊú∫‰ªéÊú∫ÁöÑÂÆïÊú∫ÈÉΩ‰ºöÂØºËá¥ÂâçÁ´ØÈÉ®ÂàÜËØªÂÜôËØ∑Ê±ÇÂ§±Ë¥•ÔºåÈúÄË¶ÅÁ≠âÂæÖÊú∫Âô®ÈáçÂêØÊàñËÄÖÊâãÂä®ÂàáÊç¢ÂâçÁ´ØÁöÑ IP ÊâçËÉΩÊÅ¢Â§çÔºà<strong>‰πüÂ∞±ÊòØË¶Å‰∫∫Â∑•‰ªãÂÖ•</strong>Ôºâ</li>
<li>‰∏ªÊú∫ÂÆïÊú∫ÔºåÂÆïÊú∫ÂâçÊúâÈÉ®ÂàÜÊï∞ÊçÆÊú™ËÉΩÂèäÊó∂ÂêåÊ≠•Âà∞‰ªéÊú∫ÔºåÂàáÊç¢ IP ÂêéËøò‰ºöÂºïÂÖ•Êï∞ÊçÆ‰∏ç‰∏ÄËá¥ÁöÑÈóÆÈ¢òÔºåÈôç‰Ωé‰∫ÜÁ≥ªÁªüÁöÑÂèØÁî®ÊÄß</li>
<li>Â¶ÇÊûúÂ§ö‰∏™ slave Êñ≠Á∫ø‰∫ÜÔºåÈúÄË¶ÅÈáçÂêØÁöÑÊó∂ÂÄôÔºåÂ∞ΩÈáè‰∏çË¶ÅÂú®Âêå‰∏ÄÊó∂Èó¥ÊÆµËøõË°åÈáçÂêØ„ÄÇÂõ†‰∏∫Âè™Ë¶Å slave ÂêØÂä®ÔºåÂ∞±‰ºöÂèëÈÄÅ <code>sync</code> ËØ∑Ê±ÇÂíå‰∏ªÊú∫ÂÖ®ÈáèÂêåÊ≠•ÔºåÂΩìÂ§ö‰∏™ slave ÈáçÂêØÁöÑÊó∂ÂÄôÔºåÂèØËÉΩ‰ºöÂØºËá¥ master IO ÂâßÂ¢û‰ªéËÄåÂÆïÊú∫</li>
<li>Redis ËæÉÈöæÊîØÊåÅÂú®Á∫øÊâ©ÂÆπÔºåÂú®ÈõÜÁæ§ÂÆπÈáèËææÂà∞‰∏äÈôêÊó∂Âú®Á∫øÊâ©ÂÆπ‰ºöÂèòÂæóÂæàÂ§çÊùÇ</li>
</ol>
<h4 id="1112">11.1.2„ÄÅ‰∏ª‰ªéÂ§çÂà∂Êê≠Âª∫<a class="headerlink" href="#1112" title="Permanent link">&para;</a></h4>
<p>ÂêØÂä®ÊñπÂºè</p>
<ul>
<li>
<p>ÂÆ¢Êà∑Á´ØÂèëÈÄÅÂëΩ‰ª§</p>
<div class="highlight"><pre><span></span><code>slaveof<span class="w"> </span>&lt;masterip&gt;<span class="w"> </span>&lt;masterport&gt;
</code></pre></div>
</li>
<li>
<p>ÂêØÂä®ÊúçÂä°Âô®ÂèÇÊï∞</p>
<div class="highlight"><pre><span></span><code>redis-server<span class="w"> </span>-slaveof<span class="w"> </span>&lt;masterip&gt;<span class="w"> </span>&lt;masterport&gt;
</code></pre></div>
</li>
<li>
<p>ÊúçÂä°Âô®ÈÖçÁΩÆ</p>
<div class="highlight"><pre><span></span><code>slaveof<span class="w"> </span>&lt;masterip&gt;<span class="w"> </span>&lt;masterport&gt;
</code></pre></div>
</li>
</ul>
<p>Ê≠§‰∏∫‰ª•ÊúçÂä°Âô®ÈÖçÁΩÆÂêØÂä®Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">## Êñ∞Âª∫‰∏Ä‰∏™‰∏¥Êó∂Êñá‰ª∂Â§πÔºåÊñπ‰æøÂêéÊúüÂà†Èô§</span>
mkdir<span class="w"> </span>data
<span class="nb">cd</span><span class="w"> </span>data

<span class="c1">## ÂàõÂª∫‰∏Ä‰∏™ÈÖçÁΩÆÊñá‰ª∂</span>
vim<span class="w"> </span>redis_6379.conf

<span class="c1">## ÂÜôÂÖ•ÂÜÖÂÆπ</span>
include<span class="w"> </span>/etc/redis/redis.conf
port<span class="w"> </span><span class="m">6379</span>
daemonize<span class="w"> </span>no
pidfile<span class="w"> </span>/root/data/redis_6379.pid
logfile<span class="w"> </span><span class="s2">&quot;redis_6379.log&quot;</span>
dbfilename<span class="w"> </span>dump_6379.rdb
dir<span class="w"> </span>/root/data

<span class="c1">## Â§çÂà∂‰∏Ä‰ªΩ 6379 ÈÖçÁΩÆÊñá‰ª∂Âπ∂Â∞ÜÊñá‰ª∂‰∏≠ÁöÑ 6379 Êîπ‰∏∫ 6380</span>
sed<span class="w"> </span><span class="s1">&#39;s/6379/6380/g&#39;</span><span class="w"> </span>redis_6379.conf<span class="w"> </span>&gt;<span class="w"> </span>redis_6380.conf

<span class="c1">## 6380 ÈÖçÁΩÆÊñá‰ª∂Êú´Â∞æËøΩÂä† replicaof 127.0.0.1 6379Ôºå$a\ Ë°®Á§∫ÊúÄÂêé‰∏ÄË°åÔºå\n Ë°®Á§∫Êç¢Ë°å</span>
sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;$a\\nreplicaof 127.0.0.1 6379&#39;</span><span class="w"> </span>redis_6380.conf

<span class="c1">## Â§çÂà∂‰∏Ä‰ªΩ 6380 ÈÖçÁΩÆÊñá‰ª∂Âπ∂Â∞ÜÊñá‰ª∂‰∏≠ÁöÑ 6380 Êîπ‰∏∫ 6381</span>
sed<span class="w"> </span><span class="s1">&#39;s/6380/6381/g&#39;</span><span class="w"> </span>redis_6380.conf<span class="w"> </span>&gt;<span class="w"> </span>redis_6381.conf

<span class="c1">## È°∫Â∫èÂêØÂä®ËäÇÁÇπ</span>
redis-server<span class="w"> </span>redis_6379.conf
redis-server<span class="w"> </span>redis_6380.conf
redis-server<span class="w"> </span>redis_6381.conf

<span class="c1">## ËøõÂÖ•redis ÂÆ¢Êà∑Á´ØÔºåÂºÄÂ§ö‰∏™Á™óÂè£Êü•ÁúãÊñπ‰æø‰∫õ</span>
redis-cli<span class="w"> </span>-p<span class="w"> </span><span class="m">6379</span>
</code></pre></div>
<p>ÂèØ‰ª•‰ΩøÁî®<code>info replication</code>ÁúãÂà∞Êúâ‰∏§‰∏™ slave ËøûÊé•Âà∞ master</p>
<p><img src="!assets/Redis/image-20210604171651251.png" alt="image-20210604171651251" style="" /></p>
<p><strong>Êï∞ÊçÆÂêåÊ≠•È™åËØÅ</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">## master</span>
redis-cli<span class="w"> </span>-p<span class="w"> </span><span class="m">6379</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>k1<span class="w"> </span>v1
OK

<span class="nb">exit</span>

<span class="c1">## slave1</span>
redis-cli<span class="w"> </span>-p<span class="w"> </span><span class="m">6380</span>
<span class="m">127</span>.0.0.1:6380&gt;<span class="w"> </span>get<span class="w"> </span>k1
<span class="s2">&quot;v1&quot;</span>
</code></pre></div>
<p><strong>Spring Boot ÈÖçÁΩÆ</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">## ËøûÊé•‰∏ªËäÇÁÇπÂç≥ÂèØ</span>
<span class="nt">spring</span><span class="p">:</span>
<span class="w">  </span><span class="nt">redis</span><span class="p">:</span>
<span class="w">    </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6379</span>
<span class="w">    </span><span class="nt">database</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
</code></pre></div>
<h3 id="112sentinel">11.2„ÄÅSentinel Ê®°Âºè<a class="headerlink" href="#112sentinel" title="Permanent link">&para;</a></h3>
<h4 id="1121">11.2.1„ÄÅÂì®ÂÖµÊ®°Âºè‰ªãÁªç<a class="headerlink" href="#1121" title="Permanent link">&para;</a></h4>
<p>‰∏ª‰ªéÊ®°ÂºèÁöÑÂºäÁ´ØÂ∞±ÊòØ‰∏çÂÖ∑Â§áÈ´òÂèØÁî®ÊÄßÔºåÂΩì master ÊåÇÊéâ‰ª•ÂêéÔºåRedis Â∞Ü‰∏çËÉΩÂÜçÂØπÂ§ñÊèê‰æõÂÜôÂÖ•Êìç‰ΩúÔºåÂõ†Ê≠§ sentinel Â∫îËøêËÄåÁîü„ÄÇ</p>
<p>sentinel Ê®°ÂºèÁöÑ‰∏ªË¶Å‰ΩúÁî®Âú®‰∫éÂÆÉËÉΩÂ§üËá™Âä®ÂÆåÊàêÊïÖÈöúÂèëÁé∞ÂíåÊïÖÈöúËΩ¨ÁßªÔºåÂπ∂ÈÄöÁü•ÂÆ¢Êà∑Á´ØÔºå‰ªéËÄåÂÆûÁé∞È´òÂèØÁî®„ÄÇ</p>
<p>sentinel ‰∏≠ÊñáÂê´‰πâ‰∏∫Âì®ÂÖµÔºåÈ°æÂêçÊÄù‰πâÔºåÂÆÉÁöÑ‰ΩúÁî®Â∞±ÊòØÁõëÊéß Redis ÈõÜÁæ§ÁöÑËøêË°åÁä∂ÂÜµÔºåÂΩì masterÊåÇ‰∫Ü‰ª•ÂêéÔºåsentinel ‰ºöÂú® slave ‰∏≠ÈÄâÊã©‰∏Ä‰∏™ÂÅö‰∏∫ masterÔºåÂπ∂‰øÆÊîπÂÆÉ‰ª¨ÁöÑÈÖçÁΩÆÊñá‰ª∂ÔºåÂÖ∂‰ªñ slave ÁöÑÈÖçÁΩÆÊñá‰ª∂‰πü‰ºöË¢´‰øÆÊîπÔºåÊØîÂ¶Ç slaveof Â±ûÊÄß‰ºöÊåáÂêëÊñ∞ÁöÑ masterÔºõÂΩì master ÈáçÊñ∞ÂêØÂä®ÂêéÔºåÂÆÉÂ∞Ü‰∏çÂÜçÊòØ master ËÄåÊòØÂÅö‰∏∫ slave Êé•Êî∂Êñ∞ÁöÑ master ÁöÑÂêåÊ≠•Êï∞ÊçÆ„ÄÇ</p>
<p>sentinel Âõ†‰∏∫‰πüÊòØ‰∏Ä‰∏™ËøõÁ®ãÊúâÊåÇÊéâÁöÑÂèØËÉΩÔºåÊâÄ‰ª• sentinel ‰πü‰ºöÂêØÂä®Â§ö‰∏™ÂΩ¢Êàê‰∏Ä‰∏™ sentinel ÈõÜÁæ§ÔºåÂ§ö sentinel ÈÖçÁΩÆÁöÑÊó∂ÂÄôÔºåsentinel ‰πãÈó¥‰πü‰ºöËá™Âä®ÁõëÊéßÔºåÂΩì‰∏ª‰ªéÊ®°ÂºèÈÖçÁΩÆÂØÜÁ†ÅÊó∂Ôºåsentinel ‰πü‰ºöÂêåÊ≠•Â∞ÜÈÖçÁΩÆ‰ø°ÊÅØ‰øÆÊîπÂà∞ÈÖçÁΩÆÊñá‰ª∂‰∏≠Ôºå‰∏çÈúÄË¶ÅÊãÖÂøÉ„ÄÇ</p>
<p><img src="!assets/Redis/16f7a31673b35dbf.webp" alt="img" style="zoom:80%;" /></p>
<p><strong>Âì®ÂÖµÊ®°ÂºèÁöÑÂ∑•‰ΩúÊñπÂºè</strong></p>
<ul>
<li>Âú®Âì®ÂÖµÊ®°ÂºèÂàõÂª∫Êó∂ÔºåÈúÄË¶ÅÈÄöËøáÈÖçÁΩÆÊåáÂÆö sentinel ‰∏é master ‰πãÈó¥ÁöÑÂÖ≥Á≥ªÔºåÁÑ∂Âêé sentinel ‰ºö‰ªé master ‰∏äËé∑ÂèñÊâÄÊúâ slave ÁöÑ‰ø°ÊÅØÔºå‰πãÂêé sentinel ‰ºöÂÆöÊó∂Âêë master Âíå slave ÂèëÈÄÅ <code>info</code> ÂëΩ‰ª§Ëé∑ÂèñÂÖ∂ÊãìÊâëÁªìÊûÑÂíåÁä∂ÊÄÅ‰ø°ÊÅØ</li>
<li>Âü∫‰∫é Redis ÁöÑÂèëÂ∏ÉËÆ¢ÈòÖÂäüËÉΩÔºå ÊØè‰∏™ sentinel ËäÇÁÇπ‰ºöÂêë master ÁöÑ <code>__sentinel__Ôºöhello</code>È¢ëÈÅì‰∏äÂèëÈÄÅËØ• sentinel ËäÇÁÇπÂØπ‰∫é master ÁöÑÂà§Êñ≠‰ª•ÂèäÂΩìÂâç sentinel ËäÇÁÇπÁöÑ‰ø°ÊÅØ ÔºåÂêåÊó∂ÊØè‰∏™ sentinel ËäÇÁÇπ‰πü‰ºöËÆ¢ÈòÖËØ•È¢ëÈÅìÔºå Êù•Ëé∑ÂèñÂÖ∂‰ªñ Sentinel ËäÇÁÇπÁöÑ‰ø°ÊÅØ‰ª•ÂèäÂÆÉ‰ª¨ÂØπ‰∏ªËäÇÁÇπÁöÑÂà§Êñ≠</li>
<li>Â¶ÇÊûú‰∏Ä‰∏™ master Ë¢´Ê†áËÆ∞‰∏∫‰∏ªËßÇ‰∏ãÁ∫øÔºàSDOWNÔºâÔºåÂàôÊ≠£Âú®ÁõëËßÜËøô‰∏™ master ÁöÑÊâÄÊúâ sentinel ËøõÁ®ãË¶Å‰ª•ÊØèÁßí‰∏ÄÊ¨°ÁöÑÈ¢ëÁéáÁ°ÆËÆ§ master ‰∏ªÊúçÂä°Âô®ÁöÑÁ°ÆËøõÂÖ•‰∫Ü‰∏ªËßÇ‰∏ãÁ∫øÁä∂ÊÄÅ</li>
<li>ÂΩìÊúâË∂≥Â§üÊï∞ÈáèÁöÑ sentinel ÔºàÂ§ß‰∫éÁ≠â‰∫éÈÖçÁΩÆÊñá‰ª∂ÊåáÂÆöÁöÑÂÄºÔºåËøô‰πüÊòØ‰∏∫‰ªÄ‰πà sentinel ÈúÄË¶ÅÂ§ö‰∏™Ôºå‰∏Ä‰∏™ sentinel ÂèØËÉΩ‰ºöÈÄ†ÊàêËØØÂà§ÔºâÂú®ÊåáÂÆöÁöÑÊó∂Èó¥ËåÉÂõ¥ÂÜÖÁ°ÆËÆ§ master ËøõÂÖ•‰∫Ü‰∏ªËßÇ‰∏ãÁ∫øÁä∂ÊÄÅÔºàSDOWNÔºâÔºå Âàô master ‰ºöË¢´Ê†áËÆ∞‰∏∫ÂÆ¢ËßÇ‰∏ãÁ∫øÔºàODOWNÔºâÔºåËøôÊó∂‰ºöËøõË°åÊïÖÈöúËΩ¨ÁßªÊìç‰Ωú</li>
<li>Âú®‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºå ÊØè‰∏™ sentinel ‰ºö‰ª•ÊØè 10 Áßí‰∏ÄÊ¨°ÁöÑÈ¢ëÁéáÂêëÈõÜÁæ§‰∏≠ÁöÑÊâÄÊúâ master „ÄÅslave ÂèëÈÄÅ <code>info</code> ÂëΩ‰ª§</li>
<li>ÂΩì master Ë¢´ sentinel Ê†áËÆ∞‰∏∫ÂÆ¢ËßÇ‰∏ãÁ∫øÔºàODOWNÔºâÊó∂Ôºåsentinel ËøõÁ®ãÂêë‰∏ãÁ∫øÁöÑ master ÁöÑÊâÄÊúâ slave ÂèëÈÄÅ <code>info</code> ÂëΩ‰ª§ÁöÑÈ¢ëÁéá‰ºö‰ªé 10 Áßí‰∏ÄÊ¨°Êîπ‰∏∫ÊØèÁßí‰∏ÄÊ¨°</li>
<li>Ëã•Ê≤°ÊúâË∂≥Â§üÊï∞ÈáèÁöÑ sentinel ËøõÁ®ãÂêåÊÑè master ‰∏ãÁ∫øÔºå master  ÁöÑÂÆ¢ËßÇ‰∏ãÁ∫øÁä∂ÊÄÅÂ∞±‰ºöË¢´ÁßªÈô§„ÄÇËã• master ÈáçÊñ∞Âêë sentinel ËøõÁ®ãÂèëÈÄÅ <code>ping</code>  ÂëΩ‰ª§ËøîÂõûÊúâÊïàÂõûÂ§çÔºåmaster ‰∏ªÊúçÂä°Âô®ÁöÑ‰∏ªËßÇ‰∏ãÁ∫øÁä∂ÊÄÅÂ∞±‰ºöË¢´ÁßªÈô§</li>
</ul>
<p><strong>ÊïÖÈöúËΩ¨ÁßªÂéüÁêÜ</strong></p>
<p>Âõ†‰∏∫ÊïÖÈöúËΩ¨ÁßªÁöÑÂ∑•‰ΩúÂè™ÈúÄË¶Å‰∏Ä‰∏™ sentinel Êù•ÂÆåÊàêÔºåÊâÄ‰ª• sentinel ‰πãÈó¥‰ºöÂÜçÂÅö‰∏ÄÊ¨°ÈÄâ‰∏æÂ∑•‰ΩúÔºå Âü∫‰∫é Raft ÁÆóÊ≥ïÈÄâÂá∫‰∏Ä‰∏™ sentinel È¢ÜÂØºËÄÖÊù•ËøõË°åÊïÖÈöúËΩ¨ÁßªÁöÑÂ∑•‰Ωú„ÄÇ Ë¢´ÈÄâ‰∏æÂá∫ÁöÑ sentinel È¢ÜÂØºËÄÖËøõË°åÊïÖÈöúËΩ¨ÁßªÁöÑÂÖ∑‰ΩìÊ≠•È™§Â¶Ç‰∏ãÔºö</p>
<ol>
<li>Âú®‰ªéËäÇÁÇπÂàóË°®‰∏≠ÈÄâÂá∫‰∏Ä‰∏™ËäÇÁÇπ‰Ωú‰∏∫Êñ∞ÁöÑ masterÔºåÈÄâÊã©ÊñπÊ≥ïÂ¶Ç‰∏ãÔºö<ul>
<li>ËøáÊª§‰∏çÂÅ•Â∫∑ÊàñËÄÖ‰∏çÊª°Ë∂≥Ë¶ÅÊ±ÇÁöÑËäÇÁÇπ</li>
<li>ÈÄâÊã© slave-priorityÔºà‰ºòÂÖàÁ∫ßÔºâÊúÄÈ´òÁöÑ slaveÔºå Â¶ÇÊûúÂ≠òÂú®ÂàôËøîÂõûÔºå ‰∏çÂ≠òÂú®ÂàôÁªßÁª≠</li>
<li>ÈÄâÊã©Â§çÂà∂ÂÅèÁßªÈáèÊúÄÂ§ßÁöÑ slave Ôºå Â¶ÇÊûúÂ≠òÂú®ÂàôËøîÂõûÔºå ‰∏çÂ≠òÂú®ÂàôÁªßÁª≠</li>
<li>ÈÄâÊã© runid ÊúÄÂ∞èÁöÑ salve</li>
</ul>
</li>
<li>sentinel È¢ÜÂØºËÄÖ‰ºöÂØπÈÄâÂá∫Êù•ÁöÑ slave ÊâßË°å <code>slaveof no one</code> ÂëΩ‰ª§ËÆ©ÂÖ∂Êàê‰∏∫ master</li>
<li>sentinel È¢ÜÂØºËÄÖ‰ºöÂêëÂâ©‰ΩôÁöÑ slave ÂèëÈÄÅÂëΩ‰ª§ÔºåËÆ©‰ªñ‰ª¨‰ªéÊñ∞ÁöÑ master ‰∏äÂ§çÂà∂Êï∞ÊçÆ</li>
<li>sentinel È¢ÜÂØºËÄÖ‰ºöÂ∞ÜÂéüÊù•ÁöÑ masterÊõ¥Êñ∞‰∏∫‰ªéËäÇÁÇπÔºå Âπ∂ÂØπÂÖ∂ËøõË°åÁõëÊéßÔºå ÂΩìÂÖ∂ÊÅ¢Â§çÂêéÂëΩ‰ª§ÂÆÉÂéªÂ§çÂà∂Êñ∞ÁöÑ master</li>
</ol>
<h4 id="1122">11.2.2„ÄÅÂì®ÂÖµÊ®°ÂºèÊê≠Âª∫<a class="headerlink" href="#1122" title="Permanent link">&para;</a></h4>
<p>Redis ÈÖçÁΩÆÊñá‰ª∂Áî®‰∏ª‰ªéÂ§çÂà∂ÁöÑÈÇ£‰∏â‰∏™</p>
<div class="highlight"><pre><span></span><code><span class="c1">## Âú®dataÊñá‰ª∂Â§π‰∏ãÊñ∞Âª∫‰∏Ä‰∏™sentinelÈÖçÁΩÆÊñá‰ª∂</span>
vim<span class="w"> </span>sentinel_26379.conf

<span class="c1">## sentinel_26379ÈÖçÁΩÆ</span>
port<span class="w"> </span><span class="m">26379</span>
daemonize<span class="w"> </span>no
logfile<span class="w"> </span><span class="m">26379</span>.log
dir<span class="w"> </span>/root/data
sentinel<span class="w"> </span>monitor<span class="w"> </span>mymaster<span class="w"> </span><span class="m">127</span>.0.0.1<span class="w"> </span><span class="m">6379</span><span class="w"> </span><span class="m">2</span>
sentinel<span class="w"> </span>down-after-milliseconds<span class="w"> </span>mymaster<span class="w"> </span><span class="m">30000</span>
sentinel<span class="w"> </span>parallel-syncs<span class="w"> </span>mymaster<span class="w"> </span><span class="m">1</span>
sentinel<span class="w"> </span>failover-timeout<span class="w"> </span>mymaster<span class="w"> </span><span class="m">180000</span>

<span class="c1">## Â∞ÜÈÖçÁΩÆÊñá‰ª∂Â§çÂà∂‰∏§‰ªΩÔºåÊõ¥ÊîπÁ´ØÂè£</span>
sed<span class="w"> </span><span class="s1">&#39;s/26379/26380/g&#39;</span><span class="w"> </span>sentinel_26379.conf<span class="w"> </span>&gt;<span class="w"> </span>sentinel_26380.conf
sed<span class="w"> </span><span class="s1">&#39;s/26379/26381/g&#39;</span><span class="w"> </span>sentinel_26379.conf<span class="w"> </span>&gt;<span class="w"> </span>sentinel_26381.conf

<span class="c1">## ÂêØÂä®‰∏â‰∏™redis</span>
redis-server<span class="w"> </span>redis_6379.conf
redis-server<span class="w"> </span>redis_6380.conf
redis-server<span class="w"> </span>redis_6381.conf

<span class="c1">## ÂêØÂä®‰∏â‰∏™sentinel</span>
redis-sentinel<span class="w"> </span>sentinel_26379.conf
redis-sentinel<span class="w"> </span>sentinel_26380.conf
redis-sentinel<span class="w"> </span>sentinel_26381.conf
</code></pre></div>
<p>‰ΩøÁî®<code>ps -ef | grep redis</code>Êü•ÁúãËøõÁ®ã</p>
<p><img src="!assets/Redis/image-20210606181835383.png" alt="image-20210606181835383" style="" /></p>
<p>ÂèØ‰ª•‰ΩøÁî® <code>info replication</code> ÂëΩ‰ª§Êü•Áúã Redis ÈõÜÁæ§ÁöÑÁä∂ÊÄÅÔºåÊ≠§Êó∂ËæìÂá∫Â¶Ç‰∏ã„ÄÇÂèØ‰ª•ÁúãÂà∞ 6379 ËäÇÁÇπ‰∏∫ master ËäÇÁÇπÔºåÂπ∂‰∏îÊúâ‰∏§‰∏™‰ªéËäÇÁÇπÔºåÂàÜÂà´‰∏∫ slave0 Âíå slave1ÔºåÂØπÂ∫îÁöÑÁ´ØÂè£‰∏∫ 6380 Âíå 6381Ôºö</p>
<p><img src="!assets/Redis/image-20210606184707240.png" alt="image-20210606184707240" style="" /></p>
<p>ÂèØ‰ª•‰ΩøÁî® <code>info Sentinel</code> ÂëΩ‰ª§Êü•Áúã‰ªªÊÑè sentinel ËäÇÁÇπÁöÑÁä∂ÊÄÅÔºå‰ªéÊúÄÂêé‰∏ÄÂè•ËæìÂá∫ÂèØ‰ª•ÁúãÂà∞ sentinel ËäÇÁÇπÂ∑≤ÁªèÊÑüÁü•Âà∞ 6379 ÁöÑ master ËäÇÁÇπÔºåÂπ∂‰∏î‰πüÁü•ÈÅìÂÆÉÊúâ‰∏§‰∏™ slaves ËäÇÁÇπÔºõÂêåÊó∂ sentinel ËäÇÁÇπÂΩºÊ≠§‰πãÈó¥‰πüÊÑüÁü•Âà∞ÔºåÂÖ±Êúâ 3 ‰∏™ sentinel ËäÇÁÇπÔºö</p>
<p><img src="!assets/Redis/image-20210606184818585.png" alt="image-20210606184818585" style="" /></p>
<p><strong>Êï∞ÊçÆÂêåÊ≠•È™åËØÅÔºö</strong></p>
<div class="highlight"><pre><span></span><code>root@Orichalcos:~/data#<span class="w"> </span>redis-cli<span class="w"> </span>-p<span class="w"> </span><span class="m">6379</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>k1<span class="w"> </span>vi
OK
root@Orichalcos:~/data#<span class="w"> </span>redis-cli<span class="w"> </span>-p<span class="w"> </span><span class="m">6380</span><span class="w"> </span>get<span class="w"> </span>k1
<span class="s2">&quot;vi&quot;</span>
</code></pre></div>
<p>ÂÖàÊü•ÁúãÈõÜÁæ§Áä∂ÊÄÅÔºåËøôÊó∂ 6379 ‰∏∫ masterÔºåÊúâ‰∏§‰∏™ slaveÔºö</p>
<p><img src="!assets/Redis/image-20210606190000723.png" alt="image-20210606190000723" style="" /></p>
<p>ÁÑ∂ÂêéÂú® 6379 ÁªàÁ´ØÊåâ<code>Ctrl+C</code>ÂÖ≥Èó≠ RedisÔºåÁ≠âÂæÖ‰∏ÄÊÆµÊó∂ÂÄôÂêéÔºåÂÜçÊù•Êü•ÁúãÈõÜÁæ§Áä∂ÊÄÅÔºö</p>
<p><img src="!assets/Redis/image-20210606190306176.png" alt="image-20210606190306176" style="" /></p>
<p>Ëøô‰∏™Êó∂ÂÄô 6381 Êàê‰∏∫‰∫Ü masterÔºåÂπ∂‰∏îÂè™Êúâ‰∏Ä‰∏™ slave„ÄÇÁÑ∂ÂêéÊéßÂà∂ 6379 ‰∏äÁ∫øÔºåÂÜçÊù•Êü•ÁúãÈõÜÁæ§Áä∂ÊÄÅÔºö</p>
<p><img src="!assets/Redis/image-20210606190522114.png" alt="image-20210606190522114" style="" /></p>
<p>Ê≠§Êó∂ 6379 Âèò‰∏∫‰∫Ü slaveÔºå 6381 Â∑≤ÁÑ∂ÁøªË∫´ÂÅö‰∏ª„ÄÇ</p>
<p><strong>Spring Boot ÈÖçÁΩÆ</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">## ËÆ∞ÂæóÂºÄÂêØÂì®ÂÖµÁöÑËøúÁ®ãËøûÊé•</span>
<span class="nt">spring</span><span class="p">:</span>
<span class="w">  </span><span class="nt">redis</span><span class="p">:</span>
<span class="w">    </span><span class="nt">sentinel</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># masterÁöÑÂêçÁß∞ÔºåÂì®ÂÖµÈÖçÁΩÆÊñá‰ª∂Èáå sentinel monitor ÊâÄÈÖçÁΩÆÁöÑ‰∏ªËäÇÁÇπÂêçÂ≠ó</span>
<span class="w">      </span><span class="nt">master</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mymaster</span>
<span class="w">      </span><span class="c1"># Âì®ÂÖµÁöÑIP:PortÂàóË°®</span>
<span class="w">      </span><span class="nt">nodes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1:26379,127.0.0.1:26380,127.0.0.1:26381</span>
</code></pre></div>
<h3 id="113cluster">11.3„ÄÅCluster Ê®°Âºè<a class="headerlink" href="#113cluster" title="Permanent link">&para;</a></h3>
<h4 id="1131cluster">11.3.1„ÄÅCluster Ê®°Âºè‰ªãÁªç<a class="headerlink" href="#1131cluster" title="Permanent link">&para;</a></h4>
<p>Redis ClusterÊòØ‰∏ÄÁßçÊúçÂä°Âô® ShardingÔºàÂàÜÁâáÔºâ ÊäÄÊúØÔºå3.0ÁâàÊú¨ÂºÄÂßãÊ≠£ÂºèÊèê‰æõ„ÄÇ</p>
<p>Redis ÁöÑÂì®ÂÖµÊ®°ÂºèÂü∫Êú¨Â∑≤ÁªèÂèØ‰ª•ÂÆûÁé∞È´òÂèØÁî®ÔºåËØªÂÜôÂàÜÁ¶ª Ôºå‰ΩÜÊòØÂú®ËøôÁßçÊ®°Âºè‰∏ãÊØèÂè∞ Redis ÊúçÂä°Âô®ÈÉΩÂ≠òÂÇ®Áõ∏ÂêåÁöÑÊï∞ÊçÆÔºåÂæàÊµ™Ë¥πÂÜÖÂ≠òÔºåÊâÄ‰ª•Âú® Redis3.0‰∏äÂä†ÂÖ•‰∫Ü Cluster ÈõÜÁæ§Ê®°ÂºèÔºåÂÆûÁé∞‰∫Ü Redis ÁöÑÂàÜÂ∏ÉÂºèÂ≠òÂÇ®Ôºå‰πüÂ∞±ÊòØËØ¥ÊØèÂè∞ Redis ËäÇÁÇπ‰∏äÂ≠òÂÇ®‰∏çÂêåÁöÑÂÜÖÂÆπ„ÄÇ</p>
<p><img src="!assets/Redis/1460000022808584.png" alt="image-20200531184321294" style="zoom:80%;" /></p>
<p>Âú®Ëøô‰∏™Âõæ‰∏≠ÔºåÊØè‰∏Ä‰∏™ËìùËâ≤ÁöÑÂúàÈÉΩ‰ª£Ë°®ÁùÄ‰∏Ä‰∏™ Redis ÁöÑÊúçÂä°Âô®ËäÇÁÇπ„ÄÇÂÆÉ‰ª¨‰ªª‰Ωï‰∏§‰∏™ËäÇÁÇπ‰πãÈó¥ÈÉΩÊòØÁõ∏‰∫íËøûÈÄöÁöÑ„ÄÇÂÆ¢Êà∑Á´ØÂèØ‰ª•‰∏é‰ªª‰Ωï‰∏Ä‰∏™ËäÇÁÇπÁõ∏ËøûÊé•ÔºåÁÑ∂ÂêéÂ∞±ÂèØ‰ª•ËÆøÈóÆÈõÜÁæ§‰∏≠ÁöÑ‰ªª‰Ωï‰∏Ä‰∏™ËäÇÁÇπ„ÄÇÂØπÂÖ∂ËøõË°åÂ≠òÂèñÂíåÂÖ∂‰ªñÊìç‰Ωú„ÄÇ</p>
<p><strong>ÈõÜÁæ§ÁöÑÊï∞ÊçÆÂàÜÁâá</strong></p>
<p>Redis ÈõÜÁæ§Ê≤°Êúâ‰ΩøÁî®‰∏ÄËá¥ÊÄß hashÔºåËÄåÊòØÂºïÂÖ•‰∫ÜÂìàÂ∏åÊßΩ„Äêhash slot„ÄëÁöÑÊ¶ÇÂøµ„ÄÇ</p>
<p>Redis ÈõÜÁæ§Êúâ 16384 ‰∏™ÂìàÂ∏åÊßΩÔºåÊØè‰∏™ key ÈÄöËøá CRC16 Ê†°È™åÂêéÂØπ 16384 ÂèñÊ®°Êù•ÂÜ≥ÂÆöÊîæÁΩÆÂì™‰∏™ÊßΩ„ÄÇÈõÜÁæ§ÁöÑÊØè‰∏™ËäÇÁÇπË¥üË¥£‰∏ÄÈÉ®ÂàÜ hash ÊßΩÔºå‰∏æ‰∏™‰æãÂ≠êÔºåÊØîÂ¶ÇÂΩìÂâçÈõÜÁæ§Êúâ3‰∏™ËäÇÁÇπÔºåÈÇ£‰πàÔºö</p>
<ul>
<li>ËäÇÁÇπ A ÂåÖÂê´ 0 Âà∞ 5460 Âè∑ÂìàÂ∏åÊßΩ</li>
<li>ËäÇÁÇπ B ÂåÖÂê´ 5461 Âà∞ 10922 Âè∑ÂìàÂ∏åÊßΩ</li>
<li>ËäÇÁÇπ C ÂåÖÂê´ 10923 Âà∞ 16383 Âè∑ÂìàÂ∏åÊßΩ</li>
</ul>
<p>ËøôÁßçÁªìÊûÑÂæàÂÆπÊòìÊ∑ªÂä†ÊàñËÄÖÂà†Èô§ËäÇÁÇπ„ÄÇÊØîÂ¶ÇÂ¶ÇÊûúÊàëÊÉ≥Êñ∞Ê∑ªÂä†‰∏™ËäÇÁÇπ D Ôºå ÊàëÈúÄË¶Å‰ªéËäÇÁÇπ AÔºå BÔºå C ‰∏≠ÂæóÈÉ®ÂàÜÊßΩÂà∞ D ‰∏ä„ÄÇÂ¶ÇÊûúÊàëÊÉ≥ÁßªÈô§ËäÇÁÇπ A ÔºåÈúÄË¶ÅÂ∞Ü A ‰∏≠ÁöÑÊßΩÁßªÂà∞ B Âíå C ËäÇÁÇπ‰∏äÔºåÁÑ∂ÂêéÂ∞ÜÊ≤°Êúâ‰ªª‰ΩïÊßΩÁöÑ A ËäÇÁÇπ‰ªéÈõÜÁæ§‰∏≠ÁßªÈô§Âç≥ÂèØ„ÄÇÁî±‰∫é‰ªé‰∏Ä‰∏™ËäÇÁÇπÂ∞ÜÂìàÂ∏åÊßΩÁßªÂä®Âà∞Âè¶‰∏Ä‰∏™ËäÇÁÇπÂπ∂‰∏ç‰ºöÂÅúÊ≠¢ÊúçÂä°ÔºåÊâÄ‰ª•Êó†ËÆ∫Ê∑ªÂä†Âà†Èô§ÊàñËÄÖÊîπÂèòÊüê‰∏™ËäÇÁÇπÁöÑÂìàÂ∏åÊßΩÁöÑÊï∞ÈáèÈÉΩ‰∏ç‰ºöÈÄ†ÊàêÈõÜÁæ§‰∏çÂèØÁî®ÁöÑÁä∂ÊÄÅ„ÄÇ</p>
<p>Âú® Redis ÁöÑÊØè‰∏Ä‰∏™ËäÇÁÇπ‰∏äÔºåÈÉΩÊúâËøô‰πà‰∏§‰∏™‰∏úË•øÔºå‰∏Ä‰∏™ÊòØÊèíÊßΩÔºàslotÔºâÔºåÂÆÉÁöÑÁöÑÂèñÂÄºËåÉÂõ¥ÊòØÔºö0-16383„ÄÇËøòÊúâ‰∏Ä‰∏™Â∞±ÊòØ clusterÔºåÂèØ‰ª•ÁêÜËß£‰∏∫ÊòØ‰∏Ä‰∏™ÈõÜÁæ§ÁÆ°ÁêÜÁöÑÊèí‰ª∂„ÄÇÂΩìÊàë‰ª¨ÁöÑÂ≠òÂèñÁöÑ Key Âà∞ËææÁöÑÊó∂ÂÄôÔºåRedis ‰ºöÊ†πÊçÆ CRC16 ÁöÑÁÆóÊ≥ïÂæóÂá∫‰∏Ä‰∏™ÁªìÊûúÔºåÁÑ∂ÂêéÊääÁªìÊûúÂØπ 16384 Ê±Ç‰ΩôÊï∞ÔºåËøôÊ†∑ÊØè‰∏™ key ÈÉΩ‰ºöÂØπÂ∫î‰∏Ä‰∏™ÁºñÂè∑Âú® 0-16383 ‰πãÈó¥ÁöÑÂìàÂ∏åÊßΩÔºåÈÄöËøáËøô‰∏™ÂÄºÔºåÂéªÊâæÂà∞ÂØπÂ∫îÁöÑÊèíÊßΩÊâÄÂØπÂ∫îÁöÑËäÇÁÇπÔºåÁÑ∂ÂêéÁõ¥Êé•Ëá™Âä®Ë∑≥ËΩ¨Âà∞Ëøô‰∏™ÂØπÂ∫îÁöÑËäÇÁÇπ‰∏äËøõË°åÂ≠òÂèñÊìç‰Ωú„ÄÇ</p>
<p><strong>Redis ÈõÜÁæ§ÁöÑ‰∏ª‰ªéÂ§çÂà∂Ê®°Âûã</strong></p>
<p>‰∏∫‰∫Ü‰øùËØÅÈ´òÂèØÁî®Ôºåredis-cluster ÈõÜÁæ§ÂºïÂÖ•‰∫Ü‰∏ª‰ªéÂ§çÂà∂Ê®°ÂûãÔºå‰∏Ä‰∏™ master ÂØπÂ∫î‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ slaveÔºåÂΩì master ÂÆïÊú∫ÁöÑÊó∂ÂÄôÔºåÂ∞±‰ºöÂêØÁî® slave„ÄÇÂΩìÂÖ∂ÂÆÉ master <code>ping</code> ‰∏Ä‰∏™ master A Êó∂ÔºåÂ¶ÇÊûúÂçäÊï∞‰ª•‰∏äÁöÑ master ‰∏é A ÈÄö‰ø°Ë∂ÖÊó∂ÔºåÈÇ£‰πàËÆ§‰∏∫ master A ÂÆïÊú∫‰∫Ü„ÄÇÂ¶ÇÊûú master A ÂíåÂÆÉÁöÑ slave A1 ÈÉΩÂÆïÊú∫‰∫ÜÔºåÈÇ£‰πàËØ•ÈõÜÁæ§Â∞±Êó†Ê≥ïÂÜçÊèê‰æõÊúçÂä°‰∫Ü„ÄÇ</p>
<p>ÈõÜÁæ§ÁöÑÁâπÁÇπÔºö</p>
<ul>
<li>ÊâÄÊúâÁöÑ Redis ËäÇÁÇπÂΩºÊ≠§‰∫íËÅîÔºàPING-PONGÊú∫Âà∂ÔºâÔºåÂÜÖÈÉ®‰ΩøÁî®‰∫åËøõÂà∂ÂçèËÆÆ‰ºòÂåñ‰º†ËæìÈÄüÂ∫¶ÂíåÂ∏¶ÂÆΩ</li>
<li>ËäÇÁÇπÁöÑ fail ÊòØÈÄöËøáÈõÜÁæ§‰∏≠Ë∂ÖËøáÂçäÊï∞ÁöÑËäÇÁÇπÊ£ÄÊµãÂ§±ÊïàÊó∂ÊâçÁîüÊïà</li>
<li>ÂÆ¢Êà∑Á´Ø‰∏é Redis ËäÇÁÇπÁõ¥ËøûÔºå‰∏çÈúÄË¶Å‰∏≠Èó¥‰ª£ÁêÜÂ±ÇÔºåÂÆ¢Êà∑Á´Ø‰∏çÈúÄË¶ÅËøûÊé•ÈõÜÁæ§ÊâÄÊúâËäÇÁÇπÔºåËøûÊé•ÈõÜÁæ§‰∏≠‰ªª‰Ωï‰∏Ä‰∏™ÂèØÁî®ËäÇÁÇπÂç≥ÂèØ</li>
</ul>
<h4 id="1132cluster">11.3.2„ÄÅCluster Ê®°ÂºèÊê≠Âª∫<a class="headerlink" href="#1132cluster" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">## Ê∏ÖÈô§ÊéâdataÊñá‰ª∂Â§π‰∏ãÁöÑÊâÄÊúâÊñá‰ª∂ÔºåÂú®ÈáåÈù¢Êñ∞Âª∫‰∏Ä‰∏™redis_6379.conf</span>
vim<span class="w"> </span>redis_6379.conf

<span class="c1">## ÂÜôÂÖ•‰ª•‰∏ãÂÜÖÂÆπ</span>
include<span class="w"> </span>/etc/redis/redis.conf
port<span class="w"> </span><span class="m">6379</span>
daemonize<span class="w"> </span>no
pidfile<span class="w"> </span>/root/data/redis_6379.pid
logfile<span class="w"> </span><span class="s2">&quot;redis_6379.log&quot;</span>
dbfilename<span class="w"> </span>dump_6379.rdb
dir<span class="w"> </span>/root/data
cluster-enabled<span class="w"> </span>yes<span class="w"> </span>
cluster-config-file<span class="w"> </span>nodes_6379.conf<span class="w"> </span>
cluster-node-timeout<span class="w"> </span><span class="m">15000</span>

<span class="c1">## Â∞ÜÊñá‰ª∂Â§çÂà∂‰∫î‰ªΩÔºåÊõ¥ÊîπÂÖ∂‰∏≠Á´ØÂè£Á≠â‰ø°ÊÅØ</span>
sed<span class="w"> </span><span class="s1">&#39;s/6379/6380/g&#39;</span><span class="w"> </span>redis_6379.conf<span class="w"> </span>&gt;<span class="w"> </span>redis_6380.conf
sed<span class="w"> </span><span class="s1">&#39;s/6379/6381/g&#39;</span><span class="w"> </span>redis_6379.conf<span class="w"> </span>&gt;<span class="w"> </span>redis_6381.conf
sed<span class="w"> </span><span class="s1">&#39;s/6379/6382/g&#39;</span><span class="w"> </span>redis_6379.conf<span class="w"> </span>&gt;<span class="w"> </span>redis_6382.conf
sed<span class="w"> </span><span class="s1">&#39;s/6379/6383/g&#39;</span><span class="w"> </span>redis_6379.conf<span class="w"> </span>&gt;<span class="w"> </span>redis_6383.conf
sed<span class="w"> </span><span class="s1">&#39;s/6379/6384/g&#39;</span><span class="w"> </span>redis_6379.conf<span class="w"> </span>&gt;<span class="w"> </span>redis_6384.conf
</code></pre></div>
<p>‰ΩøÁî®<code>ps -ef | grep redis</code>Êü•ÁúãÁä∂ÊÄÅÔºö</p>
<p><img src="!assets/Redis/image-20210607151158183.png" alt="image-20210607151158183" style="" /></p>
<p>ÂàõÂª∫ÈõÜÁæ§Ôºå<code>--cluster-replicas 1</code>ÁöÑÊÑèÊÄùÊòØÂàõÂª∫ master ÁöÑÊó∂ÂÄôÂêåÊó∂ÂàõÂª∫‰∏Ä‰∏™ slaveÔºö</p>
<div class="highlight"><pre><span></span><code>redis-cli<span class="w"> </span>--cluster<span class="w"> </span>create<span class="w"> </span><span class="m">127</span>.0.0.1:6379<span class="w"> </span><span class="m">127</span>.0.0.1:6380<span class="w"> </span><span class="m">127</span>.0.0.1:6381<span class="w"> </span><span class="m">127</span>.0.0.1:6382<span class="w"> </span><span class="m">127</span>.0.0.1:6383<span class="w"> </span><span class="m">127</span>.0.0.1:6384<span class="w"> </span>--cluster-replicas<span class="w"> </span><span class="m">1</span>
</code></pre></div>
<p>ËøôÈáåÊàë‰ª¨ÈÄâÊã©ÁöÑÊòØ‰∏Ä‰∏ª‰∏Ä‰ªéÔºå‰∏ÄÂÖ±ÂÖ≠‰∏™ÊúçÂä°Âô®ÔºåÊâÄ‰ª•ÂÖàËæìÂÖ•ÁöÑ 6379„ÄÅ6380„ÄÅ6381 ‰ºöÊàê‰∏∫ materÔºåÂÖ∂‰ΩôÁöÑ‰∏∫ slave„ÄÇ‰∏ãÈù¢ÊòæÁ§∫ master0 ÁöÑÊßΩ‰∏∫ 0-5460„ÄÅmaster1 ÁöÑÊßΩ‰∏∫ 5461-10922„ÄÅmaster2 ÁöÑÊßΩ‰∏∫ 10923-16383„ÄÇÂêåÊó∂ 6383 ‰Ωú‰∏∫ slave ÊåáÂêë 6379„ÄÅ6384 ‰Ωú‰∏∫ slave ÊåáÂêë 6380„ÄÅ6382 ‰Ωú‰∏∫ slave ÊåáÂêë 6381Ôºö</p>
<p><img src="!assets/Redis/image-20210607151442056.png" alt="image-20210607151442056" style="" /></p>
<p>Â¶ÇÊûú‰ΩøÁî®‰ª•‰∏ãÈÖçÁΩÆÔºåÂ∞±ËæìÂÖ• yes ÂêåÊÑèÔºåËøôÊó∂‰ºöÂºÄÂßãÂàõÂª∫Ôºö</p>
<p><img src="!assets/Redis/image-20210607152207273.png" alt="image-20210607152207273" style="" /></p>
<p>ÂèØ‰ª•ÈÄöËøá<code>cluster nodes</code>ÂëΩ‰ª§Êü•ÁúãËäÇÁÇπÁä∂ÊÄÅÔºö</p>
<p><img src="!assets/Redis/image-20210607154756105.png" alt="image-20210607154756105" style="" /></p>
<p><strong>Êï∞ÊçÆÈ™åËØÅ</strong></p>
<p>Ê≥®ÊÑè ÈõÜÁæ§Ê®°Âºè‰∏ãË¶ÅÂ∏¶ÂèÇÊï∞ <code>-c</code>ÔºåË°®Á§∫ÈõÜÁæ§ÔºåÂê¶ÂàôÂú®Â≠òÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûú‰ΩøÁî®ÁöÑÊòØÈõÜÁæ§ AÔºå‰ΩÜÊòØÁÆóÂá∫Êù•Ë¶ÅÂ≠òÁöÑÊßΩÁöÑÊâÄÂú®Âú∞‰∏∫ÈõÜÁæ§ BÔºåËøôÊó∂‰ºöÊä•ÈîôÔºö</p>
<div class="highlight"><pre><span></span><code>root@Orichalcos:~/data#<span class="w"> </span>redis-cli<span class="w"> </span>-p<span class="w"> </span><span class="m">6379</span>
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>v1<span class="w"> </span>v1
OK
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>v234324234<span class="w"> </span>k2
OK
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>vajflakjflajfklj<span class="w"> </span>k
<span class="o">(</span>error<span class="o">)</span><span class="w"> </span>MOVED<span class="w"> </span><span class="m">10368</span><span class="w"> </span><span class="m">127</span>.0.0.1:6380
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span><span class="nb">exit</span>
root@Orichalcos:~/data#<span class="w"> </span>redis-cli<span class="w"> </span>-p<span class="w"> </span><span class="m">6379</span><span class="w"> </span>-c
<span class="m">127</span>.0.0.1:6379&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>vajflakjflajfklj<span class="w"> </span>k
-&gt;<span class="w"> </span>Redirected<span class="w"> </span>to<span class="w"> </span>slot<span class="w"> </span><span class="o">[</span><span class="m">10368</span><span class="o">]</span><span class="w"> </span>located<span class="w"> </span>at<span class="w"> </span><span class="m">127</span>.0.0.1:6380
OK
<span class="m">127</span>.0.0.1:6380&gt;
</code></pre></div>
<p><strong>Spring BootÈÖçÁΩÆ</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span>
<span class="w">  </span><span class="nt">redis</span><span class="p">:</span>
<span class="w">    </span><span class="nt">cluster</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># ‰π¶ÂÜôÈõÜÁæ§‰∏≠ÊâÄÊúâÁöÑnodes</span>
<span class="w">      </span><span class="nt">nodes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1:6379,127.0.0.1:6380,127.0.0.1:6381,127.0.0.1:6382,127.0.0.1:6383,127.0.0.1:6384</span>
<span class="w">      </span><span class="c1"># ÈáçÂÆöÂêëÁöÑÊúÄÂ§ßÊ¨°Êï∞</span>
<span class="w">      </span><span class="nt">max-redirects</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</code></pre></div>
<h4 id="1133redis-cluster">11.3.3„ÄÅRedis Cluster Êìç‰Ωú<a class="headerlink" href="#1133redis-cluster" title="Permanent link">&para;</a></h4>
<p>ÂèØ‰ª•ÈÄöËøá <code>redis-cli --cluster help</code> Êü•ÁúãÊâãÂÜåÔºö</p>
<div class="highlight"><pre><span></span><code>redis-cli<span class="w"> </span>--cluster<span class="w"> </span><span class="nb">help</span>
Cluster<span class="w"> </span>Manager<span class="w"> </span>Commands:
<span class="w">  </span>create<span class="w">         </span>host1:port1<span class="w"> </span>...<span class="w"> </span>hostN:portN<span class="w">   </span><span class="c1">#ÂàõÂª∫ÈõÜÁæ§</span>
<span class="w">                 </span>--cluster-replicas<span class="w"> </span>&lt;arg&gt;<span class="w">      </span><span class="c1">#‰ªéËäÇÁÇπ‰∏™Êï∞</span>

<span class="w">  </span>check<span class="w">          </span>host:port<span class="w">                     </span><span class="c1">#Ê£ÄÊü•ÈõÜÁæ§</span>
<span class="w">                 </span>--cluster-search-multiple-owners<span class="w"> </span><span class="c1">#Ê£ÄÊü•ÊòØÂê¶ÊúâÊßΩÂêåÊó∂Ë¢´ÂàÜÈÖçÁªô‰∫ÜÂ§ö‰∏™ËäÇÁÇπ</span>

<span class="w">  </span>info<span class="w">           </span>host:port<span class="w">                     </span><span class="c1">#Êü•ÁúãÈõÜÁæ§Áä∂ÊÄÅ</span>

<span class="w">  </span>fix<span class="w">            </span>host:port<span class="w">                     </span><span class="c1">#‰øÆÂ§çÈõÜÁæ§</span>
<span class="w">                 </span>--cluster-search-multiple-owners<span class="w"> </span><span class="c1">#‰øÆÂ§çÊßΩÁöÑÈáçÂ§çÂàÜÈÖçÈóÆÈ¢ò</span>

<span class="w">  </span>reshard<span class="w">        </span>host:port<span class="w">                     </span><span class="c1">#ÊåáÂÆöÈõÜÁæ§ÁöÑ‰ªªÊÑè‰∏ÄËäÇÁÇπËøõË°åËøÅÁßªslotÔºåÈáçÊñ∞ÂàÜslots</span>
<span class="w">                 </span>--cluster-from<span class="w"> </span>&lt;arg&gt;<span class="w">          </span><span class="c1">#ÈúÄË¶Å‰ªéÂì™‰∫õÊ∫êËäÇÁÇπ‰∏äËøÅÁßªslotÔºåÂèØ‰ªéÂ§ö‰∏™Ê∫êËäÇÁÇπÂÆåÊàêËøÅÁßªÔºå‰ª•ÈÄóÂè∑ÈöîÂºÄÔºå</span>
<span class="w">                                               </span><span class="c1">#‰º†ÈÄíÁöÑÊòØËäÇÁÇπÁöÑnode idÔºåËøòÂèØ‰ª•Áõ¥Êé•‰º†ÈÄí--from allÔºåËøôÊ†∑Ê∫êËäÇÁÇπÂ∞±ÊòØÈõÜÁæ§ÁöÑÊâÄÊúâËäÇÁÇπÔºå</span>
<span class="w">                                               </span><span class="c1">#‰∏ç‰º†ÈÄíËØ•ÂèÇÊï∞ÁöÑËØùÔºåÂàô‰ºöÂú®ËøÅÁßªËøáÁ®ã‰∏≠ÊèêÁ§∫Áî®Êà∑ËæìÂÖ•</span>
<span class="w">                 </span>--cluster-to<span class="w"> </span>&lt;arg&gt;<span class="w">            </span><span class="c1">#slotÈúÄË¶ÅËøÅÁßªÁöÑÁõÆÁöÑËäÇÁÇπÁöÑnode idÔºåÁõÆÁöÑËäÇÁÇπÂè™ËÉΩÂ°´ÂÜô‰∏Ä‰∏™Ôºå‰∏ç‰º†ÈÄíËØ•ÂèÇÊï∞ÁöÑËØùÔºå </span>
<span class="w">                                               </span><span class="c1">#Âàô‰ºöÂú®ËøÅÁßªËøáÁ®ã‰∏≠ÊèêÁ§∫Áî®Êà∑ËæìÂÖ•</span>
<span class="w">                 </span>--cluster-slots<span class="w"> </span>&lt;arg&gt;<span class="w">         </span><span class="c1">#ÈúÄË¶ÅËøÅÁßªÁöÑslotÊï∞ÈáèÔºå‰∏ç‰º†ÈÄíËØ•ÂèÇÊï∞ÁöÑËØùÔºåÂàô‰ºöÂú®ËøÅÁßªËøáÁ®ã‰∏≠ÊèêÁ§∫Áî®Êà∑ËæìÂÖ•„ÄÇ</span>
<span class="w">                 </span>--cluster-yes<span class="w">                 </span><span class="c1">#ÊåáÂÆöËøÅÁßªÊó∂ÁöÑÁ°ÆËÆ§ËæìÂÖ•</span>
<span class="w">                 </span>--cluster-timeout<span class="w"> </span>&lt;arg&gt;<span class="w">       </span><span class="c1">#ËÆæÁΩÆmigrateÂëΩ‰ª§ÁöÑË∂ÖÊó∂Êó∂Èó¥</span>
<span class="w">                 </span>--cluster-pipeline<span class="w"> </span>&lt;arg&gt;<span class="w">      </span><span class="c1">#ÂÆö‰πâcluster getkeysinslotÂëΩ‰ª§‰∏ÄÊ¨°ÂèñÂá∫ÁöÑkeyÊï∞ÈáèÔºå‰∏ç‰º†ÁöÑËØù‰ΩøÁî®ÈªòËÆ§ÂÄº‰∏∫10</span>
<span class="w">                 </span>--cluster-replace<span class="w">             </span><span class="c1">#ÊòØÂê¶Áõ¥Êé•replaceÂà∞ÁõÆÊ†áËäÇÁÇπ</span>

<span class="w">  </span>rebalance<span class="w">      </span>host:port<span class="w">                                      </span><span class="c1">#ÊåáÂÆöÈõÜÁæ§ÁöÑ‰ªªÊÑè‰∏ÄËäÇÁÇπËøõË°åÂπ≥Ë°°ÈõÜÁæ§ËäÇÁÇπslotÊï∞Èáè </span>
<span class="w">                 </span>--cluster-weight<span class="w"> </span>&lt;<span class="nv">node1</span><span class="o">=</span>w1...nodeN<span class="o">=</span>wN&gt;<span class="w">         </span><span class="c1">#ÊåáÂÆöÈõÜÁæ§ËäÇÁÇπÁöÑÊùÉÈáç</span>
<span class="w">                 </span>--cluster-use-empty-masters<span class="w">                    </span><span class="c1">#ËÆæÁΩÆÂèØ‰ª•ËÆ©Ê≤°ÊúâÂàÜÈÖçslotÁöÑ‰∏ªËäÇÁÇπÂèÇ‰∏éÔºåÈªòËÆ§‰∏çÂÖÅËÆ∏</span>
<span class="w">                 </span>--cluster-timeout<span class="w"> </span>&lt;arg&gt;<span class="w">                        </span><span class="c1">#ËÆæÁΩÆmigrateÂëΩ‰ª§ÁöÑË∂ÖÊó∂Êó∂Èó¥</span>
<span class="w">                 </span>--cluster-simulate<span class="w">                             </span><span class="c1">#Ê®°ÊãürebalanceÊìç‰ΩúÔºå‰∏ç‰ºöÁúüÊ≠£ÊâßË°åËøÅÁßªÊìç‰Ωú</span>
<span class="w">                 </span>--cluster-pipeline<span class="w"> </span>&lt;arg&gt;<span class="w">                       </span><span class="c1">#ÂÆö‰πâcluster getkeysinslotÂëΩ‰ª§‰∏ÄÊ¨°ÂèñÂá∫ÁöÑkeyÊï∞ÈáèÔºå </span>
<span class="w">                                                                </span><span class="c1">#ÈªòËÆ§ÂÄº‰∏∫10</span>
<span class="w">                 </span>--cluster-threshold<span class="w"> </span>&lt;arg&gt;<span class="w">                      </span><span class="c1">#ËøÅÁßªÁöÑslotÈòàÂÄºË∂ÖËøáthresholdÔºåÊâßË°årebalanceÊìç‰Ωú</span>
<span class="w">                 </span>--cluster-replace<span class="w">                              </span><span class="c1">#ÊòØÂê¶Áõ¥Êé•replaceÂà∞ÁõÆÊ†áËäÇÁÇπ</span>

<span class="w">  </span>add-node<span class="w">       </span>new_host:new_port<span class="w"> </span>existing_host:existing_port<span class="w">  </span><span class="c1">#Ê∑ªÂä†ËäÇÁÇπÔºåÊääÊñ∞ËäÇÁÇπÂä†ÂÖ•Âà∞ÊåáÂÆöÁöÑÈõÜÁæ§ÔºåÈªòËÆ§Ê∑ªÂä†‰∏ªËäÇÁÇπ</span>
<span class="w">                 </span>--cluster-slave<span class="w">                                </span><span class="c1">#Êñ∞ËäÇÁÇπ‰Ωú‰∏∫‰ªéËäÇÁÇπÔºåÈªòËÆ§ÈöèÊú∫‰∏Ä‰∏™‰∏ªËäÇÁÇπ</span>
<span class="w">                 </span>--cluster-master-id<span class="w"> </span>&lt;arg&gt;<span class="w">                      </span><span class="c1">#ÁªôÊñ∞ËäÇÁÇπÊåáÂÆö‰∏ªËäÇÁÇπ</span>

<span class="w">  </span>del-node<span class="w">       </span>host:port<span class="w"> </span>node_id<span class="w">                              </span><span class="c1">#Âà†Èô§ÁªôÂÆöÁöÑ‰∏Ä‰∏™ËäÇÁÇπÔºåÊàêÂäüÂêéÂÖ≥Èó≠ËØ•ËäÇÁÇπÊúçÂä°</span>

<span class="w">  </span>call<span class="w">           </span>host:port<span class="w"> </span><span class="nb">command</span><span class="w"> </span>arg<span class="w"> </span>arg<span class="w"> </span>..<span class="w"> </span>arg<span class="w">               </span><span class="c1">#Âú®ÈõÜÁæ§ÁöÑÊâÄÊúâËäÇÁÇπÊâßË°åÁõ∏ÂÖ≥ÂëΩ‰ª§</span>

<span class="w">  </span>set-timeout<span class="w">    </span>host:port<span class="w"> </span>milliseconds<span class="w">                         </span><span class="c1">#ËÆæÁΩÆcluster-node-timeout</span>

<span class="w">  </span>import<span class="w">         </span>host:port<span class="w">                                      </span><span class="c1">#Â∞ÜÂ§ñÈÉ®redisÊï∞ÊçÆÂØºÂÖ•ÈõÜÁæ§</span>
<span class="w">                 </span>--cluster-from<span class="w"> </span>&lt;arg&gt;<span class="w">                           </span><span class="c1">#Â∞ÜÊåáÂÆöÂÆû‰æãÁöÑÊï∞ÊçÆÂØºÂÖ•Âà∞ÈõÜÁæ§</span>
<span class="w">                 </span>--cluster-copy<span class="w">                                 </span><span class="c1">#migrateÊó∂ÊåáÂÆöcopy</span>
<span class="w">                 </span>--cluster-replace<span class="w">                              </span><span class="c1">#migrateÊó∂ÊåáÂÆöreplace</span>
</code></pre></div>
<p><strong>Â¢ûÂä†ËäÇÁÇπ</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">## Â¢ûÂä†‰∏§‰∏™ËäÇÁÇπÈÖçÁΩÆ</span>
sed<span class="w"> </span><span class="s1">&#39;s/6379/6385/g&#39;</span><span class="w"> </span>redis_6379.conf<span class="w"> </span>&gt;<span class="w"> </span>redis_6385.conf
sed<span class="w"> </span><span class="s1">&#39;s/6379/6386/g&#39;</span><span class="w"> </span>redis_6379.conf<span class="w"> </span>&gt;<span class="w"> </span>redis_6386.conf

<span class="c1">## ÂêØÂä®</span>
redis-server<span class="w"> </span>redis_6385.conf
redis-server<span class="w"> </span>redis_6386.conf

<span class="c1">## ÈõÜÁæ§‰∏≠Â¢ûÂä†ËäÇÁÇπ</span>
redis-cli<span class="w"> </span>-p<span class="w"> </span><span class="m">6379</span><span class="w"> </span>--cluster<span class="w"> </span>add-node<span class="w"> </span><span class="m">127</span>.0.0.1:6385<span class="w"> </span><span class="m">127</span>.0.0.1:6379

<span class="c1">## Êü•ÁúãËäÇÁÇπ‰ø°ÊÅØ</span>
redis-cli<span class="w"> </span>cluster<span class="w"> </span>nodes
</code></pre></div>
<p><img src="!assets/Redis/image-20210607170233889.png" alt="image-20210607170233889" style="" /></p>
<p>Â∞Ü 6386 Ê∑ªÂä†‰∏∫ 6385 ÁöÑ‰ªéËäÇÁÇπ</p>
<div class="highlight"><pre><span></span><code>redis-cli<span class="w"> </span>--cluster<span class="w"> </span>add-node<span class="w"> </span><span class="m">127</span>.0.0.1:6386<span class="w"> </span><span class="m">127</span>.0.0.1:6379<span class="w"> </span>--cluster-slave<span class="w"> </span>--cluster-master-id<span class="w"> </span>57547cced0901aec48897bd97c9a6e9a40c8fbec
</code></pre></div>
<p>Ëøô‰∏™Êó∂ÂÄôÊòØÊ≤°ÊúâËôΩÁÑ∂Êñ∞ËäÇÁÇπÂä†ÂÖ•‰∫ÜËøõÊù•Ôºå‰ΩÜÊòØÊ≤°ÊúâÂàÜÈÖçÊßΩÔºö</p>
<p><img src="!assets/Redis/image-20210607172522783.png" alt="image-20210607172522783" style="" /></p>
<p>ÊâÄ‰ª•ÊâßË°å <code>redis-cli --cluster reshard 127.0.0.1:6385</code>ÂàÜÈÖçÊßΩÔºö</p>
<p><img src="!assets/Redis/image-20210607174634002.png" alt="image-20210607174634002" style="" /></p>
<p>‰∏≠Èó¥ËæìÂÖ• <code>yes</code> ÁªßÁª≠ÔºåËøôÊ†∑Â∞±ÂàÜÈÖçÂÆåÊØïÔºö</p>
<p><img src="!assets/Redis/image-20210607173729567.png" alt="image-20210607173729567" style="" /></p>
<p><strong>Âà†Èô§ËäÇÁÇπ</strong></p>
<p>slave Áõ¥Êé•Âà†Èô§Âç≥ÂèØÔºåÂà†Èô§ master ÈúÄË¶ÅÂÖàÂ∞ÜÊßΩÁßªÂà∞ÂÖ∂‰ªñËäÇÁÇπ‰∏≠ÂéªÔºÅ</p>
<div class="highlight"><pre><span></span><code>redis-cli<span class="w"> </span>--cluster<span class="w"> </span>del-node<span class="w"> </span><span class="m">127</span>.0.0.1:6386<span class="w"> </span>8b5494c818bd21c2eae793451c05ebe1eb62e2a5
</code></pre></div>
<p>ÂÖàËΩ¨ÁßªÊßΩÔºå‰∏≠Èó¥ËæìÂÖ• <code>yes</code> ÁªßÁª≠Ôºö</p>
<p><img src="!assets/Redis/image-20210607175118825.png" alt="image-20210607175118825" style="" /></p>
<p>Âà†Èô§ËäÇÁÇπ</p>
<div class="highlight"><pre><span></span><code>redis-cli<span class="w"> </span>--cluster<span class="w"> </span>del-node<span class="w"> </span><span class="m">127</span>.0.0.1:6385<span class="w"> </span>57547cced0901aec48897bd97c9a6e9a40c8fbec
</code></pre></div>
<h2 id="12">12„ÄÅÁºìÂ≠òÈõ™Â¥©„ÄÅÂáªÁ©ø„ÄÅÁ©øÈÄè<a class="headerlink" href="#12" title="Permanent link">&para;</a></h2>
<h3 id="121">12.1„ÄÅÁºìÂ≠òÈõ™Â¥©<a class="headerlink" href="#121" title="Permanent link">&para;</a></h3>
<p><strong>‰ªÄ‰πàÊòØÁºìÂ≠òÈõ™Â¥©</strong></p>
<p>Â¶ÇÊûúÁºìÂú®Êüê‰∏Ä‰∏™Êó∂ÂàªÂá∫Áé∞Â§ßËßÑÊ®°ÁöÑ key Â§±ÊïàÔºåÈÇ£‰πàÂ∞±‰ºöÂØºËá¥Â§ßÈáèÁöÑËØ∑Ê±ÇÊâìÂú®‰∫ÜÊï∞ÊçÆÂ∫ì‰∏äÈù¢ÔºåÂØºËá¥Êï∞ÊçÆÂ∫ìÂéãÂäõÂ∑®Â§ßÔºåÂ¶ÇÊûúÂú®È´òÂπ∂ÂèëÁöÑÊÉÖÂÜµ‰∏ãÔºåÂèØËÉΩÁû¨Èó¥Â∞±‰ºöÂØºËá¥Êï∞ÊçÆÂ∫ìÂÆïÊú∫„ÄÇËøôÊó∂ÂÄôÂ¶ÇÊûúËøêÁª¥È©¨‰∏äÂèàÈáçÂêØÊï∞ÊçÆÂ∫ìÔºåÈ©¨‰∏äÂèà‰ºöÊúâÊñ∞ÁöÑÊµÅÈáèÊääÊï∞ÊçÆÂ∫ìÊâìÊ≠ª„ÄÇËøôÂ∞±ÊòØÁºìÂ≠òÈõ™Â¥©„ÄÇ</p>
<p><img src="!assets/Redis/16e30d2c5e17899c.png" alt="img" style="zoom:80%;" /></p>
<p><strong>Ëß£ÂÜ≥ÊñπÊ°à</strong></p>
<ol>
<li>
<p>‰∫ãÂâç</p>
<ul>
<li>
<p>ÂùáÂåÄËøáÊúüÔºö</p>
<p>ËÆæÁΩÆ‰∏çÂêåÁöÑËøáÊúüÊó∂Èó¥ÔºåËÆ©ÁºìÂ≠òÂ§±ÊïàÁöÑÊó∂Èó¥Â∞ΩÈáèÂùáÂåÄÔºåÈÅøÂÖçÁõ∏ÂêåÁöÑËøáÊúüÊó∂Èó¥ÂØºËá¥ÁºìÂ≠òÈõ™Â¥©ÔºåÈÄ†ÊàêÂ§ßÈáèÊï∞ÊçÆÂ∫ìÁöÑËÆøÈóÆ</p>
</li>
<li>
<p>ÂàÜÁ∫ßÁºìÂ≠òÔºö</p>
<p>Á¨¨‰∏ÄÁºìÂ≠òÂ§±ÊïàÁöÑÂü∫Á°Ä‰∏äÔºåËÆøÈóÆ‰∫åÁ∫ßÁºìÂ≠òÔºåÊØè‰∏ÄÁ∫ßÁºìÂ≠òÁöÑÂ§±ÊïàÊó∂Èó¥ÈÉΩ‰∏çÂêå</p>
</li>
<li>
<p>ÁÉ≠ÁÇπÊï∞ÊçÆÊ∞∏‰∏çËøáÊúü</p>
<blockquote>
<p>Ê∞∏‰∏çËøáÊúüÂÆûÈôÖÂåÖÂê´‰∏§Â±ÇÊÑèÊÄùÔºö</p>
<ul>
<li>Áâ©ÁêÜÊ∞∏‰∏çËøáÊúüÔºöÈíàÂØπÁÉ≠ÁÇπ key ‰∏çËÆæÁΩÆËøáÊúüÊó∂Èó¥</li>
<li>ÈÄªËæëËøáÊúüÔºöÊääËøáÊúüÊó∂Èó¥Â≠òÂú® key ÂØπÂ∫îÁöÑ value ÈáåÔºåÂ¶ÇÊûúÂèëÁé∞Ë¶ÅËøáÊúü‰∫ÜÔºåÈÄöËøá‰∏Ä‰∏™ÂêéÂè∞ÁöÑÂºÇÊ≠•Á∫øÁ®ãËøõË°åÁºìÂ≠òÁöÑÊûÑÂª∫</li>
</ul>
</blockquote>
</li>
<li>
<p>‰øùËØÅ Redis ÁºìÂ≠òÁöÑÈ´òÂèØÁî®ÔºåÈò≤Ê≠¢ Redis ÂÆïÊú∫ÂØºËá¥ÁºìÂ≠òÈõ™Â¥©ÁöÑÈóÆÈ¢ò„ÄÇÂèØ‰ª•‰ΩøÁî®‰∏ª‰ªé+Âì®ÂÖµ„ÄÅReids ÈõÜÁæ§Êù•ÈÅøÂÖç Redis ÂÖ®ÁõòÂ¥©Ê∫ÉÁöÑÊÉÖÂÜµ</p>
</li>
</ul>
</li>
<li>
<p>‰∫ã‰∏≠</p>
<ul>
<li>
<p>‰∫íÊñ•ÈîÅÔºö</p>
<p>Âú®ÁºìÂ≠òÂ§±ÊïàÂêéÔºåÈÄöËøá‰∫íÊñ•ÈîÅÊàñËÄÖÈòüÂàóÊù•ÊéßÂà∂ËØªÊï∞ÊçÆÂÜôÁºìÂ≠òÁöÑÁ∫øÁ®ãÊï∞ÈáèÔºåÊØîÂ¶ÇÊüê‰∏™ key Âè™ÂÖÅËÆ∏‰∏Ä‰∏™Á∫øÁ®ãÊü•ËØ¢Êï∞ÊçÆÂíåÂÜôÁºìÂ≠òÔºåÂÖ∂‰ªñÁ∫øÁ®ãÁ≠âÂæÖ„ÄÇËøôÁßçÊñπÂºè‰ºöÈòªÂ°ûÂÖ∂‰ªñÁ∫øÁ®ãÔºåÊ≠§Êó∂Á≥ªÁªüÁöÑÂêûÂêêÈáè‰∏ãÈôç</p>
</li>
<li>
<p>‰ΩøÁî®ÁÜîÊñ≠Êú∫Âà∂ÔºåÈôêÊµÅÈôçÁ∫ßÔºö</p>
<p>ÂΩìÊµÅÈáèËææÂà∞‰∏ÄÂÆöÁöÑÈòàÂÄºÔºåÁõ¥Êé•ËøîÂõû ‚ÄùÁ≥ªÁªüÊã•Êå§‚Äú ‰πãÁ±ªÁöÑÊèêÁ§∫ÔºåÈò≤Ê≠¢ËøáÂ§öÁöÑËØ∑Ê±ÇÊâìÂú®Êï∞ÊçÆÂ∫ì‰∏äÂ∞ÜÊï∞ÊçÆÂ∫ìÂáªÂûÆÔºåËá≥Â∞ëËÉΩ‰øùËØÅ‰∏ÄÈÉ®ÂàÜÁî®Êà∑ÊòØÂèØ‰ª•Ê≠£Â∏∏ËÆøÈóÆÁöÑÔºåÂÖ∂‰ªñÁî®Êà∑Â§öÂà∑Êñ∞Âá†Ê¨°‰πüËÉΩÂæóÂà∞ÁªìÊûú</p>
</li>
</ul>
</li>
<li>
<p>‰∫ãÂêé</p>
<ul>
<li>ÂºÄÂßã Redis ÊåÅ‰πÖÂåñÊú∫Âà∂ÔºåÂ∞ΩÂø´ÊÅ¢Â§çÁºìÂ≠òÊï∞ÊçÆÔºå‰∏ÄÊó¶ÈáçÂêØÔºåÂ∞±ËÉΩ‰ªéÁ£ÅÁõò‰∏äËá™Âä®Âä†ËΩΩÊï∞ÊçÆÊÅ¢Â§çÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆ</li>
</ul>
</li>
</ol>
<h3 id="122">12.2„ÄÅÁºìÂ≠òÂáªÁ©ø<a class="headerlink" href="#122" title="Permanent link">&para;</a></h3>
<p><strong>‰ªÄ‰πàÊòØÁºìÂ≠òÂáªÁ©ø</strong></p>
<p>ÁºìÂ≠òÂáªÁ©øË∑üÁºìÂ≠òÈõ™Â¥©ÊúâÁÇπÁ±ª‰ººÔºåÁºìÂ≠òÈõ™Â¥©ÊòØÂ§ßËßÑÊ®°ÁöÑ key Â§±ÊïàÔºåËÄåÁºìÂ≠òÂáªÁ©øÊòØÊüê‰∏™ÁÉ≠ÁÇπÁöÑ key Â§±ÊïàÔºåÂ§ßÂπ∂ÂèëÈõÜ‰∏≠ÂØπÂÖ∂ËøõË°åËØ∑Ê±ÇÔºåÂ∞±‰ºöÈÄ†ÊàêÂ§ßÈáèËØ∑Ê±ÇËØªÁºìÂ≠òÊ≤°ËØªÂà∞Êï∞ÊçÆÔºå‰ªéËÄåÂØºËá¥È´òÂπ∂ÂèëËÆøÈóÆÊï∞ÊçÆÂ∫ìÔºåÂºïËµ∑Êï∞ÊçÆÂ∫ìÂéãÂäõÂâßÂ¢û„ÄÇËøôÁßçÁé∞Ë±°Â∞±Âè´ÂÅöÁºìÂ≠òÂáªÁ©ø„ÄÇ</p>
<p><strong>Ëß£ÂÜ≥ÊñπÊ°à</strong></p>
<ol>
<li>Âú®ÁºìÂ≠òÂ§±ÊïàÂêéÔºåÈÄöËøá‰∫íÊñ•ÈîÅÊàñËÄÖÈòüÂàóÊù•ÊéßÂà∂ËØªÊï∞ÊçÆÂÜôÁºìÂ≠òÁöÑÁ∫øÁ®ãÊï∞ÈáèÔºåÊØîÂ¶ÇÊüê‰∏™ key Âè™ÂÖÅËÆ∏‰∏Ä‰∏™Á∫øÁ®ãÊü•ËØ¢Êï∞ÊçÆÂíåÂÜôÁºìÂ≠òÔºåÂÖ∂‰ªñÁ∫øÁ®ãÁ≠âÂæÖ„ÄÇËøôÁßçÊñπÂºè‰ºöÈòªÂ°ûÂÖ∂‰ªñÁöÑÁ∫øÁ®ãÔºåÊ≠§Êó∂Á≥ªÁªüÁöÑÂêûÂêêÈáè‰ºö‰∏ãÈôç</li>
<li>ÁÉ≠ÁÇπÊï∞ÊçÆÁºìÂ≠òÊ∞∏Ëøú‰∏çËøáÊúü</li>
</ol>
<h3 id="123">12.3„ÄÅÁºìÂ≠òÁ©øÈÄè<a class="headerlink" href="#123" title="Permanent link">&para;</a></h3>
<p><strong>‰ªÄ‰πàÊòØÁºìÂ≠òÁ©øÈÄè</strong></p>
<p>ÁºìÂ≠òÁ©øÈÄèÊòØÊåáÁî®Êà∑ËØ∑Ê±ÇÁöÑÊï∞ÊçÆÂú®ÁºìÂ≠ò‰∏≠‰∏çÂ≠òÂú®ÔºåÂç≥Ê≤°ÊúâÂëΩ‰∏≠ÔºåÂêåÊó∂Âú®Êï∞ÊçÆÂ∫ì‰∏≠‰πü‰∏çÂ≠òÂú®ÔºåÂØºËá¥Áî®Êà∑ÊØèÊ¨°ËØ∑Ê±ÇËØ•Êï∞ÊçÆÈÉΩË¶ÅÂéªÊï∞ÊçÆÂ∫ì‰∏≠Êü•ËØ¢‰∏ÄÈÅç„ÄÇÂ¶ÇÊûúÊúâÊÅ∂ÊÑèÊîªÂáªËÄÖ‰∏çÊñ≠ËØ∑Ê±ÇÁ≥ªÁªü‰∏≠‰∏çÂ≠òÂú®ÁöÑÊï∞ÊçÆÔºå‰ºöÂØºËá¥Áü≠Êó∂Èó¥Â§ßÈáèËØ∑Ê±ÇËêΩÂú®Êï∞ÊçÆÂ∫ì‰∏äÔºåÈÄ†ÊàêÊï∞ÊçÆÂ∫ìÂéãÂäõËøáÂ§ßÔºåÁîöËá≥ÂØºËá¥Êï∞ÊçÆÂ∫ìÊâøÂèó‰∏ç‰ΩèËÄåÂÆïÊú∫Â¥©Ê∫É„ÄÇ</p>
<p><img src="!assets/Redis/16e30d1847df0faf.png" alt="img" style="" /></p>
<p>ÁºìÂ≠òÁ©øÈÄèÁöÑÂÖ≥ÈîÆÂú®‰∫é Âú®Redis ‰∏≠Êü•‰∏çÂà∞keyÂÄºÔºåÂÆÉÂíåÁºìÂ≠òÂáªÁ©øÁöÑÊ†πÊú¨Âå∫Âà´Âú®‰∫é‰º†ËøõÊù•ÁöÑ key Âú® Redis ‰∏≠ÊòØ‰∏çÂ≠òÂú®ÁöÑ„ÄÇÂÅáÂ¶ÇÊúâÈªëÂÆ¢‰º†ËøõÂ§ßÈáèÁöÑ‰∏çÂ≠òÂú®ÁöÑkeyÔºåÈÇ£‰πàÂ§ßÈáèÁöÑËØ∑Ê±ÇÊâìÂú®Êï∞ÊçÆÂ∫ì‰∏äÊòØÂæàËá¥ÂëΩÁöÑÈóÆÈ¢òÔºåÊâÄ‰ª•Âú®Êó•Â∏∏ÂºÄÂèë‰∏≠Ë¶ÅÂØπÂèÇÊï∞ÂÅöÂ•ΩÊ†°È™åÔºå‰∏Ä‰∫õÈùûÊ≥ïÁöÑÂèÇÊï∞Ôºå‰∏çÂèØËÉΩÂ≠òÂú®ÁöÑ key Â∞±Áõ¥Êé•ËøîÂõûÈîôËØØÊèêÁ§∫„ÄÇ</p>
<p><strong>Ëß£ÂÜ≥ÊñπÊ°à</strong></p>
<ol>
<li>
<p>Â∞ÜÊó†ÊïàÁöÑkeyÂ≠òÊîæËøõRedis‰∏≠Ôºö</p>
<p>ÂΩìÂá∫Áé∞RedisÊü•‰∏çÂà∞Êï∞ÊçÆÔºåÊï∞ÊçÆÂ∫ì‰πüÊü•‰∏çÂà∞Êï∞ÊçÆÁöÑÊÉÖÂÜµÔºåÂ∞±ÊääËøô‰∏™ key ‰øùÂ≠òÂà∞ Redis ‰∏≠ÔºåËÆæÁΩÆ <code>value="null"</code>ÔºåÂπ∂ËÆæÁΩÆÂÖ∂ËøáÊúüÊó∂Èó¥ÊûÅÁü≠ÔºåÂêéÈù¢ÂÜçÂá∫Áé∞Êü•ËØ¢Ëøô‰∏™ key ÁöÑËØ∑Ê±ÇÁöÑÊó∂ÂÄôÔºåÁõ¥Êé•ËøîÂõû nullÔºåÂ∞±‰∏çÈúÄË¶ÅÂÜçÊü•ËØ¢Êï∞ÊçÆÂ∫ì‰∫Ü„ÄÇ‰ΩÜËøôÁßçÂ§ÑÁêÜÊñπÂºèÊòØÊúâÈóÆÈ¢òÁöÑÔºåÂÅáÂ¶Ç‰º†ËøõÊù•ÁöÑËøô‰∏™‰∏çÂ≠òÂú®ÁöÑ Key ÂÄºÊØèÊ¨°ÈÉΩÊòØÈöèÊú∫ÁöÑÔºåÈÇ£Â≠òËøõ Redis ‰πüÊ≤°ÊúâÊÑè‰πâÔºåÁΩëÂÖ≥Â±Ç <strong>Nginx</strong> ÊúâÈÖçÁΩÆÈ°πÔºåÂèØ‰ª•ËÆ©ËøêÁª¥Â§ßÂ§ßÂØπÂçï‰∏™ IP ÊØèÁßíËÆøÈóÆÊ¨°Êï∞Ë∂ÖÂá∫ÈòàÂÄºÁöÑ IP ÈÉΩÊãâÈªëÔºåÂõ†‰∏∫Ê≠£Â∏∏Áî®Êà∑ÊòØ‰∏ç‰ºöÂú®ÂçïÁßíÂÜÖÂèëËµ∑Ëøô‰πàÂ§öÊ¨°ËØ∑Ê±ÇÁöÑ</p>
</li>
<li>
<p>‰ΩøÁî®Â∏ÉÈöÜËøáÊª§Âô®Ôºö</p>
<p>Â¶ÇÊûúÂ∏ÉÈöÜËøáÊª§Âô®Âà§ÂÆöÊüê‰∏™ key ‰∏çÂ≠òÂú®Â∏ÉÈöÜËøáÊª§Âô®‰∏≠ÔºåÈÇ£‰πàÂ∞±‰∏ÄÂÆö‰∏çÂ≠òÂú®ÔºåÂ¶ÇÊûúÂà§ÂÆöÊüê‰∏™ key Â≠òÂú®ÔºåÈÇ£‰πàÂæàÂ§ßÂèØËÉΩÊòØÂ≠òÂú®ÔºàÂ≠òÂú®‰∏ÄÂÆöÁöÑËØØÂà§ÁéáÔºâ„ÄÇ‰∫éÊòØÊàë‰ª¨ÂèØ‰ª•Âú®ÁºìÂ≠ò‰πãÂâçÂÜçÂä†‰∏Ä‰∏™Â∏ÉÈöÜËøáÊª§Âô®ÔºåÂ∞ÜÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊâÄÊúâ key ÈÉΩÂ≠òÂÇ®Âú®Â∏ÉÈöÜËøáÊª§Âô®‰∏≠ÔºåÂú®Êü•ËØ¢ Redis ÂâçÂÖàÂéªÂ∏ÉÈöÜËøáÊª§Âô®Êü•ËØ¢ key ÊòØÂê¶Â≠òÂú®ÔºåÂ¶ÇÊûú‰∏çÂ≠òÂú®Â∞±Áõ¥Êé•ËøîÂõûÔºå‰∏çËÆ©ÂÖ∂ËÆøÈóÆÊï∞ÊçÆÂ∫ìÔºå‰ªéËÄåÈÅøÂÖç‰∫ÜÂØπÂ∫ïÂ±ÇÂ≠òÂÇ®Á≥ªÁªüÁöÑÊü•ËØ¢ÂéãÂäõ„ÄÇ</p>
</li>
</ol>
<blockquote>
<p>PSÔºöÂú®ÂºÄÂèëÁ®ãÂ∫èÁöÑÊó∂ÂÄôÈÉΩË¶ÅÊúâ‰∏ÄÈ¢ó ‚Äú‰∏ç‰ø°‰ªª‚Äù ÁöÑÂøÉÔºåÂ∞±ÊòØ‰∏çË¶ÅÁõ∏‰ø°‰ªª‰ΩïË∞ÉÁî®ÊñπÔºåÊØîÂ¶Ç‰Ω†Êèê‰æõ‰∫Ü API Êé•Âè£Âá∫ÂéªÔºå‰Ω†ÊúâËøôÂá†‰∏™ÂèÇÊï∞ÔºåÈÇ£ÊàëËßâÂæó‰Ωú‰∏∫Ë¢´Ë∞ÉÁî®ÊñπÔºå‰ªª‰ΩïÂèØËÉΩÁöÑÂèÇÊï∞ÊÉÖÂÜµÈÉΩÂ∫îËØ•Ë¢´ËÄÉËôëÂà∞ÔºåÂÅöÊ†°È™åÔºåÂõ†‰∏∫‰Ω†‰∏çÁõ∏‰ø°Ë∞ÉÁî®‰Ω†ÁöÑ‰∫∫Ôºå‰Ω†‰∏çÁü•ÈÅì‰ªñ‰ºö‰º†‰ªÄ‰πàÂèÇÊï∞Áªô‰Ω†„ÄÇ</p>
<p>‰∏æ‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÔºå‰Ω†Ëøô‰∏™Êé•Âè£ÊòØÂàÜÈ°µÊü•ËØ¢ÁöÑÔºå‰ΩÜÊòØ‰Ω†Ê≤°ÂØπÂàÜÈ°µÂèÇÊï∞ÁöÑÂ§ßÂ∞èÂÅöÈôêÂà∂ÔºåË∞ÉÁî®ÁöÑ‰∫∫‰∏á‰∏Ä ‰∏ÄÂè£Ê∞îÊü• Integer.MAX_VALUE ‰∏ÄÊ¨°ËØ∑Ê±ÇÂ∞±Ë¶Å‰Ω†Âá†ÁßíÔºåÂ§öÂá†‰∏™Âπ∂Âèë‰Ω†‰∏çÂ∞±ÊåÇ‰∫Ü‰πàÔºüÊòØÂÖ¨Âè∏Âêå‰∫ãË∞ÉÁî®ËøòÂ•ΩÂ§ß‰∏ç‰∫ÜÂèëÁé∞‰∫ÜÊîπÊéâÔºå‰ΩÜÊòØÂ¶ÇÊûúÊòØÈªëÂÆ¢ÊàñËÄÖÁ´û‰∫âÂØπÊâãÂë¢ÔºüÂú®‰Ω†ÂèåÂçÅ‰∏ÄÂΩìÂ§©Â∞±Ë∞É‰Ω†Ëøô‰∏™Êé•Âè£‰ºöÂèëÁîü‰ªÄ‰πàÔºåÂ∞±‰∏çÁî®ÊàëËØ¥‰∫ÜÂêß„ÄÇ</p>
</blockquote>
<h3 id="124">12.4„ÄÅÁºìÂ≠òÈ¢ÑÁÉ≠<a class="headerlink" href="#124" title="Permanent link">&para;</a></h3>
<p><strong>‰ªÄ‰πàÊòØÁºìÂ≠òÈ¢ÑÁÉ≠</strong></p>
<p>ÁºìÂ≠òÈ¢ÑÁÉ≠ÊòØÊåáÁ≥ªÁªü‰∏äÁ∫øÂêéÔºåÊèêÂâçÂ∞ÜÁõ∏ÂÖ≥ÁöÑÁºìÂ≠òÊï∞ÊçÆÂä†ËΩΩÂà∞ÁºìÂ≠òÁ≥ªÁªü„ÄÇÈÅøÂÖçÂú®Áî®Êà∑ËØ∑Ê±ÇÁöÑÊó∂ÂÄôÔºåÂÖàÊü•ËØ¢Êï∞ÊçÆÂ∫ìÔºåÁÑ∂ÂêéÂÜçÂ∞ÜÊï∞ÊçÆÁºìÂ≠òÁöÑÈóÆÈ¢òÔºåÁî®Êà∑Áõ¥Êé•Êü•ËØ¢‰∫ãÂÖàË¢´È¢ÑÁÉ≠ÁöÑÁºìÂ≠òÊï∞ÊçÆ„ÄÇ</p>
<p>Â¶ÇÊûú‰∏çËøõË°åÈ¢ÑÁÉ≠ÔºåÈÇ£‰πà Redis ÂàùÂßãÁä∂ÊÄÅÊï∞ÊçÆ‰∏∫Á©∫ÔºåÁ≥ªÁªü‰∏äÁ∫øÂàùÊúüÔºåÂØπ‰∫éÈ´òÂπ∂ÂèëÁöÑÊµÅÈáèÔºåÈÉΩ‰ºöËÆøÈóÆÂà∞Êï∞ÊçÆÂ∫ì‰∏≠Ôºå ÂØπÊï∞ÊçÆÂ∫ìÈÄ†ÊàêÊµÅÈáèÁöÑÂéãÂäõ„ÄÇ</p>
<p><strong>Ëß£ÂÜ≥ÊñπÊ°à</strong></p>
<ol>
<li>Êï∞ÊçÆÈáè‰∏çÂ§ßÁöÑÊó∂ÂÄôÔºåÂ∑•Á®ãÂêØÂä®ÁöÑÊó∂ÂÄôËøõË°åÂä†ËΩΩÁºìÂ≠òÂä®‰Ωú</li>
<li>Êï∞ÊçÆÈáèÂ§ßÁöÑÊó∂ÂÄôÔºåËÆæÁΩÆ‰∏Ä‰∏™ÂÆöÊó∂‰ªªÂä°ËÑöÊú¨ÔºåËøõË°åÁºìÂ≠òÁöÑÂà∑Êñ∞</li>
<li>Êï∞ÊçÆÈáèÂ§™Â§ßÁöÑÊó∂ÂÄôÔºå‰ºòÂÖà‰øùËØÅÁÉ≠ÁÇπÊï∞ÊçÆËøõË°åÊèêÂâçÂä†ËΩΩÂà∞ÁºìÂ≠ò</li>
</ol>
<h3 id="125">12.5„ÄÅÁºìÂ≠òÈôçÁ∫ß<a class="headerlink" href="#125" title="Permanent link">&para;</a></h3>
<p>ÁºìÂ≠òÈôçÁ∫ßÊòØÊåáÁºìÂ≠òÂ§±ÊïàÊàñÁºìÂ≠òÊúçÂä°Âô®ÊåÇÊéâÁöÑÊÉÖÂÜµ‰∏ãÔºåÂèØ‰ª•Â∞ÜÂÖ∂‰ªñÊ¨°Ë¶ÅÊúçÂä°ÁöÑÊï∞ÊçÆËøõË°åÁºìÂ≠òÈôçÁ∫ßÔºå‰ªéËÄåÊèêÂçá‰∏ªÊúçÂä°ÁöÑÁ®≥ÂÆöÊÄß„ÄÇ‰∏çÂéªËÆøÈóÆÊï∞ÊçÆÂ∫ìÔºåÁõ¥Êé•ËøîÂõûÈªòËÆ§Êï∞ÊçÆÊàñËÆøÈóÆÊúçÂä°ÁöÑÂÜÖÂ≠òÊï∞ÊçÆ„ÄÇÈôçÁ∫ß‰∏ÄËà¨ÊòØÊúâÊçüÁöÑÊìç‰ΩúÔºåÊâÄ‰ª•Â∞ΩÈáèÂáèÂ∞ëÈôçÁ∫ßÂØπ‰∫é‰∏öÂä°ÁöÑÂΩ±ÂìçÁ®ãÂ∫¶„ÄÇ</p>
<p>ÈôçÁ∫ßÁöÑÁõÆÁöÑÊòØ‰øùËØÅÊ†∏ÂøÉÊúçÂä°ÂèØÁî®ÔºåÂç≥‰ΩøÊòØÊúâÊçüÁöÑ„ÄÇÂ¶ÇÂéªÂπ¥ÂèåÂçÅ‰∏ÄÁöÑÊó∂ÂÄôÊ∑òÂÆùË¥≠Áâ©ËΩ¶Êó†Ê≥ï‰øÆÊîπÂú∞ÂùÄÂè™ËÉΩ‰ΩøÁî®ÈªòËÆ§Âú∞ÂùÄÔºåËøô‰∏™ÊúçÂä°Â∞±ÊòØË¢´ÈôçÁ∫ß‰∫ÜÔºåËøôÈáåÈòøÈáå‰øùËØÅ‰∫ÜËÆ¢ÂçïÂèØ‰ª•Ê≠£Â∏∏Êèê‰∫§Âíå‰ªòÊ¨æÔºå‰ΩÜ‰øÆÊîπÂú∞ÂùÄÁöÑÊúçÂä°ÂèØ‰ª•Âú®ÊúçÂä°Âô®ÂéãÂäõÈôç‰ΩéÔºåÂπ∂ÂèëÈáèÁõ∏ÂØπÂáèÂ∞ëÁöÑÊó∂ÂÄôÂÜçÊÅ¢Â§ç„ÄÇ</p>
<p>Âú®È°πÁõÆÂÆûÊàò‰∏≠ÈÄöÂ∏∏‰ºöÂ∞ÜÈÉ®ÂàÜÁÉ≠ÁÇπÊï∞ÊçÆÁºìÂ≠òÂà∞ÊúçÂä°ÁöÑÂÜÖÂ≠ò‰∏≠ÔºåËøôÊ†∑‰∏ÄÊó¶ÁºìÂ≠òÂá∫Áé∞ÂºÇÂ∏∏ÔºåÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®ÊúçÂä°ÁöÑÂÜÖÂ≠òÊï∞ÊçÆÔºå‰ªéËÄåÈÅøÂÖçÊï∞ÊçÆÂ∫ìÈÅ≠ÂèóÂ∑®Â§ßÂéãÂäõ„ÄÇ</p>
<h2 id="13redis">13„ÄÅRedis ÂÆûÁé∞ÂàÜÂ∏ÉÂºèÈîÅ<a class="headerlink" href="#13redis" title="Permanent link">&para;</a></h2>
<p><code>set</code> ËøòÂèØ‰ª•Ê∑ªÂä†‰∏Ä‰∫õÂÖ∂‰ªñÁöÑÂèÇÊï∞Ôºö</p>
<div class="highlight"><pre><span></span><code>SET<span class="w"> </span>key<span class="w"> </span>value<span class="w"> </span><span class="o">[</span>EX<span class="w"> </span>seconds<span class="p">|</span>PX<span class="w"> </span>milliseconds<span class="o">]</span><span class="w"> </span><span class="o">[</span>NX<span class="p">|</span>XX<span class="o">]</span><span class="w"> </span><span class="o">[</span>KEEPTTL<span class="o">]</span>
</code></pre></div>
<ul>
<li>EX secondsÔºö‰ª•Áßí‰∏∫Âçï‰ΩçËÆæÁΩÆËøáÊúüÊó∂Èó¥</li>
<li>PX millisecondsÔºö‰ª•ÊØ´Áßí‰∏∫Âçï‰ΩçËÆæÁΩÆËøáÊúüÊó∂Èó¥</li>
<li>NXÔºöÈîÆ‰∏çÂ≠òÂú®ÁöÑÊó∂ÂÄôËÆæÁΩÆÈîÆÂÄº</li>
<li>XXÔºöÈîÆÂ≠òÂú®ÁöÑÊó∂ÂÄôËÆæÁΩÆÈîÆÂÄº</li>
<li>KEEPTTLÔºö‰øùÁïôËÆæÁΩÆÂâçÊåáÂÆöÈîÆÁöÑÁîüÂ≠òÊó∂Èó¥</li>
</ul>
<p><code>setnx</code> ÊòØ SET if Not eXistsÔºàÂ¶ÇÊûú‰∏çÂ≠òÂú®ÔºåÂàô SETÔºâÁöÑÁÆÄÂÜô„ÄÇ</p>
<div class="highlight"><pre><span></span><code>setnx<span class="w"> </span>key<span class="w"> </span>value
</code></pre></div>
<p><img src="!assets/Redis/00831rSTly1gdmpj4rnixj307802w0ss.jpg" alt="img" style="" /></p>
<p>Áî®Ê≥ïÂ¶ÇÂõæÔºåÂ¶ÇÊûú‰∏çÂ≠òÂú® set ÊàêÂäüËøîÂõû int ÁöÑ 1ÔºåËøô‰∏™ key Â≠òÂú®‰∫ÜËøîÂõû0„ÄÇ</p>
<p><code>setex</code> Â∞ÜÂÄº value ÂÖ≥ËÅîÂà∞ key ÔºåÂπ∂Â∞Ü key ÁöÑÁîüÂ≠òÊó∂Èó¥ËÆæ‰∏∫ seconds (‰ª•Áßí‰∏∫Âçï‰Ωç)ÔºõÂ¶ÇÊûú key Â∑≤ÁªèÂ≠òÂú®Ôºåsetex ÂëΩ‰ª§Â∞ÜË¶ÜÂÜôÊóßÂÄº„ÄÇ</p>
<div class="highlight"><pre><span></span><code>setex<span class="w"> </span>key<span class="w"> </span>seconds<span class="w"> </span>value
</code></pre></div>
<p>ËÄå‰∏î<code>setex</code> ÊòØ‰∏Ä‰∏™ÂéüÂ≠êÊÄßÔºàatomicÔºâÊìç‰ΩúÔºåÂÖ≥ËÅîÂÄºÂíåËÆæÁΩÆÁîüÂ≠òÊó∂Èó¥‰∏§‰∏™Âä®‰Ωú‰ºöÂú®Âêå‰∏ÄÊó∂Èó¥ÂÜÖÂÆåÊàê„ÄÇ</p>
<p><img src="!assets/Redis/00831rSTly1gdmpohppykj308703w3yn.jpg" alt="img" style="" /></p>
<p>ÊàëËÆæÁΩÆ‰∫Ü 10 ÁßíÁöÑÂ§±ÊïàÊó∂Èó¥Ôºå<code>ttl</code> ÂëΩ‰ª§ÂèØ‰ª•Êü•ÁúãÂÄíËÆ°Êó∂ÔºåË¥üÁöÑËØ¥ÊòéÂ∑≤ÁªèÂà∞Êúü‰∫Ü„ÄÇ</p>
<p><strong>Ëé∑ÂèñÈîÅ</strong></p>
<p>Ëé∑ÂèñÈîÅÊúâ‰∏§ÁßçÊñπÂºèÔºå‰∏ÄÁßçÊòØ‰ΩøÁî® <code>set</code> ÂëΩ‰ª§ÔºåÂè¶‰∏ÄÁßçÊòØ‰ΩøÁî® <code>setnx</code> ÂëΩ‰ª§</p>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * ‰ΩøÁî®redisÁöÑsetÂëΩ‰ª§ÂÆûÁé∞Ëé∑ÂèñÂàÜÂ∏ÉÂºèÈîÅ</span>
<span class="cm"> *</span>
<span class="cm"> * @param lockKey   ÈîÅ</span>
<span class="cm"> * @param requestId ËØ∑Ê±ÇIDÔºå‰øùËØÅÂêå‰∏ÄÊÄß</span>
<span class="cm"> * @param timeout   ËøáÊúüÊó∂Èó¥ÔºåÈÅøÂÖçÊ≠ªÈîÅ</span>
<span class="cm"> * @return</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">getLockBySet</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">lockKey</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">requestId</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">timeout</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Ëé∑ÂèñjedisÂØπË±°ÔºåË¥üË¥£‰∏éËøúÁ®ãredisÊúçÂä°Âô®ËøõË°åÈìæÊé•</span>
<span class="w">    </span><span class="n">Jedis</span><span class="w"> </span><span class="n">jedis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getJedis</span><span class="p">();</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jedis</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">lockKey</span><span class="p">,</span><span class="w"> </span><span class="n">requestId</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;NX&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;EX&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">timeout</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;OK&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * ‰ΩøÁî®redisÁöÑsetnxÂëΩ‰ª§ÂÆûÁé∞Ëé∑ÂèñÂàÜÂ∏ÉÂºèÈîÅ</span>
<span class="cm"> *</span>
<span class="cm"> * @param lockKey   ÈîÅ</span>
<span class="cm"> * @param requestId ËØ∑Ê±ÇIDÔºå‰øùËØÅÂêå‰∏ÄÊÄß</span>
<span class="cm"> * @param timeout   ËøáÊúüÊó∂Èó¥ÔºåÈÅøÂÖçÊ≠ªÈîÅ</span>
<span class="cm"> * @return</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">synchronized</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">getLockBySetnx</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">lockKey</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">requestId</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">timeout</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Ëé∑ÂèñjedisÂØπË±°ÔºåË¥üË¥£‰∏éËøúÁ®ãredisÊúçÂä°Âô®ËøõË°åÈìæÊé•</span>
<span class="w">    </span><span class="n">Jedis</span><span class="w"> </span><span class="n">jedis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getJedis</span><span class="p">();</span>
<span class="w">    </span><span class="n">Long</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jedis</span><span class="p">.</span><span class="na">setnx</span><span class="p">(</span><span class="n">lockKey</span><span class="p">,</span><span class="w"> </span><span class="n">requestId</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ËÆæÁΩÆÊúâÊïàÊúüÔºåÈò≤Ê≠¢Ê≠ªÈîÅ</span>
<span class="w">        </span><span class="n">jedis</span><span class="p">.</span><span class="na">expire</span><span class="p">(</span><span class="n">lockKey</span><span class="p">,</span><span class="w"> </span><span class="n">timeout</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>ÂèØ‰ª•ËÆæÁΩÆ‰∏Ä‰∏™Ë∂ÖÊó∂Êó∂Èó¥ÔºåËé∑ÂèñÈîÅÁöÑÊó∂ÂÄôÂ¶ÇÊûúÊú™Ëé∑ÂèñÂà∞ÂèØ‰ª•ËÆ©Á∫øÁ®ã <code>sleep</code> ‰∏Ä‰ºöÂÑøÔºåÁÑ∂ÂêéÁªßÁª≠Ëé∑ÂèñÔºåÁ≠âÂà∞Ë∂ÖËøá‰∫ÜË∂ÖÊó∂Êó∂Èó¥ÂÜç ‚ÄúËé∑ÂèñÂ§±Ë¥•‚Äù„ÄÇ</p>
</blockquote>
<p><strong>ÈáäÊîæÈîÅ</strong></p>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * ‰ΩøÁî®delÂëΩ‰ª§ÈáäÊîæÈîÅ</span>
<span class="cm"> *</span>
<span class="cm"> * @param lockKey   ÈîÅ</span>
<span class="cm"> * @param requestId ËØ∑Ê±ÇIDÔºå‰øùËØÅÂêå‰∏ÄÊÄß</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">releaseLockByDel</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">lockKey</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">requestId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Ëé∑ÂèñjedisÂØπË±°ÔºåË¥üË¥£‰∏éËøúÁ®ãredisÊúçÂä°Âô®ËøõË°åÈìæÊé•</span>
<span class="w">    </span><span class="n">Jedis</span><span class="w"> </span><span class="n">jedis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getJedis</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// ‰øùËØÅÂêå‰∏ÄÊÄß</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">requestId</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">jedis</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">lockKey</span><span class="p">)))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">jedis</span><span class="p">.</span><span class="na">del</span><span class="p">(</span><span class="n">lockKey</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="14redis">14„ÄÅRedis ÂÆûÁé∞ÂàÜÂ∏ÉÂºèÁºìÂ≠ò<a class="headerlink" href="#14redis" title="Permanent link">&para;</a></h2>
<p>Âú® Mybatis ‰∏≠ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂè™ÂêØÁî®‰∫ÜÊú¨Âú∞ÁöÑ‰ºöËØùÁºìÂ≠òÔºåÂÆÉ‰ªÖ‰ªÖÂØπ‰∏Ä‰∏™‰ºöËØù‰∏≠ÁöÑÊï∞ÊçÆËøõË°åÁºìÂ≠ò„ÄÇ Ë¶ÅÂêØÁî®ÂÖ®Â±ÄÁöÑ‰∫åÁ∫ßÁºìÂ≠òÔºåÂè™ÈúÄË¶ÅÂú® SQL Êò†Â∞ÑÊñá‰ª∂‰∏≠Ê∑ªÂä†‰∏ÄË°åÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;cache/&gt;</span>
</code></pre></div>
<h3 id="141">14.1„ÄÅÊê≠Âª∫ÁéØÂ¢É<a class="headerlink" href="#141" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>ËøôÈáåÊñ∞Âª∫‰∏Ä‰∏™ÁÆÄÂçïÁöÑ SpringBoot È°πÁõÆÔºåÂºïÂÖ•‰ª•‰∏ã‰æùËµñÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependencies&gt;</span>
<span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">        </span><span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
<span class="w">        </span><span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-data-redis<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">        </span><span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
<span class="w">        </span><span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">        </span><span class="nt">&lt;groupId&gt;</span>org.mybatis.spring.boot<span class="nt">&lt;/groupId&gt;</span>
<span class="w">        </span><span class="nt">&lt;artifactId&gt;</span>mybatis-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">        </span><span class="nt">&lt;version&gt;</span>2.2.0<span class="nt">&lt;/version&gt;</span>
<span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">        </span><span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
<span class="w">        </span><span class="nt">&lt;artifactId&gt;</span>spring-boot-devtools<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">        </span><span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
<span class="w">        </span><span class="nt">&lt;optional&gt;</span>true<span class="nt">&lt;/optional&gt;</span>
<span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">        </span><span class="nt">&lt;groupId&gt;</span>mysql<span class="nt">&lt;/groupId&gt;</span>
<span class="w">        </span><span class="nt">&lt;artifactId&gt;</span>mysql-connector-java<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">        </span><span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
<span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">        </span><span class="nt">&lt;groupId&gt;</span>org.projectlombok<span class="nt">&lt;/groupId&gt;</span>
<span class="w">        </span><span class="nt">&lt;artifactId&gt;</span>lombok<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">        </span><span class="nt">&lt;optional&gt;</span>true<span class="nt">&lt;/optional&gt;</span>
<span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">        </span><span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
<span class="w">        </span><span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">        </span><span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">        </span><span class="nt">&lt;groupId&gt;</span>com.alibaba<span class="nt">&lt;/groupId&gt;</span>
<span class="w">        </span><span class="nt">&lt;artifactId&gt;</span>druid-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">        </span><span class="nt">&lt;version&gt;</span>1.2.6<span class="nt">&lt;/version&gt;</span>
<span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;/dependencies&gt;</span>
</code></pre></div>
</li>
<li>
<p>ÁºñËæë application.yml Êñá‰ª∂Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">server</span><span class="p">:</span>
<span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8888</span>
<span class="nt">spring</span><span class="p">:</span>
<span class="w">  </span><span class="c1">#redis</span>
<span class="w">  </span><span class="nt">redis</span><span class="p">:</span>
<span class="w">    </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6379</span>
<span class="w">    </span><span class="nt">database</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">  </span><span class="c1">#mysql</span>
<span class="w">  </span><span class="nt">datasource</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">com.alibaba.druid.pool.DruidDataSource</span>
<span class="w">    </span><span class="nt">driver-class-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">com.mysql.cj.jdbc.Driver</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jdbc:mysql://localhost:3306/redis?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai</span>
<span class="w">    </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="c1">#mybatis</span>
<span class="nt">mybatis</span><span class="p">:</span>
<span class="w">  </span><span class="nt">mapper-locations</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">classpath:mapper/*.xml</span>
<span class="w">  </span><span class="nt">type-aliases-package</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">com.orichalcos.entity</span>

<span class="nt">logging</span><span class="p">:</span>
<span class="w">  </span><span class="nt">level</span><span class="p">:</span>
<span class="w">    </span><span class="nt">com.orichalcos.mapper</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">debug</span>
</code></pre></div>
</li>
<li>
<p>Êñ∞Âª∫‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂÆû‰ΩìÁ±ª User.javaÔºåÂπ∂Âú®Êï∞ÊçÆÂ∫ìÂàõÂª∫ÂØπÂ∫îË°®Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * @author Orichalcos</span>
<span class="cm"> */</span>
<span class="nd">@Data</span>
<span class="nd">@AllArgsConstructor</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@Accessors</span><span class="p">(</span><span class="n">chain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Serializable</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Date</span><span class="w"> </span><span class="n">bir</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>Êñ∞Âª∫ UserMapper.javaÔºö</p>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * @author Orichalcos</span>
<span class="cm"> */</span>
<span class="nd">@Mapper</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">UserMapper</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findAll</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>UserMapper.xmlÔºö</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>
<span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">namespace=</span><span class="s">&quot;com.orichalcos.mapper.UserMapper&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findAll&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;User&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>select<span class="w"> </span>id,name,age,bir<span class="w"> </span>from<span class="w"> </span>t_user;
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>
<span class="nt">&lt;/mapper&gt;</span>
</code></pre></div>
</li>
<li>
<p>UserService.java Âíå UserServiceImpl.javaÔºö</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">UserService</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findAll</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * @author Orichalcos</span>
<span class="cm"> */</span>
<span class="nd">@Service</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserServiceImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">UserService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserMapper</span><span class="w"> </span><span class="n">userMapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findAll</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">userMapper</span><span class="p">.</span><span class="na">findAll</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>Âú® test.java.com.orichalcos ‰∏ãÂàõÂª∫‰∏Ä‰∏™ TestUserService.java ËøõË°åÊµãËØïÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TestUserService</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">UserService</span><span class="w"> </span><span class="n">userService</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">userService</span><span class="p">.</span><span class="na">findAll</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">u</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;u = &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">u</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>ÂêØÂä® <code>test()</code> ÊµãËØïÔºåÁªìÊûúÂ¶Ç‰∏ãÔºåÁéØÂ¢ÉÊê≠Âª∫ÊàêÂäüÔºö</p>
<div class="highlight"><pre><span></span><code>u = User(id=1, name=orichalcos, age=18, bir=Tue Jun 15 00:00:00 CST 2021)
u = User(id=2, name=Â∞èÈªë, age=20, bir=Wed Jun 16 00:00:00 CST 2021)
</code></pre></div>
</li>
</ol>
<h3 id="142-mybatis">14.2„ÄÅÂºÄÂêØ Mybatis ÁöÑ‰∫åÁ∫ßÁºìÂ≠ò<a class="headerlink" href="#142-mybatis" title="Permanent link">&para;</a></h3>
<p>Âú®ÂºÄÂêØ‰πãÂâçÔºå‰øÆÊîπ‰∏ã <code>test()</code> ÊñπÊ≥ïÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">userService</span><span class="p">.</span><span class="na">findAll</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">u</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;u = &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">u</span><span class="p">));</span>

<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;=================================================&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">userService</span><span class="p">.</span><span class="na">findAll</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">u</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;u = &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">u</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>
<p>Êü•ÁúãÊâìÂç∞Âá∫Êù•ÁöÑÊó•ÂøóÔºö</p>
<p><img src="!assets/Redis/image-20210616162153913.png" alt="image-20210616162153913" style="" /></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåÁ®ãÂ∫èÂéªÊï∞ÊçÆÂ∫ìÊü•ËØ¢‰∫Ü‰∏§Ê¨°„ÄÇ</p>
<p>ÂÜçÂú® UserMapper.xml ‰∏≠ÂºÄÂêØ‰∫åÁ∫ßÁºìÂ≠òÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;cache/&gt;</span>
</code></pre></div>
<p>ÂÜçÊ¨°ÂêØÂä® <code>test()</code> ÊñπÊ≥ïÔºåÊü•ÁúãÊâìÂç∞ÁöÑÊó•ÂøóÔºö</p>
<p><img src="!assets/Redis/image-20210616162704356.png" alt="image-20210616162704356" style="" /></p>
<p>ÂèØ‰ª•ÁúãÂà∞ËøôÈáåÁ®ãÂ∫èÂè™Êü•ËØ¢‰∫Ü‰∏ÄÊ¨°Êï∞ÊçÆÂèØÔºåÁ¨¨‰∫åÊ¨°Âõ†‰∏∫Âáª‰∏≠‰∫ÜÁºìÂ≠òÔºåÊâÄ‰ª•Áõ¥Êé•ÁªôÂà∞‰∫ÜÊï∞ÊçÆ„ÄÇ</p>
<p>ÂºÄÂêØÁºìÂ≠òÈúÄË¶ÅÂÆû‰ΩìÁ±ªÂÆûÁé∞Â∫èÂàóÂåñÔºå‰∏çÁÑ∂‰ºöÊä•Â∫èÂàóÂåñÁöÑÈîôËØØÔºö</p>
<p><img src="!assets/Redis/image-20210616163022937.png" alt="image-20210616163022937" style="" /></p>
<h3 id="143-redis">14.3„ÄÅ‰ΩøÁî® Redis ‰Ωú‰∏∫ÁºìÂ≠ò<a class="headerlink" href="#143-redis" title="Permanent link">&para;</a></h3>
<p>È¶ñÂÖàÔºåÁúãÁúã Mybatis ÁöÑ Cache Êé•Âè£ÁöÑÂÆûÁé∞Á±ªÔºö</p>
<p><img src="!assets/Redis/image-20210616163547625.png" alt="image-20210616163547625" style="" /></p>
<p>Mybatis ‰∏≠ÈªòËÆ§‰ΩøÁî®ÁöÑÂ∞±ÊòØ PerpretualCacheÔºåÂèØ‰ª•Áúã‰∏Ä‰∏ãÊ∫êÁ†ÅÔºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">//</span>
<span class="c1">// Source code recreated from a .class file by IntelliJ IDEA</span>
<span class="c1">// (powered by FernFlower decompiler)</span>
<span class="c1">//</span>

<span class="kn">package</span><span class="w"> </span><span class="nn">org.apache.ibatis.cache.impl</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.cache.Cache</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.cache.CacheException</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PerpetualCache</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Cache</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">Object</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="p">();</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">PerpetualCache</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getId</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">id</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getSize</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">cache</span><span class="p">.</span><span class="na">size</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">putObject</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">cache</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">getObject</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">cache</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">removeObject</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">cache</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">clear</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">cache</span><span class="p">.</span><span class="na">clear</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">...</span>
<span class="p">}</span>
</code></pre></div>
<p>ÂèØ‰ª•ÁúãÂà∞Âú®Á±ª‰∏≠Áª¥Êä§‰∫Ü‰∏Ä‰∏™Âêç‰∏∫ cache ÁöÑ HashMapÔºåÂ§ßÈÉ®ÂàÜÊñπÊ≥ïÈÉΩÊòØÂØπ cache ËøõË°åÊìç‰ΩúÔºåÂèØ‰ª•ÂØπÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∫õÊñπÊ≥ïÊâì‰∏äÊñ≠ÁÇπ debug Êü•ÁúãÊñπÊ≥ï‰ªÄ‰πàÊó∂ÂÄôËß¶Âèë„ÄÇÂÖ∂ÂÆûÁúãÂà∞ËøôÈáåÂ∑≤ÁªèÂæàÁõ¥ÁôΩ‰∫ÜÔºöHashMap Áî®‰∫éÂ≠òÊîæÁºìÂ≠òÔºåÂ¶ÇÊûúÊü•ËØ¢ÁöÑÊó∂ÂÄôÊ≤°ÊúâÂëΩ‰∏≠ÁºìÂ≠òÔºåÈÇ£‰πà‰ºö‰ΩøÁî® <code>putObject()</code> Â∞ÜÁºìÂ≠òÂ≠òÂÖ•ÔºåÂ¶ÇÊûúÂëΩ‰∏≠ÁºìÂ≠òÂ∞±‰ΩøÁî® <code>getObject()</code> Â∞ÜÊï∞ÊçÆÂèñÂá∫„ÄÇÈÇ£‰πàÂ¶ÇÊûú‰ΩøÁî® Redis ‰Ωú‰∏∫ÁºìÂ≠òÔºåÂèØ‰ª•Ëá™Â∑±ÂÆö‰πâ‰∏Ä‰∏™ RedisCache Âπ∂‰∏îÂÆûÁé∞ Cache Êé•Âè£Âç≥ÂèØ„ÄÇ</p>
<p>È¶ñÂÖàÂÖàÊñ∞Âª∫‰∏Ä‰∏™ RedisCache.java Âπ∂ÂÆûÁé∞ Cache.javaÔºö</p>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * @author Orichalcos</span>
<span class="cm"> * Ëá™ÂÆö‰πâRedisÁºìÂ≠òÂÆûÁé∞</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">RedisCache</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Cache</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getId</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">putObject</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">getObject</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">removeObject</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">clear</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getSize</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Âú® UserMapper.xml ‰∏≠Â∞Ü cache Á±ªÂûãÊîπ‰∏∫Ëá™ÂÆö‰πâÁöÑ RedisCacheÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;cache</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;com.orichalcos.cache.RedisCache&quot;</span><span class="nt">/&gt;</span>
</code></pre></div>
<p>ÂÖàÁõ¥Êé•Ë∑ë‰∏Ä‰∏ãÁúãÁúãÔºö</p>
<p><img src="!assets/Redis/image-20210616184214849.png" alt="image-20210616184214849" style="" /></p>
<p>ËøôÈáåÊä•ÈîôÊèêÁ§∫ÔºöÂü∫Êú¨ÁºìÂ≠òÂøÖÈ°ªË¶ÅÊúâ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ ID ‰∏∫ÂèÇÊï∞ÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºåÂèÇËÄÉ‰∏ã PerpetualCache.java ÁöÑÂÆûÁé∞ÔºåËøôÊ¨°Âú® RedisCache.java ‰∏≠Ê∑ªÂä†ÂØπÂ∫îÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºåÂπ∂‰∏îÂ∞ÜÂÖ∂ÊâìÂç∞Âá∫Êù•ÁúãÁúãÊòØÂï•Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="nf">RedisCache</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>ÂÜçÊ¨°ÊâßË°å <code>test()</code>Ôºö</p>
<p><img src="!assets/Redis/image-20210616184824753.png" alt="image-20210616184824753" style="" /></p>
<p>ÊâìÂç∞Âá∫‰∫Ü IDÔºåÂéüÊù•ÊòØ Mapper Êñá‰ª∂ÁöÑ namespaceÔºåÂπ∂‰∏îÂú®ÊéßÂà∂Âè∞ÊúÄÂêéÊèêÁ§∫Êä•ÈîôÔºöname ÂèÇÊï∞‰∏çËÉΩ‰∏∫Á©∫</p>
<p><img src="!assets/Redis/image-20210616184928611.png" alt="image-20210616184928611" style="" /></p>
<p>ÈÇ£‰πàÔºåÊ†πÊçÆ PerpetualCache.java ‰∏≠ÁöÑ <code>getId()</code> ÊñπÊ≥ïÔºåÂ∞Ü namespace ËøîÂõûÂá∫ÂéªÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Override</span>
<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getId</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">id</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>ÂÜçÊ¨°ËøêË°å <code>test()</code>Ôºö</p>
<p><img src="!assets/Redis/image-20210616185512068.png" alt="image-20210616185512068" style="" /></p>
<p>Â∑≤ÁªèÊ≤°ÊúâÈóÆÈ¢ò‰∫ÜÔºå‰ΩÜÊòØËøòÊòØÊü•ËØ¢‰∫ÜÊï∞ÊçÆÂ∫ì‰∏§Ê¨°ÔºåÂÖàÂà´ÊÄ•ÔºåÂÖàÁúãÁúã <code>putObject()</code> Âíå <code>getObject()</code> ÁöÑÂèÇÊï∞ÊòØÂï•Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Override</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">putObject</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;key====&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">key</span><span class="p">.</span><span class="na">toString</span><span class="p">());</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;value====&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">value</span><span class="p">);</span>
<span class="p">}</span>

<span class="nd">@Override</span>
<span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">getObject</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;key====&quot;</span><span class="o">+</span><span class="n">key</span><span class="p">.</span><span class="na">toString</span><span class="p">());</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>ÂÜçË∑ë‰∏Ä‰∏ã <code>test()</code>Ôºö</p>
<p><img src="!assets/Redis/image-20210616190044791.png" alt="image-20210616190044791" style="" /></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåÊØèÊ¨°Êü•ËØ¢ÁöÑÊó∂ÂÄôÈÉΩ‰ºöÈÄöËøá <code>getObject()</code> ÊñπÊ≥ïÂéªÊãøÁºìÂ≠òÔºå‰ΩÜÊòØÂõ†‰∏∫Ê≤°ÊúâÊãøÂà∞ÔºåÊâÄ‰ª•ÂéªÊï∞ÊçÆÂ∫ìÊü•ËØ¢ÔºåÁÑ∂ÂêéÈÄöËøá <code>putObject()</code> Â∞ÜÊï∞ÊçÆÂ≠òÂÖ•ÁºìÂ≠ò„ÄÇ</p>
<p>ËøôÊ†∑Â∞±ÂæàÊ∏ÖÊ•ö‰∫ÜÔºåÊåâÁÖß PerpetualCache.java ÁöÑÂÆûÁé∞ÔºàÂ≠òÂÖ• HashMapÔºâÔºåÂ∞ÜÊï∞ÊçÆÂ≠òÂÖ• Redis ‰∏≠„ÄÇÁî±‰∫é RedisCache.java Ê≤°ÊúâË¢´ Spring ÊâòÁÆ°ÔºåÊâÄ‰ª•‰∏çÂèØ‰ª•ÈÄöËøá <code>@Autowired</code> Áõ¥Êé•Ëé∑ÂèñÂà∞ RedisTemplateÔºåËøôÈáåÂÜô‰∏Ä‰∏™Â∑•ÂÖ∑Á±ªÊù•Ëé∑ÂèñÔºö</p>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * @author Orichalcos</span>
<span class="cm"> * Áî®Êù•Ëé∑ÂèñspringbootÂàõÂª∫Â•ΩÁöÑÂ∑•ÂéÇ</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ApplicationContextUtils</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ApplicationContextAware</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">ApplicationContext</span><span class="w"> </span><span class="n">applicationContext</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setApplicationContext</span><span class="p">(</span><span class="n">ApplicationContext</span><span class="w"> </span><span class="n">applicationContext</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">BeansException</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ApplicationContextUtils</span><span class="p">.</span><span class="na">applicationContext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">applicationContext</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">getBean</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">applicationContext</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>ÂÆåÂñÑ RedisCache.java ÁöÑ‰ª£Á†ÅÔºö</p>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * @author Orichalcos</span>
<span class="cm"> * Ëá™ÂÆö‰πâRedisÁºìÂ≠òÂÆûÁé∞</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">RedisCache</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Cache</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">RedisCache</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getId</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">id</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">putObject</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">getRedisTemplate</span><span class="p">().</span><span class="na">opsForHash</span><span class="p">().</span><span class="na">put</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="p">.</span><span class="na">toString</span><span class="p">(),</span><span class="w"> </span><span class="n">value</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">getObject</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">getRedisTemplate</span><span class="p">().</span><span class="na">opsForHash</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="p">.</span><span class="na">toString</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">removeObject</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">getRedisTemplate</span><span class="p">().</span><span class="na">opsForHash</span><span class="p">().</span><span class="na">delete</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="p">.</span><span class="na">toString</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">clear</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">getRedisTemplate</span><span class="p">().</span><span class="na">delete</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getSize</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">getRedisTemplate</span><span class="p">().</span><span class="na">opsForHash</span><span class="p">().</span><span class="na">size</span><span class="p">(</span><span class="n">id</span><span class="p">).</span><span class="na">intValue</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">RedisTemplate</span><span class="w"> </span><span class="nf">getRedisTemplate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">RedisTemplate</span><span class="w"> </span><span class="n">redisTemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">RedisTemplate</span><span class="p">)</span><span class="w"> </span><span class="n">ApplicationContextUtils</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="s">&quot;redisTemplate&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">redisTemplate</span><span class="p">.</span><span class="na">setKeySerializer</span><span class="p">(</span><span class="n">RedisSerializer</span><span class="p">.</span><span class="na">string</span><span class="p">());</span>
<span class="w">        </span><span class="n">redisTemplate</span><span class="p">.</span><span class="na">setHashKeySerializer</span><span class="p">(</span><span class="n">RedisSerializer</span><span class="p">.</span><span class="na">string</span><span class="p">());</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">redisTemplate</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>ËøêË°å <code>test()</code> Ôºö</p>
<p><img src="!assets/Redis/image-20210617113243767.png" alt="image-20210617113243767" style="" /></p>
<p>Â∑≤ÁªèÁ¨¨‰∏ÄÊ¨°Â≠òÔºåÁ¨¨‰∫åÊ¨°Áõ¥Êé•‰ªéÁºìÂ≠òËé∑ÂèñÔºåÁúãÁúã Redis ÈáåÔºö</p>
<p><img src="!assets/Redis/image-20210617113334200.png" alt="image-20210617113334200" style="" /></p>
<h3 id="144">14.4„ÄÅÈóÆÈ¢òÂèä‰ºòÂåñ<a class="headerlink" href="#144" title="Permanent link">&para;</a></h3>
<p><strong>Â§öË°®ËøûÊé•ÈóÆÈ¢ò</strong></p>
<p>Ê∑ªÂä†‰∏Ä‰∏™ Role Ë°®Ôºå‰∏é User ÂÖ≥ËÅîÔºö</p>
<p><img src="!assets/Redis/image-20210617124427089.png" alt="image-20210617124427089" style="" /></p>
<p>Âú® UserMapper.xml Â¢ûÂä† ResultMap Êò†Â∞ÑÂπ∂‰øÆÊîπ <code>findAll()</code>ÔºàËøôÈáåËøò‰øÆÊîπ‰∫Ü User ÁöÑ‰∏ªÈîÆÔºåid-&gt;user_idÔºâÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">namespace=</span><span class="s">&quot;com.orichalcos.mapper.UserMapper&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;cache</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;com.orichalcos.cache.RedisCache&quot;</span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;UserResultMap&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;User&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;userId&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;user_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;name&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;age&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;age&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;bir&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;bir&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;collection</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;roles&quot;</span><span class="w"> </span><span class="na">ofType=</span><span class="s">&quot;Role&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;roleId&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;role_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;userId&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;user_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;roleName&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;role_name&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/collection&gt;</span>
<span class="w">    </span><span class="nt">&lt;/resultMap&gt;</span>

<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findAll&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;UserResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>select<span class="w"> </span>*
<span class="w">        </span>from<span class="w"> </span>t_user
<span class="w">                 </span>left<span class="w"> </span>join
<span class="w">             </span>t_role
<span class="w">             </span>on<span class="w"> </span>t_user.user_id<span class="w"> </span>=<span class="w"> </span>t_role.user_id;
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>
<span class="nt">&lt;/mapper&gt;</span>
</code></pre></div>
<p>Âú® RoleMapper.xml ‰∏≠Â¢ûÂä†‰∫Ü <code>updateRole()</code>Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;update</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;updateRole&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>update<span class="w"> </span>t_role
<span class="w">    </span>set<span class="w"> </span>role_name=&quot;user2&quot;
<span class="w">    </span>where<span class="w"> </span>role_id<span class="w"> </span>=<span class="w"> </span>&quot;1&quot;
<span class="nt">&lt;/update&gt;</span>
</code></pre></div>
<p><code>test()</code> Êîπ‰∏∫Â¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">userService</span><span class="p">.</span><span class="na">findAll</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">u</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;u = &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">u</span><span class="p">));</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;=================================================&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">roleService</span><span class="p">.</span><span class="na">updateRole</span><span class="p">();</span>
<span class="w">    </span><span class="n">userService</span><span class="p">.</span><span class="na">findAll</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">u</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;u = &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">u</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>
<p>ËøêË°åÂêéÂèëÁé∞Ôºö</p>
<p><img src="!assets/Redis/image-20210617124840634.png" alt="image-20210617124840634" style="" /></p>
<p><code>updateRole()</code> ÊâßË°åÂêéÔºå‰ºöÂà∑Êñ∞Êéâ com.orichalcos.mapper.RoleMapper ‰∏ãÁöÑÁºìÂ≠òÔºåÂÜçÊ¨°Êü•ËØ¢ UserÔºåÁî±‰∫éÁºìÂ≠òÂëΩ‰∏≠‰∏î com.orichalcos.mapper.UserMapper ÁöÑÁºìÂ≠òÂπ∂Êú™Êõ¥Êñ∞ÔºåÊâÄ‰ª•Âá∫Áé∞‰∫ÜËøôÁßçÊÉÖÂÜµÔºåËß£ÂÜ≥ÊñπÊ≥ïÔºö</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--&lt;cache type=&quot;com.orichalcos.cache.RedisCache&quot;/&gt;--&gt;</span>
<span class="nt">&lt;cache-ref</span><span class="w"> </span><span class="na">namespace=</span><span class="s">&quot;com.orichalcos.mapper.UserMapper&quot;</span><span class="nt">/&gt;</span>
</code></pre></div>
<p>Êîπ‰∏∫ÂºïÁî® User ÁöÑÁºìÂ≠òÔºåÂÜçÊ¨°ÊµãËØïÔºö</p>
<p><img src="!assets/Redis/image-20210617125449501.png" alt="image-20210617125449501" style="" /></p>
<p>Á¨¨‰∏ÄÊ¨°ÂëΩ‰∏≠ÁºìÂ≠òÔºåÊâßË°å <code>updateRole()</code> ÂêéÂà†Èô§‰∫Ü com.orichalcos.mapper.UserMapper ‰∏ãÁöÑÁºìÂ≠òÔºåÊâÄ‰ª•Á¨¨‰∫åÊ¨°Êü•ËØ¢‰∫ÜÊï∞ÊçÆÂ∫ìÔºåÊï∞ÊçÆÊ≠£Á°ÆÔºÅ</p>
<p><strong>ÂÖ∂‰ªñÁöÑ‰ºòÂåñ</strong></p>
<p>RedisCache.java Âè™ÊòØÁÆÄÂçïÂÆûÁé∞ÔºÅ</p>
<ul>
<li>ÁºìÂ≠òÁ©øÈÄèÔºöÂ≠òÂÇ®Á©∫ÂÄºËß£ÂÜ≥</li>
<li>ÁºìÂ≠òÂáªÁ©øÔºöÂèØ‰ª•‰ΩøÁî®‰∫íÊñ•ÈîÅ</li>
<li>ÁºìÂ≠òÈõ™Â¥©ÔºöÁºìÂ≠òÊúâÊïàÊúüËÆæÁΩÆ‰∏∫‰∏Ä‰∏™ÈöèÊú∫ËåÉÂõ¥</li>
<li>ËØªÂÜôÊÄßËÉΩÔºöredis key ‰∏çËÉΩËøáÈïøÔºå‰ºöÂΩ±ÂìçÊÄßËÉΩÔºåÂèØ‰ª•‰ΩøÁî® SHA-256 ËÆ°ÁÆóÊëòË¶ÅÂΩìÊàê key</li>
</ul>
<h2 id="15redis-session">15„ÄÅRedis Session ÁÆ°ÁêÜ<a class="headerlink" href="#15redis-session" title="Permanent link">&para;</a></h2>
<p>Redis ÁöÑ session ÁÆ°ÁêÜÊòØÂà©Áî® Spring Êèê‰æõÁöÑ session ÁÆ°ÁêÜËß£ÂÜ≥ÊñπÊ°àÔºåÂ∞Ü‰∏Ä‰∏™Â∫îÁî® session ‰∫§Áªô Redis Â≠òÂÇ®ÔºåÊï¥‰∏™Â∫îÁî®‰∏≠ÊâÄÊúâ session ÁöÑËØ∑Ê±ÇÈÉΩ‰ºöÂéª redis ‰∏≠Ëé∑ÂèñÂØπÂ∫îÁöÑ session Êï∞ÊçÆ„ÄÇ</p>
<p><img src="!assets/Redis/image-20200628201643358-1623919932602.png" alt="image-20200628201643358" style="" /></p>
<ol>
<li>
<p>ÂºïÂÖ•‰æùËµñÔºö</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- https://mvnrepository.com/artifact/org.springframework.session/spring-session-data-redis --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.springframework.session<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-session-data-redis<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>2.5.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-data-redis<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
</li>
<li>
<p>Ê∑ªÂä† Session ÁÆ°ÁêÜÈÖçÁΩÆÁ±ª</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Configuration</span>
<span class="nd">@EnableRedisHttpSession</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">RedisSessionManager</span><span class="w"> </span><span class="p">{</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>ÊâìÂåÖÊµãËØï</p>
</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  ÂõûÂà∞È°µÈù¢È°∂ÈÉ®
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.top", "navigation.indexes", "navigation.tracking"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../_javascripts/auto_title.js"></script>
      
    
  </body>
</html>