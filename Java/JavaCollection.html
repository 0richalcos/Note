<!DOCTYPE html><html lang="zh" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://0richalcos.github.io/Note/Java/JavaCollection.html"><link rel="prev" href="JavaBasics.html"><link rel="next" href="JavaObject.html"><link rel="icon" href="../assets/images/favicon.png"><meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Java é›†åˆ - éšä¾¿è®°è®°</title><link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css"><link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel="stylesheet" href="../_stylesheets/extra.css"><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head> <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal"> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a href="#1é›†åˆè¯¦è§£" class="md-skip"> è·³è½¬è‡³ </a> </div> <div data-md-component="announce"> </div> <header class="md-header md-header--shadow" data-md-component="header"> <nav class="md-header__inner md-grid" aria-label="é¡µçœ‰"> <a href="../index.html" title="éšä¾¿è®°è®°" class="md-header__button md-logo" aria-label="éšä¾¿è®°è®°" data-md-component="logo"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> </a> <label class="md-header__button md-icon" for="__drawer"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> éšä¾¿è®°è®° </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> Java é›†åˆ </span> </div> </div> </div> <form class="md-header__option" data-md-component="palette"> <input class="md-option" data-md-color-media data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal" aria-label="åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼" type="radio" name="__palette" id="__palette_0"> <label class="md-header__button md-icon" title="åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼" for="__palette_1" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> <input class="md-option" data-md-color-media data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="teal" aria-label="åˆ‡æ¢åˆ°äº®è‰²æ¨¡å¼" type="radio" name="__palette" id="__palette_1"> <label class="md-header__button md-icon" title="åˆ‡æ¢åˆ°äº®è‰²æ¨¡å¼" for="__palette_0" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input type="text" class="md-search__input" name="query" aria-label="æœç´¢" placeholder="æœç´¢" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required> <label class="md-search__icon md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav class="md-search__options" aria-label="æŸ¥æ‰¾"> <button type="reset" class="md-search__icon md-icon" title="æ¸…ç©ºå½“å‰å†…å®¹" aria-label="æ¸…ç©ºå½“å‰å†…å®¹" tabindex="-1"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> æ­£åœ¨åˆå§‹åŒ–æœç´¢å¼•æ“ </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> <div class="md-header__source"> <a href="https://github.com/0richalcos/Note" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class="md-source__repository"> GitHub </div> </a> </div> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--primary" aria-label="å¯¼èˆªæ " data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a href="../index.html" title="éšä¾¿è®°è®°" class="md-nav__button md-logo" aria-label="éšä¾¿è®°è®°" data-md-component="logo"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> </a> éšä¾¿è®°è®° </label> <div class="md-nav__source"> <a href="https://github.com/0richalcos/Note" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class="md-source__repository"> GitHub </div> </a> </div> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../index.html" class="md-nav__link"> <span class="md-ellipsis"> ğŸ  é¦–é¡µ </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked> <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0"> <span class="md-ellipsis"> â™¨ï¸ Java </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_2"> <span class="md-nav__icon md-icon"></span> â™¨ï¸ Java </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="Java.html" class="md-nav__link"> <span class="md-ellipsis"> Java </span> </a> </li> <li class="md-nav__item"> <a href="Java8.html" class="md-nav__link"> <span class="md-ellipsis"> Java 8 </span> </a> </li> <li class="md-nav__item"> <a href="JavaBasics.html" class="md-nav__link"> <span class="md-ellipsis"> Java åŸºç¡€ </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc"> <label class="md-nav__link md-nav__link--active" for="__toc"> <span class="md-ellipsis"> Java é›†åˆ </span> <span class="md-nav__icon md-icon"></span> </label> <a href="JavaCollection.html" class="md-nav__link md-nav__link--active"> <span class="md-ellipsis"> Java é›†åˆ </span> </a> <nav class="md-nav md-nav--secondary" aria-label="ç›®å½•"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> ç›®å½• </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#1é›†åˆè¯¦è§£" class="md-nav__link"> <span class="md-ellipsis"> 1ã€é›†åˆè¯¦è§£ </span> </a> </li> <li class="md-nav__item"> <a href="#92collection-æ¥å£" class="md-nav__link"> <span class="md-ellipsis"> 9.2ã€Collection æ¥å£ </span> </a> </li> <li class="md-nav__item"> <a href="#93listé›†åˆ" class="md-nav__link"> <span class="md-ellipsis"> 9.3ã€Listé›†åˆ </span> </a> <nav class="md-nav" aria-label="9.3ã€Listé›†åˆ"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#931arraylist-ç±»" class="md-nav__link"> <span class="md-ellipsis"> 9.3.1ã€ArrayList ç±» </span> </a> <nav class="md-nav" aria-label="9.3.1ã€ArrayList ç±»"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#åº•å±‚å®ç°" class="md-nav__link"> <span class="md-ellipsis"> åº•å±‚å®ç° </span> </a> </li> <li class="md-nav__item"> <a href="#æ‰©å®¹" class="md-nav__link"> <span class="md-ellipsis"> æ‰©å®¹ </span> </a> </li> <li class="md-nav__item"> <a href="#å¢åˆ " class="md-nav__link"> <span class="md-ellipsis"> å¢åˆ  </span> </a> </li> <li class="md-nav__item"> <a href="#åˆå§‹åŒ–" class="md-nav__link"> <span class="md-ellipsis"> åˆå§‹åŒ– </span> </a> </li> <li class="md-nav__item"> <a href="#çº¿ç¨‹å®‰å…¨" class="md-nav__link"> <span class="md-ellipsis"> çº¿ç¨‹å®‰å…¨ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#932linkedlistç±»" class="md-nav__link"> <span class="md-ellipsis"> 9.3.2ã€LinkedListç±» </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#94seté›†åˆ" class="md-nav__link"> <span class="md-ellipsis"> 9.4ã€Seté›†åˆ </span> </a> <nav class="md-nav" aria-label="9.4ã€Seté›†åˆ"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#941hashset-ç±»" class="md-nav__link"> <span class="md-ellipsis"> 9.4.1ã€HashSet ç±» </span> </a> </li> <li class="md-nav__item"> <a href="#942treeset-ç±»" class="md-nav__link"> <span class="md-ellipsis"> 9.4.2ã€TreeSet ç±» </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#95mapé›†åˆ" class="md-nav__link"> <span class="md-ellipsis"> 9.5ã€Mapé›†åˆ </span> </a> <nav class="md-nav" aria-label="9.5ã€Mapé›†åˆ"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#951hashmap" class="md-nav__link"> <span class="md-ellipsis"> 9.5.1ã€HashMap </span> </a> <nav class="md-nav" aria-label="9.5.1ã€HashMap"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#åº•å±‚ç»“æ„" class="md-nav__link"> <span class="md-ellipsis"> åº•å±‚ç»“æ„ </span> </a> </li> <li class="md-nav__item"> <a href="#æ’å…¥å’Œæ‰©å®¹" class="md-nav__link"> <span class="md-ellipsis"> æ’å…¥å’Œæ‰©å®¹ </span> </a> </li> <li class="md-nav__item"> <a href="#åˆå§‹é•¿åº¦" class="md-nav__link"> <span class="md-ellipsis"> åˆå§‹é•¿åº¦ </span> </a> </li> <li class="md-nav__item"> <a href="#çº¿ç¨‹å®‰å…¨_1" class="md-nav__link"> <span class="md-ellipsis"> çº¿ç¨‹å®‰å…¨ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#952hashtable" class="md-nav__link"> <span class="md-ellipsis"> 9.5.2ã€Hashtable </span> </a> </li> <li class="md-nav__item"> <a href="#953concurrenthashmap" class="md-nav__link"> <span class="md-ellipsis"> 9.5.3ã€ConcurrentHashMap </span> </a> <nav class="md-nav" aria-label="9.5.3ã€ConcurrentHashMap"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#jdk-17" class="md-nav__link"> <span class="md-ellipsis"> JDK 1.7 </span> </a> </li> <li class="md-nav__item"> <a href="#jdk-18" class="md-nav__link"> <span class="md-ellipsis"> JDK 1.8 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#96iteratorè¿­ä»£å™¨" class="md-nav__link"> <span class="md-ellipsis"> 9.6ã€Iteratorï¼ˆè¿­ä»£å™¨ï¼‰ </span> </a> <nav class="md-nav" aria-label="9.6ã€Iteratorï¼ˆè¿­ä»£å™¨ï¼‰"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#961ä½¿ç”¨lambdaè¡¨è¾¾å¼éå†iteratorè¿­ä»£å™¨" class="md-nav__link"> <span class="md-ellipsis"> 9.6.1ã€ä½¿ç”¨Lambdaè¡¨è¾¾å¼éå†Iteratorè¿­ä»£å™¨ </span> </a> </li> <li class="md-nav__item"> <a href="#962iterator-å’Œ-listiterator-æœ‰ä»€ä¹ˆåŒºåˆ«" class="md-nav__link"> <span class="md-ellipsis"> 9.6.2ã€Iterator å’Œ ListIterator æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#97collections-ç±»" class="md-nav__link"> <span class="md-ellipsis"> 9.7ã€Collections ç±» </span> </a> </li> <li class="md-nav__item"> <a href="#98jdk8-æ–°å¢é›†åˆæ“ä½œ" class="md-nav__link"> <span class="md-ellipsis"> 9.8ã€JDK8 æ–°å¢é›†åˆæ“ä½œ </span> </a> <nav class="md-nav" aria-label="9.8ã€JDK8 æ–°å¢é›†åˆæ“ä½œ"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#981ä½¿ç”¨lambdaè¡¨è¾¾å¼éå†collectioné›†åˆ" class="md-nav__link"> <span class="md-ellipsis"> 9.8.1ã€ä½¿ç”¨Lambdaè¡¨è¾¾å¼éå†Collectioné›†åˆ </span> </a> </li> <li class="md-nav__item"> <a href="#982predicateæ“ä½œcollectioné›†åˆ" class="md-nav__link"> <span class="md-ellipsis"> 9.8.2ã€Predicateæ“ä½œCollectioné›†åˆ </span> </a> </li> <li class="md-nav__item"> <a href="#983streamæ“ä½œcollectioné›†åˆ" class="md-nav__link"> <span class="md-ellipsis"> 9.8.3ã€Streamæ“ä½œCollectioné›†åˆ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#99æ³›å‹" class="md-nav__link"> <span class="md-ellipsis"> 9.9ã€æ³›å‹ </span> </a> <nav class="md-nav" aria-label="9.9ã€æ³›å‹"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#991æ³›å‹é›†åˆ" class="md-nav__link"> <span class="md-ellipsis"> 9.9.1ã€æ³›å‹é›†åˆ </span> </a> </li> <li class="md-nav__item"> <a href="#992æ³›å‹ç±»" class="md-nav__link"> <span class="md-ellipsis"> 9.9.2ã€æ³›å‹ç±» </span> </a> </li> <li class="md-nav__item"> <a href="#993æ³›å‹æ–¹æ³•" class="md-nav__link"> <span class="md-ellipsis"> 9.9.3ã€æ³›å‹æ–¹æ³• </span> </a> </li> <li class="md-nav__item"> <a href="#994æ³›å‹çš„é«˜çº§ç”¨æ³•" class="md-nav__link"> <span class="md-ellipsis"> 9.9.4ã€æ³›å‹çš„é«˜çº§ç”¨æ³• </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#910å›¾ä¹¦ä¿¡æ¯æŸ¥è¯¢" class="md-nav__link"> <span class="md-ellipsis"> 9.10ã€å›¾ä¹¦ä¿¡æ¯æŸ¥è¯¢ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="JavaObject.html" class="md-nav__link"> <span class="md-ellipsis"> Java ç±»å’Œå¯¹è±¡ </span> </a> </li> <li class="md-nav__item"> <a href="JavaWeb.html" class="md-nav__link"> <span class="md-ellipsis"> JavaWeb </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3"> <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0"> <span class="md-ellipsis"> ğŸ§® æ•°æ®ç»“æ„åŠç®—æ³• </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3"> <span class="md-nav__icon md-icon"></span> ğŸ§® æ•°æ®ç»“æ„åŠç®—æ³• </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%AE%97%E6%B3%95/Algorithm.html" class="md-nav__link"> <span class="md-ellipsis"> Algorithm </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%AE%97%E6%B3%95/DesignPattern.html" class="md-nav__link"> <span class="md-ellipsis"> DesignPattern </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4"> <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0"> <span class="md-ellipsis"> ğŸƒ Spring </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4"> <span class="md-nav__icon md-icon"></span> ğŸƒ Spring </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../Spring/Spring.html" class="md-nav__link"> <span class="md-ellipsis"> Spring </span> </a> </li> <li class="md-nav__item"> <a href="../Spring/SpringBoot.html" class="md-nav__link"> <span class="md-ellipsis"> SpringBoot </span> </a> </li> <li class="md-nav__item"> <a href="../Spring/SpringCloud.html" class="md-nav__link"> <span class="md-ellipsis"> SpringCloud </span> </a> </li> <li class="md-nav__item"> <a href="../Spring/SpringMVC.html" class="md-nav__link"> <span class="md-ellipsis"> SpringMVC </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5"> <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0"> <span class="md-ellipsis"> ğŸ’¾ æŒä¹…å±‚æ¡†æ¶ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_5"> <span class="md-nav__icon md-icon"></span> ğŸ’¾ æŒä¹…å±‚æ¡†æ¶ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/MyBatis-Plus.html" class="md-nav__link"> <span class="md-ellipsis"> MyBatis-Plus </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/Mybatis.html" class="md-nav__link"> <span class="md-ellipsis"> Mybatis </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6"> <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0"> <span class="md-ellipsis"> ğŸ” è®¤è¯ä¸æˆæƒ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6"> <span class="md-nav__icon md-icon"></span> ğŸ” è®¤è¯ä¸æˆæƒ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/SSO.html" class="md-nav__link"> <span class="md-ellipsis"> SSO </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/Sa-Token.html" class="md-nav__link"> <span class="md-ellipsis"> Sa-Token </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/Shiro.html" class="md-nav__link"> <span class="md-ellipsis"> Shiro </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7"> <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0"> <span class="md-ellipsis"> ğŸŒ å‰ç«¯ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_7"> <span class="md-nav__icon md-icon"></span> ğŸŒ å‰ç«¯ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/CSS.html" class="md-nav__link"> <span class="md-ellipsis"> CSS </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/JavaScript.html" class="md-nav__link"> <span class="md-ellipsis"> JavaScript </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/Vue.html" class="md-nav__link"> <span class="md-ellipsis"> Vue </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/jQuery.html" class="md-nav__link"> <span class="md-ellipsis"> jQuery </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/Thymeleaf.html" class="md-nav__link"> <span class="md-ellipsis"> Thymeleaf </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_6"> <label class="md-nav__link" for="__nav_7_6" id="__nav_7_6_label" tabindex="0"> <span class="md-ellipsis"> ç»„ä»¶åº“ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_7_6"> <span class="md-nav__icon md-icon"></span> ç»„ä»¶åº“ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/AntV-X6.html" class="md-nav__link"> <span class="md-ellipsis"> AntV-X6 </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/ApacheECharts.html" class="md-nav__link"> <span class="md-ellipsis"> ApacheECharts </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/Axios.html" class="md-nav__link"> <span class="md-ellipsis"> Axios </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/BootstrapTable.html" class="md-nav__link"> <span class="md-ellipsis"> BootstrapTable </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/DHTMLXGantt.html" class="md-nav__link"> <span class="md-ellipsis"> DHTMLXGantt </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/Element.html" class="md-nav__link"> <span class="md-ellipsis"> Element </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/FullCalendar.html" class="md-nav__link"> <span class="md-ellipsis"> FullCalendar </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/X-editable.html" class="md-nav__link"> <span class="md-ellipsis"> X-editable </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8"> <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0"> <span class="md-ellipsis"> ğŸ“Š æ•°æ®åº“ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_8"> <span class="md-nav__icon md-icon"></span> ğŸ“Š æ•°æ®åº“ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/Dameng.html" class="md-nav__link"> <span class="md-ellipsis"> Dameng </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL.html" class="md-nav__link"> <span class="md-ellipsis"> MySQL </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/MySQLQuery.html" class="md-nav__link"> <span class="md-ellipsis"> MySQLQuery </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/OceanBase.html" class="md-nav__link"> <span class="md-ellipsis"> OceanBase </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/Oracle.html" class="md-nav__link"> <span class="md-ellipsis"> Oracle </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/Redis.html" class="md-nav__link"> <span class="md-ellipsis"> Redis </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/Vastbase.html" class="md-nav__link"> <span class="md-ellipsis"> Vastbase </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/Elasticsearch.html" class="md-nav__link"> <span class="md-ellipsis"> Elasticsearch </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10"> <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0"> <span class="md-ellipsis"> ğŸ“‡ åˆ†å¸ƒå¼å­˜å‚¨ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_10"> <span class="md-nav__icon md-icon"></span> ğŸ“‡ åˆ†å¸ƒå¼å­˜å‚¨ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8/FastDFS.html" class="md-nav__link"> <span class="md-ellipsis"> FastDFS </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8/MinIO.html" class="md-nav__link"> <span class="md-ellipsis"> MinIO </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11"> <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0"> <span class="md-ellipsis"> ğŸ›°ï¸ ç½‘ç»œé€šä¿¡ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_11"> <span class="md-nav__icon md-icon"></span> ğŸ›°ï¸ ç½‘ç»œé€šä¿¡ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/Encryption.html" class="md-nav__link"> <span class="md-ellipsis"> Encryption </span> </a> </li> <li class="md-nav__item"> <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/HTTP.html" class="md-nav__link"> <span class="md-ellipsis"> HTTP </span> </a> </li> <li class="md-nav__item"> <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/OpenVPN.html" class="md-nav__link"> <span class="md-ellipsis"> OpenVPN </span> </a> </li> <li class="md-nav__item"> <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/VNC.html" class="md-nav__link"> <span class="md-ellipsis"> VNC </span> </a> </li> <li class="md-nav__item"> <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/WebSocket.html" class="md-nav__link"> <span class="md-ellipsis"> WebSocket </span> </a> </li> <li class="md-nav__item"> <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/frp.html" class="md-nav__link"> <span class="md-ellipsis"> frp </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12"> <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0"> <span class="md-ellipsis"> ğŸ—ƒï¸ æ–‡ä»¶å¤„ç† </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_12"> <span class="md-nav__icon md-icon"></span> ğŸ—ƒï¸ æ–‡ä»¶å¤„ç† </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_1"> <label class="md-nav__link" for="__nav_12_1" id="__nav_12_1_label" tabindex="0"> <span class="md-ellipsis"> Office </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_1_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_12_1"> <span class="md-nav__icon md-icon"></span> Office </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/ApachePOI.html" class="md-nav__link"> <span class="md-ellipsis"> ApachePOI </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/EasyExcel.html" class="md-nav__link"> <span class="md-ellipsis"> EasyExcel </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/OnlyOffice.html" class="md-nav__link"> <span class="md-ellipsis"> OnlyOffice </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/Poi-tl.html" class="md-nav__link"> <span class="md-ellipsis"> Poi-tl </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/Spire.OfficeForJava.html" class="md-nav__link"> <span class="md-ellipsis"> Spire.OfficeForJava </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/PDF/ApachePDFBox.html" class="md-nav__link"> <span class="md-ellipsis"> ApachePDFBox </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/XML/XMLParse.html" class="md-nav__link"> <span class="md-ellipsis"> XMLParse </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/ZIP/Zip4j.html" class="md-nav__link"> <span class="md-ellipsis"> Zip4j </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/XXL-JOB.html" class="md-nav__link"> <span class="md-ellipsis"> XXL-JOB </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14"> <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0"> <span class="md-ellipsis"> ğŸ§‘â€ğŸ”§ è¿ç»´ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_14"> <span class="md-nav__icon md-icon"></span> ğŸ§‘â€ğŸ”§ è¿ç»´ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/Docker.html" class="md-nav__link"> <span class="md-ellipsis"> Docker </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/Linux.html" class="md-nav__link"> <span class="md-ellipsis"> Linux </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/NSSM.html" class="md-nav__link"> <span class="md-ellipsis"> NSSM </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/Nginx.html" class="md-nav__link"> <span class="md-ellipsis"> Nginx </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/Tomcat.html" class="md-nav__link"> <span class="md-ellipsis"> Tomcat </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/TongWeb.html" class="md-nav__link"> <span class="md-ellipsis"> TongWeb </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/WSL.html" class="md-nav__link"> <span class="md-ellipsis"> WSL </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/WebLogic.html" class="md-nav__link"> <span class="md-ellipsis"> WebLogic </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15"> <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0"> <span class="md-ellipsis"> ğŸ› ï¸ å¼€å‘å·¥å…· </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_15"> <span class="md-nav__icon md-icon"></span> ğŸ› ï¸ å¼€å‘å·¥å…· </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Git.html" class="md-nav__link"> <span class="md-ellipsis"> Git </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Maven.html" class="md-nav__link"> <span class="md-ellipsis"> Maven </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Node.js.html" class="md-nav__link"> <span class="md-ellipsis"> Node.js </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Swagger.html" class="md-nav__link"> <span class="md-ellipsis"> Swagger </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16"> <label class="md-nav__link" for="__nav_16" id="__nav_16_label" tabindex="0"> <span class="md-ellipsis"> ğŸ‘» å…¶ä»– </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_16"> <span class="md-nav__icon md-icon"></span> ğŸ‘» å…¶ä»– </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E5%85%B6%E4%BB%96/Settings.html" class="md-nav__link"> <span class="md-ellipsis"> Settings </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%85%B6%E4%BB%96/Solutions.html" class="md-nav__link"> <span class="md-ellipsis"> Solutions </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%85%B6%E4%BB%96/Weasel.html" class="md-nav__link"> <span class="md-ellipsis"> Weasel </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--secondary" aria-label="ç›®å½•"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> ç›®å½• </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#1é›†åˆè¯¦è§£" class="md-nav__link"> <span class="md-ellipsis"> 1ã€é›†åˆè¯¦è§£ </span> </a> </li> <li class="md-nav__item"> <a href="#92collection-æ¥å£" class="md-nav__link"> <span class="md-ellipsis"> 9.2ã€Collection æ¥å£ </span> </a> </li> <li class="md-nav__item"> <a href="#93listé›†åˆ" class="md-nav__link"> <span class="md-ellipsis"> 9.3ã€Listé›†åˆ </span> </a> <nav class="md-nav" aria-label="9.3ã€Listé›†åˆ"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#931arraylist-ç±»" class="md-nav__link"> <span class="md-ellipsis"> 9.3.1ã€ArrayList ç±» </span> </a> <nav class="md-nav" aria-label="9.3.1ã€ArrayList ç±»"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#åº•å±‚å®ç°" class="md-nav__link"> <span class="md-ellipsis"> åº•å±‚å®ç° </span> </a> </li> <li class="md-nav__item"> <a href="#æ‰©å®¹" class="md-nav__link"> <span class="md-ellipsis"> æ‰©å®¹ </span> </a> </li> <li class="md-nav__item"> <a href="#å¢åˆ " class="md-nav__link"> <span class="md-ellipsis"> å¢åˆ  </span> </a> </li> <li class="md-nav__item"> <a href="#åˆå§‹åŒ–" class="md-nav__link"> <span class="md-ellipsis"> åˆå§‹åŒ– </span> </a> </li> <li class="md-nav__item"> <a href="#çº¿ç¨‹å®‰å…¨" class="md-nav__link"> <span class="md-ellipsis"> çº¿ç¨‹å®‰å…¨ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#932linkedlistç±»" class="md-nav__link"> <span class="md-ellipsis"> 9.3.2ã€LinkedListç±» </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#94seté›†åˆ" class="md-nav__link"> <span class="md-ellipsis"> 9.4ã€Seté›†åˆ </span> </a> <nav class="md-nav" aria-label="9.4ã€Seté›†åˆ"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#941hashset-ç±»" class="md-nav__link"> <span class="md-ellipsis"> 9.4.1ã€HashSet ç±» </span> </a> </li> <li class="md-nav__item"> <a href="#942treeset-ç±»" class="md-nav__link"> <span class="md-ellipsis"> 9.4.2ã€TreeSet ç±» </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#95mapé›†åˆ" class="md-nav__link"> <span class="md-ellipsis"> 9.5ã€Mapé›†åˆ </span> </a> <nav class="md-nav" aria-label="9.5ã€Mapé›†åˆ"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#951hashmap" class="md-nav__link"> <span class="md-ellipsis"> 9.5.1ã€HashMap </span> </a> <nav class="md-nav" aria-label="9.5.1ã€HashMap"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#åº•å±‚ç»“æ„" class="md-nav__link"> <span class="md-ellipsis"> åº•å±‚ç»“æ„ </span> </a> </li> <li class="md-nav__item"> <a href="#æ’å…¥å’Œæ‰©å®¹" class="md-nav__link"> <span class="md-ellipsis"> æ’å…¥å’Œæ‰©å®¹ </span> </a> </li> <li class="md-nav__item"> <a href="#åˆå§‹é•¿åº¦" class="md-nav__link"> <span class="md-ellipsis"> åˆå§‹é•¿åº¦ </span> </a> </li> <li class="md-nav__item"> <a href="#çº¿ç¨‹å®‰å…¨_1" class="md-nav__link"> <span class="md-ellipsis"> çº¿ç¨‹å®‰å…¨ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#952hashtable" class="md-nav__link"> <span class="md-ellipsis"> 9.5.2ã€Hashtable </span> </a> </li> <li class="md-nav__item"> <a href="#953concurrenthashmap" class="md-nav__link"> <span class="md-ellipsis"> 9.5.3ã€ConcurrentHashMap </span> </a> <nav class="md-nav" aria-label="9.5.3ã€ConcurrentHashMap"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#jdk-17" class="md-nav__link"> <span class="md-ellipsis"> JDK 1.7 </span> </a> </li> <li class="md-nav__item"> <a href="#jdk-18" class="md-nav__link"> <span class="md-ellipsis"> JDK 1.8 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#96iteratorè¿­ä»£å™¨" class="md-nav__link"> <span class="md-ellipsis"> 9.6ã€Iteratorï¼ˆè¿­ä»£å™¨ï¼‰ </span> </a> <nav class="md-nav" aria-label="9.6ã€Iteratorï¼ˆè¿­ä»£å™¨ï¼‰"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#961ä½¿ç”¨lambdaè¡¨è¾¾å¼éå†iteratorè¿­ä»£å™¨" class="md-nav__link"> <span class="md-ellipsis"> 9.6.1ã€ä½¿ç”¨Lambdaè¡¨è¾¾å¼éå†Iteratorè¿­ä»£å™¨ </span> </a> </li> <li class="md-nav__item"> <a href="#962iterator-å’Œ-listiterator-æœ‰ä»€ä¹ˆåŒºåˆ«" class="md-nav__link"> <span class="md-ellipsis"> 9.6.2ã€Iterator å’Œ ListIterator æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#97collections-ç±»" class="md-nav__link"> <span class="md-ellipsis"> 9.7ã€Collections ç±» </span> </a> </li> <li class="md-nav__item"> <a href="#98jdk8-æ–°å¢é›†åˆæ“ä½œ" class="md-nav__link"> <span class="md-ellipsis"> 9.8ã€JDK8 æ–°å¢é›†åˆæ“ä½œ </span> </a> <nav class="md-nav" aria-label="9.8ã€JDK8 æ–°å¢é›†åˆæ“ä½œ"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#981ä½¿ç”¨lambdaè¡¨è¾¾å¼éå†collectioné›†åˆ" class="md-nav__link"> <span class="md-ellipsis"> 9.8.1ã€ä½¿ç”¨Lambdaè¡¨è¾¾å¼éå†Collectioné›†åˆ </span> </a> </li> <li class="md-nav__item"> <a href="#982predicateæ“ä½œcollectioné›†åˆ" class="md-nav__link"> <span class="md-ellipsis"> 9.8.2ã€Predicateæ“ä½œCollectioné›†åˆ </span> </a> </li> <li class="md-nav__item"> <a href="#983streamæ“ä½œcollectioné›†åˆ" class="md-nav__link"> <span class="md-ellipsis"> 9.8.3ã€Streamæ“ä½œCollectioné›†åˆ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#99æ³›å‹" class="md-nav__link"> <span class="md-ellipsis"> 9.9ã€æ³›å‹ </span> </a> <nav class="md-nav" aria-label="9.9ã€æ³›å‹"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#991æ³›å‹é›†åˆ" class="md-nav__link"> <span class="md-ellipsis"> 9.9.1ã€æ³›å‹é›†åˆ </span> </a> </li> <li class="md-nav__item"> <a href="#992æ³›å‹ç±»" class="md-nav__link"> <span class="md-ellipsis"> 9.9.2ã€æ³›å‹ç±» </span> </a> </li> <li class="md-nav__item"> <a href="#993æ³›å‹æ–¹æ³•" class="md-nav__link"> <span class="md-ellipsis"> 9.9.3ã€æ³›å‹æ–¹æ³• </span> </a> </li> <li class="md-nav__item"> <a href="#994æ³›å‹çš„é«˜çº§ç”¨æ³•" class="md-nav__link"> <span class="md-ellipsis"> 9.9.4ã€æ³›å‹çš„é«˜çº§ç”¨æ³• </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#910å›¾ä¹¦ä¿¡æ¯æŸ¥è¯¢" class="md-nav__link"> <span class="md-ellipsis"> 9.10ã€å›¾ä¹¦ä¿¡æ¯æŸ¥è¯¢ </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <nav class="md-path" aria-label="å¯¼èˆªæ "> <ol class="md-path__list"> <li class="md-path__item"> <a href="../index.html" class="md-path__link"> <span class="md-ellipsis"> ğŸ  é¦–é¡µ </span> </a> </li> <li class="md-path__item"> <a href="Java.html" class="md-path__link"> <span class="md-ellipsis"> â™¨ï¸ Java </span> </a> </li> </ol> </nav> <article class="md-content__inner md-typeset"> <h1 id="java-é›†åˆ">Java é›†åˆ<a class="headerlink" href="#java-é›†åˆ" title="é”šç‚¹é“¾æ¥">Â¶</a></h1> <h2 id="1é›†åˆè¯¦è§£">1ã€é›†åˆè¯¦è§£<a class="headerlink" href="#1é›†åˆè¯¦è§£" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>åœ¨ç¼–ç¨‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„æ¥ä¿å­˜å¤šä¸ªå¯¹è±¡ï¼Œä½†æ•°ç»„é•¿åº¦ä¸å¯å˜åŒ–ï¼Œä¸€æ—¦åœ¨åˆå§‹åŒ–æ•°ç»„æ—¶æŒ‡å®šäº†æ•°ç»„é•¿åº¦ï¼Œè¿™ä¸ªæ•°ç»„é•¿åº¦å°±æ˜¯ä¸å¯å˜çš„ã€‚å¦‚æœéœ€è¦ä¿å­˜æ•°é‡å˜åŒ–çš„æ•°æ®ï¼Œæ•°ç»„å°±æœ‰ç‚¹æ— èƒ½ä¸ºåŠ›äº†ã€‚è€Œä¸”æ•°ç»„æ— æ³•ä¿å­˜å…·æœ‰æ˜ å°„å…³ç³»çš„æ•°æ®ï¼Œå¦‚æˆç»©è¡¨ä¸ºè¯­æ–‡â€”â€”79ï¼Œæ•°å­¦â€”â€”80ï¼Œè¿™ç§æ•°æ®çœ‹ä¸Šå»åƒä¸¤ä¸ªæ•°ç»„ï¼Œä½†è¿™ä¸¤ä¸ªæ•°ç»„çš„å…ƒç´ ä¹‹é—´æœ‰ä¸€å®šçš„å…³è”å…³ç³»ã€‚</p> <p>ä¸ºäº†ä¿å­˜æ•°é‡ä¸ç¡®å®šçš„æ•°æ®ï¼Œä»¥åŠä¿å­˜å…·æœ‰æ˜ å°„å…³ç³»çš„æ•°æ®ï¼ˆä¹Ÿè¢«ç§°ä¸ºå…³è”æ•°ç»„ï¼‰ï¼ŒJava æä¾›äº†é›†åˆç±»ã€‚==é›†åˆç±»ä¸»è¦è´Ÿè´£ä¿å­˜ã€ç››è£…å…¶ä»–æ•°æ®ï¼Œå› æ­¤é›†åˆç±»ä¹Ÿè¢«ç§°ä¸ºå®¹å™¨ç±»ã€‚==Java æ‰€æœ‰çš„é›†åˆç±»éƒ½ä½äº java.util åŒ…ä¸‹ï¼Œæä¾›äº†ä¸€ä¸ªè¡¨ç¤ºå’Œæ“ä½œå¯¹è±¡é›†åˆçš„ç»Ÿä¸€æ„æ¶ï¼ŒåŒ…å«å¤§é‡é›†åˆæ¥å£ï¼Œä»¥åŠè¿™äº›æ¥å£çš„å®ç°ç±»å’Œæ“ä½œå®ƒä»¬çš„ç®—æ³•ã€‚</p> <p>é›†åˆç±»å’Œæ•°ç»„ä¸ä¸€æ ·ï¼Œæ•°ç»„å…ƒç´ æ—¢å¯ä»¥æ˜¯åŸºæœ¬ç±»å‹çš„å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡ï¼ˆå®é™…ä¸Šä¿å­˜çš„æ˜¯å¯¹è±¡çš„å¼•ç”¨å˜é‡ï¼‰ï¼Œè€Œé›†åˆé‡Œåªèƒ½ä¿å­˜å¯¹è±¡ï¼ˆå®é™…ä¸Šåªæ˜¯ä¿å­˜å¯¹è±¡çš„å¼•ç”¨å˜é‡ï¼Œä½†é€šå¸¸ä¹ æƒ¯ä¸Šè®¤ä¸ºé›†åˆé‡Œä¿å­˜çš„æ˜¯å¯¹è±¡ï¼‰ã€‚</p> <p>Java é›†åˆç±»å‹åˆ†ä¸º Collection å’Œ Mapï¼Œå®ƒä»¬æ˜¯ Java é›†åˆçš„æ ¹æ¥å£ï¼Œè¿™ä¸¤ä¸ªæ¥å£åˆåŒ…å«äº†ä¸€äº›å­æ¥å£æˆ–å®ç°ç±»ã€‚</p> <div align="center"> <a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/5-1912051036333V.png" data-desc-position="bottom"><img src="!assets/JavaCollection/5-1912051036333V.png" alt="Collectionæ¥å£ç»“æ„" style="width:75%"></a> </div> <div align="center"> <a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/5-191205103G5960.png" data-desc-position="bottom"><img src="!assets/JavaCollection/5-191205103G5960.png" alt="Mapæ¥å£ç»“æ„" style="width:45%;"></a> </div> <p>é»„è‰²å—ä¸ºé›†åˆçš„æ¥å£ï¼Œè“è‰²å—ä¸ºé›†åˆçš„å®ç°ç±»ã€‚</p> <table> <thead> <tr> <th>æ¥å£åç§°</th> <th>ä½œ ç”¨</th> </tr> </thead> <tbody> <tr> <td>Iterator æ¥å£</td> <td>é›†åˆçš„è¾“å‡ºæ¥å£ï¼Œä¸»è¦ç”¨äºéå†è¾“å‡ºï¼ˆå³è¿­ä»£è®¿é—®ï¼‰Collection é›†åˆä¸­çš„å…ƒç´ ï¼ŒIterator å¯¹è±¡è¢«ç§°ä¹‹ä¸ºè¿­ä»£å™¨ã€‚è¿­ä»£å™¨æ¥å£æ˜¯é›†åˆæ¥å£çš„çˆ¶æ¥å£ï¼Œå®ç°ç±»å®ç° Collection æ—¶å°±å¿…é¡»å®ç° Iterator æ¥å£ã€‚</td> </tr> <tr> <td>Collection æ¥å£</td> <td>æ˜¯ Listã€Set å’Œ Queue çš„çˆ¶æ¥å£ï¼Œæ˜¯å­˜æ”¾ä¸€ç»„å•å€¼çš„æœ€å¤§æ¥å£ã€‚æ‰€è°“çš„å•å€¼æ˜¯æŒ‡é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ä¸€èˆ¬å¾ˆå°‘ç›´æ¥ä½¿ç”¨æ­¤æ¥å£ç›´æ¥æ“ä½œã€‚</td> </tr> <tr> <td>Queue æ¥å£</td> <td>Queue æ˜¯ Java æä¾›çš„é˜Ÿåˆ—å®ç°ï¼Œæœ‰ç‚¹ç±»ä¼¼äº Listã€‚</td> </tr> <tr> <td>Dueue æ¥å£</td> <td>æ˜¯ Queue çš„ä¸€ä¸ªå­æ¥å£ï¼Œä¸ºåŒå‘é˜Ÿåˆ—ã€‚</td> </tr> <tr> <td>List æ¥å£</td> <td>æ˜¯æœ€å¸¸ç”¨çš„æ¥å£ã€‚æ˜¯æœ‰åºé›†åˆï¼Œå…è®¸æœ‰ç›¸åŒçš„å…ƒç´ ã€‚ä½¿ç”¨ List èƒ½å¤Ÿç²¾ç¡®åœ°æ§åˆ¶æ¯ä¸ªå…ƒç´ æ’å…¥çš„ä½ç½®ï¼Œç”¨æˆ·èƒ½å¤Ÿä½¿ç”¨ç´¢å¼•ï¼ˆå…ƒç´ åœ¨ List ä¸­çš„ä½ç½®ï¼Œç±»ä¼¼äºæ•°ç»„ä¸‹æ ‡ï¼‰æ¥è®¿é—® List ä¸­çš„å…ƒç´ ï¼Œä¸æ•°ç»„ç±»ä¼¼ã€‚</td> </tr> <tr> <td>Set æ¥å£</td> <td>ä¸èƒ½åŒ…å«é‡å¤çš„å…ƒç´ ã€‚</td> </tr> <tr> <td>Map æ¥å£</td> <td>æ˜¯å­˜æ”¾ä¸€å¯¹å€¼çš„æœ€å¤§æ¥å£ï¼Œå³æ¥å£ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€å¯¹ï¼Œä»¥ keyâ¡value çš„å½¢å¼ä¿å­˜ã€‚</td> </tr> </tbody> </table> <p>å¯¹äº Setã€Listã€Queue å’Œ Map è¿™ 4 ç§é›†åˆï¼ŒJava æœ€å¸¸ç”¨çš„å®ç°ç±»åˆ†åˆ«æ˜¯ HashSetã€TreeSetã€ArrayListã€ArrayDueueã€LinkedList å’Œ HashMapã€TreeMap ç­‰ã€‚</p> <table> <thead> <tr> <th>ç±»åç§°</th> <th>ä½œç”¨</th> </tr> </thead> <tbody> <tr> <td>HashSet</td> <td>ä¸ºä¼˜åŒ–æŸ»è¯¢é€Ÿåº¦è€Œè®¾è®¡çš„ Setã€‚å®ƒæ˜¯åŸºäº HashMap å®ç°çš„ï¼ŒHashSet åº•å±‚ä½¿ç”¨ HashMap æ¥ä¿å­˜æ‰€æœ‰å…ƒç´ ï¼Œå®ç°æ¯”è¾ƒç®€å•</td> </tr> <tr> <td>TreeSet</td> <td>å®ç°äº† Set æ¥å£ï¼Œæ˜¯ä¸€ä¸ªæœ‰åºçš„ Setï¼Œè¿™æ ·å°±èƒ½ä» Set é‡Œé¢æå–ä¸€ä¸ªæœ‰åºåºåˆ—</td> </tr> <tr> <td>ArrayList</td> <td>ä¸€ä¸ªç”¨æ•°ç»„å®ç°çš„ Listï¼Œèƒ½è¿›è¡Œå¿«é€Ÿçš„éšæœºè®¿é—®ï¼Œæ•ˆç‡é«˜è€Œä¸”å®ç°äº†å¯å˜å¤§å°çš„æ•°ç»„</td> </tr> <tr> <td>ArrayDueue</td> <td>æ˜¯ä¸€ä¸ªåŸºäºæ•°ç»„å®ç°çš„åŒç«¯é˜Ÿåˆ—ï¼ŒæŒ‰â€œå…ˆè¿›å…ˆå‡ºâ€çš„æ–¹å¼æ“ä½œé›†åˆå…ƒç´ </td> </tr> <tr> <td>LinkedList</td> <td>å¯¹é¡ºåºè®¿é—®è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä½†éšæœºè®¿é—®çš„é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ã€‚æ­¤å¤–å®ƒè¿˜æœ‰ addFirst()ã€addLast()ã€getFirst()ã€getLast()ã€removeFirst() å’Œ removeLast() ç­‰æ–¹æ³•ï¼Œèƒ½æŠŠå®ƒå½“æˆæ ˆï¼ˆStackï¼‰æˆ–é˜Ÿåˆ—ï¼ˆQueueï¼‰æ¥ç”¨</td> </tr> <tr> <td>HsahMap</td> <td>æŒ‰å“ˆå¸Œç®—æ³•æ¥å­˜å–é”®å¯¹è±¡</td> </tr> <tr> <td>TreeMap</td> <td>å¯ä»¥å¯¹é”®å¯¹è±¡è¿›è¡Œæ’åº</td> </tr> </tbody> </table> <h2 id="92collection-æ¥å£">9.2ã€Collection æ¥å£<a class="headerlink" href="#92collection-æ¥å£" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>==Collection æ¥å£æ˜¯ Listã€Set å’Œ Queue æ¥å£çš„çˆ¶æ¥å£ï¼Œé€šå¸¸æƒ…å†µä¸‹ä¸è¢«ç›´æ¥ä½¿ç”¨ã€‚==Collection æ¥å£å®šä¹‰äº†ä¸€äº›é€šç”¨çš„æ–¹æ³•ï¼Œé€šè¿‡è¿™äº›æ–¹æ³•å¯ä»¥å®ç°å¯¹é›†åˆçš„åŸºæœ¬æ“ä½œã€‚å®šä¹‰çš„æ–¹æ³•æ—¢å¯ç”¨äºæ“ä½œ Set é›†åˆï¼Œä¹Ÿå¯ç”¨äºæ“ä½œ List å’Œ Queue é›†åˆã€‚</p> <p>Collectionæ¥å£çš„å¸¸ç”¨æ–¹æ³•</p> <table> <thead> <tr> <th>æ–¹æ³•åç§°</th> <th>è¯´æ˜</th> </tr> </thead> <tbody> <tr> <td>boolean add(E e)</td> <td>å‘é›†åˆä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœé›†åˆå¯¹è±¡è¢«æ·»åŠ æ“ä½œæ”¹å˜äº†ï¼Œåˆ™è¿”å› trueã€‚E æ˜¯å…ƒç´ çš„æ•°æ®ç±»å‹</td> </tr> <tr> <td>boolean addAll(Collection c)</td> <td>å‘é›†åˆä¸­æ·»åŠ é›†åˆ c ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œå¦‚æœé›†åˆå¯¹è±¡è¢«æ·»åŠ æ“ä½œæ”¹å˜äº†ï¼Œåˆ™è¿”å› trueã€‚</td> </tr> <tr> <td>void clear()</td> <td>æ¸…é™¤é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œå°†é›†åˆé•¿åº¦å˜ä¸º 0ã€‚</td> </tr> <tr> <td>boolean contains(Object o)</td> <td>åˆ¤æ–­é›†åˆä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šå…ƒç´ </td> </tr> <tr> <td>boolean containsAll(Collection c)</td> <td>åˆ¤æ–­é›†åˆä¸­æ˜¯å¦åŒ…å«é›†åˆ c ä¸­çš„æ‰€æœ‰å…ƒç´ </td> </tr> <tr> <td>boolean isEmpty()</td> <td>åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º</td> </tr> <tr> <td>Iterator<e>iterator()</e></td> <td>è¿”å›ä¸€ä¸ª Iterator å¯¹è±¡ï¼Œç”¨äºéå†é›†åˆä¸­çš„å…ƒç´ </td> </tr> <tr> <td>boolean remove(Object o)</td> <td>ä»é›†åˆä¸­åˆ é™¤ä¸€ä¸ªæŒ‡å®šå…ƒç´ ï¼Œå½“é›†åˆä¸­åŒ…å«äº†ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´  o æ—¶ï¼Œè¯¥æ–¹æ³•åªåˆ é™¤ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œè¯¥æ–¹æ³•å°†è¿”å› trueã€‚</td> </tr> <tr> <td>boolean removeAll(Collection c)</td> <td>ä»é›†åˆä¸­åˆ é™¤æ‰€æœ‰åœ¨é›†åˆ c ä¸­å‡ºç°çš„å…ƒç´ ï¼ˆç›¸å½“äºæŠŠè°ƒç”¨è¯¥æ–¹æ³•çš„é›†åˆå‡å»é›†åˆ cï¼‰ã€‚å¦‚æœè¯¥æ“ä½œæ”¹å˜äº†è°ƒç”¨è¯¥æ–¹æ³•çš„é›†åˆï¼Œåˆ™è¯¥æ–¹æ³•è¿”å› trueã€‚</td> </tr> <tr> <td>boolean retainAll(Collection c)</td> <td>ä»é›†åˆä¸­åˆ é™¤é›†åˆ c é‡Œä¸åŒ…å«çš„å…ƒç´ ï¼ˆç›¸å½“äºæŠŠè°ƒç”¨è¯¥æ–¹æ³•çš„é›†åˆå˜æˆè¯¥é›†åˆå’Œé›†åˆ c çš„äº¤é›†ï¼‰ï¼Œå¦‚æœè¯¥æ“ä½œæ”¹å˜äº†è°ƒç”¨è¯¥æ–¹æ³•çš„é›†åˆï¼Œåˆ™è¯¥æ–¹æ³•è¿”å› trueã€‚</td> </tr> <tr> <td>int size()</td> <td>è¿”å›é›†åˆä¸­å…ƒç´ çš„ä¸ªæ•°</td> </tr> <tr> <td>Object[] toArray()</td> <td>æŠŠé›†åˆè½¬æ¢ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œæ‰€æœ‰çš„é›†åˆå…ƒç´ å˜æˆå¯¹åº”çš„æ•°ç»„å…ƒç´ ã€‚</td> </tr> </tbody> </table> <p>æœ¬æ¡ˆä¾‹å°†ç¼–å†™ä¸€ä¸ªç®€å•çš„ç¨‹åºï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ Collection æ¥å£å‘é›†åˆä¸­æ·»åŠ æ–¹æ³•ã€‚å…·ä½“å®ç°ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="n">ArrayList</span><span class="w"> </span><span class="n">list1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="p">();</span><span class="w"> </span><span class="c1">// åˆ›å»ºé›†åˆ list1</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="n">ArrayList</span><span class="w"> </span><span class="n">list2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="p">();</span><span class="w"> </span><span class="c1">// åˆ›å»ºé›†åˆ list2</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="n">list1</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"one"</span><span class="p">);</span><span class="w"> </span><span class="c1">// å‘ list1 æ·»åŠ ä¸€ä¸ªå…ƒç´ </span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="n">list1</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"two"</span><span class="p">);</span><span class="w"> </span><span class="c1">// å‘ list1 æ·»åŠ ä¸€ä¸ªå…ƒç´ </span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="n">list2</span><span class="p">.</span><span class="na">addAll</span><span class="p">(</span><span class="n">list1</span><span class="p">);</span><span class="w"> </span><span class="c1">// å°† list1 çš„æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ° list2</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="n">list2</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"three"</span><span class="p">);</span><span class="w"> </span><span class="c1">// å‘ list2 æ·»åŠ ä¸€ä¸ªå…ƒç´ </span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"list2 é›†åˆä¸­çš„å…ƒç´ å¦‚ä¸‹ï¼š"</span><span class="p">);</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">    </span><span class="n">Iterator</span><span class="w"> </span><span class="n">it1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list2</span><span class="p">.</span><span class="na">iterator</span><span class="p">();</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">it1</span><span class="p">.</span><span class="na">hasNext</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">it1</span><span class="p">.</span><span class="na">next</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"ã€"</span><span class="p">);</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="p">}</span>
</span></code></pre></div> <p>ç”±äº Collection æ˜¯æ¥å£ï¼Œä¸èƒ½å¯¹å…¶å®ä¾‹åŒ–ï¼Œæ‰€ä»¥ä¸Šè¿°ä»£ç ä¸­ä½¿ç”¨äº† Collection æ¥å£çš„ ArrayList å®ç°ç±»æ¥è°ƒç”¨ Collection çš„æ–¹æ³•ã€‚add() æ–¹æ³•å¯ä»¥å‘ Collection ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œè€Œè°ƒç”¨ addAll() æ–¹æ³•å¯ä»¥å°†æŒ‡å®š Collection ä¸­çš„æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°å¦ä¸€ä¸ª Collection ä¸­ã€‚</p> <p>ä»£ç åˆ›å»ºäº†ä¸¤ä¸ªé›†åˆ list1 å’Œ list2ï¼Œç„¶åè°ƒç”¨ add() æ–¹æ³•å‘ list1 ä¸­æ·»åŠ äº†ä¸¤ä¸ªå…ƒç´ ï¼Œå†è°ƒç”¨ addAll() æ–¹æ³•å°†è¿™ä¸¤ä¸ªå…ƒç´ æ·»åŠ åˆ° list2 ä¸­ã€‚æ¥ä¸‹æ¥åˆå‘ list2 ä¸­æ·»åŠ äº†ä¸€ä¸ªå…ƒç´ ï¼Œæœ€åè¾“å‡º list2 é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œç»“æœå¦‚ä¸‹ï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>list2 é›†åˆä¸­çš„å…ƒç´ å¦‚ä¸‹ï¼š
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>oneã€twoã€threeã€
</span></code></pre></div> <p>åˆ›å»ºä¸€ä¸ªæ¡ˆä¾‹ï¼Œæ¼”ç¤º Collection é›†åˆä¸­ size()ã€remove() å’Œ removeAll() æ–¹æ³•çš„åº”ç”¨ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="n">ArrayList</span><span class="w"> </span><span class="n">list1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="p">();</span><span class="w"> </span><span class="c1">// åˆ›å»ºé›†åˆ list1</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="n">ArrayList</span><span class="w"> </span><span class="n">list2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="p">();</span><span class="w"> </span><span class="c1">// åˆ›å»ºé›†åˆ list2</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="n">list1</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"one"</span><span class="p">);</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span><span class="n">list1</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"two"</span><span class="p">);</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span><span class="n">list1</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"three"</span><span class="p">);</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"list1 é›†åˆä¸­çš„å…ƒç´ æ•°é‡ï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">list1</span><span class="p">.</span><span class="na">size</span><span class="p">());</span><span class="w"> </span><span class="c1">// è¾“å‡ºlist1ä¸­çš„å…ƒç´ æ•°é‡</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">    </span><span class="n">list2</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"two"</span><span class="p">);</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span><span class="n">list2</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"four"</span><span class="p">);</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">    </span><span class="n">list2</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"six"</span><span class="p">);</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"list2 é›†åˆä¸­çš„å…ƒç´ æ•°é‡ï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">list2</span><span class="p">.</span><span class="na">size</span><span class="p">());</span><span class="w"> </span><span class="c1">// è¾“å‡ºlist2ä¸­çš„å…ƒç´ æ•°é‡</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">    </span><span class="n">list2</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w"> </span><span class="c1">// åˆ é™¤ç¬¬ 3 ä¸ªå…ƒç´ </span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"\nremoveAll() æ–¹æ³•ä¹‹å list2 é›†åˆä¸­çš„å…ƒç´ æ•°é‡ï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">list2</span><span class="p">.</span><span class="na">size</span><span class="p">());</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"list2 é›†åˆä¸­çš„å…ƒç´ å¦‚ä¸‹ï¼š"</span><span class="p">);</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">    </span><span class="n">Iterator</span><span class="w"> </span><span class="n">it1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list2</span><span class="p">.</span><span class="na">iterator</span><span class="p">();</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">it1</span><span class="p">.</span><span class="na">hasNext</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">it1</span><span class="p">.</span><span class="na">next</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"ã€"</span><span class="p">);</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="w">    </span><span class="n">list1</span><span class="p">.</span><span class="na">removeAll</span><span class="p">(</span><span class="n">list2</span><span class="p">);</span>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"\nremoveAll() æ–¹æ³•ä¹‹å list1 é›†åˆä¸­çš„å…ƒç´ æ•°é‡ï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">list1</span><span class="p">.</span><span class="na">size</span><span class="p">());</span>
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"list1 é›†åˆä¸­çš„å…ƒç´ å¦‚ä¸‹ï¼š"</span><span class="p">);</span>
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="w">    </span><span class="n">Iterator</span><span class="w"> </span><span class="n">it2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list1</span><span class="p">.</span><span class="na">iterator</span><span class="p">();</span>
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">it2</span><span class="p">.</span><span class="na">hasNext</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">it2</span><span class="p">.</span><span class="na">next</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"ã€"</span><span class="p">);</span>
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a><span class="p">}</span>
</span></code></pre></div> <p>list2 é›†åˆåœ¨è°ƒç”¨ remove(2) æ–¹æ³•åˆ é™¤ç¬¬ 3 ä¸ªå…ƒç´ ä¹‹åå‰©ä¸‹äº† two å’Œ fourã€‚list1.removeAll(list2) è¯­å¥ä¼šä» list1 ä¸­å°† list1 å’Œ list2 ä¸­ç›¸åŒçš„å…ƒç´ åˆ é™¤ï¼Œå³åˆ é™¤ two å…ƒç´ ã€‚æœ€åè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>list1 é›†åˆä¸­çš„å…ƒç´ æ•°é‡ï¼š3
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>list2 é›†åˆä¸­çš„å…ƒç´ æ•°é‡ï¼š3
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>removeAll() æ–¹æ³•ä¹‹å list2 é›†åˆä¸­çš„å…ƒç´ æ•°é‡ï¼š2
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>list2 é›†åˆä¸­çš„å…ƒç´ å¦‚ä¸‹ï¼š
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>twoã€fourã€
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>removeAll() æ–¹æ³•ä¹‹å list1 é›†åˆä¸­çš„å…ƒç´ æ•°é‡ï¼š2
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>list1 é›†åˆä¸­çš„å…ƒç´ å¦‚ä¸‹ï¼š
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>oneã€threeã€
</span></code></pre></div> <p><mark>æ³¨æ„ï¼šretainAll( ) æ–¹æ³•çš„ä½œç”¨ä¸ removeAll( ) æ–¹æ³•ç›¸åï¼Œå³ä¿ç•™ä¸¤ä¸ªé›†åˆä¸­ç›¸åŒçš„å…ƒç´ ï¼Œå…¶ä»–å…¨éƒ¨åˆ é™¤ã€‚</mark></p> <h2 id="93listé›†åˆ">9.3ã€Listé›†åˆ<a class="headerlink" href="#93listé›†åˆ" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>List æ˜¯ä¸€ä¸ª==æœ‰åºã€å¯é‡å¤çš„é›†åˆï¼Œ==é›†åˆä¸­æ¯ä¸ªå…ƒç´ éƒ½æœ‰å…¶å¯¹åº”çš„é¡ºåºç´¢å¼•ã€‚List é›†åˆå…è®¸ä½¿ç”¨é‡å¤å…ƒç´ ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•æ¥è®¿é—®æŒ‡å®šä½ç½®çš„é›†åˆå…ƒç´ ã€‚List é›†åˆé»˜è®¤æŒ‰å…ƒç´ çš„æ·»åŠ é¡ºåºè®¾ç½®å…ƒç´ çš„ç´¢å¼•ï¼Œç¬¬ä¸€ä¸ªæ·»åŠ åˆ° List é›†åˆä¸­çš„å…ƒç´ çš„ç´¢å¼•ä¸º 0ï¼Œç¬¬äºŒä¸ªä¸º 1ï¼Œä¾æ­¤ç±»æ¨ã€‚</p> <p>List <mark>å®ç°äº† Collection æ¥å£ï¼Œ==å®ƒä¸»è¦æœ‰ä¸¤ä¸ªå¸¸ç”¨çš„å®ç°ç±»ï¼š==ArrayList ç±»å’Œ LinkedList ç±»ã€‚</mark></p> <p>æ•°ç»„å’Œ List è½¬æ¢</p> <ul> <li> <p>List è½¬æ¢ä¸ºæ•°ç»„ï¼š</p> <blockquote> <p>è°ƒç”¨ ArrayListçš„ toArray() æ–¹æ³•</p> </blockquote> </li> <li> <p>æ•°ç»„è½¬æ¢ä¸º Listï¼š</p> <blockquote> <p>è°ƒç”¨ Arrays çš„ asList() æ–¹æ³•</p> </blockquote> </li> </ul> <h4 id="931arraylist-ç±»">9.3.1ã€ArrayList ç±»<a class="headerlink" href="#931arraylist-ç±»" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p>==ArrayList ç±»å®ç°äº†å¯å˜æ•°ç»„çš„å¤§å°ï¼Œ==å­˜å‚¨åœ¨å†…çš„æ•°æ®ç§°ä¸ºå…ƒç´ ã€‚å®ƒè¿˜==æä¾›äº†å¿«é€ŸåŸºäºç´¢å¼•è®¿é—®å…ƒç´ çš„æ–¹å¼ï¼Œå¯¹å°¾éƒ¨æˆå‘˜çš„å¢åŠ å’Œåˆ é™¤æ”¯æŒè¾ƒå¥½ã€‚==ä½¿ç”¨ ArrayList åˆ›å»ºçš„é›†åˆï¼Œå…è®¸å¯¹é›†åˆä¸­çš„å…ƒç´ è¿›è¡Œå¿«é€Ÿçš„éšæœºè®¿é—®ï¼Œä¸è¿‡ï¼Œå‘ ArrayList ä¸­æ’å…¥ä¸åˆ é™¤å…ƒç´ çš„é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ã€‚</p> <p>ç‰¹ç‚¹ï¼šæŸ¥è¯¢æ•ˆç‡é«˜ï¼Œå¢åˆ æ•ˆç‡ä½ï¼Œçº¿ç¨‹ä¸å®‰å…¨ã€‚ä½¿ç”¨é¢‘ç‡å¾ˆé«˜ã€‚</p> <p>ArrayList ç±»çš„å¸¸ç”¨æ„é€ æ–¹æ³•æœ‰å¦‚ä¸‹ä¸¤ç§é‡è½½å½¢å¼ï¼š</p> <ul> <li>ArrayList()ï¼šæ„é€ ä¸€ä¸ªçš„ç©ºåˆ—è¡¨ã€‚</li> <li>ArrayList(Collection&lt;?extends E&gt;c)ï¼šæ„é€ ä¸€ä¸ªåŒ…å«æŒ‡å®š Collection å…ƒç´ çš„åˆ—è¡¨ï¼Œè¿™äº›å…ƒç´ æ˜¯æŒ‰ç…§è¯¥ Collection çš„è¿­ä»£å™¨è¿”å›å®ƒä»¬çš„é¡ºåºæ’åˆ—çš„ã€‚</li> </ul> <p>ArrayList ç±»é™¤äº†åŒ…å« Collection æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜åŒ…æ‹¬ List æ¥å£ä¸­æä¾›çš„å¦‚ä¸‹è¡¨æ‰€ç¤ºçš„æ–¹æ³•ã€‚</p> <table> <thead> <tr> <th>æ–¹æ³•åç§°</th> <th>è¯´æ˜</th> </tr> </thead> <tbody> <tr> <td>E get(int index)</td> <td>è·å–æ­¤é›†åˆä¸­æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ ï¼ŒE ä¸ºé›†åˆä¸­å…ƒç´ çš„æ•°æ®ç±»å‹</td> </tr> <tr> <td>int indexOf(Object o)</td> <td>è¿”å›æ­¤é›†åˆä¸­ç¬¬ä¸€æ¬¡å‡ºç°æŒ‡å®šå…ƒç´ çš„ç´¢å¼•ï¼Œå¦‚æœæ­¤é›†åˆä¸åŒ…å«è¯¥å…ƒ ç´ ï¼Œåˆ™è¿”å› -1</td> </tr> <tr> <td>int lastIndexOf(Object o)</td> <td>è¿”å›æ­¤é›†åˆä¸­æœ€åä¸€æ¬¡å‡ºç°æŒ‡å®šå…ƒç´ çš„ç´¢å¼•ï¼Œå¦‚æœæ­¤é›†åˆä¸åŒ…å«è¯¥ å…ƒç´ ï¼Œåˆ™è¿”å› -1</td> </tr> <tr> <td>E set(int index, Eelement)</td> <td>å°†æ­¤é›†åˆä¸­æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ ä¿®æ”¹ä¸º element å‚æ•°æŒ‡å®šçš„å¯¹è±¡ã€‚ æ­¤æ–¹æ³•è¿”å›æ­¤é›†åˆä¸­æŒ‡å®šç´¢å¼•ä½ç½®çš„åŸå…ƒç´ </td> </tr> <tr> <td>List<e> subList(int fromlndex, int tolndex)</e></td> <td>è¿”å›ä¸€ä¸ªæ–°çš„é›†åˆï¼Œæ–°é›†åˆä¸­åŒ…å« fromlndex å’Œ tolndex ç´¢å¼•ä¹‹é—´ çš„æ‰€æœ‰å…ƒç´ ã€‚åŒ…å« fromlndex å¤„çš„å…ƒç´ ï¼Œä¸åŒ…å« tolndex ç´¢å¼•å¤„çš„ å…ƒç´ </td> </tr> </tbody> </table> <p>æ³¨æ„ï¼šå½“è°ƒç”¨ List çš„ set(int index, Object element) æ–¹æ³•æ¥æ”¹å˜ List é›†åˆæŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ æ—¶ï¼ŒæŒ‡å®šçš„ç´¢å¼•å¿…é¡»æ˜¯ List é›†åˆçš„æœ‰æ•ˆç´¢å¼•ã€‚ä¾‹å¦‚é›†åˆé•¿åº¦ä¸º 4ï¼Œå°±ä¸èƒ½æŒ‡å®šæ›¿æ¢ç´¢å¼•ä¸º 4 å¤„çš„å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæ–¹æ³•ä¸ä¼šæ”¹å˜ List é›†åˆçš„é•¿åº¦ã€‚</p> <h5 id="åº•å±‚å®ç°">åº•å±‚å®ç°<a class="headerlink" href="#åº•å±‚å®ç°" title="é”šç‚¹é“¾æ¥">Â¶</a></h5> <p>ArrayListçš„ä¸»è¦åº•å±‚å®ç°æ˜¯æ•°ç»„Object[] elementDataï¼Œå¯ä»¥é€šè¿‡æ„é€ æ–¹æ³•åœ¨åˆå§‹åŒ–çš„æ—¶å€™æŒ‡å®šåº•å±‚æ•°ç»„çš„å¤§å°ã€‚</p> <p>é€šè¿‡æ— å‚æ„é€ æ–¹æ³•çš„æ–¹å¼ArrayList()åˆå§‹åŒ–ï¼Œåˆ™èµ‹å€¼åº•å±‚æ•°Object[] elementDataä¸ºä¸€ä¸ªé»˜è®¤ç©ºæ•°ç»„Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {}æ‰€ä»¥æ•°ç»„å®¹é‡ä¸º0ï¼Œåªæœ‰çœŸæ­£å¯¹æ•°æ®è¿›è¡Œæ·»åŠ addæ—¶ï¼Œæ‰åˆ†é…é»˜è®¤DEFAULT_CAPACITY = 10çš„åˆå§‹å®¹é‡ã€‚ä½†æ˜¯è¿™ä¸ªè¿™æ—¶å€™ç”¨size()æ–¹æ³•è·å¾—çš„é•¿åº¦è¿˜æ˜¯0ï¼Œsize()æ–¹æ³•æŒ‡çš„æ˜¯â€œé€»è¾‘â€é•¿åº¦ã€‚ æ‰€è°“â€œé€»è¾‘â€é•¿åº¦ï¼Œæ˜¯æŒ‡å†…å­˜å·²å­˜åœ¨çš„â€œå®é™…å…ƒç´ çš„é•¿åº¦â€ è€Œâ€œç©ºå…ƒç´ ä¸è¢«è®¡ç®—â€ï¼Œå³ï¼šå½“åˆ©ç”¨add()æ–¹æ³•ï¼Œå‘ArrayListå†…æ·»åŠ ä¸€ä¸ªâ€œå…ƒç´ â€æ—¶ï¼Œé€»è¾‘é•¿åº¦å°±å¢åŠ 1ä½ã€‚ è€Œå‰©ä¸‹çš„9ä¸ªç©ºå…ƒç´ ä¸è¢«è®¡ç®—ã€‚</p> <p>å¦‚ä¸‹æ˜¯ArrayListçš„æ— å‚æ„é€ å™¨å’Œæœ‰å‚æ„é€ å™¨ï¼Œæ— å‚æ˜¯é»˜è®¤å¤§å°ï¼Œæœ‰å‚ä¼šåˆ¤æ–­å‚æ•°ï¼š</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/image-20200527112128261.png" data-desc-position="bottom"><img src="!assets/JavaCollection/image-20200527112128261.png" alt="image-20200527112128261" style="zoom:80%;"></a></p> <h5 id="æ‰©å®¹">æ‰©å®¹<a class="headerlink" href="#æ‰©å®¹" title="é”šç‚¹é“¾æ¥">Â¶</a></h5> <p>å°±æ¯”å¦‚ç°åœ¨æœ‰ä¸€ä¸ªé•¿åº¦ä¸º10çš„æ•°ç»„ï¼Œç°åœ¨æˆ‘ä»¬è¦æ–°å¢ä¸€ä¸ªå…ƒç´ ï¼Œå‘ç°å·²ç»æ»¡äº†ï¼š</p> <div align="center"> <a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/275634327b031b1584201358e274914925d37e94.jpg@736w_134h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/275634327b031b1584201358e274914925d37e94.jpg@736w_134h.webp" alt="img" style="width:25%;"></a> </div> <p>ArrayListé¦–å…ˆä¼šé‡æ–°å®šä¹‰ä¸€ä¸ªé•¿åº¦ä¸º10+10/2çš„æ•°ç»„ä¹Ÿå°±æ˜¯æ–°å¢ä¸€ä¸ªé•¿åº¦ä¸º15çš„æ•°ç»„ï¼ˆæ‰©å®¹ä¸ºåŸå®¹é‡çš„1.5å€ï¼‰ã€‚</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/a80143a0d12474cf996899d2c6276464987e0893.jpg@1100w_148h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/a80143a0d12474cf996899d2c6276464987e0893.jpg@1100w_148h.webp" alt="img" style="zoom:80%;"></a></p> <p>ç„¶åæŠŠåŸæ•°ç»„çš„æ•°æ®ï¼ŒåŸå°ä¸åŠ¨çš„å¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ï¼Œè¿™ä¸ªæ—¶å€™å†æŠŠæŒ‡å‘åŸæ•°çš„åœ°å€æ¢åˆ°æ–°æ•°ç»„ï¼ŒArrayListå°±è¿™æ ·å®Œæˆäº†ä¸€æ¬¡æ”¹å¤´æ¢é¢ã€‚</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/d7ce4038e5f058d3ac423f329f74c7d27b2488b9.jpg@1320w_316h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/d7ce4038e5f058d3ac423f329f74c7d27b2488b9.jpg@1320w_316h.webp" alt="img" style="zoom:80%;"></a></p> <p>ArrayList1.7å’Œ1.8ç‰ˆæœ¬åˆå§‹åŒ–çš„æ—¶å€™çš„åŒºåˆ«ï¼šarrayList1.7å¼€å§‹å˜åŒ–æœ‰ç‚¹å¤§ï¼Œåˆå§‹åŒ–çš„æ—¶å€™ï¼Œ1.7ä»¥å‰ä¼šè°ƒç”¨this(10)æ‰æ˜¯çœŸæ­£çš„å®¹é‡ä¸º10ï¼Œ1.7å³æœ¬èº«ä»¥åæ˜¯é»˜è®¤èµ°äº†ç©ºæ•°ç»„ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡addçš„æ—¶å€™å®¹é‡ä¼šå˜æˆ10ã€‚</p> <p>ä¸ºä»€ä¹ˆæ˜¯10ï¼šæ—¥å¸¸å¼€å‘ä¸­æ¶‰åŠåˆ°åˆ†é¡µæŸ¥è¯¢ä¸€èˆ¬æŸ¥è¯¢ä¸º 10æ¡æ•°æ®ï¼ˆæˆ‘è§‰å¾—ï¼‰ã€‚</p> <h5 id="å¢åˆ ">å¢åˆ <a class="headerlink" href="#å¢åˆ " title="é”šç‚¹é“¾æ¥">Â¶</a></h5> <p>ArrayList æœ‰æŒ‡å®š index æ–°å¢ï¼Œä¹Ÿæœ‰ç›´æ¥æ–°å¢çš„ï¼Œåœ¨è¿™ä¹‹å‰ä»–ä¼šæœ‰ä¸€æ­¥æ ¡éªŒé•¿åº¦çš„åˆ¤æ–­ <strong>ensureCapacityInternal</strong>ï¼Œå°±æ˜¯è¯´å¦‚æœé•¿åº¦ä¸å¤Ÿï¼Œæ˜¯éœ€è¦æ‰©å®¹çš„ã€‚</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/9179f122016d2d3b76c8ee703944d13a624f7c51.jpg@1320w_448h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/9179f122016d2d3b76c8ee703944d13a624f7c51.jpg@1320w_448h.webp" alt="img" style="zoom: 50%;"></a></p> <p>åœ¨æ‰©å®¹çš„æ—¶å€™ï¼Œè€ç‰ˆæœ¬çš„jdkå’Œ8ä»¥åçš„ç‰ˆæœ¬æ˜¯æœ‰åŒºåˆ«çš„ï¼Œ8ä¹‹åçš„æ•ˆç‡æ›´é«˜äº†ï¼Œé‡‡ç”¨äº†ä½è¿ç®—ï¼Œ<strong>å³ç§»</strong>ä¸€ä½ï¼Œå…¶å®å°±æ˜¯é™¤ä»¥2è¿™ä¸ªæ“ä½œã€‚1.7çš„æ—¶å€™3/2+1 ï¼Œ1.8ç›´æ¥å°±æ˜¯3/2ã€‚</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/339bb81136b5ac2424d1bf475c291a5bd3b0fcb3.jpg@1320w_734h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/339bb81136b5ac2424d1bf475c291a5bd3b0fcb3.jpg@1320w_734h.webp" alt="img" style="zoom: 50%;"></a></p> <p>æŒ‡å®šä½ç½®æ–°å¢çš„æ—¶å€™ï¼Œåœ¨æ ¡éªŒä¹‹åçš„æ“ä½œå¾ˆç®€å•ï¼Œå°±æ˜¯æ•°ç»„çš„copyã€‚</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/49334f7c56b0ceaf5afaac14c606efc4ed9b57d2.jpg@1320w_718h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/49334f7c56b0ceaf5afaac14c606efc4ed9b57d2.jpg@1320w_718h.webp" alt="img" style="zoom:50%;"></a></p> <p>æ¯”å¦‚æœ‰ä¸‹é¢è¿™æ ·ä¸€ä¸ªæ•°ç»„éœ€è¦åœ¨index 5çš„ä½ç½®å»æ–°å¢ä¸€ä¸ªå…ƒç´ Aã€‚</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/b7977e1108aed0662432ec5beb125a4418f1c316.jpg@750w_132h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/b7977e1108aed0662432ec5beb125a4418f1c316.jpg@750w_132h.webp" alt="img" style="zoom:67%;"></a></p> <p>ä»ä»£ç é‡Œé¢å¯ä»¥çœ‹åˆ°ï¼Œä»–å¤åˆ¶äº†ä¸€ä¸ªæ•°ç»„ï¼Œæ˜¯ä»index 5çš„ä½ç½®å¼€å§‹çš„ï¼Œç„¶åæŠŠå®ƒæ”¾åœ¨äº†index 5+1çš„ä½ç½®ã€‚</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/78f720c8f8c9e39997b2b16258f48e4781b747b8.jpg@746w_292h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/78f720c8f8c9e39997b2b16258f48e4781b747b8.jpg@746w_292h.webp" alt="img" style="zoom:67%;"></a></p> <p>ç»™è¦æ–°å¢çš„å…ƒç´ è…¾å‡ºäº†ä½ç½®ï¼Œç„¶ååœ¨indexçš„ä½ç½®æ”¾å…¥å…ƒç´ Aå°±å®Œæˆäº†æ–°å¢çš„æ“ä½œäº†ã€‚</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/fdae2991e37e9199b3d50d51b388cca9bde53fe8.jpg@746w_294h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/fdae2991e37e9199b3d50d51b388cca9bde53fe8.jpg@746w_294h.webp" alt="img" style="zoom:67%;"></a></p> <p>ä¸ºå•¥æ•ˆç‡ä½ï¼Œè¿™åªæ˜¯åœ¨ä¸€ä¸ªè¿™ä¹ˆå°çš„Listé‡Œé¢æ“ä½œï¼Œè¦æ˜¯æˆ‘å»ä¸€ä¸ªå‡ ç™¾å‡ åƒå‡ ä¸‡å¤§å°çš„Listæ–°å¢ä¸€ä¸ªå…ƒç´ ï¼Œé‚£å°±éœ€è¦åé¢æ‰€æœ‰çš„å…ƒç´ éƒ½å¤åˆ¶ï¼Œç„¶åå¦‚æœå†æ¶‰åŠåˆ°æ‰©å®¹å•¥çš„å°±æ›´æ…¢äº†ã€‚</p> <p>åˆ é™¤å…¶å®è·Ÿæ–°å¢æ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡å«æ˜¯å«åˆ é™¤ï¼Œä½†æ˜¯åœ¨ä»£ç é‡Œé¢å‘ç°ï¼Œä»–è¿˜æ˜¯åœ¨copyä¸€ä¸ªæ•°ç»„ã€‚</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/3fcf7803d359d9e99afbcc287da5b42873b91499.jpg@1320w_914h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/3fcf7803d359d9e99afbcc287da5b42873b91499.jpg@1320w_914h.webp" alt="img" style="zoom: 50%;"></a></p> <p>ç»§ç»­æ‰“ä¸ªæ¯”æ–¹ï¼Œç°åœ¨è¦åˆ é™¤ä¸‹é¢è¿™ä¸ªæ•°ç»„ä¸­çš„index5è¿™ä¸ªä½ç½®ï¼Œé‚£ä»£ç ä»–å°±å¤åˆ¶ä¸€ä¸ªindex5+1å¼€å§‹åˆ°æœ€åçš„æ•°ç»„ï¼Œç„¶åæŠŠå®ƒæ”¾åˆ°indexå¼€å§‹çš„ä½ç½®ï¼Œindex5çš„ä½ç½®å°±æˆåŠŸè¢«â€åˆ é™¤â€œäº†å…¶å®å°±æ˜¯è¢«è¦†ç›–äº†ï¼Œç»™äº†ä½ è¢«åˆ é™¤çš„æ„Ÿè§‰ã€‚åŒç†ä»–çš„æ•ˆç‡ä¹Ÿä½ï¼Œå› ä¸ºæ•°ç»„å¦‚æœå¾ˆå¤§çš„è¯ï¼Œä¸€æ ·éœ€è¦å¤åˆ¶å’Œç§»åŠ¨çš„ä½ç½®å°±å¤§äº†ã€‚</p> <p><mark>åˆ é™¤é€Ÿåº¦å–å†³äºåˆ é™¤çš„å…ƒç´ ç¦»æ•°ç»„æœ«ç«¯æœ‰å¤šè¿œï¼ŒArrayList æ‹¿æ¥ä½œä¸ºå †æ ˆæ¥ç”¨è¿˜æ˜¯æŒºåˆé€‚çš„ï¼Œpush å’Œ pop æ“ä½œå®Œå…¨ä¸æ¶‰åŠæ•°æ®ç§»åŠ¨æ“ä½œã€‚</mark></p> <hr> <p><mark>ArrayListä¸é€‚åˆä½œä¸ºé˜Ÿåˆ—ä½¿ç”¨</mark></p> <p>é˜Ÿåˆ—ä¸€èˆ¬æ˜¯FIFOï¼ˆå…ˆå…¥å…ˆå‡ºï¼‰çš„ï¼Œå¦‚æœç”¨ ArrayList åšé˜Ÿåˆ—ï¼Œå°±éœ€è¦åœ¨æ•°ç»„å°¾éƒ¨è¿½åŠ æ•°æ®ï¼Œæ•°ç»„å¤´éƒ¨åˆ é™¤æ•°ç»„ï¼Œåè¿‡æ¥ä¹Ÿå¯ä»¥ã€‚ä½†æ˜¯æ— è®ºå¦‚ä½•æ€»ä¼šæœ‰ä¸€ä¸ªæ“ä½œä¼šæ¶‰åŠåˆ°æ•°ç»„çš„æ•°æ®æ¬è¿ï¼Œè¿™ä¸ªæ˜¯æ¯”è¾ƒè€—è´¹æ€§èƒ½çš„ã€‚æ‰€ä»¥ä¸é€‚åˆï¼</p> <p>å…ˆè¿›å…ˆå‡ºå’Œåè¿›å…ˆå‡ºï¼š</p> <p>æ ˆçš„æ¦‚å¿µæ˜¯å¼¹å‹ï¼Œå°±åƒå­å¼¹å£³è£…å¼¹ï¼Œä¸€ç²’ä¸€ç²’å‹è¿›å»ï¼Œä½†æ˜¯æ‰“å‡ºæ¥çš„æ—¶å€™æ˜¯ä»ä¸Šé¢æ‰“å‡ºæ¥çš„ï¼Œæœ€å…ˆå‹è¿›å»çš„æœ€é“åå¼¹å‡ºæ¥ï¼Œå¦‚æœè¿›å»é¡ºåºæ˜¯123ï¼Œæ‰“å‡ºæ¥é¡ºåºæ˜¯321ï¼Œè¿™å°±æ˜¯åè¿›å…ˆå‡ºã€‚</p> <p>é˜Ÿåˆ—çš„æ¦‚å†…å¿µå°±æ˜¯æˆ‘ä»¬å¹³æ—¶æ’é˜Ÿï¼ŒæŒ‰æ¬¡åºæ¥ï¼Œä½ æ’åœ¨ç¬¬1ä¸ªï¼Œé‚£ä½ å°±ç¬¬ä¸€ä¸ªè½®åˆ°ï¼Œè¿™å°±æ˜¯å…ˆè¿›å…ˆå‡ºã€‚</p> <h5 id="åˆå§‹åŒ–">åˆå§‹åŒ–<a class="headerlink" href="#åˆå§‹åŒ–" title="é”šç‚¹é“¾æ¥">Â¶</a></h5> <p>==ArrayListï¼ˆint initialCapacityï¼‰ä¼šåˆå§‹åŒ–æ•°ç»„å¤§å°ï¼==ä½†æ˜¯Listçš„å¤§å°æ²¡æœ‰å˜ï¼Œå› ä¸ºlistçš„å¤§å°æ˜¯è¿”å›sizeçš„ï¼è€Œä¸”å°†æ„é€ å‡½æ•°ä¸initialCapacityç»“åˆä½¿ç”¨ï¼Œç„¶åä½¿ç”¨set()ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå°½ç®¡è¯¥æ•°ç»„å·²åˆ›å»ºï¼Œä½†æ˜¯å¤§å°è®¾ç½®ä¸æ­£ç¡®ã€‚ä½¿ç”¨sureCapacity()ä¹Ÿä¸èµ·ä½œç”¨ï¼Œå› ä¸ºå®ƒåŸºäºelementDataæ•°ç»„è€Œä¸æ˜¯å¤§å°ã€‚</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/9d32e6537eee46f40481885675c54efcdaf5be29.jpg@1320w_844h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/9d32e6537eee46f40481885675c54efcdaf5be29.jpg@1320w_844h.webp" alt="img" style="zoom:50%;"></a></p> <h5 id="çº¿ç¨‹å®‰å…¨">çº¿ç¨‹å®‰å…¨<a class="headerlink" href="#çº¿ç¨‹å®‰å…¨" title="é”šç‚¹é“¾æ¥">Â¶</a></h5> <p>ArrayList ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œçº¿ç¨‹å®‰å…¨ç‰ˆæœ¬çš„æ•°ç»„å®¹å™¨æ˜¯ Vectorã€‚</p> <p>Vector çš„å®ç°å¾ˆç®€å•ï¼Œå°±æ˜¯æŠŠæ‰€æœ‰çš„æ–¹æ³•ç»Ÿç»ŸåŠ ä¸Š synchronized å°±å®Œäº‹äº†ã€‚</p> <p>ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ Vectorï¼Œç”¨ Collections.synchronizedList æŠŠä¸€ä¸ªæ™®é€š ArrayList åŒ…è£…æˆä¸€ä¸ªçº¿ç¨‹å®‰å…¨ç‰ˆæœ¬çš„æ•°ç»„å®¹å™¨ä¹Ÿå¯ä»¥ï¼ŒåŸç†åŒ Vector æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯ç»™æ‰€æœ‰çš„æ–¹æ³•å¥—ä¸Šä¸€å±‚ synchronizedã€‚</p> <h4 id="932linkedlistç±»">9.3.2ã€LinkedListç±»<a class="headerlink" href="#932linkedlistç±»" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p>==LinkedList ç±»é‡‡ç”¨é“¾è¡¨ç»“æ„ä¿å­˜å¯¹è±¡ï¼Œ==è¿™ç§ç»“æ„çš„ä¼˜ç‚¹æ˜¯==ä¾¿äºå‘é›†åˆä¸­æ’å…¥æˆ–è€…åˆ é™¤å…ƒç´ ã€‚==éœ€è¦é¢‘ç¹å‘é›†åˆä¸­æ’å…¥å’Œåˆ é™¤å…ƒç´ æ—¶ï¼Œä½¿ç”¨ LinkedList ç±»æ¯” ArrayList ç±»æ•ˆæœé«˜ï¼Œä½†æ˜¯ LinkedList ç±»éšæœºè®¿é—®å…ƒç´ çš„é€Ÿåº¦åˆ™ç›¸å¯¹è¾ƒæ…¢ã€‚è¿™é‡Œçš„éšæœºè®¿é—®æ˜¯æŒ‡æ£€ç´¢é›†åˆä¸­ç‰¹å®šç´¢å¼•ä½ç½®çš„å…ƒç´ ã€‚</p> <p>LinkedList ç±»é™¤äº†åŒ…å« Collection æ¥å£å’Œ List æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜ç‰¹åˆ«æä¾›äº†ä¸‹è¡¨æ‰€ç¤ºçš„æ–¹æ³•ã€‚</p> <table> <thead> <tr> <th>æ–¹æ³•åç§°</th> <th>è¯´æ˜</th> </tr> </thead> <tbody> <tr> <td>void addFirst(E e)</td> <td>å°†æŒ‡å®šå…ƒç´ æ·»åŠ åˆ°æ­¤é›†åˆçš„å¼€å¤´</td> </tr> <tr> <td>void addLast(E e)</td> <td>å°†æŒ‡å®šå…ƒç´ æ·»åŠ åˆ°æ­¤é›†åˆçš„æœ«å°¾</td> </tr> <tr> <td>E getFirst()</td> <td>è¿”å›æ­¤é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ </td> </tr> <tr> <td>E getLast()</td> <td>è¿”å›æ­¤é›†åˆçš„æœ€åä¸€ä¸ªå…ƒç´ </td> </tr> <tr> <td>E removeFirst()</td> <td>åˆ é™¤æ­¤é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ </td> </tr> <tr> <td>E removeLast()</td> <td>åˆ é™¤æ­¤é›†åˆä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ </td> </tr> </tbody> </table> <hr> <p><strong>ArrayList ç±»å’Œ LinkedList ç±»çš„åŒºåˆ«</strong></p> <p>ArrayList ä¸ LinkedList éƒ½æ˜¯ List æ¥å£çš„å®ç°ç±»ï¼Œå› æ­¤éƒ½å®ç°äº† List çš„æ‰€æœ‰æœªå®ç°çš„æ–¹æ³•ï¼Œåªæ˜¯å®ç°çš„æ–¹å¼æœ‰æ‰€ä¸åŒã€‚</p> <p>ArrayList æ˜¯åŸºäºåŠ¨æ€æ•°ç»„æ•°æ®ç»“æ„çš„å®ç°ï¼Œè®¿é—®å…ƒç´ é€Ÿåº¦ä¼˜äº LinkedListã€‚LinkedList æ˜¯åŸºäºé“¾è¡¨æ•°æ®ç»“æ„çš„å®ç°ï¼Œå ç”¨çš„å†…å­˜ç©ºé—´æ¯”è¾ƒå¤§ï¼Œä½†åœ¨æ‰¹é‡æ’å…¥æˆ–åˆ é™¤æ•°æ®æ—¶ä¼˜äº ArrayListã€‚</p> <p>å¯¹äºå¿«é€Ÿè®¿é—®å¯¹è±¡çš„éœ€æ±‚ï¼Œä½¿ç”¨ ArrayList å®ç°æ‰§è¡Œæ•ˆç‡ä¸Šä¼šæ¯”è¾ƒå¥½ã€‚éœ€è¦é¢‘ç¹å‘é›†åˆä¸­æ’å…¥å’Œåˆ é™¤å…ƒç´ æ—¶ï¼Œä½¿ç”¨ LinkedList ç±»æ¯” ArrayList ç±»æ•ˆæœé«˜ã€‚</p> <p>ä¸åŒçš„ç»“æ„å¯¹åº”äºä¸åŒçš„ç®—æ³•ï¼Œæœ‰çš„è€ƒè™‘èŠ‚çœå ç”¨ç©ºé—´ï¼Œæœ‰çš„è€ƒè™‘æé«˜è¿è¡Œæ•ˆç‡ï¼Œå¯¹äºç¨‹åºå‘˜è€Œè¨€ï¼Œå®ƒä»¬å°±åƒæ˜¯â€œç†ŠæŒâ€å’Œâ€œé±¼è‚‰â€ï¼Œä¸å¯å…¼å¾—ã€‚é«˜è¿è¡Œé€Ÿåº¦å¾€å¾€æ˜¯ä»¥ç‰ºç‰²ç©ºé—´ä¸ºä»£ä»·çš„ï¼Œè€ŒèŠ‚çœå ç”¨ç©ºé—´å¾€å¾€æ˜¯ä»¥ç‰ºç‰²è¿è¡Œé€Ÿåº¦ä¸ºä»£ä»·çš„ã€‚</p> <h2 id="94seté›†åˆ">9.4ã€Seté›†åˆ<a class="headerlink" href="#94seté›†åˆ" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>Set é›†åˆç±»ä¼¼äºä¸€ä¸ªç½å­ï¼Œç¨‹åºå¯ä»¥ä¾æ¬¡æŠŠå¤šä¸ªå¯¹è±¡â€œä¸¢è¿›â€Set é›†åˆï¼Œè€Œ Set é›†åˆé€šå¸¸ä¸èƒ½è®°ä½å…ƒç´ çš„æ·»åŠ é¡ºåºã€‚ä¹Ÿå°±æ˜¯è¯´ ==Set é›†åˆä¸­çš„å¯¹è±¡ä¸æŒ‰ç‰¹å®šçš„æ–¹å¼æ’åºï¼Œ==åªæ˜¯ç®€å•åœ°æŠŠå¯¹è±¡åŠ å…¥é›†åˆã€‚==Set é›†åˆä¸­ä¸èƒ½åŒ…å«é‡å¤çš„å¯¹è±¡ï¼Œ=å¹¶ä¸”æœ€å¤šåªå…è®¸åŒ…å«ä¸€ä¸ª null å…ƒç´ ã€‚</p> <p>Set å®ç°äº† Collection æ¥å£ï¼Œå®ƒä¸»è¦æœ‰ä¸¤ä¸ªå¸¸ç”¨çš„å®ç°ç±»ï¼šHashSet ç±»å’Œ TreeSetç±»ã€‚</p> <h4 id="941hashset-ç±»">9.4.1ã€HashSet ç±»<a class="headerlink" href="#941hashset-ç±»" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p><mark>HashSet æ˜¯ Set æ¥å£çš„å…¸å‹å®ç°ï¼Œ==å¤§å¤šæ•°æ—¶å€™ä½¿ç”¨ Set é›†åˆæ—¶å°±æ˜¯ä½¿ç”¨è¿™ä¸ªå®ç°ç±»ã€‚HashSet æ˜¯æŒ‰ç…§ Hash ç®—æ³•æ¥å­˜å‚¨é›†åˆä¸­çš„å…ƒç´ ã€‚å› æ­¤==å…·æœ‰å¾ˆå¥½çš„å­˜å–å’ŒæŸ¥æ‰¾æ€§èƒ½ã€‚</mark></p> <p>HashSet å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p> <ul> <li>ä¸èƒ½ä¿è¯å…ƒç´ çš„æ’åˆ—é¡ºåºï¼Œé¡ºåºå¯èƒ½ä¸æ·»åŠ é¡ºåºä¸åŒï¼Œé¡ºåºä¹Ÿæœ‰å¯èƒ½å‘ç”Ÿå˜åŒ–ã€‚</li> <li>HashSet ä¸æ˜¯åŒæ­¥çš„ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®æˆ–ä¿®æ”¹ä¸€ä¸ª HashSetï¼Œåˆ™å¿…é¡»é€šè¿‡ä»£ç æ¥ä¿è¯å…¶åŒæ­¥ã€‚</li> <li>é›†åˆå…ƒç´ å€¼å¯ä»¥æ˜¯ nullã€‚</li> </ul> <p>HashSet å®é™…ä¸Šæ˜¯ä¸€ä¸ª HashMap å®ä¾‹ï¼Œéƒ½æ˜¯ä¸€ä¸ªå­˜æ”¾é“¾è¡¨çš„æ•°ç»„ã€‚å®ƒä¸ä¿è¯å­˜å‚¨å…ƒç´ çš„è¿­ä»£é¡ºåºï¼›æ­¤ç±»å…è®¸ä½¿ç”¨ null å…ƒç´ ã€‚HashSet ä¸­ä¸å…è®¸æœ‰é‡å¤å…ƒç´ ï¼Œè¿™æ˜¯å› ä¸º HashSet æ˜¯åŸºäº HashMap å®ç°çš„ï¼ŒHashSet ä¸­çš„å…ƒç´ éƒ½å­˜æ”¾åœ¨ HashMap çš„ key ä¸Šé¢ï¼Œè€Œ value ä¸­çš„å€¼éƒ½æ˜¯ç»Ÿä¸€çš„ä¸€ä¸ªå›ºå®šå¯¹è±¡<code>private static final Object PRESENT = new Object()</code>ã€‚</p> <p>HashSet ä¸­ add æ–¹æ³•è°ƒç”¨çš„æ˜¯åº•å±‚ HashMap ä¸­çš„ put() æ–¹æ³•ï¼Œè€Œå¦‚æœæ˜¯åœ¨ HashMap ä¸­è°ƒç”¨ putï¼Œé¦–å…ˆä¼šåˆ¤æ–­ key æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœ key å­˜åœ¨åˆ™ä¿®æ”¹value å€¼ï¼Œå¦‚æœ key ä¸å­˜åœ¨è¿™æ’å…¥è¿™ä¸ª key-valueã€‚è€Œåœ¨ set ä¸­ï¼Œå› ä¸º value å€¼æ²¡æœ‰ç”¨ï¼Œä¹Ÿå°±ä¸å­˜åœ¨ä¿®æ”¹ value å€¼çš„è¯´æ³•ï¼Œå› æ­¤å¾€ HashSet ä¸­æ·»åŠ å…ƒç´ ï¼Œé¦–å…ˆåˆ¤æ–­å…ƒç´ ï¼ˆä¹Ÿå°±æ˜¯ keyï¼‰æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æ’å…¥ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¸æ’å…¥ï¼Œè¿™æ · HashSet ä¸­å°±ä¸å­˜åœ¨é‡å¤å€¼ã€‚</p> <p>åœ¨ HashSet ç±»ä¸­å®ç°äº† Collection æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•ã€‚HashSet ç±»çš„å¸¸ç”¨æ„é€ æ–¹æ³•é‡è½½å½¢å¼å¦‚ä¸‹ã€‚</p> <ul> <li>HashSet()ï¼šæ„é€ ä¸€ä¸ªæ–°çš„ç©ºçš„ Set é›†åˆã€‚</li> <li>HashSet(Collection&lt;? extends E&gt;c)ï¼šæ„é€ ä¸€ä¸ªåŒ…å«æŒ‡å®š Collection é›†åˆå…ƒç´ çš„æ–° Set é›†åˆã€‚å…¶ä¸­ï¼Œâ€œ&lt; &gt;â€ä¸­çš„ extends è¡¨ç¤º HashSet çš„çˆ¶ç±»ï¼Œå³æŒ‡æ˜è¯¥ Set é›†åˆä¸­å­˜æ”¾çš„é›†åˆå…ƒç´ ç±»å‹ã€‚c è¡¨ç¤ºå…¶ä¸­çš„å…ƒç´ å°†è¢«å­˜æ”¾åœ¨æ­¤ Set é›†åˆä¸­ã€‚</li> </ul> <p>ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†åˆ›å»ºä¸¤ç§ä¸åŒå½¢å¼çš„ HashSet å¯¹è±¡ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">HashSet</span><span class="w"> </span><span class="n">hs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashSet</span><span class="p">();</span><span class="w">    </span><span class="c1">// è°ƒç”¨æ— å‚çš„æ„é€ å‡½æ•°åˆ›å»ºHashSetå¯¹è±¡</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">HashSet</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashSet</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span><span class="w">    </span><span class="c1">// åˆ›å»ºæ³›å‹çš„ HashSet é›†åˆå¯¹è±¡</span>
</span></code></pre></div> <h4 id="942treeset-ç±»">9.4.2ã€TreeSet ç±»<a class="headerlink" href="#942treeset-ç±»" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p>==TreeSet ç±»åŒæ—¶å®ç°äº† Set æ¥å£å’Œ SortedSet æ¥å£ã€‚SortedSet æ¥å£æ˜¯ Set æ¥å£çš„å­æ¥å£ï¼Œå¯ä»¥å®ç°å¯¹é›†åˆè¿›è¡Œè‡ªç„¶æ’åºï¼Œ==å› æ­¤ä½¿ç”¨ TreeSet ç±»å®ç°çš„ Set æ¥å£é»˜è®¤æƒ…å†µä¸‹æ˜¯è‡ªç„¶æ’åºçš„ï¼Œè¿™é‡Œçš„è‡ªç„¶æ’åºæŒ‡çš„æ˜¯å‡åºæ’åºã€‚</p> <p>==TreeSet åªèƒ½å¯¹å®ç°äº† Comparable æ¥å£çš„ç±»å¯¹è±¡è¿›è¡Œæ’åºï¼Œ==å› ä¸º Comparable æ¥å£ä¸­æœ‰ä¸€ä¸ª compareTo(Object o) æ–¹æ³•ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å¤§å°ã€‚ä¾‹å¦‚ a.compareTo(b)ï¼Œå¦‚æœ a å’Œ b ç›¸ç­‰ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å› 0ï¼›å¦‚æœ a å¤§äº bï¼Œåˆ™è¯¥æ–¹æ³•è¿”å›å¤§äº 0 çš„å€¼ï¼›å¦‚æœ a å°äº bï¼Œåˆ™è¯¥æ–¹æ³•è¿”å›å°äº 0 çš„å€¼ã€‚</p> <p>ä¸‹è¡¨åˆ—ä¸¾äº† JDK ç±»åº“ä¸­å®ç° Comparable æ¥å£çš„ç±»ï¼Œä»¥åŠè¿™äº›ç±»å¯¹è±¡çš„æ¯”è¾ƒæ–¹å¼ã€‚</p> <table> <thead> <tr> <th>ç±»</th> <th>æ¯”è¾ƒæ–¹å¼</th> </tr> </thead> <tbody> <tr> <td>åŒ…è£…ç±»ï¼ˆBigDecimalã€Biglntegerã€ Byteã€Doubleã€ Floatã€Integerã€Long åŠ Short)</td> <td>æŒ‰æ•°å­—å¤§å°æ¯”è¾ƒ</td> </tr> <tr> <td>Character</td> <td>æŒ‰å­—ç¬¦çš„ Unicode å€¼çš„æ•°å­—å¤§å°æ¯”è¾ƒ</td> </tr> <tr> <td>String</td> <td>æŒ‰å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„ Unicode å€¼çš„æ•°å­—å¤§å°æ¯”è¾ƒ</td> </tr> </tbody> </table> <p>TreeSet ç±»é™¤äº†å®ç° Collection æ¥å£çš„æ‰€æœ‰æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜æä¾›äº†ä¸‹è¡¨æ‰€ç¤ºçš„æ–¹æ³•ã€‚</p> <table> <thead> <tr> <th>æ–¹æ³•åç§°</th> <th>è¯´æ˜</th> </tr> </thead> <tbody> <tr> <td>E first()</td> <td>è¿”å›æ­¤é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚å…¶ä¸­ï¼ŒE è¡¨ç¤ºé›†åˆä¸­å…ƒç´ çš„æ•°æ®ç±»å‹</td> </tr> <tr> <td>E last()</td> <td>è¿”å›æ­¤é›†åˆä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ </td> </tr> <tr> <td>E poolFirst()</td> <td>è·å–å¹¶ç§»é™¤æ­¤é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ </td> </tr> <tr> <td>E poolLast()</td> <td>è·å–å¹¶ç§»é™¤æ­¤é›†åˆä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ </td> </tr> <tr> <td>SortedSet<e> subSet(E fromElement,E toElement)</e></td> <td>è¿”å›ä¸€ä¸ªæ–°çš„é›†åˆï¼Œæ–°é›†åˆåŒ…å«åŸé›†åˆä¸­ fromElement å¯¹è±¡ä¸ toElement å¯¹è±¡ä¹‹é—´çš„æ‰€æœ‰å¯¹è±¡ã€‚åŒ…å« fromElement å¯¹è±¡ï¼Œä¸åŒ…å« toElement å¯¹è±¡</td> </tr> <tr> <td>SortedSet<e> headSet&lt;E toElementã€‰</e></td> <td>è¿”å›ä¸€ä¸ªæ–°çš„é›†åˆï¼Œæ–°é›†åˆåŒ…å«åŸé›†åˆä¸­ toElement å¯¹è±¡ä¹‹å‰çš„æ‰€æœ‰å¯¹è±¡ã€‚ ä¸åŒ…å« toElement å¯¹è±¡</td> </tr> <tr> <td>SortedSet<e> tailSet(E fromElement)</e></td> <td>è¿”å›ä¸€ä¸ªæ–°çš„é›†åˆï¼Œæ–°é›†åˆåŒ…å«åŸé›†åˆä¸­ fromElement å¯¹è±¡ä¹‹åçš„æ‰€æœ‰å¯¹ è±¡ã€‚åŒ…å« fromElement å¯¹è±¡</td> </tr> </tbody> </table> <p>æ³¨æ„ï¼šè¡¨é¢ä¸Šçœ‹èµ·æ¥è¿™äº›æ–¹æ³•å¾ˆå¤šï¼Œå…¶å®å¾ˆç®€å•ã€‚å› ä¸º TreeSet ä¸­çš„å…ƒç´ æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥å¢åŠ äº†è®¿é—®ç¬¬ä¸€ä¸ªã€å‰ä¸€ä¸ªã€åä¸€ä¸ªã€æœ€åä¸€ä¸ªå…ƒç´ çš„æ–¹æ³•ï¼Œå¹¶æä¾›äº† 3 ä¸ªä» TreeSet ä¸­æˆªå–å­ TreeSet çš„æ–¹æ³•ã€‚</p> <p>æ³¨æ„ï¼š==åœ¨ä½¿ç”¨è‡ªç„¶æ’åºæ—¶åªèƒ½å‘ TreeSet é›†åˆä¸­æ·»åŠ ç›¸åŒæ•°æ®ç±»å‹çš„å¯¹è±¡ï¼Œå¦åˆ™ä¼šæŠ›å‡º ClassCastException å¼‚å¸¸ã€‚==å¦‚æœå‘ TreeSet é›†åˆä¸­æ·»åŠ äº†ä¸€ä¸ª Double ç±»å‹çš„å¯¹è±¡ï¼Œåˆ™åé¢åªèƒ½æ·»åŠ  Double å¯¹è±¡ï¼Œä¸èƒ½å†æ·»åŠ å…¶ä»–ç±»å‹çš„å¯¹è±¡ï¼Œä¾‹å¦‚ String å¯¹è±¡ç­‰ã€‚</p> <h2 id="95mapé›†åˆ">9.5ã€Mapé›†åˆ<a class="headerlink" href="#95mapé›†åˆ" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p><mark>Map æ˜¯ä¸€ç§é”®-å€¼å¯¹ï¼ˆkey-valueï¼‰é›†åˆï¼Œ==Map é›†åˆä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½åŒ…å«ä¸€ä¸ªé”®ï¼ˆkeyï¼‰å¯¹è±¡å’Œä¸€ä¸ªå€¼ï¼ˆvalueï¼‰å¯¹è±¡ã€‚==ç”¨äºä¿å­˜å…·æœ‰æ˜ å°„å…³ç³»çš„æ•°æ®ã€‚</mark></p> <p>Map é›†åˆé‡Œä¿å­˜ç€ä¸¤ç»„å€¼ï¼Œä¸€ç»„å€¼ç”¨äºä¿å­˜ Map é‡Œçš„ keyï¼Œå¦å¤–ä¸€ç»„å€¼ç”¨äºä¿å­˜ Map é‡Œçš„ valueï¼Œ==key å’Œ value éƒ½å¯ä»¥æ˜¯ä»»ä½•å¼•ç”¨ç±»å‹çš„æ•°æ®ã€‚==Map çš„ key ä¸å…è®¸é‡å¤ï¼Œvalue å¯ä»¥é‡å¤ï¼Œå³åŒä¸€ä¸ª Map å¯¹è±¡çš„ä»»ä½•ä¸¤ä¸ª key é€šè¿‡ equals æ–¹æ³•æ¯”è¾ƒæ€»æ˜¯è¿”å› falseã€‚</p> <p>Map ä¸­çš„ key å’Œ value ä¹‹é—´å­˜åœ¨å•å‘ä¸€å¯¹ä¸€å…³ç³»ï¼Œå³é€šè¿‡æŒ‡å®šçš„ keyï¼Œæ€»èƒ½æ‰¾åˆ°å”¯ä¸€çš„ã€ç¡®å®šçš„ valueã€‚ä» Map ä¸­å–å‡ºæ•°æ®æ—¶ï¼Œåªè¦ç»™å‡ºæŒ‡å®šçš„ keyï¼Œå°±å¯ä»¥å–å‡ºå¯¹åº”çš„ valueã€‚</p> <p><mark>HashMap ç±»å’Œ TreeMap ç±»éƒ½æ˜¯ Map æ¥å£çš„å®ç°ç±»ã€‚å…¶ä¸­ï¼ŒHashMap ç±»æŒ‰å“ˆå¸Œç®—æ³•æ¥å­˜å–é”®å¯¹è±¡ï¼Œè€Œ TreeMap ç±»å¯ä»¥å¯¹é”®å¯¹è±¡è¿›è¡Œæ’åºã€‚</mark></p> <p>Mapæ¥å£çš„å¸¸ç”¨æ–¹æ³•</p> <table> <thead> <tr> <th>æ–¹æ³•åç§°</th> <th>è¯´æ˜</th> </tr> </thead> <tbody> <tr> <td>void clear()</td> <td>åˆ é™¤è¯¥ Map å¯¹è±¡ä¸­çš„æ‰€æœ‰ key-value å¯¹ã€‚</td> </tr> <tr> <td>boolean containsKey(Object key)</td> <td>æŸ¥è¯¢ Map ä¸­æ˜¯å¦åŒ…å«æŒ‡å®šçš„ keyï¼Œå¦‚æœåŒ…å«åˆ™è¿”å› trueã€‚</td> </tr> <tr> <td>boolean containsValue(Object value)</td> <td>æŸ¥è¯¢ Map ä¸­æ˜¯å¦åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª valueï¼Œå¦‚æœåŒ…å«åˆ™è¿”å› trueã€‚</td> </tr> <tr> <td>V get(Object key)</td> <td>è¿”å› Map é›†åˆä¸­æŒ‡å®šé”®å¯¹è±¡æ‰€å¯¹åº”çš„å€¼ã€‚V è¡¨ç¤ºå€¼çš„æ•°æ®ç±»å‹</td> </tr> <tr> <td>V put(K key, V value)</td> <td>å‘ Map é›†åˆä¸­æ·»åŠ é”®-å€¼å¯¹ï¼Œå¦‚æœå½“å‰ Map ä¸­å·²æœ‰ä¸€ä¸ªä¸è¯¥ key ç›¸ç­‰çš„ key-value å¯¹ï¼Œåˆ™æ–°çš„ key-value å¯¹ä¼šè¦†ç›–åŸæ¥çš„ key-value å¯¹ã€‚</td> </tr> <tr> <td>void putAll(Map m)</td> <td>å°†æŒ‡å®š Map ä¸­çš„ key-value å¯¹å¤åˆ¶åˆ°æœ¬ Map ä¸­ã€‚</td> </tr> <tr> <td>V remove(Object key)</td> <td>ä» Map é›†åˆä¸­åˆ é™¤ key å¯¹åº”çš„é”®-å€¼å¯¹ï¼Œè¿”å› key å¯¹åº”çš„ valueï¼Œå¦‚æœè¯¥ key ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› null</td> </tr> <tr> <td>boolean remove(Object key, Object value)</td> <td>è¿™æ˜¯ Java 8 æ–°å¢çš„æ–¹æ³•ï¼Œåˆ é™¤æŒ‡å®š keyã€value æ‰€å¯¹åº”çš„ key-value å¯¹ã€‚å¦‚æœä»è¯¥ Map ä¸­æˆåŠŸåœ°åˆ é™¤è¯¥ key-value å¯¹ï¼Œè¯¥æ–¹æ³•è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚</td> </tr> <tr> <td>Set entrySet()</td> <td>è¿”å› Map é›†åˆä¸­æ‰€æœ‰é”®-å€¼å¯¹çš„ Set é›†åˆï¼Œæ­¤ Set é›†åˆä¸­å…ƒç´ çš„æ•°æ®ç±»å‹ä¸º Map.Entry</td> </tr> <tr> <td>Set keySet()</td> <td>è¿”å› Map é›†åˆä¸­æ‰€æœ‰é”®å¯¹è±¡çš„ Set é›†åˆ</td> </tr> <tr> <td>boolean isEmpty()</td> <td>æŸ¥è¯¢è¯¥ Map æ˜¯å¦ä¸ºç©ºï¼ˆå³ä¸åŒ…å«ä»»ä½• key-value å¯¹ï¼‰ï¼Œå¦‚æœä¸ºç©ºåˆ™è¿”å› trueã€‚</td> </tr> <tr> <td>int size()</td> <td>è¿”å›è¯¥ Map é‡Œ key-value å¯¹çš„ä¸ªæ•°</td> </tr> <tr> <td>Collection values()</td> <td>è¿”å›è¯¥ Map é‡Œæ‰€æœ‰ value ç»„æˆçš„ Collection</td> </tr> <tr> <td>void forEach(BiConsumer action)</td> <td>è¯¥æ–¹æ³•æ˜¯ Java 8 ä¸º Map æ–°å¢çš„ä¸€ä¸ªéå† key-value å¯¹çš„æ–¹æ³•ï¼Œé€šè¿‡è¯¥æ–¹æ³•å¯ä»¥æ›´ç®€æ´åœ°éå† Map çš„ key-value å¯¹ã€‚</td> </tr> <tr> <td>Object replace(Object key, Object value)</td> <td>å°† Map ä¸­æŒ‡å®š key å¯¹åº”çš„ value æ›¿æ¢æˆæ–° valueã€‚ä¸ä¼ ç»Ÿ put() æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œè¯¥æ–¹æ³•ä¸å¯èƒ½æ·»åŠ æ–°çš„ key-value å¯¹ã€‚å¦‚æœå°è¯•æ›¿æ¢çš„ key åœ¨åŸ Map ä¸­ä¸å­˜åœ¨ï¼Œè¯¥æ–¹æ³•ä¸ä¼šæ·»åŠ  key-value å¯¹ï¼Œè€Œæ˜¯è¿”å› nullã€‚</td> </tr> <tr> <td>boolean replace(K key, V oldValue, V newValue)</td> <td>å°† Map ä¸­æŒ‡å®š key-value å¯¹çš„åŸ value æ›¿æ¢æˆæ–° valueã€‚å¦‚æœåœ¨ Map ä¸­æ‰¾åˆ°æŒ‡å®šçš„ key-value å¯¹ï¼Œåˆ™æ‰§è¡Œæ›¿æ¢å¹¶è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚</td> </tr> </tbody> </table> <p><mark>TreeMap ç±»çš„ä½¿ç”¨æ–¹æ³•ä¸ HashMap ç±»ç›¸åŒï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ TreeMap ç±»å¯ä»¥å¯¹é”®å¯¹è±¡è¿›è¡Œæ’åºã€‚</mark></p> <h4 id="951hashmap">9.5.1ã€HashMap<a class="headerlink" href="#951hashmap" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <h5 id="åº•å±‚ç»“æ„">åº•å±‚ç»“æ„<a class="headerlink" href="#åº•å±‚ç»“æ„" title="é”šç‚¹é“¾æ¥">Â¶</a></h5> <p>HashMap ç”±<strong>æ•°ç»„å’Œé“¾è¡¨ç»„åˆæ„æˆ</strong>çš„æ•°æ®ç»“æ„ã€‚å¤§æ¦‚å¦‚ä¸‹ï¼Œæ•°ç»„é‡Œé¢æ¯ä¸ªåœ°æ–¹éƒ½å­˜äº† Key-Value è¿™æ ·çš„å®ä¾‹ï¼Œåœ¨ Java7 å« Entry åœ¨ Java8 ä¸­å« Nodeã€‚</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/ad3570011e37cb8d2466f3300ad39237fc9bbfcc.jpg@1078w_190h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/ad3570011e37cb8d2466f3300ad39237fc9bbfcc.jpg@1078w_190h.webp" alt="img" style="zoom:80%;"></a></p> <p>å› ä¸ºä»–æœ¬èº«æ‰€æœ‰çš„ä½ç½®éƒ½ä¸º nullï¼Œåœ¨ put æ’å…¥çš„æ—¶å€™ä¼šæ ¹æ® key çš„ hash å»è®¡ç®—ä¸€ä¸ª index å€¼ã€‚å°±æ¯”å¦‚ put("å¸…ä¸™"ï¼Œ520)ï¼Œæ’å…¥äº†ä¸º "å¸…ä¸™" çš„å…ƒç´ ï¼Œè¿™ä¸ªæ—¶å€™ä¼šé€šè¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—å‡ºæ’å…¥çš„ä½ç½®ï¼Œè®¡ç®—å‡ºæ¥ index æ˜¯ 2 é‚£ç»“æœå¦‚ä¸‹ã€‚</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/bebfb6f690765a6d76980417dbe1c6c45a2a8f26.jpg@1066w_242h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/bebfb6f690765a6d76980417dbe1c6c45a2a8f26.jpg@1066w_242h.webp" alt="img" style="zoom:80%;"></a></p> <p>ä½†æ˜¯ç”±äºå“ˆå¸Œæœ¬èº«å°±å­˜åœ¨æ¦‚ç‡æ€§ï¼Œæ¯”å¦‚ â€å¸…ä¸™â€œ å’Œ â€ä¸™å¸…â€œ å» hash æœ‰ä¸€å®šçš„æ¦‚ç‡ä¼šä¸€æ ·ï¼Œå°±åƒä¸Šé¢çš„æƒ…å†µå†æ¬¡å“ˆå¸Œ â€ä¸™å¸…â€œ æç«¯æƒ…å†µä¹Ÿä¼š hash åˆ°ä¸€ä¸ªå€¼ä¸Šï¼Œé‚£å°±å½¢æˆäº†é“¾è¡¨ã€‚</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/36785a9a74392e955bfc18ca2cff2b21fbbcc101.jpg@1060w_476h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/36785a9a74392e955bfc18ca2cff2b21fbbcc101.jpg@1060w_476h.webp" alt="img" style="zoom:80%;"></a></p> <p>æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä¼šä¿å­˜è‡ªèº«çš„ hashã€keyã€value ä»¥åŠä¸‹ä¸ªèŠ‚ç‚¹ï¼ŒNode çš„æºç ã€‚</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/54dc28466296491cac1c2aeba928a48a4b95ef05.jpg@1142w_662h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/54dc28466296491cac1c2aeba928a48a4b95ef05.jpg@1142w_662h.webp" alt="img" style="zoom:80%;"></a></p> <h5 id="æ’å…¥å’Œæ‰©å®¹">æ’å…¥å’Œæ‰©å®¹<a class="headerlink" href="#æ’å…¥å’Œæ‰©å®¹" title="é”šç‚¹é“¾æ¥">Â¶</a></h5> <p><mark>Java8 ä¹‹å‰æ˜¯å¤´æ’æ³•</mark>ï¼Œå°±æ˜¯è¯´æ–°æ¥çš„å€¼ä¼šå–ä»£åŸæœ‰çš„å€¼ï¼ŒåŸæœ‰çš„å€¼å°±é¡ºæ¨åˆ°é“¾è¡¨ä¸­å»ï¼Œå°±åƒä¸Šé¢çš„ä¾‹å­ä¸€æ ·ï¼Œå› ä¸ºå†™è¿™ä¸ªä»£ç çš„ä½œè€…è®¤ä¸ºåæ¥çš„å€¼è¢«æŸ¥æ‰¾çš„å¯èƒ½æ€§æ›´å¤§ä¸€ç‚¹ï¼Œæå‡æŸ¥æ‰¾çš„æ•ˆç‡ã€‚ä½†æ˜¯ï¼Œåœ¨ <mark>Java 8 ä¹‹åï¼Œéƒ½æ˜¯æ‰€ç”¨å°¾éƒ¨æ’å…¥äº†ã€‚</mark></p> <p>å› ä¸ºæ•°ç»„å®¹é‡æ˜¯æœ‰é™çš„ï¼Œæ•°æ®å¤šæ¬¡æ’å…¥çš„ï¼Œåˆ°è¾¾ä¸€å®šçš„æ•°é‡å°±ä¼šè¿›è¡Œæ‰©å®¹ï¼Œä¹Ÿå°±æ˜¯ resizeã€‚</p> <p>resize æœ‰ä¸¤ä¸ªå› ç´ ï¼š</p> <ol> <li> <p>Capacityï¼šHashMap çš„å½“å‰é•¿åº¦ã€‚</p> </li> <li> <p>LoadFactorï¼šè´Ÿè½½å› å­ï¼Œé»˜è®¤å€¼ä¸º 0.75fã€‚</p> <blockquote> <p>æ¯”å¦‚å½“å‰çš„å®¹é‡å¤§å°ä¸º 100ï¼Œå½“ä½ å­˜è¿›ç¬¬ 76 ä¸ªçš„æ—¶å€™ï¼Œåˆ¤æ–­å‘ç°éœ€è¦è¿›è¡Œ resize äº†ï¼Œé‚£å°±è¿›è¡Œæ‰©å®¹ã€‚</p> <p>JDK 1.7 ä¹‹å‰æ˜¯å…ˆæ’å…¥å†æ‰©å®¹ï¼ŒJDK 1.8 æ˜¯å…ˆæ‰©å®¹å†æ’å…¥ã€‚</p> </blockquote> </li> </ol> <p>æ‰©å®¹åˆ†ä¸ºä¸¤æ­¥ï¼š</p> <ul> <li> <p>æ‰©å®¹ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Entry ç©ºæ•°ç»„ï¼Œé•¿åº¦æ˜¯åŸæ•°ç»„çš„ 2 å€ã€‚</p> </li> <li> <p>ReHashï¼šéå†åŸ Entry æ•°ç»„ï¼ŒæŠŠæ‰€æœ‰çš„ Entry é‡æ–° Hash åˆ°æ–°æ•°ç»„ã€‚</p> <blockquote> <p>Hashçš„å…¬å¼ ==&gt;<code>index = HashCode(Key) &amp; (Length - 1)</code></p> <p>ç”±äºé•¿åº¦æ‰©å¤§ä»¥åï¼ŒHashçš„è§„åˆ™ä¹Ÿéšä¹‹æ”¹å˜ï¼Œæ‰€ä»¥éœ€è¦é‡æ–° Hash è€Œä¸æ˜¯ç›´æ¥å¤åˆ¶è¿‡å»ã€‚</p> <p>JDK 1.8 ä¸éœ€è¦é‡å¤ Hashï¼Œé€šè¿‡è®¡ç®— <code>e.hash &amp; oldCap</code>çš„å€¼æ˜¯å¦ä¸º 0ï¼Œä¸º 0 è¡¨ç¤ºæ‰©å®¹ä¹‹åä½ç½®æœªå˜ï¼Œä¸ä¸º 0 è¡¨ç¤ºæ‰©å®¹ä¹‹åä½ç½®å·²æ”¹å˜ï¼Œæ–°ä½ç½® = æ—§ä½ç½® + æ—§æ•°ç»„é•¿åº¦</p> </blockquote> </li> </ul> <p>æ‰©å®¹å‰ï¼š</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/c244cb079efdb2fc4d74a87fdd14bc44273da375.jpg@1054w_398h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/c244cb079efdb2fc4d74a87fdd14bc44273da375.jpg@1054w_398h.webp" alt="img" style="zoom:80%;"></a></p> <p>æ‰©å®¹åï¼š</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/318f7f8d68a94fe1b8d8157556fb8605d3a8124a.jpg@1320w_212h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/318f7f8d68a94fe1b8d8157556fb8605d3a8124a.jpg@1320w_212h.webp" alt="img" style="zoom:80%;"></a></p> <p>ç°åœ¨è¦åœ¨å®¹é‡ä¸º 2 çš„å®¹å™¨é‡Œé¢<strong>ç”¨ä¸åŒçº¿ç¨‹</strong>æ’å…¥ Aï¼ŒBï¼ŒCï¼Œå‡å¦‚åœ¨ resize ä¹‹å‰æ‰“ä¸ªçŸ­ç‚¹ï¼Œé‚£æ„å‘³ç€æ•°æ®éƒ½æ’å…¥äº†ä½†æ˜¯è¿˜æ²¡ resizeï¼Œé‚£æ‰©å®¹å‰å¯èƒ½æ˜¯è¿™æ ·çš„ï¼šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é“¾è¡¨çš„æŒ‡å‘ A =&gt; B =&gt; Cï¼ˆA çš„ä¸‹ä¸€ä¸ªæŒ‡é’ˆæ˜¯æŒ‡å‘ B çš„ï¼‰</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/8de44dd0cf0d938d5d3313bfeb7cf37d0e8a1cda.jpg@360w_552h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/8de44dd0cf0d938d5d3313bfeb7cf37d0e8a1cda.jpg@360w_552h.webp" alt="img" style="zoom:80%;"></a></p> <p>å› ä¸º resize çš„èµ‹å€¼æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨äº†å•é“¾è¡¨çš„å¤´æ’å…¥æ–¹å¼ï¼ŒåŒä¸€ä½ç½®ä¸Šæ–°å…ƒç´ æ€»ä¼šè¢«æ”¾åœ¨é“¾è¡¨çš„å¤´éƒ¨ä½ç½®ï¼Œåœ¨æ—§æ•°ç»„ä¸­åŒä¸€æ¡ Entry é“¾ä¸Šçš„å…ƒç´ ï¼Œé€šè¿‡é‡æ–°è®¡ç®—ç´¢å¼•ä½ç½®åï¼Œæœ‰å¯èƒ½è¢«æ”¾åˆ°äº†æ–°æ•°ç»„çš„ä¸åŒä½ç½®ä¸Šã€‚å°±å¯èƒ½å‡ºç°ä¸‹é¢çš„æƒ…å†µï¼šB çš„ä¸‹ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘äº† A</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/88e1df0cebe360cb17ee9393553d0e560119a2ba.jpg@686w_368h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/88e1df0cebe360cb17ee9393553d0e560119a2ba.jpg@686w_368h.webp" alt="img" style="zoom:80%;"></a></p> <p>ä¸€æ—¦å‡ ä¸ªçº¿ç¨‹éƒ½è°ƒæ•´å®Œæˆï¼Œå°±å¯èƒ½å‡ºç°ç¯å½¢é“¾è¡¨</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/65fddfd00eebfaa1fbbdd0d82d3c82cfc5ddb8d2.jpg@762w_482h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/65fddfd00eebfaa1fbbdd0d82d3c82cfc5ddb8d2.jpg@762w_482h.webp" alt="img" style="zoom:80%;"></a></p> <p>å¦‚æœè¿™ä¸ªæ—¶å€™å»å–å€¼ï¼Œæ‚²å‰§å°±å‡ºç°äº†â€”â€”Infinite Loopï¼ˆæ— é™å¾ªç¯ï¼‰ã€‚</p> <blockquote> <p>==Java 8 ä¹‹åé“¾è¡¨æœ‰çº¢é»‘æ ‘==çš„éƒ¨åˆ†ï¼ˆå½“é“¾è¡¨çš„é•¿åº¦è¶…è¿‡8çš„æ—¶å€™ï¼Œé“¾è¡¨ä¼šè½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼‰ï¼Œçº¢é»‘æ ‘çš„å¼•å…¥å·§å¦™çš„å°†åŸæœ¬ O(n) çš„æ—¶é—´å¤æ‚åº¦é™ä½åˆ°äº†O(logn)ã€‚</p> <p>æ ¹æ®æ³Šæ¾åˆ†å¸ƒï¼Œåœ¨è´Ÿè½½å› å­é»˜è®¤ä¸º 0.75 çš„æ—¶å€™ï¼Œå•ä¸ª hash æ§½å†…å…ƒç´ ä¸ªæ•°ä¸º 8 çš„æ¦‚ç‡å°äºç™¾ä¸‡åˆ†ä¹‹ä¸€ï¼Œæ‰€ä»¥å°† 7 ä½œä¸ºä¸€ä¸ªåˆ†æ°´å²­ï¼Œç­‰äº 7 çš„æ—¶å€™ä¸è½¬æ¢ï¼Œå¤§äºç­‰äº 8 çš„æ—¶å€™æ‰è¿›è¡Œè½¬æ¢ï¼Œå°äºç­‰äº 6 çš„æ—¶å€™å°±åŒ–ä¸ºé“¾è¡¨ã€‚</p> </blockquote> <p><strong>ä½¿ç”¨å¤´æ’</strong>ä¼šæ”¹å˜é“¾è¡¨çš„ä¸Šçš„é¡ºåºï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨å°¾æ’ï¼Œåœ¨æ‰©å®¹æ—¶ä¼šä¿æŒé“¾è¡¨å…ƒç´ åŸæœ¬çš„é¡ºåºï¼Œå°±ä¸ä¼šå‡ºç°é“¾è¡¨æˆç¯çš„é—®é¢˜äº†ã€‚å°±æ˜¯è¯´åŸæœ¬æ˜¯ A =&gt; Bï¼Œåœ¨æ‰©å®¹åé‚£ä¸ªé“¾è¡¨è¿˜æ˜¯ A =&gt; Bï¼š</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/JavaCollection/aec263f93b937223e902d67dd1e8072a6a3e9796.jpg@678w_356h.webp" data-desc-position="bottom"><img src="!assets/JavaCollection/aec263f93b937223e902d67dd1e8072a6a3e9796.jpg@678w_356h.webp" alt="img" style="zoom:80%;"></a></p> <p>Java 7 åœ¨å¤šçº¿ç¨‹æ“ä½œ HashMap æ—¶å¯èƒ½å¼•èµ·æ­»å¾ªç¯ï¼ŒåŸå› æ˜¯æ‰©å®¹è½¬ç§»åå‰åé“¾è¡¨é¡ºåºå€’ç½®ï¼Œåœ¨è½¬ç§»è¿‡ç¨‹ä¸­ä¿®æ”¹äº†åŸæ¥é“¾è¡¨ä¸­èŠ‚ç‚¹çš„å¼•ç”¨å…³ç³»ã€‚</p> <p>Java 8 åœ¨åŒæ ·çš„å‰æä¸‹å¹¶ä¸ä¼šå¼•èµ·æ­»å¾ªç¯ï¼ŒåŸå› æ˜¯æ‰©å®¹è½¬ç§»åå‰åé“¾è¡¨é¡ºåºä¸å˜ï¼Œä¿æŒä¹‹å‰èŠ‚ç‚¹çš„å¼•ç”¨å…³ç³»ã€‚</p> <p>ä½†æ˜¯å³ä½¿ä¸ä¼šå‡ºç°æ­»å¾ªç¯ï¼Œé€šè¿‡æºç çœ‹åˆ° put / get æ–¹æ³•éƒ½æ²¡æœ‰åŠ åŒæ­¥é”ï¼Œå¤šçº¿ç¨‹æƒ…å†µæœ€å®¹æ˜“å‡ºç°çš„å°±æ˜¯ï¼šæ— æ³•ä¿è¯ä¸Šä¸€ç§’ put çš„å€¼ï¼Œä¸‹ä¸€ç§’ get çš„æ—¶å€™è¿˜æ˜¯åŸå€¼ï¼Œæ‰€ä»¥çº¿ç¨‹å®‰å…¨è¿˜æ˜¯æ— æ³•ä¿è¯ã€‚</p> <h5 id="åˆå§‹é•¿åº¦">åˆå§‹é•¿åº¦<a class="headerlink" href="#åˆå§‹é•¿åº¦" title="é”šç‚¹é“¾æ¥">Â¶</a></h5> <p>HashMap çš„é»˜è®¤åˆå§‹åŒ–é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯ 16ï¼Œè¿™æ ·æ˜¯ä¸ºäº†ä½è¿ç®—çš„æ–¹ä¾¿ï¼Œ<strong>ä½ä¸è¿ç®—æ¯”ç®—æ•°è®¡ç®—çš„æ•ˆç‡é«˜äº†å¾ˆå¤š</strong>ï¼Œä¹‹æ‰€ä»¥é€‰æ‹© 16ï¼Œæ˜¯ä¸ºäº†æœåŠ¡å°† Key æ˜ å°„åˆ° index çš„ç®—æ³•ã€‚æ‰€æœ‰çš„ key éƒ½ä¼šæ‹¿åˆ°ä»–çš„ hashï¼Œä¸ºäº†å°½å¯èƒ½çš„å¾—åˆ°ä¸€ä¸ªå‡åŒ€åˆ†å¸ƒçš„ hashï¼Œä¼šé€šè¿‡ Key çš„ HashCode å€¼å»åšä½è¿ç®—ã€‚</p> <p>æ‰“ä¸ªæ¯”æ–¹ï¼Œkey ä¸º "å¸…ä¸™" çš„åè¿›åˆ¶ä¸º 766132ï¼Œé‚£äºŒè¿›åˆ¶å°±æ˜¯ 10111011000010110100ï¼Œindex çš„è®¡ç®—å…¬å¼ï¼š<code>index = HashCode(Key) &amp; (Length- 1)</code>ï¼Œ15 çš„çš„äºŒè¿›åˆ¶æ˜¯ 1111ï¼Œé‚£ <code>10111011000010110100 &amp;1111</code> åè¿›åˆ¶å°±æ˜¯ 4ï¼Œè¿™æ ·ç”¨ä½ä¸è¿ç®—æ•ˆæœä¸å–æ¨¡ä¸€æ ·ï¼Œæ€§èƒ½ä¹Ÿæé«˜äº†ä¸å°‘ï¼</p> <p>åŒæ—¶åœ¨ä½¿ç”¨æ˜¯ 2 çš„å¹‚çš„æ•°å­—çš„æ—¶å€™ï¼ŒLength-1 çš„å€¼æ˜¯æ‰€æœ‰äºŒè¿›åˆ¶ä½å…¨ä¸º 1ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œindex çš„ç»“æœç­‰åŒäº HashCode åå‡ ä½çš„å€¼ã€‚åªè¦è¾“å…¥çš„HashCode æœ¬èº«åˆ†å¸ƒå‡åŒ€ï¼ŒHash ç®—æ³•çš„ç»“æœå°±æ˜¯å‡åŒ€çš„ã€‚è¿™æ˜¯ä¸ºäº†å®ç°å‡åŒ€åˆ†å¸ƒï¼</p> <h5 id="çº¿ç¨‹å®‰å…¨_1">çº¿ç¨‹å®‰å…¨<a class="headerlink" href="#çº¿ç¨‹å®‰å…¨_1" title="é”šç‚¹é“¾æ¥">Â¶</a></h5> <p>HashMap æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œä¸€èˆ¬éƒ½ä¼šä½¿ç”¨ <code>Collections.synchronizedMap(Map)</code> åˆ›å»ºçº¿ç¨‹å®‰å…¨çš„mapé›†åˆã€<code>HashTable</code> æˆ–è€… <code>ConcurrentHashMap</code>ï¼Œä½†æ˜¯å› ä¸º Hashtable çš„<strong>å¹¶å‘åº¦</strong>çš„åŸå› åŸºæœ¬ä¸Šæ²¡å•¥ä½¿ç”¨åœºæ™¯äº†ï¼Œæ‰€ä»¥å­˜åœ¨çº¿ç¨‹ä¸å®‰å…¨çš„åœºæ™¯ä½¿ç”¨çš„æ˜¯ ConcurrentHashMapã€‚</p> <p>HashTable çš„æºç ï¼Œå¾ˆç®€å•ç²—æš´ï¼Œç›´æ¥åœ¨æ–¹æ³•ä¸Šé”ï¼Œå¹¶å‘åº¦å¾ˆä½ï¼Œæœ€å¤šåŒæ—¶å…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼ŒConcurrentHashMap å°±å¥½å¾ˆå¤šäº†ï¼Œ1.7 å’Œ 1.8 æœ‰è¾ƒå¤§çš„ä¸åŒï¼Œä¸è¿‡å¹¶å‘åº¦éƒ½æ¯”å‰è€…å¥½å¤ªå¤šäº†ã€‚</p> <hr> <p><strong>SynchronizedMap</strong></p> <p>SynchronizedMap å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªæ™®é€šå¯¹è±¡ Mapï¼Œè¿˜æœ‰æ’æ–¥é” mutex:</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="n">m</span><span class="p">;</span><span class="w">     </span><span class="c1">// Backing Map</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="kd">final</span><span class="w"> </span><span class="n">Object</span><span class="w">      </span><span class="n">mutex</span><span class="p">;</span><span class="w">        </span><span class="c1">// Object on which to synchronize</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="n">SynchronizedMap</span><span class="p">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="n">m</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="na">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">m</span><span class="p">);</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">    </span><span class="n">mutex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">;</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="p">}</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="n">SynchronizedMap</span><span class="p">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">mutex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="na">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m</span><span class="p">;</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="na">mutex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mutex</span><span class="p">;</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="p">}</span>
</span></code></pre></div> <p>åœ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™å°±éœ€è¦ä¼ å…¥ä¸€ä¸ª Mapï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªæ„é€ å™¨ï¼Œå¦‚æœä¼ å…¥äº† mutex å‚æ•°ï¼Œåˆ™å°†å¯¹è±¡æ’æ–¥é”èµ‹å€¼ä¸ºä¼ å…¥çš„å¯¹è±¡ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™å°†å¯¹è±¡æ’æ–¥é”èµ‹å€¼ä¸º thisï¼Œå³è°ƒç”¨ synchronizedMap çš„å¯¹è±¡ï¼Œå°±æ˜¯ä¸Šé¢çš„Mapã€‚</p> <p>åˆ›å»ºå‡º synchronizedMap ä¹‹åï¼Œå†æ“ä½œ map çš„æ—¶å€™ï¼Œå°±ä¼šå¯¹æ–¹æ³•ä¸Šé”ï¼Œæºç ä¸Šå…¨æ˜¯ğŸ”</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">size</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">    </span><span class="kd">synchronized</span><span class="w"> </span><span class="p">(</span><span class="n">mutex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="k">return</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="na">size</span><span class="p">();}</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="p">}</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isEmpty</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">    </span><span class="kd">synchronized</span><span class="w"> </span><span class="p">(</span><span class="n">mutex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="k">return</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">();}</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="p">}</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">containsKey</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">    </span><span class="kd">synchronized</span><span class="w"> </span><span class="p">(</span><span class="n">mutex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="k">return</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="na">containsKey</span><span class="p">(</span><span class="n">key</span><span class="p">);}</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="p">}</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">containsValue</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">    </span><span class="kd">synchronized</span><span class="w"> </span><span class="p">(</span><span class="n">mutex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="k">return</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="na">containsValue</span><span class="p">(</span><span class="n">value</span><span class="p">);}</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="p">}</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="kd">public</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="w">    </span><span class="kd">synchronized</span><span class="w"> </span><span class="p">(</span><span class="n">mutex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="k">return</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">key</span><span class="p">);}</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="p">}</span>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="kd">public</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="nf">put</span><span class="p">(</span><span class="n">K</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="w">    </span><span class="kd">synchronized</span><span class="w"> </span><span class="p">(</span><span class="n">mutex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="k">return</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);}</span>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="p">}</span>
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="kd">public</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="nf">remove</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="w">    </span><span class="kd">synchronized</span><span class="w"> </span><span class="p">(</span><span class="n">mutex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="k">return</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">key</span><span class="p">);}</span>
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="p">}</span>
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">putAll</span><span class="p">(</span><span class="n">Map</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">K</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="n">map</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="w">    </span><span class="kd">synchronized</span><span class="w"> </span><span class="p">(</span><span class="n">mutex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="n">m</span><span class="p">.</span><span class="na">putAll</span><span class="p">(</span><span class="n">map</span><span class="p">);}</span>
</span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a><span class="p">}</span>
</span><span id="__span-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">clear</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-26"><a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="w">    </span><span class="kd">synchronized</span><span class="w"> </span><span class="p">(</span><span class="n">mutex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="n">m</span><span class="p">.</span><span class="na">clear</span><span class="p">();}</span>
</span><span id="__span-6-27"><a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a><span class="p">}</span>
</span></code></pre></div> <h4 id="952hashtable">9.5.2ã€Hashtable<a class="headerlink" href="#952hashtable" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p>Hashtable å’Œ HashMap å¾ˆåƒï¼Œä¸‹é¢æ¦‚è¿°ä¸€ä¸‹ä¸åŒç‚¹ï¼š</p> <p>è·Ÿ HashMap ç›¸æ¯” Hashtable æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œé€‚åˆåœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œå› ä¸º Hashtable åœ¨å¯¹æ•°æ®è¿›è¡Œæ“ä½œçš„æ—¶å€™éƒ½ä¼šä¸Šé”ï¼Œæ‰€ä»¥æ•ˆç‡ä¸å¤ªä¹è§‚ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">synchronized</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="n">Entry</span><span class="o">&lt;?</span><span class="p">,</span><span class="o">?&gt;</span><span class="w"> </span><span class="n">tab</span><span class="o">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">table</span><span class="p">;</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">key</span><span class="p">.</span><span class="na">hashCode</span><span class="p">();</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">hash</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0x7FFFFFFF</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">tab</span><span class="p">.</span><span class="na">length</span><span class="p">;</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Entry</span><span class="o">&lt;?</span><span class="p">,</span><span class="o">?&gt;</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tab</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">next</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">e</span><span class="p">.</span><span class="na">hash</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">hash</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">key</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">key</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">V</span><span class="p">)</span><span class="n">e</span><span class="p">.</span><span class="na">value</span><span class="p">;</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="p">}</span>
</span></code></pre></div> <p>å¤§éƒ¨åˆ†éƒ½æ˜¯ç›´æ¥ä½¿ç”¨ <code>synchronized</code> ä¸Šé”...</p> <hr> <p>Hashtable ä¸å…è®¸é”®æˆ–å€¼ä¸º null ï¼ŒHashMap çš„é”®å€¼åˆ™éƒ½å¯ä»¥ä¸º nullã€‚å› ä¸º HashMap å´åšäº†ç‰¹æ®Šå¤„ç†ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">h</span><span class="p">;</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">key</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="n">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">key</span><span class="p">.</span><span class="na">hashCode</span><span class="p">())</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="p">(</span><span class="n">h</span><span class="w"> </span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="mi">16</span><span class="p">);</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="p">}</span>
</span></code></pre></div> <p>Hashtable åˆ™åœ¨ put ç©ºå€¼çš„æ—¶å€™ä¼šç›´æ¥æŠ›ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">synchronized</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="nf">put</span><span class="p">(</span><span class="n">K</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">    </span><span class="c1">// å¦‚æœ value ä¸ºç©ºï¼Œç›´æ¥æŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">NullPointerException</span><span class="p">();</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">    </span><span class="c1">// Makes sure the key is not already in the hashtable.</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">    </span><span class="n">Entry</span><span class="o">&lt;?</span><span class="p">,</span><span class="o">?&gt;</span><span class="w"> </span><span class="n">tab</span><span class="o">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">table</span><span class="p">;</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">    </span><span class="c1">// å¦‚æœ key ä¸ºç©ºï¼Œæ‰§è¡Œ hashCode() æ–¹æ³•ä¼šæŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">key</span><span class="p">.</span><span class="na">hashCode</span><span class="p">();</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">hash</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0x7FFFFFFF</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">tab</span><span class="p">.</span><span class="na">length</span><span class="p">;</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="w">    </span><span class="nd">@SuppressWarnings</span><span class="p">(</span><span class="s">"unchecked"</span><span class="p">)</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="w">    </span><span class="n">Entry</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Entry</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="n">V</span><span class="o">&gt;</span><span class="p">)</span><span class="n">tab</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="p">;</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">    </span><span class="k">for</span><span class="p">(;</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entry</span><span class="p">.</span><span class="na">next</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">entry</span><span class="p">.</span><span class="na">hash</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">hash</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">entry</span><span class="p">.</span><span class="na">key</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">key</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="w">            </span><span class="n">V</span><span class="w"> </span><span class="n">old</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entry</span><span class="p">.</span><span class="na">value</span><span class="p">;</span>
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="w">            </span><span class="n">entry</span><span class="p">.</span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
</span><span id="__span-9-18"><a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">old</span><span class="p">;</span>
</span><span id="__span-9-19"><a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-9-20"><a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-9-21"><a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a>
</span><span id="__span-9-22"><a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a><span class="w">    </span><span class="n">addEntry</span><span class="p">(</span><span class="n">hash</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">index</span><span class="p">);</span>
</span><span id="__span-9-23"><a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-9-24"><a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a><span class="p">}</span>
</span></code></pre></div> <p>å¦‚æœä½¿ç”¨ null å€¼ï¼Œå½“é€šè¿‡ get(key) è·å–å¯¹åº”çš„ value æ—¶ï¼Œå¦‚æœè·å–åˆ°çš„æ˜¯ null æ—¶ï¼Œæ— æ³•åˆ¤æ–­å®ƒæ˜¯ putï¼ˆk,vï¼‰çš„æ—¶å€™ value ä¸º nullï¼Œè¿˜æ˜¯è¿™ä¸ª key ä»æ¥æ²¡æœ‰åšè¿‡æ˜ å°„ã€‚HashMapæ˜¯éå¹¶å‘çš„ï¼Œå¯ä»¥é€šè¿‡ contains(key) æ¥åšè¿™ä¸ªåˆ¤æ–­ã€‚è€Œæ”¯æŒå¹¶å‘çš„ Map åœ¨è°ƒç”¨ m.containsï¼ˆkeyï¼‰å’Œ m.get(key) ï¼Œm å¯èƒ½å·²ç»ä¸åŒäº†ï¼ˆConcurrentHashMap åŒç†ï¼‰ã€‚</p> <hr> <p>Hashtable å¯ä»¥ä½¿ç”¨ Enumeration å’Œ Iterator éå†ï¼ŒHashMap åªå¯ä»¥ç”¨ Iteratorã€‚</p> <p>æä¸€å˜´ï¼šEnumeration ä½¿ç”¨äº†==å®‰å…¨å¤±è´¥æœºåˆ¶ï¼ˆfail-safeï¼‰==ã€‚</p> <p>é‡‡ç”¨å®‰å…¨å¤±è´¥æœºåˆ¶çš„é›†åˆå®¹å™¨ï¼Œåœ¨éå†æ—¶ä¸æ˜¯ç›´æ¥åœ¨é›†åˆå†…å®¹ä¸Šè®¿é—®çš„ï¼Œè€Œæ˜¯å…ˆ copy åŸæœ‰é›†åˆå†…å®¹ï¼Œåœ¨æ‹·è´çš„é›†åˆä¸Šè¿›è¡Œéå†ã€‚</p> <ul> <li>åŸç†ï¼šç”±äºè¿­ä»£æ—¶æ˜¯å¯¹åŸé›†åˆçš„æ‹·è´çš„å€¼è¿›è¡Œéå†ï¼Œæ‰€ä»¥åœ¨éå†è¿‡ç¨‹ä¸­å¯¹åŸé›†åˆæ‰€åšçš„ä¿®æ”¹å¹¶ä¸èƒ½è¢«è¿­ä»£å™¨æ£€æµ‹åˆ°ï¼Œæ‰€ä»¥ä¸ä¼šè§¦å‘<code>ConcurrentModificationException</code></li> <li>ç¼ºç‚¹ï¼šåŸºäºæ‹·è´å†…å®¹çš„ä¼˜ç‚¹æ˜¯é¿å…äº†<code>ConcurrentModificationException</code>ï¼Œä½†åŒæ ·çš„ï¼Œè¿­ä»£å™¨å¹¶ä¸èƒ½è®¿é—®åˆ°ä¿®æ”¹åçš„å†…å®¹ï¼ˆç®€å•çš„æ¥è¯´å°±æ˜¯è¿­ä»£å™¨éå†çš„æ˜¯å¼€å§‹éå†é‚£ä¸€åˆ»æ‹¿åˆ°çš„é›†åˆæ‹·è´ï¼Œåœ¨éå†æœŸé—´åŸé›†åˆå‘ç”Ÿçš„ä¿®æ”¹è¿­ä»£å™¨æ˜¯ä¸çŸ¥é“çš„ï¼‰ã€‚</li> </ul> <blockquote> <p>java.util.concurrent åŒ…ä¸‹çš„å®¹å™¨éƒ½æ˜¯å®‰å…¨å¤±è´¥ï¼Œå¯ä»¥åœ¨å¤šçº¿ç¨‹ä¸‹å¹¶å‘ä½¿ç”¨ï¼Œå¹¶å‘ä¿®æ”¹ã€‚</p> </blockquote> <hr> <p>Hashtable ç»§æ‰¿äº† Dictionary ç±»ï¼Œè€Œ HashMap ç»§æ‰¿çš„æ˜¯ AbstractMap ç±»ï¼ŒDictionary æ˜¯ JDK 1.0 æ·»åŠ çš„ï¼Œè²Œä¼¼æ²¡äººç”¨è¿‡è¿™ä¸ªï¼Œæˆ‘ä¹Ÿæ²¡ç”¨è¿‡...</p> <p>HashMap çš„åˆå§‹å®¹é‡ä¸ºï¼š16ï¼ŒHashtable åˆå§‹å®¹é‡ä¸ºï¼š11ï¼Œä¸¤è€…çš„è´Ÿè½½å› å­é»˜è®¤éƒ½æ˜¯ï¼š0.75ã€‚</p> <p>å½“ç°æœ‰å®¹é‡å¤§äºæ€»å®¹é‡ * è´Ÿè½½å› å­æ—¶ï¼ŒHashMap æ‰©å®¹è§„åˆ™ä¸ºå½“å‰å®¹é‡ç¿»å€ï¼ˆ2nï¼‰ï¼ŒHashtable æ‰©å®¹è§„åˆ™ä¸ºå½“å‰å®¹é‡ç¿»å€ + 1ï¼ˆ2n+1ï¼‰ã€‚</p> <h4 id="953concurrenthashmap">9.5.3ã€ConcurrentHashMap<a class="headerlink" href="#953concurrenthashmap" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p>è™½ç„¶ Hashtable æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯ get / put æ‰€æœ‰ç›¸å…³æ“ä½œéƒ½æ˜¯ synchronized çš„ï¼Œè¿™ç›¸å½“äºç»™æ•´ä¸ªå“ˆå¸Œè¡¨åŠ äº†ä¸€æŠŠå¤§é”ï¼Œå¤šçº¿ç¨‹ä¸­åªè¦æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®æˆ–æ“ä½œè¯¥å¯¹è±¡ï¼Œé‚£å…¶ä»–çº¿ç¨‹åªèƒ½é˜»å¡ã€‚</p> <p>ConcurrentHashMap 1.7 å’Œ 1.8 ç‰ˆæœ¬ç»“æ„ä¸åŒï¼Œä¸‹é¢åˆ†åˆ«æ¦‚è¿°ï¼š</p> <h5 id="jdk-17">JDK 1.7<a class="headerlink" href="#jdk-17" title="é”šç‚¹é“¾æ¥">Â¶</a></h5> <p>åœ¨ JDK1.5~1.7ç‰ˆæœ¬ï¼ŒJavaä½¿ç”¨äº†==åˆ†æ®µé”==æŠ€æœ¯å®ç° ConcurrentHashMapï¼Œç®€è€Œè¨€ä¹‹ï¼ŒConcurrentHashMap åœ¨å¯¹è±¡ä¸­ä¿å­˜äº†ä¸€ä¸ª Segment æ•°ç»„ï¼Œå³å°†æ•´ä¸ª Hash è¡¨åˆ’åˆ†ä¸ºå¤šä¸ªåˆ†æ®µï¼›è€Œæ¯ä¸ª Segment å…ƒç´ ç±»ä¼¼äºä¸€ä¸ª Hashtableï¼›è¿™æ ·åœ¨æ‰§è¡Œ put æ“ä½œæ—¶é¦–å…ˆæ ¹æ® hash ç®—æ³•å®šä½åˆ°å…ƒç´ å±äºå“ªä¸ªSegmentï¼Œç„¶åå¯¹è¯¥ Segment åŠ é”å³å¯ã€‚</p> <p>Segment æ˜¯ ConcurrentHashMap çš„ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œä¸»è¦çš„ç»„æˆå¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Segment</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">ReentrantLock</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Serializable</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">serialVersionUID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2249069246763182397L</span><span class="p">;</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span><span class="c1">// å’Œ HashMap ä¸­çš„ HashEntry ä½œç”¨ä¸€æ ·ï¼ŒçœŸæ­£å­˜æ”¾æ•°æ®çš„æ¡¶</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span><span class="kd">transient</span><span class="w"> </span><span class="kd">volatile</span><span class="w"> </span><span class="n">HashEntry</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="n">V</span><span class="o">&gt;[]</span><span class="w"> </span><span class="n">table</span><span class="p">;</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">    </span><span class="kd">transient</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="p">;</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">    </span><span class="c1">// è®°å¾—å¿«é€Ÿå¤±è´¥ï¼ˆfailâ€”fastï¼‰ä¹ˆï¼Ÿ</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">    </span><span class="kd">transient</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">modCount</span><span class="p">;</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">    </span><span class="c1">// å¤§å°</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">    </span><span class="kd">transient</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">threshold</span><span class="p">;</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">    </span><span class="c1">// è´Ÿè½½å› å­</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">loadFactor</span><span class="p">;</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="p">}</span>
</span></code></pre></div> <p>HashEntry è·Ÿ HashMap ä¸­çš„ Entry å·®ä¸å¤šï¼Œä½†æ˜¯ä¸åŒç‚¹æ˜¯ï¼Œä»–ä½¿ç”¨ volatile å»ä¿®é¥°äº†ä»–çš„æ•°æ® Value è¿˜æœ‰ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ nextã€‚</p> <p>å…¶ä¸­ Segment ç»§æ‰¿äº ReentrantLockï¼Œä¸ä¼šåƒ HashTable é‚£æ ·ä¸ç®¡æ˜¯ put è¿˜æ˜¯ get æ“ä½œéƒ½éœ€è¦åšåŒæ­¥å¤„ç†ï¼›ç†è®ºä¸Š ConcurrentHashMap æ”¯æŒ CurrencyLevel (Segment æ•°ç»„æ•°é‡) çš„çº¿ç¨‹å¹¶å‘ï¼›æ¯å½“ä¸€ä¸ªçº¿ç¨‹å ç”¨é”è®¿é—®ä¸€ä¸ª Segment æ—¶ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–çš„ Segmentã€‚</p> <p>å°±æ˜¯è¯´å¦‚æœå®¹é‡å¤§å°æ˜¯ 16 ä»–çš„å¹¶å‘åº¦å°±æ˜¯ 16ï¼Œå¯ä»¥åŒæ—¶å…è®¸ 16 ä¸ªçº¿ç¨‹æ“ä½œ 16 ä¸ª Segment è€Œä¸”è¿˜æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p> <hr> <p><strong>put / set æ–¹æ³•</strong></p> <p>é€šè¿‡ key å®šä½åˆ° Segment ï¼Œä¹‹ååœ¨å¯¹åº”çš„ Segement ä¸­è¿›è¡Œå…·ä½“çš„çš„ putã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kd">public</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="nf">put</span><span class="p">(</span><span class="n">K</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">    </span><span class="n">Segment</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">NullPointerException</span><span class="p">();</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hash</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">hash</span><span class="w"> </span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">segmentShift</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">segmentMask</span><span class="p">;</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Segment</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="n">V</span><span class="o">&gt;</span><span class="p">)</span><span class="n">UNSAFE</span><span class="p">.</span><span class="na">getObject</span><span class="w">          </span><span class="c1">// nonvolatile; recheck</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="w">         </span><span class="p">(</span><span class="n">segments</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">SSHIFT</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">SBASE</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="c1">//  in ensureSegment</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="w">        </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ensureSegment</span><span class="p">(</span><span class="n">j</span><span class="p">);</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="p">}</span>
</span></code></pre></div> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kd">final</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="nf">put</span><span class="p">(</span><span class="n">K</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">hash</span><span class="p">,</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">onlyIfAbsent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">    </span><span class="n">HashEntry</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tryLock</span><span class="p">()</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">:</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">    </span><span class="n">scanAndLockForPut</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">    </span><span class="n">V</span><span class="w"> </span><span class="n">oldValue</span><span class="p">;</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">        </span><span class="n">HashEntry</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="n">V</span><span class="o">&gt;[]</span><span class="w"> </span><span class="n">tab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">table</span><span class="p">;</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">tab</span><span class="p">.</span><span class="na">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">hash</span><span class="p">;</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="w">        </span><span class="n">HashEntry</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entryAt</span><span class="p">(</span><span class="n">tab</span><span class="p">,</span><span class="w"> </span><span class="n">index</span><span class="p">);</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">HashEntry</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">first</span><span class="p">;;)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="w">                </span><span class="n">K</span><span class="w"> </span><span class="n">k</span><span class="p">;</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">key</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">||</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="w">                    </span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">hash</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">key</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">k</span><span class="p">)))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="w">                    </span><span class="n">oldValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">value</span><span class="p">;</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">onlyIfAbsent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="w">                        </span><span class="n">e</span><span class="p">.</span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="w">                        </span><span class="o">++</span><span class="n">modCount</span><span class="p">;</span>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="w">                    </span><span class="p">}</span>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a><span class="w">                    </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a><span class="w">                </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">next</span><span class="p">;</span>
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-12-23"><a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a><span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-24"><a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">node</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span>
</span><span id="__span-12-25"><a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a><span class="w">                    </span><span class="n">node</span><span class="p">.</span><span class="na">setNext</span><span class="p">(</span><span class="n">first</span><span class="p">);</span>
</span><span id="__span-12-26"><a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a><span class="w">                </span><span class="k">else</span>
</span><span id="__span-12-27"><a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a><span class="w">                    </span><span class="n">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashEntry</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="n">V</span><span class="o">&gt;</span><span class="p">(</span><span class="n">hash</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">first</span><span class="p">);</span>
</span><span id="__span-12-28"><a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-12-29"><a id="__codelineno-12-29" name="__codelineno-12-29" href="#__codelineno-12-29"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">threshold</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">tab</span><span class="p">.</span><span class="na">length</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">MAXIMUM_CAPACITY</span><span class="p">)</span>
</span><span id="__span-12-30"><a id="__codelineno-12-30" name="__codelineno-12-30" href="#__codelineno-12-30"></a><span class="w">                    </span><span class="n">rehash</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
</span><span id="__span-12-31"><a id="__codelineno-12-31" name="__codelineno-12-31" href="#__codelineno-12-31"></a><span class="w">                </span><span class="k">else</span>
</span><span id="__span-12-32"><a id="__codelineno-12-32" name="__codelineno-12-32" href="#__codelineno-12-32"></a><span class="w">                    </span><span class="n">setEntryAt</span><span class="p">(</span><span class="n">tab</span><span class="p">,</span><span class="w"> </span><span class="n">index</span><span class="p">,</span><span class="w"> </span><span class="n">node</span><span class="p">);</span>
</span><span id="__span-12-33"><a id="__codelineno-12-33" name="__codelineno-12-33" href="#__codelineno-12-33"></a><span class="w">                </span><span class="o">++</span><span class="n">modCount</span><span class="p">;</span>
</span><span id="__span-12-34"><a id="__codelineno-12-34" name="__codelineno-12-34" href="#__codelineno-12-34"></a><span class="w">                </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
</span><span id="__span-12-35"><a id="__codelineno-12-35" name="__codelineno-12-35" href="#__codelineno-12-35"></a><span class="w">                </span><span class="n">oldValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-12-36"><a id="__codelineno-12-36" name="__codelineno-12-36" href="#__codelineno-12-36"></a><span class="w">                </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-12-37"><a id="__codelineno-12-37" name="__codelineno-12-37" href="#__codelineno-12-37"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-12-38"><a id="__codelineno-12-38" name="__codelineno-12-38" href="#__codelineno-12-38"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-12-39"><a id="__codelineno-12-39" name="__codelineno-12-39" href="#__codelineno-12-39"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-40"><a id="__codelineno-12-40" name="__codelineno-12-40" href="#__codelineno-12-40"></a><span class="w">        </span><span class="n">unlock</span><span class="p">();</span>
</span><span id="__span-12-41"><a id="__codelineno-12-41" name="__codelineno-12-41" href="#__codelineno-12-41"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-12-42"><a id="__codelineno-12-42" name="__codelineno-12-42" href="#__codelineno-12-42"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">oldValue</span><span class="p">;</span>
</span><span id="__span-12-43"><a id="__codelineno-12-43" name="__codelineno-12-43" href="#__codelineno-12-43"></a><span class="p">}</span>
</span></code></pre></div> <p>è™½ç„¶ HashEntry ä¸­çš„ value æ˜¯ç”¨ volatile å…³é”®è¯ä¿®é¥°çš„ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ä¿è¯å¹¶å‘çš„åŸå­æ€§ï¼Œæ‰€ä»¥ put æ“ä½œæ—¶ä»ç„¶éœ€è¦åŠ é”å¤„ç†ã€‚</p> <p>é¦–å…ˆä¼šå°è¯•è·å–é”ï¼Œå¦‚æœè·å–å¤±è´¥è‚¯å®šå°±æœ‰å…¶ä»–çº¿ç¨‹å­˜åœ¨ç«äº‰ï¼Œåˆ™åˆ©ç”¨ <code>scanAndLockForPut()</code> è‡ªæ—‹è·å–é”ã€‚å¦‚æœé‡è¯•çš„æ¬¡æ•°è¾¾åˆ°äº†<code>MAX_SCAN_RETRIES</code>åˆ™æ”¹ä¸ºé˜»å¡é”è·å–ï¼Œä¿è¯èƒ½æˆåŠŸã€‚ç„¶åå°†å½“å‰ Segment ä¸­çš„ table é€šè¿‡ key çš„ hashcode å®šä½åˆ° HashEntryã€‚éå†è¯¥ HashEntryï¼Œå¦‚æœä¸ä¸ºç©ºåˆ™åˆ¤æ–­ä¼ å…¥çš„ key å’Œå½“å‰éå†çš„ key æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰åˆ™è¦†ç›–æ—§çš„ valueï¼›ä¸ä¸ºç©ºåˆ™éœ€è¦æ–°å»ºä¸€ä¸ª HashEntry å¹¶åŠ å…¥åˆ° Segment ä¸­ï¼ŒåŒæ—¶ä¼šå…ˆåˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹ã€‚æœ€åä¼šè§£é™¤æ‰€è·å–å½“å‰ Segment çš„é”ã€‚</p> <p>get é€»è¾‘æ¯”è¾ƒç®€å•ï¼š</p> <p>åªéœ€è¦å°† Key é€šè¿‡ Hash ä¹‹åå®šä½åˆ°å…·ä½“çš„ Segment ï¼Œå†é€šè¿‡ä¸€æ¬¡ Hash å®šä½åˆ°å…·ä½“çš„å…ƒç´ ä¸Šã€‚ç”±äº HashEntry ä¸­çš„ value å±æ€§æ˜¯ç”¨ volatile å…³é”®è¯ä¿®é¥°çš„ï¼Œä¿è¯äº†å†…å­˜å¯è§æ€§ï¼Œæ‰€ä»¥æ¯æ¬¡è·å–æ—¶éƒ½æ˜¯æœ€æ–°å€¼ã€‚ConcurrentHashMap çš„ get æ–¹æ³•æ˜¯éå¸¸é«˜æ•ˆçš„ï¼Œå› ä¸ºæ•´ä¸ªè¿‡ç¨‹éƒ½ä¸éœ€è¦åŠ é”ã€‚</p> <hr> <p>è™½ç„¶ 1.7 ä¸­ ConcurrentHashMap è™½ç„¶å¯ä»¥æ”¯æŒæ¯ä¸ª Segment å¹¶å‘è®¿é—®ï¼Œä½†æ˜¯ç”±äºæ•°æ®ç»“æ„æ˜¯æ•°ç»„åŠ é“¾è¡¨çš„æ–¹å¼ï¼Œå› æ­¤åœ¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¼šå¯¼è‡´æ•ˆç‡å¾ˆä½ï¼Œæ‰€ä»¥åœ¨ 1.8 ä¸­å¯¹ç»“æ„è¿›è¡Œäº†ä¼˜åŒ–ã€‚</p> <h5 id="jdk-18">JDK 1.8<a class="headerlink" href="#jdk-18" title="é”šç‚¹é“¾æ¥">Â¶</a></h5> <p>åœ¨ 1.8 ä¸­æŠ›å¼ƒäº†åŸæœ‰çš„ Segment åˆ†æ®µé”ï¼Œè€Œé‡‡ç”¨äº† <code>CAS + synchronized</code> æ¥ä¿è¯å¹¶å‘å®‰å…¨æ€§ã€‚è·ŸHashMapå¾ˆåƒï¼Œä¹ŸæŠŠä¹‹å‰çš„ HashEntry æ”¹æˆäº†Nodeï¼Œä½†æ˜¯ä½œç”¨ä¸å˜ï¼ŒæŠŠå€¼å’Œ next é‡‡ç”¨äº† volatile å»ä¿®é¥°ï¼Œä¿è¯äº†å¯è§æ€§ï¼Œå¹¶ä¸”ä¹Ÿå¼•å…¥äº†çº¢é»‘æ ‘ï¼Œåœ¨é“¾è¡¨å¤§äºä¸€å®šå€¼çš„æ—¶å€™ä¼šè½¬æ¢ï¼ˆé»˜è®¤æ˜¯8ï¼‰ã€‚</p> <hr> <p><strong>put / set æ–¹æ³•</strong></p> <p>put:</p> <ol> <li>æ ¹æ® key è®¡ç®—å‡º hashcode ã€‚</li> <li>åˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œåˆå§‹åŒ–ã€‚</li> <li>å³ä¸ºå½“å‰ key å®šä½å‡ºçš„ Nodeï¼Œå¦‚æœä¸ºç©ºè¡¨ç¤ºå½“å‰ä½ç½®å¯ä»¥å†™å…¥æ•°æ®ï¼Œåˆ©ç”¨ <code>CAS</code> å°è¯•å†™å…¥ï¼Œå¤±è´¥åˆ™è‡ªæ—‹ä¿è¯æˆåŠŸã€‚</li> <li>å¦‚æœå½“å‰ä½ç½®çš„ <code>hashcode == MOVED == -1</code>,åˆ™éœ€è¦è¿›è¡Œæ‰©å®¹ã€‚</li> <li>å¦‚æœéƒ½ä¸æ»¡è¶³ï¼Œåˆ™åˆ©ç”¨ synchronized é”å†™å…¥æ•°æ®ã€‚</li> <li>å¦‚æœæ•°é‡å¤§äº <code>TREEIFY_THRESHOLD</code> åˆ™è¦è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚</li> </ol> <p>get:</p> <ul> <li>æ ¹æ®è®¡ç®—å‡ºæ¥çš„ hashcode å¯»å€ï¼Œå¦‚æœå°±åœ¨æ¡¶ä¸Šé‚£ä¹ˆç›´æ¥è¿”å›å€¼ã€‚</li> <li>å¦‚æœæ˜¯çº¢é»‘æ ‘é‚£å°±æŒ‰ç…§æ ‘çš„æ–¹å¼è·å–å€¼ã€‚</li> <li>å°±ä¸æ»¡è¶³é‚£å°±æŒ‰ç…§é“¾è¡¨çš„æ–¹å¼éå†è·å–å€¼ã€‚</li> </ul> <h2 id="96iteratorè¿­ä»£å™¨">9.6ã€Iteratorï¼ˆè¿­ä»£å™¨ï¼‰<a class="headerlink" href="#96iteratorè¿­ä»£å™¨" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>é¦–å…ˆè¯´ä¸€ä¸‹è¿­ä»£å™¨æ¨¡å¼ï¼Œå®ƒæ˜¯ Java ä¸­å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚ç”¨äºé¡ºåºè®¿é—®é›†åˆå¯¹è±¡çš„å…ƒç´ ï¼Œæ— éœ€çŸ¥é“é›†åˆå¯¹è±¡çš„åº•å±‚å®ç°ã€‚Iterator æ˜¯å¯ä»¥éå†é›†åˆçš„å¯¹è±¡ï¼Œä¸ºå„ç§å®¹å™¨æä¾›äº†å…¬å…±çš„æ“ä½œæ¥å£ï¼Œéš”ç¦»å¯¹å®¹å™¨çš„éå†æ“ä½œå’Œåº•å±‚å®ç°ï¼Œä»è€Œè§£è€¦ã€‚ç¼ºç‚¹æ˜¯å¢åŠ æ–°çš„é›†åˆç±»éœ€è¦å¯¹åº”å¢åŠ æ–°çš„è¿­ä»£å™¨ç±»ï¼Œè¿­ä»£å™¨ç±»ä¸é›†åˆç±»æˆå¯¹å¢åŠ ã€‚</p> <p>==Iteratorï¼ˆè¿­ä»£å™¨ï¼‰==æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯éå†å®¹å™¨çš„æ‰€æœ‰å…ƒç´ ï¼Œä¹Ÿæ˜¯ Java é›†åˆæ¡†æ¶çš„æˆå‘˜ï¼Œä½†å®ƒä¸ Collection å’Œ Map ç³»åˆ—çš„é›†åˆä¸ä¸€æ ·ï¼ŒCollection å’Œ Map ç³»åˆ—é›†åˆä¸»è¦ç”¨äºç››è£…å…¶ä»–å¯¹è±¡ï¼Œè€Œ Iterator åˆ™ä¸»è¦ç”¨äºéå†ï¼ˆå³è¿­ä»£è®¿é—®ï¼‰Collection é›†åˆä¸­çš„å…ƒç´ ã€‚</p> <p>Iterator æ¥å£é‡Œå®šä¹‰äº†å¦‚ä¸‹ 4 ä¸ªæ–¹æ³•ã€‚</p> <ul> <li>boolean hasNext()ï¼šå¦‚æœè¢«è¿­ä»£çš„é›†åˆå…ƒç´ è¿˜æ²¡æœ‰è¢«éå†å®Œï¼Œåˆ™è¿”å› trueã€‚</li> <li>Object next()ï¼šè¿”å›é›†åˆé‡Œçš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚</li> <li>void remove()ï¼šåˆ é™¤é›†åˆé‡Œä¸Šä¸€æ¬¡ next æ–¹æ³•è¿”å›çš„å…ƒç´ ã€‚</li> <li>void forEachRemaining(Consumer action)ï¼šè¿™æ˜¯ Java 8 ä¸º Iterator æ–°å¢çš„é»˜è®¤æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä½¿ç”¨ Lambda è¡¨è¾¾å¼æ¥éå†é›†åˆå…ƒç´ ã€‚</li> </ul> <p>ä¸‹é¢ç¨‹åºç¤ºèŒƒäº†é€šè¿‡ Iterator æ¥å£æ¥éå†é›†åˆå…ƒç´ ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Collection</span><span class="p">;</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashSet</span><span class="p">;</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Iterator</span><span class="p">;</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">IteratorTest</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="w">        </span><span class="c1">// åˆ›å»ºä¸€ä¸ªé›†åˆ</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="w">        </span><span class="n">Collection</span><span class="w"> </span><span class="n">objs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashSet</span><span class="p">();</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Javaæ•™ç¨‹"</span><span class="p">);</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Cè¯­è¨€æ•™ç¨‹"</span><span class="p">);</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘C++æ•™ç¨‹"</span><span class="p">);</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="w">        </span><span class="c1">// è°ƒç”¨forEach()æ–¹æ³•éå†é›†åˆ</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="w">        </span><span class="c1">// è·å–booksé›†åˆå¯¹åº”çš„è¿­ä»£å™¨</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="w">        </span><span class="n">Iterator</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">objs</span><span class="p">.</span><span class="na">iterator</span><span class="p">();</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="na">hasNext</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="w">            </span><span class="c1">// it.next()æ–¹æ³•è¿”å›çš„æ•°æ®ç±»å‹æ˜¯Objectç±»å‹ï¼Œå› æ­¤éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="p">)</span><span class="w"> </span><span class="n">it</span><span class="p">.</span><span class="na">next</span><span class="p">();</span>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">obj</span><span class="p">);</span>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">obj</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Cè¯­è¨€æ•™ç¨‹"</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a><span class="w">                </span><span class="c1">// ä»é›†åˆä¸­åˆ é™¤ä¸Šä¸€æ¬¡next()æ–¹æ³•è¿”å›çš„å…ƒç´ </span>
</span><span id="__span-13-21"><a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a><span class="w">                </span><span class="n">it</span><span class="p">.</span><span class="na">remove</span><span class="p">();</span>
</span><span id="__span-13-22"><a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-13-23"><a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a><span class="w">            </span><span class="c1">// å¯¹bookå˜é‡èµ‹å€¼ï¼Œä¸ä¼šæ”¹å˜é›†åˆå…ƒç´ æœ¬èº«</span>
</span><span id="__span-13-24"><a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a><span class="w">            </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Pythonè¯­è¨€æ•™ç¨‹"</span><span class="p">;</span>
</span><span id="__span-13-25"><a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-13-26"><a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">objs</span><span class="p">);</span>
</span><span id="__span-13-27"><a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-13-28"><a id="__codelineno-13-28" name="__codelineno-13-28" href="#__codelineno-13-28"></a><span class="p">}</span>
</span></code></pre></div> <p>ä»ä¸Šé¢ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼ŒIterator ä»…ç”¨äºéå†é›†åˆï¼Œå¦‚æœéœ€è¦åˆ›å»º Iterator å¯¹è±¡ï¼Œåˆ™å¿…é¡»æœ‰ä¸€ä¸ªè¢«è¿­ä»£çš„é›†åˆã€‚æ²¡æœ‰é›†åˆçš„ Iterator æ²¡æœ‰å­˜åœ¨çš„ä»·å€¼ã€‚</p> <p>æ³¨æ„ï¼šIterator å¿…é¡»ä¾é™„äº Collection å¯¹è±¡ï¼Œè‹¥æœ‰ä¸€ä¸ª Iterator å¯¹è±¡ï¼Œåˆ™å¿…ç„¶æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„ Collection å¯¹è±¡ã€‚Iterator æä¾›äº†ä¸¤ä¸ªæ–¹æ³•æ¥è¿­ä»£è®¿é—® Collection é›†åˆé‡Œçš„å…ƒç´ ï¼Œå¹¶å¯é€šè¿‡ remove() æ–¹æ³•æ¥åˆ é™¤é›†åˆä¸­ä¸Šä¸€æ¬¡ next() æ–¹æ³•è¿”å›çš„é›†åˆå…ƒç´ ã€‚</p> <p>ä¸Šé¢ç¨‹åºä¸­ç¬¬ 24 è¡Œä»£ç å¯¹è¿­ä»£å˜é‡ obj è¿›è¡Œèµ‹å€¼ï¼Œä½†å½“å†æ¬¡è¾“å²€ objs é›†åˆæ—¶ï¼Œä¼šçœ‹åˆ°é›†åˆé‡Œçš„å…ƒç´ æ²¡æœ‰ä»»ä½•æ”¹å˜ã€‚æ‰€ä»¥å½“ä½¿ç”¨ Iterator å¯¹é›†åˆå…ƒç´ è¿›è¡Œè¿­ä»£æ—¶ï¼ŒIterator å¹¶ä¸æ˜¯æŠŠé›†åˆå…ƒç´ æœ¬èº«ä¼ ç»™äº†è¿­ä»£å˜é‡ï¼Œè€Œæ˜¯æŠŠé›†åˆå…ƒç´ çš„å€¼ä¼ ç»™äº†è¿­ä»£å˜é‡ï¼Œæ‰€ä»¥ä¿®æ”¹è¿­ä»£å˜é‡çš„å€¼å¯¹é›†åˆå…ƒç´ æœ¬èº«æ²¡æœ‰ä»»ä½•å½±å“ã€‚</p> <p>å½“ä½¿ç”¨ Iterator è¿­ä»£è®¿é—® Collection é›†åˆå…ƒç´ æ—¶ï¼ŒCollection é›†åˆé‡Œçš„å…ƒç´ ä¸èƒ½è¢«æ”¹å˜ï¼Œåªæœ‰é€šè¿‡ Iterator çš„ remove() æ–¹æ³•åˆ é™¤ä¸Šä¸€æ¬¡ next() æ–¹æ³•è¿”å›çš„é›†åˆå…ƒç´ æ‰å¯ä»¥ï¼Œå¦åˆ™å°†ä¼šå¼•å‘â€œjava.util.ConcurrentModificationExceptionâ€å¼‚å¸¸ã€‚ä¸‹é¢ç¨‹åºç¤ºèŒƒäº†è¿™ä¸€ç‚¹ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">IteratorErrorTest</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">        </span><span class="c1">// åˆ›å»ºä¸€ä¸ªé›†åˆ</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">        </span><span class="n">Collection</span><span class="w"> </span><span class="n">objs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashSet</span><span class="p">();</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Javaæ•™ç¨‹"</span><span class="p">);</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Cè¯­è¨€æ•™ç¨‹"</span><span class="p">);</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘C++æ•™ç¨‹"</span><span class="p">);</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">        </span><span class="c1">// è·å–booksé›†åˆå¯¹åº”çš„è¿­ä»£å™¨</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="w">        </span><span class="n">Iterator</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">objs</span><span class="p">.</span><span class="na">iterator</span><span class="p">();</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="na">hasNext</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="p">)</span><span class="w"> </span><span class="n">it</span><span class="p">.</span><span class="na">next</span><span class="p">();</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">obj</span><span class="p">);</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">obj</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘C++æ•™ç¨‹"</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="w">                </span><span class="c1">// ä½¿ç”¨Iteratorè¿­ä»£è¿‡ç¨‹ä¸­ï¼Œä¸å¯ä¿®æ”¹é›†åˆå…ƒç´ ï¼Œä¸‹é¢ä»£ç å¼•å‘å¼‚å¸¸</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="w">                </span><span class="n">objs</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">obj</span><span class="p">);</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-14-17"><a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-14-18"><a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-14-19"><a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span class="p">}</span>
</span></code></pre></div> <p>è¾“å‡ºç»“æœä¸ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>Cè¯­è¨€ä¸­æ–‡ç½‘C++æ•™ç¨‹
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>Exception in thread "main" java.util.ConcurrentModificationException
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>        at java.util.HashMap$HashIterator.nextNode(Unknown Source)
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>        at java.util.HashMap$KeyIterator.next(Unknown Source)
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>        at IteratorErrorTest.main(IteratorErrorTest.java:15)
</span></code></pre></div> <p>ä¸Šé¢ç¨‹åºä¸­ç¬¬ 15 è¡Œä»£ç ä½äº Iterator è¿­ä»£å—å†…ï¼Œä¹Ÿå°±æ˜¯åœ¨ Iterator è¿­ä»£ Collection é›†åˆè¿‡ç¨‹ä¸­ä¿®æ”¹äº† Collection é›†åˆï¼Œæ‰€ä»¥ç¨‹åºå°†åœ¨è¿è¡Œæ—¶å¼•å‘å¼‚å¸¸ã€‚</p> <p>Iterator è¿­ä»£å™¨é‡‡ç”¨çš„æ˜¯==å¿«é€Ÿå¤±è´¥ï¼ˆfail-fastï¼‰æœºåˆ¶ï¼Œ==ä¸€æ—¦åœ¨è¿­ä»£è¿‡ç¨‹ä¸­æ£€æµ‹åˆ°è¯¥é›†åˆå·²ç»è¢«ä¿®æ”¹ï¼ˆé€šå¸¸æ˜¯ç¨‹åºä¸­çš„å…¶ä»–çº¿ç¨‹ä¿®æ”¹ï¼‰ï¼Œç¨‹åºç«‹å³å¼•å‘ ConcurrentModificationException å¼‚å¸¸ï¼Œè€Œä¸æ˜¯æ˜¾ç¤ºä¿®æ”¹åçš„ç»“æœï¼Œè¿™æ ·å¯ä»¥é¿å…å…±äº«èµ„æºè€Œå¼•å‘çš„æ½œåœ¨é—®é¢˜ã€‚</p> <p>==å¿«é€Ÿå¤±è´¥ï¼ˆfail-fastï¼‰æœºåˆ¶ï¼Œæ˜¯ Java Collection é›†åˆä¸­çš„ä¸€ç§é”™è¯¯æ£€æµ‹æœºåˆ¶ã€‚==è¿­ä»£å™¨åœ¨éå†æ—¶ç›´æ¥è®¿é—®é›†åˆä¸­çš„å†…å®¹,å¹¶ä¸”åœ¨éå†è¿‡ç¨‹ä¸­ä½¿ç”¨ä¸€ä¸ªmodCountå˜é‡ï¼Œé›†åˆä¸­åœ¨è¢«éå†æœŸé—´å¦‚æœå…ƒç´ æ•°é‡å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šæ”¹å˜modCountçš„å€¼ï¼Œæ¯å½“è¿­ä»£å™¨ä½¿ç”¨ hashNext() / next() éå†ä¸‹ä¸€ä¸ªå…ƒç´ ä¹‹å‰ï¼Œéƒ½ä¼šæ£€æµ‹modCountå˜é‡å’ŒexpectedmodCountå€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰å°±è¿”å›éå†ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œç»ˆæ­¢éå†ã€‚</p> <p>è¿™é‡Œå¼‚å¸¸çš„æŠ›å‡ºæ¡ä»¶æ˜¯æ£€æµ‹åˆ°<code>modCount != expectedmodCount</code> ï¼Œå¦‚æœé›†åˆå‘ç”Ÿå˜åŒ–æ—¶ä¿®æ”¹<code>modCount</code>å€¼åˆšå¥½åˆè®¾ç½®ä¸ºäº†<code>expectedmodCount</code>å€¼ï¼Œåˆ™å¼‚å¸¸ä¸ä¼šæŠ›å‡ºã€‚ï¼ˆæ¯”å¦‚ä¿®æ”¹æ•°æ®ï¼Œæ•°é‡æ²¡å˜ï¼‰ä¸èƒ½ä¾èµ–äºè¿™ä¸ªå¼‚å¸¸æ˜¯å¦æŠ›å‡ºè€Œè¿›è¡Œå¹¶å‘æ“ä½œçš„ç¼–ç¨‹ï¼Œè¿™ä¸ªå¼‚å¸¸åªå»ºè®®æ£€æµ‹å¹¶å‘ä¿®æ”¹çš„bugã€‚</p> <p>java.util åŒ…ä¸‹çš„é›†åˆç±»éƒ½æ˜¯å¿«é€Ÿå¤±è´¥çš„ï¼Œä¸èƒ½åœ¨å¤šçº¿ç¨‹ä¸‹å‘ç”Ÿå¹¶å‘ä¿®æ”¹ï¼ˆè¿­ä»£è¿‡ç¨‹ä¸­è¢«ä¿®æ”¹ï¼‰ï¼Œç®—æ˜¯ä¸€ç§å®‰å…¨æœºåˆ¶å§ã€‚</p> <h4 id="961ä½¿ç”¨lambdaè¡¨è¾¾å¼éå†iteratorè¿­ä»£å™¨">9.6.1ã€ä½¿ç”¨Lambdaè¡¨è¾¾å¼éå†Iteratorè¿­ä»£å™¨<a class="headerlink" href="#961ä½¿ç”¨lambdaè¡¨è¾¾å¼éå†iteratorè¿­ä»£å™¨" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p>Java 8 ä¸º Iterator å¼•å…¥äº†ä¸€ä¸ª forEachRemaining(Consumer action) é»˜è®¤æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ‰€éœ€çš„ Consumer å‚æ•°åŒæ ·ä¹Ÿæ˜¯å‡½æ•°å¼æ¥å£ã€‚å½“ç¨‹åºè°ƒç”¨ Iterator çš„ forEachRemaining(Consumer action) éå†é›†åˆå…ƒç´ æ—¶ï¼Œç¨‹åºä¼šä¾æ¬¡å°†é›†åˆå…ƒç´ ä¼ ç»™ Consumer çš„ accept(T t) æ–¹æ³•ï¼ˆè¯¥æ¥å£ä¸­å”¯ä¸€çš„æŠ½è±¡æ–¹æ³•ï¼‰ã€‚</p> <p>java.util.function ä¸­çš„ Functionã€Supplierã€Consumerã€Predicate å’Œå…¶ä»–å‡½æ•°å¼æ¥å£è¢«å¹¿æ³›ç”¨åœ¨æ”¯æŒ Lambda è¡¨è¾¾å¼çš„ API ä¸­ã€‚â€œvoid accept(T t);â€æ˜¯ Consumer çš„æ ¸å¿ƒæ–¹æ³•ï¼Œç”¨æ¥å¯¹ç»™å®šçš„å‚æ•° T æ‰§è¡Œå®šä¹‰æ“ä½œã€‚</p> <p>å¦‚ä¸‹ç¨‹åºç¤ºèŒƒäº†ä½¿ç”¨ Lambda è¡¨è¾¾å¼æ¥éå†é›†åˆå…ƒç´ ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">IteratorEach</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">        </span><span class="c1">// åˆ›å»ºä¸€ä¸ªé›†åˆ</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">        </span><span class="n">Collection</span><span class="w"> </span><span class="n">objs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashSet</span><span class="p">();</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Javaæ•™ç¨‹"</span><span class="p">);</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Cè¯­è¨€æ•™ç¨‹"</span><span class="p">);</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘C++æ•™ç¨‹"</span><span class="p">);</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="w">        </span><span class="c1">// è·å–objsé›†åˆå¯¹åº”çš„è¿­ä»£å™¨</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="w">        </span><span class="n">Iterator</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">objs</span><span class="p">.</span><span class="na">iterator</span><span class="p">();</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="w">        </span><span class="c1">// ä½¿ç”¨Lambdaè¡¨è¾¾å¼ï¼ˆç›®æ ‡ç±»å‹æ˜¯Comsumerï¼‰æ¥éå†é›†åˆå…ƒç´ </span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="w">        </span><span class="n">it</span><span class="p">.</span><span class="na">forEachRemaining</span><span class="p">(</span><span class="n">obj</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"è¿­ä»£é›†åˆå…ƒç´ ï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">obj</span><span class="p">));</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="p">}</span>
</span></code></pre></div> <p>è¾“å‡ºç»“æœä¸ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>è¿­ä»£é›†åˆå…ƒç´ ï¼šCè¯­è¨€ä¸­æ–‡ç½‘C++æ•™ç¨‹
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>è¿­ä»£é›†åˆå…ƒç´ ï¼šCè¯­è¨€ä¸­æ–‡ç½‘Cè¯­è¨€æ•™ç¨‹
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>è¿­ä»£é›†åˆå…ƒç´ ï¼šCè¯­è¨€ä¸­æ–‡ç½‘Javaæ•™ç¨‹
</span></code></pre></div> <p>ä¸Šé¢ç¨‹åºä¸­ç¬¬ 11 è¡Œä»£ç è°ƒç”¨äº† Iterator çš„ forEachRemaining() æ–¹æ³•æ¥éå†é›†åˆå…ƒç´ ï¼Œä¼ ç»™è¯¥æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ª Lambda è¡¨è¾¾å¼ï¼Œè¯¥ Lambda è¡¨è¾¾å¼çš„ç›®æ ‡ç±»å‹æ˜¯ Consumerï¼Œå› æ­¤ä¸Šé¢ä»£ç ä¹Ÿå¯ç”¨äºéå†é›†åˆå…ƒç´ ã€‚</p> <h4 id="962iterator-å’Œ-listiterator-æœ‰ä»€ä¹ˆåŒºåˆ«">9.6.2ã€Iterator å’Œ ListIterator æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<a class="headerlink" href="#962iterator-å’Œ-listiterator-æœ‰ä»€ä¹ˆåŒºåˆ«" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <ul> <li>ListIterator ç»§æ‰¿ Iterator</li> <li>ä½¿ç”¨èŒƒå›´ä¸åŒï¼ŒIteratorå¯ä»¥è¿­ä»£æ‰€æœ‰é›†åˆï¼›ListIterator åªèƒ½ç”¨äºListåŠå…¶å­ç±»</li> <li>ListIterator æœ‰ add æ–¹æ³•ï¼Œå¯ä»¥å‘ List ä¸­æ·»åŠ å¯¹è±¡ï¼›Iterator ä¸èƒ½</li> <li>ListIterator æœ‰ hasPrevious() å’Œ previous() æ–¹æ³•ï¼Œå¯ä»¥å®ç°é€†å‘éå†ï¼›Iteratorä¸å¯ä»¥</li> <li>ListIterator æœ‰ nextIndex() å’ŒpreviousIndex() æ–¹æ³•ï¼Œå¯å®šä½å½“å‰ç´¢å¼•çš„ä½ç½®ï¼›Iteratorä¸å¯ä»¥</li> <li>ListIterator æœ‰ set()æ–¹æ³•ï¼Œå¯ä»¥å®ç°å¯¹ List çš„ä¿®æ”¹ï¼›Iterator ä»…èƒ½éå†ï¼Œä¸èƒ½ä¿®æ”¹</li> </ul> <h2 id="97collections-ç±»">9.7ã€Collections ç±»<a class="headerlink" href="#97collections-ç±»" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>==Collections ç±»æ˜¯ Java æä¾›çš„ä¸€ä¸ªæ“ä½œ Setã€List å’Œ Map ç­‰é›†åˆçš„å·¥å…·ç±»ã€‚==Collections ç±»æä¾›äº†è®¸å¤šæ“ä½œé›†åˆçš„é™æ€æ–¹æ³•ï¼Œå€ŸåŠ©è¿™äº›é™æ€æ–¹æ³•å¯ä»¥å®ç°é›†åˆå…ƒç´ çš„æ’åºã€æŸ¥æ‰¾æ›¿æ¢å’Œå¤åˆ¶ç­‰æ“ä½œã€‚ä¸‹é¢ä»‹ç» Collections ç±»ä¸­æ“ä½œé›†åˆçš„å¸¸ç”¨æ–¹æ³•ã€‚</p> <hr> <p><strong>æ’åºï¼ˆæ­£å‘å’Œé€†å‘ï¼‰</strong></p> <p>Collections æä¾›äº†å¦‚ä¸‹æ–¹æ³•ç”¨äºå¯¹ List é›†åˆå…ƒç´ è¿›è¡Œæ’åºã€‚</p> <ul> <li>void reverse(List list)ï¼šå¯¹æŒ‡å®š List é›†åˆå…ƒç´ è¿›è¡Œé€†å‘æ’åºã€‚</li> <li>void shuffle(List list)ï¼šå¯¹ List é›†åˆå…ƒç´ è¿›è¡Œéšæœºæ’åºï¼ˆshuffle æ–¹æ³•æ¨¡æ‹Ÿäº†â€œæ´—ç‰Œâ€åŠ¨ä½œï¼‰ã€‚</li> <li>void sort(List list)ï¼šæ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºå¯¹æŒ‡å®š List é›†åˆçš„å…ƒç´ æŒ‰å‡åºè¿›è¡Œæ’åºã€‚</li> <li>void sort(List list, Comparator c)ï¼šæ ¹æ®æŒ‡å®š Comparator äº§ç”Ÿçš„é¡ºåºå¯¹ List é›†åˆå…ƒç´ è¿›è¡Œæ’åºã€‚</li> <li>void swap(List list, int i, int j)ï¼šå°†æŒ‡å®š List é›†åˆä¸­çš„ i å¤„å…ƒç´ å’Œ j å¤„å…ƒç´ è¿›è¡Œäº¤æ¢ã€‚</li> <li>void rotate(List list, int distance)ï¼šå½“ distance ä¸ºæ­£æ•°æ—¶ï¼Œå°† list é›†åˆçš„å distance ä¸ªå…ƒç´ â€œæ•´ä½“â€ç§»åˆ°å‰é¢ï¼›å½“ distance ä¸ºè´Ÿæ•°æ—¶ï¼Œå°† list é›†åˆçš„å‰ distance ä¸ªå…ƒç´ â€œæ•´ä½“â€ç§»åˆ°åé¢ã€‚è¯¥æ–¹æ³•ä¸ä¼šæ”¹å˜é›†åˆçš„é•¿åº¦ã€‚</li> </ul> <hr> <p><strong>æŸ¥æ‰¾ã€æ›¿æ¢æ“ä½œ</strong></p> <p>Collections è¿˜æä¾›äº†å¦‚ä¸‹å¸¸ç”¨çš„ç”¨äºæŸ¥æ‰¾ã€æ›¿æ¢é›†åˆå…ƒç´ çš„æ–¹æ³•ã€‚</p> <ul> <li>int binarySearch(List list, Object key)ï¼šä½¿ç”¨äºŒåˆ†æœç´¢æ³•æœç´¢æŒ‡å®šçš„ List é›†åˆï¼Œä»¥è·å¾—æŒ‡å®šå¯¹è±¡åœ¨ List é›†åˆä¸­çš„ç´¢å¼•ã€‚å¦‚æœè¦ä½¿è¯¥æ–¹æ³•å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œåˆ™å¿…é¡»ä¿è¯ List ä¸­çš„å…ƒç´ å·²ç»å¤„äºæœ‰åºçŠ¶æ€ã€‚</li> <li>Object max(Collection coll)ï¼šæ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å¤§å…ƒç´ ã€‚</li> <li>Object max(Collection coll, Comparator comp)ï¼šæ ¹æ® Comparator æŒ‡å®šçš„é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å¤§å…ƒç´ ã€‚</li> <li>Object min(Collection coll)ï¼šæ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å°å…ƒç´ ã€‚</li> <li>Object min(Collection coll, Comparator comp)ï¼šæ ¹æ® Comparator æŒ‡å®šçš„é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å°å…ƒç´ ã€‚</li> <li>void fill(List list, Object obj)ï¼šä½¿ç”¨æŒ‡å®šå…ƒç´  obj æ›¿æ¢æŒ‡å®š List é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</li> <li>int frequency(Collection c, Object o)ï¼šè¿”å›æŒ‡å®šé›†åˆä¸­æŒ‡å®šå…ƒç´ çš„å‡ºç°æ¬¡æ•°ã€‚</li> <li>int indexOfSubList(List source, List target)ï¼šè¿”å›å­ List å¯¹è±¡åœ¨çˆ¶ List å¯¹è±¡ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ç´¢å¼•ï¼›å¦‚æœçˆ¶ List ä¸­æ²¡æœ‰å‡ºç°è¿™æ ·çš„å­ Listï¼Œåˆ™è¿”å› -1ã€‚</li> <li>int lastIndexOfSubList(List source, List target)ï¼šè¿”å›å­ List å¯¹è±¡åœ¨çˆ¶ List å¯¹è±¡ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ç´¢å¼•ï¼›å¦‚æœçˆ¶ List ä¸­æ²¡æœ‰å²€ç°è¿™æ ·çš„å­ Listï¼Œåˆ™è¿”å› -1ã€‚</li> <li>boolean replaceAll(List list, Object oldVal, Object newVal)ï¼šä½¿ç”¨ä¸€ä¸ªæ–°å€¼ newVal æ›¿æ¢ List å¯¹è±¡çš„æ‰€æœ‰æ—§å€¼ oldValã€‚</li> </ul> <hr> <p><strong>å¤åˆ¶</strong></p> <p>==Collections ç±»çš„ copy() é™æ€æ–¹æ³•ç”¨äºå°†æŒ‡å®šé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ å¤åˆ¶åˆ°å¦ä¸€ä¸ªé›†åˆä¸­ã€‚==æ‰§è¡Œ copy() æ–¹æ³•åï¼Œç›®æ ‡é›†åˆä¸­æ¯ä¸ªå·²å¤åˆ¶å…ƒç´ çš„ç´¢å¼•å°†ç­‰åŒäºæºé›†åˆä¸­è¯¥å…ƒç´ çš„ç´¢å¼•ã€‚</p> <p>copy() æ–¹æ³•çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">copy</span><span class="p">(</span><span class="n">List</span><span class="w"> </span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">super</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">dest</span><span class="p">,</span><span class="n">List</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">src</span><span class="p">)</span>
</span></code></pre></div> <p>å…¶ä¸­ï¼Œdest è¡¨ç¤ºç›®æ ‡é›†åˆå¯¹è±¡ï¼Œsrc è¡¨ç¤ºæºé›†åˆå¯¹è±¡ã€‚</p> <p>æ³¨æ„ï¼šç›®æ ‡é›†åˆçš„é•¿åº¦è‡³å°‘å’Œæºé›†åˆçš„é•¿åº¦ç›¸åŒï¼Œå¦‚æœç›®æ ‡é›†åˆçš„é•¿åº¦æ›´é•¿ï¼Œåˆ™ä¸å½±å“ç›®æ ‡é›†åˆä¸­çš„å…¶ä½™å…ƒç´ ã€‚å¦‚æœç›®æ ‡é›†åˆé•¿åº¦ä¸å¤Ÿè€Œæ— æ³•åŒ…å«æ•´ä¸ªæºé›†åˆå…ƒç´ ï¼Œç¨‹åºå°†æŠ›å‡º IndexOutOfBoundsException å¼‚å¸¸ã€‚</p> <hr> <p><strong>ç¡®ä¿é›†åˆä¸è¢«ä¿®æ”¹</strong></p> <p>Collections åŒ…ä¸‹çš„ unmodifiableMap æ–¹æ³•ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•è¿”å›çš„mapï¼Œæ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„ã€‚å®ƒä¼šæŠ›å‡ºjava.lang.UnsupportedOperationExceptionå¼‚å¸¸ã€‚ </p> <p>åŒç†ï¼šCollectionsåŒ…ä¹Ÿæä¾›äº†å¯¹listå’Œseté›†åˆçš„æ–¹æ³•ã€‚ Collections.unmodififiableList(List) å’Œ Collections.unmodififiableSet(Set) </p> <h2 id="98jdk8-æ–°å¢é›†åˆæ“ä½œ">9.8ã€JDK8 æ–°å¢é›†åˆæ“ä½œ<a class="headerlink" href="#98jdk8-æ–°å¢é›†åˆæ“ä½œ" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <h4 id="981ä½¿ç”¨lambdaè¡¨è¾¾å¼éå†collectioné›†åˆ">9.8.1ã€ä½¿ç”¨Lambdaè¡¨è¾¾å¼éå†Collectioné›†åˆ<a class="headerlink" href="#981ä½¿ç”¨lambdaè¡¨è¾¾å¼éå†collectioné›†åˆ" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p>Java 8 ä¸º Iterable æ¥å£æ–°å¢äº†ä¸€ä¸ª forEach(Consumer action) é»˜è®¤æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ‰€éœ€å‚æ•°çš„ç±»å‹æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œè€Œ Iterable æ¥å£æ˜¯ Collection æ¥å£çš„çˆ¶æ¥å£ï¼Œå› æ­¤ Collection é›†åˆä¹Ÿå¯ç›´æ¥è°ƒç”¨è¯¥æ–¹æ³•ã€‚</p> <p>å½“ç¨‹åºè°ƒç”¨ Iterable çš„ forEach(Consumer action) éå†é›†åˆå…ƒç´ æ—¶ï¼Œç¨‹åºä¼šä¾æ¬¡å°†é›†åˆå…ƒç´ ä¼ ç»™ Consumer çš„ accept(T t) æ–¹æ³•ï¼ˆè¯¥æ¥å£ä¸­å”¯ä¸€çš„æŠ½è±¡æ–¹æ³•ï¼‰ã€‚æ­£å› ä¸º Consumer æ˜¯å‡½æ•°å¼æ¥å£ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ Lambda è¡¨è¾¾å¼æ¥éå†é›†åˆå…ƒç´ ã€‚</p> <p>å¦‚ä¸‹ç¨‹åºç¤ºèŒƒäº†ä½¿ç”¨ Lambda è¡¨è¾¾å¼æ¥éå†é›†åˆå…ƒç´ ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CollectionEach</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="w">        </span><span class="c1">// åˆ›å»ºä¸€ä¸ªé›†åˆ</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="w">        </span><span class="n">Collection</span><span class="w"> </span><span class="n">objs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashSet</span><span class="p">();</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"Orichalcos"</span><span class="p">);</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"king"</span><span class="p">);</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"Microsoft"</span><span class="p">);</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="w">        </span><span class="c1">// è°ƒç”¨forEach()æ–¹æ³•éå†é›†åˆ</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">obj</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"è¿­ä»£é›†åˆå…ƒç´ ï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">obj</span><span class="p">));</span>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="p">}</span>
</span></code></pre></div> <p>è¾“å‡ºç»“æœä¸ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>è¿­ä»£é›†åˆå…ƒç´ ï¼šOrichalcos
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>è¿­ä»£é›†åˆå…ƒç´ ï¼šking
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>è¿­ä»£é›†åˆå…ƒç´ ï¼šMicrosoft
</span></code></pre></div> <p>ä¸Šé¢ç¨‹åºä¸­ç²—ä½“å­—ä»£ç è°ƒç”¨äº† Iterable çš„ forEach() é»˜è®¤æ–¹æ³•æ¥éå†é›†åˆå…ƒç´ ï¼Œä¼ ç»™è¯¥æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ª Lambda è¡¨è¾¾å¼ï¼Œè¯¥ Lambda è¡¨è¾¾å¼çš„ç›®æ ‡ç±»å‹æ˜¯ Consumerã€‚forEach() æ–¹æ³•ä¼šè‡ªåŠ¨å°†é›†åˆå…ƒç´ é€ä¸ªåœ°ä¼ ç»™ Lambda è¡¨è¾¾å¼çš„å½¢å‚ï¼Œè¿™æ · Lambda è¡¨è¾¾å¼çš„ä»£ç ä½“å³å¯éå†åˆ°é›†åˆå…ƒç´ äº†ã€‚</p> <hr> <p><strong>BiConsumer</strong></p> <p>ç”¨äºä¸¤ä¸ªå‚æ•°ä¹‹é—´è¿›è¡Œæ“ä½œçš„å‡½æ•°å¼æ¥å£æ˜¯ <code>BiConsumer</code>ã€‚è¿™ä¸ªå‡½æ•°å¼æ¥å£æ­£å¥½ç”¨æ¥æ“ä½œ <code>Map</code> çš„ <code>key</code> å’Œ <code>value</code>ã€‚JDK8å¼ºåŒ–äº†é’ˆå¯¹ <code>Map</code> ç±»çš„è¿­ä»£æ–¹å¼ï¼Œæ–°å¢äº†ä¸€ä¸ªé»˜è®¤æ–¹æ³• <code>forEach</code>ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª <code>BiConsumer</code> å‡½æ•°ã€‚</p> <p>ä¸‹é¢æ˜¯ä»£ç ä¾‹å­ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="c1">// åˆ›å»ºä¸€ä¸ªMap</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">infoMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="n">infoMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">"name"</span><span class="p">,</span><span class="w"> </span><span class="s">"Zebe"</span><span class="p">);</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="n">infoMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">"site"</span><span class="p">,</span><span class="w"> </span><span class="s">"www.zebe.me"</span><span class="p">);</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="n">infoMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">"email"</span><span class="p">,</span><span class="w"> </span><span class="s">"zebe@vip.qq.com"</span><span class="p">);</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="c1">// JDK8çš„è¿­ä»£æ–¹å¼</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="n">infoMap</span><span class="p">.</span><span class="na">forEach</span><span class="p">((</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">key</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"ï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">value</span><span class="p">);</span>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="p">});</span>
</span></code></pre></div> <h4 id="982predicateæ“ä½œcollectioné›†åˆ">9.8.2ã€Predicateæ“ä½œCollectioné›†åˆ<a class="headerlink" href="#982predicateæ“ä½œcollectioné›†åˆ" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p>Java 8 èµ·ä¸º Collection é›†åˆæ–°å¢äº†ä¸€ä¸ª removeIf(Predicate filter) æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†ä¼šæ‰¹é‡åˆ é™¤ç¬¦åˆ filter æ¡ä»¶çš„æ‰€æœ‰å…ƒç´ ã€‚è¯¥æ–¹æ³•éœ€è¦ä¸€ä¸ª Predicate å¯¹è±¡ä½œä¸ºå‚æ•°ï¼ŒPredicate ä¹Ÿæ˜¯å‡½æ•°å¼æ¥å£ï¼Œå› æ­¤å¯ä½¿ç”¨ Lambda è¡¨è¾¾å¼ä½œä¸ºå‚æ•°ã€‚</p> <p>å¦‚ä¸‹ç¨‹åºç¤ºèŒƒäº†ä½¿ç”¨ Predicate æ¥è¿‡æ»¤é›†åˆã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ForeachTest</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">        </span><span class="c1">// åˆ›å»ºä¸€ä¸ªé›†åˆ</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">        </span><span class="n">Collection</span><span class="w"> </span><span class="n">objs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashSet</span><span class="p">();</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Javaæ•™ç¨‹"</span><span class="p">));</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘C++æ•™ç¨‹"</span><span class="p">));</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Cè¯­è¨€æ•™ç¨‹"</span><span class="p">));</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Pythonæ•™ç¨‹"</span><span class="p">));</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Goæ•™ç¨‹"</span><span class="p">));</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="w">        </span><span class="c1">// ä½¿ç”¨Lambdaè¡¨è¾¾å¼(ç›®æ ‡ç±»å‹æ˜¯Predicate)è¿‡æ»¤é›†åˆ</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">removeIf</span><span class="p">(</span><span class="n">ele</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">((</span><span class="n">String</span><span class="p">)</span><span class="w"> </span><span class="n">ele</span><span class="p">).</span><span class="na">length</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">12</span><span class="p">);</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">objs</span><span class="p">);</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="p">}</span>
</span></code></pre></div> <p>ä¸Šé¢ç¨‹åºä¸­ç¬¬ 11 è¡Œä»£ç è°ƒç”¨äº† Collection é›†åˆçš„ removeIf() æ–¹æ³•æ‰¹é‡åˆ é™¤é›†åˆä¸­ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œç¨‹åºä¼ å…¥ä¸€ä¸ª Lambda è¡¨è¾¾å¼ä½œä¸ºè¿‡æ»¤æ¡ä»¶ã€‚æ‰€æœ‰é•¿åº¦å°äº 12 çš„å­—ç¬¦ä¸²å…ƒç´ éƒ½ä¼šè¢«åˆ é™¤ã€‚ç¼–è¯‘ã€è¿è¡Œè¿™æ®µä»£ç ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>[Cè¯­è¨€ä¸­æ–‡ç½‘Javaæ•™ç¨‹, Cè¯­è¨€ä¸­æ–‡ç½‘Pythonæ•™ç¨‹]
</span></code></pre></div> <p>ä½¿ç”¨ Predicate å¯ä»¥å……åˆ†ç®€åŒ–é›†åˆçš„è¿ç®—ï¼Œå‡è®¾ä¾ç„¶æœ‰ä¸Šé¢ç¨‹åºæ‰€ç¤ºçš„ objs é›†åˆï¼Œå¦‚æœç¨‹åºæœ‰å¦‚ä¸‹ä¸‰ä¸ªç»Ÿè®¡éœ€æ±‚ï¼š</p> <ol> <li>ç»Ÿè®¡é›†åˆä¸­å‡ºç°â€œCè¯­è¨€ä¸­æ–‡ç½‘â€å­—ç¬¦ä¸²çš„æ•°é‡ã€‚</li> <li>ç»Ÿè®¡é›†åˆä¸­å‡ºç°â€œJavaâ€å­—ç¬¦ä¸²çš„æ•°é‡ã€‚</li> <li>ç»Ÿè®¡é›†åˆä¸­å‡ºç°å­—ç¬¦ä¸²é•¿åº¦å¤§äº 12 çš„æ•°é‡ã€‚</li> </ol> <p>æ­¤å¤„åªæ˜¯ä¸€ä¸ªå‡è®¾ï¼Œå®é™…ä¸Šè¿˜å¯èƒ½æœ‰æ›´å¤šçš„ç»Ÿè®¡éœ€æ±‚ã€‚å¦‚æœé‡‡ç”¨ä¼ ç»Ÿçš„ç¼–ç¨‹æ–¹å¼æ¥å®Œæˆè¿™äº›éœ€æ±‚ï¼Œåˆ™éœ€è¦æ‰§è¡Œä¸‰æ¬¡å¾ªç¯ï¼Œä½†é‡‡ç”¨ Predicate åªéœ€è¦ä¸€ä¸ªæ–¹æ³•å³å¯ã€‚ä¸‹é¢ä»£ç ç¤ºèŒƒäº†è¿™ç§ç”¨æ³•ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ForeachTest2</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w">        </span><span class="c1">// åˆ›å»ºä¸€ä¸ªé›†åˆ</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="w">        </span><span class="n">Collection</span><span class="w"> </span><span class="n">objs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashSet</span><span class="p">();</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Javaæ•™ç¨‹"</span><span class="p">));</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘C++æ•™ç¨‹"</span><span class="p">));</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Cè¯­è¨€æ•™ç¨‹"</span><span class="p">));</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Pythonæ•™ç¨‹"</span><span class="p">));</span>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Goæ•™ç¨‹"</span><span class="p">));</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="w">        </span><span class="c1">// ç»Ÿè®¡é›†åˆä¸­å‡ºç°â€œCè¯­è¨€ä¸­æ–‡ç½‘â€å­—ç¬¦ä¸²çš„æ•°é‡</span>
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">calAll</span><span class="p">(</span><span class="n">objs</span><span class="p">,</span><span class="w"> </span><span class="n">ele</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">((</span><span class="n">String</span><span class="p">)</span><span class="w"> </span><span class="n">ele</span><span class="p">).</span><span class="na">contains</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘"</span><span class="p">)));</span>
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="w">        </span><span class="c1">// ç»Ÿè®¡é›†åˆä¸­å‡ºç°â€œJavaâ€å­—ç¬¦ä¸²çš„æ•°é‡</span>
</span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">calAll</span><span class="p">(</span><span class="n">objs</span><span class="p">,</span><span class="w"> </span><span class="n">ele</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">((</span><span class="n">String</span><span class="p">)</span><span class="w"> </span><span class="n">ele</span><span class="p">).</span><span class="na">contains</span><span class="p">(</span><span class="s">"Java"</span><span class="p">)));</span>
</span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="w">        </span><span class="c1">// ç»Ÿè®¡é›†åˆä¸­å‡ºç°å­—ç¬¦ä¸²é•¿åº¦å¤§äº 12 çš„æ•°é‡</span>
</span><span id="__span-24-15"><a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">calAll</span><span class="p">(</span><span class="n">objs</span><span class="p">,</span><span class="w"> </span><span class="n">ele</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">((</span><span class="n">String</span><span class="p">)</span><span class="w"> </span><span class="n">ele</span><span class="p">).</span><span class="na">length</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">12</span><span class="p">));</span>
</span><span id="__span-24-16"><a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-24-17"><a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a>
</span><span id="__span-24-18"><a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">calAll</span><span class="p">(</span><span class="n">Collection</span><span class="w"> </span><span class="n">books</span><span class="p">,</span><span class="w"> </span><span class="n">Predicate</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-24-19"><a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-24-20"><a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">books</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-24-21"><a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a><span class="w">            </span><span class="c1">// ä½¿ç”¨Predicateçš„test()æ–¹æ³•åˆ¤æ–­è¯¥å¯¹è±¡æ˜¯å¦æ»¡è¶³PredicateæŒ‡å®šçš„æ¡ä»¶</span>
</span><span id="__span-24-22"><a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="na">test</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-24-23"><a id="__codelineno-24-23" name="__codelineno-24-23" href="#__codelineno-24-23"></a><span class="w">                </span><span class="n">total</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-24-24"><a id="__codelineno-24-24" name="__codelineno-24-24" href="#__codelineno-24-24"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-24-25"><a id="__codelineno-24-25" name="__codelineno-24-25" href="#__codelineno-24-25"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-24-26"><a id="__codelineno-24-26" name="__codelineno-24-26" href="#__codelineno-24-26"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">total</span><span class="p">;</span>
</span><span id="__span-24-27"><a id="__codelineno-24-27" name="__codelineno-24-27" href="#__codelineno-24-27"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-24-28"><a id="__codelineno-24-28" name="__codelineno-24-28" href="#__codelineno-24-28"></a><span class="p">}</span>
</span></code></pre></div> <p>è¾“å‡ºç»“æœä¸ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>5 1 1
</span></code></pre></div> <p>ä¸Šé¢ç¨‹åºå…ˆå®šä¹‰äº†ä¸€ä¸ª calAll() æ–¹æ³•ï¼Œå®ƒä½¿ç”¨ Predicate åˆ¤æ–­æ¯ä¸ªé›†åˆå…ƒç´ æ˜¯å¦ç¬¦åˆç‰¹å®šæ¡ä»¶ï¼Œæ¡ä»¶å°†é€šè¿‡ Predicate å‚æ•°åŠ¨æ€ä¼ å…¥ã€‚ä»ä¸Šé¢ç¨‹åºä¸­ç¬¬ 11ã€13ã€15 è¡Œä»£ç å¯ä»¥çœ‹åˆ°ï¼Œç¨‹åºä¼ å…¥äº† 3 ä¸ª Lambda è¡¨è¾¾å¼ï¼Œå…¶ç›®æ ‡ç±»å‹éƒ½æ˜¯ Predicateï¼Œè¿™æ · calAll() æ–¹æ³•å°±åªä¼šç»Ÿè®¡æ»¡è¶³ Predicate æ¡ä»¶çš„å›¾ä¹¦ã€‚</p> <h4 id="983streamæ“ä½œcollectioné›†åˆ">9.8.3ã€Streamæ“ä½œCollectioné›†åˆ<a class="headerlink" href="#983streamæ“ä½œcollectioné›†åˆ" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p>Java 8 è¿˜æ–°å¢äº† Streamã€IntStreamã€LongStreamã€DoubleStream ç­‰æµå¼ APIï¼Œè¿™äº› API ä»£è¡¨å¤šä¸ªæ”¯æŒä¸²è¡Œå’Œå¹¶è¡Œèšé›†æ“ä½œçš„å…ƒç´ ã€‚ä¸Šé¢ 4 ä¸ªæ¥å£ä¸­ï¼ŒStream æ˜¯ä¸€ä¸ªé€šç”¨çš„æµæ¥å£ï¼Œè€Œ IntStreamã€LongStreamã€ DoubleStream åˆ™ä»£è¡¨å…ƒç´ ç±»å‹ä¸º intã€longã€double çš„æµã€‚</p> <p>Java 8 è¿˜ä¸ºä¸Šé¢æ¯ä¸ªæµå¼ API æä¾›äº†å¯¹åº”çš„ Builderï¼Œä¾‹å¦‚ Stream.Builderã€IntStream.Builderã€LongStream.Builderã€DoubleStream.Builderï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡è¿™äº› Builder æ¥åˆ›å»ºå¯¹åº”çš„æµã€‚</p> <p>ç‹¬ç«‹ä½¿ç”¨ Stream çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p> <ol> <li>ä½¿ç”¨ Stream æˆ– XxxStream çš„ builder() ç±»æ–¹æ³•åˆ›å»ºè¯¥ Stream å¯¹åº”çš„ Builderã€‚</li> <li>é‡å¤è°ƒç”¨ Builder çš„ add() æ–¹æ³•å‘è¯¥æµä¸­æ·»åŠ å¤šä¸ªå…ƒç´ ã€‚</li> <li>è°ƒç”¨ Builder çš„ build() æ–¹æ³•è·å–å¯¹åº”çš„ Streamã€‚</li> <li>è°ƒç”¨ Stream çš„èšé›†æ–¹æ³•ã€‚</li> </ol> <p>åœ¨ä¸Šé¢ 4 ä¸ªæ­¥éª¤ä¸­ï¼Œç¬¬ 4 æ­¥å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚æ¥è°ƒç”¨ä¸åŒçš„æ–¹æ³•ï¼ŒStream æä¾›äº†å¤§é‡çš„èšé›†æ–¹æ³•ä¾›ç”¨æˆ·è°ƒç”¨ï¼Œå…·ä½“å¯å‚è€ƒ Stream æˆ– XxxStream çš„ API æ–‡æ¡£ã€‚å¯¹äºå¤§éƒ¨åˆ†èšé›†æ–¹æ³•è€Œè¨€ï¼Œæ¯ä¸ª Stream åªèƒ½æ‰§è¡Œä¸€æ¬¡ã€‚ä¾‹å¦‚å¦‚ä¸‹ç¨‹åºã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="n">lic</span><span class="w"> </span><span class="kd">class</span> <span class="nc">IntStreamTest</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">        </span><span class="n">IntStream</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IntStream</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">add</span><span class="p">(</span><span class="mi">20</span><span class="p">).</span><span class="na">add</span><span class="p">(</span><span class="mi">13</span><span class="p">).</span><span class="na">add</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">).</span><span class="na">add</span><span class="p">(</span><span class="mi">18</span><span class="p">).</span><span class="na">build</span><span class="p">();</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">        </span><span class="c1">// ä¸‹é¢è°ƒç”¨èšé›†æ–¹æ³•çš„ä»£ç æ¯æ¬¡åªèƒ½æ‰§è¡Œä¸€è¡Œ</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"is æ‰€æœ‰å…ƒç´ çš„æœ€å¤§å€¼ï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">is</span><span class="p">.</span><span class="na">max</span><span class="p">().</span><span class="na">getAsInt</span><span class="p">());</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"is æ‰€æœ‰å…ƒç´ çš„æœ€å°å€¼ï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">is</span><span class="p">.</span><span class="na">min</span><span class="p">().</span><span class="na">getAsInt</span><span class="p">());</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"is æ‰€æœ‰å…ƒç´ çš„æ€»å’Œï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">is</span><span class="p">.</span><span class="na">sum</span><span class="p">());</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"is æ‰€æœ‰å…ƒç´ çš„æ€»æ•°ï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">is</span><span class="p">.</span><span class="na">count</span><span class="p">());</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"is æ‰€æœ‰å…ƒç´ çš„å¹³å‡å€¼ï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">is</span><span class="p">.</span><span class="na">average</span><span class="p">());</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"isæ‰€æœ‰å…ƒç´ çš„å¹³æ–¹æ˜¯å¦éƒ½å¤§äº20: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">is</span><span class="p">.</span><span class="na">allMatch</span><span class="p">(</span><span class="n">ele</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ele</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ele</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="p">));</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"isæ˜¯å¦åŒ…å«ä»»ä½•å…ƒç´ çš„å¹³æ–¹å¤§äº20 : "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">is</span><span class="p">.</span><span class="na">anyMatch</span><span class="p">(</span><span class="n">ele</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ele</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ele</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="p">));</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="w">        </span><span class="c1">// å°†isæ˜ å°„æˆä¸€ä¸ªæ–°Stream,æ–°Streamçš„æ¯ä¸ªå…ƒç´ æ˜¯åŸStreamå…ƒç´ çš„2å€+1</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="w">        </span><span class="n">IntStream</span><span class="w"> </span><span class="n">newIs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">is</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">ele</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ele</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="w">        </span><span class="c1">// ä½¿ç”¨æ–¹æ³•å¼•ç”¨çš„æ–¹å¼æ¥éå†é›†åˆå…ƒç´ </span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="w">        </span><span class="n">newIs</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span><span class="w"> </span><span class="c1">// è¾“å²€ 41 27 -3 37</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a><span class="p">}</span>
</span></code></pre></div> <p>ä¸Šé¢ç¨‹åºå…ˆåˆ›å»ºäº†ä¸€ä¸ª IntStreamï¼Œæ¥ä¸‹æ¥åˆ†åˆ«å¤šæ¬¡è°ƒç”¨ IntStream çš„èšé›†æ–¹æ³•æ‰§è¡Œæ“ä½œï¼Œè¿™æ ·å³å¯è·å–è¯¥æµçš„ç›¸å…³ä¿¡æ¯ã€‚æ³¨æ„ï¼šä¸Šé¢ 5~13 è¡Œä»£ç æ¯æ¬¡åªèƒ½æ‰§è¡Œä¸€è¡Œï¼Œå› æ­¤éœ€è¦æŠŠå…¶ä»–ä»£ç æ³¨é‡Šæ‰ã€‚</p> <p>Stream æä¾›äº†å¤§é‡çš„æ–¹æ³•è¿›è¡Œèšé›†æ“ä½œï¼Œè¿™äº›æ–¹æ³•æ—¢å¯ä»¥æ˜¯â€œä¸­é—´çš„â€ï¼ˆintermediateï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ "æœ«ç«¯çš„"ï¼ˆterminalï¼‰ã€‚</p> <ul> <li>ä¸­é—´æ–¹æ³•ï¼šä¸­é—´æ“ä½œå…è®¸æµä¿æŒæ‰“å¼€çŠ¶æ€ï¼Œå¹¶å…è®¸ç›´æ¥è°ƒç”¨åç»­æ–¹æ³•ã€‚ä¸Šé¢ç¨‹åºä¸­çš„ map() æ–¹æ³•å°±æ˜¯ä¸­é—´æ–¹æ³•ã€‚ä¸­é—´æ–¹æ³•çš„è¿”å›å€¼æ˜¯å¦å¤–ä¸€ä¸ªæµã€‚</li> <li>æœ«ç«¯æ–¹æ³•ï¼šæœ«ç«¯æ–¹æ³•æ˜¯å¯¹æµçš„æœ€ç»ˆæ“ä½œã€‚å½“å¯¹æŸä¸ª Stream æ‰§è¡Œæœ«ç«¯æ–¹æ³•åï¼Œè¯¥æµå°†ä¼šè¢«â€œæ¶ˆè€—â€ä¸”ä¸å†å¯ç”¨ã€‚ä¸Šé¢ç¨‹åºä¸­çš„ sum()ã€count()ã€average() ç­‰æ–¹æ³•éƒ½æ˜¯æœ«ç«¯æ–¹æ³•ã€‚</li> </ul> <p>é™¤æ­¤ä¹‹å¤–ï¼Œå…³äºæµçš„æ–¹æ³•è¿˜æœ‰å¦‚ä¸‹ä¸¤ä¸ªç‰¹å¾ã€‚</p> <ul> <li>æœ‰çŠ¶æ€çš„æ–¹æ³•ï¼šè¿™ç§æ–¹æ³•ä¼šç»™æµå¢åŠ ä¸€äº›æ–°çš„å±æ€§ï¼Œæ¯”å¦‚å…ƒç´ çš„å”¯ä¸€æ€§ã€å…ƒç´ çš„æœ€å¤§æ•°é‡ã€ä¿è¯å…ƒç´ ä»¥æ’åºçš„æ–¹å¼è¢«å¤„ç†ç­‰ã€‚æœ‰çŠ¶æ€çš„æ–¹æ³•å¾€å¾€éœ€è¦æ›´å¤§çš„æ€§èƒ½å¼€é”€ã€‚</li> <li>çŸ­è·¯æ–¹æ³•ï¼šçŸ­è·¯æ–¹æ³•å¯ä»¥å°½æ—©ç»“æŸå¯¹æµçš„æ“ä½œï¼Œä¸å¿…æ£€æŸ¥æ‰€æœ‰çš„å…ƒç´ ã€‚</li> </ul> <p>Stream å¸¸ç”¨çš„ä¸­é—´æ–¹æ³•ã€‚</p> <table> <thead> <tr> <th>æ–¹æ³•</th> <th>è¯´æ˜</th> </tr> </thead> <tbody> <tr> <td>filter(Predicate predicate)</td> <td>è¿‡æ»¤ Stream ä¸­æ‰€æœ‰ä¸ç¬¦åˆ predicate çš„å…ƒç´ </td> </tr> <tr> <td>mapToXxx(ToXxxFunction mapper)</td> <td>ä½¿ç”¨ ToXxxFunction å¯¹æµä¸­çš„å…ƒç´ æ‰§è¡Œä¸€å¯¹ä¸€çš„è½¬æ¢ï¼Œè¯¥æ–¹æ³•è¿”å›çš„æ–°æµä¸­åŒ…å«äº† ToXxxFunction è½¬æ¢ç”Ÿæˆçš„æ‰€æœ‰å…ƒç´ </td> </tr> <tr> <td>peek(Consumer action)</td> <td>ä¾æ¬¡å¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€äº›æ“ä½œï¼Œè¯¥æ–¹æ³•è¿”å›çš„æµä¸åŸæœ‰æµåŒ…å«ç›¸åŒçš„å…ƒç´ ã€‚è¯¥æ–¹æ³•ä¸»è¦ç”¨äºè°ƒè¯•</td> </tr> <tr> <td>distinct()</td> <td>è¯¥æ–¹æ³•ç”¨äºæ’åºæµä¸­æ‰€æœ‰é‡å¤çš„å…ƒç´ ï¼ˆåˆ¤æ–­å…ƒç´ é‡å¤çš„æ ‡å‡†æ˜¯ä½¿ç”¨ equals() æ¯”è¾ƒè¿”å› trueï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„æ–¹æ³•</td> </tr> <tr> <td>sorted()</td> <td>è¯¥æ–¹æ³•ç”¨äºä¿è¯æµä¸­çš„å…ƒç´ åœ¨åç»­çš„è®¿é—®ä¸­å¤„äºæœ‰åºçŠ¶æ€ã€‚è¿™æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„æ–¹æ³•</td> </tr> <tr> <td>limit(long maxSize)</td> <td>è¯¥æ–¹æ³•ç”¨äºä¿è¯å¯¹è¯¥æµçš„åç»­è®¿é—®ä¸­æœ€å¤§å…è®¸è®¿é—®çš„å…ƒç´ ä¸ªæ•°ã€‚è¿™æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„ã€çŸ­è·¯æ–¹æ³•</td> </tr> </tbody> </table> <p>Stream å¸¸ç”¨çš„æœ«ç«¯æ–¹æ³•ã€‚</p> <table> <thead> <tr> <th>æ–¹æ³•</th> <th>è¯´æ˜</th> </tr> </thead> <tbody> <tr> <td>forEach(Consumer action)</td> <td>éå†æµä¸­æ‰€æœ‰å…ƒç´ ï¼Œå¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œaction</td> </tr> <tr> <td>toArray()</td> <td>å°†æµä¸­æ‰€æœ‰å…ƒç´ è½¬æ¢ä¸ºä¸€ä¸ªæ•°ç»„</td> </tr> <tr> <td>reduce()</td> <td>è¯¥æ–¹æ³•æœ‰ä¸‰ä¸ªé‡è½½çš„ç‰ˆæœ¬ï¼Œéƒ½ç”¨äºé€šè¿‡æŸç§æ“ä½œæ¥åˆå¹¶æµä¸­çš„å…ƒç´ </td> </tr> <tr> <td>min()</td> <td>è¿”å›æµä¸­æ‰€æœ‰å…ƒç´ çš„æœ€å°å€¼</td> </tr> <tr> <td>max()</td> <td>è¿”å›æµä¸­æ‰€æœ‰å…ƒç´ çš„æœ€å¤§å€¼</td> </tr> <tr> <td>count()</td> <td>è¿”å›æµä¸­æ‰€æœ‰å…ƒç´ çš„æ•°é‡</td> </tr> <tr> <td>anyMatch(Predicate predicate)</td> <td>åˆ¤æ–­æµä¸­æ˜¯å¦è‡³å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ç¬¦åˆ Predicate æ¡ä»¶ã€‚</td> </tr> <tr> <td>allMatch(Predicate predicate)</td> <td>åˆ¤æ–­æµä¸­æ˜¯å¦æ¯ä¸ªå…ƒç´ éƒ½ç¬¦åˆ Predicate æ¡ä»¶</td> </tr> <tr> <td>noneMatch(Predicate predicate)</td> <td>åˆ¤æ–­æµä¸­æ˜¯å¦æ‰€æœ‰å…ƒç´ éƒ½ä¸ç¬¦åˆ Predicate æ¡ä»¶</td> </tr> <tr> <td>findFirst()</td> <td>è¿”å›æµä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ </td> </tr> <tr> <td>findAny()</td> <td>è¿”å›æµä¸­çš„ä»»æ„ä¸€ä¸ªå…ƒç´ </td> </tr> </tbody> </table> <p>é™¤æ­¤ä¹‹å¤–ï¼ŒJava 8 å…è®¸ä½¿ç”¨æµå¼ API æ¥æ“ä½œé›†åˆï¼ŒCollection æ¥å£æä¾›äº†ä¸€ä¸ª stream() é»˜è®¤æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯è¿”å›è¯¥é›†åˆå¯¹åº”çš„æµï¼Œæ¥ä¸‹æ¥å³å¯é€šè¿‡æµå¼ API æ¥æ“ä½œé›†åˆå…ƒç´ ã€‚ç”±äº Stream å¯ä»¥å¯¹é›†åˆå…ƒç´ è¿›è¡Œæ•´ä½“çš„èšé›†æ“ä½œï¼Œå› æ­¤ Stream æå¤§åœ°ä¸°å¯Œäº†é›†åˆçš„åŠŸèƒ½ã€‚</p> <p>ä¾‹å¦‚ï¼Œå¯¹äºã€ŠPredicateæ“ä½œcollectioné›†åˆã€‹ä¸€èŠ‚çš„ç¤ºä¾‹ç¨‹åºéœ€è¦é¢å¤–å®šä¹‰ä¸€ä¸ª calAll() æ–¹æ³•æ¥éå†é›†åˆå…ƒç´ ï¼Œç„¶åä¾æ¬¡å¯¹æ¯ä¸ªé›†åˆå…ƒç´ è¿›è¡Œåˆ¤æ–­ï¼Œè¿™æ ·åšå¤ªéº»çƒ¦äº†ã€‚å¦‚æœä½¿ç”¨ Stream å¯ä»¥ç›´æ¥å¯¹é›†åˆä¸­æ‰€æœ‰çš„å…ƒç´ è¿›è¡Œæ‰¹é‡æ“ä½œã€‚ä¸‹é¢ä½¿ç”¨ Stream æ¥æ”¹å†™è¿™ä¸ªç¨‹åºã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CollectionStream</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="w">        </span><span class="c1">// åˆ›å»ºä¸€ä¸ªé›†åˆ</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="w">        </span><span class="n">Collection</span><span class="w"> </span><span class="n">objs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashSet</span><span class="p">();</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Javaæ•™ç¨‹"</span><span class="p">));</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘C++æ•™ç¨‹"</span><span class="p">));</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Cè¯­è¨€æ•™ç¨‹"</span><span class="p">));</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Pythonæ•™ç¨‹"</span><span class="p">));</span>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘Goæ•™ç¨‹"</span><span class="p">));</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a><span class="w">        </span><span class="c1">// ç»Ÿè®¡é›†åˆä¸­å‡ºç°â€œCè¯­è¨€ä¸­æ–‡ç½‘â€å­—ç¬¦ä¸²çš„æ•°é‡</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">objs</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">filter</span><span class="p">(</span><span class="n">ele</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">((</span><span class="n">String</span><span class="p">)</span><span class="w"> </span><span class="n">ele</span><span class="p">).</span><span class="na">contains</span><span class="p">(</span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘"</span><span class="p">)).</span><span class="na">count</span><span class="p">());</span><span class="w"> </span><span class="c1">// è¾“å‡º 5</span>
</span><span id="__span-27-12"><a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a><span class="w">        </span><span class="c1">// ç»Ÿè®¡é›†åˆä¸­å‡ºç°â€œJavaâ€å­—ç¬¦ä¸²çš„æ•°é‡</span>
</span><span id="__span-27-13"><a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">objs</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">filter</span><span class="p">(</span><span class="n">ele</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">((</span><span class="n">String</span><span class="p">)</span><span class="w"> </span><span class="n">ele</span><span class="p">).</span><span class="na">contains</span><span class="p">(</span><span class="s">"Java"</span><span class="p">)).</span><span class="na">count</span><span class="p">());</span><span class="w"> </span><span class="c1">// è¾“å‡º 1</span>
</span><span id="__span-27-14"><a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a><span class="w">        </span><span class="c1">// ç»Ÿè®¡é›†åˆä¸­å‡ºç°å­—ç¬¦ä¸²é•¿åº¦å¤§äº 12 çš„æ•°é‡</span>
</span><span id="__span-27-15"><a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">objs</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">filter</span><span class="p">(</span><span class="n">ele</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">((</span><span class="n">String</span><span class="p">)</span><span class="w"> </span><span class="n">ele</span><span class="p">).</span><span class="na">length</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">12</span><span class="p">).</span><span class="na">count</span><span class="p">());</span><span class="w"> </span><span class="c1">// è¾“å‡º 1</span>
</span><span id="__span-27-16"><a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a><span class="w">        </span><span class="c1">// å…ˆè°ƒç”¨Collectionå¯¹è±¡çš„stream ()æ–¹æ³•å°†é›†åˆè½¬æ¢ä¸ºStream</span>
</span><span id="__span-27-17"><a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a><span class="w">        </span><span class="c1">// å†è°ƒç”¨Streamçš„mapToInt()æ–¹æ³•è·å–åŸæœ‰çš„Streamå¯¹åº”çš„IntStream</span>
</span><span id="__span-27-18"><a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a><span class="w">        </span><span class="n">objs</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">mapToInt</span><span class="p">(</span><span class="n">ele</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">((</span><span class="n">String</span><span class="p">)</span><span class="w"> </span><span class="n">ele</span><span class="p">).</span><span class="na">length</span><span class="p">())</span>
</span><span id="__span-27-19"><a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a><span class="w">                </span><span class="c1">// è°ƒç”¨forEach()æ–¹æ³•éå†IntStreamä¸­æ¯ä¸ªå…ƒç´ </span>
</span><span id="__span-27-20"><a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a><span class="w">                </span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span><span class="c1">// è¾“å‡º 11 11 12 10 14</span>
</span><span id="__span-27-21"><a id="__codelineno-27-21" name="__codelineno-27-21" href="#__codelineno-27-21"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-27-22"><a id="__codelineno-27-22" name="__codelineno-27-22" href="#__codelineno-27-22"></a><span class="p">}</span>
</span></code></pre></div> <p>è¾“å‡ºç»“æœä¸ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>5    1    1    11    11    12    10    14
</span></code></pre></div> <p>ä»ä¸Šé¢ä»£ç ç¬¬ 11~20 è¡Œå¯ä»¥çœ‹å‡ºï¼Œç¨‹åºåªè¦è°ƒç”¨ Collection çš„ stream() æ–¹æ³•å³å¯è¿”å›è¯¥é›†åˆå¯¹åº”çš„ Streamï¼Œæ¥ä¸‹æ¥å°±å¯é€šè¿‡ Stream æä¾›çš„æ–¹æ³•å¯¹æ‰€æœ‰é›†åˆå…ƒç´ è¿›è¡Œå¤„ç†ï¼Œè¿™æ ·å¤§å¤§åœ°ç®€åŒ–äº†é›†åˆç¼–ç¨‹çš„ä»£ç ï¼Œè¿™ä¹Ÿæ˜¯ Stream ç¼–ç¨‹å¸¦æ¥çš„ä¼˜åŠ¿ã€‚</p> <p>ä¸Šé¢ç¨‹åºä¸­ç¬¬ 18 è¡Œä»£ç å…ˆè°ƒç”¨ Collection å¯¹è±¡çš„ stream() æ–¹æ³•å°†é›†åˆè½¬æ¢ä¸º Stream å¯¹è±¡ï¼Œç„¶åè°ƒç”¨ Stream å¯¹è±¡çš„ mapToInt() æ–¹æ³•å°†å…¶è½¬æ¢ä¸º IntStream è¿™ä¸ª mapToIntã€‚æ–¹æ³•å°±æ˜¯ä¸€ä¸ªä¸­é—´æ–¹æ³•ï¼Œå› æ­¤ç¨‹åºå¯ç»§ç»­è°ƒç”¨ IntStream çš„ forEach() æ–¹æ³•æ¥éå†æµä¸­çš„å…ƒç´ ã€‚</p> <h2 id="99æ³›å‹">9.9ã€æ³›å‹<a class="headerlink" href="#99æ³›å‹" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>å‰é¢æåˆ° Java é›†åˆæœ‰ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªå¯¹è±¡â€œä¸¢è¿›â€é›†åˆé‡Œä¹‹åï¼Œé›†åˆå°±ä¼šâ€œå¿˜è®°â€è¿™ä¸ªå¯¹è±¡çš„æ•°æ®ç±»å‹ï¼Œå½“å†æ¬¡å–å‡ºè¯¥å¯¹è±¡æ—¶ï¼Œè¯¥å¯¹è±¡çš„ç¼–è¯‘ç±»å‹å°±å˜æˆäº† Object ç±»å‹ï¼ˆå…¶è¿è¡Œæ—¶ç±»å‹æ²¡å˜ï¼‰ã€‚</p> <p>Java é›†åˆä¹‹æ‰€ä»¥è¢«è®¾è®¡æˆè¿™æ ·ï¼Œæ˜¯å› ä¸ºé›†åˆçš„è®¾è®¡è€…ä¸çŸ¥é“æˆ‘ä»¬ä¼šç”¨é›†åˆæ¥ä¿å­˜ä»€ä¹ˆç±»å‹çš„å¯¹è±¡ï¼Œæ‰€ä»¥ä»–ä»¬æŠŠé›†åˆè®¾è®¡æˆèƒ½ä¿å­˜ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼Œåªè¦æ±‚å…·æœ‰å¾ˆå¥½çš„é€šç”¨æ€§ï¼Œä½†è¿™æ ·åšå¸¦æ¥å¦‚ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š</p> <ol> <li>é›†åˆå¯¹å…ƒç´ ç±»å‹æ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œè¿™æ ·å¯èƒ½å¼•å‘ä¸€äº›é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œæƒ³åˆ›å»ºä¸€ä¸ªåªèƒ½ä¿å­˜ Dog å¯¹è±¡çš„é›†åˆï¼Œä½†ç¨‹åºä¹Ÿå¯ä»¥è½»æ˜“åœ°å°† Cat å¯¹è±¡â€œä¸¢â€è¿›å»ï¼Œæ‰€ä»¥å¯èƒ½å¼•å‘å¼‚å¸¸ã€‚</li> <li>ç”±äºæŠŠå¯¹è±¡â€œä¸¢è¿›â€é›†åˆæ—¶ï¼Œé›†åˆä¸¢å¤±äº†å¯¹è±¡çš„çŠ¶æ€ä¿¡æ¯ï¼Œé›†åˆåªçŸ¥é“å®ƒç››è£…çš„æ˜¯ Objectï¼Œå› æ­¤å–å‡ºé›†åˆå…ƒç´ åé€šå¸¸è¿˜éœ€è¦è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚è¿™ç§å¼ºåˆ¶ç±»å‹è½¬æ¢æ—¢å¢åŠ äº†ç¼–ç¨‹çš„å¤æ‚åº¦ï¼Œä¹Ÿå¯èƒ½å¼•å‘ ClassCastException å¼‚å¸¸ã€‚</li> </ol> <p>æ‰€ä»¥ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œä» Java 1.5 å¼€å§‹æä¾›äº†æ³›å‹ã€‚æ³›å‹å¯ä»¥åœ¨ç¼–è¯‘çš„æ—¶å€™æ£€æŸ¥ç±»å‹å®‰å…¨ï¼Œå¹¶ä¸”æ‰€æœ‰çš„å¼ºåˆ¶è½¬æ¢éƒ½æ˜¯è‡ªåŠ¨å’Œéšå¼çš„ï¼Œæé«˜äº†ä»£ç çš„é‡ç”¨ç‡ï¼ˆå¸¸ç”¨åå­—ï¼šE = Elememtã€T = Typeã€K = Keyã€V = Valueï¼‰ã€‚</p> <h4 id="991æ³›å‹é›†åˆ">9.9.1ã€æ³›å‹é›†åˆ<a class="headerlink" href="#991æ³›å‹é›†åˆ" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p>==æ³›å‹æœ¬è´¨ä¸Šæ˜¯æä¾›ç±»å‹çš„â€œç±»å‹å‚æ•°â€ï¼Œä¹Ÿå°±æ˜¯å‚æ•°åŒ–ç±»å‹ã€‚==æˆ‘ä»¬å¯ä»¥ä¸ºç±»ã€æ¥å£æˆ–æ–¹æ³•æŒ‡å®šä¸€ä¸ªç±»å‹å‚æ•°ï¼Œé€šè¿‡è¿™ä¸ªå‚æ•°é™åˆ¶æ“ä½œçš„æ•°æ®ç±»å‹ï¼Œä»è€Œä¿è¯ç±»å‹è½¬æ¢çš„ç»å¯¹å®‰å…¨ã€‚</p> <p>ä¸‹é¢å°†ç»“åˆæ³›å‹ä¸é›†åˆç¼–å†™ä¸€ä¸ªæ¡ˆä¾‹å®ç°å›¾ä¹¦ä¿¡æ¯è¾“å‡ºã€‚</p> <p>é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªè¡¨ç¤ºå›¾ä¹¦çš„å®ä½“ç±» Bookï¼Œå…¶ä¸­åŒ…æ‹¬çš„å›¾ä¹¦ä¿¡æ¯æœ‰å›¾ä¹¦ç¼–å·ã€å›¾ä¹¦åç§°å’Œä»·æ ¼ã€‚Book ç±»çš„å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Book</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">Id</span><span class="p">;</span><span class="w"> </span><span class="c1">// å›¾ä¹¦ç¼–å·</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">Name</span><span class="p">;</span><span class="w"> </span><span class="c1">// å›¾ä¹¦åç§°</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">Price</span><span class="p">;</span><span class="w"> </span><span class="c1">// å›¾ä¹¦ä»·æ ¼</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Book</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">price</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// æ„é€ æ–¹æ³•</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">Id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">Name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">Price</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">price</span><span class="p">;</span>
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">toString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// é‡å†™ toString()æ–¹æ³•</span>
</span><span id="__span-29-11"><a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">Id</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">Name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"ï¼Œ"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">Price</span><span class="p">;</span>
</span><span id="__span-29-12"><a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-29-13"><a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a><span class="p">}</span>
</span></code></pre></div> <p>ä½¿ç”¨ Book ä½œä¸ºç±»å‹åˆ›å»º Map å’Œ List ä¸¤ä¸ªæ³›å‹é›†åˆï¼Œç„¶åå‘é›†åˆä¸­æ·»åŠ å›¾ä¹¦å…ƒç´ ï¼Œæœ€åè¾“å‡ºé›†åˆä¸­çš„å†…å®¹ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test14</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="w">        </span><span class="c1">// åˆ›å»º3ä¸ªBookå¯¹è±¡</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="w">        </span><span class="n">Book</span><span class="w"> </span><span class="n">book1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Book</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">"å”è¯—ä¸‰ç™¾é¦–"</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">);</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="w">        </span><span class="n">Book</span><span class="w"> </span><span class="n">book2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Book</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s">"å°æ˜Ÿæ˜Ÿ"</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">);</span>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="w">        </span><span class="n">Book</span><span class="w"> </span><span class="n">book3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Book</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">"æˆè¯­å¤§å…¨"</span><span class="p">,</span><span class="w"> </span><span class="mi">22</span><span class="p">);</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="w">        </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">Book</span><span class="o">&gt;</span><span class="w"> </span><span class="n">books</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">Book</span><span class="o">&gt;</span><span class="p">();</span><span class="w"> </span><span class="c1">// å®šä¹‰æ³›å‹ Map é›†åˆ</span>
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span class="w">        </span><span class="n">books</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="mi">1001</span><span class="p">,</span><span class="w"> </span><span class="n">book1</span><span class="p">);</span><span class="w"> </span><span class="c1">// å°†ç¬¬ä¸€ä¸ª Book å¯¹è±¡å­˜å‚¨åˆ° Map ä¸­</span>
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a><span class="w">        </span><span class="n">books</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="mi">1002</span><span class="p">,</span><span class="w"> </span><span class="n">book2</span><span class="p">);</span><span class="w"> </span><span class="c1">// å°†ç¬¬äºŒä¸ª Book å¯¹è±¡å­˜å‚¨åˆ° Map ä¸­</span>
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a><span class="w">        </span><span class="n">books</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="mi">1003</span><span class="p">,</span><span class="w"> </span><span class="n">book3</span><span class="p">);</span><span class="w"> </span><span class="c1">// å°†ç¬¬ä¸‰ä¸ª Book å¯¹è±¡å­˜å‚¨åˆ° Map ä¸­</span>
</span><span id="__span-30-11"><a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æ³›å‹Mapå­˜å‚¨çš„å›¾ä¹¦ä¿¡æ¯å¦‚ä¸‹ï¼š"</span><span class="p">);</span>
</span><span id="__span-30-12"><a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">books</span><span class="p">.</span><span class="na">keySet</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-13"><a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a><span class="w">            </span><span class="c1">// éå†é”®</span>
</span><span id="__span-30-14"><a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"â€”â€”"</span><span class="p">);</span>
</span><span id="__span-30-15"><a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">books</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">id</span><span class="p">));</span><span class="w"> </span><span class="c1">// ä¸éœ€è¦ç±»å‹è½¬æ¢</span>
</span><span id="__span-30-16"><a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-30-17"><a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="w"> </span><span class="n">bookList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="p">();</span><span class="w"> </span><span class="c1">// å®šä¹‰æ³›å‹çš„ List é›†åˆ</span>
</span><span id="__span-30-18"><a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a><span class="w">        </span><span class="n">bookList</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">book1</span><span class="p">);</span>
</span><span id="__span-30-19"><a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a><span class="w">        </span><span class="n">bookList</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">book2</span><span class="p">);</span>
</span><span id="__span-30-20"><a id="__codelineno-30-20" name="__codelineno-30-20" href="#__codelineno-30-20"></a><span class="w">        </span><span class="n">bookList</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">book3</span><span class="p">);</span>
</span><span id="__span-30-21"><a id="__codelineno-30-21" name="__codelineno-30-21" href="#__codelineno-30-21"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æ³›å‹Listå­˜å‚¨çš„å›¾ä¹¦ä¿¡æ¯å¦‚ä¸‹ï¼š"</span><span class="p">);</span>
</span><span id="__span-30-22"><a id="__codelineno-30-22" name="__codelineno-30-22" href="#__codelineno-30-22"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">bookList</span><span class="p">.</span><span class="na">size</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-23"><a id="__codelineno-30-23" name="__codelineno-30-23" href="#__codelineno-30-23"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">bookList</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">));</span><span class="w"> </span><span class="c1">// è¿™é‡Œä¸éœ€è¦ç±»å‹è½¬æ¢</span>
</span><span id="__span-30-24"><a id="__codelineno-30-24" name="__codelineno-30-24" href="#__codelineno-30-24"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-30-25"><a id="__codelineno-30-25" name="__codelineno-30-25" href="#__codelineno-30-25"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-30-26"><a id="__codelineno-30-26" name="__codelineno-30-26" href="#__codelineno-30-26"></a><span class="p">}</span>
</span></code></pre></div> <p>åœ¨è¯¥ç¤ºä¾‹ä¸­ï¼Œç¬¬ 7 è¡Œä»£ç åˆ›å»ºäº†ä¸€ä¸ªé”®ç±»å‹ä¸º Integerã€å€¼ç±»å‹ä¸º Book çš„æ³›å‹é›†åˆï¼Œå³æŒ‡æ˜äº†è¯¥ Map é›†åˆä¸­å­˜æ”¾çš„é”®å¿…é¡»æ˜¯ Integer ç±»å‹ã€å€¼å¿…é¡»ä¸º Book ç±»å‹ï¼Œå¦åˆ™ç¼–è¯‘å‡ºé”™ã€‚åœ¨è·å– Map é›†åˆä¸­çš„å…ƒç´ æ—¶ï¼Œä¸éœ€è¦å°†<code>books.get(id);</code>è·å–çš„å€¼å¼ºåˆ¶è½¬æ¢ä¸º Book ç±»å‹ï¼Œç¨‹åºä¼šéšå¼è½¬æ¢ã€‚åœ¨åˆ›å»º List é›†åˆæ—¶ï¼ŒåŒæ ·ä½¿ç”¨äº†æ³›å‹ï¼Œå› æ­¤åœ¨è·å–é›†åˆä¸­çš„å…ƒç´ æ—¶ä¹Ÿä¸éœ€è¦å°†<code>bookList.get(i)</code>ä»£ç å¼ºåˆ¶è½¬æ¢ä¸º Book ç±»å‹ï¼Œç¨‹åºä¼šéšå¼è½¬æ¢ã€‚</p> <p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="n">æ³›å‹Mapå­˜å‚¨çš„å›¾ä¹¦ä¿¡æ¯å¦‚ä¸‹</span><span class="err">ï¼š</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="mi">1001</span><span class="err">â€”â€”</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">å”è¯—ä¸‰ç™¾é¦–</span><span class="err">ï¼Œ</span><span class="mi">8</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="mi">1003</span><span class="err">â€”â€”</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">æˆè¯­å¤§å…¨</span><span class="err">ï¼Œ</span><span class="mi">22</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="mi">1002</span><span class="err">â€”â€”</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">å°æ˜Ÿæ˜Ÿ</span><span class="err">ï¼Œ</span><span class="mi">12</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="n">æ³›å‹Listå­˜å‚¨çš„å›¾ä¹¦ä¿¡æ¯å¦‚ä¸‹</span><span class="err">ï¼š</span>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">å”è¯—ä¸‰ç™¾é¦–</span><span class="err">ï¼Œ</span><span class="mi">8</span>
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">å°æ˜Ÿæ˜Ÿ</span><span class="err">ï¼Œ</span><span class="mi">12</span>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">æˆè¯­å¤§å…¨</span><span class="err">ï¼Œ</span><span class="mi">22</span>
</span></code></pre></div> <h4 id="992æ³›å‹ç±»">9.9.2ã€æ³›å‹ç±»<a class="headerlink" href="#992æ³›å‹ç±»" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p>é™¤äº†å¯ä»¥å®šä¹‰æ³›å‹é›†åˆä¹‹å¤–ï¼Œè¿˜å¯ä»¥ç›´æ¥é™å®šæ³›å‹ç±»çš„ç±»å‹å‚æ•°ã€‚è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">class_name</span><span class="o">&lt;</span><span class="n">data_type1</span><span class="p">,</span><span class="n">data_type2</span><span class="p">,</span><span class="err">â€¦</span><span class="o">&gt;</span><span class="p">{}</span>
</span></code></pre></div> <p>å…¶ä¸­ï¼Œclass_name è¡¨ç¤ºç±»çš„åç§°ï¼Œdata_ type1 ç­‰è¡¨ç¤ºç±»å‹å‚æ•°ã€‚Java æ³›å‹æ”¯æŒå£°æ˜ä¸€ä¸ªä»¥ä¸Šçš„ç±»å‹å‚æ•°ï¼Œåªéœ€è¦å°†ç±»å‹ç”¨é€—å·éš”å¼€å³å¯ã€‚</p> <p>æ³›å‹ç±»ä¸€èˆ¬ç”¨äºç±»ä¸­çš„å±æ€§ç±»å‹ä¸ç¡®å®šçš„æƒ…å†µä¸‹ã€‚åœ¨å£°æ˜å±æ€§æ—¶ï¼Œä½¿ç”¨ä¸‹é¢çš„è¯­å¥ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="kd">private</span><span class="w"> </span><span class="n">data_type1</span><span class="w"> </span><span class="n">property_name1</span><span class="p">;</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="kd">private</span><span class="w"> </span><span class="n">data_type2</span><span class="w"> </span><span class="n">property_name2</span><span class="p">;</span>
</span></code></pre></div> <p>è¯¥è¯­å¥ä¸­çš„ data_type1 ä¸ç±»å£°æ˜ä¸­çš„ data_type1 è¡¨ç¤ºçš„æ˜¯åŒä¸€ç§æ•°æ®ç±»å‹ã€‚</p> <p><mark>åœ¨å®ä¾‹åŒ–æ³›å‹ç±»æ—¶ï¼Œéœ€è¦æŒ‡æ˜æ³›å‹ç±»ä¸­çš„ç±»å‹å‚æ•°ï¼Œå¹¶èµ‹äºˆæ³›å‹ç±»å±æ€§ç›¸åº”ç±»å‹çš„å€¼ã€‚</mark></p> <p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç¤ºä¾‹ä»£ç åˆ›å»ºäº†ä¸€ä¸ªè¡¨ç¤ºå­¦ç”Ÿçš„æ³›å‹ç±»ï¼Œè¯¥ç±»ä¸­åŒ…æ‹¬ 3 ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯å§“åã€å¹´é¾„å’Œæ€§åˆ«ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Stu</span><span class="o">&lt;</span><span class="n">N</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">S</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w"> </span><span class="c1">// å§“å</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w"> </span><span class="c1">// å¹´é¾„</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="n">sex</span><span class="p">;</span><span class="w"> </span><span class="c1">// æ€§åˆ«</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="w">    </span><span class="c1">// åˆ›å»ºç±»çš„æ„é€ å‡½æ•°</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Stu</span><span class="p">(</span><span class="n">N</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="n">sex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">sex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sex</span><span class="p">;</span>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-34-11"><a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a><span class="w">    </span><span class="c1">// ä¸‹é¢æ˜¯ä¸Šé¢3ä¸ªå±æ€§çš„setter/getteræ–¹æ³•</span>
</span><span id="__span-34-12"><a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-13"><a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-34-14"><a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-34-15"><a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setName</span><span class="p">(</span><span class="n">N</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-16"><a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-34-17"><a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-34-18"><a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="nf">getAge</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-19"><a id="__codelineno-34-19" name="__codelineno-34-19" href="#__codelineno-34-19"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
</span><span id="__span-34-20"><a id="__codelineno-34-20" name="__codelineno-34-20" href="#__codelineno-34-20"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-34-21"><a id="__codelineno-34-21" name="__codelineno-34-21" href="#__codelineno-34-21"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setAge</span><span class="p">(</span><span class="n">A</span><span class="w"> </span><span class="n">age</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-22"><a id="__codelineno-34-22" name="__codelineno-34-22" href="#__codelineno-34-22"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
</span><span id="__span-34-23"><a id="__codelineno-34-23" name="__codelineno-34-23" href="#__codelineno-34-23"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-34-24"><a id="__codelineno-34-24" name="__codelineno-34-24" href="#__codelineno-34-24"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="nf">getSex</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-25"><a id="__codelineno-34-25" name="__codelineno-34-25" href="#__codelineno-34-25"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">sex</span><span class="p">;</span>
</span><span id="__span-34-26"><a id="__codelineno-34-26" name="__codelineno-34-26" href="#__codelineno-34-26"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-34-27"><a id="__codelineno-34-27" name="__codelineno-34-27" href="#__codelineno-34-27"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setSex</span><span class="p">(</span><span class="n">S</span><span class="w"> </span><span class="n">sex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-28"><a id="__codelineno-34-28" name="__codelineno-34-28" href="#__codelineno-34-28"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">sex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sex</span><span class="p">;</span>
</span><span id="__span-34-29"><a id="__codelineno-34-29" name="__codelineno-34-29" href="#__codelineno-34-29"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-34-30"><a id="__codelineno-34-30" name="__codelineno-34-30" href="#__codelineno-34-30"></a><span class="p">}</span>
</span></code></pre></div> <p>æ¥ç€åˆ›å»ºæµ‹è¯•ç±»ã€‚åœ¨æµ‹è¯•ç±»ä¸­è°ƒç”¨ Stu ç±»çš„æ„é€ æ–¹æ³•å®ä¾‹åŒ– Stu å¯¹è±¡ï¼Œå¹¶ç»™è¯¥ç±»ä¸­çš„ 3 ä¸ªå±æ€§èµ‹äºˆåˆå§‹å€¼ï¼Œæœ€ç»ˆéœ€è¦è¾“å‡ºå­¦ç”Ÿä¿¡æ¯ã€‚æµ‹è¯•ç±»çš„ä»£ç å®ç°å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test14</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="w">        </span><span class="n">Stu</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">Character</span><span class="o">&gt;</span><span class="w"> </span><span class="n">stu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Stu</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">Character</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"å¼ æ™“ç²"</span><span class="p">,</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w"> </span><span class="sc">'å¥³'</span><span class="p">);</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stu</span><span class="p">.</span><span class="na">getName</span><span class="p">();</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="w">        </span><span class="n">Integer</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stu</span><span class="p">.</span><span class="na">getAge</span><span class="p">();</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="w">        </span><span class="n">Character</span><span class="w"> </span><span class="n">sex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stu</span><span class="p">.</span><span class="na">getSex</span><span class="p">();</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"å­¦ç”Ÿä¿¡æ¯å¦‚ä¸‹ï¼š"</span><span class="p">);</span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"å­¦ç”Ÿå§“åï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"ï¼Œå¹´é¾„ï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"ï¼Œæ€§åˆ«ï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sex</span><span class="p">);</span>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="p">}</span>
</span></code></pre></div> <p>è¯¥ç¨‹åºçš„è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>å­¦ç”Ÿä¿¡æ¯å¦‚ä¸‹ï¼š
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>å­¦ç”Ÿå§“åï¼šå¼ æ™“ç²ï¼Œå¹´é¾„ï¼š28ï¼Œæ€§åˆ«ï¼šå¥³
</span></code></pre></div> <p>åœ¨è¯¥ç¨‹åºçš„ Stu ç±»ä¸­ï¼Œå®šä¹‰äº† 3 ä¸ªç±»å‹å‚æ•°ï¼Œåˆ†åˆ«ä½¿ç”¨ Nã€A å’Œ S æ¥ä»£æ›¿ï¼ŒåŒæ—¶å®ç°äº†è¿™ 3 ä¸ªå±æ€§çš„ setter/getter æ–¹æ³•ã€‚åœ¨ä¸»ç±»ä¸­ï¼Œè°ƒç”¨ Stu ç±»çš„æ„é€ å‡½æ•°åˆ›å»ºäº† Stu ç±»çš„å¯¹è±¡ï¼ŒåŒæ—¶æŒ‡å®š 3 ä¸ªç±»å‹å‚æ•°ï¼Œåˆ†åˆ«ä¸º Stringã€Integer å’Œ Characterã€‚åœ¨è·å–å­¦ç”Ÿå§“åã€å¹´é¾„å’Œæ€§åˆ«æ—¶ï¼Œä¸éœ€è¦ç±»å‹è½¬æ¢ï¼Œç¨‹åºéšå¼åœ°å°† Object ç±»å‹çš„æ•°æ®è½¬æ¢ä¸ºç›¸åº”çš„æ•°æ®ç±»å‹ã€‚</p> <h4 id="993æ³›å‹æ–¹æ³•">9.9.3ã€æ³›å‹æ–¹æ³•<a class="headerlink" href="#993æ³›å‹æ–¹æ³•" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ‰€ä½¿ç”¨çš„æ³›å‹éƒ½æ˜¯åº”ç”¨äºæ•´ä¸ªç±»ä¸Šã€‚æ³›å‹åŒæ ·å¯ä»¥åœ¨ç±»ä¸­åŒ…å«å‚æ•°åŒ–çš„æ–¹æ³•ï¼Œè€Œæ–¹æ³•æ‰€åœ¨çš„ç±»å¯ä»¥æ˜¯æ³›å‹ç±»ï¼Œä¹Ÿå¯ä»¥ä¸æ˜¯æ³›å‹ç±»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<mark>æ˜¯å¦æ‹¥æœ‰æ³›å‹æ–¹æ³•ï¼Œä¸å…¶æ‰€åœ¨çš„ç±»æ˜¯ä¸æ˜¯æ³›å‹æ²¡æœ‰å…³ç³»ã€‚</mark></p> <p>æ³›å‹æ–¹æ³•ä½¿å¾—è¯¥æ–¹æ³•èƒ½å¤Ÿç‹¬ç«‹äºç±»è€Œäº§ç”Ÿå˜åŒ–ã€‚å¦‚æœä½¿ç”¨æ³›å‹æ–¹æ³•å¯ä»¥å–ä»£ç±»æ³›å‹åŒ–ï¼Œé‚£ä¹ˆå°±åº”è¯¥åªä½¿ç”¨æ³›å‹æ–¹æ³•ã€‚å¦å¤–ï¼Œå¯¹ä¸€ä¸ª static çš„æ–¹æ³•è€Œè¨€ï¼Œæ— æ³•è®¿é—®æ³›å‹ç±»çš„ç±»å‹å‚æ•°ã€‚å› æ­¤ï¼Œ<mark>å¦‚æœ static æ–¹æ³•éœ€è¦ä½¿ç”¨æ³›å‹èƒ½åŠ›ï¼Œå°±å¿…é¡»ä½¿å…¶æˆä¸ºæ³›å‹æ–¹æ³•ã€‚</mark></p> <p><mark>ä¸€èˆ¬æ¥è¯´ç¼–å†™ Java æ³›å‹æ–¹æ³•ï¼Œå…¶è¿”å›å€¼ç±»å‹è‡³å°‘æœ‰ä¸€ä¸ªå‚æ•°ç±»å‹åº”è¯¥æ˜¯æ³›å‹ï¼Œè€Œä¸”ç±»å‹åº”è¯¥æ˜¯ä¸€è‡´çš„ï¼Œå¦‚æœåªæœ‰è¿”å›å€¼ç±»å‹æˆ–å‚æ•°ç±»å‹ä¹‹ä¸€ä½¿ç”¨äº†æ³›å‹ï¼Œé‚£ä¹ˆè¿™ä¸ªæ³›å‹æ–¹æ³•çš„ä½¿ç”¨å°±è¢«é™åˆ¶äº†ã€‚</mark></p> <p>ä½¿ç”¨æ³›å‹æ–¹æ³•æ‰“å°å›¾ä¹¦ä¿¡æ¯ã€‚å®šä¹‰æ³›å‹æ–¹æ³•ï¼Œå‚æ•°ç±»å‹ä½¿ç”¨â€œTâ€æ¥ä»£æ›¿ã€‚åœ¨æ–¹æ³•çš„ä¸»ä½“ä¸­æ‰“å°å‡ºå›¾ä¹¦ä¿¡æ¯ã€‚ä»£ç çš„å®ç°å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test16</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">List</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">book</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// å®šä¹‰æ³›å‹æ–¹æ³•</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">book</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">book</span><span class="p">);</span>
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-37-6"><a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-37-7"><a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a>
</span><span id="__span-37-8"><a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-9"><a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a><span class="w">        </span><span class="n">Book</span><span class="w"> </span><span class="n">stu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Book</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">"ç»†å­¦ Java ç¼–ç¨‹"</span><span class="p">,</span><span class="w"> </span><span class="mi">28</span><span class="p">);</span>
</span><span id="__span-37-10"><a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a><span class="w">        </span><span class="n">List</span><span class="p">(</span><span class="n">stu</span><span class="p">);</span><span class="w"> </span><span class="c1">// è°ƒç”¨æ³›å‹æ–¹æ³•</span>
</span><span id="__span-37-11"><a id="__codelineno-37-11" name="__codelineno-37-11" href="#__codelineno-37-11"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-37-12"><a id="__codelineno-37-12" name="__codelineno-37-12" href="#__codelineno-37-12"></a><span class="p">}</span>
</span></code></pre></div> <p>è¯¥ç¨‹åºä¸­çš„ Book ç±»ä¸ºå‰é¢ç¤ºä¾‹ä¸­ä½¿ç”¨åˆ°çš„ Book ç±»ã€‚åœ¨è¯¥ç¨‹åºä¸­å®šä¹‰äº†ä¸€ä¸ªåç§°ä¸º List çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ä¸º voidï¼Œç±»å‹å‚æ•°ä½¿ç”¨â€œTâ€æ¥ä»£æ›¿ã€‚åœ¨è°ƒç”¨è¯¥æ³›å‹æ–¹æ³•æ—¶ï¼Œå°†ä¸€ä¸ª Book å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’åˆ°è¯¥æ–¹æ³•ä¸­ï¼Œç›¸å½“äºæŒ‡æ˜äº†è¯¥æ³›å‹æ–¹æ³•çš„å‚æ•°ç±»å‹ä¸º Bookã€‚</p> <p>è¯¥ç¨‹åºçš„è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>1, ç»†å­¦ Java ç¼–ç¨‹ï¼Œ28
</span></code></pre></div> <h4 id="994æ³›å‹çš„é«˜çº§ç”¨æ³•">9.9.4ã€æ³›å‹çš„é«˜çº§ç”¨æ³•<a class="headerlink" href="#994æ³›å‹çš„é«˜çº§ç”¨æ³•" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p>æ³›å‹çš„ç”¨æ³•éå¸¸çµæ´»ï¼Œé™¤åœ¨é›†åˆã€ç±»å’Œæ–¹æ³•ä¸­ä½¿ç”¨å¤–ï¼Œæœ¬èŠ‚å°†ä»ä¸‰ä¸ªæ–¹é¢ä»‹ç»æ³›å‹çš„é«˜çº§ç”¨æ³•ï¼ŒåŒ…æ‹¬é™åˆ¶æ³›å‹å¯ç”¨ç±»å‹ã€ä½¿ç”¨ç±»å‹é€šé…ç¬¦ã€ç»§æ‰¿æ³›å‹ç±»å’Œå®ç°æ³›å‹æ¥å£ã€‚</p> <hr> <p><strong>é™åˆ¶æ³›å‹å¯ç”¨ç±»å‹</strong></p> <p>åœ¨ Java ä¸­é»˜è®¤å¯ä»¥ä½¿ç”¨ä»»ä½•ç±»å‹æ¥å®ä¾‹åŒ–ä¸€ä¸ªæ³›å‹ç±»å¯¹è±¡ã€‚å½“ç„¶ä¹Ÿå¯ä»¥å¯¹æ³›å‹ç±»å®ä¾‹çš„ç±»å‹è¿›è¡Œé™åˆ¶ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="kd">class</span> <span class="nc">ç±»åç§°</span><span class="o">&lt;</span><span class="n">T</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">anyClass</span><span class="o">&gt;</span>
</span></code></pre></div> <p>å…¶ä¸­ï¼ŒanyClass æŒ‡æŸä¸ªæ¥å£æˆ–ç±»ã€‚ä½¿ç”¨æ³›å‹é™åˆ¶åï¼Œæ³›å‹ç±»çš„ç±»å‹å¿…é¡»å®ç°æˆ–ç»§æ‰¿ anyClass è¿™ä¸ªæ¥å£æˆ–ç±»ã€‚æ— è®º anyClass æ˜¯æ¥å£è¿˜æ˜¯ç±»ï¼Œåœ¨è¿›è¡Œæ³›å‹é™åˆ¶æ—¶éƒ½å¿…é¡»ä½¿ç”¨ extends å…³é”®å­—ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="c1">// é™åˆ¶ListClassçš„æ³›å‹ç±»å‹å¿…é¡»å®ç°Listæ¥å£</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ListClass</span><span class="o">&lt;</span><span class="n">T</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">List</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="w">        </span><span class="c1">// å®ä¾‹åŒ–ä½¿ç”¨ArrayListçš„æ³›å‹ç±»ListClassï¼Œæ­£ç¡®</span>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="w">        </span><span class="n">ListClass</span><span class="o">&lt;</span><span class="n">ArrayList</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lc1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ListClass</span><span class="o">&lt;</span><span class="n">ArrayList</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="w">        </span><span class="c1">// å®ä¾‹åŒ–ä½¿ç”¨LinkedListçš„æ³›å‹ç±»LlstClassï¼Œæ­£ç¡®</span>
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a><span class="w">        </span><span class="n">ListClass</span><span class="o">&lt;</span><span class="n">LinkedList</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lc2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ListClass</span><span class="o">&lt;</span><span class="n">LinkedList</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a><span class="w">        </span><span class="c1">// å®ä¾‹åŒ–ä½¿ç”¨HashMapçš„æ³›å‹ç±»ListClassï¼Œé”™è¯¯ï¼Œå› ä¸ºHasMapæ²¡æœ‰å®ç°Listæ¥å£</span>
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a><span class="w">        </span><span class="c1">// ListClass&lt;HashMap&gt; lc3=new ListClass&lt;HashMap&gt;();</span>
</span><span id="__span-40-10"><a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-40-11"><a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a><span class="p">}</span>
</span></code></pre></div> <p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå®šä¹‰ ListClass ç±»æ—¶è®¾ç½®æ³›å‹ç±»å‹å¿…é¡»å®ç° List æ¥å£ã€‚ä¾‹å¦‚ï¼ŒArrayList å’Œ LinkedList éƒ½å®ç°äº† List æ¥å£ï¼Œæ‰€ä»¥å¯ä»¥å®ä¾‹åŒ– ListClass ç±»ã€‚è€Œ HashMap æ²¡æœ‰å®ç° List æ¥å£ï¼Œæ‰€ä»¥åœ¨å®ä¾‹åŒ– ListClass ç±»æ—¶ä¼šæŠ¥é”™ã€‚</p> <hr> <p><strong>ä½¿ç”¨ç±»å‹é€šé…ç¬¦</strong></p> <p>Java ä¸­çš„æ³›å‹è¿˜æ”¯æŒä½¿ç”¨ç±»å‹é€šé…ç¬¦ï¼Œå®ƒçš„ä½œç”¨æ˜¯åœ¨åˆ›å»ºä¸€ä¸ªæ³›å‹ç±»å¯¹è±¡æ—¶é™åˆ¶è¿™ä¸ªæ³›å‹ç±»çš„ç±»å‹å¿…é¡»å®ç°æˆ–ç»§æ‰¿æŸä¸ªæ¥å£æˆ–ç±»ã€‚</p> <p>ä½¿ç”¨æ³›å‹ç±»å‹é€šé…ç¬¦çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="n">æ³›å‹ç±»åç§°</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">List</span><span class="o">&gt;</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span></code></pre></div> <p>å…¶ä¸­ï¼Œâ€œ&lt;? extends List&gt;â€ä½œä¸ºä¸€ä¸ªæ•´ä½“è¡¨ç¤ºç±»å‹æœªçŸ¥ï¼Œå½“éœ€è¦ä½¿ç”¨æ³›å‹å¯¹è±¡æ—¶ï¼Œå¯ä»¥å•ç‹¬å®ä¾‹åŒ–ã€‚</p> <p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç¤ºä¾‹ä»£ç æ¼”ç¤ºäº†ç±»å‹é€šé…ç¬¦çš„ä½¿ç”¨ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="n">A</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">List</span><span class="o">&gt;</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">A</span><span class="o">&lt;</span><span class="n">ArrayList</span><span class="o">&gt;</span><span class="w"> </span><span class="p">();</span><span class="w">    </span><span class="c1">// æ­£ç¡®</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">A</span><span class="o">&lt;</span><span class="n">LinkedList</span><span class="o">&gt;</span><span class="w"> </span><span class="p">();</span><span class="w">    </span><span class="c1">// æ­£ç¡®</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">A</span><span class="o">&lt;</span><span class="n">HashMap</span><span class="o">&gt;</span><span class="w"> </span><span class="p">();</span><span class="w">    </span><span class="c1">// é”™è¯¯</span>
</span></code></pre></div> <p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼ŒåŒæ ·ç”±äº HashMap ç±»æ²¡æœ‰å®ç° List æ¥å£ï¼Œæ‰€ä»¥åœ¨ç¼–è¯‘æ—¶ä¼šæŠ¥é”™ã€‚</p> <h2 id="910å›¾ä¹¦ä¿¡æ¯æŸ¥è¯¢">9.10ã€å›¾ä¹¦ä¿¡æ¯æŸ¥è¯¢<a class="headerlink" href="#910å›¾ä¹¦ä¿¡æ¯æŸ¥è¯¢" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>åœ¨å›¾ä¹¦ç®¡ç†ç³»ç»Ÿä¸­ä¸ºäº†æ–¹ä¾¿ç®¡ç†å›¾ä¹¦ï¼Œå°†å›¾ä¹¦åˆ’åˆ†ä¸ºå‡ ä¸ªç±»åˆ«ã€‚æ¯ä¸ªç±»åˆ«ä¸‹æœ‰å¾ˆå¤šå›¾ä¹¦ï¼Œæ¯æœ¬å›¾ä¹¦éƒ½æœ‰ç›¸å¯¹åº”çš„ç±»åˆ«ï¼Œè¿™å°±å…·å¤‡äº†ä¸€å¯¹å¤šçš„å…³ç³»æ˜ å°„ï¼Œå³ä¸€ä¸ªç±»åˆ«å¯¹åº”å¤šæœ¬å›¾ä¹¦ã€‚</p> <p>åœ¨è¿™ç§æƒ…å†µä¸‹å°±å¯ä»¥ä½¿ç”¨ Map æ˜ å°„æ¥å­˜å‚¨ç±»åˆ«å’Œå›¾ä¹¦ä¿¡æ¯ï¼Œå…¶é”®ä¸º Categoryï¼ˆç±»åˆ«ï¼‰ç±»å‹ï¼Œå€¼ä¸º List<book> ç±»å‹ï¼ˆBook ç±»ä¸ºå›¾ä¹¦ç±»ï¼‰ï¼Œç„¶åä½¿ç”¨åµŒå¥—å¾ªç¯éå†è¾“å‡ºæ¯ä¸ªç±»åˆ«æ‰€å¯¹åº”çš„å¤šä¸ªå›¾ä¹¦ä¿¡æ¯ã€‚å…·ä½“çš„å®ç°æ­¥éª¤å¦‚ä¸‹ã€‚</book></p> <ol> <li> <p>åˆ›å»ºè¡¨ç¤ºå›¾ä¹¦ç±»åˆ«çš„ Category ç±»ï¼Œåœ¨è¯¥ç±»ä¸­æœ‰ä¸¤ä¸ªå±æ€§ï¼šid å’Œ nameï¼Œåˆ†åˆ«è¡¨ç¤ºç¼–å·å’Œç±»åˆ«åç§°ï¼Œå¹¶å®ç°äº†å®ƒä»¬çš„ setXxx() å’Œ getXxx() æ–¹æ³•ï¼Œå…·ä½“å†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Category</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w"> </span><span class="c1">// ç±»åˆ«ç¼–å·</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w"> </span><span class="c1">// ç±»åˆ«åç§°</span>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Category</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">toString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-43-9"><a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">"æ‰€å±åˆ†ç±»ï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="p">;</span>
</span><span id="__span-43-10"><a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-43-11"><a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a><span class="w">    </span><span class="c1">// ä¸Šé¢ä¸¤ä¸ªå±æ€§çš„setXxx()å’ŒgetXxx()æ–¹æ³•</span>
</span><span id="__span-43-12"><a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a>
</span><span id="__span-43-13"><a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p>åˆ›å»ºè¡¨ç¤ºå›¾ä¹¦æ˜ç»†ä¿¡æ¯çš„ BookInfo ç±»ï¼Œåœ¨è¯¥ç±»ä¸­åŒ…å« 5 ä¸ªå±æ€§ï¼šidã€nameã€priceã€author å’Œ startTimeï¼Œåˆ†åˆ«è¡¨ç¤ºå›¾ä¹¦ç¼–å·ã€åç§°ã€ä»·æ ¼ã€ä½œè€…å’Œå‡ºç‰ˆæ—¶é—´ï¼ŒåŒæ ·å®ç°äº†å®ƒä»¬çš„ setXxx() å’Œ getXxx() æ–¹æ³•ï¼Œå…·ä½“å†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BookInfo</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w"> </span><span class="c1">// ç¼–å·</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w"> </span><span class="c1">// åç§°</span>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">price</span><span class="p">;</span><span class="w"> </span><span class="c1">// ä»·æ ¼</span>
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">author</span><span class="p">;</span><span class="w"> </span><span class="c1">// ä½œè€…</span>
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">startTime</span><span class="p">;</span><span class="w"> </span><span class="c1">// å‡ºç‰ˆæ—¶é—´</span>
</span><span id="__span-44-7"><a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">BookInfo</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">price</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">author</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">startTime</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-44-8"><a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
</span><span id="__span-44-9"><a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-44-10"><a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">price</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">price</span><span class="p">;</span>
</span><span id="__span-44-11"><a id="__codelineno-44-11" name="__codelineno-44-11" href="#__codelineno-44-11"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">author</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">author</span><span class="p">;</span>
</span><span id="__span-44-12"><a id="__codelineno-44-12" name="__codelineno-44-12" href="#__codelineno-44-12"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">startTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">startTime</span><span class="p">;</span>
</span><span id="__span-44-13"><a id="__codelineno-44-13" name="__codelineno-44-13" href="#__codelineno-44-13"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-44-14"><a id="__codelineno-44-14" name="__codelineno-44-14" href="#__codelineno-44-14"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">toString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-44-15"><a id="__codelineno-44-15" name="__codelineno-44-15" href="#__codelineno-44-15"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">id</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"\t\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"\t\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">price</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"\t\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">author</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"\t\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">startTime</span><span class="p">;</span>
</span><span id="__span-44-16"><a id="__codelineno-44-16" name="__codelineno-44-16" href="#__codelineno-44-16"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-44-17"><a id="__codelineno-44-17" name="__codelineno-44-17" href="#__codelineno-44-17"></a><span class="w">    </span><span class="c1">// ä¸Šé¢5ä¸ªå±æ€§çš„ setXxx() å’Œ getXxx() æ–¹æ³•</span>
</span><span id="__span-44-18"><a id="__codelineno-44-18" name="__codelineno-44-18" href="#__codelineno-44-18"></a>
</span><span id="__span-44-19"><a id="__codelineno-44-19" name="__codelineno-44-19" href="#__codelineno-44-19"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p>åˆ›å»º CategoryDao ç±»ï¼Œåœ¨è¯¥ç±»ä¸­å®šä¹‰ä¸€ä¸ªæ³›å‹çš„ Map æ˜ å°„ï¼Œå…¶é”®ä¸º Category ç±»å‹çš„å¯¹è±¡ï¼Œå€¼ä¸º List<bookinfo> ç±»å‹çš„å¯¹è±¡ï¼Œå¹¶å®šä¹‰ printCategoryInfo() æ–¹æ³•ï¼Œç”¨äºæ‰“å°ç±»åˆ«å’Œå›¾ä¹¦æ˜ç»†ä¿¡æ¯ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</bookinfo></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CategoryDao</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="w">    </span><span class="c1">// å®šä¹‰æ³›å‹Mapï¼Œå­˜å‚¨å›¾ä¹¦ä¿¡æ¯</span>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">Category</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">BookInfo</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">categoryMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">Category</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">BookInfo</span><span class="o">&gt;&gt;</span><span class="p">();</span>
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">printDeptmentInfo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Category</span><span class="w"> </span><span class="n">cate</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">categoryMap</span><span class="p">.</span><span class="na">keySet</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æ‰€å±ç±»åˆ«ï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cate</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>
</span><span id="__span-45-7"><a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a><span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">BookInfo</span><span class="o">&gt;</span><span class="w"> </span><span class="n">books</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">categoryMap</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">cate</span><span class="p">);</span>
</span><span id="__span-45-8"><a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"å›¾ä¹¦ç¼–å·\t\tå›¾ä¹¦åç§°\t\tå›¾ä¹¦ä»·æ ¼\t\tå›¾ä¹¦ä½œè€…\t\tå‡ºç‰ˆæ—¶é—´"</span><span class="p">);</span>
</span><span id="__span-45-9"><a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">books</span><span class="p">.</span><span class="na">size</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-45-10"><a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a><span class="w">                </span><span class="n">BookInfo</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">books</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">);</span><span class="w"> </span><span class="c1">// è·å–å›¾ä¹¦</span>
</span><span id="__span-45-11"><a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="na">getId</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"\t\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"\t\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="na">getPrice</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"\t\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="na">getAuthor</span><span class="p">()</span>
</span><span id="__span-45-12"><a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a><span class="w">                        </span><span class="o">+</span><span class="w"> </span><span class="s">"\t\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="na">getStartTime</span><span class="p">());</span>
</span><span id="__span-45-13"><a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-45-14"><a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">();</span>
</span><span id="__span-45-15"><a id="__codelineno-45-15" name="__codelineno-45-15" href="#__codelineno-45-15"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-45-16"><a id="__codelineno-45-16" name="__codelineno-45-16" href="#__codelineno-45-16"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-45-17"><a id="__codelineno-45-17" name="__codelineno-45-17" href="#__codelineno-45-17"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p>åˆ›å»ºæµ‹è¯•ç±» Test17ï¼Œåœ¨è¯¥ç±»ä¸­å®šä¹‰ 4 ä¸ª Deptment å¯¹è±¡å’Œ 8 ä¸ª People å¯¹è±¡ï¼Œå¹¶å°† 8 ä¸ª People å¯¹è±¡åˆ†æˆ 4 ç»„ï¼Œå­˜å‚¨åˆ° 4 ä¸ª List é›†åˆä¸­ï¼Œç„¶åå°† 4 ä¸ª Deptment å¯¹è±¡å’Œ 4 ä¸ª List é›†åˆæŒ‰ç…§â€”â€”å¯¹åº”çš„å…³ç³»å­˜å‚¨åˆ° DeptmentDao ç±»ä¸­çš„ peoplesMap æ˜ å°„ä¸­ã€‚æœ€åè°ƒç”¨ DeptmentDao ç±»ä¸­çš„ printDeptmentInfo() æ–¹æ³•æ‰“å°ç±»åˆ«åŠå¯¹åº”çš„å›¾ä¹¦ä¿¡æ¯ã€‚å…·ä½“çš„ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test17</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="w">        </span><span class="n">Category</span><span class="w"> </span><span class="n">category1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Category</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">"æ•°æ®åº“"</span><span class="p">);</span><span class="w"> </span><span class="c1">// åˆ›å»ºç±»åˆ«ä¿¡æ¯</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="w">        </span><span class="n">Category</span><span class="w"> </span><span class="n">category2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Category</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s">"ç¨‹åºè®¾è®¡"</span><span class="p">);</span><span class="w"> </span><span class="c1">// åˆ›å»ºç±»åˆ«ä¿¡æ¯</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="w">        </span><span class="n">Category</span><span class="w"> </span><span class="n">category3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Category</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">"å¹³é¢è®¾è®¡"</span><span class="p">);</span><span class="w"> </span><span class="c1">// åˆ›å»ºç±»åˆ«ä¿¡æ¯</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a><span class="w">        </span><span class="n">BookInfo</span><span class="w"> </span><span class="n">book1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BookInfo</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">"ç»†è¯´ Java ç¼–ç¨‹"</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="s">"å¼ æ™“ç²"</span><span class="p">,</span><span class="w"> </span><span class="s">"2012-01-01"</span><span class="p">);</span><span class="w"> </span><span class="c1">// åˆ›å»ºå›¾ä¹¦ä¿¡æ¯</span>
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a><span class="w">        </span><span class="n">BookInfo</span><span class="w"> </span><span class="n">book2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BookInfo</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s">"å½±è§†åæœŸå¤„ç†å®å…¸"</span><span class="p">,</span><span class="w"> </span><span class="mi">78</span><span class="p">,</span><span class="w"> </span><span class="s">"åˆ˜æ°´æ³¢"</span><span class="p">,</span><span class="w"> </span><span class="s">"2012-10-05"</span><span class="p">);</span><span class="w"> </span><span class="c1">// åˆ›å»ºå›¾ä¹¦ä¿¡æ¯</span>
</span><span id="__span-46-8"><a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a><span class="w">        </span><span class="n">BookInfo</span><span class="w"> </span><span class="n">book3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BookInfo</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">"MySQL ä»å…¥é—¨åˆ°ç²¾é€š"</span><span class="p">,</span><span class="w"> </span><span class="mi">41</span><span class="p">,</span><span class="w"> </span><span class="s">"ç‹å¿—äº®"</span><span class="p">,</span><span class="w"> </span><span class="s">"2012-3-2"</span><span class="p">);</span><span class="w"> </span><span class="c1">// åˆ›å»ºå›¾ä¹¦ä¿¡æ¯</span>
</span><span id="__span-46-9"><a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a><span class="w">        </span><span class="n">BookInfo</span><span class="w"> </span><span class="n">book4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BookInfo</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="s">"Java ä»å…¥é—¨åˆ°ç²¾é€š"</span><span class="p">,</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w"> </span><span class="s">"é™ˆå¥šé™"</span><span class="p">,</span><span class="w"> </span><span class="s">"2012-11-01"</span><span class="p">);</span><span class="w"> </span><span class="c1">// åˆ›å»ºå›¾ä¹¦ä¿¡æ¯</span>
</span><span id="__span-46-10"><a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a><span class="w">        </span><span class="n">BookInfo</span><span class="w"> </span><span class="n">book5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BookInfo</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="s">"SQL Server ä¸€ç™¾ä¾‹"</span><span class="p">,</span><span class="w"> </span><span class="mi">68</span><span class="p">,</span><span class="w"> </span><span class="s">"å¼ æ™“ç²"</span><span class="p">,</span><span class="w"> </span><span class="s">"2012-01-01"</span><span class="p">);</span><span class="w"> </span><span class="c1">// åˆ›å»ºå›¾ä¹¦ä¿¡æ¯</span>
</span><span id="__span-46-11"><a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">BookInfo</span><span class="o">&gt;</span><span class="w"> </span><span class="n">pList1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">BookInfo</span><span class="o">&gt;</span><span class="p">();</span><span class="w"> </span><span class="c1">// å‘ç±»åˆ« 1 æ·»åŠ å›¾ä¹¦</span>
</span><span id="__span-46-12"><a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a><span class="w">        </span><span class="n">pList1</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">book1</span><span class="p">);</span>
</span><span id="__span-46-13"><a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a><span class="w">        </span><span class="n">pList1</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">book4</span><span class="p">);</span>
</span><span id="__span-46-14"><a id="__codelineno-46-14" name="__codelineno-46-14" href="#__codelineno-46-14"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">BookInfo</span><span class="o">&gt;</span><span class="w"> </span><span class="n">pList2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">BookInfo</span><span class="o">&gt;</span><span class="p">();</span><span class="w"> </span><span class="c1">// å‘ç±»åˆ« 2 æ·»åŠ å›¾ä¹¦</span>
</span><span id="__span-46-15"><a id="__codelineno-46-15" name="__codelineno-46-15" href="#__codelineno-46-15"></a><span class="w">        </span><span class="n">pList2</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">book3</span><span class="p">);</span>
</span><span id="__span-46-16"><a id="__codelineno-46-16" name="__codelineno-46-16" href="#__codelineno-46-16"></a><span class="w">        </span><span class="n">pList2</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">book5</span><span class="p">);</span>
</span><span id="__span-46-17"><a id="__codelineno-46-17" name="__codelineno-46-17" href="#__codelineno-46-17"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">BookInfo</span><span class="o">&gt;</span><span class="w"> </span><span class="n">pList3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">BookInfo</span><span class="o">&gt;</span><span class="p">();</span><span class="w"> </span><span class="c1">// å‘ç±»åˆ« 3 æ·»åŠ å›¾ä¹¦</span>
</span><span id="__span-46-18"><a id="__codelineno-46-18" name="__codelineno-46-18" href="#__codelineno-46-18"></a><span class="w">        </span><span class="n">pList3</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">book2</span><span class="p">);</span>
</span><span id="__span-46-19"><a id="__codelineno-46-19" name="__codelineno-46-19" href="#__codelineno-46-19"></a><span class="w">        </span><span class="n">CategoryDao</span><span class="p">.</span><span class="na">categoryMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">category1</span><span class="p">,</span><span class="w"> </span><span class="n">pList1</span><span class="p">);</span>
</span><span id="__span-46-20"><a id="__codelineno-46-20" name="__codelineno-46-20" href="#__codelineno-46-20"></a><span class="w">        </span><span class="n">CategoryDao</span><span class="p">.</span><span class="na">categoryMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">category2</span><span class="p">,</span><span class="w"> </span><span class="n">pList2</span><span class="p">);</span>
</span><span id="__span-46-21"><a id="__codelineno-46-21" name="__codelineno-46-21" href="#__codelineno-46-21"></a><span class="w">        </span><span class="n">CategoryDao</span><span class="p">.</span><span class="na">categoryMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">category3</span><span class="p">,</span><span class="w"> </span><span class="n">pList3</span><span class="p">);</span>
</span><span id="__span-46-22"><a id="__codelineno-46-22" name="__codelineno-46-22" href="#__codelineno-46-22"></a><span class="w">        </span><span class="n">CategoryDao</span><span class="p">.</span><span class="na">printDeptmentInfo</span><span class="p">();</span>
</span><span id="__span-46-23"><a id="__codelineno-46-23" name="__codelineno-46-23" href="#__codelineno-46-23"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-46-24"><a id="__codelineno-46-24" name="__codelineno-46-24" href="#__codelineno-46-24"></a><span class="p">}</span>
</span></code></pre></div> <p>åœ¨è¯¥ç¨‹åºä¸­ï¼Œä½¿ç”¨äº†æ³›å‹ List å’Œæ³›å‹ Map åˆ†åˆ«å­˜å‚¨å›¾ä¹¦ç±»åˆ«å’Œç‰¹å®šç±»åˆ«ä¸‹çš„å›¾ä¹¦æ˜ç»†ä¿¡æ¯ã€‚ä»ä¸­å¯ä»¥çœ‹å‡ºä½¿ç”¨æ³›å‹ä¸ä»…å‡å°‘äº†ä»£ç çš„ç¼–å†™é‡ï¼Œä¹Ÿæé«˜äº†ç±»å‹çš„å®‰å…¨æ€§ã€‚</p> </li> <li> <p>è¿è¡Œè¯¥ç¨‹åºï¼Œè¾“å‡ºçš„ç»“æœå¦‚ä¸‹æ‰€ç¤ºã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="n">æ‰€å±ç±»åˆ«</span><span class="err">ï¼š</span><span class="n">å¹³é¢è®¾è®¡</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="n">å›¾ä¹¦ç¼–å·</span><span class="w">  </span><span class="n">å›¾ä¹¦åç§°</span><span class="w">  </span><span class="n">å›¾ä¹¦ä»·æ ¼</span><span class="w">  </span><span class="n">å›¾ä¹¦ä½œè€…</span><span class="w">  </span><span class="n">å‡ºç‰ˆæ—¶é—´</span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="mi">2</span><span class="w">  </span><span class="n">å½±è§†åæœŸå¤„ç†å®å…¸</span><span class="w">  </span><span class="mi">78</span><span class="w">  </span><span class="n">åˆ˜æ°´æ³¢</span><span class="w">  </span><span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">05</span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="n">æ‰€å±ç±»åˆ«</span><span class="err">ï¼š</span><span class="n">æ•°æ®åº“</span>
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a><span class="n">å›¾ä¹¦ç¼–å·</span><span class="w">  </span><span class="n">å›¾ä¹¦åç§°</span><span class="w">  </span><span class="n">å›¾ä¹¦ä»·æ ¼</span><span class="w">  </span><span class="n">å›¾ä¹¦ä½œè€…</span><span class="w">  </span><span class="n">å‡ºç‰ˆæ—¶é—´</span>
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a><span class="mi">1</span><span class="w">  </span><span class="n">ç»†è¯´</span><span class="w"> </span><span class="n">Java</span><span class="w"> </span><span class="n">ç¼–ç¨‹</span><span class="w">  </span><span class="mi">25</span><span class="w">  </span><span class="n">å¼ æ™“ç²</span><span class="w">  </span><span class="mi">2012</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a><span class="mi">4</span><span class="w">  </span><span class="n">Java</span><span class="w"> </span><span class="n">ä»å…¥é—¨åˆ°ç²¾é€š</span><span class="w">  </span><span class="mi">27</span><span class="w">  </span><span class="n">é™ˆå¥šé™</span><span class="w">  </span><span class="mi">2012</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mo">01</span>
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a>
</span><span id="__span-47-10"><a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a><span class="n">æ‰€å±ç±»åˆ«</span><span class="err">ï¼š</span><span class="n">ç¨‹åºè®¾è®¡</span>
</span><span id="__span-47-11"><a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a><span class="n">å›¾ä¹¦ç¼–å·</span><span class="w">  </span><span class="n">å›¾ä¹¦åç§°</span><span class="w">  </span><span class="n">å›¾ä¹¦ä»·æ ¼</span><span class="w">  </span><span class="n">å›¾ä¹¦ä½œè€…</span><span class="w">  </span><span class="n">å‡ºç‰ˆæ—¶é—´</span>
</span><span id="__span-47-12"><a id="__codelineno-47-12" name="__codelineno-47-12" href="#__codelineno-47-12"></a><span class="mi">3</span><span class="w">  </span><span class="n">MySQL</span><span class="w"> </span><span class="n">ä»å…¥é—¨åˆ°ç²¾é€š</span><span class="w">  </span><span class="mi">41</span><span class="w">  </span><span class="n">ç‹å¿—äº®</span><span class="w">  </span><span class="mi">2012</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="mi">2</span>
</span><span id="__span-47-13"><a id="__codelineno-47-13" name="__codelineno-47-13" href="#__codelineno-47-13"></a><span class="mi">5</span><span class="w">  </span><span class="n">SQL</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="n">ä¸€ç™¾ä¾‹</span><span class="w">  </span><span class="mi">68</span><span class="w">  </span><span class="n">å¼ æ™“ç²</span><span class="w">  </span><span class="mi">2012</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span>
</span></code></pre></div> </li> </ol> <aside class="md-source-file"> <span class="md-source-file__fact"> <span class="md-icon" title="æœ€åæ›´æ–°"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="2026å¹´1æœˆ22æ—¥ 20:21:58 UTC">2026å¹´1æœˆ22æ—¥ 20:21:58</span> </span> <span class="md-source-file__fact"> <span class="md-icon" title="åˆ›å»ºæ—¥æœŸ"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="2022å¹´1æœˆ21æ—¥ 09:23:57 UTC">2022å¹´1æœˆ21æ—¥ 09:23:57</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type="button" class="md-top md-icon" data-md-component="top" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> å›åˆ°é¡µé¢é¡¶éƒ¨ </button> </main> <footer class="md-footer"> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-copyright"> Made with <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener"> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.top", "navigation.tracking", "navigation.instant", "navigation.path", "content.tabs.link", "content.code.copy"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script> <script src="../assets/javascripts/bundle.79ae519e.min.js"></script> <script src="../_javascripts/auto_title.js"></script>  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>