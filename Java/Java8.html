<!DOCTYPE html><html lang="zh" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://0richalcos.github.io/Note/Java/Java8.html"><link rel="prev" href="Java.html"><link rel="next" href="JavaBasics.html"><link rel="icon" href="../assets/images/favicon.png"><meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Java 8 - éšä¾¿è®°è®°</title><link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css"><link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel="stylesheet" href="../_stylesheets/extra.css"><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head> <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal"> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a href="#1effectively-final" class="md-skip"> è·³è½¬è‡³ </a> </div> <div data-md-component="announce"> </div> <header class="md-header md-header--shadow" data-md-component="header"> <nav class="md-header__inner md-grid" aria-label="é¡µçœ‰"> <a href="../index.html" title="éšä¾¿è®°è®°" class="md-header__button md-logo" aria-label="éšä¾¿è®°è®°" data-md-component="logo"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> </a> <label class="md-header__button md-icon" for="__drawer"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> éšä¾¿è®°è®° </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> Java 8 </span> </div> </div> </div> <form class="md-header__option" data-md-component="palette"> <input class="md-option" data-md-color-media data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal" aria-label="åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼" type="radio" name="__palette" id="__palette_0"> <label class="md-header__button md-icon" title="åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼" for="__palette_1" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> <input class="md-option" data-md-color-media data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="teal" aria-label="åˆ‡æ¢åˆ°äº®è‰²æ¨¡å¼" type="radio" name="__palette" id="__palette_1"> <label class="md-header__button md-icon" title="åˆ‡æ¢åˆ°äº®è‰²æ¨¡å¼" for="__palette_0" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <div class="md-header__source"> <a href="https://github.com/0richalcos/Note" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class="md-source__repository"> GitHub </div> </a> </div> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--primary" aria-label="å¯¼èˆªæ " data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a href="../index.html" title="éšä¾¿è®°è®°" class="md-nav__button md-logo" aria-label="éšä¾¿è®°è®°" data-md-component="logo"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> </a> éšä¾¿è®°è®° </label> <div class="md-nav__source"> <a href="https://github.com/0richalcos/Note" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class="md-source__repository"> GitHub </div> </a> </div> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../index.html" class="md-nav__link"> <span class="md-ellipsis"> ğŸ  é¦–é¡µ </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked> <div class="md-nav__link md-nav__container"> <a href="Java.html" class="md-nav__link "> <span class="md-ellipsis"> â™¨ï¸ Java </span> </a> <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_2"> <span class="md-nav__icon md-icon"></span> â™¨ï¸ Java </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc"> <label class="md-nav__link md-nav__link--active" for="__toc"> <span class="md-ellipsis"> Java 8 </span> <span class="md-nav__icon md-icon"></span> </label> <a href="Java8.html" class="md-nav__link md-nav__link--active"> <span class="md-ellipsis"> Java 8 </span> </a> <nav class="md-nav md-nav--secondary" aria-label="ç›®å½•"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> ç›®å½• </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#1effectively-final" class="md-nav__link"> <span class="md-ellipsis"> 1ã€Effectively final </span> </a> </li> <li class="md-nav__item"> <a href="#2lambda-è¡¨è¾¾å¼" class="md-nav__link"> <span class="md-ellipsis"> 2ã€Lambda è¡¨è¾¾å¼ </span> </a> <nav class="md-nav" aria-label="2ã€Lambda è¡¨è¾¾å¼"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#21lambda-çš„ç®€å†™æ–¹å¼" class="md-nav__link"> <span class="md-ellipsis"> 2.1ã€Lambda çš„ç®€å†™æ–¹å¼ </span> </a> </li> <li class="md-nav__item"> <a href="#22lambda-çš„ä½¿ç”¨" class="md-nav__link"> <span class="md-ellipsis"> 2.2ã€Lambda çš„ä½¿ç”¨ </span> </a> </li> <li class="md-nav__item"> <a href="#23lambda-ä¸åŒ¿åå†…éƒ¨ç±»çš„è”ç³»å’ŒåŒºåˆ«" class="md-nav__link"> <span class="md-ellipsis"> 2.3ã€Lambda ä¸åŒ¿åå†…éƒ¨ç±»çš„è”ç³»å’ŒåŒºåˆ« </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#3æ–¹æ³•å¼•ç”¨" class="md-nav__link"> <span class="md-ellipsis"> 3ã€æ–¹æ³•å¼•ç”¨ </span> </a> </li> <li class="md-nav__item"> <a href="#4å‡½æ•°å¼æ¥å£" class="md-nav__link"> <span class="md-ellipsis"> 4ã€å‡½æ•°å¼æ¥å£ </span> </a> <nav class="md-nav" aria-label="4ã€å‡½æ•°å¼æ¥å£"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#41å¸¸ç”¨å‡½æ•°å¼æ¥å£" class="md-nav__link"> <span class="md-ellipsis"> 4.1ã€å¸¸ç”¨å‡½æ•°å¼æ¥å£ </span> </a> <nav class="md-nav" aria-label="4.1ã€å¸¸ç”¨å‡½æ•°å¼æ¥å£"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#411consumer" class="md-nav__link"> <span class="md-ellipsis"> 4.1.1ã€Consumer&lt;T&gt; </span> </a> </li> <li class="md-nav__item"> <a href="#412supplier" class="md-nav__link"> <span class="md-ellipsis"> 4.1.2ã€Supplier&lt;T&gt; </span> </a> </li> <li class="md-nav__item"> <a href="#413function" class="md-nav__link"> <span class="md-ellipsis"> 4.1.3ã€Function&lt;T,R&gt; </span> </a> </li> <li class="md-nav__item"> <a href="#414predicate" class="md-nav__link"> <span class="md-ellipsis"> 4.1.4ã€Predicate&lt;T&gt; </span> </a> </li> <li class="md-nav__item"> <a href="#415operator" class="md-nav__link"> <span class="md-ellipsis"> 4.1.5ã€Operator </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#42function-åŒ…ä¸‹æ‰€æœ‰æ¥å£" class="md-nav__link"> <span class="md-ellipsis"> 4.2ã€function åŒ…ä¸‹æ‰€æœ‰æ¥å£ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#5æ–°çš„æ—¥æœŸå’Œæ—¶é—´-api" class="md-nav__link"> <span class="md-ellipsis"> 5ã€æ–°çš„æ—¥æœŸå’Œæ—¶é—´ API </span> </a> <nav class="md-nav" aria-label="5ã€æ–°çš„æ—¥æœŸå’Œæ—¶é—´ API"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#51instant" class="md-nav__link"> <span class="md-ellipsis"> 5.1ã€Instant </span> </a> </li> <li class="md-nav__item"> <a href="#52localdate" class="md-nav__link"> <span class="md-ellipsis"> 5.2ã€LocalDate </span> </a> </li> <li class="md-nav__item"> <a href="#53period" class="md-nav__link"> <span class="md-ellipsis"> 5.3ã€Period </span> </a> </li> <li class="md-nav__item"> <a href="#54localdatetime" class="md-nav__link"> <span class="md-ellipsis"> 5.4ã€LocalDateTime </span> </a> </li> <li class="md-nav__item"> <a href="#55time-zones" class="md-nav__link"> <span class="md-ellipsis"> 5.5ã€Time Zones </span> </a> </li> <li class="md-nav__item"> <a href="#56zoneddatetime" class="md-nav__link"> <span class="md-ellipsis"> 5.6ã€ZonedDateTime </span> </a> </li> <li class="md-nav__item"> <a href="#57duration" class="md-nav__link"> <span class="md-ellipsis"> 5.7ã€Duration </span> </a> </li> <li class="md-nav__item"> <a href="#58datetimeformatter" class="md-nav__link"> <span class="md-ellipsis"> 5.8ã€DateTimeFormatter </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#6é»˜è®¤æ–¹æ³•" class="md-nav__link"> <span class="md-ellipsis"> 6ã€é»˜è®¤æ–¹æ³• </span> </a> <nav class="md-nav" aria-label="6ã€é»˜è®¤æ–¹æ³•"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#61é™æ€é»˜è®¤æ–¹æ³•" class="md-nav__link"> <span class="md-ellipsis"> 6.1ã€é™æ€é»˜è®¤æ–¹æ³• </span> </a> </li> <li class="md-nav__item"> <a href="#62é»˜è®¤æ–¹æ³•å®ä¾‹" class="md-nav__link"> <span class="md-ellipsis"> 6.2ã€é»˜è®¤æ–¹æ³•å®ä¾‹ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#7base64" class="md-nav__link"> <span class="md-ellipsis"> 7ã€Base64 </span> </a> <nav class="md-nav" aria-label="7ã€Base64"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#71å†…åµŒç±»" class="md-nav__link"> <span class="md-ellipsis"> 7.1ã€å†…åµŒç±» </span> </a> </li> <li class="md-nav__item"> <a href="#72æ–¹æ³•" class="md-nav__link"> <span class="md-ellipsis"> 7.2ã€æ–¹æ³• </span> </a> </li> <li class="md-nav__item"> <a href="#73base64-å®ä¾‹" class="md-nav__link"> <span class="md-ellipsis"> 7.3ã€Base64 å®ä¾‹ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#8optional-ç±»" class="md-nav__link"> <span class="md-ellipsis"> 8ã€Optional ç±» </span> </a> <nav class="md-nav" aria-label="8ã€Optional ç±»"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#81optional-å£°æ˜" class="md-nav__link"> <span class="md-ellipsis"> 8.1ã€Optional å£°æ˜ </span> </a> </li> <li class="md-nav__item"> <a href="#82optional-æ–¹æ³•" class="md-nav__link"> <span class="md-ellipsis"> 8.2ã€Optional æ–¹æ³• </span> </a> </li> <li class="md-nav__item"> <a href="#83optional-å®ä¾‹" class="md-nav__link"> <span class="md-ellipsis"> 8.3ã€Optional å®ä¾‹ </span> </a> </li> <li class="md-nav__item"> <a href="#84æ­£ç¡®ä½¿ç”¨-optional" class="md-nav__link"> <span class="md-ellipsis"> 8.4ã€æ­£ç¡®ä½¿ç”¨ Optional </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#9stream" class="md-nav__link"> <span class="md-ellipsis"> 9ã€Stream </span> </a> <nav class="md-nav" aria-label="9ã€Stream"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#91stream-æµæ˜¯å¦‚ä½•å·¥ä½œçš„" class="md-nav__link"> <span class="md-ellipsis"> 9.1ã€Stream æµæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ </span> </a> </li> <li class="md-nav__item"> <a href="#92stream-ç±»" class="md-nav__link"> <span class="md-ellipsis"> 9.2ã€Stream ç±» </span> </a> <nav class="md-nav" aria-label="9.2ã€Stream ç±»"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#921æºçš„åˆ›å»º" class="md-nav__link"> <span class="md-ellipsis"> 9.2.1ã€æºçš„åˆ›å»º </span> </a> </li> <li class="md-nav__item"> <a href="#922ä¸­é—´å¤„ç†æ–¹æ³•" class="md-nav__link"> <span class="md-ellipsis"> 9.2.2ã€ä¸­é—´å¤„ç†æ–¹æ³• </span> </a> </li> <li class="md-nav__item"> <a href="#923ç»ˆç«¯æ”¶é›†æ–¹æ³•" class="md-nav__link"> <span class="md-ellipsis"> 9.2.3ã€ç»ˆç«¯æ”¶é›†æ–¹æ³• </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#93å…¶ä»–ç‰¹å®šç±»å‹çš„æµ" class="md-nav__link"> <span class="md-ellipsis"> 9.3ã€å…¶ä»–ç‰¹å®šç±»å‹çš„æµ </span> </a> </li> <li class="md-nav__item"> <a href="#94stream-æµçš„å¤„ç†é¡ºåº" class="md-nav__link"> <span class="md-ellipsis"> 9.4ã€Stream æµçš„å¤„ç†é¡ºåº </span> </a> </li> <li class="md-nav__item"> <a href="#95ä¸­é—´æ“ä½œé¡ºåºè¿™ä¹ˆé‡è¦" class="md-nav__link"> <span class="md-ellipsis"> 9.5ã€ä¸­é—´æ“ä½œé¡ºåºè¿™ä¹ˆé‡è¦ï¼Ÿ </span> </a> </li> <li class="md-nav__item"> <a href="#96æ•°æ®æµå¤ç”¨é—®é¢˜" class="md-nav__link"> <span class="md-ellipsis"> 9.6ã€æ•°æ®æµå¤ç”¨é—®é¢˜ </span> </a> </li> <li class="md-nav__item"> <a href="#97é«˜çº§æ“ä½œ" class="md-nav__link"> <span class="md-ellipsis"> 9.7ã€é«˜çº§æ“ä½œ </span> </a> <nav class="md-nav" aria-label="9.7ã€é«˜çº§æ“ä½œ"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#971collect" class="md-nav__link"> <span class="md-ellipsis"> 9.7.1ã€Collect </span> </a> </li> <li class="md-nav__item"> <a href="#972flatmap" class="md-nav__link"> <span class="md-ellipsis"> 9.7.2ã€FlatMap </span> </a> </li> <li class="md-nav__item"> <a href="#973reduce" class="md-nav__link"> <span class="md-ellipsis"> 9.7.3ã€Reduce </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#98å¹¶è¡Œæµ" class="md-nav__link"> <span class="md-ellipsis"> 9.8ã€å¹¶è¡Œæµ </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="JavaBasics.html" class="md-nav__link"> <span class="md-ellipsis"> Java åŸºç¡€ </span> </a> </li> <li class="md-nav__item"> <a href="JavaCollection.html" class="md-nav__link"> <span class="md-ellipsis"> Java é›†åˆ </span> </a> </li> <li class="md-nav__item"> <a href="JavaObject.html" class="md-nav__link"> <span class="md-ellipsis"> Java ç±»å’Œå¯¹è±¡ </span> </a> </li> <li class="md-nav__item"> <a href="JavaWeb.html" class="md-nav__link"> <span class="md-ellipsis"> JavaWeb </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3"> <div class="md-nav__link md-nav__container"> <a href="../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%AE%97%E6%B3%95/Algorithm.html" class="md-nav__link "> <span class="md-ellipsis"> ğŸ§® æ•°æ®ç»“æ„åŠç®—æ³• </span> </a> <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3"> <span class="md-nav__icon md-icon"></span> ğŸ§® æ•°æ®ç»“æ„åŠç®—æ³• </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%AE%97%E6%B3%95/DesignPattern.html" class="md-nav__link"> <span class="md-ellipsis"> DesignPattern </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4"> <div class="md-nav__link md-nav__container"> <a href="../Spring/Spring.html" class="md-nav__link "> <span class="md-ellipsis"> ğŸƒ Spring </span> </a> <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4"> <span class="md-nav__icon md-icon"></span> ğŸƒ Spring </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../Spring/SpringBoot.html" class="md-nav__link"> <span class="md-ellipsis"> SpringBoot </span> </a> </li> <li class="md-nav__item"> <a href="../Spring/SpringCloud.html" class="md-nav__link"> <span class="md-ellipsis"> SpringCloud </span> </a> </li> <li class="md-nav__item"> <a href="../Spring/SpringMVC.html" class="md-nav__link"> <span class="md-ellipsis"> SpringMVC </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5"> <div class="md-nav__link md-nav__container"> <a href="../%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/MyBatis-Plus.html" class="md-nav__link "> <span class="md-ellipsis"> ğŸ’¾ æŒä¹…å±‚æ¡†æ¶ </span> </a> <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_5"> <span class="md-nav__icon md-icon"></span> ğŸ’¾ æŒä¹…å±‚æ¡†æ¶ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/Mybatis.html" class="md-nav__link"> <span class="md-ellipsis"> Mybatis </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6"> <div class="md-nav__link md-nav__container"> <a href="../%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/SSO.html" class="md-nav__link "> <span class="md-ellipsis"> ğŸ” è®¤è¯ä¸æˆæƒ </span> </a> <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6"> <span class="md-nav__icon md-icon"></span> ğŸ” è®¤è¯ä¸æˆæƒ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/Sa-Token.html" class="md-nav__link"> <span class="md-ellipsis"> Sa-Token </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/Shiro.html" class="md-nav__link"> <span class="md-ellipsis"> Shiro </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7"> <div class="md-nav__link md-nav__container"> <a href="../%E5%89%8D%E7%AB%AF/CSS.html" class="md-nav__link "> <span class="md-ellipsis"> ğŸŒ å‰ç«¯ </span> </a> <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_7"> <span class="md-nav__icon md-icon"></span> ğŸŒ å‰ç«¯ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/JavaScript.html" class="md-nav__link"> <span class="md-ellipsis"> JavaScript </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/Vue.html" class="md-nav__link"> <span class="md-ellipsis"> Vue </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/jQuery.html" class="md-nav__link"> <span class="md-ellipsis"> jQuery </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/Thymeleaf.html" class="md-nav__link"> <span class="md-ellipsis"> Thymeleaf </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_5"> <div class="md-nav__link md-nav__container"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/AntV-X6.html" class="md-nav__link "> <span class="md-ellipsis"> ç»„ä»¶åº“ </span> </a> <label class="md-nav__link " for="__nav_7_5" id="__nav_7_5_label" tabindex="0"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_7_5"> <span class="md-nav__icon md-icon"></span> ç»„ä»¶åº“ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/ApacheECharts.html" class="md-nav__link"> <span class="md-ellipsis"> ApacheECharts </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/Axios.html" class="md-nav__link"> <span class="md-ellipsis"> Axios </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/BootstrapTable.html" class="md-nav__link"> <span class="md-ellipsis"> BootstrapTable </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/DHTMLXGantt.html" class="md-nav__link"> <span class="md-ellipsis"> DHTMLXGantt </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/Element.html" class="md-nav__link"> <span class="md-ellipsis"> Element </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/FullCalendar.html" class="md-nav__link"> <span class="md-ellipsis"> FullCalendar </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/X-editable.html" class="md-nav__link"> <span class="md-ellipsis"> X-editable </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8"> <div class="md-nav__link md-nav__container"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/Dameng.html" class="md-nav__link "> <span class="md-ellipsis"> ğŸ“Š æ•°æ®åº“ </span> </a> <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="0"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_8"> <span class="md-nav__icon md-icon"></span> ğŸ“Š æ•°æ®åº“ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL.html" class="md-nav__link"> <span class="md-ellipsis"> MySQL </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/MySQLQuery.html" class="md-nav__link"> <span class="md-ellipsis"> MySQLQuery </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/OceanBase.html" class="md-nav__link"> <span class="md-ellipsis"> OceanBase </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/Oracle.html" class="md-nav__link"> <span class="md-ellipsis"> Oracle </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/Redis.html" class="md-nav__link"> <span class="md-ellipsis"> Redis </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/Vastbase.html" class="md-nav__link"> <span class="md-ellipsis"> Vastbase </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/Elasticsearch.html" class="md-nav__link"> <span class="md-ellipsis"> Elasticsearch </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10"> <div class="md-nav__link md-nav__container"> <a href="../%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8/FastDFS.html" class="md-nav__link "> <span class="md-ellipsis"> ğŸ“‡ åˆ†å¸ƒå¼å­˜å‚¨ </span> </a> <label class="md-nav__link " for="__nav_10" id="__nav_10_label" tabindex="0"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_10"> <span class="md-nav__icon md-icon"></span> ğŸ“‡ åˆ†å¸ƒå¼å­˜å‚¨ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8/MinIO.html" class="md-nav__link"> <span class="md-ellipsis"> MinIO </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11"> <div class="md-nav__link md-nav__container"> <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/Encryption.html" class="md-nav__link "> <span class="md-ellipsis"> ğŸ›°ï¸ ç½‘ç»œé€šä¿¡ </span> </a> <label class="md-nav__link " for="__nav_11" id="__nav_11_label" tabindex="0"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_11"> <span class="md-nav__icon md-icon"></span> ğŸ›°ï¸ ç½‘ç»œé€šä¿¡ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/HTTP.html" class="md-nav__link"> <span class="md-ellipsis"> HTTP </span> </a> </li> <li class="md-nav__item"> <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/OpenVPN.html" class="md-nav__link"> <span class="md-ellipsis"> OpenVPN </span> </a> </li> <li class="md-nav__item"> <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/VNC.html" class="md-nav__link"> <span class="md-ellipsis"> VNC </span> </a> </li> <li class="md-nav__item"> <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/WebSocket.html" class="md-nav__link"> <span class="md-ellipsis"> WebSocket </span> </a> </li> <li class="md-nav__item"> <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/frp.html" class="md-nav__link"> <span class="md-ellipsis"> frp </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12"> <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0"> <span class="md-ellipsis"> ğŸ—ƒï¸ æ–‡ä»¶å¤„ç† </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_12"> <span class="md-nav__icon md-icon"></span> ğŸ—ƒï¸ æ–‡ä»¶å¤„ç† </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_1"> <div class="md-nav__link md-nav__container"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/ApachePOI.html" class="md-nav__link "> <span class="md-ellipsis"> Office </span> </a> <label class="md-nav__link " for="__nav_12_1" id="__nav_12_1_label" tabindex="0"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_1_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_12_1"> <span class="md-nav__icon md-icon"></span> Office </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/EasyExcel.html" class="md-nav__link"> <span class="md-ellipsis"> EasyExcel </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/OnlyOffice.html" class="md-nav__link"> <span class="md-ellipsis"> OnlyOffice </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/Poi-tl.html" class="md-nav__link"> <span class="md-ellipsis"> Poi-tl </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/Spire.OfficeForJava.html" class="md-nav__link"> <span class="md-ellipsis"> Spire.OfficeForJava </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/PDF/ApachePDFBox.html" class="md-nav__link"> <span class="md-ellipsis"> ApachePDFBox </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/XML/XMLParse.html" class="md-nav__link"> <span class="md-ellipsis"> XMLParse </span> </a> </li> <li class="md-nav__item"> <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/ZIP/Zip4j.html" class="md-nav__link"> <span class="md-ellipsis"> Zip4j </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/XXL-JOB.html" class="md-nav__link"> <span class="md-ellipsis"> XXL-JOB </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14"> <div class="md-nav__link md-nav__container"> <a href="../%E8%BF%90%E7%BB%B4/Docker.html" class="md-nav__link "> <span class="md-ellipsis"> ğŸ§‘â€ğŸ”§ è¿ç»´ </span> </a> <label class="md-nav__link " for="__nav_14" id="__nav_14_label" tabindex="0"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_14"> <span class="md-nav__icon md-icon"></span> ğŸ§‘â€ğŸ”§ è¿ç»´ </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/Linux.html" class="md-nav__link"> <span class="md-ellipsis"> Linux </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/NSSM.html" class="md-nav__link"> <span class="md-ellipsis"> NSSM </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/Nginx.html" class="md-nav__link"> <span class="md-ellipsis"> Nginx </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/Tomcat.html" class="md-nav__link"> <span class="md-ellipsis"> Tomcat </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/TongWeb.html" class="md-nav__link"> <span class="md-ellipsis"> TongWeb </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/WSL.html" class="md-nav__link"> <span class="md-ellipsis"> WSL </span> </a> </li> <li class="md-nav__item"> <a href="../%E8%BF%90%E7%BB%B4/WebLogic.html" class="md-nav__link"> <span class="md-ellipsis"> WebLogic </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15"> <div class="md-nav__link md-nav__container"> <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Git.html" class="md-nav__link "> <span class="md-ellipsis"> ğŸ› ï¸ å¼€å‘å·¥å…· </span> </a> <label class="md-nav__link " for="__nav_15" id="__nav_15_label" tabindex="0"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_15"> <span class="md-nav__icon md-icon"></span> ğŸ› ï¸ å¼€å‘å·¥å…· </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Maven.html" class="md-nav__link"> <span class="md-ellipsis"> Maven </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Node.js.html" class="md-nav__link"> <span class="md-ellipsis"> Node.js </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Swagger.html" class="md-nav__link"> <span class="md-ellipsis"> Swagger </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16"> <div class="md-nav__link md-nav__container"> <a href="../%E5%85%B6%E4%BB%96/Settings.html" class="md-nav__link "> <span class="md-ellipsis"> ğŸ‘» å…¶ä»– </span> </a> <label class="md-nav__link " for="__nav_16" id="__nav_16_label" tabindex="0"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_16"> <span class="md-nav__icon md-icon"></span> ğŸ‘» å…¶ä»– </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../%E5%85%B6%E4%BB%96/Solutions.html" class="md-nav__link"> <span class="md-ellipsis"> Solutions </span> </a> </li> <li class="md-nav__item"> <a href="../%E5%85%B6%E4%BB%96/Weasel.html" class="md-nav__link"> <span class="md-ellipsis"> Weasel </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--secondary" aria-label="ç›®å½•"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> ç›®å½• </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#1effectively-final" class="md-nav__link"> <span class="md-ellipsis"> 1ã€Effectively final </span> </a> </li> <li class="md-nav__item"> <a href="#2lambda-è¡¨è¾¾å¼" class="md-nav__link"> <span class="md-ellipsis"> 2ã€Lambda è¡¨è¾¾å¼ </span> </a> <nav class="md-nav" aria-label="2ã€Lambda è¡¨è¾¾å¼"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#21lambda-çš„ç®€å†™æ–¹å¼" class="md-nav__link"> <span class="md-ellipsis"> 2.1ã€Lambda çš„ç®€å†™æ–¹å¼ </span> </a> </li> <li class="md-nav__item"> <a href="#22lambda-çš„ä½¿ç”¨" class="md-nav__link"> <span class="md-ellipsis"> 2.2ã€Lambda çš„ä½¿ç”¨ </span> </a> </li> <li class="md-nav__item"> <a href="#23lambda-ä¸åŒ¿åå†…éƒ¨ç±»çš„è”ç³»å’ŒåŒºåˆ«" class="md-nav__link"> <span class="md-ellipsis"> 2.3ã€Lambda ä¸åŒ¿åå†…éƒ¨ç±»çš„è”ç³»å’ŒåŒºåˆ« </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#3æ–¹æ³•å¼•ç”¨" class="md-nav__link"> <span class="md-ellipsis"> 3ã€æ–¹æ³•å¼•ç”¨ </span> </a> </li> <li class="md-nav__item"> <a href="#4å‡½æ•°å¼æ¥å£" class="md-nav__link"> <span class="md-ellipsis"> 4ã€å‡½æ•°å¼æ¥å£ </span> </a> <nav class="md-nav" aria-label="4ã€å‡½æ•°å¼æ¥å£"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#41å¸¸ç”¨å‡½æ•°å¼æ¥å£" class="md-nav__link"> <span class="md-ellipsis"> 4.1ã€å¸¸ç”¨å‡½æ•°å¼æ¥å£ </span> </a> <nav class="md-nav" aria-label="4.1ã€å¸¸ç”¨å‡½æ•°å¼æ¥å£"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#411consumer" class="md-nav__link"> <span class="md-ellipsis"> 4.1.1ã€Consumer&lt;T&gt; </span> </a> </li> <li class="md-nav__item"> <a href="#412supplier" class="md-nav__link"> <span class="md-ellipsis"> 4.1.2ã€Supplier&lt;T&gt; </span> </a> </li> <li class="md-nav__item"> <a href="#413function" class="md-nav__link"> <span class="md-ellipsis"> 4.1.3ã€Function&lt;T,R&gt; </span> </a> </li> <li class="md-nav__item"> <a href="#414predicate" class="md-nav__link"> <span class="md-ellipsis"> 4.1.4ã€Predicate&lt;T&gt; </span> </a> </li> <li class="md-nav__item"> <a href="#415operator" class="md-nav__link"> <span class="md-ellipsis"> 4.1.5ã€Operator </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#42function-åŒ…ä¸‹æ‰€æœ‰æ¥å£" class="md-nav__link"> <span class="md-ellipsis"> 4.2ã€function åŒ…ä¸‹æ‰€æœ‰æ¥å£ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#5æ–°çš„æ—¥æœŸå’Œæ—¶é—´-api" class="md-nav__link"> <span class="md-ellipsis"> 5ã€æ–°çš„æ—¥æœŸå’Œæ—¶é—´ API </span> </a> <nav class="md-nav" aria-label="5ã€æ–°çš„æ—¥æœŸå’Œæ—¶é—´ API"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#51instant" class="md-nav__link"> <span class="md-ellipsis"> 5.1ã€Instant </span> </a> </li> <li class="md-nav__item"> <a href="#52localdate" class="md-nav__link"> <span class="md-ellipsis"> 5.2ã€LocalDate </span> </a> </li> <li class="md-nav__item"> <a href="#53period" class="md-nav__link"> <span class="md-ellipsis"> 5.3ã€Period </span> </a> </li> <li class="md-nav__item"> <a href="#54localdatetime" class="md-nav__link"> <span class="md-ellipsis"> 5.4ã€LocalDateTime </span> </a> </li> <li class="md-nav__item"> <a href="#55time-zones" class="md-nav__link"> <span class="md-ellipsis"> 5.5ã€Time Zones </span> </a> </li> <li class="md-nav__item"> <a href="#56zoneddatetime" class="md-nav__link"> <span class="md-ellipsis"> 5.6ã€ZonedDateTime </span> </a> </li> <li class="md-nav__item"> <a href="#57duration" class="md-nav__link"> <span class="md-ellipsis"> 5.7ã€Duration </span> </a> </li> <li class="md-nav__item"> <a href="#58datetimeformatter" class="md-nav__link"> <span class="md-ellipsis"> 5.8ã€DateTimeFormatter </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#6é»˜è®¤æ–¹æ³•" class="md-nav__link"> <span class="md-ellipsis"> 6ã€é»˜è®¤æ–¹æ³• </span> </a> <nav class="md-nav" aria-label="6ã€é»˜è®¤æ–¹æ³•"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#61é™æ€é»˜è®¤æ–¹æ³•" class="md-nav__link"> <span class="md-ellipsis"> 6.1ã€é™æ€é»˜è®¤æ–¹æ³• </span> </a> </li> <li class="md-nav__item"> <a href="#62é»˜è®¤æ–¹æ³•å®ä¾‹" class="md-nav__link"> <span class="md-ellipsis"> 6.2ã€é»˜è®¤æ–¹æ³•å®ä¾‹ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#7base64" class="md-nav__link"> <span class="md-ellipsis"> 7ã€Base64 </span> </a> <nav class="md-nav" aria-label="7ã€Base64"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#71å†…åµŒç±»" class="md-nav__link"> <span class="md-ellipsis"> 7.1ã€å†…åµŒç±» </span> </a> </li> <li class="md-nav__item"> <a href="#72æ–¹æ³•" class="md-nav__link"> <span class="md-ellipsis"> 7.2ã€æ–¹æ³• </span> </a> </li> <li class="md-nav__item"> <a href="#73base64-å®ä¾‹" class="md-nav__link"> <span class="md-ellipsis"> 7.3ã€Base64 å®ä¾‹ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#8optional-ç±»" class="md-nav__link"> <span class="md-ellipsis"> 8ã€Optional ç±» </span> </a> <nav class="md-nav" aria-label="8ã€Optional ç±»"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#81optional-å£°æ˜" class="md-nav__link"> <span class="md-ellipsis"> 8.1ã€Optional å£°æ˜ </span> </a> </li> <li class="md-nav__item"> <a href="#82optional-æ–¹æ³•" class="md-nav__link"> <span class="md-ellipsis"> 8.2ã€Optional æ–¹æ³• </span> </a> </li> <li class="md-nav__item"> <a href="#83optional-å®ä¾‹" class="md-nav__link"> <span class="md-ellipsis"> 8.3ã€Optional å®ä¾‹ </span> </a> </li> <li class="md-nav__item"> <a href="#84æ­£ç¡®ä½¿ç”¨-optional" class="md-nav__link"> <span class="md-ellipsis"> 8.4ã€æ­£ç¡®ä½¿ç”¨ Optional </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#9stream" class="md-nav__link"> <span class="md-ellipsis"> 9ã€Stream </span> </a> <nav class="md-nav" aria-label="9ã€Stream"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#91stream-æµæ˜¯å¦‚ä½•å·¥ä½œçš„" class="md-nav__link"> <span class="md-ellipsis"> 9.1ã€Stream æµæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ </span> </a> </li> <li class="md-nav__item"> <a href="#92stream-ç±»" class="md-nav__link"> <span class="md-ellipsis"> 9.2ã€Stream ç±» </span> </a> <nav class="md-nav" aria-label="9.2ã€Stream ç±»"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#921æºçš„åˆ›å»º" class="md-nav__link"> <span class="md-ellipsis"> 9.2.1ã€æºçš„åˆ›å»º </span> </a> </li> <li class="md-nav__item"> <a href="#922ä¸­é—´å¤„ç†æ–¹æ³•" class="md-nav__link"> <span class="md-ellipsis"> 9.2.2ã€ä¸­é—´å¤„ç†æ–¹æ³• </span> </a> </li> <li class="md-nav__item"> <a href="#923ç»ˆç«¯æ”¶é›†æ–¹æ³•" class="md-nav__link"> <span class="md-ellipsis"> 9.2.3ã€ç»ˆç«¯æ”¶é›†æ–¹æ³• </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#93å…¶ä»–ç‰¹å®šç±»å‹çš„æµ" class="md-nav__link"> <span class="md-ellipsis"> 9.3ã€å…¶ä»–ç‰¹å®šç±»å‹çš„æµ </span> </a> </li> <li class="md-nav__item"> <a href="#94stream-æµçš„å¤„ç†é¡ºåº" class="md-nav__link"> <span class="md-ellipsis"> 9.4ã€Stream æµçš„å¤„ç†é¡ºåº </span> </a> </li> <li class="md-nav__item"> <a href="#95ä¸­é—´æ“ä½œé¡ºåºè¿™ä¹ˆé‡è¦" class="md-nav__link"> <span class="md-ellipsis"> 9.5ã€ä¸­é—´æ“ä½œé¡ºåºè¿™ä¹ˆé‡è¦ï¼Ÿ </span> </a> </li> <li class="md-nav__item"> <a href="#96æ•°æ®æµå¤ç”¨é—®é¢˜" class="md-nav__link"> <span class="md-ellipsis"> 9.6ã€æ•°æ®æµå¤ç”¨é—®é¢˜ </span> </a> </li> <li class="md-nav__item"> <a href="#97é«˜çº§æ“ä½œ" class="md-nav__link"> <span class="md-ellipsis"> 9.7ã€é«˜çº§æ“ä½œ </span> </a> <nav class="md-nav" aria-label="9.7ã€é«˜çº§æ“ä½œ"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#971collect" class="md-nav__link"> <span class="md-ellipsis"> 9.7.1ã€Collect </span> </a> </li> <li class="md-nav__item"> <a href="#972flatmap" class="md-nav__link"> <span class="md-ellipsis"> 9.7.2ã€FlatMap </span> </a> </li> <li class="md-nav__item"> <a href="#973reduce" class="md-nav__link"> <span class="md-ellipsis"> 9.7.3ã€Reduce </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#98å¹¶è¡Œæµ" class="md-nav__link"> <span class="md-ellipsis"> 9.8ã€å¹¶è¡Œæµ </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <nav class="md-path" aria-label="å¯¼èˆªæ "> <ol class="md-path__list"> <li class="md-path__item"> <a href="../index.html" class="md-path__link"> <span class="md-ellipsis"> ğŸ  é¦–é¡µ </span> </a> </li> <li class="md-path__item"> <a href="Java8.html" class="md-path__link"> <span class="md-ellipsis"> â™¨ï¸ Java </span> </a> </li> </ol> </nav> <article class="md-content__inner md-typeset"> <h1 id="java-8">Java 8<a class="headerlink" href="#java-8" title="é”šç‚¹é“¾æ¥">Â¶</a></h1> <h2 id="1effectively-final">1ã€Effectively final<a class="headerlink" href="#1effectively-final" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>Java ä¸­å±€éƒ¨å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®çš„å±€éƒ¨å˜é‡å¿…é¡»ç”± <code>final</code> ä¿®é¥°ï¼Œä»¥ä¿è¯å†…éƒ¨ç±»å’Œå¤–éƒ¨ç±»çš„æ•°æ®ä¸€è‡´æ€§ã€‚ä½†ä» Java 8 å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥ä¸åŠ  <code>final</code> ä¿®é¥°ç¬¦ï¼Œç”±ç³»ç»Ÿé»˜è®¤æ·»åŠ ï¼Œå½“ç„¶è¿™åœ¨ Java 8 ä»¥å‰çš„ç‰ˆæœ¬æ˜¯ä¸å…è®¸çš„ã€‚Java å°†è¿™ä¸ªåŠŸèƒ½ç§°ä¸º Effectively final åŠŸèƒ½ã€‚</p> <p>ç¼–å†™åŒæ ·çš„ä»£ç ï¼Œåˆ†åˆ«åœ¨ Java 7 å’Œ Java 8 ä¸‹è¿è¡Œï¼Œä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘"</span><span class="p">;</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">Runnable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">            </span><span class="nd">@Override</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">            </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="p">}</span>
</span></code></pre></div> <p>ä¸‹å›¾æ˜¯ Java 7 çš„ç¼–è¯‘ç»“æœ</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Java8/5-191119163Sb30.png" data-desc-position="bottom"><img src="!assets/Java8/5-191119163Sb30.png" alt="Java 7 è¿è¡Œç»“æœ" style="width:35%;"></a></p> <p>å¯ä»¥çœ‹åˆ°åœ¨ Java 7 ä¸­å‡ºç°ä»£ç é”™è¯¯ï¼Œæç¤ºæˆ‘ä»¬å¿…é¡»æ˜¾å¼çš„å£°æ˜è¿™ä¸ªå˜é‡ä¸º <code>final</code> çš„ï¼ˆ<code>run()</code> æ–¹æ³•ä¸­ä»£ç ä¸ºè¾“å‡º <em>name</em> è¯­å¥ï¼Œå³<code>System.out.println(name);</code>ï¼‰ã€‚</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Java8/5-191119164126217.png" data-desc-position="bottom"><img src="!assets/Java8/5-191119164126217.png" alt="img" style="width:35%;"></a></p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Java8/5-191119164142109.png" data-desc-position="bottom"><img src="!assets/Java8/5-191119164142109.png" alt="img" style="width:35%;"></a></p> <p>å› ä¸ºä» Java 8 å¼€å§‹ç³»ç»Ÿä¼šé»˜è®¤æ·»åŠ  <code>final</code> ä¿®é¥°ç¬¦ï¼Œæ‰€ä»¥åœ¨å›¾ 2 å’Œå›¾ 3 ä¸­å¯ä»¥åœ¨åŒ¿åå†…éƒ¨ç±»ä¸­ç›´æ¥ä½¿ç”¨é <code>final</code> å˜é‡ï¼Œè€Œ <code>final</code> ä¿®é¥°çš„å±€éƒ¨å˜é‡ä¸èƒ½åœ¨è¢«é‡æ–°èµ‹å€¼ï¼Œæ‰€ä»¥å›¾ 3 ä¸­å‡ºç°ç¼–è¯‘é”™è¯¯ã€‚</p> <p>ä¹Ÿå°±æ˜¯è¯´ä» Java 8 å¼€å§‹ï¼Œå®ƒä¸è¦æ±‚ç¨‹åºå‘˜å¿…é¡»å°†è®¿é—®çš„å±€éƒ¨å˜é‡æ˜¾å¼çš„å£°æ˜ä¸º <code>final</code> çš„ã€‚åªè¦è¯¥å˜é‡ä¸è¢«é‡æ–°èµ‹å€¼å°±å¯ä»¥ã€‚</p> <p>ä¸€ä¸ªé <code>final</code> çš„å±€éƒ¨å˜é‡æˆ–æ–¹æ³•å‚æ•°ï¼Œå…¶å€¼åœ¨åˆå§‹åŒ–åå°±ä»æœªæ›´æ”¹ï¼Œé‚£ä¹ˆè¯¥å˜é‡å°±æ˜¯ effectively finalã€‚åœ¨ Lambda è¡¨è¾¾å¼ä¸­ï¼Œä½¿ç”¨å±€éƒ¨å˜é‡çš„æ—¶å€™ï¼Œä¹Ÿè¦æ±‚è¯¥å˜é‡å¿…é¡»æ˜¯ <code>final</code> çš„ï¼Œæ‰€ä»¥ effectively final åœ¨ Lambda è¡¨è¾¾å¼ä¸Šä¸‹æ–‡ä¸­éå¸¸æœ‰ç”¨ã€‚</p> <p>Lambda è¡¨è¾¾å¼åœ¨ç¼–ç¨‹ä¸­æ˜¯ç»å¸¸ä½¿ç”¨çš„ï¼Œè€ŒåŒ¿åå†…éƒ¨ç±»æ˜¯å¾ˆå°‘ä½¿ç”¨çš„ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬åœ¨ Lambda ç¼–ç¨‹ä¸­æ¯ä¸€ä¸ªè¢«ä½¿ç”¨åˆ°çš„å±€éƒ¨å˜é‡éƒ½å»æ˜¾ç¤ºå®šä¹‰æˆ <code>final</code> å—ï¼Ÿæ˜¾ç„¶è¿™ä¸æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ã€‚æ‰€ä»¥ï¼ŒJava 8 å¼•å…¥äº† Effectively final æ–°æ¦‚å¿µã€‚</p> <p>æ€»ç»“ä¸€ä¸‹ï¼Œè§„åˆ™æ²¡æœ‰æ”¹å˜ï¼ŒLambda è¡¨è¾¾å¼å’ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®çš„å±€éƒ¨å˜é‡å¿…é¡»æ˜¯ <code>final</code> çš„ï¼Œåªæ˜¯ä¸éœ€è¦ç¨‹åºå‘˜æ˜¾å¼çš„å£°æ˜å˜é‡ä¸º <code>final</code> çš„ï¼Œä»è€ŒèŠ‚çœæ—¶é—´ã€‚</p> <h2 id="2lambda-è¡¨è¾¾å¼">2ã€Lambda è¡¨è¾¾å¼<a class="headerlink" href="#2lambda-è¡¨è¾¾å¼" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>Lambda è¡¨è¾¾å¼ï¼ˆLambda expressionï¼‰æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼ŒåŸºäºæ•°å­¦ä¸­çš„ Î» æ¼”ç®—å¾—åï¼Œä¹Ÿå¯ç§°ä¸ºé—­åŒ…ï¼ˆClosureï¼‰ã€‚ç°åœ¨å¾ˆå¤šè¯­è¨€éƒ½æ”¯æŒ Lambda è¡¨è¾¾å¼ï¼Œå¦‚ C++ã€C#ã€Javaã€ Python å’Œ JavaScript ç­‰ã€‚</p> <p>Lambda è¡¨è¾¾å¼æ˜¯æ¨åŠ¨ Java 8 å‘å¸ƒçš„é‡è¦æ–°ç‰¹æ€§ï¼Œå®ƒå…è®¸æŠŠå‡½æ•°ä½œä¸ºä¸€ä¸ªæ–¹æ³•çš„å‚æ•°ï¼ˆå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’è¿›æ–¹æ³•ä¸­ï¼‰ï¼Œä¸‹é¢é€šè¿‡ä¾‹å­æ¥ç†è§£ Lambda è¡¨è¾¾å¼çš„æ¦‚å¿µã€‚</p> <p>å…ˆå®šä¹‰ä¸€ä¸ªè®¡ç®—æ•°å€¼çš„æ¥å£ï¼Œä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">// å¯è®¡ç®—æ¥å£</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Calculable</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="c1">// è®¡ç®—ä¸¤ä¸ªintæ•°å€¼</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">calculateInt</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="p">}</span>
</span></code></pre></div> <p>Calculable æ¥å£åªæœ‰ä¸€ä¸ªæ–¹æ³• <code>calculateInt()</code>ï¼Œå‚æ•°æ˜¯ä¸¤ä¸ª <code>int</code> ç±»å‹ï¼Œè¿”å›å€¼ä¹Ÿæ˜¯ <code>int</code> ç±»å‹ã€‚å®ç°æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="p">{</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="cm">     * é€šè¿‡æ“ä½œç¬¦ï¼Œè¿›è¡Œè®¡ç®—</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="cm">     *</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="cm">     * @param opr æ“ä½œç¬¦</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="cm">     * @return å®ç°Calculableæ¥å£å¯¹è±¡</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="cm">     */</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Calculable</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">opr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">        </span><span class="n">Calculable</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">opr</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">'+'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">            </span><span class="c1">// åŒ¿åå†…éƒ¨ç±»å®ç°Calcu lableæ¥å£</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">            </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Calculable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">                </span><span class="c1">// å®ç°åŠ æ³•è¿ç®—</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">                </span><span class="nd">@Override</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">                </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">calculateInt</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="w">            </span><span class="p">};</span>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="w">            </span><span class="c1">// åŒ¿åå†…éƒ¨ç±»å®ç°Calculableæ¥å£</span>
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="w">            </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Calculable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="w">                </span><span class="c1">// å®ç°å‡æ³•è¿ç®—</span>
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="w">                </span><span class="nd">@Override</span>
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="w">                </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">calculateInt</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-2-27"><a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-2-28"><a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a><span class="w">            </span><span class="p">};</span>
</span><span id="__span-2-29"><a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-30"><a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-2-31"><a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-32"><a id="__codelineno-2-32" name="__codelineno-2-32" href="#__codelineno-2-32"></a><span class="p">}</span>
</span></code></pre></div> <p>æ–¹æ³• <code>calculate()</code> ä¸­ <em>opr</em> å‚æ•°æ˜¯è¿ç®—ç¬¦ï¼Œè¿”å›å€¼æ˜¯å®ç° Calculable æ¥å£å¯¹è±¡ã€‚ä»£ç ç¬¬ 13 è¡Œå’Œç¬¬ 23 è¡Œéƒ½é‡‡ç”¨åŒ¿åå†…éƒ¨ç±»å®ç° Calculable æ¥å£ã€‚ä»£ç ç¬¬ 16 è¡Œå®ç°åŠ æ³•è¿ç®—ã€‚ä»£ç ç¬¬ 26 è¡Œå®ç°å‡æ³•è¿ç®—ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">n1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">n2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="c1">// å®ç°åŠ æ³•è®¡ç®—Calculableå¯¹è±¡</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="n">Calculable</span><span class="w"> </span><span class="n">f1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculate</span><span class="p">(</span><span class="sc">'+'</span><span class="p">);</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="c1">// å®ç°å‡æ³•è®¡ç®—Calculableå¯¹è±¡</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">    </span><span class="n">Calculable</span><span class="w"> </span><span class="n">f2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculate</span><span class="p">(</span><span class="sc">'-'</span><span class="p">);</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">    </span><span class="c1">// è°ƒç”¨calculateIntæ–¹æ³•è¿›è¡ŒåŠ æ³•è®¡ç®—</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">n1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"+"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">n2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"="</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">f1</span><span class="p">.</span><span class="na">calculateInt</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span><span class="w"> </span><span class="n">n2</span><span class="p">));</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">    </span><span class="c1">// System.out.printf("%d + %d = %d \n", n1, n2, f1.calculateInt(n1, n2));</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">    </span><span class="c1">// è°ƒç”¨calculateIntæ–¹æ³•è¿›è¡Œå‡æ³•è®¡ç®—</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">n1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"-"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">n2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"="</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">f1</span><span class="p">.</span><span class="na">calculateInt</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span><span class="w"> </span><span class="n">n2</span><span class="p">));</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">    </span><span class="c1">// System.out.printf("%d - %d = %d \n", n1, n2, f2.calculateInt(n1, n2));</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="p">}</span>
</span></code></pre></div> <p>ä»£ç ç¬¬ 5 è¡Œä¸­ <em>f1</em> æ˜¯å®ç°åŠ æ³•è®¡ç®— Calculable å¯¹è±¡ï¼Œä»£ç ç¬¬ 7 è¡Œä¸­ <em>f2</em> æ˜¯å®ç°å‡æ³•è®¡ç®— Calculable å¯¹è±¡ã€‚ä»£ç ç¬¬ 9 è¡Œå’Œç¬¬ 12 è¡Œæ‰è¿›è¡Œæ–¹æ³•è°ƒç”¨ã€‚</p> <p>ä¸Šè¿°ä»£ç ä¸­åˆ—å‡ºäº†ä¸¤ç§è¾“å‡ºæ–¹å¼ï¼Œä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹ Java ä¸­å¸¸è§çš„è¾“å‡ºå‡½æ•°ï¼š</p> <ol> <li><code>printf()</code> ä¸»è¦ç»§æ‰¿äº† C è¯­è¨€ä¸­ <code>printf()</code> çš„ä¸€äº›ç‰¹æ€§ï¼Œå¯ä»¥è¿›è¡Œæ ¼å¼åŒ–è¾“å‡ºã€‚</li> <li><code>print()</code> å°±æ˜¯ä¸€èˆ¬çš„æ ‡å‡†è¾“å‡ºï¼Œä½†æ˜¯ä¸æ¢è¡Œã€‚</li> <li><code>println()</code> å’Œ <code>print()</code> åŸºæœ¬æ²¡ä»€ä¹ˆå·®åˆ«ï¼Œå°±æ˜¯æœ€åä¼šæ¢è¡Œã€‚</li> </ol> <p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>10+5=15
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>10-5=5
</span></code></pre></div> <p>ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»çš„æ–¹æ³• <code>calculate()</code> ä»£ç å¾ˆè‡ƒè‚¿ï¼ŒJava 8 é‡‡ç”¨ Lambda è¡¨è¾¾å¼å¯ä»¥æ›¿ä»£åŒ¿åå†…éƒ¨ç±»ã€‚ä¿®æ”¹ä¹‹åçš„é€šç”¨æ–¹æ³• <code>calculate()</code> ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="cm">/**</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="cm">* é€šè¿‡æ“ä½œç¬¦ï¼Œè¿›è¡Œè®¡ç®—</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="cm">* @param opr æ“ä½œç¬¦</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="cm">* @return å®ç°Calculableæ¥å£å¯¹è±¡</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="cm">*/</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Calculable</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">opr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="n">Calculable</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">opr</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">'+'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">        </span><span class="c1">// Lambdaè¡¨è¾¾å¼å®ç°Calculableæ¥å£</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">        </span><span class="c1">// Lambdaè¡¨è¾¾å¼å®ç°Calculableæ¥å£</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="p">}</span>
</span></code></pre></div> <p>ä»£ç ç¬¬ 10 è¡Œå’Œç¬¬ 15 è¡Œç”¨ Lambda è¡¨è¾¾å¼æ›¿ä»£åŒ¿åå†…éƒ¨ç±»ï¼Œå¯è§ä»£ç å˜å¾—ç®€æ´ã€‚é€šè¿‡ä»¥ä¸Šç¤ºä¾‹æˆ‘ä»¬å‘ç°ï¼ŒLambda è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼ˆæ–¹æ³•ï¼‰ä»£ç å—ï¼Œå¯ä»¥ä½œä¸ºè¡¨è¾¾å¼ã€æ–¹æ³•å‚æ•°å’Œæ–¹æ³•è¿”å›å€¼ã€‚</p> <p>Lambda è¡¨è¾¾å¼æ ‡å‡†è¯­æ³•å½¢å¼å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="p">(</span><span class="n">å‚æ•°åˆ—è¡¨</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">    </span><span class="c1">// Lambdaè¡¨è¾¾å¼ä½“</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="p">}</span>
</span></code></pre></div> <p><code>-&gt;</code> è¢«ç§°ä¸ºç®­å¤´æ“ä½œç¬¦æˆ– Lambda æ“ä½œç¬¦ï¼Œç®­å¤´æ“ä½œç¬¦å°† Lambda è¡¨è¾¾å¼æ‹†åˆ†æˆä¸¤éƒ¨åˆ†ï¼š</p> <ul> <li>å·¦ä¾§ï¼šLambda è¡¨è¾¾å¼çš„å‚æ•°åˆ—è¡¨ã€‚</li> <li>å³ä¾§ï¼šLambda è¡¨è¾¾å¼ä¸­æ‰€éœ€æ‰§è¡Œçš„åŠŸèƒ½ï¼Œç”¨ <code>{}</code> åŒ…èµ·æ¥ï¼Œå³ Lambda ä½“ã€‚</li> </ul> <p><strong>Java Lambda è¡¨è¾¾å¼çš„ä¼˜ç¼ºç‚¹</strong></p> <p>ä¼˜ç‚¹ï¼š</p> <ol> <li>ä»£ç ç®€æ´ï¼Œå¼€å‘è¿…é€Ÿ</li> <li>æ–¹ä¾¿å‡½æ•°å¼ç¼–ç¨‹</li> <li>éå¸¸å®¹æ˜“è¿›è¡Œå¹¶è¡Œè®¡ç®—</li> <li>Java å¼•å…¥ Lambdaï¼Œæ”¹å–„äº†é›†åˆæ“ä½œï¼ˆå¼•å…¥ Stream APIï¼‰</li> </ol> <p>ç¼ºç‚¹ï¼š</p> <ol> <li>ä»£ç å¯è¯»æ€§å˜å·®</li> <li>åœ¨éå¹¶è¡Œè®¡ç®—ä¸­ï¼Œå¾ˆå¤šè®¡ç®—æœªå¿…æœ‰ä¼ ç»Ÿçš„ <code>for</code> æ€§èƒ½è¦é«˜</li> <li>ä¸å®¹æ˜“è¿›è¡Œè°ƒè¯•</li> </ol> <h3 id="21lambda-çš„ç®€å†™æ–¹å¼">2.1ã€Lambda çš„ç®€å†™æ–¹å¼<a class="headerlink" href="#21lambda-çš„ç®€å†™æ–¹å¼" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>ä½¿ç”¨ Lambda è¡¨è¾¾å¼æ˜¯ä¸ºäº†ç®€åŒ–ç¨‹åºä»£ç ï¼ŒLambda è¡¨è¾¾å¼æœ¬èº«ä¹Ÿæä¾›äº†å¤šç§ç®€åŒ–å½¢å¼ï¼Œè¿™äº›ç®€åŒ–å½¢å¼è™½ç„¶ç®€åŒ–äº†ä»£ç ï¼Œä½†å®¢è§‚ä¸Šä½¿å¾—ä»£ç å¯è¯»æ€§å˜å·®ã€‚</p> <p><strong>çœç•¥å‚æ•°ç±»å‹</strong></p> <p>Lambda è¡¨è¾¾å¼å¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡ç¯å¢ƒæ¨æ–­å‡ºå‚æ•°ç±»å‹ã€‚<code>calculate()</code> æ–¹æ³•ä¸­ Lambda è¡¨è¾¾å¼èƒ½æ¨æ–­å‡ºå‚æ•° <em>a</em> å’Œ <em>b</em> æ˜¯ <code>int</code> ç±»å‹ï¼Œç®€åŒ–å½¢å¼å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Calculable</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">opr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="n">Calculable</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">opr</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">'+'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">        </span><span class="c1">// Lambdaè¡¨è¾¾å¼å®ç°Calculableæ¥å£</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">        </span><span class="c1">// Lambdaè¡¨è¾¾å¼å®ç°Calculableæ¥å£</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="p">}</span>
</span></code></pre></div> <p><strong>çœç•¥å‚æ•°å°æ‹¬å·</strong></p> <p>å¦‚æœ Lambda è¡¨è¾¾å¼ä¸­çš„å‚æ•°åªæœ‰ä¸€ä¸ªï¼Œå¯ä»¥çœç•¥å‚æ•°å°æ‹¬å·ã€‚ä¿®æ”¹ Calculable æ¥å£ä¸­çš„ <code>calculateInt()</code> æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1">// å¯è®¡ç®—æ¥å£</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="nd">@FunctionalInterface</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Calculable</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">    </span><span class="c1">// è®¡ç®—ä¸€ä¸ªintæ•°å€¼</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">calculateInt</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">);</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="p">}</span>
</span></code></pre></div> <p>å…¶ä¸­ <code>calculateInt()</code> æ–¹æ³•åªæœ‰ä¸€ä¸ª <code>int</code> ç±»å‹å‚æ•°ï¼Œè¿”å›å€¼ä¹Ÿæ˜¯ <code>int</code> ç±»å‹ã€‚è°ƒç”¨ <code>calculateInt()</code> æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">n1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span><span class="c1">// å®ç°äºŒæ¬¡æ–¹è®¡ç®—Calculableå¯¹è±¡</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">    </span><span class="n">Calculable</span><span class="w"> </span><span class="n">f1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculate</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span><span class="c1">// å®ç°ä¸‰æ¬¡æ–¹è®¡ç®—Calculableå¯¹è±¡</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">    </span><span class="n">Calculable</span><span class="w"> </span><span class="n">f2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculate</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">    </span><span class="c1">// è°ƒç”¨calculateIntæ–¹æ³•è¿›è¡ŒåŠ æ³•è®¡ç®—</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">printf</span><span class="p">(</span><span class="s">"%däºŒæ¬¡æ–¹ = %d \n"</span><span class="p">,</span><span class="w"> </span><span class="n">n1</span><span class="p">,</span><span class="w"> </span><span class="n">f1</span><span class="p">.</span><span class="na">calculateInt</span><span class="p">(</span><span class="n">n1</span><span class="p">));</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">    </span><span class="c1">// è°ƒç”¨calculateIntæ–¹æ³•è¿›è¡Œå‡æ³•è®¡ç®—</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">printf</span><span class="p">(</span><span class="s">"%dä¸‰æ¬¡æ–¹ = %d \n"</span><span class="p">,</span><span class="w"> </span><span class="n">n1</span><span class="p">,</span><span class="w"> </span><span class="n">f2</span><span class="p">.</span><span class="na">calculateInt</span><span class="p">(</span><span class="n">n1</span><span class="p">));</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="p">}</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="cm">/**</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="cm">* é€šè¿‡å¹‚è®¡ç®—</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="cm">*</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="cm">* @param power å¹‚</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="cm">* @return å®ç°Calculableæ¥å£å¯¹è±¡</span>
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="cm">*/</span>
</span><span id="__span-9-18"><a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Calculable</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">power</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-19"><a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="w">    </span><span class="n">Calculable</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-9-20"><a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">power</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-21"><a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a><span class="w">        </span><span class="c1">// Lambdaè¡¨è¾¾å¼å®ç°Calculableæ¥å£</span>
</span><span id="__span-9-22"><a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a><span class="w">        </span><span class="c1">// æ ‡å‡†å½¢å¼</span>
</span><span id="__span-9-23"><a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a><span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-24"><a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
</span><span id="__span-9-25"><a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-9-26"><a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-27"><a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a><span class="w">        </span><span class="c1">// Lambdaè¡¨è¾¾å¼å®ç°Calculableæ¥å£</span>
</span><span id="__span-9-28"><a id="__codelineno-9-28" name="__codelineno-9-28" href="#__codelineno-9-28"></a><span class="w">        </span><span class="c1">// çœç•¥å½¢å¼</span>
</span><span id="__span-9-29"><a id="__codelineno-9-29" name="__codelineno-9-29" href="#__codelineno-9-29"></a><span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-30"><a id="__codelineno-9-30" name="__codelineno-9-30" href="#__codelineno-9-30"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
</span><span id="__span-9-31"><a id="__codelineno-9-31" name="__codelineno-9-31" href="#__codelineno-9-31"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-9-32"><a id="__codelineno-9-32" name="__codelineno-9-32" href="#__codelineno-9-32"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-9-33"><a id="__codelineno-9-33" name="__codelineno-9-33" href="#__codelineno-9-33"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-9-34"><a id="__codelineno-9-34" name="__codelineno-9-34" href="#__codelineno-9-34"></a><span class="p">}</span>
</span></code></pre></div> <p>è¾“å‡ºç»“æœä¸ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>10äºŒæ¬¡æ–¹ = 100
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>10ä¸‰æ¬¡æ–¹ = 1000 
</span></code></pre></div> <p><strong>çœç•¥ return å’Œå¤§æ‹¬å·</strong></p> <p>å¦‚æœ Lambda è¡¨è¾¾å¼ä½“ä¸­åªæœ‰ä¸€æ¡è¯­å¥ï¼Œé‚£ä¹ˆå¯ä»¥çœç•¥ <code>return</code> å’Œå¤§æ‹¬å·ï¼Œä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Calculable</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">power</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">    </span><span class="n">Calculable</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">power</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">        </span><span class="c1">// Lambdaè¡¨è¾¾å¼å®ç°Calculableæ¥å£</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">        </span><span class="c1">// æ ‡å‡†å½¢å¼</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="w">        </span><span class="c1">// Lambdaè¡¨è¾¾å¼å®ç°Calculableæ¥å£</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="w">        </span><span class="c1">// çœç•¥å½¢å¼</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="p">}</span>
</span></code></pre></div> <h3 id="22lambda-çš„ä½¿ç”¨">2.2ã€Lambda çš„ä½¿ç”¨<a class="headerlink" href="#22lambda-çš„ä½¿ç”¨" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p><strong>ä½œä¸ºå‚æ•°ä½¿ç”¨ Lambda è¡¨è¾¾å¼</strong></p> <p>Lambda è¡¨è¾¾å¼ä¸€ç§å¸¸è§çš„ç”¨é€”å°±æ˜¯ä½œä¸ºå‚æ•°ä¼ é€’ç»™æ–¹æ³•ï¼Œè¿™éœ€è¦å£°æ˜å‚æ•°çš„ç±»å‹å£°æ˜ä¸ºå‡½æ•°å¼æ¥å£ç±»å‹ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">n1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">n2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">    </span><span class="c1">// æ‰“å°åŠ æ³•è®¡ç®—ç»“æœ</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">    </span><span class="n">display</span><span class="p">((</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="n">n1</span><span class="p">,</span><span class="w"> </span><span class="n">n2</span><span class="p">);</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="w">    </span><span class="c1">// æ‰“å°å‡æ³•è®¡ç®—ç»“æœ</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w">    </span><span class="n">display</span><span class="p">((</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">n1</span><span class="p">,</span><span class="w"> </span><span class="n">n2</span><span class="p">);</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="p">}</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="cm">/**</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="cm">* æ‰“å°è®¡ç®—ç»“æœ</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="cm">*</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="cm">* @param calc Lambdaè¡¨è¾¾å¼</span>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="cm">* @param n1   æ“ä½œæ•°1</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="cm">* @param n2   æ“ä½œæ•°2</span>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="cm">*/</span>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="p">(</span><span class="n">Calculable</span><span class="w"> </span><span class="n">calc</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n1</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">calc</span><span class="p">.</span><span class="na">calculateInt</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span><span class="w"> </span><span class="n">n2</span><span class="p">));</span>
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a><span class="p">}</span>
</span></code></pre></div> <p>ä¸Šè¿°ä»£ç ç¬¬ 19 è¡Œå®šä¹‰ <code>display()</code> æ‰“å°è®¡ç®—ç»“æœæ–¹æ³•ï¼Œå…¶ä¸­å‚æ•° <em>calc</em> ç±»å‹æ˜¯ Calculableï¼Œè¿™ä¸ªå‚æ•°å³å¯ä»¥æ¥æ”¶å®ç° Calculable æ¥å£çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶ Lambda è¡¨è¾¾å¼ï¼Œå› ä¸º Calculable æ˜¯å‡½æ•°å¼æ¥å£ã€‚ ä»£ç ç¬¬ 7 è¡Œå’Œç¬¬ 9 è¡Œä¸¤æ¬¡è°ƒç”¨ <code>display()</code> æ–¹æ³•ï¼Œå®ƒä»¬ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯ Lambda è¡¨è¾¾å¼ã€‚</p> <p><strong>è®¿é—®å˜é‡</strong></p> <p>Lambda è¡¨è¾¾å¼å¯ä»¥è®¿é—®æ‰€åœ¨å¤–å±‚ä½œç”¨åŸŸå®šä¹‰çš„å˜é‡ï¼ŒåŒ…æ‹¬æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡ã€‚</p> <p>æˆå‘˜å˜é‡åŒ…æ‹¬å®ä¾‹æˆå‘˜å˜é‡å’Œé™æ€æˆå‘˜å˜é‡ã€‚åœ¨ Lambda è¡¨è¾¾å¼ä¸­å¯ä»¥è®¿é—®è¿™äº›æˆå‘˜å˜é‡ï¼Œæ­¤æ—¶çš„ Lambda è¡¨è¾¾å¼ä¸æ™®é€šæ–¹æ³•ä¸€æ ·ï¼Œå¯ä»¥è¯»å–æˆå‘˜å˜é‡ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹æˆå‘˜å˜é‡ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">LambdaDemo</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">    </span><span class="c1">// å®ä¾‹æˆå‘˜å˜é‡</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">    </span><span class="c1">// é™æ€æˆå‘˜å˜é‡</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">staticValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="w">    </span><span class="c1">// é™æ€æ–¹æ³•ï¼Œè¿›è¡ŒåŠ æ³•è¿ç®—</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Calculable</span><span class="w"> </span><span class="nf">add</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="w">        </span><span class="n">Calculable</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="w">            </span><span class="c1">// è®¿é—®é™æ€æˆå‘˜å˜é‡ï¼Œä¸èƒ½è®¿é—®å®ä¾‹æˆå‘˜å˜é‡</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="w">            </span><span class="n">staticValue</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">staticValue</span><span class="p">;</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="w">            </span><span class="c1">// this.value;</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="w">    </span><span class="c1">// å®ä¾‹æ–¹æ³•ï¼Œè¿›è¡Œå‡æ³•è¿ç®—</span>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Calculable</span><span class="w"> </span><span class="nf">sub</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-21"><a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a><span class="w">        </span><span class="n">Calculable</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-22"><a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a><span class="w">            </span><span class="c1">// è®¿é—®é™æ€æˆå‘˜å˜é‡å’Œå®ä¾‹æˆå‘˜å˜é‡</span>
</span><span id="__span-13-23"><a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a><span class="w">            </span><span class="n">staticValue</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-13-24"><a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">value</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-13-25"><a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">staticValue</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">value</span><span class="p">;</span>
</span><span id="__span-13-26"><a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
</span><span id="__span-13-27"><a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-13-28"><a id="__codelineno-13-28" name="__codelineno-13-28" href="#__codelineno-13-28"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-13-29"><a id="__codelineno-13-29" name="__codelineno-13-29" href="#__codelineno-13-29"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-13-30"><a id="__codelineno-13-30" name="__codelineno-13-30" href="#__codelineno-13-30"></a><span class="p">}</span>
</span></code></pre></div> <p>LambdaDemo ç±»ä¸­å£°æ˜ä¸€ä¸ªå®ä¾‹æˆå‘˜å˜é‡ <em>value</em> å’Œä¸€ä¸ªé™æ€æˆå‘˜å˜é‡ <em>staticValue</em>ã€‚æ­¤å¤–ï¼Œè¿˜å£°æ˜äº†é™æ€æ–¹æ³• <code>add()</code>ï¼ˆè§ä»£ç ç¬¬ 8 è¡Œï¼‰å’Œå®ä¾‹æ–¹æ³• <code>sub()</code>ï¼ˆè§ä»£ç ç¬¬ 20 è¡Œï¼‰ã€‚<code>add()</code> æ–¹æ³•æ˜¯é™æ€æ–¹æ³•ï¼Œé™æ€æ–¹æ³•ä¸­ä¸èƒ½è®¿é—®å®ä¾‹æˆå‘˜å˜é‡ï¼Œæ‰€ä»¥ä»£ç ç¬¬ 13 è¡Œçš„ Lambda è¡¨è¾¾å¼ä¸­ä¹Ÿä¸èƒ½è®¿é—®å®ä¾‹æˆå‘˜å˜é‡ï¼Œä¹Ÿä¸èƒ½è®¿é—®å®ä¾‹æˆå‘˜æ–¹æ³•ã€‚</p> <p><code>sub()</code> æ–¹æ³•æ˜¯å®ä¾‹æ–¹æ³•ï¼Œå®ä¾‹æ–¹æ³•ä¸­èƒ½å¤Ÿè®¿é—®é™æ€æˆå‘˜å˜é‡å’Œå®ä¾‹æˆå‘˜å˜é‡ï¼Œæ‰€ä»¥ä»£ç ç¬¬ 23 è¡Œçš„ Lambda è¡¨è¾¾å¼ä¸­å¯ä»¥è®¿é—®è¿™äº›å˜é‡ï¼Œå½“ç„¶å®ä¾‹æ–¹æ³•å’Œé™æ€æ–¹æ³•ä¹Ÿå¯ä»¥è®¿é—®ã€‚å½“è®¿é—®å®ä¾‹æˆå‘˜å˜é‡æˆ–å®ä¾‹æ–¹æ³•æ—¶å¯ä»¥ä½¿ç”¨ <code>this</code>ï¼Œå¦‚æœä¸ä¸å±€éƒ¨å˜é‡å‘ç”Ÿå†²çªæƒ…å†µä¸‹å¯ä»¥çœç•¥ <code>this</code>ã€‚</p> <p>å¯¹äºæˆå‘˜å˜é‡çš„è®¿é—® Lambda è¡¨è¾¾å¼ä¸æ™®é€šæ–¹æ³•æ²¡æœ‰åŒºåˆ«ï¼Œä½†æ˜¯è®¿é—®å±€éƒ¨å˜é‡æ—¶ï¼Œå˜é‡å¿…é¡»æ˜¯ <code>final</code> ç±»å‹çš„ï¼ˆä¸å¯æ”¹å˜ï¼‰ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">LambdaDemo</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">    </span><span class="c1">// å®ä¾‹æˆå‘˜å˜é‡</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">    </span><span class="c1">// é™æ€æˆå‘˜å˜é‡</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">staticValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">    </span><span class="c1">// é™æ€æ–¹æ³•ï¼Œè¿›è¡ŒåŠ æ³•è¿ç®—</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Calculable</span><span class="w"> </span><span class="nf">add</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="w">        </span><span class="c1">// å±€éƒ¨å˜é‡</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">localValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">        </span><span class="n">Calculable</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="w">            </span><span class="c1">// localValue++;</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="w">            </span><span class="c1">// ç¼–è¯‘é”™è¯¯</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">localValue</span><span class="p">;</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-14-17"><a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-14-18"><a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-14-19"><a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a>
</span><span id="__span-14-20"><a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span class="w">    </span><span class="c1">// å®ä¾‹æ–¹æ³•ï¼Œè¿›è¡Œå‡æ³•è¿ç®—</span>
</span><span id="__span-14-21"><a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Calculable</span><span class="w"> </span><span class="nf">sub</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-22"><a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a><span class="w">        </span><span class="c1">// finalå±€éƒ¨å˜é‡</span>
</span><span id="__span-14-23"><a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">localValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span>
</span><span id="__span-14-24"><a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a><span class="w">        </span><span class="n">Calculable</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-25"><a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">staticValue</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">value</span><span class="p">;</span>
</span><span id="__span-14-26"><a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a><span class="w">            </span><span class="c1">// localValue = c;</span>
</span><span id="__span-14-27"><a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a><span class="w">            </span><span class="c1">// ç¼–è¯‘é”™è¯¯</span>
</span><span id="__span-14-28"><a id="__codelineno-14-28" name="__codelineno-14-28" href="#__codelineno-14-28"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
</span><span id="__span-14-29"><a id="__codelineno-14-29" name="__codelineno-14-29" href="#__codelineno-14-29"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-14-30"><a id="__codelineno-14-30" name="__codelineno-14-30" href="#__codelineno-14-30"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><span id="__span-14-31"><a id="__codelineno-14-31" name="__codelineno-14-31" href="#__codelineno-14-31"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-14-32"><a id="__codelineno-14-32" name="__codelineno-14-32" href="#__codelineno-14-32"></a><span class="p">}</span>
</span></code></pre></div> <p>ä¸Šè¿°ä»£ç ç¬¬ 10 è¡Œå’Œç¬¬ 23 è¡Œéƒ½å£°æ˜ä¸€ä¸ªå±€éƒ¨å˜é‡ <em>localValue</em>ï¼ŒLambda è¡¨è¾¾å¼ä¸­è®¿é—®è¿™ä¸ªå˜é‡ï¼Œå¦‚ä»£ç ç¬¬ 14 è¡Œå’Œç¬¬ 25 è¡Œã€‚ä¸ç®¡è¿™ä¸ªå˜é‡æ˜¯å¦æ˜¾å¼åœ°ä½¿ç”¨ <code>final</code> ä¿®é¥°ï¼Œå®ƒéƒ½ä¸èƒ½åœ¨ Lambda è¡¨è¾¾å¼ä¸­ä¿®æ”¹å˜é‡ï¼Œæ‰€ä»¥ä»£ç ç¬¬ 12 è¡Œå’Œç¬¬ 26 è¡Œå¦‚æœå»æ‰æ³¨é‡Šä¼šå‘ç”Ÿç¼–è¯‘é”™è¯¯ã€‚</p> <p>Lambda è¡¨è¾¾å¼åªèƒ½è®¿é—®å±€éƒ¨å˜é‡è€Œä¸èƒ½ä¿®æ”¹ï¼Œå¦åˆ™ä¼šå‘ç”Ÿç¼–è¯‘é”™è¯¯ï¼Œä½†å¯¹é™æ€å˜é‡å’Œæˆå‘˜å˜é‡å¯è¯»å¯å†™ã€‚</p> <h3 id="23lambda-ä¸åŒ¿åå†…éƒ¨ç±»çš„è”ç³»å’ŒåŒºåˆ«">2.3ã€Lambda ä¸åŒ¿åå†…éƒ¨ç±»çš„è”ç³»å’ŒåŒºåˆ«<a class="headerlink" href="#23lambda-ä¸åŒ¿åå†…éƒ¨ç±»çš„è”ç³»å’ŒåŒºåˆ«" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>Java Lambda è¡¨è¾¾å¼çš„ä¸€ä¸ªé‡è¦ç”¨æ³•æ˜¯ç®€åŒ–æŸäº›åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•ï¼Œå› æ­¤å®ƒå¯ä»¥éƒ¨åˆ†å–ä»£åŒ¿åå†…éƒ¨ç±»çš„ä½œç”¨ã€‚</p> <p>Lambda è¡¨è¾¾å¼ä¸åŒ¿åå†…éƒ¨ç±»çš„ç›¸åŒç‚¹å¦‚ä¸‹ï¼š</p> <ul> <li>Lambda è¡¨è¾¾å¼ä¸åŒ¿åå†…éƒ¨ç±»ä¸€æ ·ï¼Œéƒ½å¯ä»¥ç›´æ¥è®¿é—® Effectively final çš„å±€éƒ¨å˜é‡ï¼Œä»¥åŠå¤–éƒ¨ç±»çš„æˆå‘˜å˜é‡ï¼ˆåŒ…æ‹¬å®ä¾‹å˜é‡å’Œç±»å˜é‡ï¼‰ã€‚</li> <li>Lambda è¡¨è¾¾å¼åˆ›å»ºçš„å¯¹è±¡ä¸åŒ¿åå†…éƒ¨ç±»ç”Ÿæˆçš„å¯¹è±¡ä¸€æ ·ï¼Œéƒ½å¯ä»¥ç›´æ¥è°ƒç”¨ä»æ¥å£ä¸­ç»§æ‰¿çš„é»˜è®¤æ–¹æ³•ã€‚</li> </ul> <p>ä¸‹é¢ç¨‹åºç¤ºèŒƒäº† Lambda è¡¨è¾¾å¼ä¸åŒ¿åå†…éƒ¨ç±»çš„ç›¸ä¼¼ä¹‹å¤„ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nd">@FunctionalInterface</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="kd">interface</span> <span class="nc">Displayable</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">    </span><span class="c1">// å®šä¹‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•å’Œé»˜è®¤æ–¹æ³•</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="p">();</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="p">}</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">LambdaAndInner</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Cè¯­è¨€ä¸­æ–‡ç½‘"</span><span class="p">;</span>
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>
</span><span id="__span-15-15"><a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-16"><a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"http://c.biancheng.net/"</span><span class="p">;</span>
</span><span id="__span-15-17"><a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a><span class="w">        </span><span class="n">Displayable</span><span class="w"> </span><span class="n">dis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-18"><a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a><span class="w">            </span><span class="c1">// è®¿é—®çš„å±€éƒ¨å˜é‡</span>
</span><span id="__span-15-19"><a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"url å±€éƒ¨å˜é‡ä¸º:"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">url</span><span class="p">);</span>
</span><span id="__span-15-20"><a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a><span class="w">            </span><span class="c1">// è®¿é—®å¤–éƒ¨ç±»çš„å®ä¾‹å˜é‡å’Œç±»å˜é‡</span>
</span><span id="__span-15-21"><a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"å¤–éƒ¨ç±»çš„ age å®ä¾‹å˜é‡ä¸ºï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">age</span><span class="p">);</span>
</span><span id="__span-15-22"><a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"å¤–éƒ¨ç±»çš„ name ç±»å˜é‡ä¸ºï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>
</span><span id="__span-15-23"><a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-15-24"><a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a><span class="w">        </span><span class="n">dis</span><span class="p">.</span><span class="na">display</span><span class="p">();</span>
</span><span id="__span-15-25"><a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a><span class="w">        </span><span class="c1">// è°ƒç”¨diså¯¹è±¡ä»æ¥å£ä¸­ç»§æ‰¿çš„add()æ–¹æ³•</span>
</span><span id="__span-15-26"><a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">dis</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">));</span><span class="w"> </span>
</span><span id="__span-15-27"><a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-28"><a id="__codelineno-15-28" name="__codelineno-15-28" href="#__codelineno-15-28"></a>
</span><span id="__span-15-29"><a id="__codelineno-15-29" name="__codelineno-15-29" href="#__codelineno-15-29"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-30"><a id="__codelineno-15-30" name="__codelineno-15-30" href="#__codelineno-15-30"></a><span class="w">        </span><span class="n">LambdaAndInner</span><span class="w"> </span><span class="n">lambda</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LambdaAndInner</span><span class="p">();</span>
</span><span id="__span-15-31"><a id="__codelineno-15-31" name="__codelineno-15-31" href="#__codelineno-15-31"></a><span class="w">        </span><span class="n">lambda</span><span class="p">.</span><span class="na">test</span><span class="p">();</span>
</span><span id="__span-15-32"><a id="__codelineno-15-32" name="__codelineno-15-32" href="#__codelineno-15-32"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-33"><a id="__codelineno-15-33" name="__codelineno-15-33" href="#__codelineno-15-33"></a><span class="p">}</span>
</span></code></pre></div> <p>è¾“å‡ºç»“æœä¸ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>url å±€éƒ¨å˜é‡ä¸ºï¼šhttp://c.biancheng.net/
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>å¤–éƒ¨ç±»çš„ age å®ä¾‹å˜é‡ä¸ºï¼š12
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>å¤–éƒ¨ç±»çš„ name ç±»å˜é‡ä¸ºï¼šCè¯­è¨€ä¸­æ–‡ç½‘
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>8
</span></code></pre></div> <p>ä¸Šé¢ç¨‹åºä½¿ç”¨ Lambda è¡¨è¾¾å¼åˆ›å»ºäº†ä¸€ä¸ª Displayable çš„å¯¹è±¡ï¼ŒLambda è¡¨è¾¾å¼çš„ä»£ç å—ä¸­çš„ä»£ç ç¬¬ 19ã€21 å’Œ 22 è¡Œåˆ†åˆ«ç¤ºèŒƒäº†è®¿é—® Effectively final çš„å±€éƒ¨å˜é‡ã€å¤–éƒ¨ç±»çš„å®ä¾‹å˜é‡å’Œç±»å˜é‡ã€‚ä»è¿™ç‚¹æ¥çœ‹ï¼Œ Lambda è¡¨è¾¾å¼çš„ä»£ç å—ä¸åŒ¿åå†…éƒ¨ç±»çš„æ–¹æ³•ä½“æ˜¯ç›¸åŒçš„ã€‚</p> <p>ä¸åŒ¿åå†…éƒ¨ç±»ç›¸ä¼¼çš„æ˜¯ï¼Œç”±äº Lambda è¡¨è¾¾å¼è®¿é—®äº† <em>url</em> å±€éƒ¨å˜é‡ï¼Œå› æ­¤è¯¥å±€éƒ¨å˜é‡ç›¸å½“äºæœ‰ä¸€ä¸ªéšå¼çš„ <code>final</code> ä¿®é¥°ï¼Œå› æ­¤åŒæ ·ä¸å…è®¸å¯¹ <code>url</code> å±€éƒ¨å˜é‡é‡æ–°èµ‹å€¼ã€‚</p> <p>å½“ç¨‹åºä½¿ç”¨ Lambda è¡¨è¾¾å¼åˆ›å»ºäº† Displayable çš„å¯¹è±¡ä¹‹åï¼Œè¯¥å¯¹è±¡ä¸ä»…å¯è°ƒç”¨æ¥å£ä¸­å”¯ä¸€çš„æŠ½è±¡æ–¹æ³•ï¼Œä¹Ÿå¯è°ƒç”¨æ¥å£ä¸­çš„é»˜è®¤æ–¹æ³•ï¼Œå¦‚ä¸Šé¢ç¨‹åºä»£ç ç¬¬ 26 è¡Œæ‰€ç¤ºã€‚</p> <p>Lambda è¡¨è¾¾å¼ä¸åŒ¿åå†…éƒ¨ç±»ä¸»è¦å­˜åœ¨å¦‚ä¸‹åŒºåˆ«ã€‚</p> <ul> <li>åŒ¿åå†…éƒ¨ç±»å¯ä»¥ä¸ºä»»æ„æ¥å£åˆ›å»ºå®ä¾‹â€”â€”ä¸ç®¡æ¥å£åŒ…å«å¤šå°‘ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œåªè¦åŒ¿åå†…éƒ¨ç±»å®ç°æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•å³å¯ï¼›ä½† Lambda è¡¨è¾¾å¼åªèƒ½ä¸ºå‡½æ•°å¼æ¥å£åˆ›å»ºå®ä¾‹ã€‚</li> <li>åŒ¿åå†…éƒ¨ç±»å¯ä»¥ä¸ºæŠ½è±¡ç±»ç”šè‡³æ™®é€šç±»åˆ›å»ºå®ä¾‹ï¼›ä½† Lambda è¡¨è¾¾å¼åªèƒ½ä¸ºå‡½æ•°å¼æ¥å£åˆ›å»ºå®ä¾‹ã€‚</li> <li>åŒ¿åå†…éƒ¨ç±»å®ç°çš„æŠ½è±¡æ–¹æ³•çš„æ–¹æ³•ä½“å…è®¸è°ƒç”¨æ¥å£ä¸­å®šä¹‰çš„é»˜è®¤æ–¹æ³•ï¼›ä½† Lambda è¡¨è¾¾å¼çš„ä»£ç å—ä¸å…è®¸è°ƒç”¨æ¥å£ä¸­å®šä¹‰çš„é»˜è®¤æ–¹æ³•ã€‚</li> </ul> <p>å¯¹äº Lambda è¡¨è¾¾å¼çš„ä»£ç å—ä¸å…è®¸è°ƒç”¨æ¥å£ä¸­å®šä¹‰çš„é»˜è®¤æ–¹æ³•çš„é™åˆ¶ï¼Œå¯ä»¥å°è¯•å¯¹ä¸Šé¢çš„ LambdaAndInner.java ç¨‹åºç¨åšä¿®æ”¹ï¼Œåœ¨ Lambda è¡¨è¾¾å¼çš„ä»£ç å—ä¸­å¢åŠ å¦‚ä¸‹ä¸€è¡Œï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c1">// å°è¯•è°ƒç”¨æ¥å£ä¸­çš„é»˜è®¤æ–¹æ³•ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">));</span>
</span></code></pre></div> <p>è™½ç„¶ Lambda è¡¨è¾¾å¼çš„ç›®æ ‡ç±»å‹ Displayable ä¸­åŒ…å«äº† <code>add()</code> æ–¹æ³•ï¼Œä½† Lambda è¡¨è¾¾å¼çš„ä»£ç å—ä¸å…è®¸è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼›å¦‚æœå°†ä¸Šé¢çš„ Lambda è¡¨è¾¾å¼æ”¹ä¸ºåŒ¿åå†…éƒ¨ç±»çš„å†™æ³•ï¼Œå½“åŒ¿åå†…éƒ¨ç±»å®ç° <code>display()</code> æŠ½è±¡æ–¹æ³•æ—¶ï¼Œåˆ™å®Œå…¨å¯ä»¥è°ƒç”¨è¿™ä¸ª <code>add()</code> æ–¹æ³•ï¼Œå¦‚ä¸‹é¢ä»£ç æ‰€ç¤ºã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"http://c.biancheng.net/"</span><span class="p">;</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">    </span><span class="n">Displayable</span><span class="w"> </span><span class="n">dis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Displayable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">        </span><span class="nd">@Override</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">            </span><span class="c1">// è®¿é—®çš„å±€éƒ¨å˜é‡</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"url å±€éƒ¨å˜é‡ä¸º:"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">url</span><span class="p">);</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="w">            </span><span class="c1">// è®¿é—®å¤–éƒ¨ç±»çš„å®ä¾‹å˜é‡å’Œç±»å˜é‡</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"å¤–éƒ¨ç±»çš„ age å®ä¾‹å˜é‡ä¸ºï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">age</span><span class="p">);</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"å¤–éƒ¨ç±»çš„ name ç±»å˜é‡ä¸ºï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">));</span>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="w">    </span><span class="p">};</span>
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="w">    </span><span class="n">dis</span><span class="p">.</span><span class="na">display</span><span class="p">();</span>
</span><span id="__span-18-16"><a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a><span class="p">}</span>
</span></code></pre></div> <h2 id="3æ–¹æ³•å¼•ç”¨">3ã€æ–¹æ³•å¼•ç”¨<a class="headerlink" href="#3æ–¹æ³•å¼•ç”¨" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>æ–¹æ³•å¼•ç”¨å¯ä»¥ç†è§£ä¸º Lambda è¡¨è¾¾å¼çš„å¿«æ·å†™æ³•ï¼Œå®ƒæ¯” Lambda è¡¨è¾¾å¼æ›´åŠ çš„ç®€æ´ï¼Œå¯è¯»æ€§æ›´é«˜ï¼Œæœ‰å¾ˆå¥½çš„é‡ç”¨æ€§ã€‚å¦‚æœå®ç°æ¯”è¾ƒç®€å•ï¼Œå¤ç”¨çš„åœ°æ–¹åˆä¸å¤šï¼Œæ¨èä½¿ç”¨ Lambda è¡¨è¾¾å¼ï¼Œå¦åˆ™åº”è¯¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨ã€‚</p> <p>Java 8 ä¹‹åå¢åŠ äº†åŒå†’å· <code>::</code> è¿ç®—ç¬¦ï¼Œè¯¥è¿ç®—ç¬¦ç”¨äº â€œæ–¹æ³•å¼•ç”¨â€ï¼Œæ³¨æ„ä¸æ˜¯è°ƒç”¨æ–¹æ³•ã€‚â€œæ–¹æ³•å¼•ç”¨â€ è™½ç„¶æ²¡æœ‰ç›´æ¥ä½¿ç”¨ Lambda è¡¨è¾¾å¼ï¼Œä½†ä¹Ÿä¸ Lambda è¡¨è¾¾å¼æœ‰å…³ï¼Œä¸å‡½æ•°å¼æ¥å£æœ‰å…³ã€‚ æ–¹æ³•å¼•ç”¨çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nl">ObjectRef</span><span class="p">::</span><span class="n">methodName</span><span class="w"> </span>
</span></code></pre></div> <p>å…¶ä¸­ï¼Œ<em>ObjectRef</em> æ˜¯ç±»åæˆ–è€…å®ä¾‹åï¼Œ<em>methodName</em> æ˜¯ç›¸åº”çš„æ–¹æ³•åã€‚</p> <blockquote> <p>æ³¨æ„ï¼šè¢«å¼•ç”¨æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ï¼Œå¿…é¡»ä¸å‡½æ•°å¼æ¥å£æ–¹æ³•å‚æ•°åˆ—è¡¨å’Œæ–¹æ³•è¿”å›å€¼ç±»å‹ä¸€è‡´ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ã€‚</p> </blockquote> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">LambdaDemo</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="w">    </span><span class="c1">// é™æ€æ–¹æ³•ï¼Œè¿›è¡ŒåŠ æ³•è¿ç®—</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="w">    </span><span class="c1">// å‚æ•°åˆ—è¡¨è¦ä¸å‡½æ•°å¼æ¥å£æ–¹æ³•calculateInt(int a, int b)å…¼å®¹</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="w">    </span><span class="c1">// å®ä¾‹æ–¹æ³•ï¼Œè¿›è¡Œå‡æ³•è¿ç®—</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="w">    </span><span class="c1">// å‚æ•°åˆ—è¡¨è¦ä¸å‡½æ•°å¼æ¥å£æ–¹æ³•calculateInt(int a, int b)å…¼å®¹</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">sub</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="p">}</span>
</span></code></pre></div> <p>LambdaDemo ç±»ä¸­æä¾›äº†ä¸€ä¸ªé™æ€æ–¹æ³• <code>add()</code>ï¼Œä¸€ä¸ªå®ä¾‹æ–¹æ³• <code>sub()</code>ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•å¿…é¡»ä¸å‡½æ•°å¼æ¥å£æ–¹æ³•å‚æ•°åˆ—è¡¨ä¸€è‡´ï¼Œæ–¹æ³•è¿”å›å€¼ç±»å‹ä¹Ÿè¦ä¿æŒä¸€è‡´ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">HelloWorld</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">n1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">n2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="w">        </span><span class="c1">// æ‰“å°åŠ æ³•è®¡ç®—ç»“æœ</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="w">        </span><span class="n">display</span><span class="p">(</span><span class="n">LambdaDemo</span><span class="p">::</span><span class="n">add</span><span class="p">,</span><span class="w"> </span><span class="n">n1</span><span class="p">,</span><span class="w"> </span><span class="n">n2</span><span class="p">);</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="w">        </span><span class="n">LambdaDemo</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LambdaDemo</span><span class="p">();</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="w">        </span><span class="c1">// æ‰“å°å‡æ³•è®¡ç®—ç»“æœ </span>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="w">        </span><span class="n">display</span><span class="p">(</span><span class="n">d</span><span class="p">::</span><span class="n">sub</span><span class="p">,</span><span class="w"> </span><span class="n">n1</span><span class="p">,</span><span class="w"> </span><span class="n">n2</span><span class="p">);</span>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a><span class="cm">     * æ‰“å°è®¡ç®—ç»“æœ</span>
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a><span class="cm">     *</span>
</span><span id="__span-21-15"><a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a><span class="cm">     * @param calc Lambdaè¡¨è¾¾å¼</span>
</span><span id="__span-21-16"><a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a><span class="cm">     * @param n1   æ“ä½œæ•°1</span>
</span><span id="__span-21-17"><a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a><span class="cm">     * @param n2   æ“ä½œæ•°2</span>
</span><span id="__span-21-18"><a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a><span class="cm">     */</span>
</span><span id="__span-21-19"><a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="p">(</span><span class="n">Calculable</span><span class="w"> </span><span class="n">calc</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n1</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-20"><a id="__codelineno-21-20" name="__codelineno-21-20" href="#__codelineno-21-20"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">calc</span><span class="p">.</span><span class="na">calculateInt</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span><span class="w"> </span><span class="n">n2</span><span class="p">));</span>
</span><span id="__span-21-21"><a id="__codelineno-21-21" name="__codelineno-21-21" href="#__codelineno-21-21"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-21-22"><a id="__codelineno-21-22" name="__codelineno-21-22" href="#__codelineno-21-22"></a><span class="p">}</span>
</span></code></pre></div> <p>ä»£ç ç¬¬ 18 è¡Œå£°æ˜ <code>display()</code> æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•° <em>calc</em> æ˜¯ Calculable ç±»å‹ï¼Œå®ƒå¯ä»¥æ¥å—ä¸‰ç§å¯¹è±¡ï¼šCalculable å®ç°å¯¹è±¡ã€Lambda è¡¨è¾¾å¼å’Œæ–¹æ³•å¼•ç”¨ã€‚ä»£ç ç¬¬ 6 è¡Œä¸­ç¬¬ä¸€ä¸ªå®é™…å‚æ•° <code>LambdaDemo::add</code> æ˜¯é™æ€æ–¹æ³•çš„æ–¹æ³•å¼•ç”¨ã€‚ä»£ç ç¬¬ 9 è¡Œä¸­ç¬¬ä¸€ä¸ªå®é™…å‚æ•°<code>d::sub</code>ï¼Œæ˜¯å®ä¾‹æ–¹æ³•çš„æ–¹æ³•å¼•ç”¨ï¼Œ<em>d</em> æ˜¯ LambdaDemo å®ä¾‹ã€‚</p> <p>æç¤ºï¼šä»£ç ç¬¬ 6 è¡Œçš„ <code>LambdaDemo::add</code> å’Œç¬¬ 9 è¡Œçš„ <code>d::sub</code> æ˜¯æ–¹æ³•å¼•ç”¨ï¼Œæ­¤æ—¶å¹¶æ²¡æœ‰è°ƒç”¨æ–¹æ³•ï¼Œåªæ˜¯å°†å¼•ç”¨ä¼ é€’ç»™ <code>display()</code> æ–¹æ³•ï¼Œåœ¨ <code>display()</code> æ–¹æ³•ä¸­æ‰çœŸæ­£è°ƒç”¨æ–¹æ³•ã€‚</p> <h2 id="4å‡½æ•°å¼æ¥å£">4ã€å‡½æ•°å¼æ¥å£<a class="headerlink" href="#4å‡½æ•°å¼æ¥å£" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>Lambda è¡¨è¾¾å¼å®ç°çš„æ¥å£ä¸æ˜¯æ™®é€šçš„æ¥å£ï¼Œè€Œæ˜¯<strong>å‡½æ•°å¼æ¥å£</strong>ã€‚å¦‚æœä¸€ä¸ªæ¥å£ä¸­ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªæŠ½è±¡çš„æ–¹æ³•ï¼ˆObject ç±»ä¸­çš„æ–¹æ³•ä¸åŒ…æ‹¬åœ¨å†…ï¼‰ï¼Œé‚£è¿™ä¸ªæ¥å£å°±å¯ä»¥è¢«çœ‹åšæ˜¯å‡½æ•°å¼æ¥å£ã€‚è¿™ç§æ¥å£åªèƒ½æœ‰ä¸€ä¸ªæ–¹æ³•ã€‚å¦‚æœæ¥å£ä¸­å£°æ˜å¤šä¸ªæŠ½è±¡æ–¹æ³•ï¼Œé‚£ä¹ˆ Lambda è¡¨è¾¾å¼ä¼šå‘ç”Ÿç¼–è¯‘é”™è¯¯ï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>The target type of this expression must be a functional interface
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>//æ­¤è¡¨è¾¾å¼çš„ç›®æ ‡ç±»å‹å¿…é¡»æ˜¯å‡½æ•°æ¥å£
</span></code></pre></div> <p>ä¸ºäº†é˜²æ­¢åœ¨å‡½æ•°å¼æ¥å£ä¸­å£°æ˜å¤šä¸ªæŠ½è±¡æ–¹æ³•ï¼ŒJava 8 æä¾›äº†ä¸€ä¸ªå£°æ˜å‡½æ•°å¼æ¥å£æ³¨è§£ <code>@FunctionalInterface</code>ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="c1">// å¯è®¡ç®—æ¥å£</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="nd">@FunctionalInterface</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Calculable</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="w">    </span><span class="c1">// è®¡ç®—ä¸¤ä¸ªintæ•°å€¼</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">calculateInt</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="p">}</span>
</span></code></pre></div> <p>åœ¨æ¥å£ä¹‹å‰ä½¿ç”¨ <code>@FunctionalInterface</code> æ³¨è§£ä¿®é¥°ï¼Œé‚£ä¹ˆè¯•å›¾å¢åŠ ä¸€ä¸ªæŠ½è±¡æ–¹æ³•æ—¶ä¼šå‘ç”Ÿç¼–è¯‘é”™è¯¯ã€‚ä½†å¯ä»¥æ·»åŠ é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•ã€‚</p> <p><code>@FunctionalInterface</code> æ³¨è§£ä¸ <code>@Override</code> æ³¨è§£çš„ä½œç”¨ç±»ä¼¼ã€‚è¯¥æ³¨è§£å¯ç”¨äºä¸€ä¸ªæ¥å£çš„å®šä¹‰ä¸Šï¼Œä¸€æ—¦ä½¿ç”¨è¯¥æ³¨è§£æ¥å®šä¹‰æ¥å£ï¼Œç¼–è¯‘å™¨å°†ä¼šå¼ºåˆ¶æ£€æŸ¥è¯¥æ¥å£æ˜¯å¦ç¡®å®æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå¦åˆ™å°†ä¼šæŠ¥é”™ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿ä¸ä½¿ç”¨è¯¥æ³¨è§£ï¼Œåªè¦æ»¡è¶³å‡½æ•°å¼æ¥å£çš„å®šä¹‰ï¼Œè¿™ä»ç„¶æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œä½¿ç”¨èµ·æ¥éƒ½ä¸€æ ·ã€‚</p> <blockquote> <p>æç¤ºï¼šLambda è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªåŒ¿åæ–¹æ³•ä»£ç ï¼ŒJava ä¸­çš„æ–¹æ³•å¿…é¡»å£°æ˜åœ¨ç±»æˆ–æ¥å£ä¸­ï¼Œé‚£ä¹ˆ Lambda è¡¨è¾¾å¼æ‰€å®ç°çš„åŒ¿åæ–¹æ³•æ˜¯åœ¨å‡½æ•°å¼æ¥å£ä¸­å£°æ˜çš„ã€‚</p> </blockquote> <p>JDK 1.8 ä¹‹å‰å·²æœ‰çš„å‡½æ•°å¼æ¥å£ï¼š</p> <ul> <li><code>java.lang.Runnable</code></li> <li><code>java.util.concurrent.Callable</code></li> <li><code>java.security.PrivilegedAction</code></li> <li><code>java.util.Comparator</code></li> <li><code>java.io.FileFilter</code></li> <li><code>java.nio.file.PathMatcher</code></li> <li><code>java.lang.reflect.InvocationHandler</code></li> <li><code>java.beans.PropertyChangeListener</code></li> <li><code>java.awt.event.ActionListener</code></li> <li><code>javax.swing.event.ChangeListener</code></li> </ul> <p>JDK 1.8 æ–°å¢åŠ çš„å‡½æ•°æ¥å£ï¼š</p> <ul> <li><code>java.util.function</code></li> </ul> <h3 id="41å¸¸ç”¨å‡½æ•°å¼æ¥å£">4.1ã€å¸¸ç”¨å‡½æ•°å¼æ¥å£<a class="headerlink" href="#41å¸¸ç”¨å‡½æ•°å¼æ¥å£" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>è¿™é‡Œåªä»‹ç»æœ€åŸºç¡€çš„å‡½æ•°å¼æ¥å£ï¼Œè‡³äºå®ƒçš„å˜ä½“åªè¦æ˜ç™½äº†åŸºç¡€è‡ªç„¶å°±èƒ½å¤Ÿæ˜ç™½ã€‚</p> <h4 id="411consumer">4.1.1ã€<code>Consumer&lt;T&gt;</code><a class="headerlink" href="#411consumer" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p><strong><code>Consumer&lt;T&gt;</code>ï¼šæ¶ˆè´¹å‹æ¥å£</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="cm">/**</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="cm"> * Represents an operation that accepts a single input argument and returns no</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="cm"> * result. Unlike most other functional interfaces, {@code Consumer} is expected</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="cm"> * to operate via side-effects.</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="cm"> *</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="cm"> * &lt;p&gt;This is a &lt;a href="package-summary.html"&gt;functional interface&lt;/a&gt;</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="cm"> * whose functional method is {@link #accept(Object)}.</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="cm"> *</span>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="cm"> * @param &lt;T&gt; the type of the input to the operation</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="cm"> *</span>
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a><span class="cm"> * @since 1.8</span>
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="cm"> */</span>
</span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="nd">@FunctionalInterface</span>
</span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Consumer</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-24-15"><a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a>
</span><span id="__span-24-16"><a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-24-17"><a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a><span class="cm">     * Performs this operation on the given argument.</span>
</span><span id="__span-24-18"><a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a><span class="cm">     *</span>
</span><span id="__span-24-19"><a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a><span class="cm">     * @param t the input argument</span>
</span><span id="__span-24-20"><a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a><span class="cm">     */</span>
</span><span id="__span-24-21"><a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">accept</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">t</span><span class="p">);</span>
</span><span id="__span-24-22"><a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a>
</span><span id="__span-24-23"><a id="__codelineno-24-23" name="__codelineno-24-23" href="#__codelineno-24-23"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-24-24"><a id="__codelineno-24-24" name="__codelineno-24-24" href="#__codelineno-24-24"></a><span class="cm">     * Returns a composed {@code Consumer} that performs, in sequence, this</span>
</span><span id="__span-24-25"><a id="__codelineno-24-25" name="__codelineno-24-25" href="#__codelineno-24-25"></a><span class="cm">     * operation followed by the {@code after} operation. If performing either</span>
</span><span id="__span-24-26"><a id="__codelineno-24-26" name="__codelineno-24-26" href="#__codelineno-24-26"></a><span class="cm">     * operation throws an exception, it is relayed to the caller of the</span>
</span><span id="__span-24-27"><a id="__codelineno-24-27" name="__codelineno-24-27" href="#__codelineno-24-27"></a><span class="cm">     * composed operation.  If performing this operation throws an exception,</span>
</span><span id="__span-24-28"><a id="__codelineno-24-28" name="__codelineno-24-28" href="#__codelineno-24-28"></a><span class="cm">     * the {@code after} operation will not be performed.</span>
</span><span id="__span-24-29"><a id="__codelineno-24-29" name="__codelineno-24-29" href="#__codelineno-24-29"></a><span class="cm">     *</span>
</span><span id="__span-24-30"><a id="__codelineno-24-30" name="__codelineno-24-30" href="#__codelineno-24-30"></a><span class="cm">     * @param after the operation to perform after this operation</span>
</span><span id="__span-24-31"><a id="__codelineno-24-31" name="__codelineno-24-31" href="#__codelineno-24-31"></a><span class="cm">     * @return a composed {@code Consumer} that performs in sequence this</span>
</span><span id="__span-24-32"><a id="__codelineno-24-32" name="__codelineno-24-32" href="#__codelineno-24-32"></a><span class="cm">     * operation followed by the {@code after} operation</span>
</span><span id="__span-24-33"><a id="__codelineno-24-33" name="__codelineno-24-33" href="#__codelineno-24-33"></a><span class="cm">     * @throws NullPointerException if {@code after} is null</span>
</span><span id="__span-24-34"><a id="__codelineno-24-34" name="__codelineno-24-34" href="#__codelineno-24-34"></a><span class="cm">     */</span>
</span><span id="__span-24-35"><a id="__codelineno-24-35" name="__codelineno-24-35" href="#__codelineno-24-35"></a><span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">andThen</span><span class="p">(</span><span class="n">Consumer</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">super</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">after</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-24-36"><a id="__codelineno-24-36" name="__codelineno-24-36" href="#__codelineno-24-36"></a><span class="w">        </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">after</span><span class="p">);</span>
</span><span id="__span-24-37"><a id="__codelineno-24-37" name="__codelineno-24-37" href="#__codelineno-24-37"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">accept</span><span class="p">(</span><span class="n">t</span><span class="p">);</span><span class="w"> </span><span class="n">after</span><span class="p">.</span><span class="na">accept</span><span class="p">(</span><span class="n">t</span><span class="p">);</span><span class="w"> </span><span class="p">};</span>
</span><span id="__span-24-38"><a id="__codelineno-24-38" name="__codelineno-24-38" href="#__codelineno-24-38"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-24-39"><a id="__codelineno-24-39" name="__codelineno-24-39" href="#__codelineno-24-39"></a><span class="p">}</span>
</span></code></pre></div> <p><strong>æŠ½è±¡æ–¹æ³•ï¼š</strong><code>void accept(T t)</code></p> <p>æ¥æ”¶ä¸€ä¸ªå‚æ•°è¿›è¡Œæ¶ˆè´¹ï¼Œä½†æ— éœ€è¿”å›ç»“æœã€‚</p> <p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="n">Consumer</span><span class="w"> </span><span class="n">consumer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">;</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="n">consumer</span><span class="p">.</span><span class="na">accept</span><span class="p">(</span><span class="s">"hello function"</span><span class="p">);</span>
</span></code></pre></div> <p><strong>ç»“æœï¼š</strong></p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>hello function
</span></code></pre></div> <p><strong>é»˜è®¤æ–¹æ³•ï¼š</strong> <code>andThen(Consumer&lt;? super T&gt; after)</code></p> <p>å…ˆæ¶ˆè´¹ç„¶åå†æ¶ˆè´¹ï¼Œå…ˆæ‰§è¡Œè°ƒç”¨ <code>andThen</code> æ¥å£çš„ <code>accept</code> æ–¹æ³•ï¼Œç„¶åå†æ‰§è¡Œ <code>andThen</code> æ–¹æ³•å‚æ•° <em>after</em> ä¸­çš„ <code>accept</code> æ–¹æ³•ã€‚</p> <p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">consumer1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="s">"è½¦åï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">split</span><span class="p">(</span><span class="s">","</span><span class="p">)</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">);</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">consumer2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"--&gt;é¢œè‰²ï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">split</span><span class="p">(</span><span class="s">","</span><span class="p">)</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">);</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">"ä¿æ—¶æ·,ç™½è‰²"</span><span class="p">,</span><span class="w"> </span><span class="s">"æ³•æ‹‰åˆ©,çº¢è‰²"</span><span class="p">};</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">strings</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="w">    </span><span class="n">consumer1</span><span class="p">.</span><span class="na">andThen</span><span class="p">(</span><span class="n">consumer2</span><span class="p">).</span><span class="na">accept</span><span class="p">(</span><span class="n">string</span><span class="p">);</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="p">}</span>
</span></code></pre></div> <p><strong>ç»“æœï¼š</strong></p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>è½¦åï¼šä¿æ—¶æ·--&gt;é¢œè‰²ï¼šç™½è‰²
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>è½¦åï¼šæ³•æ‹‰åˆ©--&gt;é¢œè‰²ï¼šçº¢è‰²
</span></code></pre></div> <h4 id="412supplier">4.1.2ã€<code>Supplier&lt;T&gt;</code><a class="headerlink" href="#412supplier" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p><strong><code>Supplier&lt;T&gt;</code>ï¼šä¾›ç»™å‹æ¥å£</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="cm">/**</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="cm"> * Represents a supplier of results.</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="cm"> *</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="cm"> * &lt;p&gt;There is no requirement that a new or distinct result be returned each</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="cm"> * time the supplier is invoked.</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="cm"> *</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="cm"> * &lt;p&gt;This is a &lt;a href="package-summary.html"&gt;functional interface&lt;/a&gt;</span>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="cm"> * whose functional method is {@link #get()}.</span>
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="cm"> *</span>
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="cm"> * @param &lt;T&gt; the type of results supplied by this supplier</span>
</span><span id="__span-29-11"><a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a><span class="cm"> *</span>
</span><span id="__span-29-12"><a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a><span class="cm"> * @since 1.8</span>
</span><span id="__span-29-13"><a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a><span class="cm"> */</span>
</span><span id="__span-29-14"><a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a><span class="nd">@FunctionalInterface</span>
</span><span id="__span-29-15"><a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Supplier</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-29-16"><a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a>
</span><span id="__span-29-17"><a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-29-18"><a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a><span class="cm">     * Gets a result.</span>
</span><span id="__span-29-19"><a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a><span class="cm">     *</span>
</span><span id="__span-29-20"><a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a><span class="cm">     * @return a result</span>
</span><span id="__span-29-21"><a id="__codelineno-29-21" name="__codelineno-29-21" href="#__codelineno-29-21"></a><span class="cm">     */</span>
</span><span id="__span-29-22"><a id="__codelineno-29-22" name="__codelineno-29-22" href="#__codelineno-29-22"></a><span class="w">    </span><span class="n">T</span><span class="w"> </span><span class="nf">get</span><span class="p">();</span>
</span><span id="__span-29-23"><a id="__codelineno-29-23" name="__codelineno-29-23" href="#__codelineno-29-23"></a><span class="p">}</span>
</span></code></pre></div> <p><strong>æŠ½è±¡æ–¹æ³•</strong>ï¼š<code>T get()</code></p> <p>æ— å‚æ•°ï¼Œæœ‰è¿”å›å€¼ã€‚</p> <p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="n">Supplier</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">supplier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">"æˆ‘è¦å˜çš„å¾ˆæœ‰é’±"</span><span class="p">;</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">supplier</span><span class="p">.</span><span class="na">get</span><span class="p">());</span>
</span></code></pre></div> <p><strong>è¾“å‡ºï¼š</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="n">æˆ‘è¦å˜å¾—å¾ˆæœ‰é’±</span>
</span></code></pre></div> <p>è¿™ç±»æ¥å£é€‚åˆæä¾›æ•°æ®çš„åœºæ™¯ã€‚</p> <h4 id="413function">4.1.3ã€<code>Function&lt;T,R&gt;</code><a class="headerlink" href="#413function" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p><strong><code>Function&lt;T,R&gt;</code>: å‡½æ•°å‹æ¥å£</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="cm">/**</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="cm"> * Represents a function that accepts one argument and produces a result.</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="cm"> *</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="cm"> * &lt;p&gt;This is a &lt;a href="package-summary.html"&gt;functional interface&lt;/a&gt;</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="cm"> * whose functional method is {@link #apply(Object)}.</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="cm"> *</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="cm"> * @param &lt;T&gt; the type of the input to the function</span>
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="cm"> * @param &lt;R&gt; the type of the result of the function</span>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="cm"> *</span>
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="cm"> * @since 1.8</span>
</span><span id="__span-32-11"><a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a><span class="cm"> */</span>
</span><span id="__span-32-12"><a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a><span class="nd">@FunctionalInterface</span>
</span><span id="__span-32-13"><a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Function</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">R</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-14"><a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a>
</span><span id="__span-32-15"><a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-32-16"><a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a><span class="cm">     * Applies this function to the given argument.</span>
</span><span id="__span-32-17"><a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a><span class="cm">     *</span>
</span><span id="__span-32-18"><a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a><span class="cm">     * @param t the function argument</span>
</span><span id="__span-32-19"><a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a><span class="cm">     * @return the function result</span>
</span><span id="__span-32-20"><a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a><span class="cm">     */</span>
</span><span id="__span-32-21"><a id="__codelineno-32-21" name="__codelineno-32-21" href="#__codelineno-32-21"></a><span class="w">    </span><span class="n">R</span><span class="w"> </span><span class="nf">apply</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">t</span><span class="p">);</span>
</span><span id="__span-32-22"><a id="__codelineno-32-22" name="__codelineno-32-22" href="#__codelineno-32-22"></a>
</span><span id="__span-32-23"><a id="__codelineno-32-23" name="__codelineno-32-23" href="#__codelineno-32-23"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-32-24"><a id="__codelineno-32-24" name="__codelineno-32-24" href="#__codelineno-32-24"></a><span class="cm">     * Returns a composed function that first applies the {@code before}</span>
</span><span id="__span-32-25"><a id="__codelineno-32-25" name="__codelineno-32-25" href="#__codelineno-32-25"></a><span class="cm">     * function to its input, and then applies this function to the result.</span>
</span><span id="__span-32-26"><a id="__codelineno-32-26" name="__codelineno-32-26" href="#__codelineno-32-26"></a><span class="cm">     * If evaluation of either function throws an exception, it is relayed to</span>
</span><span id="__span-32-27"><a id="__codelineno-32-27" name="__codelineno-32-27" href="#__codelineno-32-27"></a><span class="cm">     * the caller of the composed function.</span>
</span><span id="__span-32-28"><a id="__codelineno-32-28" name="__codelineno-32-28" href="#__codelineno-32-28"></a><span class="cm">     *</span>
</span><span id="__span-32-29"><a id="__codelineno-32-29" name="__codelineno-32-29" href="#__codelineno-32-29"></a><span class="cm">     * @param &lt;V&gt; the type of input to the {@code before} function, and to the</span>
</span><span id="__span-32-30"><a id="__codelineno-32-30" name="__codelineno-32-30" href="#__codelineno-32-30"></a><span class="cm">     *           composed function</span>
</span><span id="__span-32-31"><a id="__codelineno-32-31" name="__codelineno-32-31" href="#__codelineno-32-31"></a><span class="cm">     * @param before the function to apply before this function is applied</span>
</span><span id="__span-32-32"><a id="__codelineno-32-32" name="__codelineno-32-32" href="#__codelineno-32-32"></a><span class="cm">     * @return a composed function that first applies the {@code before}</span>
</span><span id="__span-32-33"><a id="__codelineno-32-33" name="__codelineno-32-33" href="#__codelineno-32-33"></a><span class="cm">     * function and then applies this function</span>
</span><span id="__span-32-34"><a id="__codelineno-32-34" name="__codelineno-32-34" href="#__codelineno-32-34"></a><span class="cm">     * @throws NullPointerException if before is null</span>
</span><span id="__span-32-35"><a id="__codelineno-32-35" name="__codelineno-32-35" href="#__codelineno-32-35"></a><span class="cm">     *</span>
</span><span id="__span-32-36"><a id="__codelineno-32-36" name="__codelineno-32-36" href="#__codelineno-32-36"></a><span class="cm">     * @see #andThen(Function)</span>
</span><span id="__span-32-37"><a id="__codelineno-32-37" name="__codelineno-32-37" href="#__codelineno-32-37"></a><span class="cm">     */</span>
</span><span id="__span-32-38"><a id="__codelineno-32-38" name="__codelineno-32-38" href="#__codelineno-32-38"></a><span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="o">&lt;</span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Function</span><span class="o">&lt;</span><span class="n">V</span><span class="p">,</span><span class="w"> </span><span class="n">R</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">compose</span><span class="p">(</span><span class="n">Function</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">super</span><span class="w"> </span><span class="n">V</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">before</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-39"><a id="__codelineno-32-39" name="__codelineno-32-39" href="#__codelineno-32-39"></a><span class="w">        </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">before</span><span class="p">);</span>
</span><span id="__span-32-40"><a id="__codelineno-32-40" name="__codelineno-32-40" href="#__codelineno-32-40"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">V</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">apply</span><span class="p">(</span><span class="n">before</span><span class="p">.</span><span class="na">apply</span><span class="p">(</span><span class="n">v</span><span class="p">));</span>
</span><span id="__span-32-41"><a id="__codelineno-32-41" name="__codelineno-32-41" href="#__codelineno-32-41"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-32-42"><a id="__codelineno-32-42" name="__codelineno-32-42" href="#__codelineno-32-42"></a>
</span><span id="__span-32-43"><a id="__codelineno-32-43" name="__codelineno-32-43" href="#__codelineno-32-43"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-32-44"><a id="__codelineno-32-44" name="__codelineno-32-44" href="#__codelineno-32-44"></a><span class="cm">     * Returns a composed function that first applies this function to</span>
</span><span id="__span-32-45"><a id="__codelineno-32-45" name="__codelineno-32-45" href="#__codelineno-32-45"></a><span class="cm">     * its input, and then applies the {@code after} function to the result.</span>
</span><span id="__span-32-46"><a id="__codelineno-32-46" name="__codelineno-32-46" href="#__codelineno-32-46"></a><span class="cm">     * If evaluation of either function throws an exception, it is relayed to</span>
</span><span id="__span-32-47"><a id="__codelineno-32-47" name="__codelineno-32-47" href="#__codelineno-32-47"></a><span class="cm">     * the caller of the composed function.</span>
</span><span id="__span-32-48"><a id="__codelineno-32-48" name="__codelineno-32-48" href="#__codelineno-32-48"></a><span class="cm">     *</span>
</span><span id="__span-32-49"><a id="__codelineno-32-49" name="__codelineno-32-49" href="#__codelineno-32-49"></a><span class="cm">     * @param &lt;V&gt; the type of output of the {@code after} function, and of the</span>
</span><span id="__span-32-50"><a id="__codelineno-32-50" name="__codelineno-32-50" href="#__codelineno-32-50"></a><span class="cm">     *           composed function</span>
</span><span id="__span-32-51"><a id="__codelineno-32-51" name="__codelineno-32-51" href="#__codelineno-32-51"></a><span class="cm">     * @param after the function to apply after this function is applied</span>
</span><span id="__span-32-52"><a id="__codelineno-32-52" name="__codelineno-32-52" href="#__codelineno-32-52"></a><span class="cm">     * @return a composed function that first applies this function and then</span>
</span><span id="__span-32-53"><a id="__codelineno-32-53" name="__codelineno-32-53" href="#__codelineno-32-53"></a><span class="cm">     * applies the {@code after} function</span>
</span><span id="__span-32-54"><a id="__codelineno-32-54" name="__codelineno-32-54" href="#__codelineno-32-54"></a><span class="cm">     * @throws NullPointerException if after is null</span>
</span><span id="__span-32-55"><a id="__codelineno-32-55" name="__codelineno-32-55" href="#__codelineno-32-55"></a><span class="cm">     *</span>
</span><span id="__span-32-56"><a id="__codelineno-32-56" name="__codelineno-32-56" href="#__codelineno-32-56"></a><span class="cm">     * @see #compose(Function)</span>
</span><span id="__span-32-57"><a id="__codelineno-32-57" name="__codelineno-32-57" href="#__codelineno-32-57"></a><span class="cm">     */</span>
</span><span id="__span-32-58"><a id="__codelineno-32-58" name="__codelineno-32-58" href="#__codelineno-32-58"></a><span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="o">&lt;</span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Function</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">andThen</span><span class="p">(</span><span class="n">Function</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">super</span><span class="w"> </span><span class="n">R</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="n">after</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-59"><a id="__codelineno-32-59" name="__codelineno-32-59" href="#__codelineno-32-59"></a><span class="w">        </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">after</span><span class="p">);</span>
</span><span id="__span-32-60"><a id="__codelineno-32-60" name="__codelineno-32-60" href="#__codelineno-32-60"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">after</span><span class="p">.</span><span class="na">apply</span><span class="p">(</span><span class="n">apply</span><span class="p">(</span><span class="n">t</span><span class="p">));</span>
</span><span id="__span-32-61"><a id="__codelineno-32-61" name="__codelineno-32-61" href="#__codelineno-32-61"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-32-62"><a id="__codelineno-32-62" name="__codelineno-32-62" href="#__codelineno-32-62"></a>
</span><span id="__span-32-63"><a id="__codelineno-32-63" name="__codelineno-32-63" href="#__codelineno-32-63"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-32-64"><a id="__codelineno-32-64" name="__codelineno-32-64" href="#__codelineno-32-64"></a><span class="cm">     * Returns a function that always returns its input argument.</span>
</span><span id="__span-32-65"><a id="__codelineno-32-65" name="__codelineno-32-65" href="#__codelineno-32-65"></a><span class="cm">     *</span>
</span><span id="__span-32-66"><a id="__codelineno-32-66" name="__codelineno-32-66" href="#__codelineno-32-66"></a><span class="cm">     * @param &lt;T&gt; the type of the input and output objects to the function</span>
</span><span id="__span-32-67"><a id="__codelineno-32-67" name="__codelineno-32-67" href="#__codelineno-32-67"></a><span class="cm">     * @return a function that always returns its input argument</span>
</span><span id="__span-32-68"><a id="__codelineno-32-68" name="__codelineno-32-68" href="#__codelineno-32-68"></a><span class="cm">     */</span>
</span><span id="__span-32-69"><a id="__codelineno-32-69" name="__codelineno-32-69" href="#__codelineno-32-69"></a><span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Function</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">identity</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-70"><a id="__codelineno-32-70" name="__codelineno-32-70" href="#__codelineno-32-70"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
</span><span id="__span-32-71"><a id="__codelineno-32-71" name="__codelineno-32-71" href="#__codelineno-32-71"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-32-72"><a id="__codelineno-32-72" name="__codelineno-32-72" href="#__codelineno-32-72"></a><span class="p">}</span>
</span></code></pre></div> <p><strong>æŠ½è±¡æ–¹æ³•ï¼š</strong> <code>R apply(T t)</code></p> <p>ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›æƒ³è¦çš„ç»“æœã€‚</p> <p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="n">Function</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">function</span><span class="p">.</span><span class="na">apply</span><span class="p">(</span><span class="mi">2</span><span class="p">));</span>
</span></code></pre></div> <p><strong>è¾“å‡ºï¼š</strong></p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>12
</span></code></pre></div> <p><strong>é»˜è®¤æ–¹æ³•ï¼š</strong><code>compose(Function&lt;? super V, ? extends T&gt; before)</code></p> <p>å…ˆæ‰§è¡Œ <code>compose</code> æ–¹æ³•å‚æ•° <em>before</em> ä¸­çš„ <code>apply</code> æ–¹æ³•ï¼Œç„¶åå°†æ‰§è¡Œç»“æœä¼ é€’ç»™è°ƒç”¨ <code>compose</code> å‡½æ•°ä¸­çš„ <code>apply</code> æ–¹æ³•åœ¨æ‰§è¡Œã€‚</p> <p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="n">Function</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">function1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="n">Function</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">function2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">e</span><span class="p">;</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="n">Integer</span><span class="w"> </span><span class="n">apply2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function1</span><span class="p">.</span><span class="na">compose</span><span class="p">(</span><span class="n">function2</span><span class="p">).</span><span class="na">apply</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">apply2</span><span class="p">);</span>
</span></code></pre></div> <p><strong>è¾“å‡ºï¼š</strong></p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>18
</span></code></pre></div> <p>è¿˜æ˜¯ä¸¾ä¸€ä¸ªä¹˜æ³•çš„ä¾‹å­ï¼Œ<code>compose</code> æ–¹æ³•æ‰§è¡Œæµç¨‹æ˜¯å…ˆæ‰§è¡Œ <code>function2</code> çš„è¡¨è¾¾å¼ä¹Ÿå°±æ˜¯ <code>3*3=9</code>ï¼Œç„¶ååœ¨å°†æ‰§è¡Œç»“æœä¼ ç»™ <code>function1</code> çš„è¡¨è¾¾å¼ä¹Ÿå°±æ˜¯ <code>9*2=18</code>ï¼Œæ‰€ä»¥æœ€ç»ˆçš„ç»“æœæ˜¯ <code>18</code>ã€‚</p> <blockquote> <p><code>andThen(Function&lt;? super R, ? extends V&gt; after)</code> å…ˆæ‰§è¡Œè°ƒç”¨ <code>andThen</code> å‡½æ•°çš„ <code>apply</code> æ–¹æ³•ï¼Œç„¶åå†å°†æ‰§è¡Œç»“æœä¼ é€’ç»™ <code>andThen</code> æ–¹æ³• <code>after</code> å‚æ•°ä¸­çš„ <code>apply</code> æ–¹æ³•å†æ‰§è¡Œã€‚å®ƒå’Œ <code>compose</code> æ–¹æ³•æ­£å¥½æ˜¯ç›¸åçš„æ‰§è¡Œé¡ºåºã€‚</p> </blockquote> <p><strong>é»˜è®¤æ–¹æ³•ï¼š</strong><code>andThen(Function&lt;? super R, ? extends V&gt; after)</code></p> <p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="n">Function</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">function1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="n">Function</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">function2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">e</span><span class="p">;</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="n">Integer</span><span class="w"> </span><span class="n">apply3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function1</span><span class="p">.</span><span class="na">andThen</span><span class="p">(</span><span class="n">function2</span><span class="p">).</span><span class="na">apply</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">apply3</span><span class="p">);</span>
</span></code></pre></div> <p><strong>è¾“å‡ºï¼š</strong></p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>36
</span></code></pre></div> <p>è¿™é‡Œæˆ‘ä»¬å’Œ <code>compose</code> æ–¹æ³•ä½¿ç”¨ä¸€ä¸ªä¾‹å­ï¼Œæ‰€ä»¥æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ä¾‹å­ï¼Œç”±äºæ–¹æ³•çš„ä¸åŒï¼Œæ‰§è¡Œé¡ºåºä¹Ÿå°±ä¸ç›¸åŒï¼Œé‚£ä¹ˆç»“æœæ˜¯å¤§å¤§ä¸åŒçš„ã€‚<code>andThen</code> æ–¹æ³•æ˜¯å…ˆæ‰§è¡Œ <code>function1</code> è¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯ <code>3*2=6</code>ï¼Œç„¶åå†æ‰§è¡Œ <code>function2</code> è¡¨è¾¾å¼ä¹Ÿå°±æ˜¯ <code>6*6=36</code>ã€‚ç»“æœå°±æ˜¯ <code>36</code>ã€‚</p> <p><strong>é™æ€æ–¹æ³•ï¼š</strong><code>identity()</code></p> <p>è·å–ä¸€ä¸ªè¾“å…¥å‚æ•°å’Œè¿”å›ç»“æœç›¸åŒçš„ Function å®ä¾‹ã€‚</p> <p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="n">Function</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">identity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Function</span><span class="p">.</span><span class="na">identity</span><span class="p">();</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="n">Integer</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">identity</span><span class="p">.</span><span class="na">apply</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">apply</span><span class="p">);</span>
</span></code></pre></div> <p><strong>è¾“å‡ºï¼š</strong></p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>3
</span></code></pre></div> <p>å¹³å¸¸æ²¡æœ‰é‡åˆ°è¿‡ä½¿ç”¨è¿™ä¸ªæ–¹æ³•çš„åœºæ™¯ï¼Œæ€»ä¹‹è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨å°±æ˜¯è¾“å…¥ä»€ä¹ˆè¿”å›ç»“æœå°±æ˜¯ä»€ä¹ˆã€‚</p> <h4 id="414predicate">4.1.4ã€<code>Predicate&lt;T&gt;</code><a class="headerlink" href="#414predicate" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p><strong><code>Predicate&lt;T&gt;</code> ï¼š æ–­è¨€å‹æ¥å£</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="cm">/**</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="cm"> * Represents a predicate (boolean-valued function) of one argument.</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="cm"> *</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="cm"> * &lt;p&gt;This is a &lt;a href="package-summary.html"&gt;functional interface&lt;/a&gt;</span>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="cm"> * whose functional method is {@link #test(Object)}.</span>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a><span class="cm"> *</span>
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a><span class="cm"> * @param &lt;T&gt; the type of the input to the predicate</span>
</span><span id="__span-41-8"><a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a><span class="cm"> *</span>
</span><span id="__span-41-9"><a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a><span class="cm"> * @since 1.8</span>
</span><span id="__span-41-10"><a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a><span class="cm"> */</span>
</span><span id="__span-41-11"><a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a><span class="nd">@FunctionalInterface</span>
</span><span id="__span-41-12"><a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Predicate</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-41-13"><a id="__codelineno-41-13" name="__codelineno-41-13" href="#__codelineno-41-13"></a>
</span><span id="__span-41-14"><a id="__codelineno-41-14" name="__codelineno-41-14" href="#__codelineno-41-14"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-41-15"><a id="__codelineno-41-15" name="__codelineno-41-15" href="#__codelineno-41-15"></a><span class="cm">     * Evaluates this predicate on the given argument.</span>
</span><span id="__span-41-16"><a id="__codelineno-41-16" name="__codelineno-41-16" href="#__codelineno-41-16"></a><span class="cm">     *</span>
</span><span id="__span-41-17"><a id="__codelineno-41-17" name="__codelineno-41-17" href="#__codelineno-41-17"></a><span class="cm">     * @param t the input argument</span>
</span><span id="__span-41-18"><a id="__codelineno-41-18" name="__codelineno-41-18" href="#__codelineno-41-18"></a><span class="cm">     * @return {@code true} if the input argument matches the predicate,</span>
</span><span id="__span-41-19"><a id="__codelineno-41-19" name="__codelineno-41-19" href="#__codelineno-41-19"></a><span class="cm">     * otherwise {@code false}</span>
</span><span id="__span-41-20"><a id="__codelineno-41-20" name="__codelineno-41-20" href="#__codelineno-41-20"></a><span class="cm">     */</span>
</span><span id="__span-41-21"><a id="__codelineno-41-21" name="__codelineno-41-21" href="#__codelineno-41-21"></a><span class="w">    </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">test</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">t</span><span class="p">);</span>
</span><span id="__span-41-22"><a id="__codelineno-41-22" name="__codelineno-41-22" href="#__codelineno-41-22"></a>
</span><span id="__span-41-23"><a id="__codelineno-41-23" name="__codelineno-41-23" href="#__codelineno-41-23"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-41-24"><a id="__codelineno-41-24" name="__codelineno-41-24" href="#__codelineno-41-24"></a><span class="cm">     * Returns a composed predicate that represents a short-circuiting logical</span>
</span><span id="__span-41-25"><a id="__codelineno-41-25" name="__codelineno-41-25" href="#__codelineno-41-25"></a><span class="cm">     * AND of this predicate and another.  When evaluating the composed</span>
</span><span id="__span-41-26"><a id="__codelineno-41-26" name="__codelineno-41-26" href="#__codelineno-41-26"></a><span class="cm">     * predicate, if this predicate is {@code false}, then the {@code other}</span>
</span><span id="__span-41-27"><a id="__codelineno-41-27" name="__codelineno-41-27" href="#__codelineno-41-27"></a><span class="cm">     * predicate is not evaluated.</span>
</span><span id="__span-41-28"><a id="__codelineno-41-28" name="__codelineno-41-28" href="#__codelineno-41-28"></a><span class="cm">     *</span>
</span><span id="__span-41-29"><a id="__codelineno-41-29" name="__codelineno-41-29" href="#__codelineno-41-29"></a><span class="cm">     * &lt;p&gt;Any exceptions thrown during evaluation of either predicate are relayed</span>
</span><span id="__span-41-30"><a id="__codelineno-41-30" name="__codelineno-41-30" href="#__codelineno-41-30"></a><span class="cm">     * to the caller; if evaluation of this predicate throws an exception, the</span>
</span><span id="__span-41-31"><a id="__codelineno-41-31" name="__codelineno-41-31" href="#__codelineno-41-31"></a><span class="cm">     * {@code other} predicate will not be evaluated.</span>
</span><span id="__span-41-32"><a id="__codelineno-41-32" name="__codelineno-41-32" href="#__codelineno-41-32"></a><span class="cm">     *</span>
</span><span id="__span-41-33"><a id="__codelineno-41-33" name="__codelineno-41-33" href="#__codelineno-41-33"></a><span class="cm">     * @param other a predicate that will be logically-ANDed with this</span>
</span><span id="__span-41-34"><a id="__codelineno-41-34" name="__codelineno-41-34" href="#__codelineno-41-34"></a><span class="cm">     *              predicate</span>
</span><span id="__span-41-35"><a id="__codelineno-41-35" name="__codelineno-41-35" href="#__codelineno-41-35"></a><span class="cm">     * @return a composed predicate that represents the short-circuiting logical</span>
</span><span id="__span-41-36"><a id="__codelineno-41-36" name="__codelineno-41-36" href="#__codelineno-41-36"></a><span class="cm">     * AND of this predicate and the {@code other} predicate</span>
</span><span id="__span-41-37"><a id="__codelineno-41-37" name="__codelineno-41-37" href="#__codelineno-41-37"></a><span class="cm">     * @throws NullPointerException if other is null</span>
</span><span id="__span-41-38"><a id="__codelineno-41-38" name="__codelineno-41-38" href="#__codelineno-41-38"></a><span class="cm">     */</span>
</span><span id="__span-41-39"><a id="__codelineno-41-39" name="__codelineno-41-39" href="#__codelineno-41-39"></a><span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="n">Predicate</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">and</span><span class="p">(</span><span class="n">Predicate</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">super</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">other</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-41-40"><a id="__codelineno-41-40" name="__codelineno-41-40" href="#__codelineno-41-40"></a><span class="w">        </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">other</span><span class="p">);</span>
</span><span id="__span-41-41"><a id="__codelineno-41-41" name="__codelineno-41-41" href="#__codelineno-41-41"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">test</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">other</span><span class="p">.</span><span class="na">test</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
</span><span id="__span-41-42"><a id="__codelineno-41-42" name="__codelineno-41-42" href="#__codelineno-41-42"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-41-43"><a id="__codelineno-41-43" name="__codelineno-41-43" href="#__codelineno-41-43"></a>
</span><span id="__span-41-44"><a id="__codelineno-41-44" name="__codelineno-41-44" href="#__codelineno-41-44"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-41-45"><a id="__codelineno-41-45" name="__codelineno-41-45" href="#__codelineno-41-45"></a><span class="cm">     * Returns a predicate that represents the logical negation of this</span>
</span><span id="__span-41-46"><a id="__codelineno-41-46" name="__codelineno-41-46" href="#__codelineno-41-46"></a><span class="cm">     * predicate.</span>
</span><span id="__span-41-47"><a id="__codelineno-41-47" name="__codelineno-41-47" href="#__codelineno-41-47"></a><span class="cm">     *</span>
</span><span id="__span-41-48"><a id="__codelineno-41-48" name="__codelineno-41-48" href="#__codelineno-41-48"></a><span class="cm">     * @return a predicate that represents the logical negation of this</span>
</span><span id="__span-41-49"><a id="__codelineno-41-49" name="__codelineno-41-49" href="#__codelineno-41-49"></a><span class="cm">     * predicate</span>
</span><span id="__span-41-50"><a id="__codelineno-41-50" name="__codelineno-41-50" href="#__codelineno-41-50"></a><span class="cm">     */</span>
</span><span id="__span-41-51"><a id="__codelineno-41-51" name="__codelineno-41-51" href="#__codelineno-41-51"></a><span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="n">Predicate</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">negate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-41-52"><a id="__codelineno-41-52" name="__codelineno-41-52" href="#__codelineno-41-52"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">!</span><span class="n">test</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
</span><span id="__span-41-53"><a id="__codelineno-41-53" name="__codelineno-41-53" href="#__codelineno-41-53"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-41-54"><a id="__codelineno-41-54" name="__codelineno-41-54" href="#__codelineno-41-54"></a>
</span><span id="__span-41-55"><a id="__codelineno-41-55" name="__codelineno-41-55" href="#__codelineno-41-55"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-41-56"><a id="__codelineno-41-56" name="__codelineno-41-56" href="#__codelineno-41-56"></a><span class="cm">     * Returns a composed predicate that represents a short-circuiting logical</span>
</span><span id="__span-41-57"><a id="__codelineno-41-57" name="__codelineno-41-57" href="#__codelineno-41-57"></a><span class="cm">     * OR of this predicate and another.  When evaluating the composed</span>
</span><span id="__span-41-58"><a id="__codelineno-41-58" name="__codelineno-41-58" href="#__codelineno-41-58"></a><span class="cm">     * predicate, if this predicate is {@code true}, then the {@code other}</span>
</span><span id="__span-41-59"><a id="__codelineno-41-59" name="__codelineno-41-59" href="#__codelineno-41-59"></a><span class="cm">     * predicate is not evaluated.</span>
</span><span id="__span-41-60"><a id="__codelineno-41-60" name="__codelineno-41-60" href="#__codelineno-41-60"></a><span class="cm">     *</span>
</span><span id="__span-41-61"><a id="__codelineno-41-61" name="__codelineno-41-61" href="#__codelineno-41-61"></a><span class="cm">     * &lt;p&gt;Any exceptions thrown during evaluation of either predicate are relayed</span>
</span><span id="__span-41-62"><a id="__codelineno-41-62" name="__codelineno-41-62" href="#__codelineno-41-62"></a><span class="cm">     * to the caller; if evaluation of this predicate throws an exception, the</span>
</span><span id="__span-41-63"><a id="__codelineno-41-63" name="__codelineno-41-63" href="#__codelineno-41-63"></a><span class="cm">     * {@code other} predicate will not be evaluated.</span>
</span><span id="__span-41-64"><a id="__codelineno-41-64" name="__codelineno-41-64" href="#__codelineno-41-64"></a><span class="cm">     *</span>
</span><span id="__span-41-65"><a id="__codelineno-41-65" name="__codelineno-41-65" href="#__codelineno-41-65"></a><span class="cm">     * @param other a predicate that will be logically-ORed with this</span>
</span><span id="__span-41-66"><a id="__codelineno-41-66" name="__codelineno-41-66" href="#__codelineno-41-66"></a><span class="cm">     *              predicate</span>
</span><span id="__span-41-67"><a id="__codelineno-41-67" name="__codelineno-41-67" href="#__codelineno-41-67"></a><span class="cm">     * @return a composed predicate that represents the short-circuiting logical</span>
</span><span id="__span-41-68"><a id="__codelineno-41-68" name="__codelineno-41-68" href="#__codelineno-41-68"></a><span class="cm">     * OR of this predicate and the {@code other} predicate</span>
</span><span id="__span-41-69"><a id="__codelineno-41-69" name="__codelineno-41-69" href="#__codelineno-41-69"></a><span class="cm">     * @throws NullPointerException if other is null</span>
</span><span id="__span-41-70"><a id="__codelineno-41-70" name="__codelineno-41-70" href="#__codelineno-41-70"></a><span class="cm">     */</span>
</span><span id="__span-41-71"><a id="__codelineno-41-71" name="__codelineno-41-71" href="#__codelineno-41-71"></a><span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="n">Predicate</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">or</span><span class="p">(</span><span class="n">Predicate</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">super</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">other</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-41-72"><a id="__codelineno-41-72" name="__codelineno-41-72" href="#__codelineno-41-72"></a><span class="w">        </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">other</span><span class="p">);</span>
</span><span id="__span-41-73"><a id="__codelineno-41-73" name="__codelineno-41-73" href="#__codelineno-41-73"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">test</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">other</span><span class="p">.</span><span class="na">test</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
</span><span id="__span-41-74"><a id="__codelineno-41-74" name="__codelineno-41-74" href="#__codelineno-41-74"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-41-75"><a id="__codelineno-41-75" name="__codelineno-41-75" href="#__codelineno-41-75"></a>
</span><span id="__span-41-76"><a id="__codelineno-41-76" name="__codelineno-41-76" href="#__codelineno-41-76"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-41-77"><a id="__codelineno-41-77" name="__codelineno-41-77" href="#__codelineno-41-77"></a><span class="cm">     * Returns a predicate that tests if two arguments are equal according</span>
</span><span id="__span-41-78"><a id="__codelineno-41-78" name="__codelineno-41-78" href="#__codelineno-41-78"></a><span class="cm">     * to {@link Objects#equals(Object, Object)}.</span>
</span><span id="__span-41-79"><a id="__codelineno-41-79" name="__codelineno-41-79" href="#__codelineno-41-79"></a><span class="cm">     *</span>
</span><span id="__span-41-80"><a id="__codelineno-41-80" name="__codelineno-41-80" href="#__codelineno-41-80"></a><span class="cm">     * @param &lt;T&gt; the type of arguments to the predicate</span>
</span><span id="__span-41-81"><a id="__codelineno-41-81" name="__codelineno-41-81" href="#__codelineno-41-81"></a><span class="cm">     * @param targetRef the object reference with which to compare for equality,</span>
</span><span id="__span-41-82"><a id="__codelineno-41-82" name="__codelineno-41-82" href="#__codelineno-41-82"></a><span class="cm">     *               which may be {@code null}</span>
</span><span id="__span-41-83"><a id="__codelineno-41-83" name="__codelineno-41-83" href="#__codelineno-41-83"></a><span class="cm">     * @return a predicate that tests if two arguments are equal according</span>
</span><span id="__span-41-84"><a id="__codelineno-41-84" name="__codelineno-41-84" href="#__codelineno-41-84"></a><span class="cm">     * to {@link Objects#equals(Object, Object)}</span>
</span><span id="__span-41-85"><a id="__codelineno-41-85" name="__codelineno-41-85" href="#__codelineno-41-85"></a><span class="cm">     */</span>
</span><span id="__span-41-86"><a id="__codelineno-41-86" name="__codelineno-41-86" href="#__codelineno-41-86"></a><span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Predicate</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">isEqual</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">targetRef</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-41-87"><a id="__codelineno-41-87" name="__codelineno-41-87" href="#__codelineno-41-87"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="kc">null</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">targetRef</span><span class="p">)</span>
</span><span id="__span-41-88"><a id="__codelineno-41-88" name="__codelineno-41-88" href="#__codelineno-41-88"></a><span class="w">                </span><span class="o">?</span><span class="w"> </span><span class="n">Objects</span><span class="p">::</span><span class="n">isNull</span>
</span><span id="__span-41-89"><a id="__codelineno-41-89" name="__codelineno-41-89" href="#__codelineno-41-89"></a><span class="w">                </span><span class="p">:</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">targetRef</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">object</span><span class="p">);</span>
</span><span id="__span-41-90"><a id="__codelineno-41-90" name="__codelineno-41-90" href="#__codelineno-41-90"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-41-91"><a id="__codelineno-41-91" name="__codelineno-41-91" href="#__codelineno-41-91"></a><span class="p">}</span>
</span></code></pre></div> <p><strong>æŠ½è±¡æ–¹æ³•ï¼š</strong> <code>boolean test(T t)</code></p> <p>ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</p> <p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="n">Predicate</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">predicate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="kt">boolean</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">predicate</span><span class="p">.</span><span class="na">test</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">test</span><span class="p">);</span>
</span></code></pre></div> <p><strong>è¾“å‡ºï¼š</strong></p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>true
</span></code></pre></div> <p>å½“ <code>predicate</code> å‡½æ•°è°ƒç”¨ <code>test</code> æ–¹æ³•çš„æ—¶å€™ï¼Œå°±ä¼šæ‰§è¡Œæ‹¿ <code>test</code> æ–¹æ³•çš„å‚æ•°è¿›è¡Œ <code>t -&gt; t &gt; 0</code> çš„æ¡ä»¶åˆ¤æ–­ï¼Œ<code>1</code> è‚¯å®šæ˜¯å¤§äº <code>0</code> çš„ï¼Œæœ€ç»ˆç»“æœä¸º <code>true</code>ã€‚</p> <p><strong>é»˜è®¤æ–¹æ³•ï¼š</strong><code>and(Predicate&lt;? super T&gt; other)</code></p> <p>ç›¸å½“äºé€»è¾‘è¿ç®—ç¬¦ä¸­çš„ <code>&amp;&amp;</code>ï¼Œå½“ä¸¤ä¸ª Predicate å‡½æ•°çš„è¿”å›ç»“æœéƒ½ä¸º <code>true</code> æ—¶æ‰è¿”å› <code>true</code>ã€‚</p> <p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">predicate1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">length</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">predicate2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Objects</span><span class="p">::</span><span class="n">nonNull</span><span class="p">;</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="kt">boolean</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">predicate1</span><span class="p">.</span><span class="na">and</span><span class="p">(</span><span class="n">predicate2</span><span class="p">).</span><span class="na">test</span><span class="p">(</span><span class="s">"&amp;&amp;æµ‹è¯•"</span><span class="p">);</span>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">test</span><span class="p">);</span>
</span></code></pre></div> <p><strong>è¾“å‡ºï¼š</strong></p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>true
</span></code></pre></div> <p><strong>é»˜è®¤æ–¹æ³•ï¼š</strong><code>or(Predicate&lt;? super T&gt; other)</code> </p> <p>ç›¸å½“äºé€»è¾‘è¿ç®—ç¬¦ä¸­çš„ <code>||</code>ï¼Œå½“ä¸¤ä¸ª Predicate å‡½æ•°çš„è¿”å›ç»“æœæœ‰ä¸€ä¸ªä¸º <code>true</code> åˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚</p> <p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">predicate1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">predicate2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Objects</span><span class="p">::</span><span class="n">nonNull</span><span class="p">;</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="kt">boolean</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">predicate1</span><span class="p">.</span><span class="na">and</span><span class="p">(</span><span class="n">predicate2</span><span class="p">).</span><span class="na">test</span><span class="p">(</span><span class="s">"||æµ‹è¯•"</span><span class="p">);</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">test</span><span class="p">);</span>
</span></code></pre></div> <p><strong>è¾“å‡ºï¼š</strong></p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>false
</span></code></pre></div> <p><strong>é»˜è®¤æ–¹æ³•ï¼š</strong><code>negate()</code></p> <p>è¿™ä¸ªæ–¹æ³•çš„æ„æ€å°±æ˜¯å–åã€‚</p> <p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">predicate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">length</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="kt">boolean</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">predicate</span><span class="p">.</span><span class="na">negate</span><span class="p">().</span><span class="na">test</span><span class="p">(</span><span class="s">"å–å"</span><span class="p">);</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
</span></code></pre></div> <p><strong>è¾“å‡ºï¼š</strong></p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>false
</span></code></pre></div> <p>å¾ˆæ˜æ˜¾æ­£å¸¸æ‰§è¡Œ <code>test</code> æ–¹æ³•çš„è¯åº”è¯¥ä¸º <code>true</code>ï¼Œä½†æ˜¯è°ƒç”¨ <code>negate</code> æ–¹æ³•åå°±è¿”å›ä¸º <code>false</code> äº†ã€‚ </p> <p><strong>é™æ€æ–¹æ³•ï¼š</strong><code>isEqual(Object targetRef)</code></p> <p>å¯¹å½“å‰æ“ä½œè¿›è¡Œ "=" æ“ä½œï¼Œå³å–ç­‰æ“ä½œï¼Œå¯ä»¥ç†è§£ä¸º A == Bã€‚</p> <p><strong>ä½¿ç”¨æ–¹å¼:</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="kt">boolean</span><span class="w"> </span><span class="n">test1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Predicate</span><span class="p">.</span><span class="na">isEqual</span><span class="p">(</span><span class="s">"test"</span><span class="p">).</span><span class="na">test</span><span class="p">(</span><span class="s">"test"</span><span class="p">);</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="kt">boolean</span><span class="w"> </span><span class="n">test2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Predicate</span><span class="p">.</span><span class="na">isEqual</span><span class="p">(</span><span class="s">"test"</span><span class="p">).</span><span class="na">test</span><span class="p">(</span><span class="s">"equal"</span><span class="p">);</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">test1</span><span class="p">);</span>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">test2</span><span class="p">);</span>
</span></code></pre></div> <p><strong>è¾“å‡ºï¼š</strong></p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>true
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a>false
</span></code></pre></div> <h4 id="415operator">4.1.5ã€Operator<a class="headerlink" href="#415operator" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p>å¯ä»¥ç®€å•ç†è§£æˆç®—æœ¯ä¸­çš„å„ç§è¿ç®—æ“ä½œï¼Œå½“ç„¶ä¸ä»…ä»…æ˜¯è¿ç®—è¿™ä¹ˆç®€å•ï¼Œå› ä¸ºå®ƒåªå®šä¹‰äº†è¿ç®—è¿™ä¸ªå®šä¹‰ï¼Œä½†è‡³äºè¿ç®—æˆä»€ä¹ˆæ ·ä½ è¯´äº†ç®—ã€‚ç”±äºæ²¡æœ‰æœ€åŸºç¡€çš„ Operatorï¼Œè¿™é‡Œå°†é€šè¿‡ BinaryOperatorã€IntBinaryOperator æ¥ç†è§£ Operator å‡½æ•°å¼æ¥å£ï¼Œå…ˆä»ç®€å•çš„ IntBinaryOperator å¼€å§‹ã€‚</p> <p>**IntBinaryOperator **</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="cm">/**</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="cm"> * Represents an operation upon two {@code int}-valued operands and producing an</span>
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="cm"> * {@code int}-valued result.   This is the primitive type specialization of</span>
</span><span id="__span-52-4"><a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="cm"> * {@link BinaryOperator} for {@code int}.</span>
</span><span id="__span-52-5"><a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a><span class="cm"> *</span>
</span><span id="__span-52-6"><a id="__codelineno-52-6" name="__codelineno-52-6" href="#__codelineno-52-6"></a><span class="cm"> * &lt;p&gt;This is a &lt;a href="package-summary.html"&gt;functional interface&lt;/a&gt;</span>
</span><span id="__span-52-7"><a id="__codelineno-52-7" name="__codelineno-52-7" href="#__codelineno-52-7"></a><span class="cm"> * whose functional method is {@link #applyAsInt(int, int)}.</span>
</span><span id="__span-52-8"><a id="__codelineno-52-8" name="__codelineno-52-8" href="#__codelineno-52-8"></a><span class="cm"> *</span>
</span><span id="__span-52-9"><a id="__codelineno-52-9" name="__codelineno-52-9" href="#__codelineno-52-9"></a><span class="cm"> * @see BinaryOperator</span>
</span><span id="__span-52-10"><a id="__codelineno-52-10" name="__codelineno-52-10" href="#__codelineno-52-10"></a><span class="cm"> * @see IntUnaryOperator</span>
</span><span id="__span-52-11"><a id="__codelineno-52-11" name="__codelineno-52-11" href="#__codelineno-52-11"></a><span class="cm"> * @since 1.8</span>
</span><span id="__span-52-12"><a id="__codelineno-52-12" name="__codelineno-52-12" href="#__codelineno-52-12"></a><span class="cm"> */</span>
</span><span id="__span-52-13"><a id="__codelineno-52-13" name="__codelineno-52-13" href="#__codelineno-52-13"></a><span class="nd">@FunctionalInterface</span>
</span><span id="__span-52-14"><a id="__codelineno-52-14" name="__codelineno-52-14" href="#__codelineno-52-14"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">IntBinaryOperator</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-52-15"><a id="__codelineno-52-15" name="__codelineno-52-15" href="#__codelineno-52-15"></a>
</span><span id="__span-52-16"><a id="__codelineno-52-16" name="__codelineno-52-16" href="#__codelineno-52-16"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-52-17"><a id="__codelineno-52-17" name="__codelineno-52-17" href="#__codelineno-52-17"></a><span class="cm">     * Applies this operator to the given operands.</span>
</span><span id="__span-52-18"><a id="__codelineno-52-18" name="__codelineno-52-18" href="#__codelineno-52-18"></a><span class="cm">     *</span>
</span><span id="__span-52-19"><a id="__codelineno-52-19" name="__codelineno-52-19" href="#__codelineno-52-19"></a><span class="cm">     * @param left the first operand</span>
</span><span id="__span-52-20"><a id="__codelineno-52-20" name="__codelineno-52-20" href="#__codelineno-52-20"></a><span class="cm">     * @param right the second operand</span>
</span><span id="__span-52-21"><a id="__codelineno-52-21" name="__codelineno-52-21" href="#__codelineno-52-21"></a><span class="cm">     * @return the operator result</span>
</span><span id="__span-52-22"><a id="__codelineno-52-22" name="__codelineno-52-22" href="#__codelineno-52-22"></a><span class="cm">     */</span>
</span><span id="__span-52-23"><a id="__codelineno-52-23" name="__codelineno-52-23" href="#__codelineno-52-23"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">applyAsInt</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">right</span><span class="p">);</span>
</span><span id="__span-52-24"><a id="__codelineno-52-24" name="__codelineno-52-24" href="#__codelineno-52-24"></a><span class="p">}</span>
</span></code></pre></div> <p>IntBinaryOperator æ¥å£å†…åªæœ‰ä¸€ä¸ª <code>applyAsInt</code> æ–¹æ³•ï¼Œå…¶æ¥æ”¶ä¸¤ä¸ª int ç±»å‹çš„å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª int ç±»å‹çš„ç»“æœï¼Œå…¶å®è¿™ä¸ªè·Ÿ Function æ¥å£çš„ <code>apply</code> æœ‰ç‚¹åƒï¼Œä½†æ˜¯è¿™é‡Œé™å®šäº†ï¼Œåªèƒ½æ˜¯ int ç±»å‹ã€‚</p> <p><strong>BinaryOperator</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="cm">/**</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="cm"> * Represents an operation upon two operands of the same type, producing a result</span>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a><span class="cm"> * of the same type as the operands.  This is a specialization of</span>
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a><span class="cm"> * {@link BiFunction} for the case where the operands and the result are all of</span>
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a><span class="cm"> * the same type.</span>
</span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a><span class="cm"> *</span>
</span><span id="__span-53-7"><a id="__codelineno-53-7" name="__codelineno-53-7" href="#__codelineno-53-7"></a><span class="cm"> * &lt;p&gt;This is a &lt;a href="package-summary.html"&gt;functional interface&lt;/a&gt;</span>
</span><span id="__span-53-8"><a id="__codelineno-53-8" name="__codelineno-53-8" href="#__codelineno-53-8"></a><span class="cm"> * whose functional method is {@link #apply(Object, Object)}.</span>
</span><span id="__span-53-9"><a id="__codelineno-53-9" name="__codelineno-53-9" href="#__codelineno-53-9"></a><span class="cm"> *</span>
</span><span id="__span-53-10"><a id="__codelineno-53-10" name="__codelineno-53-10" href="#__codelineno-53-10"></a><span class="cm"> * @param &lt;T&gt; the type of the operands and result of the operator</span>
</span><span id="__span-53-11"><a id="__codelineno-53-11" name="__codelineno-53-11" href="#__codelineno-53-11"></a><span class="cm"> *</span>
</span><span id="__span-53-12"><a id="__codelineno-53-12" name="__codelineno-53-12" href="#__codelineno-53-12"></a><span class="cm"> * @see BiFunction</span>
</span><span id="__span-53-13"><a id="__codelineno-53-13" name="__codelineno-53-13" href="#__codelineno-53-13"></a><span class="cm"> * @see UnaryOperator</span>
</span><span id="__span-53-14"><a id="__codelineno-53-14" name="__codelineno-53-14" href="#__codelineno-53-14"></a><span class="cm"> * @since 1.8</span>
</span><span id="__span-53-15"><a id="__codelineno-53-15" name="__codelineno-53-15" href="#__codelineno-53-15"></a><span class="cm"> */</span>
</span><span id="__span-53-16"><a id="__codelineno-53-16" name="__codelineno-53-16" href="#__codelineno-53-16"></a><span class="nd">@FunctionalInterface</span>
</span><span id="__span-53-17"><a id="__codelineno-53-17" name="__codelineno-53-17" href="#__codelineno-53-17"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">BinaryOperator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">BiFunction</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">T</span><span class="p">,</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-18"><a id="__codelineno-53-18" name="__codelineno-53-18" href="#__codelineno-53-18"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-53-19"><a id="__codelineno-53-19" name="__codelineno-53-19" href="#__codelineno-53-19"></a><span class="cm">     * Returns a {@link BinaryOperator} which returns the lesser of two elements</span>
</span><span id="__span-53-20"><a id="__codelineno-53-20" name="__codelineno-53-20" href="#__codelineno-53-20"></a><span class="cm">     * according to the specified {@code Comparator}.</span>
</span><span id="__span-53-21"><a id="__codelineno-53-21" name="__codelineno-53-21" href="#__codelineno-53-21"></a><span class="cm">     *</span>
</span><span id="__span-53-22"><a id="__codelineno-53-22" name="__codelineno-53-22" href="#__codelineno-53-22"></a><span class="cm">     * @param &lt;T&gt; the type of the input arguments of the comparator</span>
</span><span id="__span-53-23"><a id="__codelineno-53-23" name="__codelineno-53-23" href="#__codelineno-53-23"></a><span class="cm">     * @param comparator a {@code Comparator} for comparing the two values</span>
</span><span id="__span-53-24"><a id="__codelineno-53-24" name="__codelineno-53-24" href="#__codelineno-53-24"></a><span class="cm">     * @return a {@code BinaryOperator} which returns the lesser of its operands,</span>
</span><span id="__span-53-25"><a id="__codelineno-53-25" name="__codelineno-53-25" href="#__codelineno-53-25"></a><span class="cm">     *         according to the supplied {@code Comparator}</span>
</span><span id="__span-53-26"><a id="__codelineno-53-26" name="__codelineno-53-26" href="#__codelineno-53-26"></a><span class="cm">     * @throws NullPointerException if the argument is null</span>
</span><span id="__span-53-27"><a id="__codelineno-53-27" name="__codelineno-53-27" href="#__codelineno-53-27"></a><span class="cm">     */</span>
</span><span id="__span-53-28"><a id="__codelineno-53-28" name="__codelineno-53-28" href="#__codelineno-53-28"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">BinaryOperator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">minBy</span><span class="p">(</span><span class="n">Comparator</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">super</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">comparator</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-29"><a id="__codelineno-53-29" name="__codelineno-53-29" href="#__codelineno-53-29"></a><span class="w">        </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">comparator</span><span class="p">);</span>
</span><span id="__span-53-30"><a id="__codelineno-53-30" name="__codelineno-53-30" href="#__codelineno-53-30"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">comparator</span><span class="p">.</span><span class="na">compare</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-53-31"><a id="__codelineno-53-31" name="__codelineno-53-31" href="#__codelineno-53-31"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-53-32"><a id="__codelineno-53-32" name="__codelineno-53-32" href="#__codelineno-53-32"></a>
</span><span id="__span-53-33"><a id="__codelineno-53-33" name="__codelineno-53-33" href="#__codelineno-53-33"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-53-34"><a id="__codelineno-53-34" name="__codelineno-53-34" href="#__codelineno-53-34"></a><span class="cm">     * Returns a {@link BinaryOperator} which returns the greater of two elements</span>
</span><span id="__span-53-35"><a id="__codelineno-53-35" name="__codelineno-53-35" href="#__codelineno-53-35"></a><span class="cm">     * according to the specified {@code Comparator}.</span>
</span><span id="__span-53-36"><a id="__codelineno-53-36" name="__codelineno-53-36" href="#__codelineno-53-36"></a><span class="cm">     *</span>
</span><span id="__span-53-37"><a id="__codelineno-53-37" name="__codelineno-53-37" href="#__codelineno-53-37"></a><span class="cm">     * @param &lt;T&gt; the type of the input arguments of the comparator</span>
</span><span id="__span-53-38"><a id="__codelineno-53-38" name="__codelineno-53-38" href="#__codelineno-53-38"></a><span class="cm">     * @param comparator a {@code Comparator} for comparing the two values</span>
</span><span id="__span-53-39"><a id="__codelineno-53-39" name="__codelineno-53-39" href="#__codelineno-53-39"></a><span class="cm">     * @return a {@code BinaryOperator} which returns the greater of its operands,</span>
</span><span id="__span-53-40"><a id="__codelineno-53-40" name="__codelineno-53-40" href="#__codelineno-53-40"></a><span class="cm">     *         according to the supplied {@code Comparator}</span>
</span><span id="__span-53-41"><a id="__codelineno-53-41" name="__codelineno-53-41" href="#__codelineno-53-41"></a><span class="cm">     * @throws NullPointerException if the argument is null</span>
</span><span id="__span-53-42"><a id="__codelineno-53-42" name="__codelineno-53-42" href="#__codelineno-53-42"></a><span class="cm">     */</span>
</span><span id="__span-53-43"><a id="__codelineno-53-43" name="__codelineno-53-43" href="#__codelineno-53-43"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">BinaryOperator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">maxBy</span><span class="p">(</span><span class="n">Comparator</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">super</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">comparator</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-44"><a id="__codelineno-53-44" name="__codelineno-53-44" href="#__codelineno-53-44"></a><span class="w">        </span><span class="n">Objects</span><span class="p">.</span><span class="na">requireNonNull</span><span class="p">(</span><span class="n">comparator</span><span class="p">);</span>
</span><span id="__span-53-45"><a id="__codelineno-53-45" name="__codelineno-53-45" href="#__codelineno-53-45"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">comparator</span><span class="p">.</span><span class="na">compare</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-53-46"><a id="__codelineno-53-46" name="__codelineno-53-46" href="#__codelineno-53-46"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-53-47"><a id="__codelineno-53-47" name="__codelineno-53-47" href="#__codelineno-53-47"></a><span class="p">}</span>
</span></code></pre></div> <p>BinaryOperator æ˜¯ BiFunction ç”Ÿçš„ï¼Œè€Œ IntBinaryOperator æ˜¯ä»çŸ³å¤´é‡Œè¹¦å‡ºæ¥çš„ï¼ŒBinaryOperator è‡ªèº«å®šä¹‰äº†<code>minBy</code>ã€<code>maxBy</code> é»˜è®¤æ–¹æ³•ï¼Œå¹¶ä¸”å‚æ•°éƒ½æ˜¯ Comparatorï¼Œå°±æ˜¯æ ¹æ®ä¼ å…¥çš„æ¯”è¾ƒå™¨çš„æ¯”è¾ƒè§„åˆ™æ‰¾å‡ºæœ€å°æœ€å¤§çš„æ•°æ®ã€‚</p> <h3 id="42function-åŒ…ä¸‹æ‰€æœ‰æ¥å£">4.2ã€function åŒ…ä¸‹æ‰€æœ‰æ¥å£<a class="headerlink" href="#42function-åŒ…ä¸‹æ‰€æœ‰æ¥å£" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>java.util.function å®ƒåŒ…å«äº†å¾ˆå¤šç±»ï¼Œç”¨æ¥æ”¯æŒ Java çš„å‡½æ•°å¼ç¼–ç¨‹ï¼Œè¯¥åŒ…ä¸­çš„å‡½æ•°å¼æ¥å£æœ‰ï¼š</p> <table> <thead> <tr> <th>æ¥å£</th> <th>æè¿°</th> </tr> </thead> <tbody> <tr> <td><code>BiConsumer&lt;T,U&gt;</code></td> <td>æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œæ— è¿”å›å€¼ã€‚</td> </tr> <tr> <td><code>BiFunction&lt;T,U,R&gt;</code></td> <td>æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç»“æœã€‚</td> </tr> <tr> <td><code>BinaryOperator&lt;T&gt;</code></td> <td>ä»£è¡¨äº†ä¸€ä¸ªä½œç”¨äºäºä¸¤ä¸ªåŒç±»å‹æ“ä½œç¬¦çš„æ“ä½œï¼Œå¹¶ä¸”è¿”å›äº†æ“ä½œç¬¦åŒç±»å‹çš„ç»“æœã€‚</td> </tr> <tr> <td><code>BiPredicate&lt;T,U&gt;</code></td> <td>æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª boolean ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>BooleanSupplier</code></td> <td>æ— å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª boolean ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>Consumer&lt;T&gt;</code></td> <td>æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œæ— è¿”å›å€¼ã€‚</td> </tr> <tr> <td><code>DoubleBinaryOperator</code></td> <td>ä»£è¡¨äº†ä½œç”¨äºä¸¤ä¸ª double å€¼æ“ä½œç¬¦çš„æ“ä½œï¼Œå¹¶ä¸”è¿”å›äº†ä¸€ä¸ª double å€¼çš„ç»“æœã€‚</td> </tr> <tr> <td><code>DoubleConsumer</code></td> <td>æ¥å—ä¸€ä¸ª double ç±»å‹å‚æ•°ï¼Œæ— è¿”å›å€¼ã€‚</td> </tr> <tr> <td><code>DoubleFunction&lt;R&gt;</code></td> <td>æ¥å—ä¸€ä¸ª double ç±»å‹å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç»“æœã€‚</td> </tr> <tr> <td><code>DoublePredicate</code></td> <td>æ¥å—ä¸€ä¸ª double ç±»å‹å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª boolean ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>DoubleSupplier</code></td> <td>æ— å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª double ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>DoubleToIntFunction</code></td> <td>æ¥å—ä¸€ä¸ª double ç±»å‹å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª int ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>DoubleToLongFunction</code></td> <td>æ¥å—ä¸€ä¸ª double ç±»å‹å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª long ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>DoubleUnaryOperator</code></td> <td>æ¥å—ä¸€ä¸ªå‚æ•°åŒä¸ºç±»å‹ doubleï¼Œè¿”å›å€¼ç±»å‹ä¹Ÿä¸º double ã€‚</td> </tr> <tr> <td><code>Function&lt;T,R&gt;</code></td> <td>æ¥å—ä¸€ä¸ªè¾“å…¥å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç»“æœã€‚</td> </tr> <tr> <td><code>IntBinaryOperator</code></td> <td>æ¥å—ä¸¤ä¸ªå‚æ•°åŒä¸ºç±»å‹ intï¼Œè¿”å›å€¼ç±»å‹ä¹Ÿä¸º int ã€‚</td> </tr> <tr> <td><code>IntConsumer</code></td> <td>æ¥å—ä¸€ä¸ª int ç±»å‹çš„å‚æ•°ï¼Œæ— è¿”å›å€¼ã€‚</td> </tr> <tr> <td><code>IntFunction&lt;R&gt;</code></td> <td>æ¥å—ä¸€ä¸ª int ç±»å‹å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç»“æœ ã€‚</td> </tr> <tr> <td><code>IntPredicate</code></td> <td>æ¥å—ä¸€ä¸ª int ç±»å‹å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª boolean ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>IntSupplier</code></td> <td>æ— å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª int ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>IntToDoubleFunction</code></td> <td>æ¥å—ä¸€ä¸ª int ç±»å‹å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª double ç±»å‹ç»“æœ ã€‚</td> </tr> <tr> <td><code>IntToLongFunction</code></td> <td>æ¥å—ä¸€ä¸ª int ç±»å‹å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª long ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>IntUnaryOperator</code></td> <td>æ¥å—ä¸€ä¸ªå‚æ•°åŒä¸ºç±»å‹ intï¼Œè¿”å›å€¼ç±»å‹ä¹Ÿä¸º int ã€‚</td> </tr> <tr> <td><code>LongBinaryOperator</code></td> <td>æ¥å—ä¸¤ä¸ªå‚æ•°åŒä¸ºç±»å‹ longï¼Œè¿”å›å€¼ç±»å‹ä¹Ÿä¸º longã€‚</td> </tr> <tr> <td><code>LongConsumer</code></td> <td>æ¥å—ä¸€ä¸ª long ç±»å‹çš„å‚æ•°ï¼Œä¸è¿”å›ç»“æœã€‚</td> </tr> <tr> <td><code>LongFunction&lt;R&gt;</code></td> <td>æ¥å—ä¸€ä¸ª long ç±»å‹å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç»“æœã€‚</td> </tr> <tr> <td><code>LongPredicate</code></td> <td>æ¥å—ä¸€ä¸ª long ç±»å‹å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª boolean ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>LongSupplier</code></td> <td>æ— å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª long ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>LongToDoubleFunction</code></td> <td>æ¥å—ä¸€ä¸ª long ç±»å‹å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª double ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>LongToIntFunction</code></td> <td>æ¥å—ä¸€ä¸ª long ç±»å‹å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª int ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>LongUnaryOperator</code></td> <td>æ¥å—ä¸€ä¸ªå‚æ•°åŒä¸ºç±»å‹ longï¼Œè¿”å›å€¼ç±»å‹ä¹Ÿä¸º longã€‚</td> </tr> <tr> <td><code>ObjDoubleConsumer&lt;T&gt;</code></td> <td>æ¥å—ä¸€ä¸ª object ç±»å‹å’Œä¸€ä¸ª double ç±»å‹çš„å‚æ•°ï¼Œæ— è¿”å›å€¼ã€‚</td> </tr> <tr> <td><code>ObjIntConsumer&lt;T&gt;</code></td> <td>æ¥å—ä¸€ä¸ª object ç±»å‹å’Œä¸€ä¸ª int ç±»å‹çš„å‚æ•°ï¼Œæ— è¿”å›å€¼ã€‚</td> </tr> <tr> <td><code>ObjLongConsumer&lt;T&gt;</code></td> <td>æ¥å—ä¸€ä¸ª object ç±»å‹å’Œä¸€ä¸ª long ç±»å‹çš„å‚æ•°ï¼Œæ— è¿”å›å€¼ã€‚</td> </tr> <tr> <td><code>Predicate&lt;T&gt;</code></td> <td>æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª boolean ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>Supplier&lt;T&gt;</code></td> <td>æ— å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç»“æœã€‚</td> </tr> <tr> <td><code>ToDoubleBiFunction&lt;T,U&gt;</code></td> <td>æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª double ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>ToDoubleFunction&lt;T&gt;</code></td> <td>æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª double ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>ToIntBiFunction&lt;T,U&gt;</code></td> <td>æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª int ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>ToIntFunction&lt;T&gt;</code></td> <td>æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª int ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>ToLongBiFunction&lt;T,U&gt;</code></td> <td>æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª long ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>ToLongFunction&lt;T&gt;</code></td> <td>æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª long ç±»å‹ç»“æœã€‚</td> </tr> <tr> <td><code>UnaryOperator&lt;T&gt;</code></td> <td>æ¥å—ä¸€ä¸ªå‚æ•°ä¸ºç±»å‹ Tï¼Œè¿”å›å€¼ç±»å‹ä¹Ÿä¸º Tã€‚</td> </tr> </tbody> </table> <h2 id="5æ–°çš„æ—¥æœŸå’Œæ—¶é—´-api">5ã€æ–°çš„æ—¥æœŸå’Œæ—¶é—´ API<a class="headerlink" href="#5æ–°çš„æ—¥æœŸå’Œæ—¶é—´-api" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>åœ¨ Java 8 ä¹‹å‰ï¼Œæ‰€æœ‰å…³äºæ—¥æœŸå’Œæ—¶é—´çš„ API éƒ½å­˜åœ¨å„ç§ä½¿ç”¨æ–¹é¢çš„ç¼ºé™·ï¼Œä¸»è¦æœ‰ï¼š</p> <ol> <li>Javaçš„ <code>java.util.Date</code> å’Œ <code>java.util.Calendar</code> ç±»æ˜“ç”¨æ€§å·®ï¼Œä¸æ”¯æŒæ—¶åŒºï¼Œè€Œä¸”ä»–ä»¬éƒ½ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„</li> <li>ç”¨äºæ ¼å¼åŒ–æ—¥æœŸçš„ç±» <code>DateFormat</code> è¢«æ”¾åœ¨ <code>java.text</code> åŒ…ä¸­ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®ä¾‹åŒ–ä¸€ä¸ª <code>SimpleDateFormat</code> å¯¹è±¡æ¥å¤„ç†æ—¥æœŸæ ¼å¼åŒ–ï¼Œå¹¶ä¸” <code>DateFormat</code> ä¹Ÿæ˜¯éçº¿ç¨‹å®‰å…¨ï¼Œä½ å¾—æŠŠå®ƒç”¨ <code>ThreadLocal</code> åŒ…èµ·æ¥æ‰èƒ½åœ¨å¤šçº¿ç¨‹ä¸­ä½¿ç”¨</li> <li>å¯¹æ—¥æœŸçš„è®¡ç®—æ–¹å¼ç¹çï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ï¼Œå› ä¸ºæœˆä»½æ˜¯ä» 0 å¼€å§‹çš„ï¼Œä» <code>Calendar</code> ä¸­è·å–çš„æœˆä»½éœ€è¦åŠ ä¸€æ‰èƒ½è¡¨ç¤ºå½“å‰æœˆä»½</li> </ol> <p>ç”±äºä»¥ä¸Šè¿™äº›é—®é¢˜ï¼Œå‡ºç°äº†ä¸€äº›ä¸‰æ–¹çš„æ—¥æœŸå¤„ç†æ¡†æ¶ï¼Œä¾‹å¦‚ Joda-Timeï¼Œdate4j ç­‰å¼€æºé¡¹ç›®ã€‚ä½†æ˜¯ï¼ŒJava éœ€è¦ä¸€å¥—æ ‡å‡†çš„ç”¨äºå¤„ç†æ—¶é—´å’Œæ—¥æœŸçš„æ¡†æ¶ï¼Œäºæ˜¯ Java 8 ä¸­å¼•å…¥äº†æ–°çš„æ—¥æœŸ APIã€‚æ–°çš„æ—¥æœŸ API æ˜¯ JSR-310 è§„èŒƒçš„å®ç°ï¼ŒJoda-Time æ¡†æ¶çš„ä½œè€…æ­£æ˜¯ JSR-310 çš„è§„èŒƒçš„å€¡å¯¼è€…ï¼Œæ‰€ä»¥èƒ½ä» Java 8 çš„æ—¥æœŸ API ä¸­çœ‹åˆ°å¾ˆå¤š Joda-Time çš„ç‰¹æ€§ã€‚</p> <h3 id="51instant">5.1ã€Instant<a class="headerlink" href="#51instant" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p><code>Instant</code> å®ä¾‹è¡¨ç¤ºæ—¶é—´çº¿ä¸Šçš„ä¸€ä¸ªç‚¹ã€‚ å‚è€ƒç‚¹æ˜¯æ ‡å‡†çš„ Java çºªå…ƒï¼ˆepochï¼‰ï¼Œå³1970-01-01 T00ï¼š00ï¼š00Zï¼ˆ1970 å¹´ 1 æœˆ 1 æ—¥ 00:00 GMTï¼‰ã€‚ <code>Instant</code> ç±»çš„ <code>EPOCH</code> å±æ€§è¿”å›è¡¨ç¤º Java çºªå…ƒçš„ <code>Instant</code> å®ä¾‹ã€‚ åœ¨çºªå…ƒä¹‹åçš„æ—¶é—´æ˜¯æ­£å€¼ï¼Œè€Œåœ¨æ­¤ä¹‹å‰çš„æ—¶é—´å³æ˜¯è´Ÿå€¼ã€‚</p> <p><code>Instant</code> çš„é™æ€ <code>now()</code> æ–¹æ³•è¿”å›ä¸€ä¸ªè¡¨ç¤ºå½“å‰æ—¶é—´çš„ <code>Instant</code> å¯¹è±¡ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="n">Instant</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Instant</span><span class="p">.</span><span class="na">now</span><span class="p">();</span>
</span></code></pre></div> <p><code>getEpochSecond()</code> æ–¹æ³•è¿”å›è‡ªçºªå…ƒä»¥æ¥ç»è¿‡çš„ç§’æ•°ã€‚ <code>getNano()</code> æ–¹æ³•è¿”å›è‡ªä¸Šä¸€ç§’å¼€å§‹ä»¥æ¥çš„çº³ç§’æ•°ã€‚</p> <p><code>Instant</code> ç±»çš„ä¸€ä¸ªå¸¸ç”¨ç”¨é€”æ˜¯ç”¨æ¥æ“ä½œæ—¶é—´ï¼Œå¦‚ä»¥ä¸‹ä»£ç æ‰€ç¤ºï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="w">    </span><span class="n">Instant</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Instant</span><span class="p">.</span><span class="na">now</span><span class="p">();</span>
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-4"><a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a><span class="w">        </span><span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
</span><span id="__span-55-5"><a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">InterruptedException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-6"><a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a><span class="w">        </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
</span><span id="__span-55-7"><a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-55-8"><a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a><span class="w">    </span><span class="n">Instant</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Instant</span><span class="p">.</span><span class="na">now</span><span class="p">();</span>
</span><span id="__span-55-9"><a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">Duration</span><span class="p">.</span><span class="na">between</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">end</span><span class="p">).</span><span class="na">toMillis</span><span class="p">());</span>
</span><span id="__span-55-10"><a id="__codelineno-55-10" name="__codelineno-55-10" href="#__codelineno-55-10"></a><span class="p">}</span>
</span></code></pre></div> <p>å¦‚ä¸Šé¢ä»£ç æ‰€ç¤ºï¼Œ<code>Duration</code> ç±»ç”¨äºè¿”å›ä¸¤ä¸ª <code>Instant</code> ä¹‹é—´æ—¶é—´æ•°é‡çš„å·®å¼‚ã€‚</p> <h3 id="52localdate">5.2ã€LocalDate<a class="headerlink" href="#52localdate" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p><code>LocalDate</code> ç±»åªåŒ…æ‹¬æ—¥æœŸæ²¡æœ‰æ—¶é—´çš„éƒ¨åˆ†ã€‚ å®ƒä¹Ÿæ²¡æœ‰æ—¶åŒºã€‚ä¸‹è¡¨æ˜¾ç¤ºäº† <code>LocalDate</code> ä¸­ä¸€äº›é‡è¦çš„æ–¹æ³•ï¼š</p> <table> <thead> <tr> <th>æ–¹æ³•</th> <th>æè¿°</th> </tr> </thead> <tbody> <tr> <td><code>now()</code></td> <td>é™æ€æ–¹æ³•ï¼Œè¿”å›ä»Šå¤©çš„æ—¥æœŸ</td> </tr> <tr> <td><code>of()</code></td> <td>ä»æŒ‡å®šå¹´ä»½ã€æœˆä»½å’Œæ—¥æœŸåˆ›å»º <code>LocalDate</code> çš„é™æ€æ–¹æ³•</td> </tr> <tr> <td><code>getDayOfMonth()</code>ã€<code>getMonthValue()</code>ã€<code>getYear()</code></td> <td>ä»¥ <code>int</code> å½¢å¼è¿”å›æ­¤ <code>LocalDate</code> çš„æ—¥ã€æœˆæˆ–å¹´</td> </tr> <tr> <td><code>getMonth()</code></td> <td>ä»¥ <code>Month</code> æšä¸¾å¸¸é‡è¿”å›æ­¤ <code>LocalDate</code> çš„æœˆä»½</td> </tr> <tr> <td><code>plusDays()</code>ã€<code>minusDays()</code></td> <td>ç»™ <code>LocalDate</code> æ·»åŠ æˆ–å‡å»æŒ‡å®šçš„å¤©æ•°</td> </tr> <tr> <td><code>plusWeeks()</code>ã€<code>minusWeeks()</code></td> <td>ç»™ <code>LocalDate</code> æ·»åŠ æˆ–å‡å»æŒ‡å®šçš„æ˜ŸæœŸæ•°</td> </tr> <tr> <td><code>plusMonths()</code>ã€<code>minusMonths()</code></td> <td>ç»™ <code>LocalDate</code> æ·»åŠ æˆ–å‡å»æŒ‡å®šçš„æœˆä»½æ•°</td> </tr> <tr> <td><code>plusYears()</code>ã€<code>minusYears()</code></td> <td>ç»™ <code>LocalDate</code> æ·»åŠ æˆ–å‡å»æŒ‡å®šçš„å¹´æ•°</td> </tr> <tr> <td><code>isLeapYear()</code></td> <td>æ£€æŸ¥ <code>LocalDate</code> æŒ‡å®šçš„å¹´ä»½æ˜¯å¦ä¸ºé—°å¹´</td> </tr> <tr> <td><code>isAfter()</code>ã€<code>isBefore()</code></td> <td>æ£€æŸ¥æ­¤ <code>LocalDate</code> æ˜¯åœ¨ç»™å®šæ—¥æœŸä¹‹åè¿˜æ˜¯ä¹‹å‰</td> </tr> <tr> <td><code>lengthOfMonth()</code></td> <td>è¿”å›æ­¤ <code>LocalDate</code> ä¸­æœˆä»½çš„å¤©æ•°</td> </tr> <tr> <td><code>withDayOfMonth()</code></td> <td>è¿”å›æ­¤ <code>LocalDate</code> çš„æ‹·è´ï¼Œå°†æœˆä»½ä¸­çš„æŸå¤©è®¾ç½®ä¸ºç»™å®šå€¼</td> </tr> <tr> <td><code>withMonth()</code></td> <td>è¿”å›æ­¤ <code>LocalDate</code> çš„æ‹·è´ï¼Œå…¶æœˆä»½è®¾ç½®ä¸ºç»™å®šå€¼</td> </tr> <tr> <td><code>withYear()</code></td> <td>è¿”å›æ­¤ <code>LocalDate</code> çš„æ‹·è´ï¼Œå¹¶å°†å¹´ä»½è®¾ç½®ä¸ºç»™å®šå€¼</td> </tr> </tbody> </table> <p><code>LocalDate</code> æä¾›äº†å„ç§åˆ›å»ºæ—¥æœŸçš„æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼Œè¦åˆ›å»ºä»£è¡¨ä»Šå¤©æ—¥æœŸçš„ <code>LocalDate</code>ï¼Œä½¿ç”¨é™æ€ <code>now()</code> æ–¹æ³•ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="n">LocalDate</span><span class="w"> </span><span class="n">today</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">();</span>
</span></code></pre></div> <p>è¦åˆ›å»ºä»£è¡¨ç‰¹å®šå¹´ã€æœˆå’Œæ—¥çš„ <code>LocalDate</code>ï¼Œä½¿ç”¨ <code>of()</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¹Ÿæ˜¯é™æ€çš„ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç åˆ›å»ºäº†ä¸€ä¸ªä»£è¡¨ 2018 å¹´ 3 æœˆ 7 æ—¥çš„ <code>LocalDate</code> å®ä¾‹ï¼š</p> <div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>LocalDate<span class="w"> </span><span class="nv">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>LocalDate.of<span class="o">(</span><span class="m">2018</span>,<span class="w"> </span><span class="m">3</span>,<span class="w"> </span><span class="m">7</span><span class="o">)</span><span class="p">;</span>
</span></code></pre></div> <p>è¿˜æœ‰ä¸€ä¸ªæ¥å— <code>java.time.Month</code> æšä¸¾çš„å¸¸é‡ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°çš„ <code>of()</code> æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•é‡è½½æ„é€ ç›¸åŒæ—¥æœŸçš„ä»£ç ï¼š</p> <div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>LocalDate<span class="w"> </span><span class="nv">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>LocalDate.of<span class="o">(</span><span class="m">2018</span>,<span class="w"> </span>Month.MARCH,<span class="w"> </span><span class="m">7</span><span class="o">)</span><span class="p">;</span>
</span></code></pre></div> <p>è¿˜æœ‰è·å– <code>LocalDate</code> çš„æ—¥ã€æœˆæˆ–å¹´çš„æ–¹æ³•ï¼Œä¾‹å¦‚ <code>getDayOfMonth()</code>ã€<code>getMonth()</code>ã€<code>getMonthValue()</code> å’Œ <code>getYear()</code>ã€‚ ä»–ä»¬éƒ½æ²¡æœ‰ä»»ä½•å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª <code>int</code> æˆ– <code>Month</code> çš„æšä¸¾å¸¸é‡ã€‚ å¦å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ª <code>get()</code> æ–¹æ³•ï¼Œå®ƒæ¥å—ä¸€ä¸ª <code>TemporalField</code> å¹¶è¿”å›è¿™ä¸ª <code>LocalDate</code> çš„ä¸€éƒ¨åˆ†ã€‚ ä¾‹å¦‚ï¼Œä¼ é€’ <code>ChronoField.YEAR</code> ä»¥è·å– <code>LocalDate</code> çš„å¹´ä»½éƒ¨åˆ†ï¼š</p> <div class="language-csharp highlight"><span class="filename">C#</span><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">localDate</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="n">ChronoField</span><span class="p">.</span><span class="n">YEAR</span><span class="p">);</span>
</span></code></pre></div> <blockquote> <p><code>ChronoField</code> æ˜¯ä¸€ä¸ªå®ç° <code>TemporalField</code> æ¥å£çš„æšä¸¾ï¼Œå› æ­¤å¯ä»¥ä¼ é€’ä¸€ä¸ª <code>ChronoField</code> å¸¸é‡æ¥è·å–ã€‚ <code>TemporalField</code> å’Œ <code>ChronoField</code> éƒ½æ˜¯ <code>java.time.temporal</code> åŒ…çš„ä¸€éƒ¨åˆ†ã€‚ ä½†æ˜¯ï¼Œå¹¶é <code>ChronoField</code> ä¸­çš„æ‰€æœ‰å¸¸é‡éƒ½å¯ä»¥ <code>get()</code> è·å–ï¼Œå› ä¸ºå¹¶éæ‰€æœ‰å¸¸é‡éƒ½å—æ”¯æŒã€‚ ä¾‹å¦‚ï¼Œä¼ é€’ <code>ChronoField.SECOND_OF_DAY</code> ä»¥å¼•å‘å¼‚å¸¸ã€‚ å› æ­¤ï¼Œå–è€Œä»£ä¹‹ï¼Œæœ€å¥½ä½¿ç”¨ <code>getMonth()</code>ã€<code>getYear()</code> æˆ–ç±»ä¼¼æ–¹æ³•æ¥è·å–<code>LocalDate</code> çš„ç»„ä»¶ã€‚</p> </blockquote> <p>æ­¤å¤–ï¼Œè¿˜æœ‰æ‹·è´ <code>LocalDate</code> çš„æ–¹æ³•ï¼Œä¾‹å¦‚ <code>plusDays()</code>ã€<code>plusYears()</code>ã€<code>minusMonths()</code> ç­‰ç­‰ã€‚ ä¾‹å¦‚ï¼Œè¦è·å–è¡¨ç¤ºæ˜å¤©çš„ <code>LocalDate</code>ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªä»£è¡¨ä»Šå¤©çš„ <code>LocalDate</code>ï¼Œç„¶åè°ƒç”¨å…¶ <code>plusDays()</code> æ–¹æ³•ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="n">LocalDate</span><span class="w"> </span><span class="n">tomorrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">().</span><span class="na">plusDays</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></code></pre></div> <p>è¦è·å–æ˜¨å¤©è¡¨ç¤ºçš„ <code>LocalDate</code>ï¼Œå¯ä»¥ä½¿ç”¨ <code>minusDays()</code> æ–¹æ³•ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="n">LocalDate</span><span class="w"> </span><span class="n">yesterday</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">().</span><span class="na">minusDays</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></code></pre></div> <p>å¦å¤–ï¼Œè¿˜æœ‰ <code>plus()</code> å’Œ <code>minus()</code> æ–¹æ³•ä»¥æ›´é€šç”¨çš„æ–¹å¼è·å¾— <code>LocalDate</code> çš„æ‹·è´ã€‚ ä¸¤è€…éƒ½æ¥å—ä¸€ä¸ª <code>int</code> å‚æ•°å’Œä¸€ä¸ª <code>TemporalUnit</code> å‚æ•°ã€‚ è¿™äº›æ–¹æ³•çš„ç­¾åå¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="kd">public</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="nf">plus</span><span class="p">(</span><span class="kt">long</span><span class="w"> </span><span class="n">amountToAdd</span><span class="p">,</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">time</span><span class="p">.</span><span class="na">temporal</span><span class="p">.</span><span class="na">TemporalUnit</span><span class="w"> </span><span class="n">unit</span><span class="p">)</span>
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a>
</span><span id="__span-62-3"><a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a><span class="kd">public</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="nf">minus</span><span class="p">(</span><span class="kt">long</span><span class="w"> </span><span class="n">amountToSubtract</span><span class="p">,</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">time</span><span class="p">.</span><span class="na">temporal</span><span class="p">.</span><span class="na">TemporalUnit</span><span class="w"> </span><span class="n">unit</span><span class="p">)</span>
</span></code></pre></div> <p>ä¾‹å¦‚ï¼Œè·å¾—ä¸€ä¸ªä»ä»Šå¤©å¼€å§‹å‰ 20 å¹´çš„ <code>LocalDate</code>ï¼Œå¯ä»¥ä½¿ç”¨è¿™æ®µä»£ç ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="n">LocalDate</span><span class="w"> </span><span class="n">pastDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">().</span><span class="na">minus</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">ChronoUnit</span><span class="p">.</span><span class="na">DECADES</span><span class="p">);</span>
</span></code></pre></div> <blockquote> <p><code>ChronoUnit</code> æ˜¯ä¸€ä¸ªå®ç° <code>TemporalUnit</code> çš„æšä¸¾ï¼Œå› æ­¤å¯ä»¥å°† <code>ChronoUnit</code> å¸¸é‡ä¼ é€’ç»™ <code>plus()</code> å’Œ <code>minus()</code> æ–¹æ³•ã€‚</p> <p><code>LocalDate</code> æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤æ— æ³•æ›´æ”¹ã€‚ ä»»ä½•è¿”å› <code>LocalDate</code> çš„æ–¹æ³•éƒ½è¿”å› <code>LocalDate</code> çš„æ–°å®ä¾‹ã€‚</p> </blockquote> <h3 id="53period">5.3ã€Period<a class="headerlink" href="#53period" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p><code>Period</code> ç±»åŸºäºæ—¥æœŸçš„æ—¶é—´æ•°é‡æ„å»ºï¼Œä¾‹å¦‚äº”å¤©ã€ä¸€å‘¨æˆ–ä¸‰å¹´ã€‚ ä¸‹é¢åˆ—å‡ºäº†ä¸€äº›é‡è¦çš„æ–¹æ³•ï¼š</p> <table> <thead> <tr> <th>æ–¹æ³•</th> <th>æè¿°</th> </tr> </thead> <tbody> <tr> <td><code>between()</code></td> <td>åœ¨ä¸¤ä¸ª <code>LocalDate</code> ä¹‹é—´åˆ›å»ºä¸€ä¸ª <code>Period</code> ç¤ºä¾‹</td> </tr> <tr> <td><code>ofDays()</code>ã€<code>ofWeeks()</code>ã€<code>ofMonths()</code>ã€<code>ofYears()</code></td> <td>åˆ›å»ºä»£è¡¨ç»™å®šå¤©æ•°ã€å‘¨ã€æœˆã€å¹´çš„ <code>Period</code> å®ä¾‹</td> </tr> <tr> <td><code>of()</code></td> <td>æ ¹æ®ç»™å®šçš„å¹´æ•°ã€æœˆæ•°å’Œå¤©æ•°åˆ›å»ºä¸€ä¸ª <code>Period</code> å®ä¾‹</td> </tr> <tr> <td><code>getDays()</code>ã€<code>getMonths()</code>ã€<code>getYears()</code></td> <td>ä»¥ <code>int</code> å½¢å¼è¿”å›æ­¤ <code>Period</code> çš„å¤©æ•°ã€æœˆã€å¹´</td> </tr> <tr> <td><code>isNegative()</code></td> <td>å¦‚æœæ­¤ <code>Period</code> çš„ä¸‰ä¸ªéƒ¨åˆ†ä¸­çš„ä»»ä½•ä¸€ä¸ªä¸ºè´Ÿæ•°ï¼Œåˆ™è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code></td> </tr> <tr> <td><code>isZero()</code></td> <td>å¦‚æœæ­¤ <code>Period</code> çš„æ‰€æœ‰ä¸‰ä¸ªéƒ¨åˆ†å‡ä¸ºé›¶ï¼Œåˆ™è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code></td> </tr> <tr> <td><code>plusDays()</code>ã€<code>minusDays()</code></td> <td>åœ¨æ­¤ <code>Period</code> ä¸Šæ·»åŠ æˆ–å‡å»ç»™å®šçš„å¤©æ•°</td> </tr> <tr> <td><code>plusMonths()</code>ã€<code>minusMonths()</code></td> <td>åœ¨æ­¤ <code>Period</code> ä¸Šå¢åŠ æˆ–å‡å»ç»™å®šçš„æœˆæ•°</td> </tr> <tr> <td><code>plusYears()</code>ã€<code>minusYears()</code></td> <td>åœ¨æ­¤ <code>Period</code> å¢åŠ æˆ–å‡å»ç»™å®šçš„å¹´æ•°</td> </tr> <tr> <td><code>withDays()</code></td> <td>ä»¥æŒ‡å®šçš„å¤©æ•°è¿”å›æ­¤ <code>Period</code> çš„æ‹·è´</td> </tr> <tr> <td><code>withMonths()</code></td> <td>ä»¥æŒ‡å®šçš„æœˆæ•°è¿”å›æ­¤ <code>Period</code> çš„æ‹·è´</td> </tr> <tr> <td><code>withYears()</code></td> <td>ä»¥æŒ‡å®šçš„å¹´æ•°è¿”å›æ­¤ <code>Period</code> çš„æ‹·è´</td> </tr> </tbody> </table> <p>åˆ›å»ºä¸€ä¸ª <code>Period</code> å¾ˆç®€å•ï¼Œè¿™è¦æ„Ÿè°¢<code>between()</code>ã€<code>of()</code>ã€<code>ofDays()</code>ã€<code>ofWeeks()</code>ã€<code>ofMonths()</code>ã€<code>ofYears()</code> ç­‰é™æ€å·¥å‚æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯å¦‚ä½•åˆ›å»ºä»£è¡¨ä¸¤å‘¨çš„ <code>Period</code> å®ä¾‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="n">Period</span><span class="w"> </span><span class="n">twoWeeks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Period</span><span class="p">.</span><span class="na">ofWeeks</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</span></code></pre></div> <p>è¦åˆ›å»ºä»£è¡¨ä¸€å¹´ä¸¤ä¸ªæœˆä¸‰å¤©çš„ <code>Period</code> å®ä¾‹ï¼Œè¯·ä½¿ç”¨ <code>of()</code> æ–¹æ³•ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="n">Period</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Period</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
</span></code></pre></div> <p>è¦è·å–æŸä¸ªæœŸé—´çš„å¹´ã€æœˆã€æ—¥ç»„ä»¶ï¼Œè°ƒç”¨å…¶<code>getYears()</code>ã€<code>getMonths()</code>ã€<code>getDays()</code>æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç ä¸­çš„ <code>howManyDays</code> å˜é‡çš„å€¼æ˜¯14ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a><span class="n">Period</span><span class="w"> </span><span class="n">twoWeeks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Period</span><span class="p">.</span><span class="na">ofWeeks</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</span><span id="__span-66-2"><a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a>
</span><span id="__span-66-3"><a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a><span class="kt">int</span><span class="w"> </span><span class="n">howManyDays</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">twoWeeks</span><span class="p">.</span><span class="na">getDays</span><span class="p">();</span>
</span></code></pre></div> <p>æœ€åï¼Œå¯ä»¥ä½¿ç”¨ <code>plusXXX()</code> æˆ– <code>minusXXX()</code> æ–¹æ³•ä»¥åŠ <code>withXXX()</code> æ–¹æ³•æ¥åˆ›å»º <code>Period</code> çš„æ‹·è´ã€‚ <code>Period</code> æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥è¿™äº›æ–¹æ³•è¿”å›æ–°çš„ <code>Period</code> å®ä¾‹ã€‚</p> <p>ä¸‹é¢çš„ä»£ç æ˜¾ç¤ºäº†ä¸€ä¸ªè®¡ç®—ä¸ªäººå¹´é¾„çš„å¹´é¾„è®¡ç®—å™¨ã€‚ å®ƒä»ä¸¤ä¸ª <code>LocalDate</code> åˆ›å»ºä¸€ä¸ª <code>Period</code> å¹¶è°ƒç”¨å®ƒçš„ <code>getDays()</code>ã€<code>getMonths()</code> å’Œ <code>getYears()</code> æ–¹æ³•ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span>
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.Period</span><span class="p">;</span>
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a>
</span><span id="__span-67-4"><a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PeriodDemo1</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-67-5"><a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-67-6"><a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a><span class="w">        </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">dateA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">1978</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p">);</span>
</span><span id="__span-67-7"><a id="__codelineno-67-7" name="__codelineno-67-7" href="#__codelineno-67-7"></a><span class="w">        </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">dateB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">1988</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">28</span><span class="p">);</span>
</span><span id="__span-67-8"><a id="__codelineno-67-8" name="__codelineno-67-8" href="#__codelineno-67-8"></a><span class="w">        </span><span class="n">Period</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Period</span><span class="p">.</span><span class="na">between</span><span class="p">(</span><span class="n">dateA</span><span class="p">,</span><span class="w"> </span><span class="n">dateB</span><span class="p">);</span>
</span><span id="__span-67-9"><a id="__codelineno-67-9" name="__codelineno-67-9" href="#__codelineno-67-9"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">printf</span><span class="p">(</span><span class="s">"Between %s and %s"</span>
</span><span id="__span-67-10"><a id="__codelineno-67-10" name="__codelineno-67-10" href="#__codelineno-67-10"></a><span class="w">                </span><span class="o">+</span><span class="w"> </span><span class="s">" there are %d years, %d months"</span>
</span><span id="__span-67-11"><a id="__codelineno-67-11" name="__codelineno-67-11" href="#__codelineno-67-11"></a><span class="w">                </span><span class="o">+</span><span class="w"> </span><span class="s">" and %d days%n"</span><span class="p">,</span><span class="w"> </span><span class="n">dateA</span><span class="p">,</span><span class="w"> </span><span class="n">dateB</span><span class="p">,</span>
</span><span id="__span-67-12"><a id="__codelineno-67-12" name="__codelineno-67-12" href="#__codelineno-67-12"></a><span class="w">                </span><span class="n">period</span><span class="p">.</span><span class="na">getYears</span><span class="p">(),</span>
</span><span id="__span-67-13"><a id="__codelineno-67-13" name="__codelineno-67-13" href="#__codelineno-67-13"></a><span class="w">                </span><span class="n">period</span><span class="p">.</span><span class="na">getMonths</span><span class="p">(),</span>
</span><span id="__span-67-14"><a id="__codelineno-67-14" name="__codelineno-67-14" href="#__codelineno-67-14"></a><span class="w">                </span><span class="n">period</span><span class="p">.</span><span class="na">getDays</span><span class="p">());</span>
</span><span id="__span-67-15"><a id="__codelineno-67-15" name="__codelineno-67-15" href="#__codelineno-67-15"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-67-16"><a id="__codelineno-67-16" name="__codelineno-67-16" href="#__codelineno-67-16"></a><span class="p">}</span>
</span></code></pre></div> <p>è¿è¡Œ <code>PeriodDemo1</code> ç±»æ‰“å°ä¸‹é¢å­—ç¬¦ä¸²ã€‚</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a>Between 1978-08-26 and 1988-09-28 there are 10 years, 1 months and 2 days
</span></code></pre></div> <h3 id="54localdatetime">5.4ã€LocalDateTime<a class="headerlink" href="#54localdatetime" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p><code>LocalDateTime</code> ç±»æ˜¯ä¸€ä¸ªæ²¡æœ‰æ—¶åŒºçš„æ—¥æœŸæ—¶é—´çš„æ„å»ºã€‚ ä¸‹è¡¨æ˜¾ç¤ºäº† <code>LocalDateTime</code> ä¸­ä¸€äº›é‡è¦çš„æ–¹æ³•ã€‚ è¿™äº›æ–¹æ³•ç±»ä¼¼äº <code>LocalDate</code> çš„æ–¹æ³•ï¼Œä»¥åŠç”¨äºä¿®æ”¹æ—¶é—´éƒ¨åˆ†çš„ä¸€äº›å…¶ä»–æ–¹æ³•ï¼Œä¾‹å¦‚åœ¨ <code>LocalDate</code> ä¸­ä¸å¯ç”¨çš„ <code>plusHours()</code>ã€<code>plusMinutes()</code> å’Œ <code>plusSeconds()</code>ï¼š</p> <table> <thead> <tr> <th>æ–¹æ³•</th> <th>æè¿°</th> </tr> </thead> <tbody> <tr> <td><code>now()</code></td> <td>è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´çš„é™æ€æ–¹æ³•</td> </tr> <tr> <td><code>of()</code></td> <td>ä»æŒ‡å®šå¹´ä»½ã€æœˆä»½ã€æ—¥æœŸã€å°æ—¶ã€åˆ†é’Ÿã€ç§’å’Œæ¯«ç§’åˆ›å»º<code>LocalDateTime</code> çš„é™æ€æ–¹æ³•</td> </tr> <tr> <td><code>getYear()</code>ã€<code>getMonthValue()</code>ã€<code>getDayOfMonth()</code>ã€<code>getHour()</code>ã€<code>getMinute()</code>ã€<code>getSecond()</code></td> <td>ä»¥ <code>int</code> å½¢å¼è¿”å›æ­¤ <code>LocalDateTime</code> çš„å¹´ã€æœˆã€æ—¥ã€å°æ—¶ã€åˆ†é’Ÿæˆ–ç§’éƒ¨åˆ†</td> </tr> <tr> <td><code>plusDays()</code>ã€<code>minusDays()</code></td> <td>ç»™å½“å‰ LocalDateTime æ·»åŠ æˆ–å‡å»æŒ‡å®šçš„å¤©æ•°ã€‚</td> </tr> <tr> <td><code>plusWeeks()</code>ã€<code>minusWeeks()</code></td> <td>ç»™å½“å‰ <code>LocalDateTime</code> æ·»åŠ æˆ–å‡å»æŒ‡å®šçš„å‘¨æ•°ã€‚</td> </tr> <tr> <td><code>plusMonths()</code>ã€<code>minusMonths()</code></td> <td>ç»™å½“å‰ <code>LocalDateTime</code> æ·»åŠ æˆ–å‡å»æŒ‡å®šçš„æœˆæ•°ã€‚</td> </tr> <tr> <td><code>plusYears()</code>ã€<code>minusYears()</code></td> <td>ç»™å½“å‰ <code>LocalDateTime</code> æ·»åŠ æˆ–å‡å»æŒ‡å®šçš„å¹´æ•°ã€‚</td> </tr> <tr> <td><code>plusHours()</code>ã€<code>minusHours()</code></td> <td>ç»™å½“å‰ <code>LocalDateTime</code> æ·»åŠ æˆ–å‡å»æŒ‡å®šçš„å°æ—¶æ•°</td> </tr> <tr> <td><code>plusMinutes()</code>ã€<code>minusMinutes()</code></td> <td>ç»™å½“å‰ <code>LocalDateTime</code> æ·»åŠ æˆ–å‡å»æŒ‡å®šçš„åˆ†é’Ÿæ•°</td> </tr> <tr> <td><code>plusSeconds()</code>ã€<code>minusSeconds()</code></td> <td>ç»™å½“å‰ <code>LocalDateTime</code> æ·»åŠ æˆ–å‡å»æŒ‡å®šçš„ç§’æ•°</td> </tr> <tr> <td><code>IsAfter()</code>ã€<code>isBefore()</code></td> <td>æ£€æŸ¥æ­¤ <code>LocalDateTime</code> æ˜¯å¦åœ¨æŒ‡å®šçš„æ—¥æœŸæ—¶é—´ä¹‹åæˆ–ä¹‹å‰</td> </tr> <tr> <td><code>withDayOfMonth()</code></td> <td>è¿”å›æ­¤ <code>LocalDateTime</code> çš„æ‹·è´ï¼Œå¹¶å°†æœˆä»½ä¸­çš„æŸå¤©è®¾ç½®ä¸ºæŒ‡å®šå€¼</td> </tr> <tr> <td><code>withMonth()</code>ã€<code>withYear()</code></td> <td>è¿”å›æ­¤ <code>LocalDateTime</code> çš„æ‹·è´ï¼Œå…¶æœˆæˆ–å¹´è®¾ç½®ä¸ºæŒ‡å®šå€¼</td> </tr> <tr> <td><code>withHour()</code>ã€<code>withMinute()</code>ã€<code>withSecond()</code></td> <td>è¿”å›æ­¤ <code>LocalDateTime</code> çš„æ‹·è´ï¼Œå…¶å°æ—¶ã€åˆ†é’Ÿã€ç§’è®¾ç½®ä¸ºæŒ‡å®šå€¼</td> </tr> </tbody> </table> <p><code>LocalDateTime</code> æä¾›äº†å„ç§é™æ€æ–¹æ³•æ¥åˆ›å»ºæ—¥æœŸæ—¶é—´ã€‚ è¯¥æ–¹æ³•ç°åœ¨å¸¦æœ‰ä¸‰ä¸ªé‡è½½æ–¹æ³•è¿”å›å½“å‰çš„æ—¥æœŸæ—¶é—´ã€‚ æ— å‚çš„æ–¹æ³•æ˜¯æœ€å®¹æ˜“ä½¿ç”¨çš„ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">();</span>
</span></code></pre></div> <p>è¦åˆ›å»ºå…·æœ‰ç‰¹å®šæ—¥æœŸå’Œæ—¶é—´çš„ <code>LocalDateTime</code>ï¼Œè¯·ä½¿ç”¨ <code>of()</code> æ–¹æ³•ã€‚ æ­¤æ–¹æ³•æœ‰å¤šä¸ªé‡è½½ï¼Œå¹¶å…è®¸ä¼ é€’æ—¥æœŸæ—¶é—´æˆ– <code>LocalDate</code> å’Œ <code>LocalTime</code> çš„å•ä¸ªéƒ¨åˆ†ã€‚ ä»¥ä¸‹æ˜¯ä¸€äº›æ–¹æ³•çš„ç­¾åï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="nf">of</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">month</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">dayOfMonth</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">hour</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">minute</span><span class="p">)</span>
</span><span id="__span-70-2"><a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a>
</span><span id="__span-70-3"><a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="nf">of</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">Month</span><span class="w"> </span><span class="n">month</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">dayOfMonth</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">hour</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">minute</span><span class="p">)</span>
</span><span id="__span-70-4"><a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a>
</span><span id="__span-70-5"><a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="nf">of</span><span class="p">(</span><span class="n">LocalDate</span><span class="w"> </span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="n">LocalTime</span><span class="w"> </span><span class="n">time</span><span class="p">)</span>
</span></code></pre></div> <p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç æ®µåˆ›å»ºä¸€ä¸ª <code>LocalDateTime</code>ï¼Œä»£è¡¨ 2015 å¹´ 12 æœˆ 31 æ—¥æ—©ä¸Šå…«ç‚¹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">endOfYear</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">31</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</span></code></pre></div> <p>å¯ä»¥ä½¿ç”¨ <code>plusXXX()</code> æˆ– <code>minusXXX()</code> æ–¹æ³•åˆ›å»º <code>LocalDateTime</code> çš„æ‹·è´ã€‚ ä¾‹å¦‚ï¼Œæ­¤ä»£ç åˆ›å»ºä¸€ä¸ª <code>LocalDateTime</code>ï¼Œå®ƒè¡¨ç¤ºæ˜å¤©çš„åŒä¸€æ—¶é—´ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">();</span>
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a>
</span><span id="__span-72-3"><a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">sameTimeTomorrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">now</span><span class="p">.</span><span class="na">plusHours</span><span class="p">(</span><span class="mi">24</span><span class="p">);</span>
</span></code></pre></div> <h3 id="55time-zones">5.5ã€Time Zones<a class="headerlink" href="#55time-zones" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>äº’è”ç½‘æ•°å­—åˆ†é…æœºæ„ï¼ˆIANAï¼‰ç»´æŠ¤ä¸€ä¸ªå¯ä»æ­¤ç½‘é¡µä¸‹è½½çš„<a href="http://www.iana.org/time-zones">æ—¶åŒºæ•°æ®åº“</a>ã€‚</p> <p>Java æ—¥æœŸå’Œæ—¶é—´ API ä¹Ÿé€‚ç”¨äºæ—¶åŒºã€‚ æŠ½è±¡ç±» <code>ZoneId</code>ï¼ˆåœ¨ <code>java.time</code> åŒ…ä¸­ï¼‰è¡¨ç¤ºä¸€ä¸ªåŒºåŸŸæ ‡è¯†ç¬¦ã€‚ å®ƒæœ‰ä¸€ä¸ªåä¸º <code>getAvailableZoneIds()</code> çš„é™æ€æ–¹æ³•ï¼Œå®ƒè¿”å›æ‰€æœ‰åŒºåŸŸæ ‡è¯†ç¬¦ã€‚ ä¸‹é¢å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨è¿™ç§æ–¹æ³•æ‰“å°æ‰€æœ‰æ—¶åŒºçš„æ’åºåˆ—è¡¨ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.ZoneId</span><span class="p">;</span>
</span><span id="__span-73-2"><a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.ArrayList</span><span class="p">;</span>
</span><span id="__span-73-3"><a id="__codelineno-73-3" name="__codelineno-73-3" href="#__codelineno-73-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Collections</span><span class="p">;</span>
</span><span id="__span-73-4"><a id="__codelineno-73-4" name="__codelineno-73-4" href="#__codelineno-73-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
</span><span id="__span-73-5"><a id="__codelineno-73-5" name="__codelineno-73-5" href="#__codelineno-73-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Set</span><span class="p">;</span>
</span><span id="__span-73-6"><a id="__codelineno-73-6" name="__codelineno-73-6" href="#__codelineno-73-6"></a>
</span><span id="__span-73-7"><a id="__codelineno-73-7" name="__codelineno-73-7" href="#__codelineno-73-7"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TimeZoneDemo1</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-73-8"><a id="__codelineno-73-8" name="__codelineno-73-8" href="#__codelineno-73-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-73-9"><a id="__codelineno-73-9" name="__codelineno-73-9" href="#__codelineno-73-9"></a><span class="w">        </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">allZoneIds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ZoneId</span><span class="p">.</span><span class="na">getAvailableZoneIds</span><span class="p">();</span>
</span><span id="__span-73-10"><a id="__codelineno-73-10" name="__codelineno-73-10" href="#__codelineno-73-10"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">zoneList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">allZoneIds</span><span class="p">);</span>
</span><span id="__span-73-11"><a id="__codelineno-73-11" name="__codelineno-73-11" href="#__codelineno-73-11"></a><span class="w">        </span><span class="n">Collections</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">zoneList</span><span class="p">);</span><span class="w">      </span>
</span><span id="__span-73-12"><a id="__codelineno-73-12" name="__codelineno-73-12" href="#__codelineno-73-12"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">zoneId</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">zoneList</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-73-13"><a id="__codelineno-73-13" name="__codelineno-73-13" href="#__codelineno-73-13"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">zoneId</span><span class="p">);</span>
</span><span id="__span-73-14"><a id="__codelineno-73-14" name="__codelineno-73-14" href="#__codelineno-73-14"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-73-15"><a id="__codelineno-73-15" name="__codelineno-73-15" href="#__codelineno-73-15"></a><span class="w">        </span><span class="c1">// alternatively, you can use this line of code to</span>
</span><span id="__span-73-16"><a id="__codelineno-73-16" name="__codelineno-73-16" href="#__codelineno-73-16"></a><span class="w">        </span><span class="c1">// print a sorted list of zone ids</span>
</span><span id="__span-73-17"><a id="__codelineno-73-17" name="__codelineno-73-17" href="#__codelineno-73-17"></a><span class="w">        </span><span class="c1">// ZoneId.getAvailableZoneIds().stream().sorted().</span>
</span><span id="__span-73-18"><a id="__codelineno-73-18" name="__codelineno-73-18" href="#__codelineno-73-18"></a><span class="w">        </span><span class="c1">//        forEach(System.out::println);</span>
</span><span id="__span-73-19"><a id="__codelineno-73-19" name="__codelineno-73-19" href="#__codelineno-73-19"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-73-20"><a id="__codelineno-73-20" name="__codelineno-73-20" href="#__codelineno-73-20"></a><span class="p">}</span>
</span></code></pre></div> <p><code>getAvailableZoneIds()</code> è¿”å›å­—ç¬¦ä¸²çš„ <code>Set</code> é›†åˆã€‚ å¯ä»¥ä½¿ç”¨ <code>Collections.sort()</code> æˆ–æ›´ä¼˜é›…åœ°é€šè¿‡è°ƒç”¨å®ƒçš„ <code>stream()</code> æ–¹æ³•å¯¹ <code>Set</code> è¿›è¡Œæ’åºã€‚ å¯ä»¥ç¼–å†™æ­¤ä»£ç å¯¹åŒºåŸŸæ ‡è¯†ç¬¦è¿›è¡Œæ’åºï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a><span class="n">ZoneId</span><span class="p">.</span><span class="na">getAvailableZoneIds</span><span class="p">().</span><span class="na">stream</span><span class="p">().</span><span class="na">sorted</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span>
</span></code></pre></div> <p><code>getAvailableZoneIds()</code> è¿”å› 586 ä¸ªåŒºåŸŸæ ‡è¯†ç¬¦çš„ <code>Set</code> é›†åˆã€‚ ä»¥ä¸‹æ˜¯ä¸Šè¿°ä»£ç ä¸­çš„ä¸€éƒ¨åˆ†åŒºåŸŸæ ‡è¯†ç¬¦ï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-75-1"><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a>Africa/Cairo
</span><span id="__span-75-2"><a id="__codelineno-75-2" name="__codelineno-75-2" href="#__codelineno-75-2"></a>Africa/Johannesburg
</span><span id="__span-75-3"><a id="__codelineno-75-3" name="__codelineno-75-3" href="#__codelineno-75-3"></a>America/Chicago
</span><span id="__span-75-4"><a id="__codelineno-75-4" name="__codelineno-75-4" href="#__codelineno-75-4"></a>America/Los_Angeles
</span><span id="__span-75-5"><a id="__codelineno-75-5" name="__codelineno-75-5" href="#__codelineno-75-5"></a>America/Mexico_City
</span><span id="__span-75-6"><a id="__codelineno-75-6" name="__codelineno-75-6" href="#__codelineno-75-6"></a>America/New_York
</span><span id="__span-75-7"><a id="__codelineno-75-7" name="__codelineno-75-7" href="#__codelineno-75-7"></a>America/Toronto
</span><span id="__span-75-8"><a id="__codelineno-75-8" name="__codelineno-75-8" href="#__codelineno-75-8"></a>Antarctica/South_Pole
</span><span id="__span-75-9"><a id="__codelineno-75-9" name="__codelineno-75-9" href="#__codelineno-75-9"></a>Asia/Hong_Kong
</span><span id="__span-75-10"><a id="__codelineno-75-10" name="__codelineno-75-10" href="#__codelineno-75-10"></a>Asia/Shanghai
</span><span id="__span-75-11"><a id="__codelineno-75-11" name="__codelineno-75-11" href="#__codelineno-75-11"></a>Asia/Tokyo
</span><span id="__span-75-12"><a id="__codelineno-75-12" name="__codelineno-75-12" href="#__codelineno-75-12"></a>Australia/Melbourne
</span><span id="__span-75-13"><a id="__codelineno-75-13" name="__codelineno-75-13" href="#__codelineno-75-13"></a>Australia/Sydney
</span><span id="__span-75-14"><a id="__codelineno-75-14" name="__codelineno-75-14" href="#__codelineno-75-14"></a>Canada/Atlantic
</span><span id="__span-75-15"><a id="__codelineno-75-15" name="__codelineno-75-15" href="#__codelineno-75-15"></a>Europe/Amsterdam
</span><span id="__span-75-16"><a id="__codelineno-75-16" name="__codelineno-75-16" href="#__codelineno-75-16"></a>Europe/London
</span><span id="__span-75-17"><a id="__codelineno-75-17" name="__codelineno-75-17" href="#__codelineno-75-17"></a>Europe/Paris
</span><span id="__span-75-18"><a id="__codelineno-75-18" name="__codelineno-75-18" href="#__codelineno-75-18"></a>US/Central
</span><span id="__span-75-19"><a id="__codelineno-75-19" name="__codelineno-75-19" href="#__codelineno-75-19"></a>US/Eastern
</span><span id="__span-75-20"><a id="__codelineno-75-20" name="__codelineno-75-20" href="#__codelineno-75-20"></a>US/Pacific
</span></code></pre></div> <h3 id="56zoneddatetime">5.6ã€ZonedDateTime<a class="headerlink" href="#56zoneddatetime" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p><code>ZonedDateTime</code> ç±»ä»¥ä¸€ä¸ªæ—¶åŒºçš„æ—¥æœŸæ—¶é—´çš„æ„å»ºã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªæ—¶åŒºçš„æ—¥æœŸæ—¶é—´:</p> <div class="language-makefile highlight"><span class="filename">Makefile</span><pre><span></span><code><span id="__span-76-1"><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a><span class="nf">2015-12-31T10</span><span class="o">:</span>59:59+01:00 <span class="n">Europe</span>/<span class="n">Paris</span>
</span></code></pre></div> <p><code>ZonedDateTime</code> å§‹ç»ˆæ˜¯ä¸å¯å˜çš„ï¼Œæ—¶é—´åˆ†é‡çš„å­˜å‚¨ç²¾åº¦ä¸ºçº³ç§’ã€‚</p> <p><code>ZonedDateTIme</code> ä¸­ä¸€äº›é‡è¦æ–¹æ³•çš„ä½¿ç”¨ä¸ <code>LocalDateTime</code> ç±»ä¼¼ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ªæ—¶åŒºçš„æ¦‚å¿µã€‚å¯è‡ªè¡ŒæŸ¥é˜… APIã€‚</p> <p>åƒ <code>LocalDateTime</code> ä¸€æ ·ï¼Œ<code>ZonedDateTime</code>ç±»ç°åœ¨æä¾›é™æ€ <code>now()</code> å’Œ <code>of()</code> æ–¹æ³•ï¼Œå¹¶æ„é€ ä¸€ä¸ª <code>ZonedDateTime</code> å®ä¾‹ã€‚ <code>now()</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ª <code>ZonedDateTime</code> ä»£è¡¨æ‰§è¡Œçš„æ—¥æœŸå’Œæ—¶é—´ã€‚ æ— å‚ <code>now()</code> æ–¹æ³•ä¼šä½¿ç”¨è®¡ç®—æœºçš„é»˜è®¤æ—¶åŒºåˆ›å»º <code>ZonedDateTime</code>ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-77-1"><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a><span class="n">ZonedDateTime</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ZonedDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">();</span>
</span></code></pre></div> <p><code>now()</code> çš„å¦ä¸€ä¸ªé‡è½½æ–¹æ³•å…è®¸ä¼ é€’åŒºåŸŸæ ‡è¯†ç¬¦ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-78-1"><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a><span class="n">ZonedDateTime</span><span class="w"> </span><span class="n">parisTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ZonedDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">(</span><span class="n">ZoneId</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">"Europe/Paris"</span><span class="p">));</span>
</span></code></pre></div> <p><code>of()</code> æ–¹æ³•ä¹Ÿæœ‰å¥½å‡ ä¸ªé‡è½½çš„æ–¹æ³•ã€‚åœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼Œéƒ½éœ€è¦ä¼ é€’åŒºåŸŸæ ‡è¯†ç¬¦ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-79-1"><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">ZonedDateTime</span><span class="w"> </span><span class="nf">of</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">month</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">dayOfMonth</span><span class="p">,</span>
</span><span id="__span-79-2"><a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">hour</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">minute</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">second</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">nanosecond</span><span class="p">,</span>
</span><span id="__span-79-3"><a id="__codelineno-79-3" name="__codelineno-79-3" href="#__codelineno-79-3"></a><span class="w">        </span><span class="n">ZoneId</span><span class="w"> </span><span class="n">zone</span><span class="p">)</span>
</span><span id="__span-79-4"><a id="__codelineno-79-4" name="__codelineno-79-4" href="#__codelineno-79-4"></a>
</span><span id="__span-79-5"><a id="__codelineno-79-5" name="__codelineno-79-5" href="#__codelineno-79-5"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">ZonedDateTime</span><span class="w"> </span><span class="nf">of</span><span class="p">(</span><span class="n">LocalDate</span><span class="w"> </span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="n">LocalTime</span><span class="w"> </span><span class="n">time</span><span class="p">,</span><span class="w"> </span><span class="n">ZoneId</span><span class="w"> </span><span class="n">zone</span><span class="p">)</span>
</span><span id="__span-79-6"><a id="__codelineno-79-6" name="__codelineno-79-6" href="#__codelineno-79-6"></a>
</span><span id="__span-79-7"><a id="__codelineno-79-7" name="__codelineno-79-7" href="#__codelineno-79-7"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">ZonedDateTime</span><span class="w"> </span><span class="nf">of</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">datetime</span><span class="p">,</span><span class="w"> </span><span class="n">ZoneId</span><span class="w"> </span><span class="n">zone</span><span class="p">)</span>
</span></code></pre></div> <p>åƒ <code>LocalDate</code> å’Œ <code>LocalDateTime</code> ä¸€æ ·ï¼Œ<code>ZonedDateTime</code> æä¾›äº†ä½¿ç”¨ <code>plusXXX()</code>ã€<code>minusXXX()</code> å’Œ <code>withXXX()</code> æ–¹æ³•åˆ›å»ºå®ä¾‹æ‹·è´çš„æ–¹æ³•ã€‚</p> <p>ä¾‹å¦‚ï¼Œä¸‹é¢ä»£ç è¡Œåˆ›å»ºä¸€ä¸ªå¸¦é»˜è®¤æ—¶åŒºçš„ <code>ZonedDateTime</code>ï¼Œå¹¶è°ƒç”¨å®ƒçš„ <code>minusDays()</code> æ–¹æ³•ä»¥åœ¨ä¸‰å¤©å‰åˆ›å»ºç›¸åŒçš„ <code>ZonedDateTime</code>ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-80-1"><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a><span class="n">ZonedDateTime</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ZonedDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">();</span>
</span><span id="__span-80-2"><a id="__codelineno-80-2" name="__codelineno-80-2" href="#__codelineno-80-2"></a><span class="n">ZonedDateTime</span><span class="w"> </span><span class="n">threeDaysEarlier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">now</span><span class="p">.</span><span class="na">minusDays</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</span></code></pre></div> <h3 id="57duration">5.7ã€Duration<a class="headerlink" href="#57duration" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p><code>Duration</code> ç±»æ˜¯åŸºäºæ—¶é—´çš„æŒç»­æ—¶é—´çš„æ„å»ºã€‚ å®ƒä¸ <code>Period</code> ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äº <code>Duration</code> çš„æ—¶é—´åˆ†é‡ä¸ºçº³ç§’ç²¾åº¦ï¼Œå¹¶è€ƒè™‘äº†<code>ZonedDateTime</code> å®ä¾‹ä¹‹é—´çš„æ—¶åŒºã€‚ ä¸‹è¡¨æ˜¾ç¤ºäº† <code>Duration</code> ä¸­é‡è¦çš„æ–¹æ³•ï¼š</p> <table> <thead> <tr> <th>æ–¹æ³•</th> <th>æè¿°</th> </tr> </thead> <tbody> <tr> <td><code>between()</code></td> <td>åœ¨ä¸¤ä¸ªæ—¶å·®çš„å¯¹è±¡ä¹‹é—´åˆ›å»ºä¸€ä¸ª <code>Duration</code> å®ä¾‹ï¼Œä¾‹å¦‚åœ¨ä¸¤ä¸ª <code>LocalDateTime</code> æˆ–ä¸¤ä¸ª <code>ZonedDateTime</code> ä¹‹é—´ã€‚</td> </tr> <tr> <td><code>ofYears()</code>ã€<code>ofMonths()</code>ã€<code>ofWeeks()</code>ã€<code>ofDays()</code>ã€<code>ofHours()</code>ã€<code>ofMinutes()</code>ã€<code>ofSeconds()</code>ã€<code>ofNano()</code></td> <td>åˆ›å»ºç»™å®šå¹´æ•°ã€æœˆã€å‘¨ã€å¤©ã€å°æ—¶ã€åˆ†ã€ç§’ã€çº³ç§’çš„ <code>Duration</code> å®ä¾‹</td> </tr> <tr> <td><code>of()</code></td> <td>æ ¹æ®æŒ‡å®šæ•°é‡çš„æ—¶é—´å•ä½åˆ›å»º <code>Duration</code> å®ä¾‹</td> </tr> <tr> <td><code>toDays()</code>ã€<code>toHours()</code>ã€<code>toMinutes()</code></td> <td>ä»¥ <code>int</code> å½¢å¼è¿”å›æ­¤ <code>Duration</code> çš„å¤©æ•°ã€å°æ—¶ã€åˆ†é’Ÿæ•°</td> </tr> <tr> <td><code>isNegative()</code></td> <td>å¦‚æœæ­¤ <code>Duration</code> ä¸ºè´Ÿåˆ™è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code></td> </tr> <tr> <td><code>isZero()</code></td> <td>å¦‚æœæ­¤ <code>Duration</code> é•¿åº¦ä¸ºé›¶åˆ™è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code></td> </tr> <tr> <td><code>plusDays()</code>ã€<code>minusDays()</code></td> <td>åœ¨æ­¤ <code>Duration</code> å†…æ·»åŠ æˆ–å‡å»æŒ‡å®šçš„å¤©æ•°</td> </tr> <tr> <td><code>plusMonths()</code>ã€<code>minusMonths()</code></td> <td>åœ¨æ­¤ <code>Duration</code> å†…æ·»åŠ æˆ–å‡å»æŒ‡å®šçš„æœˆæ•°</td> </tr> <tr> <td><code>plusYears()</code>ã€<code>minusYears()</code></td> <td>åœ¨ <code>Duration</code> å†…æ·»åŠ æˆ–å‡å»æŒ‡å®šçš„å¹´æ•°</td> </tr> <tr> <td><code>withSeconds()</code></td> <td>ä»¥æŒ‡å®šçš„ç§’æ•°è¿”å›æ­¤ <code>Duration</code> çš„æ‹·è´</td> </tr> </tbody> </table> <p>å¯ä»¥é€šè¿‡è°ƒç”¨é™æ€æ–¹æ³• <code>between()</code> æˆ– <code>of()</code> æ¥åˆ›å»º <code>Duration</code>ã€‚ ä¸‹é¢çš„ä»£ç ä¼šåœ¨ 2015 å¹´ 1 æœˆ 26 æ—¥ 11:10 è‡³ 2015 å¹´ 1 æœˆ 26 æ—¥ 12:40 ä¹‹é—´åˆ›å»ºä¸¤ä¸ª <code>LocalDateTime</code> çš„ <code>Duration</code>ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-81-1"><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.Duration</span><span class="p">;</span>
</span><span id="__span-81-2"><a id="__codelineno-81-2" name="__codelineno-81-2" href="#__codelineno-81-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>
</span><span id="__span-81-3"><a id="__codelineno-81-3" name="__codelineno-81-3" href="#__codelineno-81-3"></a>
</span><span id="__span-81-4"><a id="__codelineno-81-4" name="__codelineno-81-4" href="#__codelineno-81-4"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DurationDemo1</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-81-5"><a id="__codelineno-81-5" name="__codelineno-81-5" href="#__codelineno-81-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-81-6"><a id="__codelineno-81-6" name="__codelineno-81-6" href="#__codelineno-81-6"></a><span class="w">        </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">dateTimeA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-81-7"><a id="__codelineno-81-7" name="__codelineno-81-7" href="#__codelineno-81-7"></a><span class="w">        </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">dateTimeB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-81-8"><a id="__codelineno-81-8" name="__codelineno-81-8" href="#__codelineno-81-8"></a><span class="w">        </span><span class="n">Duration</span><span class="w"> </span><span class="n">duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Duration</span><span class="p">.</span><span class="na">between</span><span class="p">(</span><span class="n">dateTimeA</span><span class="p">,</span><span class="w"> </span><span class="n">dateTimeB</span><span class="p">);</span>
</span><span id="__span-81-9"><a id="__codelineno-81-9" name="__codelineno-81-9" href="#__codelineno-81-9"></a>
</span><span id="__span-81-10"><a id="__codelineno-81-10" name="__codelineno-81-10" href="#__codelineno-81-10"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">printf</span><span class="p">(</span><span class="s">"There are %d hours and %d minutes.%n"</span><span class="p">,</span>
</span><span id="__span-81-11"><a id="__codelineno-81-11" name="__codelineno-81-11" href="#__codelineno-81-11"></a><span class="w">                </span><span class="n">duration</span><span class="p">.</span><span class="na">toHours</span><span class="p">(),</span>
</span><span id="__span-81-12"><a id="__codelineno-81-12" name="__codelineno-81-12" href="#__codelineno-81-12"></a><span class="w">                </span><span class="n">duration</span><span class="p">.</span><span class="na">toMinutes</span><span class="p">()</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">60</span><span class="p">);</span>
</span><span id="__span-81-13"><a id="__codelineno-81-13" name="__codelineno-81-13" href="#__codelineno-81-13"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-81-14"><a id="__codelineno-81-14" name="__codelineno-81-14" href="#__codelineno-81-14"></a><span class="p">}</span>
</span></code></pre></div> <p>è¿è¡Œ <code>DurationDemo1</code> ç±»çš„ç»“æœæ˜¯è¿™æ ·çš„ï¼š</p> <div class="language-sql highlight"><span class="filename">SQL</span><pre><span></span><code><span id="__span-82-1"><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a><span class="n">There</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">hours</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class="n">minutes</span><span class="p">.</span>
</span></code></pre></div> <p>ä¸‹é¢çš„ä»£ç åœ¨ä¸¤ä¸ª <code>ZoneDateTime</code> ä¹‹é—´åˆ›å»ºä¸€ä¸ª <code>Duration</code>ï¼Œå…·æœ‰ç›¸åŒçš„æ—¥æœŸå’Œæ—¶é—´ï¼Œä½†æ—¶åŒºä¸åŒï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-83-1"><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.Duration</span><span class="p">;</span>
</span><span id="__span-83-2"><a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>
</span><span id="__span-83-3"><a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.Month</span><span class="p">;</span>
</span><span id="__span-83-4"><a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.ZoneId</span><span class="p">;</span>
</span><span id="__span-83-5"><a id="__codelineno-83-5" name="__codelineno-83-5" href="#__codelineno-83-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.ZonedDateTime</span><span class="p">;</span>
</span><span id="__span-83-6"><a id="__codelineno-83-6" name="__codelineno-83-6" href="#__codelineno-83-6"></a>
</span><span id="__span-83-7"><a id="__codelineno-83-7" name="__codelineno-83-7" href="#__codelineno-83-7"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DurationDemo2</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-83-8"><a id="__codelineno-83-8" name="__codelineno-83-8" href="#__codelineno-83-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-83-9"><a id="__codelineno-83-9" name="__codelineno-83-9" href="#__codelineno-83-9"></a><span class="w">        </span><span class="n">ZonedDateTime</span><span class="w"> </span><span class="n">zdt1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ZonedDateTime</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span><span class="w"> </span><span class="n">Month</span><span class="p">.</span><span class="na">JANUARY</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span>
</span><span id="__span-83-10"><a id="__codelineno-83-10" name="__codelineno-83-10" href="#__codelineno-83-10"></a><span class="w">                </span><span class="n">ZoneId</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">"America/Denver"</span><span class="p">));</span>
</span><span id="__span-83-11"><a id="__codelineno-83-11" name="__codelineno-83-11" href="#__codelineno-83-11"></a><span class="w">        </span><span class="n">ZonedDateTime</span><span class="w"> </span><span class="n">zdt2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ZonedDateTime</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span><span class="w"> </span><span class="n">Month</span><span class="p">.</span><span class="na">JANUARY</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span>
</span><span id="__span-83-12"><a id="__codelineno-83-12" name="__codelineno-83-12" href="#__codelineno-83-12"></a><span class="w">                </span><span class="n">ZoneId</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">"America/Toronto"</span><span class="p">));</span>
</span><span id="__span-83-13"><a id="__codelineno-83-13" name="__codelineno-83-13" href="#__codelineno-83-13"></a>
</span><span id="__span-83-14"><a id="__codelineno-83-14" name="__codelineno-83-14" href="#__codelineno-83-14"></a><span class="w">        </span><span class="n">Duration</span><span class="w"> </span><span class="n">duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Duration</span><span class="p">.</span><span class="na">between</span><span class="p">(</span><span class="n">zdt1</span><span class="p">,</span><span class="w"> </span><span class="n">zdt2</span><span class="p">);</span>
</span><span id="__span-83-15"><a id="__codelineno-83-15" name="__codelineno-83-15" href="#__codelineno-83-15"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">printf</span><span class="p">(</span><span class="s">"There are %d hours and %d minutes.%n"</span><span class="p">,</span>
</span><span id="__span-83-16"><a id="__codelineno-83-16" name="__codelineno-83-16" href="#__codelineno-83-16"></a><span class="w">                </span><span class="n">duration</span><span class="p">.</span><span class="na">toHours</span><span class="p">(),</span>
</span><span id="__span-83-17"><a id="__codelineno-83-17" name="__codelineno-83-17" href="#__codelineno-83-17"></a><span class="w">                </span><span class="n">duration</span><span class="p">.</span><span class="na">toMinutes</span><span class="p">()</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">60</span><span class="p">);</span>
</span><span id="__span-83-18"><a id="__codelineno-83-18" name="__codelineno-83-18" href="#__codelineno-83-18"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-83-19"><a id="__codelineno-83-19" name="__codelineno-83-19" href="#__codelineno-83-19"></a><span class="p">}</span>
</span></code></pre></div> <p>è¿è¡Œ <code>DurationDemo2</code> ç±»åœ¨æ§åˆ¶å°ä¸Šæ‰“å°å¦‚ä¸‹ç»“æœï¼š</p> <div class="language-sql highlight"><span class="filename">SQL</span><pre><span></span><code><span id="__span-84-1"><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a><span class="n">There</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="o">-</span><span class="mi">2</span><span class="w"> </span><span class="n">hours</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">minutes</span><span class="p">.</span>
</span></code></pre></div> <p>è¿™æ˜¯é¢„æ–™ä¹‹ä¸­çš„ï¼Œå› ä¸ºæ—¶åŒº <code>America/Denver</code> å’Œ <code>America/Toronto</code> ä¹‹é—´æœ‰ä¸¤ä¸ªå°æ—¶çš„å·®å¼‚ã€‚</p> <p>ä½œä¸ºä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ï¼Œä¸‹é¢çš„ä»£ç æ˜¾ç¤ºäº†ä¸€ä¸ªå…¬äº¤è½¦æ—…è¡Œæ—¶é—´è®¡ç®—å™¨ã€‚ å®ƒæœ‰ä¸€ä¸ªæ–¹æ³• <code>calculateTravelTime()</code>ï¼Œå®ƒéœ€è¦ä¸€ä¸ªç¦»å¼€çš„ <code>ZonedDateTime</code> å®ä¾‹å’Œä¸€ä¸ªåˆ°è¾¾çš„ <code>ZonedDateTime</code> å®ä¾‹ã€‚ è¯¥ä»£ç è°ƒç”¨ <code>calculateTravelTime()</code> æ–¹æ³•ä¸¤æ¬¡ã€‚ è¿™ä¸¤æ¬¡å…¬äº¤è½¦éƒ½åœ¨ä¸¹ä½›æ—©ä¸Š 8 ç‚¹ä»ç§‘ç½—æ‹‰å¤šå·ä¸¹ä½›å‡ºå‘ï¼Œå¹¶äºå¤šä¼¦å¤šæ—¶é—´ç¬¬äºŒå¤©æ—©ä¸Š 8 ç‚¹æŠµè¾¾å¤šä¼¦å¤šã€‚ å…¬äº¤è½¦é¦–æ¬¡äº 2014 å¹´ 3 æœˆ 8 æ—¥å¯ç¨‹ï¼Œç¬¬äºŒæ¬¡äº 2014 å¹´ 3 æœˆ 18 æ—¥å¯ç¨‹ã€‚</p> <p>ä¸¤ç§æƒ…å†µä¸‹çš„æ—…è¡Œæ—¶é—´æ˜¯å¤šå°‘?</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-85-1"><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.Duration</span><span class="p">;</span>
</span><span id="__span-85-2"><a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>
</span><span id="__span-85-3"><a id="__codelineno-85-3" name="__codelineno-85-3" href="#__codelineno-85-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.Month</span><span class="p">;</span>
</span><span id="__span-85-4"><a id="__codelineno-85-4" name="__codelineno-85-4" href="#__codelineno-85-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.ZoneId</span><span class="p">;</span>
</span><span id="__span-85-5"><a id="__codelineno-85-5" name="__codelineno-85-5" href="#__codelineno-85-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.ZonedDateTime</span><span class="p">;</span>
</span><span id="__span-85-6"><a id="__codelineno-85-6" name="__codelineno-85-6" href="#__codelineno-85-6"></a>
</span><span id="__span-85-7"><a id="__codelineno-85-7" name="__codelineno-85-7" href="#__codelineno-85-7"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TravelTimeCalculator</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-85-8"><a id="__codelineno-85-8" name="__codelineno-85-8" href="#__codelineno-85-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Duration</span><span class="w"> </span><span class="nf">calculateTravelTime</span><span class="p">(</span><span class="n">ZonedDateTime</span><span class="w"> </span><span class="n">departure</span><span class="p">,</span><span class="w"> </span><span class="n">ZonedDateTime</span><span class="w"> </span><span class="n">arrival</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-85-9"><a id="__codelineno-85-9" name="__codelineno-85-9" href="#__codelineno-85-9"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Duration</span><span class="p">.</span><span class="na">between</span><span class="p">(</span><span class="n">departure</span><span class="p">,</span><span class="w"> </span><span class="n">arrival</span><span class="p">);</span>
</span><span id="__span-85-10"><a id="__codelineno-85-10" name="__codelineno-85-10" href="#__codelineno-85-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-85-11"><a id="__codelineno-85-11" name="__codelineno-85-11" href="#__codelineno-85-11"></a>
</span><span id="__span-85-12"><a id="__codelineno-85-12" name="__codelineno-85-12" href="#__codelineno-85-12"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-85-13"><a id="__codelineno-85-13" name="__codelineno-85-13" href="#__codelineno-85-13"></a><span class="w">        </span><span class="n">TravelTimeCalculator</span><span class="w"> </span><span class="n">calculator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TravelTimeCalculator</span><span class="p">();</span>
</span><span id="__span-85-14"><a id="__codelineno-85-14" name="__codelineno-85-14" href="#__codelineno-85-14"></a><span class="w">        </span><span class="n">ZonedDateTime</span><span class="w"> </span><span class="n">departure1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ZonedDateTime</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span><span class="w"> </span><span class="n">Month</span><span class="p">.</span><span class="na">MARCH</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span>
</span><span id="__span-85-15"><a id="__codelineno-85-15" name="__codelineno-85-15" href="#__codelineno-85-15"></a><span class="w">                </span><span class="n">ZoneId</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">"America/Denver"</span><span class="p">));</span>
</span><span id="__span-85-16"><a id="__codelineno-85-16" name="__codelineno-85-16" href="#__codelineno-85-16"></a><span class="w">        </span><span class="n">ZonedDateTime</span><span class="w"> </span><span class="n">arrival1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ZonedDateTime</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span><span class="w"> </span><span class="n">Month</span><span class="p">.</span><span class="na">MARCH</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span>
</span><span id="__span-85-17"><a id="__codelineno-85-17" name="__codelineno-85-17" href="#__codelineno-85-17"></a><span class="w">                </span><span class="n">ZoneId</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">"America/Toronto"</span><span class="p">));</span>
</span><span id="__span-85-18"><a id="__codelineno-85-18" name="__codelineno-85-18" href="#__codelineno-85-18"></a><span class="w">        </span><span class="n">Duration</span><span class="w"> </span><span class="n">travelTime1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculator</span><span class="p">.</span><span class="na">calculateTravelTime</span><span class="p">(</span><span class="n">departure1</span><span class="p">,</span><span class="w"> </span><span class="n">arrival1</span><span class="p">);</span>
</span><span id="__span-85-19"><a id="__codelineno-85-19" name="__codelineno-85-19" href="#__codelineno-85-19"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Travel time 1: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">travelTime1</span><span class="p">.</span><span class="na">toHours</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" hours"</span><span class="p">);</span>
</span><span id="__span-85-20"><a id="__codelineno-85-20" name="__codelineno-85-20" href="#__codelineno-85-20"></a>
</span><span id="__span-85-21"><a id="__codelineno-85-21" name="__codelineno-85-21" href="#__codelineno-85-21"></a><span class="w">        </span><span class="n">ZonedDateTime</span><span class="w"> </span><span class="n">departure2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ZonedDateTime</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span><span class="w"> </span><span class="n">Month</span><span class="p">.</span><span class="na">MARCH</span><span class="p">,</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span>
</span><span id="__span-85-22"><a id="__codelineno-85-22" name="__codelineno-85-22" href="#__codelineno-85-22"></a><span class="w">                </span><span class="n">ZoneId</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">"America/Denver"</span><span class="p">));</span>
</span><span id="__span-85-23"><a id="__codelineno-85-23" name="__codelineno-85-23" href="#__codelineno-85-23"></a><span class="w">        </span><span class="n">ZonedDateTime</span><span class="w"> </span><span class="n">arrival2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ZonedDateTime</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span><span class="w"> </span><span class="n">Month</span><span class="p">.</span><span class="na">MARCH</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span>
</span><span id="__span-85-24"><a id="__codelineno-85-24" name="__codelineno-85-24" href="#__codelineno-85-24"></a><span class="w">                </span><span class="n">ZoneId</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">"America/Toronto"</span><span class="p">));</span>
</span><span id="__span-85-25"><a id="__codelineno-85-25" name="__codelineno-85-25" href="#__codelineno-85-25"></a><span class="w">        </span><span class="n">Duration</span><span class="w"> </span><span class="n">travelTime2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculator</span><span class="p">.</span><span class="na">calculateTravelTime</span><span class="p">(</span><span class="n">departure2</span><span class="p">,</span><span class="w"> </span><span class="n">arrival2</span><span class="p">);</span>
</span><span id="__span-85-26"><a id="__codelineno-85-26" name="__codelineno-85-26" href="#__codelineno-85-26"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Travel time 2: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">travelTime2</span><span class="p">.</span><span class="na">toHours</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" hours"</span><span class="p">);</span>
</span><span id="__span-85-27"><a id="__codelineno-85-27" name="__codelineno-85-27" href="#__codelineno-85-27"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-85-28"><a id="__codelineno-85-28" name="__codelineno-85-28" href="#__codelineno-85-28"></a><span class="p">}</span>
</span></code></pre></div> <p>è¿è¡Œç»“æœä¸ºï¼š</p> <div class="language-less highlight"><span class="filename">LessCss</span><pre><span></span><code><span id="__span-86-1"><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a><span class="nt">Travel</span><span class="w"> </span><span class="nt">time</span><span class="w"> </span><span class="nt">1</span><span class="o">:</span><span class="w"> </span><span class="nt">21</span><span class="w"> </span><span class="nt">hours</span>
</span><span id="__span-86-2"><a id="__codelineno-86-2" name="__codelineno-86-2" href="#__codelineno-86-2"></a>
</span><span id="__span-86-3"><a id="__codelineno-86-3" name="__codelineno-86-3" href="#__codelineno-86-3"></a><span class="nt">Travel</span><span class="w"> </span><span class="nt">time</span><span class="w"> </span><span class="nt">2</span><span class="o">:</span><span class="w"> </span><span class="nt">22</span><span class="w"> </span><span class="nt">hours</span>
</span></code></pre></div> <p>ä¸ºä»€ä¹ˆæœ‰è¿™ä¸ªåŒºåˆ«ï¼Ÿ å› ä¸º 2014 å¹´çš„å¤ä»¤æ—¶ä» 3 æœˆ 9 æ—¥æ˜ŸæœŸæ—¥å‡Œæ™¨ 2 ç‚¹å¼€å§‹ã€‚ å› æ­¤ï¼Œåœ¨ 2014 å¹´ 3 æœˆ 8 æ—¥è‡³ 2014 å¹´ 3 æœˆ 9 æ—¥ä¹‹é—´ â€œå¤±å»â€ äº†ä¸€å°æ—¶ã€‚</p> <h3 id="58datetimeformatter">5.8ã€DateTimeFormatter<a class="headerlink" href="#58datetimeformatter" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>æ–°çš„æ—¥æœŸ API ä¸­æä¾›äº†ä¸€ä¸ª<code>DateTimeFormatter</code> ç±»ç”¨äºå¤„ç†æ—¥æœŸæ ¼å¼åŒ–æ“ä½œï¼Œå®ƒè¢«åŒ…å«åœ¨ <code>java.time.format</code> åŒ…ä¸­ï¼ŒJava 8 çš„æ—¥æœŸç±»æœ‰ä¸€ä¸ª <code>format()</code> æ–¹æ³•ç”¨äºå°†æ—¥æœŸæ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ª <code>DateTimeFormatter</code> ç±»å‹å‚æ•°ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-87-1"><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">dateTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">();</span>
</span><span id="__span-87-2"><a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a><span class="n">String</span><span class="w"> </span><span class="n">strDate1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dateTime</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">DateTimeFormatter</span><span class="p">.</span><span class="na">BASIC_ISO_DATE</span><span class="p">);</span><span class="w">    </span><span class="c1">// 20170105</span>
</span><span id="__span-87-3"><a id="__codelineno-87-3" name="__codelineno-87-3" href="#__codelineno-87-3"></a><span class="n">String</span><span class="w"> </span><span class="n">strDate2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dateTime</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">DateTimeFormatter</span><span class="p">.</span><span class="na">ISO_LOCAL_DATE</span><span class="p">);</span><span class="w">    </span><span class="c1">// 2017-01-05</span>
</span><span id="__span-87-4"><a id="__codelineno-87-4" name="__codelineno-87-4" href="#__codelineno-87-4"></a><span class="n">String</span><span class="w"> </span><span class="n">strDate3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dateTime</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">DateTimeFormatter</span><span class="p">.</span><span class="na">ISO_LOCAL_TIME</span><span class="p">);</span><span class="w">    </span><span class="c1">// 14:20:16.998</span>
</span><span id="__span-87-5"><a id="__codelineno-87-5" name="__codelineno-87-5" href="#__codelineno-87-5"></a><span class="n">String</span><span class="w"> </span><span class="n">strDate4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dateTime</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">DateTimeFormatter</span><span class="p">.</span><span class="na">ofPattern</span><span class="p">(</span><span class="s">"yyyy-MM-dd"</span><span class="p">));</span><span class="w">   </span><span class="c1">// 2017-01-05</span>
</span><span id="__span-87-6"><a id="__codelineno-87-6" name="__codelineno-87-6" href="#__codelineno-87-6"></a><span class="c1">// ä»Šå¤©æ˜¯ï¼š2017å¹´ ä¸€æœˆ 05æ—¥ æ˜ŸæœŸå››</span>
</span><span id="__span-87-7"><a id="__codelineno-87-7" name="__codelineno-87-7" href="#__codelineno-87-7"></a><span class="n">String</span><span class="w"> </span><span class="n">strDate5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dateTime</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">DateTimeFormatter</span><span class="p">.</span><span class="na">ofPattern</span><span class="p">(</span><span class="s">"ä»Šå¤©æ˜¯ï¼šYYYYå¹´ MMMM DDæ—¥ E"</span><span class="p">,</span><span class="w"> </span><span class="n">Locale</span><span class="p">.</span><span class="na">CHINESE</span><span class="p">));</span><span class="w"> </span>
</span></code></pre></div> <p>åŒæ ·ï¼Œæ—¥æœŸç±»ä¹Ÿæ”¯æŒå°†ä¸€ä¸ªå­—ç¬¦ä¸²è§£ææˆä¸€ä¸ªæ—¥æœŸå¯¹è±¡ï¼Œä¾‹å¦‚ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-88-1"><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a><span class="n">String</span><span class="w"> </span><span class="n">strDate6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"2017-01-05"</span><span class="p">;</span>
</span><span id="__span-88-2"><a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a><span class="n">String</span><span class="w"> </span><span class="n">strDate7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"2017-01-05 12:30:05"</span><span class="p">;</span>
</span><span id="__span-88-3"><a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a>
</span><span id="__span-88-4"><a id="__codelineno-88-4" name="__codelineno-88-4" href="#__codelineno-88-4"></a><span class="n">LocalDate</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">.</span><span class="na">parse</span><span class="p">(</span><span class="n">strDate6</span><span class="p">,</span><span class="w"> </span><span class="n">DateTimeFormatter</span><span class="p">.</span><span class="na">ofPattern</span><span class="p">(</span><span class="s">"yyyy-MM-dd"</span><span class="p">));</span>
</span><span id="__span-88-5"><a id="__codelineno-88-5" name="__codelineno-88-5" href="#__codelineno-88-5"></a><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">dateTime1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">parse</span><span class="p">(</span><span class="n">strDate7</span><span class="p">,</span><span class="w"> </span><span class="n">DateTimeFormatter</span><span class="p">.</span><span class="na">ofPattern</span><span class="p">(</span><span class="s">"yyyy-MM-dd HH:mm:ss"</span><span class="p">));</span>
</span></code></pre></div> <p><strong>Date è½¬æ¢ä¸º LocalDateTime</strong></p> <p>æ–¹æ³• 1ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-89-1"><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a><span class="n">ZoneId</span><span class="w"> </span><span class="n">zoneId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ZoneId</span><span class="p">.</span><span class="na">systemDefault</span><span class="p">();</span>
</span><span id="__span-89-2"><a id="__codelineno-89-2" name="__codelineno-89-2" href="#__codelineno-89-2"></a><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">localDateTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Date</span><span class="p">().</span><span class="na">toInstant</span><span class="p">().</span><span class="na">atZone</span><span class="p">(</span><span class="n">zoneId</span><span class="p">).</span><span class="na">toLocalDateTime</span><span class="p">();</span>
</span></code></pre></div> <p>æ–¹æ³• 2ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-90-1"><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a><span class="n">ZoneId</span><span class="w"> </span><span class="n">zoneId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ZoneId</span><span class="p">.</span><span class="na">systemDefault</span><span class="p">();</span>
</span><span id="__span-90-2"><a id="__codelineno-90-2" name="__codelineno-90-2" href="#__codelineno-90-2"></a><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">localDateTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">ofInstant</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Date</span><span class="p">().</span><span class="na">toInstant</span><span class="p">(),</span><span class="w"> </span><span class="n">zoneId</span><span class="p">);</span>
</span></code></pre></div> <h2 id="6é»˜è®¤æ–¹æ³•">6ã€é»˜è®¤æ–¹æ³•<a class="headerlink" href="#6é»˜è®¤æ–¹æ³•" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>Java 8 æ–°å¢äº†æ¥å£çš„é»˜è®¤æ–¹æ³•ã€‚</p> <p>ç®€å•è¯´ï¼Œé»˜è®¤æ–¹æ³•å°±æ˜¯æ¥å£å¯ä»¥æœ‰å®ç°æ–¹æ³•ï¼Œè€Œä¸”ä¸éœ€è¦å®ç°ç±»å»å®ç°å…¶æ–¹æ³•ã€‚åªéœ€åœ¨æ–¹æ³•åå‰é¢åŠ ä¸ª <code>default</code> å…³é”®å­—å³å¯å®ç°é»˜è®¤æ–¹æ³•ã€‚</p> <blockquote> <p><strong>ä¸ºä»€ä¹ˆè¦æœ‰è¿™ä¸ªç‰¹æ€§ï¼Ÿ</strong></p> <p>é¦–å…ˆï¼Œä¹‹å‰çš„æ¥å£æ˜¯ä¸ªåŒåˆƒå‰‘ï¼Œå¥½å¤„æ˜¯é¢å‘æŠ½è±¡è€Œä¸æ˜¯é¢å‘å…·ä½“ç¼–ç¨‹ï¼Œç¼ºé™·æ˜¯ï¼Œå½“éœ€è¦ä¿®æ”¹æ¥å£æ—¶å€™ï¼Œéœ€è¦ä¿®æ”¹å…¨éƒ¨å®ç°è¯¥æ¥å£çš„ç±»ï¼Œç›®å‰çš„ java 8 ä¹‹å‰çš„é›†åˆæ¡†æ¶æ²¡æœ‰ <code>foreach</code> æ–¹æ³•ï¼Œé€šå¸¸èƒ½æƒ³åˆ°çš„è§£å†³åŠæ³•æ˜¯åœ¨ JDK é‡Œç»™ç›¸å…³çš„æ¥å£æ·»åŠ æ–°çš„æ–¹æ³•åŠå®ç°ã€‚ç„¶è€Œï¼Œå¯¹äºå·²ç»å‘å¸ƒçš„ç‰ˆæœ¬ï¼Œæ˜¯æ²¡æ³•åœ¨ç»™æ¥å£æ·»åŠ æ–°æ–¹æ³•çš„åŒæ—¶ä¸å½±å“å·²æœ‰çš„å®ç°ã€‚æ‰€ä»¥å¼•è¿›çš„é»˜è®¤æ–¹æ³•ã€‚ä»–ä»¬çš„ç›®çš„æ˜¯ä¸ºäº†è§£å†³æ¥å£çš„ä¿®æ”¹ä¸ç°æœ‰çš„å®ç°ä¸å…¼å®¹çš„é—®é¢˜ã€‚</p> </blockquote> <p><strong>è¯­æ³•</strong></p> <p>é»˜è®¤æ–¹æ³•è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-91-1"><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Vehicle</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-91-2"><a id="__codelineno-91-2" name="__codelineno-91-2" href="#__codelineno-91-2"></a><span class="w">   </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">(){</span>
</span><span id="__span-91-3"><a id="__codelineno-91-3" name="__codelineno-91-3" href="#__codelineno-91-3"></a><span class="w">      </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æˆ‘æ˜¯ä¸€è¾†è½¦!"</span><span class="p">);</span>
</span><span id="__span-91-4"><a id="__codelineno-91-4" name="__codelineno-91-4" href="#__codelineno-91-4"></a><span class="w">   </span><span class="p">}</span>
</span><span id="__span-91-5"><a id="__codelineno-91-5" name="__codelineno-91-5" href="#__codelineno-91-5"></a><span class="p">}</span>
</span></code></pre></div> <p><strong>å¤šä¸ªé»˜è®¤æ–¹æ³•</strong></p> <p>ä¸€ä¸ªæ¥å£æœ‰é»˜è®¤æ–¹æ³•ï¼Œè€ƒè™‘è¿™æ ·çš„æƒ…å†µï¼Œä¸€ä¸ªç±»å®ç°äº†å¤šä¸ªæ¥å£ï¼Œä¸”è¿™äº›æ¥å£æœ‰ç›¸åŒçš„é»˜è®¤æ–¹æ³•ï¼Œä»¥ä¸‹å®ä¾‹è¯´æ˜äº†è¿™ç§æƒ…å†µçš„è§£å†³æ–¹æ³•ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-92-1"><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Vehicle</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-92-2"><a id="__codelineno-92-2" name="__codelineno-92-2" href="#__codelineno-92-2"></a><span class="w">   </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">(){</span>
</span><span id="__span-92-3"><a id="__codelineno-92-3" name="__codelineno-92-3" href="#__codelineno-92-3"></a><span class="w">      </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æˆ‘æ˜¯ä¸€è¾†è½¦!"</span><span class="p">);</span>
</span><span id="__span-92-4"><a id="__codelineno-92-4" name="__codelineno-92-4" href="#__codelineno-92-4"></a><span class="w">   </span><span class="p">}</span>
</span><span id="__span-92-5"><a id="__codelineno-92-5" name="__codelineno-92-5" href="#__codelineno-92-5"></a><span class="p">}</span>
</span><span id="__span-92-6"><a id="__codelineno-92-6" name="__codelineno-92-6" href="#__codelineno-92-6"></a>
</span><span id="__span-92-7"><a id="__codelineno-92-7" name="__codelineno-92-7" href="#__codelineno-92-7"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">FourWheeler</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-92-8"><a id="__codelineno-92-8" name="__codelineno-92-8" href="#__codelineno-92-8"></a><span class="w">   </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">(){</span>
</span><span id="__span-92-9"><a id="__codelineno-92-9" name="__codelineno-92-9" href="#__codelineno-92-9"></a><span class="w">      </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æˆ‘æ˜¯ä¸€è¾†å››è½®è½¦!"</span><span class="p">);</span>
</span><span id="__span-92-10"><a id="__codelineno-92-10" name="__codelineno-92-10" href="#__codelineno-92-10"></a><span class="w">   </span><span class="p">}</span>
</span><span id="__span-92-11"><a id="__codelineno-92-11" name="__codelineno-92-11" href="#__codelineno-92-11"></a><span class="p">}</span>
</span></code></pre></div> <p>ç¬¬ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯åˆ›å»ºè‡ªå·±çš„é»˜è®¤æ–¹æ³•ï¼Œæ¥è¦†ç›–é‡å†™æ¥å£çš„é»˜è®¤æ–¹æ³•ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-93-1"><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Car</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Vehicle</span><span class="p">,</span><span class="w"> </span><span class="n">FourWheeler</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-93-2"><a id="__codelineno-93-2" name="__codelineno-93-2" href="#__codelineno-93-2"></a><span class="w">   </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">(){</span>
</span><span id="__span-93-3"><a id="__codelineno-93-3" name="__codelineno-93-3" href="#__codelineno-93-3"></a><span class="w">      </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æˆ‘æ˜¯ä¸€è¾†å››è½®æ±½è½¦!"</span><span class="p">);</span>
</span><span id="__span-93-4"><a id="__codelineno-93-4" name="__codelineno-93-4" href="#__codelineno-93-4"></a><span class="w">   </span><span class="p">}</span>
</span><span id="__span-93-5"><a id="__codelineno-93-5" name="__codelineno-93-5" href="#__codelineno-93-5"></a><span class="p">}</span>
</span></code></pre></div> <p>ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆå¯ä»¥ä½¿ç”¨ <code>super</code> æ¥è°ƒç”¨æŒ‡å®šæ¥å£çš„é»˜è®¤æ–¹æ³•ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-94-1"><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Car</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Vehicle</span><span class="p">,</span><span class="w"> </span><span class="n">FourWheeler</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-94-2"><a id="__codelineno-94-2" name="__codelineno-94-2" href="#__codelineno-94-2"></a><span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">(){</span>
</span><span id="__span-94-3"><a id="__codelineno-94-3" name="__codelineno-94-3" href="#__codelineno-94-3"></a><span class="w">      </span><span class="n">Vehicle</span><span class="p">.</span><span class="na">super</span><span class="p">.</span><span class="na">print</span><span class="p">();</span>
</span><span id="__span-94-4"><a id="__codelineno-94-4" name="__codelineno-94-4" href="#__codelineno-94-4"></a><span class="w">   </span><span class="p">}</span>
</span><span id="__span-94-5"><a id="__codelineno-94-5" name="__codelineno-94-5" href="#__codelineno-94-5"></a><span class="p">}</span>
</span></code></pre></div> <h3 id="61é™æ€é»˜è®¤æ–¹æ³•">6.1ã€é™æ€é»˜è®¤æ–¹æ³•<a class="headerlink" href="#61é™æ€é»˜è®¤æ–¹æ³•" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>Java 8 çš„å¦ä¸€ä¸ªç‰¹æ€§æ˜¯æ¥å£å¯ä»¥å£°æ˜ï¼ˆå¹¶ä¸”å¯ä»¥æä¾›å®ç°ï¼‰é™æ€æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-95-1"><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Vehicle</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-95-2"><a id="__codelineno-95-2" name="__codelineno-95-2" href="#__codelineno-95-2"></a><span class="w">   </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">(){</span>
</span><span id="__span-95-3"><a id="__codelineno-95-3" name="__codelineno-95-3" href="#__codelineno-95-3"></a><span class="w">      </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æˆ‘æ˜¯ä¸€è¾†è½¦!"</span><span class="p">);</span>
</span><span id="__span-95-4"><a id="__codelineno-95-4" name="__codelineno-95-4" href="#__codelineno-95-4"></a><span class="w">   </span><span class="p">}</span>
</span><span id="__span-95-5"><a id="__codelineno-95-5" name="__codelineno-95-5" href="#__codelineno-95-5"></a><span class="w">    </span><span class="c1">// é™æ€æ–¹æ³•</span>
</span><span id="__span-95-6"><a id="__codelineno-95-6" name="__codelineno-95-6" href="#__codelineno-95-6"></a><span class="w">   </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">blowHorn</span><span class="p">(){</span>
</span><span id="__span-95-7"><a id="__codelineno-95-7" name="__codelineno-95-7" href="#__codelineno-95-7"></a><span class="w">      </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æŒ‰å–‡å­!!!"</span><span class="p">);</span>
</span><span id="__span-95-8"><a id="__codelineno-95-8" name="__codelineno-95-8" href="#__codelineno-95-8"></a><span class="w">   </span><span class="p">}</span>
</span><span id="__span-95-9"><a id="__codelineno-95-9" name="__codelineno-95-9" href="#__codelineno-95-9"></a><span class="p">}</span>
</span></code></pre></div> <h3 id="62é»˜è®¤æ–¹æ³•å®ä¾‹">6.2ã€é»˜è®¤æ–¹æ³•å®ä¾‹<a class="headerlink" href="#62é»˜è®¤æ–¹æ³•å®ä¾‹" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç æ¥äº†è§£å…³äºé»˜è®¤æ–¹æ³•çš„ä½¿ç”¨ï¼Œå¯ä»¥å°†ä»£ç æ”¾å…¥ Java8Tester.java æ–‡ä»¶ä¸­ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-96-1"><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Java8Tester</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-96-2"><a id="__codelineno-96-2" name="__codelineno-96-2" href="#__codelineno-96-2"></a><span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">args</span><span class="o">[]</span><span class="p">){</span>
</span><span id="__span-96-3"><a id="__codelineno-96-3" name="__codelineno-96-3" href="#__codelineno-96-3"></a><span class="w">      </span><span class="n">Vehicle</span><span class="w"> </span><span class="n">vehicle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Car</span><span class="p">();</span>
</span><span id="__span-96-4"><a id="__codelineno-96-4" name="__codelineno-96-4" href="#__codelineno-96-4"></a><span class="w">      </span><span class="n">vehicle</span><span class="p">.</span><span class="na">print</span><span class="p">();</span>
</span><span id="__span-96-5"><a id="__codelineno-96-5" name="__codelineno-96-5" href="#__codelineno-96-5"></a><span class="w">   </span><span class="p">}</span>
</span><span id="__span-96-6"><a id="__codelineno-96-6" name="__codelineno-96-6" href="#__codelineno-96-6"></a><span class="p">}</span>
</span><span id="__span-96-7"><a id="__codelineno-96-7" name="__codelineno-96-7" href="#__codelineno-96-7"></a>
</span><span id="__span-96-8"><a id="__codelineno-96-8" name="__codelineno-96-8" href="#__codelineno-96-8"></a><span class="kd">interface</span> <span class="nc">Vehicle</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-96-9"><a id="__codelineno-96-9" name="__codelineno-96-9" href="#__codelineno-96-9"></a><span class="w">   </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">(){</span>
</span><span id="__span-96-10"><a id="__codelineno-96-10" name="__codelineno-96-10" href="#__codelineno-96-10"></a><span class="w">      </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æˆ‘æ˜¯ä¸€è¾†è½¦!"</span><span class="p">);</span>
</span><span id="__span-96-11"><a id="__codelineno-96-11" name="__codelineno-96-11" href="#__codelineno-96-11"></a><span class="w">   </span><span class="p">}</span>
</span><span id="__span-96-12"><a id="__codelineno-96-12" name="__codelineno-96-12" href="#__codelineno-96-12"></a>
</span><span id="__span-96-13"><a id="__codelineno-96-13" name="__codelineno-96-13" href="#__codelineno-96-13"></a><span class="w">   </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">blowHorn</span><span class="p">(){</span>
</span><span id="__span-96-14"><a id="__codelineno-96-14" name="__codelineno-96-14" href="#__codelineno-96-14"></a><span class="w">      </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æŒ‰å–‡å­!!!"</span><span class="p">);</span>
</span><span id="__span-96-15"><a id="__codelineno-96-15" name="__codelineno-96-15" href="#__codelineno-96-15"></a><span class="w">   </span><span class="p">}</span>
</span><span id="__span-96-16"><a id="__codelineno-96-16" name="__codelineno-96-16" href="#__codelineno-96-16"></a><span class="p">}</span>
</span><span id="__span-96-17"><a id="__codelineno-96-17" name="__codelineno-96-17" href="#__codelineno-96-17"></a>
</span><span id="__span-96-18"><a id="__codelineno-96-18" name="__codelineno-96-18" href="#__codelineno-96-18"></a><span class="kd">interface</span> <span class="nc">FourWheeler</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-96-19"><a id="__codelineno-96-19" name="__codelineno-96-19" href="#__codelineno-96-19"></a><span class="w">   </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">(){</span>
</span><span id="__span-96-20"><a id="__codelineno-96-20" name="__codelineno-96-20" href="#__codelineno-96-20"></a><span class="w">      </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æˆ‘æ˜¯ä¸€è¾†å››è½®è½¦!"</span><span class="p">);</span>
</span><span id="__span-96-21"><a id="__codelineno-96-21" name="__codelineno-96-21" href="#__codelineno-96-21"></a><span class="w">   </span><span class="p">}</span>
</span><span id="__span-96-22"><a id="__codelineno-96-22" name="__codelineno-96-22" href="#__codelineno-96-22"></a><span class="p">}</span>
</span><span id="__span-96-23"><a id="__codelineno-96-23" name="__codelineno-96-23" href="#__codelineno-96-23"></a>
</span><span id="__span-96-24"><a id="__codelineno-96-24" name="__codelineno-96-24" href="#__codelineno-96-24"></a><span class="kd">class</span> <span class="nc">Car</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Vehicle</span><span class="p">,</span><span class="w"> </span><span class="n">FourWheeler</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-96-25"><a id="__codelineno-96-25" name="__codelineno-96-25" href="#__codelineno-96-25"></a><span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">(){</span>
</span><span id="__span-96-26"><a id="__codelineno-96-26" name="__codelineno-96-26" href="#__codelineno-96-26"></a><span class="w">      </span><span class="n">Vehicle</span><span class="p">.</span><span class="na">super</span><span class="p">.</span><span class="na">print</span><span class="p">();</span>
</span><span id="__span-96-27"><a id="__codelineno-96-27" name="__codelineno-96-27" href="#__codelineno-96-27"></a><span class="w">      </span><span class="n">FourWheeler</span><span class="p">.</span><span class="na">super</span><span class="p">.</span><span class="na">print</span><span class="p">();</span>
</span><span id="__span-96-28"><a id="__codelineno-96-28" name="__codelineno-96-28" href="#__codelineno-96-28"></a><span class="w">      </span><span class="n">Vehicle</span><span class="p">.</span><span class="na">blowHorn</span><span class="p">();</span>
</span><span id="__span-96-29"><a id="__codelineno-96-29" name="__codelineno-96-29" href="#__codelineno-96-29"></a><span class="w">      </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æˆ‘æ˜¯ä¸€è¾†æ±½è½¦!"</span><span class="p">);</span>
</span><span id="__span-96-30"><a id="__codelineno-96-30" name="__codelineno-96-30" href="#__codelineno-96-30"></a><span class="w">   </span><span class="p">}</span>
</span><span id="__span-96-31"><a id="__codelineno-96-31" name="__codelineno-96-31" href="#__codelineno-96-31"></a><span class="p">}</span>
</span></code></pre></div> <p>æ‰§è¡Œä»¥ä¸Šè„šæœ¬ï¼Œè¾“å‡ºç»“æœä¸ºï¼š</p> <div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-97-1"><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a>$<span class="w"> </span>javac<span class="w"> </span>Java8Tester.java<span class="w"> </span>
</span><span id="__span-97-2"><a id="__codelineno-97-2" name="__codelineno-97-2" href="#__codelineno-97-2"></a>$<span class="w"> </span>java<span class="w"> </span>Java8Tester
</span><span id="__span-97-3"><a id="__codelineno-97-3" name="__codelineno-97-3" href="#__codelineno-97-3"></a>æˆ‘æ˜¯ä¸€è¾†è½¦!
</span><span id="__span-97-4"><a id="__codelineno-97-4" name="__codelineno-97-4" href="#__codelineno-97-4"></a>æˆ‘æ˜¯ä¸€è¾†å››è½®è½¦!
</span><span id="__span-97-5"><a id="__codelineno-97-5" name="__codelineno-97-5" href="#__codelineno-97-5"></a>æŒ‰å–‡å­!!!
</span><span id="__span-97-6"><a id="__codelineno-97-6" name="__codelineno-97-6" href="#__codelineno-97-6"></a>æˆ‘æ˜¯ä¸€è¾†æ±½è½¦!
</span></code></pre></div> <h2 id="7base64">7ã€Base64<a class="headerlink" href="#7base64" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>åœ¨ Java 8 ä¸­ï¼ŒBase64 ç¼–ç å·²ç»æˆä¸º Java ç±»åº“çš„æ ‡å‡†ã€‚</p> <p>Java 8 å†…ç½®äº† Base64 ç¼–ç çš„ç¼–ç å™¨å’Œè§£ç å™¨ã€‚</p> <p>Base64 å·¥å…·ç±»æä¾›äº†ä¸€å¥—é™æ€æ–¹æ³•è·å–ä¸‹é¢ä¸‰ç§ BASE64 ç¼–è§£ç å™¨ï¼š</p> <ul> <li>åŸºæœ¬ï¼šè¾“å‡ºè¢«æ˜ å°„åˆ°ä¸€ç»„å­—ç¬¦ <code>A-Za-z0-9+/</code>ï¼Œç¼–ç ä¸æ·»åŠ ä»»ä½•è¡Œæ ‡ï¼Œè¾“å‡ºçš„è§£ç ä»…æ”¯æŒ <code>A-Za-z0-9+/</code>ã€‚</li> <li>URLï¼šè¾“å‡ºæ˜ å°„åˆ°ä¸€ç»„å­—ç¬¦ <code>A-Za-z0-9+_</code>ï¼Œè¾“å‡ºæ˜¯ URL å’Œæ–‡ä»¶ã€‚</li> <li>MIMEï¼šè¾“å‡ºéšå°„åˆ° MIME å‹å¥½æ ¼å¼ã€‚è¾“å‡ºæ¯è¡Œä¸è¶…è¿‡ 76 å­—ç¬¦ï¼Œå¹¶ä¸”ä½¿ç”¨ <code>\r</code> å¹¶è·Ÿéš <code>\n</code> ä½œä¸ºåˆ†å‰²ã€‚ç¼–ç è¾“å‡ºæœ€åæ²¡æœ‰è¡Œåˆ†å‰²ã€‚</li> </ul> <h3 id="71å†…åµŒç±»">7.1ã€å†…åµŒç±»<a class="headerlink" href="#71å†…åµŒç±»" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <table> <thead> <tr> <th style="text-align: left;">åºå·</th> <th style="text-align: left;">å†…åµŒç±» &amp; æè¿°</th> </tr> </thead> <tbody> <tr> <td style="text-align: left;">1</td> <td style="text-align: left;"><strong>static class Base64.Decoder</strong><br>è¯¥ç±»å®ç°ä¸€ä¸ªè§£ç å™¨ï¼Œä½¿ç”¨ Base64 ç¼–ç æ¥è§£ç å­—èŠ‚æ•°æ®ã€‚</td> </tr> <tr> <td style="text-align: left;">2</td> <td style="text-align: left;"><strong>static class Base64.Encoder</strong><br>è¯¥ç±»å®ç°ä¸€ä¸ªç¼–ç å™¨ï¼Œä½¿ç”¨ Base64 ç¼–ç æ¥ç¼–ç å­—èŠ‚æ•°æ®ã€‚</td> </tr> </tbody> </table> <h3 id="72æ–¹æ³•">7.2ã€æ–¹æ³•<a class="headerlink" href="#72æ–¹æ³•" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <table> <thead> <tr> <th style="text-align: left;">åºå·</th> <th style="text-align: left;">æ–¹æ³•å &amp; æè¿°</th> </tr> </thead> <tbody> <tr> <td style="text-align: left;">1</td> <td style="text-align: left;"><strong>static Base64.Decoder getDecoder()</strong><br>è¿”å›ä¸€ä¸ª Base64.Decoder ï¼Œè§£ç ä½¿ç”¨åŸºæœ¬å‹ base64 ç¼–ç æ–¹æ¡ˆã€‚</td> </tr> <tr> <td style="text-align: left;">2</td> <td style="text-align: left;"><strong>static Base64.Encoder getEncoder()</strong><br>è¿”å›ä¸€ä¸ª Base64.Encoder ï¼Œç¼–ç ä½¿ç”¨åŸºæœ¬å‹ base64 ç¼–ç æ–¹æ¡ˆã€‚</td> </tr> <tr> <td style="text-align: left;">3</td> <td style="text-align: left;"><strong>static Base64.Decoder getMimeDecoder()</strong><br>è¿”å›ä¸€ä¸ª Base64.Decoder ï¼Œè§£ç ä½¿ç”¨ MIME å‹ base64 ç¼–ç æ–¹æ¡ˆã€‚</td> </tr> <tr> <td style="text-align: left;">4</td> <td style="text-align: left;"><strong>static Base64.Encoder getMimeEncoder()</strong><br>è¿”å›ä¸€ä¸ª Base64.Encoder ï¼Œç¼–ç ä½¿ç”¨ MIME å‹ base64 ç¼–ç æ–¹æ¡ˆã€‚</td> </tr> <tr> <td style="text-align: left;">5</td> <td style="text-align: left;"><strong>static Base64.Encoder getMimeEncoder(int lineLength, byte[] lineSeparator)</strong><br>è¿”å›ä¸€ä¸ª Base64.Encoder ï¼Œç¼–ç ä½¿ç”¨ MIME å‹ base64 ç¼–ç æ–¹æ¡ˆï¼Œ<br>å¯ä»¥é€šè¿‡å‚æ•°æŒ‡å®šæ¯è¡Œçš„é•¿åº¦åŠè¡Œçš„åˆ†éš”ç¬¦ã€‚</td> </tr> <tr> <td style="text-align: left;">6</td> <td style="text-align: left;"><strong>static Base64.Decoder getUrlDecoder()</strong><br>è¿”å›ä¸€ä¸ª Base64.Decoder ï¼Œè§£ç ä½¿ç”¨ URL å’Œæ–‡ä»¶åå®‰å…¨å‹ base64 ç¼–ç æ–¹æ¡ˆã€‚</td> </tr> <tr> <td style="text-align: left;">7</td> <td style="text-align: left;"><strong>static Base64.Encoder getUrlEncoder()</strong><br>è¿”å›ä¸€ä¸ª Base64.Encoder ï¼Œç¼–ç ä½¿ç”¨ URL å’Œæ–‡ä»¶åå®‰å…¨å‹ base64 ç¼–ç æ–¹æ¡ˆã€‚</td> </tr> </tbody> </table> <blockquote> <p>æ³¨æ„ï¼šBase64 ç±»çš„å¾ˆå¤šæ–¹æ³•ä» <strong>java.lang.Object</strong> ç±»ç»§æ‰¿ã€‚</p> </blockquote> <h3 id="73base64-å®ä¾‹">7.3ã€Base64 å®ä¾‹<a class="headerlink" href="#73base64-å®ä¾‹" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>ä»¥ä¸‹å®ä¾‹æ¼”ç¤ºäº† Base64 çš„ä½¿ç”¨ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-98-1"><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Base64</span><span class="p">;</span>
</span><span id="__span-98-2"><a id="__codelineno-98-2" name="__codelineno-98-2" href="#__codelineno-98-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.UUID</span><span class="p">;</span>
</span><span id="__span-98-3"><a id="__codelineno-98-3" name="__codelineno-98-3" href="#__codelineno-98-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.UnsupportedEncodingException</span><span class="p">;</span>
</span><span id="__span-98-4"><a id="__codelineno-98-4" name="__codelineno-98-4" href="#__codelineno-98-4"></a>
</span><span id="__span-98-5"><a id="__codelineno-98-5" name="__codelineno-98-5" href="#__codelineno-98-5"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Java8Tester</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-98-6"><a id="__codelineno-98-6" name="__codelineno-98-6" href="#__codelineno-98-6"></a><span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">args</span><span class="o">[]</span><span class="p">){</span>
</span><span id="__span-98-7"><a id="__codelineno-98-7" name="__codelineno-98-7" href="#__codelineno-98-7"></a><span class="w">      </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-98-8"><a id="__codelineno-98-8" name="__codelineno-98-8" href="#__codelineno-98-8"></a>
</span><span id="__span-98-9"><a id="__codelineno-98-9" name="__codelineno-98-9" href="#__codelineno-98-9"></a><span class="w">         </span><span class="c1">// ä½¿ç”¨åŸºæœ¬ç¼–ç </span>
</span><span id="__span-98-10"><a id="__codelineno-98-10" name="__codelineno-98-10" href="#__codelineno-98-10"></a><span class="w">         </span><span class="n">String</span><span class="w"> </span><span class="n">base64encodedString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Base64</span><span class="p">.</span><span class="na">getEncoder</span><span class="p">().</span><span class="na">encodeToString</span><span class="p">(</span><span class="s">"runoob?java8"</span><span class="p">.</span><span class="na">getBytes</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">));</span>
</span><span id="__span-98-11"><a id="__codelineno-98-11" name="__codelineno-98-11" href="#__codelineno-98-11"></a><span class="w">         </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Base64 ç¼–ç å­—ç¬¦ä¸² (åŸºæœ¬) :"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">base64encodedString</span><span class="p">);</span>
</span><span id="__span-98-12"><a id="__codelineno-98-12" name="__codelineno-98-12" href="#__codelineno-98-12"></a>
</span><span id="__span-98-13"><a id="__codelineno-98-13" name="__codelineno-98-13" href="#__codelineno-98-13"></a><span class="w">         </span><span class="c1">// è§£ç </span>
</span><span id="__span-98-14"><a id="__codelineno-98-14" name="__codelineno-98-14" href="#__codelineno-98-14"></a><span class="w">         </span><span class="kt">byte</span><span class="o">[]</span><span class="w"> </span><span class="n">base64decodedBytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Base64</span><span class="p">.</span><span class="na">getDecoder</span><span class="p">().</span><span class="na">decode</span><span class="p">(</span><span class="n">base64encodedString</span><span class="p">);</span>
</span><span id="__span-98-15"><a id="__codelineno-98-15" name="__codelineno-98-15" href="#__codelineno-98-15"></a>
</span><span id="__span-98-16"><a id="__codelineno-98-16" name="__codelineno-98-16" href="#__codelineno-98-16"></a><span class="w">         </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"åŸå§‹å­—ç¬¦ä¸²: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="n">base64decodedBytes</span><span class="p">,</span><span class="w"> </span><span class="s">"utf-8"</span><span class="p">));</span>
</span><span id="__span-98-17"><a id="__codelineno-98-17" name="__codelineno-98-17" href="#__codelineno-98-17"></a><span class="w">         </span><span class="n">base64encodedString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Base64</span><span class="p">.</span><span class="na">getUrlEncoder</span><span class="p">().</span><span class="na">encodeToString</span><span class="p">(</span><span class="s">"runoob?java8"</span><span class="p">.</span><span class="na">getBytes</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">));</span>
</span><span id="__span-98-18"><a id="__codelineno-98-18" name="__codelineno-98-18" href="#__codelineno-98-18"></a><span class="w">         </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Base64 ç¼–ç å­—ç¬¦ä¸² (URL) :"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">base64encodedString</span><span class="p">);</span>
</span><span id="__span-98-19"><a id="__codelineno-98-19" name="__codelineno-98-19" href="#__codelineno-98-19"></a>
</span><span id="__span-98-20"><a id="__codelineno-98-20" name="__codelineno-98-20" href="#__codelineno-98-20"></a><span class="w">         </span><span class="n">StringBuilder</span><span class="w"> </span><span class="n">stringBuilder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StringBuilder</span><span class="p">();</span>
</span><span id="__span-98-21"><a id="__codelineno-98-21" name="__codelineno-98-21" href="#__codelineno-98-21"></a>
</span><span id="__span-98-22"><a id="__codelineno-98-22" name="__codelineno-98-22" href="#__codelineno-98-22"></a><span class="w">         </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-98-23"><a id="__codelineno-98-23" name="__codelineno-98-23" href="#__codelineno-98-23"></a><span class="w">            </span><span class="n">stringBuilder</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">().</span><span class="na">toString</span><span class="p">());</span>
</span><span id="__span-98-24"><a id="__codelineno-98-24" name="__codelineno-98-24" href="#__codelineno-98-24"></a><span class="w">         </span><span class="p">}</span>
</span><span id="__span-98-25"><a id="__codelineno-98-25" name="__codelineno-98-25" href="#__codelineno-98-25"></a>
</span><span id="__span-98-26"><a id="__codelineno-98-26" name="__codelineno-98-26" href="#__codelineno-98-26"></a><span class="w">         </span><span class="kt">byte</span><span class="o">[]</span><span class="w"> </span><span class="n">mimeBytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stringBuilder</span><span class="p">.</span><span class="na">toString</span><span class="p">().</span><span class="na">getBytes</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">);</span>
</span><span id="__span-98-27"><a id="__codelineno-98-27" name="__codelineno-98-27" href="#__codelineno-98-27"></a><span class="w">         </span><span class="n">String</span><span class="w"> </span><span class="n">mimeEncodedString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Base64</span><span class="p">.</span><span class="na">getMimeEncoder</span><span class="p">().</span><span class="na">encodeToString</span><span class="p">(</span><span class="n">mimeBytes</span><span class="p">);</span>
</span><span id="__span-98-28"><a id="__codelineno-98-28" name="__codelineno-98-28" href="#__codelineno-98-28"></a><span class="w">         </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Base64 ç¼–ç å­—ç¬¦ä¸² (MIME) :"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">mimeEncodedString</span><span class="p">);</span>
</span><span id="__span-98-29"><a id="__codelineno-98-29" name="__codelineno-98-29" href="#__codelineno-98-29"></a>
</span><span id="__span-98-30"><a id="__codelineno-98-30" name="__codelineno-98-30" href="#__codelineno-98-30"></a><span class="w">      </span><span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="n">UnsupportedEncodingException</span><span class="w"> </span><span class="n">e</span><span class="p">){</span>
</span><span id="__span-98-31"><a id="__codelineno-98-31" name="__codelineno-98-31" href="#__codelineno-98-31"></a><span class="w">         </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Error :"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
</span><span id="__span-98-32"><a id="__codelineno-98-32" name="__codelineno-98-32" href="#__codelineno-98-32"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-98-33"><a id="__codelineno-98-33" name="__codelineno-98-33" href="#__codelineno-98-33"></a><span class="w">   </span><span class="p">}</span>
</span><span id="__span-98-34"><a id="__codelineno-98-34" name="__codelineno-98-34" href="#__codelineno-98-34"></a><span class="p">}</span>
</span></code></pre></div> <p>æ‰§è¡Œä»¥ä¸Šè„šæœ¬ï¼Œè¾“å‡ºç»“æœä¸ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-99-1"><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a>$ javac Java8Tester.java 
</span><span id="__span-99-2"><a id="__codelineno-99-2" name="__codelineno-99-2" href="#__codelineno-99-2"></a>$ java Java8Tester
</span><span id="__span-99-3"><a id="__codelineno-99-3" name="__codelineno-99-3" href="#__codelineno-99-3"></a>åŸå§‹å­—ç¬¦ä¸²: runoob?java8
</span><span id="__span-99-4"><a id="__codelineno-99-4" name="__codelineno-99-4" href="#__codelineno-99-4"></a>Base64 ç¼–ç å­—ç¬¦ä¸² (URL) :VHV0b3JpYWxzUG9pbnQ_amF2YTg=
</span><span id="__span-99-5"><a id="__codelineno-99-5" name="__codelineno-99-5" href="#__codelineno-99-5"></a>Base64 ç¼–ç å­—ç¬¦ä¸² (MIME) :M2Q4YmUxMTEtYWRkZi00NzBlLTgyZDgtN2MwNjgzOGY2NGFlOTQ3NDYyMWEtZDM4ZS00YWVhLTkz
</span><span id="__span-99-6"><a id="__codelineno-99-6" name="__codelineno-99-6" href="#__codelineno-99-6"></a>OTYtY2ZjMzZiMzFhNmZmOGJmOGI2OTYtMzkxZi00OTJiLWEyMTQtMjgwN2RjOGI0MTBmZWUwMGNk
</span><span id="__span-99-7"><a id="__codelineno-99-7" name="__codelineno-99-7" href="#__codelineno-99-7"></a>NTktY2ZiZS00MTMxLTgzODctNDRjMjFkYmZmNGM4Njg1NDc3OGItNzNlMC00ZWM4LTgxNzAtNjY3
</span><span id="__span-99-8"><a id="__codelineno-99-8" name="__codelineno-99-8" href="#__codelineno-99-8"></a>NTgyMGY3YzVhZWQyMmNiZGItOTIwZi00NGUzLTlkMjAtOTkzZTI1MjUwMDU5ZjdkYjg2M2UtZTJm
</span><span id="__span-99-9"><a id="__codelineno-99-9" name="__codelineno-99-9" href="#__codelineno-99-9"></a>YS00Y2Y2LWIwNDYtNWQ2MGRiOWQyZjFiMzJhMzYxOWQtNDE0ZS00MmRiLTk3NDgtNmM4NTczYjMx
</span><span id="__span-99-10"><a id="__codelineno-99-10" name="__codelineno-99-10" href="#__codelineno-99-10"></a>ZDIzNGRhOWU4NDAtNTBiMi00ZmE2LWE0M2ItZjU3MWFiNTI2NmQ2NTlmMTFmZjctYjg1NC00NmE1
</span><span id="__span-99-11"><a id="__codelineno-99-11" name="__codelineno-99-11" href="#__codelineno-99-11"></a>LWEzMWItYjk3MmEwZTYyNTdk
</span></code></pre></div> <h2 id="8optional-ç±»">8ã€Optional ç±»<a class="headerlink" href="#8optional-ç±»" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>Optional ç±»æ˜¯ä¸€ä¸ªå¯ä»¥ä¸º <code>null</code> çš„å®¹å™¨å¯¹è±¡ã€‚å¦‚æœå€¼å­˜åœ¨åˆ™ <code>isPresent()</code> æ–¹æ³•ä¼šè¿”å› <code>true</code>ï¼Œè°ƒç”¨ <code>get()</code> æ–¹æ³•ä¼šè¿”å›è¯¥å¯¹è±¡ã€‚</p> <p>Optional æ˜¯ä¸ªå®¹å™¨ï¼šå®ƒå¯ä»¥ä¿å­˜ç±»å‹ <code>T</code> çš„å€¼ï¼Œæˆ–è€…ä»…ä»…ä¿å­˜ <code>null</code>ã€‚Optional æä¾›å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ˜¾å¼è¿›è¡Œç©ºå€¼æ£€æµ‹ã€‚</p> <p>Optional ç±»çš„å¼•å…¥å¾ˆå¥½çš„è§£å†³ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p> <h3 id="81optional-å£°æ˜">8.1ã€Optional å£°æ˜<a class="headerlink" href="#81optional-å£°æ˜" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>ä»¥ä¸‹æ˜¯ä¸€ä¸ª <code>java.util.Optional&lt;T&gt;</code> ç±»çš„å£°æ˜ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-100-1"><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Optional</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Object</span>
</span></code></pre></div> <h3 id="82optional-æ–¹æ³•">8.2ã€Optional æ–¹æ³•<a class="headerlink" href="#82optional-æ–¹æ³•" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <table> <thead> <tr> <th style="text-align: left;">æ–¹æ³•</th> <th>æè¿°</th> </tr> </thead> <tbody> <tr> <td style="text-align: left;"><code>static &lt;T&gt; Optional&lt;T&gt; empty()</code></td> <td>è¿”å›ç©ºçš„ Optional å®ä¾‹ã€‚</td> </tr> <tr> <td style="text-align: left;"><code>boolean equals(Object obj)</code></td> <td>åˆ¤æ–­å…¶ä»–å¯¹è±¡æ˜¯å¦ç­‰äº Optionalã€‚</td> </tr> <tr> <td style="text-align: left;"><code>Optional&lt;T&gt; filter(Predicate&lt;? super T&gt; predicate)</code></td> <td>å¦‚æœå€¼å­˜åœ¨ï¼Œå¹¶ä¸”è¿™ä¸ªå€¼åŒ¹é…ç»™å®šçš„ <em>predicate</em>ï¼Œè¿”å›ä¸€ä¸ªOptional ç”¨ä»¥æè¿°è¿™ä¸ªå€¼ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªç©ºçš„ Optionalã€‚</td> </tr> <tr> <td style="text-align: left;"><code>&lt;U&gt; Optional&lt;U&gt; map(Function&lt;? super T, ? extends U&gt; mapper)</code></td> <td>å¦‚æœæœ‰å€¼ï¼Œåˆ™å¯¹å…¶æ‰§è¡Œè°ƒç”¨æ˜ å°„å‡½æ•°å¾—åˆ°è¿”å›å€¼ã€‚å¦‚æœè¿”å›å€¼ä¸ä¸º <code>null</code>ï¼Œåˆ™åˆ›å»ºåŒ…å«æ˜ å°„è¿”å›å€¼çš„ Optional ä½œä¸º <code>map</code> æ–¹æ³•è¿”å›å€¼ï¼Œå¦åˆ™è¿”å›ç©º Optionalã€‚</td> </tr> <tr> <td style="text-align: left;"><code>&lt;U&gt; Optional&lt;U&gt; flatMap(Function&lt;? super T, Optional&lt;U&gt;&gt; mapper)</code></td> <td>å¦‚æœå€¼å­˜åœ¨ï¼Œè¿”å›åŸºäº Optional åŒ…å«çš„æ˜ å°„æ–¹æ³•çš„å€¼ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªç©ºçš„ Optionalã€‚</td> </tr> <tr> <td style="text-align: left;"><code>T get()</code></td> <td>å¦‚æœåœ¨è¿™ä¸ª Optional ä¸­åŒ…å«è¿™ä¸ªå€¼ï¼Œè¿”å›å€¼ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼šNoSuchElementExceptionã€‚</td> </tr> <tr> <td style="text-align: left;"><code>int hashCode()</code></td> <td>è¿”å›å­˜åœ¨å€¼çš„å“ˆå¸Œç ï¼Œå¦‚æœå€¼ä¸å­˜åœ¨åˆ™è¿”å› <code>0</code>ã€‚</td> </tr> <tr> <td style="text-align: left;"><code>void ifPresent(Consumer&lt;? super T&gt; consumer)</code></td> <td>å¦‚æœå€¼å­˜åœ¨åˆ™ä½¿ç”¨è¯¥å€¼è°ƒç”¨ <em>consumer</em>ï¼Œå¦åˆ™ä¸åšä»»ä½•äº‹æƒ…ã€‚</td> </tr> <tr> <td style="text-align: left;"><code>boolean isPresent()</code></td> <td>å¦‚æœå€¼å­˜åœ¨åˆ™æ–¹æ³•ä¼šè¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚</td> </tr> <tr> <td style="text-align: left;"><code>static &lt;T&gt; Optional&lt;T&gt; of(T value)</code></td> <td>è¿”å›ä¸€ä¸ªæŒ‡å®šé <code>null</code> å€¼çš„ Optionalã€‚</td> </tr> <tr> <td style="text-align: left;"><code>static &lt;T&gt; Optional&lt;T&gt; ofNullable(T value)</code></td> <td>å¦‚æœä¸ºéç©ºï¼Œè¿”å› Optional æè¿°çš„æŒ‡å®šå€¼ï¼Œå¦åˆ™è¿”å›ç©ºçš„ Optionalã€‚</td> </tr> <tr> <td style="text-align: left;"><code>T orElse(T other)</code></td> <td>å¦‚æœå­˜åœ¨è¯¥å€¼ï¼Œè¿”å›å€¼ï¼Œ å¦åˆ™è¿”å› <em>other</em>ã€‚</td> </tr> <tr> <td style="text-align: left;"><code>T orElseGet(Supplier&lt;? extends T&gt; other)</code></td> <td>å¦‚æœå­˜åœ¨è¯¥å€¼ï¼Œè¿”å›å€¼ï¼Œ å¦åˆ™è§¦å‘ <em>other</em>ï¼Œå¹¶è¿”å› <em>other</em> è°ƒç”¨çš„ç»“æœã€‚</td> </tr> <tr> <td style="text-align: left;"><code>&lt;X extends Throwable&gt; T orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier)</code></td> <td>å¦‚æœå­˜åœ¨è¯¥å€¼ï¼Œè¿”å›åŒ…å«çš„å€¼ï¼Œå¦åˆ™æŠ›å‡ºç”± Supplier ç»§æ‰¿çš„å¼‚å¸¸</td> </tr> <tr> <td style="text-align: left;"><code>String toString()</code></td> <td>è¿”å›ä¸€ä¸ª Optional çš„éç©ºå­—ç¬¦ä¸²ï¼Œç”¨æ¥è°ƒè¯•</td> </tr> </tbody> </table> <blockquote> <p>æ³¨æ„ï¼š è¿™äº›æ–¹æ³•æ˜¯ä» <code>java.lang.Object</code> ç±»ç»§æ‰¿æ¥çš„ã€‚</p> </blockquote> <h3 id="83optional-å®ä¾‹">8.3ã€Optional å®ä¾‹<a class="headerlink" href="#83optional-å®ä¾‹" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-101-1"><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Optional</span><span class="p">;</span>
</span><span id="__span-101-2"><a id="__codelineno-101-2" name="__codelineno-101-2" href="#__codelineno-101-2"></a>
</span><span id="__span-101-3"><a id="__codelineno-101-3" name="__codelineno-101-3" href="#__codelineno-101-3"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Java8Tester</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-101-4"><a id="__codelineno-101-4" name="__codelineno-101-4" href="#__codelineno-101-4"></a><span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">args</span><span class="o">[]</span><span class="p">){</span>
</span><span id="__span-101-5"><a id="__codelineno-101-5" name="__codelineno-101-5" href="#__codelineno-101-5"></a>
</span><span id="__span-101-6"><a id="__codelineno-101-6" name="__codelineno-101-6" href="#__codelineno-101-6"></a><span class="w">      </span><span class="n">Java8Tester</span><span class="w"> </span><span class="n">java8Tester</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Java8Tester</span><span class="p">();</span>
</span><span id="__span-101-7"><a id="__codelineno-101-7" name="__codelineno-101-7" href="#__codelineno-101-7"></a><span class="w">      </span><span class="n">Integer</span><span class="w"> </span><span class="n">value1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-101-8"><a id="__codelineno-101-8" name="__codelineno-101-8" href="#__codelineno-101-8"></a><span class="w">      </span><span class="n">Integer</span><span class="w"> </span><span class="n">value2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Integer</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</span><span id="__span-101-9"><a id="__codelineno-101-9" name="__codelineno-101-9" href="#__codelineno-101-9"></a>
</span><span id="__span-101-10"><a id="__codelineno-101-10" name="__codelineno-101-10" href="#__codelineno-101-10"></a><span class="w">      </span><span class="c1">// Optional.ofNullable - å…è®¸ä¼ é€’ä¸º null å‚æ•°</span>
</span><span id="__span-101-11"><a id="__codelineno-101-11" name="__codelineno-101-11" href="#__codelineno-101-11"></a><span class="w">      </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Optional</span><span class="p">.</span><span class="na">ofNullable</span><span class="p">(</span><span class="n">value1</span><span class="p">);</span>
</span><span id="__span-101-12"><a id="__codelineno-101-12" name="__codelineno-101-12" href="#__codelineno-101-12"></a>
</span><span id="__span-101-13"><a id="__codelineno-101-13" name="__codelineno-101-13" href="#__codelineno-101-13"></a><span class="w">      </span><span class="c1">// Optional.of - å¦‚æœä¼ é€’çš„å‚æ•°æ˜¯ nullï¼ŒæŠ›å‡ºå¼‚å¸¸ NullPointerException</span>
</span><span id="__span-101-14"><a id="__codelineno-101-14" name="__codelineno-101-14" href="#__codelineno-101-14"></a><span class="w">      </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Optional</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">value2</span><span class="p">);</span>
</span><span id="__span-101-15"><a id="__codelineno-101-15" name="__codelineno-101-15" href="#__codelineno-101-15"></a><span class="w">      </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">java8Tester</span><span class="p">.</span><span class="na">sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">));</span>
</span><span id="__span-101-16"><a id="__codelineno-101-16" name="__codelineno-101-16" href="#__codelineno-101-16"></a><span class="w">   </span><span class="p">}</span>
</span><span id="__span-101-17"><a id="__codelineno-101-17" name="__codelineno-101-17" href="#__codelineno-101-17"></a>
</span><span id="__span-101-18"><a id="__codelineno-101-18" name="__codelineno-101-18" href="#__codelineno-101-18"></a><span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">b</span><span class="p">){</span>
</span><span id="__span-101-19"><a id="__codelineno-101-19" name="__codelineno-101-19" href="#__codelineno-101-19"></a>
</span><span id="__span-101-20"><a id="__codelineno-101-20" name="__codelineno-101-20" href="#__codelineno-101-20"></a><span class="w">      </span><span class="c1">// Optional.isPresent - åˆ¤æ–­å€¼æ˜¯å¦å­˜åœ¨</span>
</span><span id="__span-101-21"><a id="__codelineno-101-21" name="__codelineno-101-21" href="#__codelineno-101-21"></a>
</span><span id="__span-101-22"><a id="__codelineno-101-22" name="__codelineno-101-22" href="#__codelineno-101-22"></a><span class="w">      </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"ç¬¬ä¸€ä¸ªå‚æ•°å€¼å­˜åœ¨: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="na">isPresent</span><span class="p">());</span>
</span><span id="__span-101-23"><a id="__codelineno-101-23" name="__codelineno-101-23" href="#__codelineno-101-23"></a><span class="w">      </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"ç¬¬äºŒä¸ªå‚æ•°å€¼å­˜åœ¨: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="na">isPresent</span><span class="p">());</span>
</span><span id="__span-101-24"><a id="__codelineno-101-24" name="__codelineno-101-24" href="#__codelineno-101-24"></a>
</span><span id="__span-101-25"><a id="__codelineno-101-25" name="__codelineno-101-25" href="#__codelineno-101-25"></a><span class="w">      </span><span class="c1">// Optional.orElse - å¦‚æœå€¼å­˜åœ¨ï¼Œè¿”å›å®ƒï¼Œå¦åˆ™è¿”å›é»˜è®¤å€¼</span>
</span><span id="__span-101-26"><a id="__codelineno-101-26" name="__codelineno-101-26" href="#__codelineno-101-26"></a><span class="w">      </span><span class="n">Integer</span><span class="w"> </span><span class="n">value1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="na">orElse</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Integer</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
</span><span id="__span-101-27"><a id="__codelineno-101-27" name="__codelineno-101-27" href="#__codelineno-101-27"></a>
</span><span id="__span-101-28"><a id="__codelineno-101-28" name="__codelineno-101-28" href="#__codelineno-101-28"></a><span class="w">      </span><span class="c1">//Optional.get - è·å–å€¼ï¼Œå€¼éœ€è¦å­˜åœ¨</span>
</span><span id="__span-101-29"><a id="__codelineno-101-29" name="__codelineno-101-29" href="#__codelineno-101-29"></a><span class="w">      </span><span class="n">Integer</span><span class="w"> </span><span class="n">value2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="na">get</span><span class="p">();</span>
</span><span id="__span-101-30"><a id="__codelineno-101-30" name="__codelineno-101-30" href="#__codelineno-101-30"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">value1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">value2</span><span class="p">;</span>
</span><span id="__span-101-31"><a id="__codelineno-101-31" name="__codelineno-101-31" href="#__codelineno-101-31"></a><span class="w">   </span><span class="p">}</span>
</span><span id="__span-101-32"><a id="__codelineno-101-32" name="__codelineno-101-32" href="#__codelineno-101-32"></a><span class="p">}</span>
</span></code></pre></div> <p>æ‰§è¡Œä»¥ä¸Šè„šæœ¬ï¼Œè¾“å‡ºç»“æœä¸ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-102-1"><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a>$ javac Java8Tester.java 
</span><span id="__span-102-2"><a id="__codelineno-102-2" name="__codelineno-102-2" href="#__codelineno-102-2"></a>$ java Java8Tester
</span><span id="__span-102-3"><a id="__codelineno-102-3" name="__codelineno-102-3" href="#__codelineno-102-3"></a>ç¬¬ä¸€ä¸ªå‚æ•°å€¼å­˜åœ¨: false
</span><span id="__span-102-4"><a id="__codelineno-102-4" name="__codelineno-102-4" href="#__codelineno-102-4"></a>ç¬¬äºŒä¸ªå‚æ•°å€¼å­˜åœ¨: true
</span><span id="__span-102-5"><a id="__codelineno-102-5" name="__codelineno-102-5" href="#__codelineno-102-5"></a>10
</span></code></pre></div> <h3 id="84æ­£ç¡®ä½¿ç”¨-optional">8.4ã€æ­£ç¡®ä½¿ç”¨ Optional<a class="headerlink" href="#84æ­£ç¡®ä½¿ç”¨-optional" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p><strong>å°½é‡é¿å…ä½¿ç”¨çš„åœ°æ–¹ï¼š</strong></p> <ol> <li>é¿å…ä½¿ç”¨ <code>Optional.isPresent()</code> æ¥æ£€æŸ¥å®ä¾‹æ˜¯å¦å­˜åœ¨ï¼Œå› ä¸ºè¿™ç§æ–¹å¼å’Œ <code>null != obj</code> æ²¡æœ‰åŒºåˆ«ï¼Œè¿™æ ·ç”¨å°±æ²¡ä»€ä¹ˆæ„ä¹‰äº†ã€‚</li> <li>é¿å…ä½¿ç”¨ <code>Optional.get()</code> æ–¹å¼æ¥è·å–å®ä¾‹å¯¹è±¡ï¼Œå› ä¸ºä½¿ç”¨å‰éœ€è¦ä½¿ç”¨ <code>Optional.isPresent()</code> æ¥æ£€æŸ¥å®ä¾‹æ˜¯å¦å­˜åœ¨ï¼Œå¦åˆ™ä¼šå‡ºç° NPE é—®é¢˜ã€‚</li> <li>é¿å…ä½¿ç”¨ Optional ä½œä¸ºç±»æˆ–è€…å®ä¾‹çš„å±æ€§ï¼Œè€Œåº”è¯¥åœ¨è¿”å›å€¼ä¸­ç”¨æ¥åŒ…è£…è¿”å›å®ä¾‹å¯¹è±¡ã€‚</li> <li>é¿å…ä½¿ç”¨ Optional ä½œä¸ºæ–¹æ³•çš„å‚æ•°ï¼ŒåŸå› åŒ 3ã€‚</li> </ol> <p><strong>æ­£ç¡®ä½¿ç”¨æ–¹å¼ï¼š</strong></p> <ol> <li> <p>å®ä¾‹å¯¹è±¡å­˜åœ¨åˆ™è¿”å›ï¼Œå¦åˆ™æä¾›é»˜è®¤å€¼æˆ–è€…é€šè¿‡æ–¹æ³•æ¥è®¾ç½®è¿”å›å€¼ï¼Œå³ä½¿ç”¨ <code>orElse</code>/<code>orElseGet</code> æ–¹å¼ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-103-1"><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a><span class="c1">//å­˜åœ¨åˆ™è¿”å›</span>
</span><span id="__span-103-2"><a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a><span class="n">User</span><span class="w"> </span><span class="n">king</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">"king"</span><span class="p">);</span>
</span><span id="__span-103-3"><a id="__codelineno-103-3" name="__codelineno-103-3" href="#__codelineno-103-3"></a><span class="n">Optional</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">userOpt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Optional</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">king</span><span class="p">);</span>
</span><span id="__span-103-4"><a id="__codelineno-103-4" name="__codelineno-103-4" href="#__codelineno-103-4"></a><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userOpt</span><span class="p">.</span><span class="na">orElse</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</span><span id="__span-103-5"><a id="__codelineno-103-5" name="__codelineno-103-5" href="#__codelineno-103-5"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>
</span></code></pre></div> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-104-1"><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a><span class="c1">//ä¸å­˜åœ¨æä¾›é»˜è®¤å€¼</span>
</span><span id="__span-104-2"><a id="__codelineno-104-2" name="__codelineno-104-2" href="#__codelineno-104-2"></a><span class="n">User</span><span class="w"> </span><span class="n">user2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-104-3"><a id="__codelineno-104-3" name="__codelineno-104-3" href="#__codelineno-104-3"></a><span class="n">Optional</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">userOpt2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Optional</span><span class="p">.</span><span class="na">ofNullable</span><span class="p">(</span><span class="n">user2</span><span class="p">);</span>
</span><span id="__span-104-4"><a id="__codelineno-104-4" name="__codelineno-104-4" href="#__codelineno-104-4"></a><span class="n">User</span><span class="w"> </span><span class="n">user3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userOpt2</span><span class="p">.</span><span class="na">orElse</span><span class="p">(</span><span class="n">unknown</span><span class="p">);</span>
</span><span id="__span-104-5"><a id="__codelineno-104-5" name="__codelineno-104-5" href="#__codelineno-104-5"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user3</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>
</span></code></pre></div> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-105-1"><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a><span class="c1">//é€šè¿‡æ–¹æ³•æä¾›å€¼</span>
</span><span id="__span-105-2"><a id="__codelineno-105-2" name="__codelineno-105-2" href="#__codelineno-105-2"></a><span class="n">User</span><span class="w"> </span><span class="n">user4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userOpt2</span><span class="p">.</span><span class="na">orElseGet</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">"DEFAULT"</span><span class="p">));</span><span class="w"> </span>
</span><span id="__span-105-3"><a id="__codelineno-105-3" name="__codelineno-105-3" href="#__codelineno-105-3"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user4</span><span class="p">.</span><span class="na">getName</span><span class="p">())</span>
</span></code></pre></div> <p>ä¸å»ºè®®è¿™æ ·ä½¿ç”¨ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-106-1"><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a><span class="k">if</span><span class="p">(</span><span class="n">userOpt</span><span class="p">.</span><span class="na">isPresent</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-106-2"><a id="__codelineno-106-2" name="__codelineno-106-2" href="#__codelineno-106-2"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">userOpt</span><span class="p">.</span><span class="na">get</span><span class="p">().</span><span class="na">getName</span><span class="p">());</span>
</span><span id="__span-106-3"><a id="__codelineno-106-3" name="__codelineno-106-3" href="#__codelineno-106-3"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-106-4"><a id="__codelineno-106-4" name="__codelineno-106-4" href="#__codelineno-106-4"></a><span class="w">    </span><span class="c1">//ã€‚ã€‚ã€‚</span>
</span><span id="__span-106-5"><a id="__codelineno-106-5" name="__codelineno-106-5" href="#__codelineno-106-5"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p>ä½¿ç”¨ <code>ifPresent()</code> æ¥è¿›è¡Œå¯¹è±¡æ“ä½œï¼Œå­˜åœ¨åˆ™æ“ä½œï¼Œå¦åˆ™ä¸æ“ä½œï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-107-1"><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a><span class="c1">//å®ä¾‹å­˜åœ¨åˆ™æ“ä½œï¼Œå¦åˆ™ä¸æ“ä½œ</span>
</span><span id="__span-107-2"><a id="__codelineno-107-2" name="__codelineno-107-2" href="#__codelineno-107-2"></a><span class="n">userOpt</span><span class="p">.</span><span class="na">ifPresent</span><span class="p">(</span><span class="n">u</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">u</span><span class="p">.</span><span class="na">getName</span><span class="p">()));</span>
</span><span id="__span-107-3"><a id="__codelineno-107-3" name="__codelineno-107-3" href="#__codelineno-107-3"></a><span class="n">userOpt2</span><span class="p">.</span><span class="na">ifPresent</span><span class="p">(</span><span class="n">u</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">u</span><span class="p">.</span><span class="na">getName</span><span class="p">()));</span>
</span></code></pre></div> </li> <li> <p>ä½¿ç”¨ <code>map</code>/<code>flatMap</code> æ¥è·å–å…³è”æ•°æ®ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-108-1"><a id="__codelineno-108-1" name="__codelineno-108-1" href="#__codelineno-108-1"></a><span class="c1">//ä½¿ç”¨mapæ–¹æ³•è·å–å…³è”æ•°æ®</span>
</span><span id="__span-108-2"><a id="__codelineno-108-2" name="__codelineno-108-2" href="#__codelineno-108-2"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">userOpt</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">u</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">u</span><span class="p">.</span><span class="na">getName</span><span class="p">()).</span><span class="na">orElse</span><span class="p">(</span><span class="s">"Unknown"</span><span class="p">));</span>
</span><span id="__span-108-3"><a id="__codelineno-108-3" name="__codelineno-108-3" href="#__codelineno-108-3"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">userOpt2</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">u</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">u</span><span class="p">.</span><span class="na">getName</span><span class="p">()).</span><span class="na">orElse</span><span class="p">(</span><span class="s">"Default"</span><span class="p">));</span>
</span><span id="__span-108-4"><a id="__codelineno-108-4" name="__codelineno-108-4" href="#__codelineno-108-4"></a><span class="c1">//ä½¿ç”¨flatMapæ–¹æ³•è·å–å…³è”æ•°æ®</span>
</span><span id="__span-108-5"><a id="__codelineno-108-5" name="__codelineno-108-5" href="#__codelineno-108-5"></a><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">interests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-108-6"><a id="__codelineno-108-6" name="__codelineno-108-6" href="#__codelineno-108-6"></a><span class="n">interests</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"a"</span><span class="p">);</span>
</span><span id="__span-108-7"><a id="__codelineno-108-7" name="__codelineno-108-7" href="#__codelineno-108-7"></a><span class="n">interests</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"b"</span><span class="p">);</span>
</span><span id="__span-108-8"><a id="__codelineno-108-8" name="__codelineno-108-8" href="#__codelineno-108-8"></a><span class="n">interests</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">"c"</span><span class="p">);</span>
</span><span id="__span-108-9"><a id="__codelineno-108-9" name="__codelineno-108-9" href="#__codelineno-108-9"></a><span class="n">user</span><span class="p">.</span><span class="na">setInterests</span><span class="p">(</span><span class="n">interests</span><span class="p">);</span>
</span><span id="__span-108-10"><a id="__codelineno-108-10" name="__codelineno-108-10" href="#__codelineno-108-10"></a><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">interests2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Optional</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span><span id="__span-108-11"><a id="__codelineno-108-11" name="__codelineno-108-11" href="#__codelineno-108-11"></a><span class="w">    </span><span class="p">.</span><span class="na">flatMap</span><span class="p">(</span><span class="n">u</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Optional</span><span class="p">.</span><span class="na">ofNullable</span><span class="p">(</span><span class="n">u</span><span class="p">.</span><span class="na">getInterests</span><span class="p">()))</span>
</span><span id="__span-108-12"><a id="__codelineno-108-12" name="__codelineno-108-12" href="#__codelineno-108-12"></a><span class="w">    </span><span class="p">.</span><span class="na">orElse</span><span class="p">(</span><span class="n">Collections</span><span class="p">.</span><span class="na">emptyList</span><span class="p">());</span>
</span><span id="__span-108-13"><a id="__codelineno-108-13" name="__codelineno-108-13" href="#__codelineno-108-13"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">interests2</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">());</span>
</span></code></pre></div> </li> </ol> <h2 id="9stream">9ã€Stream<a class="headerlink" href="#9stream" title="é”šç‚¹é“¾æ¥">Â¶</a></h2> <p>ä½œä¸º Java 8 æ·»åŠ çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼ŒStream æµæä¾›äº†ä¸€ç§å£°æ˜çš„æ–¹å¼æ¥å¤„ç†æ•°æ®ã€‚å…¶åŸºäºå‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼Œå°†å¤æ‚çš„è¯­å¥ä»£ç é€šè¿‡ç®€æ´çš„æ–¹æ³•è°ƒç”¨æ¥è¡¨ç¤ºï¼Œè®©ç¨‹åºå‘˜å†™å‡ºçš„ä»£ç æ›´åŠ çš„é«˜æ•ˆã€ç®€æ´å¹¶å…·å¤‡å¯è¯»æ€§ã€‚</p> <p><strong>Javadoc</strong> å¯¹å…¶çš„å®šä¹‰ï¼š</p> <blockquote> <p>To perform a computation, stream operations are composed into a stream pipeline. A stream pipeline consists of a source (which might be an array, a collection, a generator function, an I/O channel, etc), zero or more intermediate operations (which transform a stream into another stream, such as filter(Predicate)), and a terminal operation (which produces a result or side-effect, such as count() or forEach(Consumer)).</p> <p>ä¸ºäº†æ‰§è¡Œè®¡ç®—ï¼Œæµæ“ä½œè¢«ç»„åˆæˆä¸€ä¸ªæµç®¡é“ã€‚æµç®¡é“ç”±æºï¼ˆè¿™å¯èƒ½æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¸€ä¸ªé›†åˆï¼Œä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼Œä¸€ä¸ª I/O é€šé“ï¼Œç­‰ç­‰ï¼‰ã€é›¶ä¸ªæˆ–å¤šä¸ªä¸­é—´ä¸šåŠ¡ï¼ˆå˜æ¢æµåˆ°å¦ä¸€ä¸ªæµï¼Œå¦‚ <code>filter(Predicate)</code>ï¼‰å’Œä¸€ä¸ªç»ˆç«¯æ“ä½œï¼ˆäº§ç”Ÿç»“æœæˆ–å‰¯ä½œç”¨ï¼Œå¦‚ <code>count()</code> æˆ– <code>forEach(Consumer)</code>ï¼‰ç»„æˆã€‚</p> </blockquote> <h3 id="91stream-æµæ˜¯å¦‚ä½•å·¥ä½œçš„">9.1ã€Stream æµæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ<a class="headerlink" href="#91stream-æµæ˜¯å¦‚ä½•å·¥ä½œçš„" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>æµè¡¨ç¤ºåŒ…å«ç€ä¸€ç³»åˆ—å…ƒç´ çš„é›†åˆï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…¶åšä¸åŒç±»å‹çš„æ“ä½œï¼Œç”¨æ¥å¯¹è¿™äº›å…ƒç´ æ‰§è¡Œè®¡ç®—ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-109-1"><a id="__codelineno-109-1" name="__codelineno-109-1" href="#__codelineno-109-1"></a><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">myList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="s">"a1"</span><span class="p">,</span><span class="w"> </span><span class="s">"a2"</span><span class="p">,</span><span class="w"> </span><span class="s">"b1"</span><span class="p">,</span><span class="w"> </span><span class="s">"c2"</span><span class="p">,</span><span class="w"> </span><span class="s">"c1"</span><span class="p">);</span>
</span><span id="__span-109-2"><a id="__codelineno-109-2" name="__codelineno-109-2" href="#__codelineno-109-2"></a>
</span><span id="__span-109-3"><a id="__codelineno-109-3" name="__codelineno-109-3" href="#__codelineno-109-3"></a><span class="n">myList</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span><span class="w"> </span><span class="c1">// åˆ›å»ºæµ</span>
</span><span id="__span-109-4"><a id="__codelineno-109-4" name="__codelineno-109-4" href="#__codelineno-109-4"></a><span class="w">        </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">"c"</span><span class="p">))</span><span class="w"> </span><span class="c1">// æ‰§è¡Œè¿‡æ»¤ï¼Œè¿‡æ»¤å‡ºä»¥ c ä¸ºå‰ç¼€çš„å­—ç¬¦ä¸²</span>
</span><span id="__span-109-5"><a id="__codelineno-109-5" name="__codelineno-109-5" href="#__codelineno-109-5"></a><span class="w">        </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">String</span><span class="p">::</span><span class="n">toUpperCase</span><span class="p">)</span><span class="w"> </span><span class="c1">// è½¬æ¢æˆå¤§å†™</span>
</span><span id="__span-109-6"><a id="__codelineno-109-6" name="__codelineno-109-6" href="#__codelineno-109-6"></a><span class="w">        </span><span class="p">.</span><span class="na">sorted</span><span class="p">()</span><span class="w"> </span><span class="c1">// æ’åº</span>
</span><span id="__span-109-7"><a id="__codelineno-109-7" name="__codelineno-109-7" href="#__codelineno-109-7"></a><span class="w">        </span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span><span class="w"> </span><span class="c1">// for å¾ªç¯æ‰“å°</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-110-1"><a id="__codelineno-110-1" name="__codelineno-110-1" href="#__codelineno-110-1"></a>C1
</span><span id="__span-110-2"><a id="__codelineno-110-2" name="__codelineno-110-2" href="#__codelineno-110-2"></a>C2
</span></code></pre></div> <p>æˆ‘ä»¬å¯ä»¥å¯¹æµè¿›è¡Œä¸­é—´æ“ä½œæˆ–è€…ç»ˆç«¯æ“ä½œï¼š</p> <p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="!assets/Java8/image-20220812142807269.png" data-desc-position="bottom"><img src="!assets/Java8/image-20220812142807269.png" alt="image-20220812142807269" style="width:80%;"></a></p> <ol> <li>ä¸­é—´æ“ä½œä¼šå†æ¬¡è¿”å›ä¸€ä¸ªæµï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥é“¾æ¥å¤šä¸ªä¸­é—´æ“ä½œï¼Œæ³¨æ„è¿™é‡Œæ˜¯ä¸ç”¨åŠ åˆ†å·çš„ã€‚ä¸Šå›¾ä¸­çš„ <code>filter</code> è¿‡æ»¤ï¼Œ<code>map</code> å¯¹è±¡è½¬æ¢ï¼Œ<code>sorted</code> æ’åºï¼Œå°±å±äºä¸­é—´æ“ä½œã€‚</li> <li>ç»ˆç«¯æ“ä½œæ˜¯å¯¹æµæ“ä½œçš„ä¸€ä¸ªç»“æŸåŠ¨ä½œï¼Œä¸€èˆ¬è¿”å› <code>void</code> æˆ–è€…ä¸€ä¸ªéæµçš„ç»“æœã€‚ä¸Šå›¾ä¸­çš„ <code>forEach</code> å¾ªç¯å°±æ˜¯ä¸€ä¸ªç»ˆæ­¢æ“ä½œã€‚</li> </ol> <p>çœ‹å®Œä¸Šé¢çš„æ“ä½œï¼Œæ„Ÿè§‰æ˜¯ä¸æ˜¯å¾ˆåƒä¸€ä¸ªæµæ°´çº¿å¼æ“ä½œå‘¢ã€‚</p> <p>å®é™…ä¸Šï¼Œå¤§éƒ¨åˆ†æµæ“ä½œéƒ½æ”¯æŒ lambda è¡¨è¾¾å¼ä½œä¸ºå‚æ•°ï¼Œæ­£ç¡®ç†è§£ï¼Œåº”è¯¥è¯´æ˜¯æ¥å—ä¸€ä¸ªå‡½æ•°å¼æ¥å£çš„å®ç°ä½œä¸ºå‚æ•°ã€‚</p> <h3 id="92stream-ç±»">9.2ã€Stream ç±»<a class="headerlink" href="#92stream-ç±»" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>Stream ç±»æœ€å¸¸ç”¨çš„æ˜¯å…¶å¯¹å„ä¸ªæ•°ç»„ä»¥åŠé›†åˆçš„å¤„ï¼Œå®ƒå¯ä»¥å¾ˆæ–¹ä¾¿çš„å»å¯¹æ•°ç»„ä»¥åŠé›†åˆä¸­çš„å…ƒç´ è¿›è¡Œç­›é€‰ã€å¤„ç†ã€èšåˆå¹¶è¿”å›ä¸€ä¸ªå…¨æ–°çš„æ•°ç»„/é›†åˆï¼Œå…¶ä¸­å¯¹è¯¥æ•°æ®ç±»å‹çš„å¤„ç†å¹¶ä¸ä¼šå½±å“åŸæ•°ç»„/é›†åˆæœ¬èº«ã€‚</p> <h4 id="921æºçš„åˆ›å»º">9.2.1ã€æºçš„åˆ›å»º<a class="headerlink" href="#921æºçš„åˆ›å»º" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p>å¯¹äº Stream æµå¸¸è§èµ·å§‹åˆ›å»ºæ–¹æ³•æœ‰3ç§ï¼š</p> <p><strong>ç”±é›†åˆç±»è¿›è¡Œåˆ›å»º</strong></p> <p>æˆ‘ä»¬å¯ä»¥ä»å„ç§æ•°æ®æºä¸­åˆ›å»º Stream æµï¼Œå…¶ä¸­ä»¥ Collection é›†åˆæœ€ä¸ºå¸¸è§ã€‚å¦‚ <code>List</code> å’Œ <code>Set</code> å‡æ”¯æŒ <code>stream()</code> æ–¹æ³•æ¥åˆ›å»ºé¡ºåºæµï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-111-1"><a id="__codelineno-111-1" name="__codelineno-111-1" href="#__codelineno-111-1"></a><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">streamList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
</span><span id="__span-111-2"><a id="__codelineno-111-2" name="__codelineno-111-2" href="#__codelineno-111-2"></a><span class="n">Stream</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">integerStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">streamList</span><span class="p">.</span><span class="na">stream</span><span class="p">();</span>
</span></code></pre></div> <p>ä½¿ç”¨ <code>parallelStream()</code> å¯ä»¥åˆ›å»ºå¹¶è¡Œæµï¼Œèƒ½å¤Ÿè®©æ•°æ®é›†æ‰§è¡Œå¹¶è¡Œæ“ä½œï¼Œåé¢ä¼šæ›´è¯¦ç»†åœ°è®²è§£ã€‚</p> <p><strong>ç”±æ•°ç»„è¿›è¡Œåˆ›å»º</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-112-1"><a id="__codelineno-112-1" name="__codelineno-112-1" href="#__codelineno-112-1"></a><span class="n">Stream</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Stream</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
</span></code></pre></div> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-113-1"><a id="__codelineno-113-1" name="__codelineno-113-1" href="#__codelineno-113-1"></a><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">mArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">};</span>
</span><span id="__span-113-2"><a id="__codelineno-113-2" name="__codelineno-113-2" href="#__codelineno-113-2"></a><span class="n">Stream</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">mArray</span><span class="p">).</span><span class="na">boxed</span><span class="p">();</span>
</span></code></pre></div> <p><code>boxed()</code> æ–¹æ³•çš„ä½œç”¨æ˜¯è£…ç®±æ“ä½œï¼Œå°† <code>IntStream</code> ç‰¹å®šç±»å‹çš„æµè½¬åŒ–ä¸º <code>Stream&lt;Integer&gt;</code> æ™®éæµæ“ä½œï¼Œä¼šåœ¨ä¸‹æ–‡è¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚</p> <p><strong>ç”±<code>generate()</code>æ–¹æ³•åˆ›å»º</strong></p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-114-1"><a id="__codelineno-114-1" name="__codelineno-114-1" href="#__codelineno-114-1"></a><span class="n">Stream</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">dStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Stream</span><span class="p">.</span><span class="na">generate</span><span class="p">(</span><span class="n">Math</span><span class="p">::</span><span class="n">random</span><span class="p">);</span>
</span></code></pre></div> <p><code>generate()</code> æ–¹æ³•æ ¹æ®ä¼ å…¥å‚æ•°ç”Ÿæˆä¸€ä¸ªæ— é™çš„æ— åºæµ</p> <h4 id="922ä¸­é—´å¤„ç†æ–¹æ³•">9.2.2ã€ä¸­é—´å¤„ç†æ–¹æ³•<a class="headerlink" href="#922ä¸­é—´å¤„ç†æ–¹æ³•" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p><strong><code>filter()</code> æ–¹æ³•</strong></p> <p>è¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªåˆ¤æ–­å¼æ¥å¯¹æµä¸­çš„å…ƒç´ è¿›è¡Œç­›é€‰ï¼Œå°†æµä¸­ç¬¦åˆè¯¥åˆ¤æ–­çš„å…ƒç´ ç•™ä¸‹ï¼Œä¸ç¬¦åˆè¯¥åˆ¤æ–­çš„å…ƒç´ å»é™¤ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰ç¬¦åˆè¯¥åˆ¤æ–­çš„å…ƒç´ çš„æ–°çš„æµã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-115-1"><a id="__codelineno-115-1" name="__codelineno-115-1" href="#__codelineno-115-1"></a><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">fList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StreamTestUtils</span><span class="p">.</span><span class="na">randomGenerate</span><span class="p">();</span>
</span><span id="__span-115-2"><a id="__codelineno-115-2" name="__codelineno-115-2" href="#__codelineno-115-2"></a>
</span><span id="__span-115-3"><a id="__codelineno-115-3" name="__codelineno-115-3" href="#__codelineno-115-3"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"ç­›é€‰å‰çš„æ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-115-4"><a id="__codelineno-115-4" name="__codelineno-115-4" href="#__codelineno-115-4"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">fList</span><span class="p">).</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-115-5"><a id="__codelineno-115-5" name="__codelineno-115-5" href="#__codelineno-115-5"></a>
</span><span id="__span-115-6"><a id="__codelineno-115-6" name="__codelineno-115-6" href="#__codelineno-115-6"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"\nç­›é€‰åçš„æ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-115-7"><a id="__codelineno-115-7" name="__codelineno-115-7" href="#__codelineno-115-7"></a><span class="cm">/* ç­›é€‰å‡º50ä»¥å†…çš„æ•°å­— */</span>
</span><span id="__span-115-8"><a id="__codelineno-115-8" name="__codelineno-115-8" href="#__codelineno-115-8"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">fList</span><span class="p">).</span><span class="na">filter</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">50</span><span class="p">).</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-115-9"><a id="__codelineno-115-9" name="__codelineno-115-9" href="#__codelineno-115-9"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">();</span>
</span></code></pre></div> <p><code>randomGenerate()</code> æ–¹æ³•ç”¨æ¥ç”Ÿæˆä¸€ä¸ªåŒºé—´ä¸º [1, 100]ï¼Œå¤§å°ä¸º 10 çš„éšæœºæ•°æ•°ç»„ã€‚</p> <p>æ§åˆ¶å°è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-116-1"><a id="__codelineno-116-1" name="__codelineno-116-1" href="#__codelineno-116-1"></a>ç­›é€‰å‰çš„æ•°ç»„ï¼š
</span><span id="__span-116-2"><a id="__codelineno-116-2" name="__codelineno-116-2" href="#__codelineno-116-2"></a> 99, 18, 90, 85, 19, 5, 1, 54, 76, 6, 
</span><span id="__span-116-3"><a id="__codelineno-116-3" name="__codelineno-116-3" href="#__codelineno-116-3"></a>ç­›é€‰åçš„æ•°ç»„ï¼š
</span><span id="__span-116-4"><a id="__codelineno-116-4" name="__codelineno-116-4" href="#__codelineno-116-4"></a> 18, 19, 5, 1, 6, 
</span></code></pre></div> <p><strong><code>map()</code> æ–¹æ³•</strong></p> <p>è¯¥æ–¹æ³•ç”¨äºå¯¹æµä¸­çš„å…ƒç´ è¿›è¡Œè½¬æ¢æ“ä½œï¼Œç”¨äºå¯¹æµä¸­çš„å…ƒç´ è¿›è¡Œä¸€ç³»åˆ—çš„å˜æ¢ï¼Œè¿”å›ä¸€ä¸ªå˜æ¢åçš„æ–°çš„æµã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-117-1"><a id="__codelineno-117-1" name="__codelineno-117-1" href="#__codelineno-117-1"></a><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">fList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StreamTestUtils</span><span class="p">.</span><span class="na">randomGenerate</span><span class="p">();</span>
</span><span id="__span-117-2"><a id="__codelineno-117-2" name="__codelineno-117-2" href="#__codelineno-117-2"></a>
</span><span id="__span-117-3"><a id="__codelineno-117-3" name="__codelineno-117-3" href="#__codelineno-117-3"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"è½¬æ¢å‰çš„æ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-117-4"><a id="__codelineno-117-4" name="__codelineno-117-4" href="#__codelineno-117-4"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">fList</span><span class="p">).</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-117-5"><a id="__codelineno-117-5" name="__codelineno-117-5" href="#__codelineno-117-5"></a>
</span><span id="__span-117-6"><a id="__codelineno-117-6" name="__codelineno-117-6" href="#__codelineno-117-6"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"\nè½¬æ¢åçš„æ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-117-7"><a id="__codelineno-117-7" name="__codelineno-117-7" href="#__codelineno-117-7"></a><span class="cm">/* å°†æ¯ä¸ªæ•°å­—åŠ 100åè¾“å‡º */</span>
</span><span id="__span-117-8"><a id="__codelineno-117-8" name="__codelineno-117-8" href="#__codelineno-117-8"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">fList</span><span class="p">).</span><span class="na">map</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">100</span><span class="p">).</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-117-9"><a id="__codelineno-117-9" name="__codelineno-117-9" href="#__codelineno-117-9"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">();</span>
</span></code></pre></div> <p>æ§åˆ¶å°è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-118-1"><a id="__codelineno-118-1" name="__codelineno-118-1" href="#__codelineno-118-1"></a>è½¬æ¢å‰çš„æ•°ç»„ï¼š
</span><span id="__span-118-2"><a id="__codelineno-118-2" name="__codelineno-118-2" href="#__codelineno-118-2"></a>69, 44, 59, 96, 99, 40, 79, 33, 85, 76, 
</span><span id="__span-118-3"><a id="__codelineno-118-3" name="__codelineno-118-3" href="#__codelineno-118-3"></a>è½¬æ¢åçš„æ•°ç»„ï¼š
</span><span id="__span-118-4"><a id="__codelineno-118-4" name="__codelineno-118-4" href="#__codelineno-118-4"></a>169, 144, 159, 196, 199, 140, 179, 133, 185, 176,
</span></code></pre></div> <p>ç±»ä¼¼çš„æ–¹æ³•è¿˜æœ‰ <code>mapToInt()</code>ã€<code>mapToLong()</code>ã€<code>mapToDouble()</code>ï¼ŒåŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡è¿”å›çš„æ˜¯ç‰¹å®šç±»å‹çš„æµï¼ˆ<code>IntStream</code>ã€<code>LongStream</code> å’Œ <code>DoubleStream</code>ï¼‰ã€‚</p> <p><strong><code>distinct()</code> æ–¹æ³•</strong></p> <p>è¯¥æ–¹æ³•ç”¨äºå¯¹æµä¸­çš„å…ƒç´ è¿›è¡Œå»é‡æ“ä½œã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-119-1"><a id="__codelineno-119-1" name="__codelineno-119-1" href="#__codelineno-119-1"></a><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">dList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
</span><span id="__span-119-2"><a id="__codelineno-119-2" name="__codelineno-119-2" href="#__codelineno-119-2"></a>
</span><span id="__span-119-3"><a id="__codelineno-119-3" name="__codelineno-119-3" href="#__codelineno-119-3"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"å»é‡å‰çš„æ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-119-4"><a id="__codelineno-119-4" name="__codelineno-119-4" href="#__codelineno-119-4"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">dList</span><span class="p">).</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-119-5"><a id="__codelineno-119-5" name="__codelineno-119-5" href="#__codelineno-119-5"></a>
</span><span id="__span-119-6"><a id="__codelineno-119-6" name="__codelineno-119-6" href="#__codelineno-119-6"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"\nå»é‡åçš„æ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-119-7"><a id="__codelineno-119-7" name="__codelineno-119-7" href="#__codelineno-119-7"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">dList</span><span class="p">).</span><span class="na">distinct</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-119-8"><a id="__codelineno-119-8" name="__codelineno-119-8" href="#__codelineno-119-8"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">();</span>
</span></code></pre></div> <p>æ§åˆ¶å°è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-120-1"><a id="__codelineno-120-1" name="__codelineno-120-1" href="#__codelineno-120-1"></a>å»é‡å‰çš„æ•°ç»„ï¼š
</span><span id="__span-120-2"><a id="__codelineno-120-2" name="__codelineno-120-2" href="#__codelineno-120-2"></a>1, 1, 2, 5, 2, 4, 3, 1, 
</span><span id="__span-120-3"><a id="__codelineno-120-3" name="__codelineno-120-3" href="#__codelineno-120-3"></a>å»é‡åçš„æ•°ç»„ï¼š
</span><span id="__span-120-4"><a id="__codelineno-120-4" name="__codelineno-120-4" href="#__codelineno-120-4"></a>1, 2, 5, 4, 3, 
</span></code></pre></div> <p>è¦ç‰¹åˆ«æ³¨æ„æµä¸­å‚¨å­˜çš„å†…å®¹æ˜¯ä»¥æ•°ç»„ä¸ºå•ä½è¿˜æ˜¯ä»¥æ•°ä¸ºå•ä½ï¼Œè‹¥ä»¥æ•°ç»„ä¸ºå•ä½çš„è¯è°ƒç”¨ <code>distinct()</code> æ˜¯ä¸ç”Ÿæ•ˆçš„ï¼ˆæ¯”å¦‚ç”¨ <code>split()</code> æ–¹æ³•å°†å­—ç¬¦ä¸²åˆ†å‰²æˆä¸€ä¸ªä¸ªå­—ç¬¦ä¸²æ•°ç»„å†ç”¨ <code>map()</code> æ–¹æ³•è¿›è¡Œå˜æ¢ï¼‰ï¼Œæ­¤æ—¶éœ€è¦è°ƒç”¨ <code>flatMap()</code> æ–¹æ³•å¯¹æµè¿›è¡Œæ‰å¹³åŒ–å¤„ç†ï¼Œä¹‹åå†è°ƒç”¨ <code>distinct()</code> æ–¹æ³•å»é‡ã€‚</p> <p><strong><code>sorted()</code> æ–¹æ³•</strong></p> <p>è¯¥æ–¹æ³•ç”¨äºå¯¹æµä¸­å†…å®¹è¿›è¡Œæ’åºæ“ä½œï¼Œé»˜è®¤ä¸ºå‡åºã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-121-1"><a id="__codelineno-121-1" name="__codelineno-121-1" href="#__codelineno-121-1"></a><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">isList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StreamTestUtils</span><span class="p">.</span><span class="na">intToList</span><span class="p">(</span><span class="n">StreamTestUtils</span><span class="p">.</span><span class="na">randomGenerate</span><span class="p">());</span>
</span><span id="__span-121-2"><a id="__codelineno-121-2" name="__codelineno-121-2" href="#__codelineno-121-2"></a>
</span><span id="__span-121-3"><a id="__codelineno-121-3" name="__codelineno-121-3" href="#__codelineno-121-3"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æ’åºå‰çš„æ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-121-4"><a id="__codelineno-121-4" name="__codelineno-121-4" href="#__codelineno-121-4"></a><span class="n">isList</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-121-5"><a id="__codelineno-121-5" name="__codelineno-121-5" href="#__codelineno-121-5"></a>
</span><span id="__span-121-6"><a id="__codelineno-121-6" name="__codelineno-121-6" href="#__codelineno-121-6"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"\næ’åºä¸ºå‡åºçš„æ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-121-7"><a id="__codelineno-121-7" name="__codelineno-121-7" href="#__codelineno-121-7"></a><span class="n">isList</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">sorted</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-121-8"><a id="__codelineno-121-8" name="__codelineno-121-8" href="#__codelineno-121-8"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">();</span>
</span><span id="__span-121-9"><a id="__codelineno-121-9" name="__codelineno-121-9" href="#__codelineno-121-9"></a>
</span><span id="__span-121-10"><a id="__codelineno-121-10" name="__codelineno-121-10" href="#__codelineno-121-10"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æ’åºä¸ºé™åºçš„æ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-121-11"><a id="__codelineno-121-11" name="__codelineno-121-11" href="#__codelineno-121-11"></a><span class="n">isList</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">sorted</span><span class="p">((</span><span class="n">o1</span><span class="p">,</span><span class="w"> </span><span class="n">o2</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Integer</span><span class="p">.</span><span class="na">compare</span><span class="p">(</span><span class="n">o2</span><span class="p">,</span><span class="w"> </span><span class="n">o1</span><span class="p">))</span>
</span><span id="__span-121-12"><a id="__codelineno-121-12" name="__codelineno-121-12" href="#__codelineno-121-12"></a><span class="w">    </span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-121-13"><a id="__codelineno-121-13" name="__codelineno-121-13" href="#__codelineno-121-13"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">();</span>
</span></code></pre></div> <p>æ§åˆ¶å°è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-122-1"><a id="__codelineno-122-1" name="__codelineno-122-1" href="#__codelineno-122-1"></a>æ’åºå‰çš„æ•°ç»„ï¼š
</span><span id="__span-122-2"><a id="__codelineno-122-2" name="__codelineno-122-2" href="#__codelineno-122-2"></a>79, 77, 36, 89, 32, 80, 12, 56, 78, 55, 
</span><span id="__span-122-3"><a id="__codelineno-122-3" name="__codelineno-122-3" href="#__codelineno-122-3"></a>æ’åºä¸ºå‡åºçš„æ•°ç»„ï¼š
</span><span id="__span-122-4"><a id="__codelineno-122-4" name="__codelineno-122-4" href="#__codelineno-122-4"></a>12, 32, 36, 55, 56, 77, 78, 79, 80, 89, 
</span><span id="__span-122-5"><a id="__codelineno-122-5" name="__codelineno-122-5" href="#__codelineno-122-5"></a>æ’åºä¸ºé™åºçš„æ•°ç»„ï¼š
</span><span id="__span-122-6"><a id="__codelineno-122-6" name="__codelineno-122-6" href="#__codelineno-122-6"></a>89, 80, 79, 78, 77, 56, 55, 36, 32, 12, 
</span></code></pre></div> <p>å¯ä¼ å…¥ <code>Comparator</code> è¡¨è¾¾å¼æ¥è‡ªè¡Œæ‹Ÿå®šæ’åºè§„åˆ™ã€‚</p> <p>å¯¹ map çš„æ’åºå¯ä»¥æŒ‰é”®é€’å¢/é€’å‡ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-123-1"><a id="__codelineno-123-1" name="__codelineno-123-1" href="#__codelineno-123-1"></a><span class="n">Map</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>
</span><span id="__span-123-2"><a id="__codelineno-123-2" name="__codelineno-123-2" href="#__codelineno-123-2"></a><span class="n">Random</span><span class="w"> </span><span class="n">random</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Random</span><span class="p">();</span>
</span><span id="__span-123-3"><a id="__codelineno-123-3" name="__codelineno-123-3" href="#__codelineno-123-3"></a>
</span><span id="__span-123-4"><a id="__codelineno-123-4" name="__codelineno-123-4" href="#__codelineno-123-4"></a><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-123-5"><a id="__codelineno-123-5" name="__codelineno-123-5" href="#__codelineno-123-5"></a><span class="w">    </span><span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">random</span><span class="p">.</span><span class="na">nextInt</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">random</span><span class="p">.</span><span class="na">nextInt</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-123-6"><a id="__codelineno-123-6" name="__codelineno-123-6" href="#__codelineno-123-6"></a><span class="p">}</span>
</span><span id="__span-123-7"><a id="__codelineno-123-7" name="__codelineno-123-7" href="#__codelineno-123-7"></a>
</span><span id="__span-123-8"><a id="__codelineno-123-8" name="__codelineno-123-8" href="#__codelineno-123-8"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"åŸMapä¸ºï¼š\n"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">map</span><span class="p">);</span>
</span><span id="__span-123-9"><a id="__codelineno-123-9" name="__codelineno-123-9" href="#__codelineno-123-9"></a>
</span><span id="__span-123-10"><a id="__codelineno-123-10" name="__codelineno-123-10" href="#__codelineno-123-10"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æŒ‰é”®é€’å‡æ’åºåçš„Mapä¸ºï¼š"</span><span class="p">);</span>
</span><span id="__span-123-11"><a id="__codelineno-123-11" name="__codelineno-123-11" href="#__codelineno-123-11"></a><span class="n">Map</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">kMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">map</span><span class="p">.</span><span class="na">entrySet</span><span class="p">().</span><span class="na">stream</span><span class="p">()</span>
</span><span id="__span-123-12"><a id="__codelineno-123-12" name="__codelineno-123-12" href="#__codelineno-123-12"></a><span class="w">    </span><span class="p">.</span><span class="na">sorted</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">Entry</span><span class="p">.</span><span class="na">comparingByKey</span><span class="p">())</span>
</span><span id="__span-123-13"><a id="__codelineno-123-13" name="__codelineno-123-13" href="#__codelineno-123-13"></a><span class="w">    </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toMap</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">Entry</span><span class="p">::</span><span class="n">getKey</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-123-14"><a id="__codelineno-123-14" name="__codelineno-123-14" href="#__codelineno-123-14"></a><span class="w">                             </span><span class="n">Map</span><span class="p">.</span><span class="na">Entry</span><span class="p">::</span><span class="n">getValue</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-123-15"><a id="__codelineno-123-15" name="__codelineno-123-15" href="#__codelineno-123-15"></a><span class="w">                             </span><span class="p">(</span><span class="n">oldValue</span><span class="p">,</span><span class="w"> </span><span class="n">newValue</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">oldValue</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-123-16"><a id="__codelineno-123-16" name="__codelineno-123-16" href="#__codelineno-123-16"></a><span class="w">                             </span><span class="n">LinkedHashMap</span><span class="p">::</span><span class="k">new</span><span class="p">));</span>
</span><span id="__span-123-17"><a id="__codelineno-123-17" name="__codelineno-123-17" href="#__codelineno-123-17"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">kMap</span><span class="p">);</span>
</span><span id="__span-123-18"><a id="__codelineno-123-18" name="__codelineno-123-18" href="#__codelineno-123-18"></a>
</span><span id="__span-123-19"><a id="__codelineno-123-19" name="__codelineno-123-19" href="#__codelineno-123-19"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æŒ‰é”®é€’å‡æ’åºåçš„Mapä¸ºï¼š"</span><span class="p">);</span>
</span><span id="__span-123-20"><a id="__codelineno-123-20" name="__codelineno-123-20" href="#__codelineno-123-20"></a><span class="n">Map</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">kMapDown</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">map</span><span class="p">.</span><span class="na">entrySet</span><span class="p">().</span><span class="na">stream</span><span class="p">()</span>
</span><span id="__span-123-21"><a id="__codelineno-123-21" name="__codelineno-123-21" href="#__codelineno-123-21"></a><span class="w">    </span><span class="p">.</span><span class="na">sorted</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">Entry</span><span class="p">.</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="o">&gt;</span><span class="n">comparingByKey</span><span class="p">().</span><span class="na">reversed</span><span class="p">())</span>
</span><span id="__span-123-22"><a id="__codelineno-123-22" name="__codelineno-123-22" href="#__codelineno-123-22"></a><span class="w">    </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toMap</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">Entry</span><span class="p">::</span><span class="n">getKey</span><span class="p">,</span>
</span><span id="__span-123-23"><a id="__codelineno-123-23" name="__codelineno-123-23" href="#__codelineno-123-23"></a><span class="w">                              </span><span class="n">Map</span><span class="p">.</span><span class="na">Entry</span><span class="p">::</span><span class="n">getValue</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-123-24"><a id="__codelineno-123-24" name="__codelineno-123-24" href="#__codelineno-123-24"></a><span class="w">                              </span><span class="p">(</span><span class="n">oldValue</span><span class="p">,</span><span class="w"> </span><span class="n">newValue</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">oldValue</span><span class="p">,</span>
</span><span id="__span-123-25"><a id="__codelineno-123-25" name="__codelineno-123-25" href="#__codelineno-123-25"></a><span class="w">                              </span><span class="n">LinkedHashMap</span><span class="p">::</span><span class="k">new</span><span class="p">));</span>
</span><span id="__span-123-26"><a id="__codelineno-123-26" name="__codelineno-123-26" href="#__codelineno-123-26"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">kMapDown</span><span class="p">);</span>
</span></code></pre></div> <p>æ§åˆ¶å°è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-124-1"><a id="__codelineno-124-1" name="__codelineno-124-1" href="#__codelineno-124-1"></a>åŸMapä¸ºï¼š
</span><span id="__span-124-2"><a id="__codelineno-124-2" name="__codelineno-124-2" href="#__codelineno-124-2"></a>{82=33, 34=32, 2=4, 68=8, 25=90, 60=95, 45=21, 62=19, 47=91}
</span><span id="__span-124-3"><a id="__codelineno-124-3" name="__codelineno-124-3" href="#__codelineno-124-3"></a>æŒ‰é”®é€’å‡æ’åºåçš„Mapä¸ºï¼š
</span><span id="__span-124-4"><a id="__codelineno-124-4" name="__codelineno-124-4" href="#__codelineno-124-4"></a>{2=4, 25=90, 34=32, 45=21, 47=91, 60=95, 62=19, 68=8, 82=33}
</span><span id="__span-124-5"><a id="__codelineno-124-5" name="__codelineno-124-5" href="#__codelineno-124-5"></a>æŒ‰é”®é€’å‡æ’åºåçš„Mapä¸ºï¼š
</span><span id="__span-124-6"><a id="__codelineno-124-6" name="__codelineno-124-6" href="#__codelineno-124-6"></a>{82=33, 68=8, 62=19, 60=95, 47=91, 45=21, 34=32, 25=90, 2=4}
</span></code></pre></div> <p><strong><code>peek()</code> æ–¹æ³•</strong></p> <p>è¯¥æ–¹æ³•ä¸»è¦ç”¨äºè°ƒè¯•ï¼Œå¯¹äºä¸­é—´æµç¨‹æŸä¸ªæ­¥éª¤çš„æ‰§è¡Œå…ƒç´ æƒ…å†µè¿›è¡Œæ‰“å°è¾“å‡ºã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-125-1"><a id="__codelineno-125-1" name="__codelineno-125-1" href="#__codelineno-125-1"></a><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">pList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StreamTestUtils</span><span class="p">.</span><span class="na">randomGenerate</span><span class="p">();</span>
</span><span id="__span-125-2"><a id="__codelineno-125-2" name="__codelineno-125-2" href="#__codelineno-125-2"></a>
</span><span id="__span-125-3"><a id="__codelineno-125-3" name="__codelineno-125-3" href="#__codelineno-125-3"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"åŸæ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-125-4"><a id="__codelineno-125-4" name="__codelineno-125-4" href="#__codelineno-125-4"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">pList</span><span class="p">).</span><span class="na">sorted</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-125-5"><a id="__codelineno-125-5" name="__codelineno-125-5" href="#__codelineno-125-5"></a>
</span><span id="__span-125-6"><a id="__codelineno-125-6" name="__codelineno-125-6" href="#__codelineno-125-6"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"\næµç¨‹æ‰“å°ï¼š"</span><span class="p">);</span>
</span><span id="__span-125-7"><a id="__codelineno-125-7" name="__codelineno-125-7" href="#__codelineno-125-7"></a><span class="kt">int</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">pList</span><span class="p">)</span>
</span><span id="__span-125-8"><a id="__codelineno-125-8" name="__codelineno-125-8" href="#__codelineno-125-8"></a><span class="w">    </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">50</span><span class="p">)</span>
</span><span id="__span-125-9"><a id="__codelineno-125-9" name="__codelineno-125-9" href="#__codelineno-125-9"></a><span class="w">    </span><span class="p">.</span><span class="na">peek</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="s">"["</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">))</span>
</span><span id="__span-125-10"><a id="__codelineno-125-10" name="__codelineno-125-10" href="#__codelineno-125-10"></a><span class="w">    </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">num</span><span class="o">+=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-125-11"><a id="__codelineno-125-11" name="__codelineno-125-11" href="#__codelineno-125-11"></a><span class="w">    </span><span class="p">.</span><span class="na">peek</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"], "</span><span class="p">))</span>
</span><span id="__span-125-12"><a id="__codelineno-125-12" name="__codelineno-125-12" href="#__codelineno-125-12"></a><span class="w">    </span><span class="p">.</span><span class="na">sum</span><span class="p">();</span>
</span><span id="__span-125-13"><a id="__codelineno-125-13" name="__codelineno-125-13" href="#__codelineno-125-13"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"\nå’Œï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sum</span><span class="p">);</span>
</span></code></pre></div> <p>æ§åˆ¶å°è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-126-1"><a id="__codelineno-126-1" name="__codelineno-126-1" href="#__codelineno-126-1"></a>åŸæ•°ç»„ï¼š
</span><span id="__span-126-2"><a id="__codelineno-126-2" name="__codelineno-126-2" href="#__codelineno-126-2"></a>7, 22, 35, 55, 69, 77, 82, 83, 83, 92, 
</span><span id="__span-126-3"><a id="__codelineno-126-3" name="__codelineno-126-3" href="#__codelineno-126-3"></a>æµç¨‹æ‰“å°ï¼š
</span><span id="__span-126-4"><a id="__codelineno-126-4" name="__codelineno-126-4" href="#__codelineno-126-4"></a>[22, 23], [7, 8], [35, 36], 
</span><span id="__span-126-5"><a id="__codelineno-126-5" name="__codelineno-126-5" href="#__codelineno-126-5"></a>å’Œï¼š67
</span></code></pre></div> <p><strong><code>limit()</code> æ–¹æ³•</strong></p> <p>è¯¥æ–¹æ³•ç”¨äºæˆªå–æ“ä½œï¼Œå¯æˆªå–æ•°ç»„çš„å‰ n ä¸ªå…ƒç´ ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-127-1"><a id="__codelineno-127-1" name="__codelineno-127-1" href="#__codelineno-127-1"></a><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">lList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StreamTestUtils</span><span class="p">.</span><span class="na">randomGenerate</span><span class="p">();</span>
</span><span id="__span-127-2"><a id="__codelineno-127-2" name="__codelineno-127-2" href="#__codelineno-127-2"></a>
</span><span id="__span-127-3"><a id="__codelineno-127-3" name="__codelineno-127-3" href="#__codelineno-127-3"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"åŸæ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-127-4"><a id="__codelineno-127-4" name="__codelineno-127-4" href="#__codelineno-127-4"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">lList</span><span class="p">).</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-127-5"><a id="__codelineno-127-5" name="__codelineno-127-5" href="#__codelineno-127-5"></a>
</span><span id="__span-127-6"><a id="__codelineno-127-6" name="__codelineno-127-6" href="#__codelineno-127-6"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"\næˆªå–5ä¸ªå­—ç¬¦æ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-127-7"><a id="__codelineno-127-7" name="__codelineno-127-7" href="#__codelineno-127-7"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">lList</span><span class="p">).</span><span class="na">limit</span><span class="p">(</span><span class="mi">5</span><span class="p">).</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-127-8"><a id="__codelineno-127-8" name="__codelineno-127-8" href="#__codelineno-127-8"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">();</span>
</span></code></pre></div> <p>æ§åˆ¶å°è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-128-1"><a id="__codelineno-128-1" name="__codelineno-128-1" href="#__codelineno-128-1"></a>åŸæ•°ç»„ï¼š
</span><span id="__span-128-2"><a id="__codelineno-128-2" name="__codelineno-128-2" href="#__codelineno-128-2"></a>69, 57, 13, 46, 66, 29, 78, 76, 95, 7, 
</span><span id="__span-128-3"><a id="__codelineno-128-3" name="__codelineno-128-3" href="#__codelineno-128-3"></a>æˆªå–5ä¸ªå­—ç¬¦æ•°ç»„ï¼š
</span><span id="__span-128-4"><a id="__codelineno-128-4" name="__codelineno-128-4" href="#__codelineno-128-4"></a>69, 57, 13, 46, 66, 
</span></code></pre></div> <p><strong><code>skip()</code> æ–¹æ³•</strong></p> <p>è¯¥æ–¹æ³•ç”¨äºè·³è¿‡å…ƒç´ æ“ä½œï¼Œå¯ä»¥è·³è¿‡å‰ n ä¸ªå…ƒç´ ï¼Œè¿”å›å‰©ä½™å…ƒç´ ç»„æˆçš„æµï¼ˆè‹¥å…ƒç´ æ•°ç›®ä¸æ»¡ n ä¸ªï¼Œåˆ™è¿”å›ç©ºæµï¼‰ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-129-1"><a id="__codelineno-129-1" name="__codelineno-129-1" href="#__codelineno-129-1"></a><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">sList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StreamTestUtils</span><span class="p">.</span><span class="na">randomGenerate</span><span class="p">();</span>
</span><span id="__span-129-2"><a id="__codelineno-129-2" name="__codelineno-129-2" href="#__codelineno-129-2"></a>
</span><span id="__span-129-3"><a id="__codelineno-129-3" name="__codelineno-129-3" href="#__codelineno-129-3"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"åŸæ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-129-4"><a id="__codelineno-129-4" name="__codelineno-129-4" href="#__codelineno-129-4"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">sList</span><span class="p">).</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-129-5"><a id="__codelineno-129-5" name="__codelineno-129-5" href="#__codelineno-129-5"></a>
</span><span id="__span-129-6"><a id="__codelineno-129-6" name="__codelineno-129-6" href="#__codelineno-129-6"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"\nè·³è¿‡5ä¸ªå­—ç¬¦åæ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-129-7"><a id="__codelineno-129-7" name="__codelineno-129-7" href="#__codelineno-129-7"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">sList</span><span class="p">).</span><span class="na">skip</span><span class="p">(</span><span class="mi">5</span><span class="p">).</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-129-8"><a id="__codelineno-129-8" name="__codelineno-129-8" href="#__codelineno-129-8"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">();</span>
</span></code></pre></div> <p>æ§åˆ¶å°è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-130-1"><a id="__codelineno-130-1" name="__codelineno-130-1" href="#__codelineno-130-1"></a>åŸæ•°ç»„ï¼š
</span><span id="__span-130-2"><a id="__codelineno-130-2" name="__codelineno-130-2" href="#__codelineno-130-2"></a>55, 13, 36, 43, 1, 5, 64, 11, 75, 57, 
</span><span id="__span-130-3"><a id="__codelineno-130-3" name="__codelineno-130-3" href="#__codelineno-130-3"></a>è·³è¿‡5ä¸ªå­—ç¬¦åæ•°ç»„ï¼š
</span><span id="__span-130-4"><a id="__codelineno-130-4" name="__codelineno-130-4" href="#__codelineno-130-4"></a>5, 64, 11, 75, 57, 
</span></code></pre></div> <h4 id="923ç»ˆç«¯æ”¶é›†æ–¹æ³•">9.2.3ã€ç»ˆç«¯æ”¶é›†æ–¹æ³•<a class="headerlink" href="#923ç»ˆç«¯æ”¶é›†æ–¹æ³•" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p><strong><code>forEach()/forEachOrdered()</code> æ–¹æ³•</strong></p> <p>è¯¥æ–¹æ³•ç”¨äºå¯¹æµä¸­å†…å®¹çš„å¾ªç¯éå†ï¼Œè€Œ <code>forEachOrdered()</code> æ–¹æ³•ç”¨äºä¿æŒåŸæœ‰å…ƒç´ çš„æ—¢å®šé¡ºåºéå†ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-131-1"><a id="__codelineno-131-1" name="__codelineno-131-1" href="#__codelineno-131-1"></a><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">fList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StreamTestUtils</span><span class="p">.</span><span class="na">randomGenerate</span><span class="p">();</span>
</span><span id="__span-131-2"><a id="__codelineno-131-2" name="__codelineno-131-2" href="#__codelineno-131-2"></a>
</span><span id="__span-131-3"><a id="__codelineno-131-3" name="__codelineno-131-3" href="#__codelineno-131-3"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"åŸæ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-131-4"><a id="__codelineno-131-4" name="__codelineno-131-4" href="#__codelineno-131-4"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">fList</span><span class="p">).</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-131-5"><a id="__codelineno-131-5" name="__codelineno-131-5" href="#__codelineno-131-5"></a>
</span><span id="__span-131-6"><a id="__codelineno-131-6" name="__codelineno-131-6" href="#__codelineno-131-6"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"\nå¹¶è¡Œæµæ‰“å°æ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-131-7"><a id="__codelineno-131-7" name="__codelineno-131-7" href="#__codelineno-131-7"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">fList</span><span class="p">).</span><span class="na">parallel</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-131-8"><a id="__codelineno-131-8" name="__codelineno-131-8" href="#__codelineno-131-8"></a>
</span><span id="__span-131-9"><a id="__codelineno-131-9" name="__codelineno-131-9" href="#__codelineno-131-9"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"\nå¹¶è¡Œæµé¡ºåºæ‰“å°æ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-131-10"><a id="__codelineno-131-10" name="__codelineno-131-10" href="#__codelineno-131-10"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">fList</span><span class="p">).</span><span class="na">parallel</span><span class="p">().</span><span class="na">forEachOrdered</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-131-11"><a id="__codelineno-131-11" name="__codelineno-131-11" href="#__codelineno-131-11"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">();</span>
</span></code></pre></div> <p>æ§åˆ¶å°è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-132-1"><a id="__codelineno-132-1" name="__codelineno-132-1" href="#__codelineno-132-1"></a>åŸæ•°ç»„ï¼š
</span><span id="__span-132-2"><a id="__codelineno-132-2" name="__codelineno-132-2" href="#__codelineno-132-2"></a>77, 49, 36, 21, 64, 36, 75, 100, 36, 46, 
</span><span id="__span-132-3"><a id="__codelineno-132-3" name="__codelineno-132-3" href="#__codelineno-132-3"></a>å¹¶è¡Œæµæ‰“å°æ•°ç»„ï¼š
</span><span id="__span-132-4"><a id="__codelineno-132-4" name="__codelineno-132-4" href="#__codelineno-132-4"></a>75, 36, 100, 49, 77, 36, 46, 64, 36, 21, 
</span><span id="__span-132-5"><a id="__codelineno-132-5" name="__codelineno-132-5" href="#__codelineno-132-5"></a>å¹¶è¡Œæµé¡ºåºæ‰“å°æ•°ç»„ï¼š
</span><span id="__span-132-6"><a id="__codelineno-132-6" name="__codelineno-132-6" href="#__codelineno-132-6"></a>77, 49, 36, 21, 64, 36, 75, 100, 36, 46, 
</span></code></pre></div> <p>ç”¨æ™®é€šçš„ <code>forEach()</code> é€šè¿‡å¹¶è¡Œæµæ‰“å°æ•°ç»„ï¼Œå¯ä»¥æ˜æ˜¾çœ‹åˆ°æ‰“å°é¡ºåºä¸ºä¹±åºçš„ï¼›ä½†æ˜¯åˆ©ç”¨ <code>forEachOrdered()</code> æ–¹æ³•å³å¯ä¿æŒæ•°ç»„çš„åŸæœ‰é¡ºåºæ‰“å°ã€‚</p> <p><strong><code>toArray()</code> æ–¹æ³•</strong></p> <p>ä¸»è¦ç”¨äºå°†ç»™å®šæ•°æ®æºè½¬æ¢ä¸ºæ•°ç»„è¿”å›ï¼Œç©ºå‚æ–¹æ³•è¿”å›çš„æ˜¯ <code>Object[]</code> ç±»å‹çš„æ•°ç»„ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªæŒ‡å®šæ•°ç»„ç±»å‹ä»¥è¿”å›ç‰¹å®šç±»å‹æ•°ç»„ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-133-1"><a id="__codelineno-133-1" name="__codelineno-133-1" href="#__codelineno-133-1"></a><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">tList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StreamTestUtils</span><span class="p">.</span><span class="na">intToList</span><span class="p">(</span><span class="n">StreamTestUtils</span><span class="p">.</span><span class="na">randomGenerate</span><span class="p">());</span>
</span><span id="__span-133-2"><a id="__codelineno-133-2" name="__codelineno-133-2" href="#__codelineno-133-2"></a>
</span><span id="__span-133-3"><a id="__codelineno-133-3" name="__codelineno-133-3" href="#__codelineno-133-3"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"åŸé›†åˆï¼š"</span><span class="p">);</span>
</span><span id="__span-133-4"><a id="__codelineno-133-4" name="__codelineno-133-4" href="#__codelineno-133-4"></a><span class="n">tList</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-133-5"><a id="__codelineno-133-5" name="__codelineno-133-5" href="#__codelineno-133-5"></a>
</span><span id="__span-133-6"><a id="__codelineno-133-6" name="__codelineno-133-6" href="#__codelineno-133-6"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"\næ­£å¸¸æ–¹æ³•è½¬æ¢Integeræ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-133-7"><a id="__codelineno-133-7" name="__codelineno-133-7" href="#__codelineno-133-7"></a><span class="n">Integer</span><span class="o">[]</span><span class="w"> </span><span class="n">tIns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tList</span><span class="p">.</span><span class="na">toArray</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Integer</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">);</span>
</span><span id="__span-133-8"><a id="__codelineno-133-8" name="__codelineno-133-8" href="#__codelineno-133-8"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">tIns</span><span class="p">).</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-133-9"><a id="__codelineno-133-9" name="__codelineno-133-9" href="#__codelineno-133-9"></a>
</span><span id="__span-133-10"><a id="__codelineno-133-10" name="__codelineno-133-10" href="#__codelineno-133-10"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"\nç»è¿‡Streamæµç­›é€‰ä¸å¤§äº50çš„å…ƒç´ åè½¬æ¢çš„Integeræ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-133-11"><a id="__codelineno-133-11" name="__codelineno-133-11" href="#__codelineno-133-11"></a><span class="n">Integer</span><span class="o">[]</span><span class="w"> </span><span class="n">tStreamToIns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tList</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">filter</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">50</span><span class="p">).</span><span class="na">toArray</span><span class="p">(</span><span class="n">Integer</span><span class="o">[]</span><span class="p">::</span><span class="k">new</span><span class="p">);</span>
</span><span id="__span-133-12"><a id="__codelineno-133-12" name="__codelineno-133-12" href="#__codelineno-133-12"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">tStreamToIns</span><span class="p">).</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-133-13"><a id="__codelineno-133-13" name="__codelineno-133-13" href="#__codelineno-133-13"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">();</span>
</span></code></pre></div> <p>æ§åˆ¶å°è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-134-1"><a id="__codelineno-134-1" name="__codelineno-134-1" href="#__codelineno-134-1"></a>åŸé›†åˆï¼š
</span><span id="__span-134-2"><a id="__codelineno-134-2" name="__codelineno-134-2" href="#__codelineno-134-2"></a>74, 17, 74, 14, 92, 36, 65, 93, 29, 26, 
</span><span id="__span-134-3"><a id="__codelineno-134-3" name="__codelineno-134-3" href="#__codelineno-134-3"></a>æ­£å¸¸æ–¹æ³•è½¬æ¢Integeræ•°ç»„ï¼š
</span><span id="__span-134-4"><a id="__codelineno-134-4" name="__codelineno-134-4" href="#__codelineno-134-4"></a>74, 17, 74, 14, 92, 36, 65, 93, 29, 26, 
</span><span id="__span-134-5"><a id="__codelineno-134-5" name="__codelineno-134-5" href="#__codelineno-134-5"></a>ç»è¿‡Streamæµç­›é€‰ä¸å¤§äº50çš„å…ƒç´ åè½¬æ¢çš„Integeræ•°ç»„ï¼š
</span><span id="__span-134-6"><a id="__codelineno-134-6" name="__codelineno-134-6" href="#__codelineno-134-6"></a>17, 14, 36, 29, 26, 
</span></code></pre></div> <p>é›†åˆæœ¬èº«æä¾›äº† <code>toArray()</code> æ–¹æ³•æ¥å°†é›†åˆè½¬åŒ–ä¸ºæ•°ç»„ï¼Œä½†æ˜¯ä¸­é—´å¦‚æœæ¶‰åŠè¿‡æ»¤ã€å˜æ¢ç­‰æ“ä½œï¼Œè¯¥æ–¹æ³•å°±æ˜¾å¾—ä¸æ˜¯é‚£ä¹ˆæ–¹ä¾¿ï¼Œè€Œä½¿ç”¨æµæ“ä½œå¯ä»¥ç›´æ¥åœ¨ä¸­é—´å£°æ˜è¿‡æ»¤ã€å˜æ¢çš„æ–¹æ³•ï¼Œå¹¶åœ¨æœ€åç”¨ <code>toArray()</code> æ–¹æ³•æ¥å¯¹æ“ä½œåçš„æµè¿›è¡Œæ”¶é›†æ“ä½œã€‚</p> <p><strong><code>max()</code>/<code>min()</code>/<code>count()</code> æ–¹æ³•</strong></p> <p>è¿™ä¸‰ä¸ªæ–¹æ³•åˆ†åˆ«å¯è·å¾—æµä¸­å…ƒç´ çš„æœ€å¤§å€¼ã€æœ€å°å€¼ä»¥åŠé•¿åº¦ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-135-1"><a id="__codelineno-135-1" name="__codelineno-135-1" href="#__codelineno-135-1"></a><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">mList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StreamTestUtils</span><span class="p">.</span><span class="na">randomGenerate</span><span class="p">();</span>
</span><span id="__span-135-2"><a id="__codelineno-135-2" name="__codelineno-135-2" href="#__codelineno-135-2"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"åŸæ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-135-3"><a id="__codelineno-135-3" name="__codelineno-135-3" href="#__codelineno-135-3"></a>
</span><span id="__span-135-4"><a id="__codelineno-135-4" name="__codelineno-135-4" href="#__codelineno-135-4"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">mList</span><span class="p">).</span><span class="na">sorted</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-135-5"><a id="__codelineno-135-5" name="__codelineno-135-5" href="#__codelineno-135-5"></a>
</span><span id="__span-135-6"><a id="__codelineno-135-6" name="__codelineno-135-6" href="#__codelineno-135-6"></a><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">mList</span><span class="p">).</span><span class="na">count</span><span class="p">();</span>
</span><span id="__span-135-7"><a id="__codelineno-135-7" name="__codelineno-135-7" href="#__codelineno-135-7"></a><span class="kt">int</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">mList</span><span class="p">).</span><span class="na">max</span><span class="p">().</span><span class="na">orElse</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-135-8"><a id="__codelineno-135-8" name="__codelineno-135-8" href="#__codelineno-135-8"></a><span class="kt">int</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">mList</span><span class="p">).</span><span class="na">min</span><span class="p">().</span><span class="na">orElse</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-135-9"><a id="__codelineno-135-9" name="__codelineno-135-9" href="#__codelineno-135-9"></a>
</span><span id="__span-135-10"><a id="__codelineno-135-10" name="__codelineno-135-10" href="#__codelineno-135-10"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"\né•¿åº¦ï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">count</span><span class="p">);</span>
</span><span id="__span-135-11"><a id="__codelineno-135-11" name="__codelineno-135-11" href="#__codelineno-135-11"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æœ€å¤§å€¼ï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">max</span><span class="p">);</span>
</span><span id="__span-135-12"><a id="__codelineno-135-12" name="__codelineno-135-12" href="#__codelineno-135-12"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"æœ€å°å€¼ï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">min</span><span class="p">);</span>
</span></code></pre></div> <p>æ§åˆ¶å°è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-136-1"><a id="__codelineno-136-1" name="__codelineno-136-1" href="#__codelineno-136-1"></a>åŸæ•°ç»„ï¼š
</span><span id="__span-136-2"><a id="__codelineno-136-2" name="__codelineno-136-2" href="#__codelineno-136-2"></a>15, 19, 30, 39, 48, 53, 92, 94, 95, 97, 
</span><span id="__span-136-3"><a id="__codelineno-136-3" name="__codelineno-136-3" href="#__codelineno-136-3"></a>é•¿åº¦ï¼š10
</span><span id="__span-136-4"><a id="__codelineno-136-4" name="__codelineno-136-4" href="#__codelineno-136-4"></a>æœ€å¤§å€¼ï¼š97
</span><span id="__span-136-5"><a id="__codelineno-136-5" name="__codelineno-136-5" href="#__codelineno-136-5"></a>æœ€å°å€¼ï¼š15
</span></code></pre></div> <p><code>min()</code> å’Œ <code>max()</code> æ–¹æ³•åˆ†åˆ«æ¥æ”¶ä¸€ä¸ªæ¯”è¾ƒå™¨ï¼Œé€šè¿‡æ¯”è¾ƒå™¨æ¥åˆ¤æ–­ä¼ å‚ç±»å‹çš„æ¯”è¾ƒæ–¹å¼ï¼ˆæ¯”å¦‚ä¼ å…¥çš„ Person ç±»æŒ‰åå­—å–å¾—æœ€å¤§/æœ€å°å€¼ï¼Œåˆ™æ¯”è¾ƒå™¨æœ€åè¿”å›çš„æ˜¯åå­—çš„æ¯”è¾ƒå€¼ï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ª <code>Optional&lt;T&gt;</code> ç±»</p> <p>è¿™ä¸¤ä¸ªæ–¹æ³•è¦æ±‚è°ƒç”¨ <code>Optional&lt;T&gt;</code> ç±»çš„ <code>isPresent()</code> åˆ¤æ–­æµæ•°æ®ä¸­æ˜¯å¦å­˜åœ¨è¯¥å€¼ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½ä¼šåœ¨å…¶åè·Ÿ <code>orElse()</code> æ–¹æ³•æŒ‡å®šä¸å­˜åœ¨æ—¶çš„é»˜è®¤å€¼ã€‚ ï¼ˆè¿™é‡Œä¸ºäº†æ–¹ä¾¿æ‰€ä»¥è°ƒç”¨çš„æ˜¯ IntStream ç‰¹å®šæµçš„æ–¹æ³•ï¼Œæœ¬è´¨åŒºåˆ«æ˜¯å°†æ³›å‹è®¾ä¸º Integerï¼Œå³è¿”å› OptionalInt ç±»ï¼Œé»˜è®¤çš„æ¯”è¾ƒå™¨ä¸ºæ¯”è¾ƒä¸¤æ•°ä¹‹é—´çš„å¤§å°ï¼‰ã€‚</p> <p><strong><code>allMatch()</code>/<code>anyMatch()</code>/<code>noneMatch()</code> æ–¹æ³•</strong></p> <p>è¿™ä¸‰ä¸ªæ–¹æ³•æ˜¯æŸ¥çœ‹æµä¸­å…ƒç´ æ˜¯å¦åŒ¹é…æŸä¸ªç‰¹å®šé€»è¾‘</p> <ul> <li><code>allMatch()</code>ï¼šå…¨éƒ¨åŒ¹é…æ‰è¿”å› <code>true</code></li> <li><code>anyMatch()</code>ï¼šä»»æ„å…ƒç´ åŒ¹é…å°±è¿”å› <code>true</code></li> <li><code>noneMatch()</code>ï¼šå…¨éƒ¨ä¸åŒ¹é…æ‰è¿”å› <code>true</code></li> </ul> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-137-1"><a id="__codelineno-137-1" name="__codelineno-137-1" href="#__codelineno-137-1"></a><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">mList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StreamTestUtils</span><span class="p">.</span><span class="na">randomGenerate</span><span class="p">();</span>
</span><span id="__span-137-2"><a id="__codelineno-137-2" name="__codelineno-137-2" href="#__codelineno-137-2"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"åŸæ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-137-3"><a id="__codelineno-137-3" name="__codelineno-137-3" href="#__codelineno-137-3"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">mList</span><span class="p">).</span><span class="na">sorted</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-137-4"><a id="__codelineno-137-4" name="__codelineno-137-4" href="#__codelineno-137-4"></a>
</span><span id="__span-137-5"><a id="__codelineno-137-5" name="__codelineno-137-5" href="#__codelineno-137-5"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"\nå…¨éƒ¨åŒ¹é…æµ‹è¯•ï¼š"</span><span class="p">);</span>
</span><span id="__span-137-6"><a id="__codelineno-137-6" name="__codelineno-137-6" href="#__codelineno-137-6"></a><span class="kt">boolean</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">mList</span><span class="p">).</span><span class="na">allMatch</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-137-7"><a id="__codelineno-137-7" name="__codelineno-137-7" href="#__codelineno-137-7"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"ç»“æœï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">match</span><span class="p">);</span>
</span><span id="__span-137-8"><a id="__codelineno-137-8" name="__codelineno-137-8" href="#__codelineno-137-8"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"éƒ¨åˆ†åŒ¹é…æµ‹è¯•ï¼š"</span><span class="p">);</span>
</span><span id="__span-137-9"><a id="__codelineno-137-9" name="__codelineno-137-9" href="#__codelineno-137-9"></a><span class="n">match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">mList</span><span class="p">).</span><span class="na">anyMatch</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">50</span><span class="p">);</span>
</span><span id="__span-137-10"><a id="__codelineno-137-10" name="__codelineno-137-10" href="#__codelineno-137-10"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"ç»“æœï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">match</span><span class="p">);</span>
</span><span id="__span-137-11"><a id="__codelineno-137-11" name="__codelineno-137-11" href="#__codelineno-137-11"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"ä¸åŒ¹é…æµ‹è¯•ï¼š"</span><span class="p">);</span>
</span><span id="__span-137-12"><a id="__codelineno-137-12" name="__codelineno-137-12" href="#__codelineno-137-12"></a><span class="n">match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">mList</span><span class="p">).</span><span class="na">noneMatch</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-137-13"><a id="__codelineno-137-13" name="__codelineno-137-13" href="#__codelineno-137-13"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"ç»“æœï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">match</span><span class="p">);</span>
</span></code></pre></div> <p>æ§åˆ¶å°æ‰“å°ï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-138-1"><a id="__codelineno-138-1" name="__codelineno-138-1" href="#__codelineno-138-1"></a>åŸæ•°ç»„ï¼š
</span><span id="__span-138-2"><a id="__codelineno-138-2" name="__codelineno-138-2" href="#__codelineno-138-2"></a>3, 8, 8, 46, 47, 52, 59, 67, 68, 77, 
</span><span id="__span-138-3"><a id="__codelineno-138-3" name="__codelineno-138-3" href="#__codelineno-138-3"></a>å…¨éƒ¨åŒ¹é…æµ‹è¯•ï¼š
</span><span id="__span-138-4"><a id="__codelineno-138-4" name="__codelineno-138-4" href="#__codelineno-138-4"></a>ç»“æœï¼štrue
</span><span id="__span-138-5"><a id="__codelineno-138-5" name="__codelineno-138-5" href="#__codelineno-138-5"></a>éƒ¨åˆ†åŒ¹é…æµ‹è¯•ï¼š
</span><span id="__span-138-6"><a id="__codelineno-138-6" name="__codelineno-138-6" href="#__codelineno-138-6"></a>ç»“æœï¼štrue
</span><span id="__span-138-7"><a id="__codelineno-138-7" name="__codelineno-138-7" href="#__codelineno-138-7"></a>ä¸åŒ¹é…æµ‹è¯•ï¼š
</span><span id="__span-138-8"><a id="__codelineno-138-8" name="__codelineno-138-8" href="#__codelineno-138-8"></a>ç»“æœï¼štrue
</span></code></pre></div> <p><strong><code>findFirst()/findAny()</code> æ–¹æ³•</strong></p> <p>è¿™ä¸¤ä¸ªæ–¹æ³•è¿”å›æµä¸­æ•°æ®çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ³¨æ„æ˜¯æµä¸­æ•°æ®æ“ä½œçš„é¡ºåºï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥æµæ“ä½œä¼šä»¥æ­¤æ•°æ®ä½œä¸ºç¬¬ä¸€ä¸ªï¼Œè€Œä¸æ˜¯ä¼ å…¥æµçš„æ•°æ®çš„é¡ºåºã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-139-1"><a id="__codelineno-139-1" name="__codelineno-139-1" href="#__codelineno-139-1"></a><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">mList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StreamTestUtils</span><span class="p">.</span><span class="na">randomGenerate</span><span class="p">();</span>
</span><span id="__span-139-2"><a id="__codelineno-139-2" name="__codelineno-139-2" href="#__codelineno-139-2"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"åŸæ•°ç»„ï¼š"</span><span class="p">);</span>
</span><span id="__span-139-3"><a id="__codelineno-139-3" name="__codelineno-139-3" href="#__codelineno-139-3"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">mList</span><span class="p">).</span><span class="na">sorted</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">", "</span><span class="p">));</span>
</span><span id="__span-139-4"><a id="__codelineno-139-4" name="__codelineno-139-4" href="#__codelineno-139-4"></a>
</span><span id="__span-139-5"><a id="__codelineno-139-5" name="__codelineno-139-5" href="#__codelineno-139-5"></a><span class="kt">int</span><span class="w"> </span><span class="n">firstNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">mList</span><span class="p">).</span><span class="na">findFirst</span><span class="p">().</span><span class="na">orElse</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-139-6"><a id="__codelineno-139-6" name="__codelineno-139-6" href="#__codelineno-139-6"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"\nç¬¬ä¸€ä¸ªæ•°ä¸ºï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">firstNum</span><span class="p">);</span>
</span><span id="__span-139-7"><a id="__codelineno-139-7" name="__codelineno-139-7" href="#__codelineno-139-7"></a>
</span><span id="__span-139-8"><a id="__codelineno-139-8" name="__codelineno-139-8" href="#__codelineno-139-8"></a><span class="kt">int</span><span class="w"> </span><span class="n">anyNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">mList</span><span class="p">).</span><span class="na">findAny</span><span class="p">().</span><span class="na">orElse</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-139-9"><a id="__codelineno-139-9" name="__codelineno-139-9" href="#__codelineno-139-9"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"ä»»æ„ä¸€ä¸ªæ•°ä¸ºï¼š"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">anyNum</span><span class="p">);</span>
</span></code></pre></div> <p>æ§åˆ¶å°æ‰“å°ï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-140-1"><a id="__codelineno-140-1" name="__codelineno-140-1" href="#__codelineno-140-1"></a>åŸæ•°ç»„ï¼š
</span><span id="__span-140-2"><a id="__codelineno-140-2" name="__codelineno-140-2" href="#__codelineno-140-2"></a>12, 19, 35, 41, 56, 58, 62, 67, 71, 80, 
</span><span id="__span-140-3"><a id="__codelineno-140-3" name="__codelineno-140-3" href="#__codelineno-140-3"></a>ç¬¬ä¸€ä¸ªæ•°ä¸ºï¼š41
</span><span id="__span-140-4"><a id="__codelineno-140-4" name="__codelineno-140-4" href="#__codelineno-140-4"></a>ä»»æ„ä¸€ä¸ªæ•°ä¸ºï¼š41
</span></code></pre></div> <p><code>findFirst()</code> å’Œ <code>findAny()</code> æ–¹æ³•çš„ä¸»è¦åŒºåˆ«æ˜¯å‰è€…å¯¹å¹¶è¡Œæµçš„é™åˆ¶å¾ˆå¤šï¼Œè€Œåè€…å¯¹å¹¶è¡Œæµçš„é™åˆ¶è¾ƒå°‘ï¼Œä¸€èˆ¬é‡‡ç”¨<code>findAny()</code>æ–¹æ³•ã€‚</p> <h3 id="93å…¶ä»–ç‰¹å®šç±»å‹çš„æµ">9.3ã€å…¶ä»–ç‰¹å®šç±»å‹çš„æµ<a class="headerlink" href="#93å…¶ä»–ç‰¹å®šç±»å‹çš„æµ" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>é™¤äº†å¸¸è§„å¯¹è±¡æµä¹‹å¤–ï¼ŒJava 8 è¿˜é™„å¸¦äº†ä¸€äº›ç‰¹æ®Šç±»å‹çš„æµï¼Œç”¨äºå¤„ç†åŸå§‹æ•°æ®ç±»å‹ <code>int</code>ã€<code>long</code> ä»¥åŠ <code>double</code>ï¼Œå®ƒä»¬å°±æ˜¯ <code>IntStream</code>ã€<code>LongStream</code> è¿˜æœ‰ <code>DoubleStream</code>ã€‚</p> <p>å…¶ä¸­ï¼Œ<code>IntStreams.range()</code> æ–¹æ³•è¿˜å¯ä»¥è¢«ç”¨æ¥å–ä»£å¸¸è§„çš„ <code>for</code> å¾ªç¯, å¦‚ä¸‹æ‰€ç¤ºï¼š</p> <div class="language-go highlight"><span class="filename">Go</span><pre><span></span><code><span id="__span-141-1"><a id="__codelineno-141-1" name="__codelineno-141-1" href="#__codelineno-141-1"></a><span class="nx">IntStream</span><span class="p">.</span><span class="k">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
</span><span id="__span-141-2"><a id="__codelineno-141-2" name="__codelineno-141-2" href="#__codelineno-141-2"></a><span class="w">        </span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">System</span><span class="p">.</span><span class="nx">out</span><span class="p">::</span><span class="nx">println</span><span class="p">);</span><span class="c1">// ç›¸å½“äº for (int i = 1; i &lt; 4; i++) {}</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-142-1"><a id="__codelineno-142-1" name="__codelineno-142-1" href="#__codelineno-142-1"></a>1
</span><span id="__span-142-2"><a id="__codelineno-142-2" name="__codelineno-142-2" href="#__codelineno-142-2"></a>2
</span><span id="__span-142-3"><a id="__codelineno-142-3" name="__codelineno-142-3" href="#__codelineno-142-3"></a>3
</span></code></pre></div> <p>ä¸Šé¢è¿™äº›åŸå§‹ç±»å‹æµçš„å·¥ä½œæ–¹å¼ä¸å¸¸è§„å¯¹è±¡æµåŸºæœ¬æ˜¯ä¸€æ ·çš„ï¼Œä½†è¿˜æ˜¯ç•¥å¾®å­˜åœ¨ä¸€äº›åŒºåˆ«ï¼š</p> <ul> <li>åŸå§‹ç±»å‹æµä½¿ç”¨å…¶ç‹¬æœ‰çš„å‡½æ•°å¼æ¥å£ï¼Œä¾‹å¦‚ <code>IntFunction</code> ä»£æ›¿ <code>Function</code>ã€<code>IntPredicate</code> ä»£æ›¿ <code>Predicate</code>ã€‚</li> <li>åŸå§‹ç±»å‹æµæ”¯æŒé¢å¤–çš„ç»ˆç«¯èšåˆæ“ä½œï¼Œæ¯”å¦‚ <code>sum()</code> ä»¥åŠ <code>average()</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</li> </ul> <div class="language-go highlight"><span class="filename">Go</span><pre><span></span><code><span id="__span-143-1"><a id="__codelineno-143-1" name="__codelineno-143-1" href="#__codelineno-143-1"></a><span class="nx">IntStream</span><span class="p">.</span><span class="k">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">).</span><span class="kd">map</span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="o">-</span><span class="p">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="c1">// å¯¹æ•°å€¼ä¸­çš„æ¯ä¸ªå¯¹è±¡æ‰§è¡Œ 2*n + 1 æ“ä½œ</span>
</span><span id="__span-143-2"><a id="__codelineno-143-2" name="__codelineno-143-2" href="#__codelineno-143-2"></a><span class="w">        </span><span class="p">.</span><span class="nx">average</span><span class="p">()</span><span class="w"> </span><span class="c1">// æ±‚å¹³å‡å€¼</span>
</span><span id="__span-143-3"><a id="__codelineno-143-3" name="__codelineno-143-3" href="#__codelineno-143-3"></a><span class="w">        </span><span class="p">.</span><span class="nx">ifPresent</span><span class="p">(</span><span class="nx">System</span><span class="p">.</span><span class="nx">out</span><span class="p">::</span><span class="nx">println</span><span class="p">);</span><span class="w">  </span><span class="c1">// å¦‚æœå€¼ä¸ä¸ºç©ºï¼Œåˆ™è¾“å‡º</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-144-1"><a id="__codelineno-144-1" name="__codelineno-144-1" href="#__codelineno-144-1"></a>5.0
</span></code></pre></div> <p>ä½†æ˜¯ï¼Œå¶å°”æˆ‘ä»¬ä¹Ÿæœ‰è¿™ç§éœ€æ±‚ï¼Œéœ€è¦å°†å¸¸è§„å¯¹è±¡æµè½¬æ¢ä¸ºåŸå§‹ç±»å‹æµï¼Œè¿™æ—¶ä¸­é—´æ“ä½œ <code>mapToInt()</code>ã€<code>mapToLong()</code> ä»¥åŠ <code>mapToDouble</code> å°±æ´¾ä¸Šç”¨åœºäº†ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-145-1"><a id="__codelineno-145-1" name="__codelineno-145-1" href="#__codelineno-145-1"></a><span class="n">Stream</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">"a1"</span><span class="p">,</span><span class="w"> </span><span class="s">"a2"</span><span class="p">,</span><span class="w"> </span><span class="s">"a3"</span><span class="p">)</span>
</span><span id="__span-145-2"><a id="__codelineno-145-2" name="__codelineno-145-2" href="#__codelineno-145-2"></a><span class="w">    </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="w"> </span><span class="c1">// å¯¹æ¯ä¸ªå­—ç¬¦ä¸²å…ƒç´ ä»ä¸‹æ ‡1ä½ç½®å¼€å§‹æˆªå–</span>
</span><span id="__span-145-3"><a id="__codelineno-145-3" name="__codelineno-145-3" href="#__codelineno-145-3"></a><span class="w">    </span><span class="p">.</span><span class="na">mapToInt</span><span class="p">(</span><span class="n">Integer</span><span class="p">::</span><span class="n">parseInt</span><span class="p">)</span><span class="w"> </span><span class="c1">// è½¬æˆ int åŸºç¡€ç±»å‹ç±»å‹æµ</span>
</span><span id="__span-145-4"><a id="__codelineno-145-4" name="__codelineno-145-4" href="#__codelineno-145-4"></a><span class="w">    </span><span class="p">.</span><span class="na">max</span><span class="p">()</span><span class="w"> </span><span class="c1">// å–æœ€å¤§å€¼</span>
</span><span id="__span-145-5"><a id="__codelineno-145-5" name="__codelineno-145-5" href="#__codelineno-145-5"></a><span class="w">    </span><span class="p">.</span><span class="na">ifPresent</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span><span class="w">  </span><span class="c1">// ä¸ä¸ºç©ºåˆ™è¾“å‡º</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-146-1"><a id="__codelineno-146-1" name="__codelineno-146-1" href="#__codelineno-146-1"></a>3
</span></code></pre></div> <p>å¦‚æœéœ€è¦å°†åŸå§‹ç±»å‹æµè£…æ¢æˆå¯¹è±¡æµï¼Œå¯ä»¥ä½¿ç”¨ <code>mapToObj()</code> æ¥è¾¾åˆ°ç›®çš„ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-147-1"><a id="__codelineno-147-1" name="__codelineno-147-1" href="#__codelineno-147-1"></a><span class="n">IntStream</span><span class="p">.</span><span class="na">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
</span><span id="__span-147-2"><a id="__codelineno-147-2" name="__codelineno-147-2" href="#__codelineno-147-2"></a><span class="w">    </span><span class="p">.</span><span class="na">mapToObj</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">"a"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="c1">// for å¾ªç¯ 1-&gt;4, æ‹¼æ¥å‰ç¼€ a</span>
</span><span id="__span-147-3"><a id="__codelineno-147-3" name="__codelineno-147-3" href="#__codelineno-147-3"></a><span class="w">    </span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span><span class="w"> </span><span class="c1">// for å¾ªç¯æ‰“å°</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-148-1"><a id="__codelineno-148-1" name="__codelineno-148-1" href="#__codelineno-148-1"></a>a1
</span><span id="__span-148-2"><a id="__codelineno-148-2" name="__codelineno-148-2" href="#__codelineno-148-2"></a>a2
</span><span id="__span-148-3"><a id="__codelineno-148-3" name="__codelineno-148-3" href="#__codelineno-148-3"></a>a3
</span></code></pre></div> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªç»„åˆç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†åŒç²¾åº¦æµé¦–å…ˆè½¬æ¢æˆ int ç±»å‹æµï¼Œç„¶åå†å°†å…¶è£…æ¢æˆå¯¹è±¡æµï¼š</p> <div class="language-rust highlight"><span class="filename">Rust</span><pre><span></span><code><span id="__span-149-1"><a id="__codelineno-149-1" name="__codelineno-149-1" href="#__codelineno-149-1"></a><span class="n">Stream</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="mf">3.0</span><span class="p">)</span>
</span><span id="__span-149-2"><a id="__codelineno-149-2" name="__codelineno-149-2" href="#__codelineno-149-2"></a><span class="w">        </span><span class="p">.</span><span class="n">mapToInt</span><span class="p">(</span><span class="n">Double</span><span class="p">::</span><span class="n">intValue</span><span class="p">)</span><span class="w"> </span><span class="c1">// double ç±»å‹è½¬ int</span>
</span><span id="__span-149-3"><a id="__codelineno-149-3" name="__codelineno-149-3" href="#__codelineno-149-3"></a><span class="w">        </span><span class="p">.</span><span class="n">mapToObj</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="s">"a"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="c1">// å¯¹å€¼æ‹¼æ¥å‰ç¼€ a</span>
</span><span id="__span-149-4"><a id="__codelineno-149-4" name="__codelineno-149-4" href="#__codelineno-149-4"></a><span class="w">        </span><span class="p">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span><span class="w"> </span><span class="c1">// for å¾ªç¯æ‰“å°</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-150-1"><a id="__codelineno-150-1" name="__codelineno-150-1" href="#__codelineno-150-1"></a>a1
</span><span id="__span-150-2"><a id="__codelineno-150-2" name="__codelineno-150-2" href="#__codelineno-150-2"></a>a2
</span><span id="__span-150-3"><a id="__codelineno-150-3" name="__codelineno-150-3" href="#__codelineno-150-3"></a>a3
</span></code></pre></div> <h3 id="94stream-æµçš„å¤„ç†é¡ºåº">9.4ã€Stream æµçš„å¤„ç†é¡ºåº<a class="headerlink" href="#94stream-æµçš„å¤„ç†é¡ºåº" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>Stream æµçš„ä¸­é—´æ“ä½œçš„æœ‰ä¸ªé‡è¦ç‰¹æ€§ â€”â€” <strong>å»¶è¿Ÿæ€§</strong>ã€‚è§‚å¯Ÿä¸‹é¢è¿™ä¸ªæ²¡æœ‰ç»ˆç«¯æ“ä½œçš„ç¤ºä¾‹ä»£ç ï¼š</p> <div class="language-kotlin highlight"><span class="filename">Kotlin</span><pre><span></span><code><span id="__span-151-1"><a id="__codelineno-151-1" name="__codelineno-151-1" href="#__codelineno-151-1"></a><span class="n">Stream</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">"d2"</span><span class="p">,</span><span class="w"> </span><span class="s">"a2"</span><span class="p">,</span><span class="w"> </span><span class="s">"b1"</span><span class="p">,</span><span class="w"> </span><span class="s">"b3"</span><span class="p">,</span><span class="w"> </span><span class="s">"c"</span><span class="p">)</span>
</span><span id="__span-151-2"><a id="__codelineno-151-2" name="__codelineno-151-2" href="#__codelineno-151-2"></a><span class="w">        </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-151-3"><a id="__codelineno-151-3" name="__codelineno-151-3" href="#__codelineno-151-3"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"filter: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
</span><span id="__span-151-4"><a id="__codelineno-151-4" name="__codelineno-151-4" href="#__codelineno-151-4"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
</span><span id="__span-151-5"><a id="__codelineno-151-5" name="__codelineno-151-5" href="#__codelineno-151-5"></a><span class="w">        </span><span class="p">});</span>
</span></code></pre></div> <p>æ‰§è¡Œæ­¤ä»£ç æ®µå®ƒä¸ä¼šæ‰“å°ä»»ä½•å†…å®¹ã€‚å› ä¸ºå½“ä¸”ä»…å½“å­˜åœ¨ç»ˆç«¯æ“ä½œæ—¶ï¼Œä¸­é—´æ“ä½œæ“ä½œæ‰ä¼šè¢«æ‰§è¡Œã€‚</p> <p>æ¥ä¸‹æ¥ï¼Œå¯¹ä¸Šé¢çš„ä»£ç æ·»åŠ  <code>forEach</code>ç»ˆç«¯æ“ä½œï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-152-1"><a id="__codelineno-152-1" name="__codelineno-152-1" href="#__codelineno-152-1"></a><span class="n">Stream</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">"d2"</span><span class="p">,</span><span class="w"> </span><span class="s">"a2"</span><span class="p">,</span><span class="w"> </span><span class="s">"b1"</span><span class="p">,</span><span class="w"> </span><span class="s">"b3"</span><span class="p">,</span><span class="w"> </span><span class="s">"c"</span><span class="p">)</span>
</span><span id="__span-152-2"><a id="__codelineno-152-2" name="__codelineno-152-2" href="#__codelineno-152-2"></a><span class="w">    </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-152-3"><a id="__codelineno-152-3" name="__codelineno-152-3" href="#__codelineno-152-3"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"filter:\t\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
</span><span id="__span-152-4"><a id="__codelineno-152-4" name="__codelineno-152-4" href="#__codelineno-152-4"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
</span><span id="__span-152-5"><a id="__codelineno-152-5" name="__codelineno-152-5" href="#__codelineno-152-5"></a><span class="w">    </span><span class="p">})</span>
</span><span id="__span-152-6"><a id="__codelineno-152-6" name="__codelineno-152-6" href="#__codelineno-152-6"></a><span class="w">    </span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"forEach:\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">));</span>
</span></code></pre></div> <p>è¾“å‡ºå¦‚ä¸‹ï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-153-1"><a id="__codelineno-153-1" name="__codelineno-153-1" href="#__codelineno-153-1"></a>filter:     d2
</span><span id="__span-153-2"><a id="__codelineno-153-2" name="__codelineno-153-2" href="#__codelineno-153-2"></a>forEach:    d2
</span><span id="__span-153-3"><a id="__codelineno-153-3" name="__codelineno-153-3" href="#__codelineno-153-3"></a>filter:     a2
</span><span id="__span-153-4"><a id="__codelineno-153-4" name="__codelineno-153-4" href="#__codelineno-153-4"></a>forEach:    a2
</span><span id="__span-153-5"><a id="__codelineno-153-5" name="__codelineno-153-5" href="#__codelineno-153-5"></a>filter:     b1
</span><span id="__span-153-6"><a id="__codelineno-153-6" name="__codelineno-153-6" href="#__codelineno-153-6"></a>forEach:    b1
</span><span id="__span-153-7"><a id="__codelineno-153-7" name="__codelineno-153-7" href="#__codelineno-153-7"></a>filter:     b3
</span><span id="__span-153-8"><a id="__codelineno-153-8" name="__codelineno-153-8" href="#__codelineno-153-8"></a>forEach:    b3
</span><span id="__span-153-9"><a id="__codelineno-153-9" name="__codelineno-153-9" href="#__codelineno-153-9"></a>filter:     c
</span><span id="__span-153-10"><a id="__codelineno-153-10" name="__codelineno-153-10" href="#__codelineno-153-10"></a>forEach:    c
</span></code></pre></div> <p>ä»£ç å¹¶ä¸æ˜¯å…ˆå°†æ‰€æœ‰ <code>filter</code> å‰ç¼€çš„å­—ç¬¦ä¸²æ‰“å°å‡ºæ¥ï¼Œæ¥ç€æ‰ä¼šæ‰“å° <code>forEach</code> å‰ç¼€çš„å­—ç¬¦ä¸²ã€‚äº‹å®ä¸Šï¼Œè¾“å‡ºçš„ç»“æœæ˜¯éšç€é“¾æ¡å‚ç›´ç§»åŠ¨çš„ã€‚æ¯”å¦‚è¯´ï¼Œå½“ Stream å¼€å§‹å¤„ç† <code>d2</code> å…ƒç´ æ—¶ï¼Œå®ƒå®é™…ä¸Šä¼šåœ¨æ‰§è¡Œå®Œ <code>filter</code> æ“ä½œåï¼Œå†æ‰§è¡Œ <code>forEach</code> æ“ä½œï¼Œæ¥ç€æ‰ä¼šå¤„ç†ç¬¬äºŒä¸ªå…ƒç´ ã€‚</p> <p>å› ä¸ºå‡ºäºæ€§èƒ½çš„è€ƒè™‘ã€‚è¿™æ ·è®¾è®¡å¯ä»¥å‡å°‘å¯¹æ¯ä¸ªå…ƒç´ çš„å®é™…æ“ä½œæ•°ï¼Œçœ‹å®Œä¸‹é¢ä»£ç ä½ å°±æ˜ç™½äº†ï¼š</p> <div class="language-kotlin highlight"><span class="filename">Kotlin</span><pre><span></span><code><span id="__span-154-1"><a id="__codelineno-154-1" name="__codelineno-154-1" href="#__codelineno-154-1"></a><span class="n">Stream</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">"d2"</span><span class="p">,</span><span class="w"> </span><span class="s">"a2"</span><span class="p">,</span><span class="w"> </span><span class="s">"b1"</span><span class="p">,</span><span class="w"> </span><span class="s">"b3"</span><span class="p">,</span><span class="w"> </span><span class="s">"c"</span><span class="p">)</span>
</span><span id="__span-154-2"><a id="__codelineno-154-2" name="__codelineno-154-2" href="#__codelineno-154-2"></a><span class="w">        </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-154-3"><a id="__codelineno-154-3" name="__codelineno-154-3" href="#__codelineno-154-3"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"map:\t\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
</span><span id="__span-154-4"><a id="__codelineno-154-4" name="__codelineno-154-4" href="#__codelineno-154-4"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">();</span><span class="w"> </span><span class="c1">// è½¬å¤§å†™</span>
</span><span id="__span-154-5"><a id="__codelineno-154-5" name="__codelineno-154-5" href="#__codelineno-154-5"></a><span class="w">        </span><span class="p">})</span>
</span><span id="__span-154-6"><a id="__codelineno-154-6" name="__codelineno-154-6" href="#__codelineno-154-6"></a><span class="w">        </span><span class="p">.</span><span class="na">anyMatch</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-154-7"><a id="__codelineno-154-7" name="__codelineno-154-7" href="#__codelineno-154-7"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"anyMatch:\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
</span><span id="__span-154-8"><a id="__codelineno-154-8" name="__codelineno-154-8" href="#__codelineno-154-8"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">"A"</span><span class="p">);</span><span class="w"> </span><span class="c1">// è¿‡æ»¤å‡ºä»¥ A ä¸ºå‰ç¼€çš„å…ƒç´ </span>
</span><span id="__span-154-9"><a id="__codelineno-154-9" name="__codelineno-154-9" href="#__codelineno-154-9"></a><span class="w">        </span><span class="p">});</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-155-1"><a id="__codelineno-155-1" name="__codelineno-155-1" href="#__codelineno-155-1"></a>map:        d2
</span><span id="__span-155-2"><a id="__codelineno-155-2" name="__codelineno-155-2" href="#__codelineno-155-2"></a>anyMatch:   D2
</span><span id="__span-155-3"><a id="__codelineno-155-3" name="__codelineno-155-3" href="#__codelineno-155-3"></a>map:        a2
</span><span id="__span-155-4"><a id="__codelineno-155-4" name="__codelineno-155-4" href="#__codelineno-155-4"></a>anyMatch:   A2
</span></code></pre></div> <p>ç»ˆç«¯æ“ä½œ <code>anyMatch()</code> è¡¨ç¤ºä»»ä½•ä¸€ä¸ªå…ƒç´ ä»¥ A ä¸ºå‰ç¼€ï¼Œè¿”å›ä¸º <code>true</code>ï¼Œå°±åœæ­¢å¾ªç¯ã€‚æ‰€ä»¥å®ƒä¼šä» <code>d2</code> å¼€å§‹åŒ¹é…ï¼Œæ¥ç€å¾ªç¯åˆ° <code>a2</code> çš„æ—¶å€™ï¼Œè¿”å›ä¸º <code>true</code> ï¼Œäºæ˜¯åœæ­¢å¾ªç¯ã€‚</p> <p>ç”±äºæ•°æ®æµçš„é“¾å¼è°ƒç”¨æ˜¯å‚ç›´æ‰§è¡Œçš„ï¼Œ<code>map</code> è¿™é‡Œåªéœ€è¦æ‰§è¡Œä¸¤æ¬¡ã€‚ç›¸å¯¹äºæ°´å¹³æ‰§è¡Œæ¥è¯´ï¼Œ<code>map</code> ä¼šæ‰§è¡Œå°½å¯èƒ½å°‘çš„æ¬¡æ•°ï¼Œè€Œä¸æ˜¯æŠŠæ‰€æœ‰å…ƒç´ éƒ½ <code>map</code> è½¬æ¢ä¸€éã€‚</p> <h3 id="95ä¸­é—´æ“ä½œé¡ºåºè¿™ä¹ˆé‡è¦">9.5ã€ä¸­é—´æ“ä½œé¡ºåºè¿™ä¹ˆé‡è¦ï¼Ÿ<a class="headerlink" href="#95ä¸­é—´æ“ä½œé¡ºåºè¿™ä¹ˆé‡è¦" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>ä¸‹é¢çš„ä¾‹å­ç”±ä¸¤ä¸ªä¸­é—´æ“ä½œ <code>map</code> å’Œ <code>filter</code>ï¼Œä»¥åŠä¸€ä¸ªç»ˆç«¯æ“ä½œ <code>forEach</code> ç»„æˆã€‚è®©æˆ‘ä»¬å†æ¥çœ‹çœ‹è¿™äº›æ“ä½œæ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-156-1"><a id="__codelineno-156-1" name="__codelineno-156-1" href="#__codelineno-156-1"></a><span class="n">Stream</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">"d2"</span><span class="p">,</span><span class="w"> </span><span class="s">"a2"</span><span class="p">,</span><span class="w"> </span><span class="s">"b1"</span><span class="p">,</span><span class="w"> </span><span class="s">"b3"</span><span class="p">,</span><span class="w"> </span><span class="s">"c"</span><span class="p">)</span>
</span><span id="__span-156-2"><a id="__codelineno-156-2" name="__codelineno-156-2" href="#__codelineno-156-2"></a><span class="w">    </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-156-3"><a id="__codelineno-156-3" name="__codelineno-156-3" href="#__codelineno-156-3"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"map:\t\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
</span><span id="__span-156-4"><a id="__codelineno-156-4" name="__codelineno-156-4" href="#__codelineno-156-4"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">();</span><span class="w"> </span><span class="c1">// è½¬å¤§å†™</span>
</span><span id="__span-156-5"><a id="__codelineno-156-5" name="__codelineno-156-5" href="#__codelineno-156-5"></a><span class="w">    </span><span class="p">})</span>
</span><span id="__span-156-6"><a id="__codelineno-156-6" name="__codelineno-156-6" href="#__codelineno-156-6"></a><span class="w">    </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-156-7"><a id="__codelineno-156-7" name="__codelineno-156-7" href="#__codelineno-156-7"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"filter:\t\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
</span><span id="__span-156-8"><a id="__codelineno-156-8" name="__codelineno-156-8" href="#__codelineno-156-8"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">"A"</span><span class="p">);</span><span class="w"> </span><span class="c1">// è¿‡æ»¤å‡ºä»¥ A ä¸ºå‰ç¼€çš„å…ƒç´ </span>
</span><span id="__span-156-9"><a id="__codelineno-156-9" name="__codelineno-156-9" href="#__codelineno-156-9"></a><span class="w">    </span><span class="p">})</span>
</span><span id="__span-156-10"><a id="__codelineno-156-10" name="__codelineno-156-10" href="#__codelineno-156-10"></a><span class="w">    </span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"forEach:\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">));</span><span class="w"> </span><span class="c1">// for å¾ªç¯è¾“å‡º</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-157-1"><a id="__codelineno-157-1" name="__codelineno-157-1" href="#__codelineno-157-1"></a>map:        d2
</span><span id="__span-157-2"><a id="__codelineno-157-2" name="__codelineno-157-2" href="#__codelineno-157-2"></a>filter:     D2
</span><span id="__span-157-3"><a id="__codelineno-157-3" name="__codelineno-157-3" href="#__codelineno-157-3"></a>map:        a2
</span><span id="__span-157-4"><a id="__codelineno-157-4" name="__codelineno-157-4" href="#__codelineno-157-4"></a>filter:     A2
</span><span id="__span-157-5"><a id="__codelineno-157-5" name="__codelineno-157-5" href="#__codelineno-157-5"></a>forEach:    A2
</span><span id="__span-157-6"><a id="__codelineno-157-6" name="__codelineno-157-6" href="#__codelineno-157-6"></a>map:        b1
</span><span id="__span-157-7"><a id="__codelineno-157-7" name="__codelineno-157-7" href="#__codelineno-157-7"></a>filter:     B1
</span><span id="__span-157-8"><a id="__codelineno-157-8" name="__codelineno-157-8" href="#__codelineno-157-8"></a>map:        b3
</span><span id="__span-157-9"><a id="__codelineno-157-9" name="__codelineno-157-9" href="#__codelineno-157-9"></a>filter:     B3
</span><span id="__span-157-10"><a id="__codelineno-157-10" name="__codelineno-157-10" href="#__codelineno-157-10"></a>map:        c
</span><span id="__span-157-11"><a id="__codelineno-157-11" name="__codelineno-157-11" href="#__codelineno-157-11"></a>filter:     C
</span></code></pre></div> <p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>map</code> å’Œ <code>filter</code> ä¼šå¯¹é›†åˆä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²è°ƒç”¨äº”æ¬¡ï¼Œè€Œ <code>forEach</code> å´åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œå› ä¸ºåªæœ‰ "a2" æ»¡è¶³è¿‡æ»¤æ¡ä»¶ã€‚</p> <p>å¦‚æœæ”¹å˜ä¸­é—´æ“ä½œçš„é¡ºåºï¼Œå°† <code>filter</code> ç§»åŠ¨åˆ°é“¾å¤´çš„æœ€å¼€å§‹ï¼Œå°±å¯ä»¥å¤§å¤§å‡å°‘å®é™…çš„æ‰§è¡Œæ¬¡æ•°ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-158-1"><a id="__codelineno-158-1" name="__codelineno-158-1" href="#__codelineno-158-1"></a><span class="n">Stream</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">"d2"</span><span class="p">,</span><span class="w"> </span><span class="s">"a2"</span><span class="p">,</span><span class="w"> </span><span class="s">"b1"</span><span class="p">,</span><span class="w"> </span><span class="s">"b3"</span><span class="p">,</span><span class="w"> </span><span class="s">"c"</span><span class="p">)</span>
</span><span id="__span-158-2"><a id="__codelineno-158-2" name="__codelineno-158-2" href="#__codelineno-158-2"></a><span class="w">    </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-158-3"><a id="__codelineno-158-3" name="__codelineno-158-3" href="#__codelineno-158-3"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"filter:\t\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
</span><span id="__span-158-4"><a id="__codelineno-158-4" name="__codelineno-158-4" href="#__codelineno-158-4"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">"a"</span><span class="p">);</span><span class="w"> </span><span class="c1">// è¿‡æ»¤å‡ºä»¥ a ä¸ºå‰ç¼€çš„å…ƒç´ </span>
</span><span id="__span-158-5"><a id="__codelineno-158-5" name="__codelineno-158-5" href="#__codelineno-158-5"></a><span class="w">    </span><span class="p">})</span>
</span><span id="__span-158-6"><a id="__codelineno-158-6" name="__codelineno-158-6" href="#__codelineno-158-6"></a><span class="w">    </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-158-7"><a id="__codelineno-158-7" name="__codelineno-158-7" href="#__codelineno-158-7"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"map:\t\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
</span><span id="__span-158-8"><a id="__codelineno-158-8" name="__codelineno-158-8" href="#__codelineno-158-8"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">();</span><span class="w"> </span><span class="c1">// è½¬å¤§å†™</span>
</span><span id="__span-158-9"><a id="__codelineno-158-9" name="__codelineno-158-9" href="#__codelineno-158-9"></a><span class="w">    </span><span class="p">})</span>
</span><span id="__span-158-10"><a id="__codelineno-158-10" name="__codelineno-158-10" href="#__codelineno-158-10"></a><span class="w">    </span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"forEach:\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">));</span><span class="w"> </span><span class="c1">// for å¾ªç¯è¾“å‡º</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-159-1"><a id="__codelineno-159-1" name="__codelineno-159-1" href="#__codelineno-159-1"></a>filter:     d2
</span><span id="__span-159-2"><a id="__codelineno-159-2" name="__codelineno-159-2" href="#__codelineno-159-2"></a>filter:     a2
</span><span id="__span-159-3"><a id="__codelineno-159-3" name="__codelineno-159-3" href="#__codelineno-159-3"></a>map:        a2
</span><span id="__span-159-4"><a id="__codelineno-159-4" name="__codelineno-159-4" href="#__codelineno-159-4"></a>forEach:    A2
</span><span id="__span-159-5"><a id="__codelineno-159-5" name="__codelineno-159-5" href="#__codelineno-159-5"></a>filter:     b1
</span><span id="__span-159-6"><a id="__codelineno-159-6" name="__codelineno-159-6" href="#__codelineno-159-6"></a>filter:     b3
</span><span id="__span-159-7"><a id="__codelineno-159-7" name="__codelineno-159-7" href="#__codelineno-159-7"></a>filter:     c
</span></code></pre></div> <p>ç°åœ¨ï¼Œ<code>map</code> ä»…ä»…åªéœ€è°ƒç”¨ä¸€æ¬¡ï¼Œæ€§èƒ½å¾—åˆ°äº†æå‡ï¼Œè¿™ç§å°æŠ€å·§å¯¹äºæµä¸­å­˜åœ¨å¤§é‡å…ƒç´ æ¥è¯´ï¼Œæ˜¯éå¸¸å¾ˆæœ‰ç”¨çš„ã€‚</p> <p>æ¥ä¸‹æ¥ï¼Œå¯¹ä¸Šé¢çš„ä»£ç å†æ·»åŠ ä¸€ä¸ªä¸­é—´æ“ä½œ <code>sorted</code>ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-160-1"><a id="__codelineno-160-1" name="__codelineno-160-1" href="#__codelineno-160-1"></a><span class="n">Stream</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">"d2"</span><span class="p">,</span><span class="w"> </span><span class="s">"a2"</span><span class="p">,</span><span class="w"> </span><span class="s">"b1"</span><span class="p">,</span><span class="w"> </span><span class="s">"b3"</span><span class="p">,</span><span class="w"> </span><span class="s">"c"</span><span class="p">)</span>
</span><span id="__span-160-2"><a id="__codelineno-160-2" name="__codelineno-160-2" href="#__codelineno-160-2"></a><span class="w">    </span><span class="p">.</span><span class="na">sorted</span><span class="p">((</span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="n">s2</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-160-3"><a id="__codelineno-160-3" name="__codelineno-160-3" href="#__codelineno-160-3"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">printf</span><span class="p">(</span><span class="s">"sort:\t\t%s; %s\n"</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="n">s2</span><span class="p">);</span>
</span><span id="__span-160-4"><a id="__codelineno-160-4" name="__codelineno-160-4" href="#__codelineno-160-4"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">s1</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">s2</span><span class="p">);</span><span class="w"> </span><span class="c1">// æ’åº</span>
</span><span id="__span-160-5"><a id="__codelineno-160-5" name="__codelineno-160-5" href="#__codelineno-160-5"></a><span class="w">    </span><span class="p">})</span>
</span><span id="__span-160-6"><a id="__codelineno-160-6" name="__codelineno-160-6" href="#__codelineno-160-6"></a><span class="w">    </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-160-7"><a id="__codelineno-160-7" name="__codelineno-160-7" href="#__codelineno-160-7"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"filter:\t\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
</span><span id="__span-160-8"><a id="__codelineno-160-8" name="__codelineno-160-8" href="#__codelineno-160-8"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">"a"</span><span class="p">);</span><span class="w"> </span><span class="c1">// è¿‡æ»¤å‡ºä»¥ a ä¸ºå‰ç¼€çš„å…ƒç´ </span>
</span><span id="__span-160-9"><a id="__codelineno-160-9" name="__codelineno-160-9" href="#__codelineno-160-9"></a><span class="w">    </span><span class="p">})</span>
</span><span id="__span-160-10"><a id="__codelineno-160-10" name="__codelineno-160-10" href="#__codelineno-160-10"></a><span class="w">    </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-160-11"><a id="__codelineno-160-11" name="__codelineno-160-11" href="#__codelineno-160-11"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"map:\t\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
</span><span id="__span-160-12"><a id="__codelineno-160-12" name="__codelineno-160-12" href="#__codelineno-160-12"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">();</span><span class="w"> </span><span class="c1">// è½¬å¤§å†™</span>
</span><span id="__span-160-13"><a id="__codelineno-160-13" name="__codelineno-160-13" href="#__codelineno-160-13"></a><span class="w">    </span><span class="p">})</span>
</span><span id="__span-160-14"><a id="__codelineno-160-14" name="__codelineno-160-14" href="#__codelineno-160-14"></a><span class="w">    </span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"forEach:\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">));</span><span class="w"> </span><span class="c1">// for å¾ªç¯è¾“å‡º</span>
</span></code></pre></div> <p><code>sorted</code> æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„æ“ä½œï¼Œå› ä¸ºå®ƒéœ€è¦åœ¨å¤„ç†çš„è¿‡ç¨‹ä¸­ï¼Œä¿å­˜çŠ¶æ€ä»¥å¯¹é›†åˆä¸­çš„å…ƒç´ è¿›è¡Œæ’åºã€‚</p> <p>æ‰§è¡Œä¸Šé¢ä»£ç ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-161-1"><a id="__codelineno-161-1" name="__codelineno-161-1" href="#__codelineno-161-1"></a>sort:       a2; d2
</span><span id="__span-161-2"><a id="__codelineno-161-2" name="__codelineno-161-2" href="#__codelineno-161-2"></a>sort:       b1; a2
</span><span id="__span-161-3"><a id="__codelineno-161-3" name="__codelineno-161-3" href="#__codelineno-161-3"></a>sort:       b1; d2
</span><span id="__span-161-4"><a id="__codelineno-161-4" name="__codelineno-161-4" href="#__codelineno-161-4"></a>sort:       b1; a2
</span><span id="__span-161-5"><a id="__codelineno-161-5" name="__codelineno-161-5" href="#__codelineno-161-5"></a>sort:       b3; b1
</span><span id="__span-161-6"><a id="__codelineno-161-6" name="__codelineno-161-6" href="#__codelineno-161-6"></a>sort:       b3; d2
</span><span id="__span-161-7"><a id="__codelineno-161-7" name="__codelineno-161-7" href="#__codelineno-161-7"></a>sort:       c; b3
</span><span id="__span-161-8"><a id="__codelineno-161-8" name="__codelineno-161-8" href="#__codelineno-161-8"></a>sort:       c; d2
</span><span id="__span-161-9"><a id="__codelineno-161-9" name="__codelineno-161-9" href="#__codelineno-161-9"></a>filter:     a2
</span><span id="__span-161-10"><a id="__codelineno-161-10" name="__codelineno-161-10" href="#__codelineno-161-10"></a>map:        a2
</span><span id="__span-161-11"><a id="__codelineno-161-11" name="__codelineno-161-11" href="#__codelineno-161-11"></a>forEach:    A2
</span><span id="__span-161-12"><a id="__codelineno-161-12" name="__codelineno-161-12" href="#__codelineno-161-12"></a>filter:     b1
</span><span id="__span-161-13"><a id="__codelineno-161-13" name="__codelineno-161-13" href="#__codelineno-161-13"></a>filter:     b3
</span><span id="__span-161-14"><a id="__codelineno-161-14" name="__codelineno-161-14" href="#__codelineno-161-14"></a>filter:     c
</span><span id="__span-161-15"><a id="__codelineno-161-15" name="__codelineno-161-15" href="#__codelineno-161-15"></a>filter:     d2
</span></code></pre></div> <p><code>sorted</code> æ˜¯æ°´å¹³æ‰§è¡Œçš„ã€‚å› æ­¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>sorted</code> ä¼šå¯¹é›†åˆä¸­çš„å…ƒç´ ç»„åˆè°ƒç”¨å…«æ¬¡ã€‚è¿™é‡Œä¹Ÿå¯ä»¥åˆ©ç”¨ä¸Šé¢çš„ä¼˜åŒ–æŠ€å·§ï¼Œå°† <code>filter</code> è¿‡æ»¤ä¸­é—´æ“ä½œç§»åŠ¨åˆ°å¼€å¤´éƒ¨åˆ†ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-162-1"><a id="__codelineno-162-1" name="__codelineno-162-1" href="#__codelineno-162-1"></a><span class="n">Stream</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">"d2"</span><span class="p">,</span><span class="w"> </span><span class="s">"a2"</span><span class="p">,</span><span class="w"> </span><span class="s">"b1"</span><span class="p">,</span><span class="w"> </span><span class="s">"b3"</span><span class="p">,</span><span class="w"> </span><span class="s">"c"</span><span class="p">)</span>
</span><span id="__span-162-2"><a id="__codelineno-162-2" name="__codelineno-162-2" href="#__codelineno-162-2"></a><span class="w">    </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-162-3"><a id="__codelineno-162-3" name="__codelineno-162-3" href="#__codelineno-162-3"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"filter:\t\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
</span><span id="__span-162-4"><a id="__codelineno-162-4" name="__codelineno-162-4" href="#__codelineno-162-4"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">"a"</span><span class="p">);</span>
</span><span id="__span-162-5"><a id="__codelineno-162-5" name="__codelineno-162-5" href="#__codelineno-162-5"></a><span class="w">    </span><span class="p">})</span>
</span><span id="__span-162-6"><a id="__codelineno-162-6" name="__codelineno-162-6" href="#__codelineno-162-6"></a><span class="w">    </span><span class="p">.</span><span class="na">sorted</span><span class="p">((</span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="n">s2</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-162-7"><a id="__codelineno-162-7" name="__codelineno-162-7" href="#__codelineno-162-7"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">printf</span><span class="p">(</span><span class="s">"sort:\t\t%s; %s\n"</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="n">s2</span><span class="p">);</span>
</span><span id="__span-162-8"><a id="__codelineno-162-8" name="__codelineno-162-8" href="#__codelineno-162-8"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">s1</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">s2</span><span class="p">);</span>
</span><span id="__span-162-9"><a id="__codelineno-162-9" name="__codelineno-162-9" href="#__codelineno-162-9"></a><span class="w">    </span><span class="p">})</span>
</span><span id="__span-162-10"><a id="__codelineno-162-10" name="__codelineno-162-10" href="#__codelineno-162-10"></a><span class="w">    </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-162-11"><a id="__codelineno-162-11" name="__codelineno-162-11" href="#__codelineno-162-11"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"map:\t\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
</span><span id="__span-162-12"><a id="__codelineno-162-12" name="__codelineno-162-12" href="#__codelineno-162-12"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">();</span>
</span><span id="__span-162-13"><a id="__codelineno-162-13" name="__codelineno-162-13" href="#__codelineno-162-13"></a><span class="w">    </span><span class="p">})</span>
</span><span id="__span-162-14"><a id="__codelineno-162-14" name="__codelineno-162-14" href="#__codelineno-162-14"></a><span class="w">    </span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"forEach:\t"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">));</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-163-1"><a id="__codelineno-163-1" name="__codelineno-163-1" href="#__codelineno-163-1"></a>filter:     d2
</span><span id="__span-163-2"><a id="__codelineno-163-2" name="__codelineno-163-2" href="#__codelineno-163-2"></a>filter:     a2
</span><span id="__span-163-3"><a id="__codelineno-163-3" name="__codelineno-163-3" href="#__codelineno-163-3"></a>filter:     b1
</span><span id="__span-163-4"><a id="__codelineno-163-4" name="__codelineno-163-4" href="#__codelineno-163-4"></a>filter:     b3
</span><span id="__span-163-5"><a id="__codelineno-163-5" name="__codelineno-163-5" href="#__codelineno-163-5"></a>filter:     c
</span><span id="__span-163-6"><a id="__codelineno-163-6" name="__codelineno-163-6" href="#__codelineno-163-6"></a>map:        a2
</span><span id="__span-163-7"><a id="__codelineno-163-7" name="__codelineno-163-7" href="#__codelineno-163-7"></a>forEach:    A2
</span></code></pre></div> <p>ä»ä¸Šé¢çš„è¾“å‡ºä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº† <code>sorted</code> ä»æœªè¢«è°ƒç”¨è¿‡ï¼Œå› ä¸ºç»è¿‡ <code>filter</code> è¿‡åçš„å…ƒç´ å·²ç»å‡å°‘åˆ°åªæœ‰ä¸€ä¸ªï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæ˜¯ä¸ç”¨æ‰§è¡Œæ’åºæ“ä½œçš„ã€‚å› æ­¤æ€§èƒ½è¢«å¤§å¤§æé«˜äº†ã€‚</p> <h3 id="96æ•°æ®æµå¤ç”¨é—®é¢˜">9.6ã€æ•°æ®æµå¤ç”¨é—®é¢˜<a class="headerlink" href="#96æ•°æ®æµå¤ç”¨é—®é¢˜" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>Java8 Stream æµæ˜¯ä¸èƒ½è¢«å¤ç”¨çš„ï¼Œä¸€æ—¦ä½ è°ƒç”¨ä»»ä½•ç»ˆç«¯æ“ä½œï¼Œæµå°±ä¼šå…³é—­ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-164-1"><a id="__codelineno-164-1" name="__codelineno-164-1" href="#__codelineno-164-1"></a><span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-164-2"><a id="__codelineno-164-2" name="__codelineno-164-2" href="#__codelineno-164-2"></a><span class="w">    </span><span class="n">Stream</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">"d2"</span><span class="p">,</span><span class="w"> </span><span class="s">"a2"</span><span class="p">,</span><span class="w"> </span><span class="s">"b1"</span><span class="p">,</span><span class="w"> </span><span class="s">"b3"</span><span class="p">,</span><span class="w"> </span><span class="s">"c"</span><span class="p">)</span>
</span><span id="__span-164-3"><a id="__codelineno-164-3" name="__codelineno-164-3" href="#__codelineno-164-3"></a><span class="w">        </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">"a"</span><span class="p">));</span>
</span><span id="__span-164-4"><a id="__codelineno-164-4" name="__codelineno-164-4" href="#__codelineno-164-4"></a>
</span><span id="__span-164-5"><a id="__codelineno-164-5" name="__codelineno-164-5" href="#__codelineno-164-5"></a><span class="n">stream</span><span class="p">.</span><span class="na">anyMatch</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span><span class="w">     </span><span class="c1">//true</span>
</span><span id="__span-164-6"><a id="__codelineno-164-6" name="__codelineno-164-6" href="#__codelineno-164-6"></a><span class="n">stream</span><span class="p">.</span><span class="na">noneMatch</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span><span class="w">    </span><span class="c1">//exception</span>
</span></code></pre></div> <p>å½“æˆ‘ä»¬å¯¹ stream è°ƒç”¨äº† <code>anyMatch</code> ç»ˆç«¯æ“ä½œä»¥åï¼Œæµå³å…³é—­äº†ï¼Œå†è°ƒç”¨ <code>noneMatch</code> å°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-165-1"><a id="__codelineno-165-1" name="__codelineno-165-1" href="#__codelineno-165-1"></a>java.lang.IllegalStateException: stream has already been operated upon or closed
</span><span id="__span-165-2"><a id="__codelineno-165-2" name="__codelineno-165-2" href="#__codelineno-165-2"></a>    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:229)
</span><span id="__span-165-3"><a id="__codelineno-165-3" name="__codelineno-165-3" href="#__codelineno-165-3"></a>    at java.util.stream.ReferencePipeline.noneMatch(ReferencePipeline.java:459)
</span><span id="__span-165-4"><a id="__codelineno-165-4" name="__codelineno-165-4" href="#__codelineno-165-4"></a>    at FunctionInterface.main(FunctionInterface.java:10)
</span></code></pre></div> <p>ä¸ºäº†å…‹æœè¿™ä¸ªé™åˆ¶ï¼Œå¿…é¡»ä¸ºæˆ‘ä»¬æƒ³è¦æ‰§è¡Œçš„æ¯ä¸ªç»ˆç«¯æ“ä½œåˆ›å»ºä¸€ä¸ªæ–°çš„æµé“¾ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>Supplier</code> æ¥åŒ…è£…ä¸€ä¸‹æµï¼Œé€šè¿‡ <code>get()</code> æ–¹æ³•æ¥æ„å»ºä¸€ä¸ªæ–°çš„ <code>Stream</code> æµï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-166-1"><a id="__codelineno-166-1" name="__codelineno-166-1" href="#__codelineno-166-1"></a><span class="n">Supplier</span><span class="o">&lt;</span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">streamSupplier</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-166-2"><a id="__codelineno-166-2" name="__codelineno-166-2" href="#__codelineno-166-2"></a><span class="w">    </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Stream</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">"d2"</span><span class="p">,</span><span class="w"> </span><span class="s">"a2"</span><span class="p">,</span><span class="w"> </span><span class="s">"b1"</span><span class="p">,</span><span class="w"> </span><span class="s">"b3"</span><span class="p">,</span><span class="w"> </span><span class="s">"c"</span><span class="p">)</span>
</span><span id="__span-166-3"><a id="__codelineno-166-3" name="__codelineno-166-3" href="#__codelineno-166-3"></a><span class="w">            </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">"a"</span><span class="p">));</span>
</span><span id="__span-166-4"><a id="__codelineno-166-4" name="__codelineno-166-4" href="#__codelineno-166-4"></a>
</span><span id="__span-166-5"><a id="__codelineno-166-5" name="__codelineno-166-5" href="#__codelineno-166-5"></a><span class="n">streamSupplier</span><span class="p">.</span><span class="na">get</span><span class="p">().</span><span class="na">anyMatch</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span><span class="w">   </span><span class="c1">// true</span>
</span><span id="__span-166-6"><a id="__codelineno-166-6" name="__codelineno-166-6" href="#__codelineno-166-6"></a><span class="n">streamSupplier</span><span class="p">.</span><span class="na">get</span><span class="p">().</span><span class="na">noneMatch</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span><span class="w">  </span><span class="c1">// true</span>
</span></code></pre></div> <p>é€šè¿‡æ„é€ ä¸€ä¸ªæ–°çš„æµï¼Œæ¥é¿å¼€æµä¸èƒ½è¢«å¤ç”¨çš„é™åˆ¶ï¼Œè¿™ä¹Ÿæ˜¯å–å·§çš„ä¸€ç§æ–¹å¼ã€‚</p> <h3 id="97é«˜çº§æ“ä½œ">9.7ã€é«˜çº§æ“ä½œ<a class="headerlink" href="#97é«˜çº§æ“ä½œ" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p><code>Streams</code> æ”¯æŒçš„æ“ä½œå¾ˆä¸°å¯Œï¼Œé™¤äº†ä¸Šé¢ä»‹ç»çš„è¿™äº›æ¯”è¾ƒå¸¸ç”¨çš„ä¸­é—´æ“ä½œï¼Œå¦‚ <code>filter</code> æˆ– <code>map</code>ï¼ˆå‚è§<a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html">Stream Javadoc</a>ï¼‰å¤–ã€‚è¿˜æœ‰ä¸€äº›æ›´å¤æ‚çš„æ“ä½œï¼Œå¦‚ <code>collect</code>ã€<code>flatMap</code> ä»¥åŠ <code>reduce</code>ã€‚</p> <p>æœ¬å°èŠ‚ä¸­çš„å¤§å¤šæ•°ä»£ç ç¤ºä¾‹å‡ä¼šä½¿ç”¨ä»¥ä¸‹ <code>List&lt;Person&gt;</code> è¿›è¡Œæ¼”ç¤ºï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-167-1"><a id="__codelineno-167-1" name="__codelineno-167-1" href="#__codelineno-167-1"></a><span class="kd">class</span> <span class="nc">Person</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-167-2"><a id="__codelineno-167-2" name="__codelineno-167-2" href="#__codelineno-167-2"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-167-3"><a id="__codelineno-167-3" name="__codelineno-167-3" href="#__codelineno-167-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
</span><span id="__span-167-4"><a id="__codelineno-167-4" name="__codelineno-167-4" href="#__codelineno-167-4"></a>
</span><span id="__span-167-5"><a id="__codelineno-167-5" name="__codelineno-167-5" href="#__codelineno-167-5"></a><span class="w">    </span><span class="n">Person</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-167-6"><a id="__codelineno-167-6" name="__codelineno-167-6" href="#__codelineno-167-6"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-167-7"><a id="__codelineno-167-7" name="__codelineno-167-7" href="#__codelineno-167-7"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
</span><span id="__span-167-8"><a id="__codelineno-167-8" name="__codelineno-167-8" href="#__codelineno-167-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-167-9"><a id="__codelineno-167-9" name="__codelineno-167-9" href="#__codelineno-167-9"></a>
</span><span id="__span-167-10"><a id="__codelineno-167-10" name="__codelineno-167-10" href="#__codelineno-167-10"></a><span class="w">    </span><span class="nd">@Override</span>
</span><span id="__span-167-11"><a id="__codelineno-167-11" name="__codelineno-167-11" href="#__codelineno-167-11"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">toString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-167-12"><a id="__codelineno-167-12" name="__codelineno-167-12" href="#__codelineno-167-12"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-167-13"><a id="__codelineno-167-13" name="__codelineno-167-13" href="#__codelineno-167-13"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-167-14"><a id="__codelineno-167-14" name="__codelineno-167-14" href="#__codelineno-167-14"></a><span class="p">}</span>
</span><span id="__span-167-15"><a id="__codelineno-167-15" name="__codelineno-167-15" href="#__codelineno-167-15"></a>
</span><span id="__span-167-16"><a id="__codelineno-167-16" name="__codelineno-167-16" href="#__codelineno-167-16"></a><span class="c1">// æ„å»ºä¸€ä¸ª Person é›†åˆ</span>
</span><span id="__span-167-17"><a id="__codelineno-167-17" name="__codelineno-167-17" href="#__codelineno-167-17"></a><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span><span class="w"> </span><span class="n">persons</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-167-18"><a id="__codelineno-167-18" name="__codelineno-167-18" href="#__codelineno-167-18"></a><span class="w">    </span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span>
</span><span id="__span-167-19"><a id="__codelineno-167-19" name="__codelineno-167-19" href="#__codelineno-167-19"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">Person</span><span class="p">(</span><span class="s">"Max"</span><span class="p">,</span><span class="w"> </span><span class="mi">18</span><span class="p">),</span>
</span><span id="__span-167-20"><a id="__codelineno-167-20" name="__codelineno-167-20" href="#__codelineno-167-20"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">Person</span><span class="p">(</span><span class="s">"Peter"</span><span class="p">,</span><span class="w"> </span><span class="mi">23</span><span class="p">),</span>
</span><span id="__span-167-21"><a id="__codelineno-167-21" name="__codelineno-167-21" href="#__codelineno-167-21"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">Person</span><span class="p">(</span><span class="s">"Pamela"</span><span class="p">,</span><span class="w"> </span><span class="mi">23</span><span class="p">),</span>
</span><span id="__span-167-22"><a id="__codelineno-167-22" name="__codelineno-167-22" href="#__codelineno-167-22"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">Person</span><span class="p">(</span><span class="s">"David"</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">));</span>
</span></code></pre></div> <h4 id="971collect">9.7.1ã€Collect<a class="headerlink" href="#971collect" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p><code>collect</code> æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ç»ˆç«¯æ“ä½œï¼Œå®ƒå¯ä»¥å°†æµä¸­çš„å…ƒç´ è½¬å˜æˆå¦å¤–ä¸€ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œä¾‹å¦‚ä¸€ä¸ª <code>List</code>ã€<code>Set</code> æˆ– <code>Map</code>ã€‚<code>collect</code> æ¥å—å…¥å‚ä¸º <code>Collector</code>ï¼ˆæ”¶é›†å™¨ï¼‰ï¼Œå®ƒç”±å››ä¸ªä¸åŒçš„æ“ä½œç»„æˆï¼šä¾›åº”å™¨ï¼ˆsupplierï¼‰ã€ç´¯åŠ å™¨ï¼ˆaccumulatorï¼‰ã€ç»„åˆå™¨ï¼ˆcombinerï¼‰å’Œç»ˆæ­¢å™¨ï¼ˆfinisherï¼‰ã€‚</p> <p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å¹¶ä¸éœ€è¦è‡ªå·±å»å®ç°æ”¶é›†å™¨ã€‚Java 8 é€šè¿‡ <code>Collectors</code> ç±»å†…ç½®äº†å„ç§å¸¸ç”¨çš„æ”¶é›†å™¨ã€‚</p> <p>å…ˆä»ä¸€ä¸ªéå¸¸å¸¸è§çš„ç”¨ä¾‹å¼€å§‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-168-1"><a id="__codelineno-168-1" name="__codelineno-168-1" href="#__codelineno-168-1"></a><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span><span class="w"> </span><span class="n">filtered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">persons</span>
</span><span id="__span-168-2"><a id="__codelineno-168-2" name="__codelineno-168-2" href="#__codelineno-168-2"></a><span class="w">    </span><span class="p">.</span><span class="na">stream</span><span class="p">()</span><span class="w"> </span><span class="c1">// æ„å»ºæµ</span>
</span><span id="__span-168-3"><a id="__codelineno-168-3" name="__codelineno-168-3" href="#__codelineno-168-3"></a><span class="w">    </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="na">name</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">"P"</span><span class="p">))</span><span class="w"> </span><span class="c1">// è¿‡æ»¤å‡ºåå­—ä»¥ P å¼€å¤´çš„</span>
</span><span id="__span-168-4"><a id="__codelineno-168-4" name="__codelineno-168-4" href="#__codelineno-168-4"></a><span class="w">    </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">());</span><span class="w"> </span><span class="c1">// ç”Ÿæˆä¸€ä¸ªæ–°çš„ List</span>
</span><span id="__span-168-5"><a id="__codelineno-168-5" name="__codelineno-168-5" href="#__codelineno-168-5"></a>
</span><span id="__span-168-6"><a id="__codelineno-168-6" name="__codelineno-168-6" href="#__codelineno-168-6"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">filtered</span><span class="p">);</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-169-1"><a id="__codelineno-169-1" name="__codelineno-169-1" href="#__codelineno-169-1"></a>[Peter, Pamela]
</span></code></pre></div> <p>ä»æµä¸­æ„é€ ä¸€ä¸ª <code>List</code> å¼‚å¸¸ç®€å•ã€‚å¦‚æœéœ€è¦æ„é€ ä¸€ä¸ª <code>Set</code> é›†åˆï¼Œåªéœ€è¦ä½¿ç”¨ <code>Collectors.toSet()</code> å°±å¯ä»¥äº†ã€‚</p> <p>æ¥ä¸‹æ¥è¿™ä¸ªç¤ºä¾‹ï¼Œå°†ä¼šæŒ‰å¹´é¾„å¯¹æ‰€æœ‰äººè¿›è¡Œåˆ†ç»„ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-170-1"><a id="__codelineno-170-1" name="__codelineno-170-1" href="#__codelineno-170-1"></a><span class="n">Map</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">personsByAge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">persons</span>
</span><span id="__span-170-2"><a id="__codelineno-170-2" name="__codelineno-170-2" href="#__codelineno-170-2"></a><span class="w">    </span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
</span><span id="__span-170-3"><a id="__codelineno-170-3" name="__codelineno-170-3" href="#__codelineno-170-3"></a><span class="w">    </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">groupingBy</span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="na">age</span><span class="p">));</span><span class="w"> </span><span class="c1">// ä»¥å¹´é¾„ä¸º key,è¿›è¡Œåˆ†ç»„</span>
</span><span id="__span-170-4"><a id="__codelineno-170-4" name="__codelineno-170-4" href="#__codelineno-170-4"></a>
</span><span id="__span-170-5"><a id="__codelineno-170-5" name="__codelineno-170-5" href="#__codelineno-170-5"></a><span class="n">personsByAge</span><span class="p">.</span><span class="na">forEach</span><span class="p">((</span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">"age %s: %s\n"</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">));</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-171-1"><a id="__codelineno-171-1" name="__codelineno-171-1" href="#__codelineno-171-1"></a>age 18: [Max]
</span><span id="__span-171-2"><a id="__codelineno-171-2" name="__codelineno-171-2" href="#__codelineno-171-2"></a>age 23: [Peter, Pamela]
</span><span id="__span-171-3"><a id="__codelineno-171-3" name="__codelineno-171-3" href="#__codelineno-171-3"></a>age 12: [David]
</span></code></pre></div> <p>é™¤äº†ä¸Šé¢è¿™äº›æ“ä½œã€‚è¿˜å¯ä»¥åœ¨æµä¸Šæ‰§è¡Œèšåˆæ“ä½œï¼Œä¾‹å¦‚ï¼Œè®¡ç®—æ‰€æœ‰äººçš„å¹³å‡å¹´é¾„ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-172-1"><a id="__codelineno-172-1" name="__codelineno-172-1" href="#__codelineno-172-1"></a><span class="n">Double</span><span class="w"> </span><span class="n">averageAge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">persons</span>
</span><span id="__span-172-2"><a id="__codelineno-172-2" name="__codelineno-172-2" href="#__codelineno-172-2"></a><span class="w">    </span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
</span><span id="__span-172-3"><a id="__codelineno-172-3" name="__codelineno-172-3" href="#__codelineno-172-3"></a><span class="w">    </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">averagingInt</span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="na">age</span><span class="p">));</span><span class="w"> </span><span class="c1">// èšåˆå‡ºå¹³å‡å¹´é¾„</span>
</span><span id="__span-172-4"><a id="__codelineno-172-4" name="__codelineno-172-4" href="#__codelineno-172-4"></a>
</span><span id="__span-172-5"><a id="__codelineno-172-5" name="__codelineno-172-5" href="#__codelineno-172-5"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">averageAge</span><span class="p">);</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-173-1"><a id="__codelineno-173-1" name="__codelineno-173-1" href="#__codelineno-173-1"></a>19.0
</span></code></pre></div> <p>å¦‚æœæ‚¨è¿˜æƒ³å¾—åˆ°ä¸€ä¸ªæ›´å…¨é¢çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œæ‘˜è¦æ”¶é›†å™¨å¯ä»¥è¿”å›ä¸€ä¸ªç‰¹æ®Šçš„å†…ç½®ç»Ÿè®¡å¯¹è±¡ã€‚é€šè¿‡å®ƒï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°è®¡ç®—å‡ºæœ€å°å¹´é¾„ã€æœ€å¤§å¹´é¾„ã€å¹³å‡å¹´é¾„ã€æ€»å’Œä»¥åŠæ€»æ•°é‡ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-174-1"><a id="__codelineno-174-1" name="__codelineno-174-1" href="#__codelineno-174-1"></a><span class="n">IntSummaryStatistics</span><span class="w"> </span><span class="n">ageSummary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">persons</span>
</span><span id="__span-174-2"><a id="__codelineno-174-2" name="__codelineno-174-2" href="#__codelineno-174-2"></a><span class="w">    </span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
</span><span id="__span-174-3"><a id="__codelineno-174-3" name="__codelineno-174-3" href="#__codelineno-174-3"></a><span class="w">    </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">summarizingInt</span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="na">age</span><span class="p">));</span><span class="w"> </span><span class="c1">// ç”Ÿæˆæ‘˜è¦ç»Ÿè®¡</span>
</span><span id="__span-174-4"><a id="__codelineno-174-4" name="__codelineno-174-4" href="#__codelineno-174-4"></a>
</span><span id="__span-174-5"><a id="__codelineno-174-5" name="__codelineno-174-5" href="#__codelineno-174-5"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">ageSummary</span><span class="p">);</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š </p><div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-175-1"><a id="__codelineno-175-1" name="__codelineno-175-1" href="#__codelineno-175-1"></a>IntSummaryStatistics{count=4, sum=76, min=12, average=19.000000, max=23}
</span></code></pre></div><p></p> <p>ä¸‹ä¸€ä¸ªè¿™ä¸ªç¤ºä¾‹ï¼Œå¯ä»¥å°†æ‰€æœ‰äººåè¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-176-1"><a id="__codelineno-176-1" name="__codelineno-176-1" href="#__codelineno-176-1"></a><span class="n">String</span><span class="w"> </span><span class="n">phrase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">persons</span>
</span><span id="__span-176-2"><a id="__codelineno-176-2" name="__codelineno-176-2" href="#__codelineno-176-2"></a><span class="w">    </span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
</span><span id="__span-176-3"><a id="__codelineno-176-3" name="__codelineno-176-3" href="#__codelineno-176-3"></a><span class="w">    </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="na">age</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">18</span><span class="p">)</span><span class="w"> </span><span class="c1">// è¿‡æ»¤å‡ºå¹´é¾„å¤§äºç­‰äº18çš„</span>
</span><span id="__span-176-4"><a id="__codelineno-176-4" name="__codelineno-176-4" href="#__codelineno-176-4"></a><span class="w">    </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="na">name</span><span class="p">)</span><span class="w"> </span><span class="c1">// æå–åå­—</span>
</span><span id="__span-176-5"><a id="__codelineno-176-5" name="__codelineno-176-5" href="#__codelineno-176-5"></a><span class="w">    </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">joining</span><span class="p">(</span><span class="s">" and "</span><span class="p">,</span><span class="w"> </span><span class="s">"In Germany "</span><span class="p">,</span><span class="w"> </span><span class="s">" are of legal age."</span><span class="p">));</span><span class="w"> </span><span class="c1">// ä»¥ In Germany å¼€å¤´ï¼Œand è¿æ¥å„å…ƒç´ ï¼Œå†ä»¥ are of legal age. ç»“æŸ</span>
</span><span id="__span-176-6"><a id="__codelineno-176-6" name="__codelineno-176-6" href="#__codelineno-176-6"></a>
</span><span id="__span-176-7"><a id="__codelineno-176-7" name="__codelineno-176-7" href="#__codelineno-176-7"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">phrase</span><span class="p">);</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-177-1"><a id="__codelineno-177-1" name="__codelineno-177-1" href="#__codelineno-177-1"></a>In Germany Max and Peter and Pamela are of legal age.
</span></code></pre></div> <p>è¿æ¥æ”¶é›†å™¨çš„å…¥å‚æ¥å—åˆ†éš”ç¬¦ï¼Œä»¥åŠå¯é€‰çš„å‰ç¼€ä»¥åŠåç¼€ã€‚</p> <p>å¯¹äºå¦‚ä½•å°†æµè½¬æ¢ä¸º <code>Map</code> é›†åˆï¼Œæˆ‘ä»¬å¿…é¡»æŒ‡å®š <code>Map</code> çš„é”®å’Œå€¼ã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œ<code>Map</code> çš„é”®å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œå¦åˆ™ä¼šæŠ›å‡º <code>IllegalStateException</code> å¼‚å¸¸ã€‚</p> <p>ä½ å¯ä»¥é€‰æ‹©ä¼ é€’ä¸€ä¸ªåˆå¹¶å‡½æ•°ä½œä¸ºé¢å¤–çš„å‚æ•°æ¥é¿å…å‘ç”Ÿè¿™ä¸ªå¼‚å¸¸ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-178-1"><a id="__codelineno-178-1" name="__codelineno-178-1" href="#__codelineno-178-1"></a><span class="n">Map</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">persons</span>
</span><span id="__span-178-2"><a id="__codelineno-178-2" name="__codelineno-178-2" href="#__codelineno-178-2"></a><span class="w">    </span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
</span><span id="__span-178-3"><a id="__codelineno-178-3" name="__codelineno-178-3" href="#__codelineno-178-3"></a><span class="w">    </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toMap</span><span class="p">(</span>
</span><span id="__span-178-4"><a id="__codelineno-178-4" name="__codelineno-178-4" href="#__codelineno-178-4"></a><span class="w">        </span><span class="n">p</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="na">age</span><span class="p">,</span>
</span><span id="__span-178-5"><a id="__codelineno-178-5" name="__codelineno-178-5" href="#__codelineno-178-5"></a><span class="w">        </span><span class="n">p</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="na">name</span><span class="p">,</span>
</span><span id="__span-178-6"><a id="__codelineno-178-6" name="__codelineno-178-6" href="#__codelineno-178-6"></a><span class="w">        </span><span class="p">(</span><span class="n">name1</span><span class="p">,</span><span class="w"> </span><span class="n">name2</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">name1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">";"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">name2</span><span class="p">));</span><span class="w"> </span><span class="c1">// å¯¹äºåŒæ · key çš„ï¼Œå°†å€¼æ‹¼æ¥</span>
</span><span id="__span-178-7"><a id="__codelineno-178-7" name="__codelineno-178-7" href="#__codelineno-178-7"></a>
</span><span id="__span-178-8"><a id="__codelineno-178-8" name="__codelineno-178-8" href="#__codelineno-178-8"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">map</span><span class="p">);</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-179-1"><a id="__codelineno-179-1" name="__codelineno-179-1" href="#__codelineno-179-1"></a>{18=Max, 23=Peter;Pamela, 12=David}
</span></code></pre></div> <p>æ—¢ç„¶æˆ‘ä»¬å·²ç»çŸ¥é“äº†è¿™äº›å¼ºå¤§çš„å†…ç½®æ”¶é›†å™¨ï¼Œæ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬å°è¯•æ„å»ºè‡ªå®šä¹‰æ”¶é›†å™¨å§ã€‚</p> <p>æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›å°†æµä¸­çš„æ‰€æœ‰äººè½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒåŒ…å«æ‰€æœ‰å¤§å†™çš„åç§°ï¼Œå¹¶ä»¥ <code>|</code> åˆ†å‰²ã€‚ä¸ºäº†è¾¾åˆ°è¿™ç§æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ <code>Collector.of()</code> åˆ›å»ºä¸€ä¸ªæ–°çš„æ”¶é›†å™¨ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¼ å…¥æ”¶é›†å™¨çš„å››ä¸ªç»„æˆéƒ¨åˆ†ï¼šä¾›åº”å™¨ã€ç´¯åŠ å™¨ã€ç»„åˆå™¨å’Œç»ˆæ­¢å™¨ã€‚</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-180-1"><a id="__codelineno-180-1" name="__codelineno-180-1" href="#__codelineno-180-1"></a><span class="n">Collector</span><span class="o">&lt;</span><span class="n">Person</span><span class="p">,</span><span class="w"> </span><span class="n">StringJoiner</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">personNameCollector</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-180-2"><a id="__codelineno-180-2" name="__codelineno-180-2" href="#__codelineno-180-2"></a><span class="w">    </span><span class="n">Collector</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
</span><span id="__span-180-3"><a id="__codelineno-180-3" name="__codelineno-180-3" href="#__codelineno-180-3"></a><span class="w">        </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StringJoiner</span><span class="p">(</span><span class="s">" | "</span><span class="p">),</span><span class="w">          </span><span class="c1">// supplier ä¾›åº”å™¨</span>
</span><span id="__span-180-4"><a id="__codelineno-180-4" name="__codelineno-180-4" href="#__codelineno-180-4"></a><span class="w">        </span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="na">name</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">()),</span><span class="w">  </span><span class="c1">// accumulator ç´¯åŠ å™¨</span>
</span><span id="__span-180-5"><a id="__codelineno-180-5" name="__codelineno-180-5" href="#__codelineno-180-5"></a><span class="w">        </span><span class="p">(</span><span class="n">j1</span><span class="p">,</span><span class="w"> </span><span class="n">j2</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">j1</span><span class="p">.</span><span class="na">merge</span><span class="p">(</span><span class="n">j2</span><span class="p">),</span><span class="w">               </span><span class="c1">// combiner ç»„åˆå™¨</span>
</span><span id="__span-180-6"><a id="__codelineno-180-6" name="__codelineno-180-6" href="#__codelineno-180-6"></a><span class="w">        </span><span class="n">StringJoiner</span><span class="p">::</span><span class="n">toString</span><span class="w">                  </span><span class="c1">// finisher ç»ˆæ­¢å™¨</span>
</span><span id="__span-180-7"><a id="__codelineno-180-7" name="__codelineno-180-7" href="#__codelineno-180-7"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-180-8"><a id="__codelineno-180-8" name="__codelineno-180-8" href="#__codelineno-180-8"></a>
</span><span id="__span-180-9"><a id="__codelineno-180-9" name="__codelineno-180-9" href="#__codelineno-180-9"></a><span class="n">String</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">persons</span>
</span><span id="__span-180-10"><a id="__codelineno-180-10" name="__codelineno-180-10" href="#__codelineno-180-10"></a><span class="w">    </span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
</span><span id="__span-180-11"><a id="__codelineno-180-11" name="__codelineno-180-11" href="#__codelineno-180-11"></a><span class="w">    </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">personNameCollector</span><span class="p">);</span><span class="w"> </span><span class="c1">// ä¼ å…¥è‡ªå®šä¹‰çš„æ”¶é›†å™¨</span>
</span><span id="__span-180-12"><a id="__codelineno-180-12" name="__codelineno-180-12" href="#__codelineno-180-12"></a>
</span><span id="__span-180-13"><a id="__codelineno-180-13" name="__codelineno-180-13" href="#__codelineno-180-13"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">names</span><span class="p">);</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-181-1"><a id="__codelineno-181-1" name="__codelineno-181-1" href="#__codelineno-181-1"></a>MAX | PETER | PAMELA | DAVID
</span></code></pre></div> <p>ç”±äº Java ä¸­çš„å­—ç¬¦ä¸²æ˜¯ final ç±»å‹çš„ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©è¾…åŠ©ç±» <code>StringJoiner</code>ï¼Œæ¥å¸®æˆ‘ä»¬æ„é€ å­—ç¬¦ä¸²ã€‚æœ€å¼€å§‹ä¾›åº”å™¨ä½¿ç”¨åˆ†éš”ç¬¦æ„é€ äº†ä¸€ä¸ª <code>StringJointer</code>ã€‚ç´¯åŠ å™¨ç”¨äºå°†æ¯ä¸ªäººçš„äººåè½¬å¤§å†™ï¼Œç„¶ååŠ åˆ° <code>StringJointer</code> ä¸­ã€‚ç»„åˆå™¨å°†ä¸¤ä¸ª <code>StringJointer</code> åˆå¹¶ä¸ºä¸€ä¸ªã€‚æœ€ç»ˆï¼Œç»ˆç»“å™¨ä» <code>StringJointer</code> æ„é€ å‡ºé¢„æœŸçš„å­—ç¬¦ä¸²ã€‚</p> <h4 id="972flatmap">9.7.2ã€FlatMap<a class="headerlink" href="#972flatmap" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p>é€šè¿‡ <code>map</code> æ“ä½œå¯ä»¥å°†æµä¸­çš„å¯¹è±¡è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹ã€‚ä½†æ˜¯ <code>Map</code> åªèƒ½å°†æ¯ä¸ªå¯¹è±¡æ˜ å°„åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœæƒ³è¦å°†ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºå¤šä¸ªå…¶ä»–å¯¹è±¡æˆ–è€…æ ¹æœ¬ä¸åšè½¬æ¢æ“ä½œå‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™ <code>flatMap</code> å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p> <p><code>FlatMap</code> èƒ½å¤Ÿå°†æµçš„æ¯ä¸ªå…ƒç´ è½¬æ¢ä¸ºå…¶ä»–å¯¹è±¡çš„æµã€‚å› æ­¤ï¼Œæ¯ä¸ªå¯¹è±¡å¯ä»¥è¢«è½¬æ¢ä¸ºé›¶ä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ªå…¶ä»–å¯¹è±¡ï¼Œå¹¶ä»¥æµçš„æ–¹å¼è¿”å›ã€‚ä¹‹åï¼Œè¿™äº›æµçš„å†…å®¹ä¼šè¢«æ”¾å…¥ <code>flatMap</code> è¿”å›çš„æµä¸­ã€‚</p> <p>åœ¨å­¦ä¹ å¦‚ä½•å®é™…æ“ä½œ <code>flatMap</code> ä¹‹å‰ï¼Œå…ˆæ–°å»ºä¸¤ä¸ªç±»ç”¨æ¥æµ‹è¯•ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-182-1"><a id="__codelineno-182-1" name="__codelineno-182-1" href="#__codelineno-182-1"></a><span class="kd">class</span> <span class="nc">Foo</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-182-2"><a id="__codelineno-182-2" name="__codelineno-182-2" href="#__codelineno-182-2"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-182-3"><a id="__codelineno-182-3" name="__codelineno-182-3" href="#__codelineno-182-3"></a><span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Bar</span><span class="o">&gt;</span><span class="w"> </span><span class="n">bars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
</span><span id="__span-182-4"><a id="__codelineno-182-4" name="__codelineno-182-4" href="#__codelineno-182-4"></a>
</span><span id="__span-182-5"><a id="__codelineno-182-5" name="__codelineno-182-5" href="#__codelineno-182-5"></a><span class="w">    </span><span class="n">Foo</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-182-6"><a id="__codelineno-182-6" name="__codelineno-182-6" href="#__codelineno-182-6"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-182-7"><a id="__codelineno-182-7" name="__codelineno-182-7" href="#__codelineno-182-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-182-8"><a id="__codelineno-182-8" name="__codelineno-182-8" href="#__codelineno-182-8"></a><span class="p">}</span>
</span><span id="__span-182-9"><a id="__codelineno-182-9" name="__codelineno-182-9" href="#__codelineno-182-9"></a>
</span><span id="__span-182-10"><a id="__codelineno-182-10" name="__codelineno-182-10" href="#__codelineno-182-10"></a><span class="kd">class</span> <span class="nc">Bar</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-182-11"><a id="__codelineno-182-11" name="__codelineno-182-11" href="#__codelineno-182-11"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-182-12"><a id="__codelineno-182-12" name="__codelineno-182-12" href="#__codelineno-182-12"></a>
</span><span id="__span-182-13"><a id="__codelineno-182-13" name="__codelineno-182-13" href="#__codelineno-182-13"></a><span class="w">    </span><span class="n">Bar</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-182-14"><a id="__codelineno-182-14" name="__codelineno-182-14" href="#__codelineno-182-14"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-182-15"><a id="__codelineno-182-15" name="__codelineno-182-15" href="#__codelineno-182-15"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-182-16"><a id="__codelineno-182-16" name="__codelineno-182-16" href="#__codelineno-182-16"></a><span class="p">}</span>
</span></code></pre></div> <p>æ¥ä¸‹æ¥é€šè¿‡ä¸Šé¢çš„æµçŸ¥è¯†ï¼Œæ¥å®ä¾‹åŒ–ä¸€äº›å¯¹è±¡ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-183-1"><a id="__codelineno-183-1" name="__codelineno-183-1" href="#__codelineno-183-1"></a><span class="n">List</span><span class="o">&lt;</span><span class="n">Foo</span><span class="o">&gt;</span><span class="w"> </span><span class="n">foos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
</span><span id="__span-183-2"><a id="__codelineno-183-2" name="__codelineno-183-2" href="#__codelineno-183-2"></a>
</span><span id="__span-183-3"><a id="__codelineno-183-3" name="__codelineno-183-3" href="#__codelineno-183-3"></a><span class="c1">// åˆ›å»º foos é›†åˆ</span>
</span><span id="__span-183-4"><a id="__codelineno-183-4" name="__codelineno-183-4" href="#__codelineno-183-4"></a><span class="n">IntStream</span>
</span><span id="__span-183-5"><a id="__codelineno-183-5" name="__codelineno-183-5" href="#__codelineno-183-5"></a><span class="w">    </span><span class="p">.</span><span class="na">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
</span><span id="__span-183-6"><a id="__codelineno-183-6" name="__codelineno-183-6" href="#__codelineno-183-6"></a><span class="w">    </span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">foos</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Foo</span><span class="p">(</span><span class="s">"Foo"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">)));</span>
</span><span id="__span-183-7"><a id="__codelineno-183-7" name="__codelineno-183-7" href="#__codelineno-183-7"></a>
</span><span id="__span-183-8"><a id="__codelineno-183-8" name="__codelineno-183-8" href="#__codelineno-183-8"></a><span class="c1">// åˆ›å»º bars é›†åˆ</span>
</span><span id="__span-183-9"><a id="__codelineno-183-9" name="__codelineno-183-9" href="#__codelineno-183-9"></a><span class="n">foos</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">f</span><span class="w"> </span><span class="o">-&gt;</span>
</span><span id="__span-183-10"><a id="__codelineno-183-10" name="__codelineno-183-10" href="#__codelineno-183-10"></a><span class="w">    </span><span class="n">IntStream</span>
</span><span id="__span-183-11"><a id="__codelineno-183-11" name="__codelineno-183-11" href="#__codelineno-183-11"></a><span class="w">        </span><span class="p">.</span><span class="na">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
</span><span id="__span-183-12"><a id="__codelineno-183-12" name="__codelineno-183-12" href="#__codelineno-183-12"></a><span class="w">        </span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="na">bars</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Bar</span><span class="p">(</span><span class="s">"Bar"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" &lt;- "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="na">name</span><span class="p">))));</span>
</span></code></pre></div> <p>è¿™é‡Œåˆ›å»ºäº†åŒ…å«ä¸‰ä¸ª <code>foo</code> çš„é›†åˆï¼Œæ¯ä¸ª <code>foo</code> ä¸­åˆåŒ…å«ä¸‰ä¸ª <code>bar</code>ã€‚</p> <p><code>flatMap</code> çš„å…¥å‚æ¥å—ä¸€ä¸ªè¿”å›å¯¹è±¡æµçš„å‡½æ•°ã€‚ä¸ºäº†å¤„ç†æ¯ä¸ª <code>foo</code> ä¸­çš„ <code>bar</code>ï¼Œæˆ‘ä»¬éœ€è¦ä¼ å…¥ç›¸åº” stream æµï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-184-1"><a id="__codelineno-184-1" name="__codelineno-184-1" href="#__codelineno-184-1"></a><span class="n">foos</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
</span><span id="__span-184-2"><a id="__codelineno-184-2" name="__codelineno-184-2" href="#__codelineno-184-2"></a><span class="w">    </span><span class="p">.</span><span class="na">flatMap</span><span class="p">(</span><span class="n">f</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="na">bars</span><span class="p">.</span><span class="na">stream</span><span class="p">())</span>
</span><span id="__span-184-3"><a id="__codelineno-184-3" name="__codelineno-184-3" href="#__codelineno-184-3"></a><span class="w">    </span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="na">name</span><span class="p">));</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-185-1"><a id="__codelineno-185-1" name="__codelineno-185-1" href="#__codelineno-185-1"></a>Bar1 &lt;- Foo1
</span><span id="__span-185-2"><a id="__codelineno-185-2" name="__codelineno-185-2" href="#__codelineno-185-2"></a>Bar2 &lt;- Foo1
</span><span id="__span-185-3"><a id="__codelineno-185-3" name="__codelineno-185-3" href="#__codelineno-185-3"></a>Bar3 &lt;- Foo1
</span><span id="__span-185-4"><a id="__codelineno-185-4" name="__codelineno-185-4" href="#__codelineno-185-4"></a>Bar1 &lt;- Foo2
</span><span id="__span-185-5"><a id="__codelineno-185-5" name="__codelineno-185-5" href="#__codelineno-185-5"></a>Bar2 &lt;- Foo2
</span><span id="__span-185-6"><a id="__codelineno-185-6" name="__codelineno-185-6" href="#__codelineno-185-6"></a>Bar3 &lt;- Foo2
</span><span id="__span-185-7"><a id="__codelineno-185-7" name="__codelineno-185-7" href="#__codelineno-185-7"></a>Bar1 &lt;- Foo3
</span><span id="__span-185-8"><a id="__codelineno-185-8" name="__codelineno-185-8" href="#__codelineno-185-8"></a>Bar2 &lt;- Foo3
</span><span id="__span-185-9"><a id="__codelineno-185-9" name="__codelineno-185-9" href="#__codelineno-185-9"></a>Bar3 &lt;- Foo3
</span></code></pre></div> <p>å¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬å·²æˆåŠŸå°† 3 ä¸ª <code>foo</code> å¯¹è±¡çš„æµè½¬æ¢ä¸º 9 ä¸ª <code>bar</code> å¯¹è±¡çš„æµã€‚</p> <p>ç›¸ä¼¼çš„æ–¹æ³•è¿˜æœ‰ <code>flatToInt()</code>ã€<code>flatToLong()</code>ã€<code>flatToDouble()</code>ï¼Œåˆ†åˆ«å¯¹åº”ç‰¹å®šç±»å‹çš„æµã€‚</p> <p>æœ€åï¼Œä¸Šé¢çš„è¿™æ®µä»£ç å¯ä»¥ç®€åŒ–ä¸ºå•ä¸€çš„æµå¼æ“ä½œï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-186-1"><a id="__codelineno-186-1" name="__codelineno-186-1" href="#__codelineno-186-1"></a><span class="n">IntStream</span><span class="p">.</span><span class="na">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
</span><span id="__span-186-2"><a id="__codelineno-186-2" name="__codelineno-186-2" href="#__codelineno-186-2"></a><span class="w">    </span><span class="p">.</span><span class="na">mapToObj</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Foo</span><span class="p">(</span><span class="s">"Foo"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">))</span>
</span><span id="__span-186-3"><a id="__codelineno-186-3" name="__codelineno-186-3" href="#__codelineno-186-3"></a><span class="w">    </span><span class="p">.</span><span class="na">peek</span><span class="p">(</span><span class="n">f</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">IntStream</span><span class="p">.</span><span class="na">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
</span><span id="__span-186-4"><a id="__codelineno-186-4" name="__codelineno-186-4" href="#__codelineno-186-4"></a><span class="w">        </span><span class="p">.</span><span class="na">mapToObj</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Bar</span><span class="p">(</span><span class="s">"Bar"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" &lt;- "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="na">name</span><span class="p">))</span>
</span><span id="__span-186-5"><a id="__codelineno-186-5" name="__codelineno-186-5" href="#__codelineno-186-5"></a><span class="w">        </span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="na">bars</span><span class="p">::</span><span class="n">add</span><span class="p">))</span>
</span><span id="__span-186-6"><a id="__codelineno-186-6" name="__codelineno-186-6" href="#__codelineno-186-6"></a><span class="w">    </span><span class="p">.</span><span class="na">flatMap</span><span class="p">(</span><span class="n">f</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="na">bars</span><span class="p">.</span><span class="na">stream</span><span class="p">())</span>
</span><span id="__span-186-7"><a id="__codelineno-186-7" name="__codelineno-186-7" href="#__codelineno-186-7"></a><span class="w">    </span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="na">name</span><span class="p">));</span>
</span></code></pre></div> <p><code>flatMap</code> ä¹Ÿå¯ç”¨äº Java 8 å¼•å…¥çš„ <code>Optional</code> ç±»ã€‚<code>Optional</code> çš„ <code>flatMap</code> æ“ä½œè¿”å›ä¸€ä¸ª <code>Optional</code> æˆ–å…¶ä»–ç±»å‹çš„å¯¹è±¡ã€‚æ‰€ä»¥å®ƒå¯ä»¥ç”¨äºé¿å…ç¹ççš„ <code>null</code> æ£€æŸ¥ã€‚</p> <p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬åˆ›å»ºå±‚æ¬¡æ›´æ·±çš„å¯¹è±¡ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-187-1"><a id="__codelineno-187-1" name="__codelineno-187-1" href="#__codelineno-187-1"></a><span class="kd">class</span> <span class="nc">Outer</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-187-2"><a id="__codelineno-187-2" name="__codelineno-187-2" href="#__codelineno-187-2"></a><span class="w">    </span><span class="n">Nested</span><span class="w"> </span><span class="n">nested</span><span class="p">;</span>
</span><span id="__span-187-3"><a id="__codelineno-187-3" name="__codelineno-187-3" href="#__codelineno-187-3"></a><span class="p">}</span>
</span><span id="__span-187-4"><a id="__codelineno-187-4" name="__codelineno-187-4" href="#__codelineno-187-4"></a>
</span><span id="__span-187-5"><a id="__codelineno-187-5" name="__codelineno-187-5" href="#__codelineno-187-5"></a><span class="kd">class</span> <span class="nc">Nested</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-187-6"><a id="__codelineno-187-6" name="__codelineno-187-6" href="#__codelineno-187-6"></a><span class="w">    </span><span class="n">Inner</span><span class="w"> </span><span class="n">inner</span><span class="p">;</span>
</span><span id="__span-187-7"><a id="__codelineno-187-7" name="__codelineno-187-7" href="#__codelineno-187-7"></a><span class="p">}</span>
</span><span id="__span-187-8"><a id="__codelineno-187-8" name="__codelineno-187-8" href="#__codelineno-187-8"></a>
</span><span id="__span-187-9"><a id="__codelineno-187-9" name="__codelineno-187-9" href="#__codelineno-187-9"></a><span class="kd">class</span> <span class="nc">Inner</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-187-10"><a id="__codelineno-187-10" name="__codelineno-187-10" href="#__codelineno-187-10"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">foo</span><span class="p">;</span>
</span><span id="__span-187-11"><a id="__codelineno-187-11" name="__codelineno-187-11" href="#__codelineno-187-11"></a><span class="p">}</span>
</span></code></pre></div> <p>ä¸ºäº†å¤„ç†ä» Outer å¯¹è±¡ä¸­è·å–æœ€åº•å±‚çš„ foo å­—ç¬¦ä¸²ï¼Œä½ éœ€è¦æ·»åŠ å¤šä¸ª <code>null</code> æ£€æŸ¥æ¥é¿å…å¯èƒ½å‘ç”Ÿçš„ <code>NullPointerException</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-188-1"><a id="__codelineno-188-1" name="__codelineno-188-1" href="#__codelineno-188-1"></a><span class="n">Outer</span><span class="w"> </span><span class="n">outer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Outer</span><span class="p">();</span>
</span><span id="__span-188-2"><a id="__codelineno-188-2" name="__codelineno-188-2" href="#__codelineno-188-2"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">outer</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">outer</span><span class="p">.</span><span class="na">nested</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">outer</span><span class="p">.</span><span class="na">nested</span><span class="p">.</span><span class="na">inner</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-188-3"><a id="__codelineno-188-3" name="__codelineno-188-3" href="#__codelineno-188-3"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">outer</span><span class="p">.</span><span class="na">nested</span><span class="p">.</span><span class="na">inner</span><span class="p">.</span><span class="na">foo</span><span class="p">);</span>
</span><span id="__span-188-4"><a id="__codelineno-188-4" name="__codelineno-188-4" href="#__codelineno-188-4"></a><span class="p">}</span>
</span></code></pre></div> <p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ <code>Optional</code> çš„ <code>flatMap</code> æ“ä½œï¼Œæ¥å®Œæˆä¸Šè¿°ç›¸åŒåŠŸèƒ½çš„åˆ¤æ–­ï¼Œä¸”æ›´åŠ ä¼˜é›…ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-189-1"><a id="__codelineno-189-1" name="__codelineno-189-1" href="#__codelineno-189-1"></a><span class="n">Optional</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Outer</span><span class="p">())</span>
</span><span id="__span-189-2"><a id="__codelineno-189-2" name="__codelineno-189-2" href="#__codelineno-189-2"></a><span class="w">    </span><span class="p">.</span><span class="na">flatMap</span><span class="p">(</span><span class="n">o</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Optional</span><span class="p">.</span><span class="na">ofNullable</span><span class="p">(</span><span class="n">o</span><span class="p">.</span><span class="na">nested</span><span class="p">))</span>
</span><span id="__span-189-3"><a id="__codelineno-189-3" name="__codelineno-189-3" href="#__codelineno-189-3"></a><span class="w">    </span><span class="p">.</span><span class="na">flatMap</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Optional</span><span class="p">.</span><span class="na">ofNullable</span><span class="p">(</span><span class="n">n</span><span class="p">.</span><span class="na">inner</span><span class="p">))</span>
</span><span id="__span-189-4"><a id="__codelineno-189-4" name="__codelineno-189-4" href="#__codelineno-189-4"></a><span class="w">    </span><span class="p">.</span><span class="na">flatMap</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Optional</span><span class="p">.</span><span class="na">ofNullable</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="na">foo</span><span class="p">))</span>
</span><span id="__span-189-5"><a id="__codelineno-189-5" name="__codelineno-189-5" href="#__codelineno-189-5"></a><span class="w">    </span><span class="p">.</span><span class="na">ifPresent</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span>
</span></code></pre></div> <p>å¦‚æœä¸ä¸ºç©ºçš„è¯ï¼Œæ¯ä¸ª <code>flatMap</code> çš„è°ƒç”¨éƒ½ä¼šè¿”å›é¢„æœŸå¯¹è±¡çš„ <code>Optional</code> åŒ…è£…ï¼Œå¦åˆ™è¿”å›ä¸º <code>null</code> çš„ <code>Optional</code> åŒ…è£…ç±»ã€‚</p> <h4 id="973reduce">9.7.3ã€Reduce<a class="headerlink" href="#973reduce" title="é”šç‚¹é“¾æ¥">Â¶</a></h4> <p>è§„çº¦æ“ä½œå¯ä»¥å°†æµçš„æ‰€æœ‰å…ƒç´ ç»„åˆæˆä¸€ä¸ªç»“æœã€‚Java 8 æ”¯æŒä¸‰ç§ä¸åŒçš„ <code>reduce</code> æ–¹æ³•ã€‚</p> <p>ç¬¬ä¸€ç§å°†æµä¸­çš„å…ƒç´ è§„çº¦æˆæµä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-190-1"><a id="__codelineno-190-1" name="__codelineno-190-1" href="#__codelineno-190-1"></a><span class="n">Optional</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">reduce</span><span class="p">(</span><span class="n">BinaryOperator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">accumulator</span><span class="p">);</span>
</span></code></pre></div> <p>ä¸‹é¢çš„ç¤ºä¾‹ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œæ¥ç­›é€‰å‡ºå¹´é¾„æœ€å¤§çš„é‚£ä¸ªäººï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-191-1"><a id="__codelineno-191-1" name="__codelineno-191-1" href="#__codelineno-191-1"></a><span class="n">persons</span>
</span><span id="__span-191-2"><a id="__codelineno-191-2" name="__codelineno-191-2" href="#__codelineno-191-2"></a><span class="w">    </span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
</span><span id="__span-191-3"><a id="__codelineno-191-3" name="__codelineno-191-3" href="#__codelineno-191-3"></a><span class="w">    </span><span class="p">.</span><span class="na">reduce</span><span class="p">((</span><span class="n">p1</span><span class="p">,</span><span class="w"> </span><span class="n">p2</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">p1</span><span class="p">.</span><span class="na">age</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="na">age</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">p2</span><span class="p">)</span>
</span><span id="__span-191-4"><a id="__codelineno-191-4" name="__codelineno-191-4" href="#__codelineno-191-4"></a><span class="w">    </span><span class="p">.</span><span class="na">ifPresent</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-192-1"><a id="__codelineno-192-1" name="__codelineno-192-1" href="#__codelineno-192-1"></a>Pamela
</span></code></pre></div> <p>lambada è¡¨è¾¾å¼çš„ <em>p1</em> å‚æ•°æ˜¯è¡¨è¾¾å¼çš„æ‰§è¡Œç»“æœçš„ç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯è¡¨è¾¾å¼è¿™ä¸€æ¬¡çš„æ‰§è¡Œç»“æœä¼šè¢«ä½œä¸ºä¸‹ä¸€æ¬¡æ‰§è¡Œçš„å‚æ•°ï¼Œè€Œç¬¬äºŒä¸ªå‚æ•° <em>p2</em> åˆ™æ˜¯ä¾æ¬¡ä¸º stream ä¸­æ¯ä¸ªå…ƒç´ ã€‚å¦‚æœè¡¨è¾¾å¼æ˜¯ç¬¬ä¸€æ¬¡è¢«æ‰§è¡Œï¼Œ<em>p1</em> åˆ™æ˜¯ stream ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</p> <p>ç¬¬äºŒç§ <code>reduce</code> æ–¹æ³•æ¥å—æ ‡è¯†å€¼å’Œ <code>BinaryOperator</code> ç´¯åŠ å™¨ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-193-1"><a id="__codelineno-193-1" name="__codelineno-193-1" href="#__codelineno-193-1"></a><span class="n">T</span><span class="w"> </span><span class="nf">reduce</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">identity</span><span class="p">,</span><span class="w"> </span><span class="n">BinaryOperator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">accumulator</span><span class="p">);</span>
</span></code></pre></div> <p>ä¸ç¬¬ä¸€ä¸ªå®ç°çš„å”¯ä¸€åŒºåˆ«æ˜¯å®ƒé¦–æ¬¡æ‰§è¡Œæ—¶è¡¨è¾¾å¼ç¬¬ä¸€æ¬¡å‚æ•°å¹¶ä¸æ˜¯ stream çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè€Œæ˜¯é€šè¿‡ç¬¬ä¸€ä¸ªå‚æ•° <em>identity</em> æ¥æŒ‡å®šã€‚æ­¤å¤–ï¼Œå› ä¸ºå­˜åœ¨ stream ä¸ºç©ºçš„æƒ…å†µï¼Œæ‰€ä»¥ç¬¬ä¸€ç§å®ç°å¹¶ä¸ç›´æ¥æ–¹æ³•è®¡ç®—çš„ç»“æœï¼Œè€Œæ˜¯å°†è®¡ç®—ç»“æœç”¨ Optional æ¥åŒ…è£…ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒçš„ <code>get</code> æ–¹æ³•è·å¾—ä¸€ä¸ª Integer ç±»å‹çš„ç»“æœï¼Œè€Œ Integer å…è®¸ <code>null</code>ã€‚ç¬¬äºŒç§å®ç°å› ä¸ºå…è®¸æŒ‡å®šåˆå§‹å€¼ï¼Œå› æ­¤å³ä½¿ stream ä¸ºç©ºï¼Œä¹Ÿä¸ä¼šå‡ºç°è¿”å›ç»“æœä¸º <code>null</code> çš„æƒ…å†µï¼Œå½“ stream ä¸ºç©ºï¼Œ<code>reduce</code> ä¼šç›´æ¥æŠŠåˆå§‹å€¼è¿”å›ã€‚</p> <p>æ­¤æ–¹æ³•å¯ç”¨äºæ„é€ ä¸€ä¸ªæ–°çš„ <code>Person</code>ï¼Œå…¶ä¸­åŒ…å«æ¥è‡ªæµä¸­æ‰€æœ‰å…¶ä»–äººçš„èšåˆåç§°å’Œå¹´é¾„ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-194-1"><a id="__codelineno-194-1" name="__codelineno-194-1" href="#__codelineno-194-1"></a><span class="n">Person</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-194-2"><a id="__codelineno-194-2" name="__codelineno-194-2" href="#__codelineno-194-2"></a><span class="w">    </span><span class="n">persons</span>
</span><span id="__span-194-3"><a id="__codelineno-194-3" name="__codelineno-194-3" href="#__codelineno-194-3"></a><span class="w">        </span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
</span><span id="__span-194-4"><a id="__codelineno-194-4" name="__codelineno-194-4" href="#__codelineno-194-4"></a><span class="w">        </span><span class="p">.</span><span class="na">reduce</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Person</span><span class="p">(</span><span class="s">""</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">p1</span><span class="p">,</span><span class="w"> </span><span class="n">p2</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-194-5"><a id="__codelineno-194-5" name="__codelineno-194-5" href="#__codelineno-194-5"></a><span class="w">            </span><span class="n">p1</span><span class="p">.</span><span class="na">age</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="na">age</span><span class="p">;</span>
</span><span id="__span-194-6"><a id="__codelineno-194-6" name="__codelineno-194-6" href="#__codelineno-194-6"></a><span class="w">            </span><span class="n">p1</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="na">name</span><span class="p">;</span>
</span><span id="__span-194-7"><a id="__codelineno-194-7" name="__codelineno-194-7" href="#__codelineno-194-7"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">p1</span><span class="p">;</span>
</span><span id="__span-194-8"><a id="__codelineno-194-8" name="__codelineno-194-8" href="#__codelineno-194-8"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-194-9"><a id="__codelineno-194-9" name="__codelineno-194-9" href="#__codelineno-194-9"></a>
</span><span id="__span-194-10"><a id="__codelineno-194-10" name="__codelineno-194-10" href="#__codelineno-194-10"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">"name=%s; age=%s"</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="na">name</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="na">age</span><span class="p">);</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-195-1"><a id="__codelineno-195-1" name="__codelineno-195-1" href="#__codelineno-195-1"></a>name=MaxPeterPamelaDavid; age=76
</span></code></pre></div> <p>ç¬¬ä¸‰ç§ <code>reduce</code> æ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ï¼šæ ‡è¯†å€¼ã€<code>BiFunction</code> ç´¯åŠ å™¨å’Œç±»å‹çš„ç»„åˆå™¨å‡½æ•° <code>BinaryOperator</code>ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-196-1"><a id="__codelineno-196-1" name="__codelineno-196-1" href="#__codelineno-196-1"></a><span class="o">&lt;</span><span class="n">U</span><span class="o">&gt;</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="nf">reduce</span><span class="p">(</span><span class="n">U</span><span class="w"> </span><span class="n">identity</span><span class="p">,</span><span class="w"> </span><span class="n">BiFunction</span><span class="o">&lt;</span><span class="n">U</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="kd">super</span><span class="w"> </span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="o">&gt;</span><span class="w"> </span><span class="n">accumulator</span><span class="p">,</span><span class="w"> </span><span class="n">BinaryOperator</span><span class="o">&lt;</span><span class="n">U</span><span class="o">&gt;</span><span class="w"> </span><span class="n">combiner</span><span class="p">);</span>
</span></code></pre></div> <p>ç”±äºåˆå§‹å€¼çš„ç±»å‹ä¸ä¸€å®šä¸º <code>Person</code>ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªå½’çº¦å‡½æ•°æ¥è®¡ç®—æ‰€æœ‰äººçš„å¹´é¾„æ€»å’Œï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-197-1"><a id="__codelineno-197-1" name="__codelineno-197-1" href="#__codelineno-197-1"></a><span class="n">Integer</span><span class="w"> </span><span class="n">ageSum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">persons</span>
</span><span id="__span-197-2"><a id="__codelineno-197-2" name="__codelineno-197-2" href="#__codelineno-197-2"></a><span class="w">    </span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
</span><span id="__span-197-3"><a id="__codelineno-197-3" name="__codelineno-197-3" href="#__codelineno-197-3"></a><span class="w">    </span><span class="p">.</span><span class="na">reduce</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="na">age</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">sum1</span><span class="p">,</span><span class="w"> </span><span class="n">sum2</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">sum1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sum2</span><span class="p">);</span>
</span><span id="__span-197-4"><a id="__codelineno-197-4" name="__codelineno-197-4" href="#__codelineno-197-4"></a>
</span><span id="__span-197-5"><a id="__codelineno-197-5" name="__codelineno-197-5" href="#__codelineno-197-5"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">ageSum</span><span class="p">);</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-198-1"><a id="__codelineno-198-1" name="__codelineno-198-1" href="#__codelineno-198-1"></a>76
</span></code></pre></div> <p>ç»“æœä¸º 76ï¼Œä½†æ˜¯å†…éƒ¨ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿè®©æˆ‘ä»¬å†æ‰“å°ä¸€äº›è°ƒè¯•æ—¥å¿—ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-199-1"><a id="__codelineno-199-1" name="__codelineno-199-1" href="#__codelineno-199-1"></a><span class="n">Integer</span><span class="w"> </span><span class="n">ageSum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">persons</span>
</span><span id="__span-199-2"><a id="__codelineno-199-2" name="__codelineno-199-2" href="#__codelineno-199-2"></a><span class="w">    </span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
</span><span id="__span-199-3"><a id="__codelineno-199-3" name="__codelineno-199-3" href="#__codelineno-199-3"></a><span class="w">    </span><span class="p">.</span><span class="na">reduce</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-199-4"><a id="__codelineno-199-4" name="__codelineno-199-4" href="#__codelineno-199-4"></a><span class="w">        </span><span class="p">(</span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-199-5"><a id="__codelineno-199-5" name="__codelineno-199-5" href="#__codelineno-199-5"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">"accumulator: sum=%s; person=%s\n"</span><span class="p">,</span><span class="w"> </span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">);</span>
</span><span id="__span-199-6"><a id="__codelineno-199-6" name="__codelineno-199-6" href="#__codelineno-199-6"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="na">age</span><span class="p">;</span>
</span><span id="__span-199-7"><a id="__codelineno-199-7" name="__codelineno-199-7" href="#__codelineno-199-7"></a><span class="w">        </span><span class="p">},</span>
</span><span id="__span-199-8"><a id="__codelineno-199-8" name="__codelineno-199-8" href="#__codelineno-199-8"></a><span class="w">        </span><span class="p">(</span><span class="n">sum1</span><span class="p">,</span><span class="w"> </span><span class="n">sum2</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-199-9"><a id="__codelineno-199-9" name="__codelineno-199-9" href="#__codelineno-199-9"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">"combiner: sum1=%s; sum2=%s\n"</span><span class="p">,</span><span class="w"> </span><span class="n">sum1</span><span class="p">,</span><span class="w"> </span><span class="n">sum2</span><span class="p">);</span>
</span><span id="__span-199-10"><a id="__codelineno-199-10" name="__codelineno-199-10" href="#__codelineno-199-10"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">sum1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sum2</span><span class="p">;</span>
</span><span id="__span-199-11"><a id="__codelineno-199-11" name="__codelineno-199-11" href="#__codelineno-199-11"></a><span class="w">        </span><span class="p">});</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-200-1"><a id="__codelineno-200-1" name="__codelineno-200-1" href="#__codelineno-200-1"></a>accumulator: sum=0; person=Max
</span><span id="__span-200-2"><a id="__codelineno-200-2" name="__codelineno-200-2" href="#__codelineno-200-2"></a>accumulator: sum=18; person=Peter
</span><span id="__span-200-3"><a id="__codelineno-200-3" name="__codelineno-200-3" href="#__codelineno-200-3"></a>accumulator: sum=41; person=Pamela
</span><span id="__span-200-4"><a id="__codelineno-200-4" name="__codelineno-200-4" href="#__codelineno-200-4"></a>accumulator: sum=64; person=David
</span></code></pre></div> <p>å¯ä»¥çœ‹åˆ°ï¼Œç´¯åŠ å™¨å‡½æ•°å®Œæˆäº†æ‰€æœ‰å·¥ä½œã€‚å®ƒé¦–å…ˆä½¿ç”¨åˆå§‹å€¼ <code>0</code> å’Œç¬¬ä¸€ä¸ªäººå¹´é¾„ç›¸åŠ ã€‚æ¥ä¸‹æ¥çš„ä¸‰æ­¥ä¸­ <code>sum</code> ä¼šæŒç»­å¢åŠ ï¼Œç›´åˆ° 76ã€‚</p> <p>ä½†æ˜¯å¥½åƒç»„åˆå™¨ä»æ¥éƒ½æ²¡æœ‰è°ƒç”¨è¿‡ï¼Œæˆ‘ä»¬ä»¥å¹¶è¡Œæµçš„æ–¹å¼è¿è¡Œä¸Šé¢çš„ä»£ç ï¼Œçœ‹çœ‹æ—¥å¿—è¾“å‡ºï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-201-1"><a id="__codelineno-201-1" name="__codelineno-201-1" href="#__codelineno-201-1"></a><span class="n">Integer</span><span class="w"> </span><span class="n">ageSum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">persons</span>
</span><span id="__span-201-2"><a id="__codelineno-201-2" name="__codelineno-201-2" href="#__codelineno-201-2"></a><span class="w">    </span><span class="p">.</span><span class="na">parallelStream</span><span class="p">()</span>
</span><span id="__span-201-3"><a id="__codelineno-201-3" name="__codelineno-201-3" href="#__codelineno-201-3"></a><span class="w">    </span><span class="p">.</span><span class="na">reduce</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-201-4"><a id="__codelineno-201-4" name="__codelineno-201-4" href="#__codelineno-201-4"></a><span class="w">        </span><span class="p">(</span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-201-5"><a id="__codelineno-201-5" name="__codelineno-201-5" href="#__codelineno-201-5"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">"accumulator: sum=%s; person=%s\n"</span><span class="p">,</span><span class="w"> </span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">);</span>
</span><span id="__span-201-6"><a id="__codelineno-201-6" name="__codelineno-201-6" href="#__codelineno-201-6"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="na">age</span><span class="p">;</span>
</span><span id="__span-201-7"><a id="__codelineno-201-7" name="__codelineno-201-7" href="#__codelineno-201-7"></a><span class="w">        </span><span class="p">},</span>
</span><span id="__span-201-8"><a id="__codelineno-201-8" name="__codelineno-201-8" href="#__codelineno-201-8"></a><span class="w">        </span><span class="p">(</span><span class="n">sum1</span><span class="p">,</span><span class="w"> </span><span class="n">sum2</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-201-9"><a id="__codelineno-201-9" name="__codelineno-201-9" href="#__codelineno-201-9"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">"combiner: sum1=%s; sum2=%s\n"</span><span class="p">,</span><span class="w"> </span><span class="n">sum1</span><span class="p">,</span><span class="w"> </span><span class="n">sum2</span><span class="p">);</span>
</span><span id="__span-201-10"><a id="__codelineno-201-10" name="__codelineno-201-10" href="#__codelineno-201-10"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">sum1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sum2</span><span class="p">;</span>
</span><span id="__span-201-11"><a id="__codelineno-201-11" name="__codelineno-201-11" href="#__codelineno-201-11"></a><span class="w">        </span><span class="p">});</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-202-1"><a id="__codelineno-202-1" name="__codelineno-202-1" href="#__codelineno-202-1"></a>accumulator: sum=0; person=Pamela
</span><span id="__span-202-2"><a id="__codelineno-202-2" name="__codelineno-202-2" href="#__codelineno-202-2"></a>accumulator: sum=0; person=David
</span><span id="__span-202-3"><a id="__codelineno-202-3" name="__codelineno-202-3" href="#__codelineno-202-3"></a>accumulator: sum=0; person=Max
</span><span id="__span-202-4"><a id="__codelineno-202-4" name="__codelineno-202-4" href="#__codelineno-202-4"></a>accumulator: sum=0; person=Peter
</span><span id="__span-202-5"><a id="__codelineno-202-5" name="__codelineno-202-5" href="#__codelineno-202-5"></a>combiner: sum1=18; sum2=23
</span><span id="__span-202-6"><a id="__codelineno-202-6" name="__codelineno-202-6" href="#__codelineno-202-6"></a>combiner: sum1=23; sum2=12
</span><span id="__span-202-7"><a id="__codelineno-202-7" name="__codelineno-202-7" href="#__codelineno-202-7"></a>combiner: sum1=41; sum2=35
</span></code></pre></div> <p>å¹¶è¡Œæµçš„æ‰§è¡Œæ–¹å¼å®Œå…¨ä¸åŒã€‚è¿™é‡Œç»„åˆå™¨è¢«è°ƒç”¨äº†ã€‚å®é™…ä¸Šï¼Œç”±äºç´¯åŠ å™¨è¢«å¹¶è¡Œè°ƒç”¨ï¼Œç»„åˆå™¨éœ€è¦è¢«ç”¨äºè®¡ç®—éƒ¨åˆ†ç´¯åŠ å€¼çš„æ€»å’Œã€‚</p> <h3 id="98å¹¶è¡Œæµ">9.8ã€å¹¶è¡Œæµ<a class="headerlink" href="#98å¹¶è¡Œæµ" title="é”šç‚¹é“¾æ¥">Â¶</a></h3> <p>æµæ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ï¼Œå½“æµä¸­å­˜åœ¨å¤§é‡å…ƒç´ æ—¶ï¼Œå¯ä»¥æ˜¾è‘—æå‡æ€§èƒ½ã€‚å¹¶è¡Œæµåº•å±‚ä½¿ç”¨çš„ <code>ForkJoinPool</code>ï¼Œå®ƒç”± <code>ForkJoinPool.commonPool()</code> æ–¹æ³•æä¾›ã€‚åº•å±‚çº¿ç¨‹æ± çš„å¤§å°æœ€å¤šä¸ºäº”ä¸ªï¼ˆå…·ä½“å–å†³äº CPU å¯ç”¨æ ¸å¿ƒæ•°ï¼‰ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-203-1"><a id="__codelineno-203-1" name="__codelineno-203-1" href="#__codelineno-203-1"></a><span class="n">ForkJoinPool</span><span class="w"> </span><span class="n">commonPool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ForkJoinPool</span><span class="p">.</span><span class="na">commonPool</span><span class="p">();</span>
</span><span id="__span-203-2"><a id="__codelineno-203-2" name="__codelineno-203-2" href="#__codelineno-203-2"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">commonPool</span><span class="p">.</span><span class="na">getParallelism</span><span class="p">());</span>
</span></code></pre></div> <p>è¾“å‡ºï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-204-1"><a id="__codelineno-204-1" name="__codelineno-204-1" href="#__codelineno-204-1"></a>15
</span></code></pre></div> <p>åœ¨æˆ‘çš„æœºå™¨ä¸Šï¼Œå…¬å…±æ± åˆå§‹åŒ–é»˜è®¤å€¼ä¸º 3ã€‚å¯ä»¥é€šè¿‡è®¾ç½®ä»¥ä¸‹ JVM å‚æ•°å¯ä»¥å‡å°æˆ–å¢åŠ æ­¤å€¼ï¼š</p> <div class="language-ini highlight"><span class="filename">INI</span><pre><span></span><code><span id="__span-205-1"><a id="__codelineno-205-1" name="__codelineno-205-1" href="#__codelineno-205-1"></a><span class="na">-Djava.util.concurrent.ForkJoinPool.common.parallelism</span><span class="o">=</span><span class="s">5</span>
</span></code></pre></div> <p>é›†åˆæ”¯æŒ <code>parallelStream()</code> æ–¹æ³•æ¥åˆ›å»ºå…ƒç´ çš„å¹¶è¡Œæµã€‚æˆ–è€…ä½ å¯ä»¥åœ¨å·²å­˜åœ¨çš„æ•°æ®æµä¸Šè°ƒç”¨ä¸­é—´æ–¹æ³• <code>parallel()</code>ï¼Œå°†ä¸²è¡Œæµè½¬æ¢ä¸ºå¹¶è¡Œæµï¼Œè¿™ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p> <p>ä¸ºäº†è¯¦ç»†äº†è§£å¹¶è¡Œæµçš„æ‰§è¡Œè¡Œä¸ºï¼Œæˆ‘ä»¬åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œæ‰“å°å½“å‰çº¿ç¨‹çš„ä¿¡æ¯ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-206-1"><a id="__codelineno-206-1" name="__codelineno-206-1" href="#__codelineno-206-1"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="s">"a1"</span><span class="p">,</span><span class="w"> </span><span class="s">"a2"</span><span class="p">,</span><span class="w"> </span><span class="s">"b1"</span><span class="p">,</span><span class="w"> </span><span class="s">"c2"</span><span class="p">,</span><span class="w"> </span><span class="s">"c1"</span><span class="p">)</span>
</span><span id="__span-206-2"><a id="__codelineno-206-2" name="__codelineno-206-2" href="#__codelineno-206-2"></a><span class="w">    </span><span class="p">.</span><span class="na">parallelStream</span><span class="p">()</span>
</span><span id="__span-206-3"><a id="__codelineno-206-3" name="__codelineno-206-3" href="#__codelineno-206-3"></a><span class="w">    </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-206-4"><a id="__codelineno-206-4" name="__codelineno-206-4" href="#__codelineno-206-4"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">"filter: %s [%s]\n"</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">());</span>
</span><span id="__span-206-5"><a id="__codelineno-206-5" name="__codelineno-206-5" href="#__codelineno-206-5"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
</span><span id="__span-206-6"><a id="__codelineno-206-6" name="__codelineno-206-6" href="#__codelineno-206-6"></a><span class="w">    </span><span class="p">})</span>
</span><span id="__span-206-7"><a id="__codelineno-206-7" name="__codelineno-206-7" href="#__codelineno-206-7"></a><span class="w">    </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-206-8"><a id="__codelineno-206-8" name="__codelineno-206-8" href="#__codelineno-206-8"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">"map: %s [%s]\n"</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">());</span>
</span><span id="__span-206-9"><a id="__codelineno-206-9" name="__codelineno-206-9" href="#__codelineno-206-9"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">();</span>
</span><span id="__span-206-10"><a id="__codelineno-206-10" name="__codelineno-206-10" href="#__codelineno-206-10"></a><span class="w">    </span><span class="p">})</span>
</span><span id="__span-206-11"><a id="__codelineno-206-11" name="__codelineno-206-11" href="#__codelineno-206-11"></a><span class="w">    </span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">"forEach: %s [%s]\n"</span><span class="p">,</span>
</span><span id="__span-206-12"><a id="__codelineno-206-12" name="__codelineno-206-12" href="#__codelineno-206-12"></a><span class="w">        </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">()));</span>
</span></code></pre></div> <p>é€šè¿‡æ—¥å¿—è¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å“ªä¸ªçº¿ç¨‹è¢«ç”¨äºæ‰§è¡Œæµå¼æ“ä½œï¼Œæœ‰ä¸ªæ›´æ·±å…¥çš„ç†è§£ï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-207-1"><a id="__codelineno-207-1" name="__codelineno-207-1" href="#__codelineno-207-1"></a>filter:     b1 [main]
</span><span id="__span-207-2"><a id="__codelineno-207-2" name="__codelineno-207-2" href="#__codelineno-207-2"></a>filter:     c2 [ForkJoinPool.commonPool-worker-4]
</span><span id="__span-207-3"><a id="__codelineno-207-3" name="__codelineno-207-3" href="#__codelineno-207-3"></a>map:        c2 [ForkJoinPool.commonPool-worker-4]
</span><span id="__span-207-4"><a id="__codelineno-207-4" name="__codelineno-207-4" href="#__codelineno-207-4"></a>filter:     a2 [ForkJoinPool.commonPool-worker-9]
</span><span id="__span-207-5"><a id="__codelineno-207-5" name="__codelineno-207-5" href="#__codelineno-207-5"></a>map:        a2 [ForkJoinPool.commonPool-worker-9]
</span><span id="__span-207-6"><a id="__codelineno-207-6" name="__codelineno-207-6" href="#__codelineno-207-6"></a>filter:     a1 [ForkJoinPool.commonPool-worker-11]
</span><span id="__span-207-7"><a id="__codelineno-207-7" name="__codelineno-207-7" href="#__codelineno-207-7"></a>map:        a1 [ForkJoinPool.commonPool-worker-11]
</span><span id="__span-207-8"><a id="__codelineno-207-8" name="__codelineno-207-8" href="#__codelineno-207-8"></a>filter:     c1 [ForkJoinPool.commonPool-worker-2]
</span><span id="__span-207-9"><a id="__codelineno-207-9" name="__codelineno-207-9" href="#__codelineno-207-9"></a>map:        c1 [ForkJoinPool.commonPool-worker-2]
</span><span id="__span-207-10"><a id="__codelineno-207-10" name="__codelineno-207-10" href="#__codelineno-207-10"></a>forEach:    C1 [ForkJoinPool.commonPool-worker-2]
</span><span id="__span-207-11"><a id="__codelineno-207-11" name="__codelineno-207-11" href="#__codelineno-207-11"></a>forEach:    A1 [ForkJoinPool.commonPool-worker-11]
</span><span id="__span-207-12"><a id="__codelineno-207-12" name="__codelineno-207-12" href="#__codelineno-207-12"></a>forEach:    A2 [ForkJoinPool.commonPool-worker-9]
</span><span id="__span-207-13"><a id="__codelineno-207-13" name="__codelineno-207-13" href="#__codelineno-207-13"></a>forEach:    C2 [ForkJoinPool.commonPool-worker-4]
</span><span id="__span-207-14"><a id="__codelineno-207-14" name="__codelineno-207-14" href="#__codelineno-207-14"></a>map:        b1 [main]
</span><span id="__span-207-15"><a id="__codelineno-207-15" name="__codelineno-207-15" href="#__codelineno-207-15"></a>forEach:    B1 [main]
</span></code></pre></div> <p>å¹¶è¡Œæµä½¿ç”¨äº†æ‰€æœ‰çš„ <code>ForkJoinPool</code> ä¸­çš„å¯ç”¨çº¿ç¨‹æ¥æ‰§è¡Œæµå¼æ“ä½œã€‚åœ¨æŒç»­çš„è¿è¡Œä¸­ï¼Œè¾“å‡ºç»“æœå¯èƒ½æœ‰æ‰€ä¸åŒï¼Œå› ä¸ºæ‰€ä½¿ç”¨çš„ç‰¹å®šçº¿ç¨‹æ˜¯éç‰¹å®šçš„ã€‚</p> <p>è®©æˆ‘ä»¬é€šè¿‡æ·»åŠ ä¸­é—´æ“ä½œ <code>sort</code> æ¥æ‰©å±•ä¸Šé¢ç¤ºä¾‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-208-1"><a id="__codelineno-208-1" name="__codelineno-208-1" href="#__codelineno-208-1"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="s">"a1"</span><span class="p">,</span><span class="w"> </span><span class="s">"a2"</span><span class="p">,</span><span class="w"> </span><span class="s">"b1"</span><span class="p">,</span><span class="w"> </span><span class="s">"c2"</span><span class="p">,</span><span class="w"> </span><span class="s">"c1"</span><span class="p">)</span>
</span><span id="__span-208-2"><a id="__codelineno-208-2" name="__codelineno-208-2" href="#__codelineno-208-2"></a><span class="w">    </span><span class="p">.</span><span class="na">parallelStream</span><span class="p">()</span>
</span><span id="__span-208-3"><a id="__codelineno-208-3" name="__codelineno-208-3" href="#__codelineno-208-3"></a><span class="w">    </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-208-4"><a id="__codelineno-208-4" name="__codelineno-208-4" href="#__codelineno-208-4"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">"filter:\t\t%s [%s]\n"</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">());</span>
</span><span id="__span-208-5"><a id="__codelineno-208-5" name="__codelineno-208-5" href="#__codelineno-208-5"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
</span><span id="__span-208-6"><a id="__codelineno-208-6" name="__codelineno-208-6" href="#__codelineno-208-6"></a><span class="w">    </span><span class="p">})</span>
</span><span id="__span-208-7"><a id="__codelineno-208-7" name="__codelineno-208-7" href="#__codelineno-208-7"></a><span class="w">    </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-208-8"><a id="__codelineno-208-8" name="__codelineno-208-8" href="#__codelineno-208-8"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">"map:\t\t%s [%s]\n"</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">());</span>
</span><span id="__span-208-9"><a id="__codelineno-208-9" name="__codelineno-208-9" href="#__codelineno-208-9"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">();</span>
</span><span id="__span-208-10"><a id="__codelineno-208-10" name="__codelineno-208-10" href="#__codelineno-208-10"></a><span class="w">    </span><span class="p">})</span>
</span><span id="__span-208-11"><a id="__codelineno-208-11" name="__codelineno-208-11" href="#__codelineno-208-11"></a><span class="w">    </span><span class="p">.</span><span class="na">sorted</span><span class="p">((</span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="n">s2</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-208-12"><a id="__codelineno-208-12" name="__codelineno-208-12" href="#__codelineno-208-12"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">"sort:\t\t%s &lt;&gt; %s [%s]\n"</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="n">s2</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-208-13"><a id="__codelineno-208-13" name="__codelineno-208-13" href="#__codelineno-208-13"></a><span class="w">                          </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">());</span>
</span><span id="__span-208-14"><a id="__codelineno-208-14" name="__codelineno-208-14" href="#__codelineno-208-14"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">s1</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">s2</span><span class="p">);</span>
</span><span id="__span-208-15"><a id="__codelineno-208-15" name="__codelineno-208-15" href="#__codelineno-208-15"></a><span class="w">    </span><span class="p">})</span>
</span><span id="__span-208-16"><a id="__codelineno-208-16" name="__codelineno-208-16" href="#__codelineno-208-16"></a><span class="w">    </span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">"forEach:\t%s [%s]\n"</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-208-17"><a id="__codelineno-208-17" name="__codelineno-208-17" href="#__codelineno-208-17"></a><span class="w">                                    </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">()));</span>
</span></code></pre></div> <p>è¿è¡Œä»£ç ï¼Œè¾“å‡ºç»“æœçœ‹ä¸Šå»æœ‰äº›å¥‡æ€ªï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-209-1"><a id="__codelineno-209-1" name="__codelineno-209-1" href="#__codelineno-209-1"></a><span class="nl">filter</span><span class="p">:</span><span class="w">     </span><span class="n">b1</span><span class="w"> </span><span class="o">[</span><span class="n">main</span><span class="o">]</span>
</span><span id="__span-209-2"><a id="__codelineno-209-2" name="__codelineno-209-2" href="#__codelineno-209-2"></a><span class="nl">filter</span><span class="p">:</span><span class="w">     </span><span class="n">a1</span><span class="w"> </span><span class="o">[</span><span class="n">ForkJoinPool</span><span class="p">.</span><span class="na">commonPool</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">11</span><span class="o">]</span>
</span><span id="__span-209-3"><a id="__codelineno-209-3" name="__codelineno-209-3" href="#__codelineno-209-3"></a><span class="nl">map</span><span class="p">:</span><span class="w">        </span><span class="n">a1</span><span class="w"> </span><span class="o">[</span><span class="n">ForkJoinPool</span><span class="p">.</span><span class="na">commonPool</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">11</span><span class="o">]</span>
</span><span id="__span-209-4"><a id="__codelineno-209-4" name="__codelineno-209-4" href="#__codelineno-209-4"></a><span class="nl">filter</span><span class="p">:</span><span class="w">     </span><span class="n">c1</span><span class="w"> </span><span class="o">[</span><span class="n">ForkJoinPool</span><span class="p">.</span><span class="na">commonPool</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">2</span><span class="o">]</span>
</span><span id="__span-209-5"><a id="__codelineno-209-5" name="__codelineno-209-5" href="#__codelineno-209-5"></a><span class="nl">map</span><span class="p">:</span><span class="w">        </span><span class="n">c1</span><span class="w"> </span><span class="o">[</span><span class="n">ForkJoinPool</span><span class="p">.</span><span class="na">commonPool</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">2</span><span class="o">]</span>
</span><span id="__span-209-6"><a id="__codelineno-209-6" name="__codelineno-209-6" href="#__codelineno-209-6"></a><span class="nl">filter</span><span class="p">:</span><span class="w">     </span><span class="n">c2</span><span class="w"> </span><span class="o">[</span><span class="n">ForkJoinPool</span><span class="p">.</span><span class="na">commonPool</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">4</span><span class="o">]</span>
</span><span id="__span-209-7"><a id="__codelineno-209-7" name="__codelineno-209-7" href="#__codelineno-209-7"></a><span class="nl">map</span><span class="p">:</span><span class="w">        </span><span class="n">c2</span><span class="w"> </span><span class="o">[</span><span class="n">ForkJoinPool</span><span class="p">.</span><span class="na">commonPool</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">4</span><span class="o">]</span>
</span><span id="__span-209-8"><a id="__codelineno-209-8" name="__codelineno-209-8" href="#__codelineno-209-8"></a><span class="nl">filter</span><span class="p">:</span><span class="w">     </span><span class="n">a2</span><span class="w"> </span><span class="o">[</span><span class="n">ForkJoinPool</span><span class="p">.</span><span class="na">commonPool</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">9</span><span class="o">]</span>
</span><span id="__span-209-9"><a id="__codelineno-209-9" name="__codelineno-209-9" href="#__codelineno-209-9"></a><span class="nl">map</span><span class="p">:</span><span class="w">        </span><span class="n">a2</span><span class="w"> </span><span class="o">[</span><span class="n">ForkJoinPool</span><span class="p">.</span><span class="na">commonPool</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">9</span><span class="o">]</span>
</span><span id="__span-209-10"><a id="__codelineno-209-10" name="__codelineno-209-10" href="#__codelineno-209-10"></a><span class="nl">map</span><span class="p">:</span><span class="w">        </span><span class="n">b1</span><span class="w"> </span><span class="o">[</span><span class="n">main</span><span class="o">]</span>
</span><span id="__span-209-11"><a id="__codelineno-209-11" name="__codelineno-209-11" href="#__codelineno-209-11"></a><span class="nl">sort</span><span class="p">:</span><span class="w">       </span><span class="n">A2</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">A1</span><span class="w"> </span><span class="o">[</span><span class="n">main</span><span class="o">]</span>
</span><span id="__span-209-12"><a id="__codelineno-209-12" name="__codelineno-209-12" href="#__codelineno-209-12"></a><span class="nl">sort</span><span class="p">:</span><span class="w">       </span><span class="n">B1</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">A2</span><span class="w"> </span><span class="o">[</span><span class="n">main</span><span class="o">]</span>
</span><span id="__span-209-13"><a id="__codelineno-209-13" name="__codelineno-209-13" href="#__codelineno-209-13"></a><span class="nl">sort</span><span class="p">:</span><span class="w">       </span><span class="n">C2</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">B1</span><span class="w"> </span><span class="o">[</span><span class="n">main</span><span class="o">]</span>
</span><span id="__span-209-14"><a id="__codelineno-209-14" name="__codelineno-209-14" href="#__codelineno-209-14"></a><span class="nl">sort</span><span class="p">:</span><span class="w">       </span><span class="n">C1</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">C2</span><span class="w"> </span><span class="o">[</span><span class="n">main</span><span class="o">]</span>
</span><span id="__span-209-15"><a id="__codelineno-209-15" name="__codelineno-209-15" href="#__codelineno-209-15"></a><span class="nl">sort</span><span class="p">:</span><span class="w">       </span><span class="n">C1</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">B1</span><span class="w"> </span><span class="o">[</span><span class="n">main</span><span class="o">]</span>
</span><span id="__span-209-16"><a id="__codelineno-209-16" name="__codelineno-209-16" href="#__codelineno-209-16"></a><span class="nl">sort</span><span class="p">:</span><span class="w">       </span><span class="n">C1</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">C2</span><span class="w"> </span><span class="o">[</span><span class="n">main</span><span class="o">]</span>
</span><span id="__span-209-17"><a id="__codelineno-209-17" name="__codelineno-209-17" href="#__codelineno-209-17"></a><span class="nl">forEach</span><span class="p">:</span><span class="w">    </span><span class="n">B1</span><span class="w"> </span><span class="o">[</span><span class="n">main</span><span class="o">]</span>
</span><span id="__span-209-18"><a id="__codelineno-209-18" name="__codelineno-209-18" href="#__codelineno-209-18"></a><span class="nl">forEach</span><span class="p">:</span><span class="w">    </span><span class="n">C1</span><span class="w"> </span><span class="o">[</span><span class="n">ForkJoinPool</span><span class="p">.</span><span class="na">commonPool</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">11</span><span class="o">]</span>
</span><span id="__span-209-19"><a id="__codelineno-209-19" name="__codelineno-209-19" href="#__codelineno-209-19"></a><span class="nl">forEach</span><span class="p">:</span><span class="w">    </span><span class="n">C2</span><span class="w"> </span><span class="o">[</span><span class="n">ForkJoinPool</span><span class="p">.</span><span class="na">commonPool</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">13</span><span class="o">]</span>
</span><span id="__span-209-20"><a id="__codelineno-209-20" name="__codelineno-209-20" href="#__codelineno-209-20"></a><span class="nl">forEach</span><span class="p">:</span><span class="w">    </span><span class="n">A1</span><span class="w"> </span><span class="o">[</span><span class="n">ForkJoinPool</span><span class="p">.</span><span class="na">commonPool</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">2</span><span class="o">]</span>
</span><span id="__span-209-21"><a id="__codelineno-209-21" name="__codelineno-209-21" href="#__codelineno-209-21"></a><span class="nl">forEach</span><span class="p">:</span><span class="w">    </span><span class="n">A2</span><span class="w"> </span><span class="o">[</span><span class="n">ForkJoinPool</span><span class="p">.</span><span class="na">commonPool</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">9</span><span class="o">]</span>
</span></code></pre></div> <p>è²Œä¼¼ <code>sort</code> åªåœ¨ä¸»çº¿ç¨‹ä¸Šä¸²è¡Œæ‰§è¡Œã€‚ä½†æ˜¯å®é™…ä¸Šï¼Œå¹¶è¡Œæµä¸­çš„ <code>sort</code> åœ¨åº•å±‚ä½¿ç”¨äº† Java 8 ä¸­æ–°çš„æ–¹æ³•<code>Arrays.parallelSort()</code>ã€‚å¦‚ <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#parallelSort-T:A-">javadoc </a>å®˜æ–¹æ–‡æ¡£è§£é‡Šçš„ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šæŒ‰ç…§æ•°æ®é•¿åº¦æ¥å†³å®šä»¥ä¸²è¡Œæ–¹å¼ï¼Œæˆ–è€…ä»¥å¹¶è¡Œçš„æ–¹å¼æ¥æ‰§è¡Œã€‚</p> <blockquote> <p>å¦‚æœæŒ‡å®šæ•°æ®çš„é•¿åº¦å°äºæœ€å°æ•°å€¼ï¼Œå®ƒåˆ™ä½¿ç”¨ç›¸åº”çš„ <code>Arrays.sort</code> æ–¹æ³•æ¥è¿›è¡Œæ’åºã€‚</p> </blockquote> <p>å›åˆ°ä¸Šé¢ <code>reduce</code> çš„ä¾‹å­ã€‚æˆ‘ä»¬å·²ç»å‘ç°äº†ç»„åˆå™¨å‡½æ•°åªåœ¨å¹¶è¡Œæµä¸­è°ƒç”¨ï¼Œè€Œä¸ä¸ä¼šåœ¨ä¸²è¡Œæµä¸­è¢«è°ƒç”¨ã€‚</p> <p>è®©æˆ‘ä»¬æ¥å®é™…è§‚å¯Ÿä¸€ä¸‹æ¶‰åŠåˆ°å“ªä¸ªçº¿ç¨‹ï¼š</p> <div class="language-java highlight"><span class="filename">Java</span><pre><span></span><code><span id="__span-210-1"><a id="__codelineno-210-1" name="__codelineno-210-1" href="#__codelineno-210-1"></a><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span><span class="w"> </span><span class="n">persons</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span>
</span><span id="__span-210-2"><a id="__codelineno-210-2" name="__codelineno-210-2" href="#__codelineno-210-2"></a><span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="n">Person</span><span class="p">(</span><span class="s">"Max"</span><span class="p">,</span><span class="w"> </span><span class="mi">18</span><span class="p">),</span>
</span><span id="__span-210-3"><a id="__codelineno-210-3" name="__codelineno-210-3" href="#__codelineno-210-3"></a><span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="n">Person</span><span class="p">(</span><span class="s">"Peter"</span><span class="p">,</span><span class="w"> </span><span class="mi">23</span><span class="p">),</span>
</span><span id="__span-210-4"><a id="__codelineno-210-4" name="__codelineno-210-4" href="#__codelineno-210-4"></a><span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="n">Person</span><span class="p">(</span><span class="s">"Pamela"</span><span class="p">,</span><span class="w"> </span><span class="mi">23</span><span class="p">),</span>
</span><span id="__span-210-5"><a id="__codelineno-210-5" name="__codelineno-210-5" href="#__codelineno-210-5"></a><span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="n">Person</span><span class="p">(</span><span class="s">"David"</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">));</span>
</span><span id="__span-210-6"><a id="__codelineno-210-6" name="__codelineno-210-6" href="#__codelineno-210-6"></a>
</span><span id="__span-210-7"><a id="__codelineno-210-7" name="__codelineno-210-7" href="#__codelineno-210-7"></a><span class="n">persons</span>
</span><span id="__span-210-8"><a id="__codelineno-210-8" name="__codelineno-210-8" href="#__codelineno-210-8"></a><span class="w">    </span><span class="p">.</span><span class="na">parallelStream</span><span class="p">()</span>
</span><span id="__span-210-9"><a id="__codelineno-210-9" name="__codelineno-210-9" href="#__codelineno-210-9"></a><span class="w">    </span><span class="p">.</span><span class="na">reduce</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-210-10"><a id="__codelineno-210-10" name="__codelineno-210-10" href="#__codelineno-210-10"></a><span class="w">        </span><span class="p">(</span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-210-11"><a id="__codelineno-210-11" name="__codelineno-210-11" href="#__codelineno-210-11"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">"accumulator:\tsum=%s; person=%s [%s]\n"</span><span class="p">,</span>
</span><span id="__span-210-12"><a id="__codelineno-210-12" name="__codelineno-210-12" href="#__codelineno-210-12"></a><span class="w">                </span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">());</span>
</span><span id="__span-210-13"><a id="__codelineno-210-13" name="__codelineno-210-13" href="#__codelineno-210-13"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="na">age</span><span class="p">;</span>
</span><span id="__span-210-14"><a id="__codelineno-210-14" name="__codelineno-210-14" href="#__codelineno-210-14"></a><span class="w">        </span><span class="p">},</span>
</span><span id="__span-210-15"><a id="__codelineno-210-15" name="__codelineno-210-15" href="#__codelineno-210-15"></a><span class="w">        </span><span class="p">(</span><span class="n">sum1</span><span class="p">,</span><span class="w"> </span><span class="n">sum2</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-210-16"><a id="__codelineno-210-16" name="__codelineno-210-16" href="#__codelineno-210-16"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">"combiner:\t\tsum1=%s; sum2=%s [%s]\n"</span><span class="p">,</span>
</span><span id="__span-210-17"><a id="__codelineno-210-17" name="__codelineno-210-17" href="#__codelineno-210-17"></a><span class="w">                </span><span class="n">sum1</span><span class="p">,</span><span class="w"> </span><span class="n">sum2</span><span class="p">,</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">());</span>
</span><span id="__span-210-18"><a id="__codelineno-210-18" name="__codelineno-210-18" href="#__codelineno-210-18"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">sum1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sum2</span><span class="p">;</span>
</span><span id="__span-210-19"><a id="__codelineno-210-19" name="__codelineno-210-19" href="#__codelineno-210-19"></a><span class="w">        </span><span class="p">});</span>
</span></code></pre></div> <p>é€šè¿‡æ§åˆ¶å°æ—¥å¿—è¾“å‡ºï¼Œç´¯åŠ å™¨å’Œç»„åˆå™¨å‡åœ¨æ‰€æœ‰å¯ç”¨çš„çº¿ç¨‹ä¸Šå¹¶è¡Œæ‰§è¡Œï¼š</p> <div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-211-1"><a id="__codelineno-211-1" name="__codelineno-211-1" href="#__codelineno-211-1"></a>accumulator:    sum=0; person=Max [ForkJoinPool.commonPool-worker-11]
</span><span id="__span-211-2"><a id="__codelineno-211-2" name="__codelineno-211-2" href="#__codelineno-211-2"></a>accumulator:    sum=0; person=Pamela [main]
</span><span id="__span-211-3"><a id="__codelineno-211-3" name="__codelineno-211-3" href="#__codelineno-211-3"></a>accumulator:    sum=0; person=David [ForkJoinPool.commonPool-worker-2]
</span><span id="__span-211-4"><a id="__codelineno-211-4" name="__codelineno-211-4" href="#__codelineno-211-4"></a>accumulator:    sum=0; person=Peter [ForkJoinPool.commonPool-worker-9]
</span><span id="__span-211-5"><a id="__codelineno-211-5" name="__codelineno-211-5" href="#__codelineno-211-5"></a>combiner:       sum1=18; sum2=23 [ForkJoinPool.commonPool-worker-9]
</span><span id="__span-211-6"><a id="__codelineno-211-6" name="__codelineno-211-6" href="#__codelineno-211-6"></a>combiner:       sum1=23; sum2=12 [ForkJoinPool.commonPool-worker-2]
</span><span id="__span-211-7"><a id="__codelineno-211-7" name="__codelineno-211-7" href="#__codelineno-211-7"></a>combiner:       sum1=41; sum2=35 [ForkJoinPool.commonPool-worker-2]
</span></code></pre></div> <p>æ€»ä¹‹ï¼Œéœ€è¦è®°ä½çš„æ˜¯ï¼Œå¹¶è¡Œæµå¯¹å«æœ‰å¤§é‡å…ƒç´ çš„æ•°æ®æµæå‡æ€§èƒ½æå¤§ã€‚ä½†æ˜¯ä¹Ÿéœ€è¦è®°ä½å¹¶è¡Œæµçš„ä¸€äº›æ“ä½œï¼Œä¾‹å¦‚ <code>reduce</code> å’Œ <code>collect</code> æ“ä½œï¼Œéœ€è¦é¢å¤–çš„è®¡ç®—ï¼ˆå¦‚ç»„åˆæ“ä½œï¼‰ï¼Œè¿™åœ¨ä¸²è¡Œæ‰§è¡Œæ—¶å¹¶ä¸éœ€è¦ã€‚</p> <p>æ­¤å¤–ï¼Œæ‰€æœ‰å¹¶è¡Œæµæ“ä½œéƒ½å…±äº«ç›¸åŒçš„ JVM ç›¸å…³çš„å…¬å…± <code>ForkJoinPool</code>ã€‚æ‰€ä»¥å¯èƒ½éœ€è¦é¿å…å†™å‡ºä¸€äº›åˆæ…¢åˆå¡çš„æµå¼æ“ä½œï¼Œè¿™å¾ˆæœ‰å¯èƒ½ä¼šæ‹–æ…¢åº”ç”¨ä¸­ä¸¥é‡ä¾èµ–å¹¶è¡Œæµçš„å…¶å®ƒéƒ¨åˆ†ä»£ç çš„æ€§èƒ½ã€‚</p> <aside class="md-source-file"> <span class="md-source-file__fact"> <span class="md-icon" title="æœ€åæ›´æ–°"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="2026å¹´1æœˆ22æ—¥ 20:21:58 UTC">2026å¹´1æœˆ22æ—¥ 20:21:58</span> </span> <span class="md-source-file__fact"> <span class="md-icon" title="åˆ›å»ºæ—¥æœŸ"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="2022å¹´2æœˆ28æ—¥ 13:47:50 UTC">2022å¹´2æœˆ28æ—¥ 13:47:50</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type="button" class="md-top md-icon" data-md-component="top" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> å›åˆ°é¡µé¢é¡¶éƒ¨ </button> </main> <footer class="md-footer"> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-copyright"> Made with <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener"> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.top", "navigation.indexes", "navigation.tracking", "navigation.instant", "navigation.path", "content.tabs.link", "content.code.copy"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script> <script src="../assets/javascripts/bundle.79ae519e.min.js"></script> <script src="../_javascripts/auto_title.js"></script>  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>