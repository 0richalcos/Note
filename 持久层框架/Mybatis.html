
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://0richalcos.github.io/Note/%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/Mybatis.html">
      
      
        <link rel="prev" href="MyBatis-Plus.html">
      
      
        <link rel="next" href="../%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/SSO.html">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Mybatis - Èöè‰æøËÆ∞ËÆ∞</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../_stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1" class="md-skip">
          Ë∑≥ËΩ¨Ëá≥
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="È°µÁúâ">
    <a href="../index.html" title="Èöè‰æøËÆ∞ËÆ∞" class="md-header__button md-logo" aria-label="Èöè‰æøËÆ∞ËÆ∞" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Èöè‰æøËÆ∞ËÆ∞
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Mybatis
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="ÂàáÊç¢Ê∑±Ëâ≤Ê®°Âºè"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="ÂàáÊç¢Ê∑±Ëâ≤Ê®°Âºè" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="ÂàáÊç¢‰∫ÆËâ≤Ê®°Âºè"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="ÂàáÊç¢‰∫ÆËâ≤Ê®°Âºè" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="ÊêúÁ¥¢" placeholder="ÊêúÁ¥¢" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Êü•Êâæ">
        
        <button type="reset" class="md-search__icon md-icon" title="Ê∏ÖÁ©∫ÂΩìÂâçÂÜÖÂÆπ" aria-label="Ê∏ÖÁ©∫ÂΩìÂâçÂÜÖÂÆπ" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Ê≠£Âú®ÂàùÂßãÂåñÊêúÁ¥¢ÂºïÊìé
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/0richalcos/Note" title="ÂâçÂæÄ‰ªìÂ∫ì" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="ÂØºËà™Ê†è" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Èöè‰æøËÆ∞ËÆ∞" class="md-nav__button md-logo" aria-label="Èöè‰æøËÆ∞ËÆ∞" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Èöè‰æøËÆ∞ËÆ∞
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/0richalcos/Note" title="ÂâçÂæÄ‰ªìÂ∫ì" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    üè† È¶ñÈ°µ
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ‚ô®Ô∏è Java
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    ‚ô®Ô∏è Java
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java/Java.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Java
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java/Java8.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Java 8
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java/JavaBasics.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Java Âü∫Á°Ä
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java/JavaCollection.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Java ÈõÜÂêà
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java/JavaObject.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Java Á±ªÂíåÂØπË±°
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java/JavaWeb.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JavaWeb
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java/%E6%B5%8B%E8%AF%95%E5%BA%8F%E5%8F%B7.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ÊµãËØïÂ∫èÂè∑
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üßÆ Êï∞ÊçÆÁªìÊûÑÂèäÁÆóÊ≥ï
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    üßÆ Êï∞ÊçÆÁªìÊûÑÂèäÁÆóÊ≥ï
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%AE%97%E6%B3%95/Algorithm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Algorithm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%AE%97%E6%B3%95/DesignPattern.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DesignPattern
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üçÉ Spring
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    üçÉ Spring
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Spring/Spring.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Spring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Spring/SpringBoot.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SpringBoot
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Spring/SpringCloud.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SpringCloud
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Spring/SpringMVC.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SpringMVC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üíæ ÊåÅ‰πÖÂ±ÇÊ°ÜÊû∂
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    üíæ ÊåÅ‰πÖÂ±ÇÊ°ÜÊû∂
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="MyBatis-Plus.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MyBatis-Plus
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Mybatis
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="Mybatis.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Mybatis
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="ÁõÆÂΩï">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ÁõÆÂΩï
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      
        1„ÄÅÂÖ•Èó®
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1„ÄÅÂÖ•Èó®">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-mybatis" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1„ÄÅ‰ªÄ‰πàÊòØ MyBatisÔºü
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2„ÄÅÂÆâË£Ö
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13sqlsessionfactory" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.3„ÄÅSqlSessionFactory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14sqlsession" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.4„ÄÅSqlSession
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15-sql" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.5„ÄÅÊé¢Á©∂Â∑≤Êò†Â∞ÑÁöÑ SQL ËØ≠Âè•
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16scope" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.6„ÄÅ‰ΩúÁî®ÂüüÔºàScopeÔºâÂíåÁîüÂëΩÂë®Êúü
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2xml" class="md-nav__link">
    <span class="md-ellipsis">
      
        2„ÄÅXMLÈÖçÁΩÆ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2„ÄÅXMLÈÖçÁΩÆ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21properties" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1„ÄÅÂ±ûÊÄßÔºàpropertiesÔºâ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2„ÄÅËÆæÁΩÆÔºàsettingsÔºâ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23typealiases" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3„ÄÅÁ±ªÂûãÂà´ÂêçÔºàtypeAliasesÔºâ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24environments" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4„ÄÅÁéØÂ¢ÉÈÖçÁΩÆÔºàenvironmentsÔºâ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25mappers" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.5„ÄÅÊò†Â∞ÑÂô®ÔºàmappersÔºâ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3xml" class="md-nav__link">
    <span class="md-ellipsis">
      
        3„ÄÅXMLÊò†Â∞ÑÊñá‰ª∂
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3„ÄÅXMLÊò†Â∞ÑÊñá‰ª∂">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31select" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1„ÄÅselect
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32insertupdatedelete" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2„ÄÅinsert„ÄÅupdate„ÄÅdelete
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3„ÄÅÂèÇÊï∞
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4„ÄÅÁªìÊûúÊò†Â∞Ñ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.4„ÄÅÁªìÊûúÊò†Â∞Ñ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#341" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4.1„ÄÅÈ´òÁ∫ßÁªìÊûúÊò†Â∞Ñ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#342id-result" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4.2„ÄÅid &amp; result
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#343" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4.3„ÄÅÊûÑÈÄ†ÊñπÊ≥ï
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#344" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4.4„ÄÅÂÖ≥ËÅî
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.4.4„ÄÅÂÖ≥ËÅî">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#select" class="md-nav__link">
    <span class="md-ellipsis">
      
        ÂµåÂ•ó Select Êü•ËØ¢
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        ÂµåÂ•óÁªìÊûúÊò†Â∞Ñ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resultset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Â§öÁªìÊûúÈõÜÔºàResultSetÔºâ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#345" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4.5„ÄÅÈõÜÂêà
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.4.5„ÄÅÈõÜÂêà">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#select_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        ÂµåÂ•ó Select Êü•ËØ¢
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        ÂµåÂ•óÁªìÊûúÊò†Â∞Ñ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resultset_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Â§öÁªìÊûúÈõÜÔºàResultSetÔºâ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#346" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4.6„ÄÅÈâ¥Âà´Âô®
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.5„ÄÅËá™Âä®Êò†Â∞Ñ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.6„ÄÅÁºìÂ≠ò
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4sql" class="md-nav__link">
    <span class="md-ellipsis">
      
        4„ÄÅÂä®ÊÄÅSQL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4„ÄÅÂä®ÊÄÅSQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41if" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1„ÄÅIf
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42choosewhenotherwise" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2„ÄÅchoose„ÄÅwhen„ÄÅotherwise
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43trimwhereset" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3„ÄÅtrim„ÄÅwhere„ÄÅset
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44foreach" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.4„ÄÅforeach
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45ognl" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.5„ÄÅOGNL Ë°®ËææÂºè
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5java-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        5„ÄÅJava API
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5„ÄÅJava API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51sqlsessionfactory" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1„ÄÅSqlSessionFactory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52sqlsession" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2„ÄÅSqlSession
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3„ÄÅËØ≠Âè•ÊâßË°åÊñπÊ≥ï
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.4„ÄÅ‰ΩøÁî®Êò†Â∞ÑÂô®
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6sql" class="md-nav__link">
    <span class="md-ellipsis">
      
        6„ÄÅSQL ËØ≠Âè•ÊûÑÂª∫Âô®
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6„ÄÅSQL ËØ≠Âè•ÊûÑÂª∫Âô®">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sql" class="md-nav__link">
    <span class="md-ellipsis">
      
        SQL Á±ª
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    <span class="md-ellipsis">
      
        7„ÄÅÊó•Âøó
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8springboot" class="md-nav__link">
    <span class="md-ellipsis">
      
        8„ÄÅSpringBoot ÈõÜÊàê
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8„ÄÅSpringBoot ÈõÜÊàê">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1„ÄÅÊ≥®Ëß£Áâà
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82xml" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.2„ÄÅXML ÈÖçÁΩÆÁâà
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9" class="md-nav__link">
    <span class="md-ellipsis">
      
        9„ÄÅÂºÇÂ∏∏
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9„ÄÅÂºÇÂ∏∏">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91netsfjsqlparserparserparseexception" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1„ÄÅnet.sf.jsqlparser.parser.ParseException
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üîê ËÆ§ËØÅ‰∏éÊéàÊùÉ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    üîê ËÆ§ËØÅ‰∏éÊéàÊùÉ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/SSO.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SSO
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/Sa-Token.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sa-Token
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/Shiro.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shiro
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üåê ÂâçÁ´Ø
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    üåê ÂâçÁ´Ø
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/CSS.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CSS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/JavaScript.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JavaScript
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/Vue.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vue
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/jQuery.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    jQuery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/Thymeleaf.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Thymeleaf
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_6" >
        
          
          <label class="md-nav__link" for="__nav_7_6" id="__nav_7_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ÁªÑ‰ª∂Â∫ì
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    ÁªÑ‰ª∂Â∫ì
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/AntV-X6.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AntV-X6
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/ApacheECharts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ApacheECharts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/Axios.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Axios
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/BootstrapTable.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    BootstrapTable
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/DHTMLXGantt.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DHTMLXGantt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/Element.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Element
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/FullCalendar.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FullCalendar
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%BA%93/X-editable.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    X-editable
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üìä Êï∞ÊçÆÂ∫ì
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    üìä Êï∞ÊçÆÂ∫ì
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/Dameng.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dameng
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MySQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/MySQLQuery.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MySQLQuery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/OceanBase.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OceanBase
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/Oracle.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Oracle
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/Redis.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/Vastbase.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vastbase
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/Elasticsearch.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Elasticsearch
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üìá ÂàÜÂ∏ÉÂºèÂ≠òÂÇ®
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    üìá ÂàÜÂ∏ÉÂºèÂ≠òÂÇ®
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8/FastDFS.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FastDFS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8/MinIO.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MinIO
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üõ∞Ô∏è ÁΩëÁªúÈÄö‰ø°
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    üõ∞Ô∏è ÁΩëÁªúÈÄö‰ø°
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/Encryption.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Encryption
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/HTTP.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HTTP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/OpenVPN.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenVPN
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/VNC.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VNC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/WebSocket.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    WebSocket
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/frp.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    frp
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üóÉÔ∏è Êñá‰ª∂Â§ÑÁêÜ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    üóÉÔ∏è Êñá‰ª∂Â§ÑÁêÜ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_1" >
        
          
          <label class="md-nav__link" for="__nav_12_1" id="__nav_12_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Office
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Office
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/ApachePOI.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ApachePOI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/EasyExcel.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    EasyExcel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/OnlyOffice.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OnlyOffice
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/Poi-tl.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Poi-tl
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/Office/Spire.OfficeForJava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Spire.OfficeForJava
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/PDF/ApachePDFBox.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ApachePDFBox
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/XML/XMLParse.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    XMLParse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/ZIP/Zip4j.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Zip4j
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/XXL-JOB.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    XXL-JOB
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üßë‚Äçüîß ËøêÁª¥
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    üßë‚Äçüîß ËøêÁª¥
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E7%BB%B4/Docker.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E7%BB%B4/Linux.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E7%BB%B4/NSSM.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NSSM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E7%BB%B4/Nginx.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nginx
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E7%BB%B4/Tomcat.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tomcat
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E7%BB%B4/TongWeb.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TongWeb
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E7%BB%B4/WSL.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    WSL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E7%BB%B4/WebLogic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    WebLogic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15" >
        
          
          <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üõ†Ô∏è ÂºÄÂèëÂ∑•ÂÖ∑
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    üõ†Ô∏è ÂºÄÂèëÂ∑•ÂÖ∑
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Git.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Git
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Maven.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Maven
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Node.js.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Node.js
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Swagger.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Swagger
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16" >
        
          
          <label class="md-nav__link" for="__nav_16" id="__nav_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üëª ÂÖ∂‰ªñ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    üëª ÂÖ∂‰ªñ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%85%B6%E4%BB%96/Settings.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%85%B6%E4%BB%96/Solutions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Solutions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%85%B6%E4%BB%96/Weasel.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Weasel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="ÁõÆÂΩï">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ÁõÆÂΩï
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      
        1„ÄÅÂÖ•Èó®
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1„ÄÅÂÖ•Èó®">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-mybatis" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1„ÄÅ‰ªÄ‰πàÊòØ MyBatisÔºü
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2„ÄÅÂÆâË£Ö
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13sqlsessionfactory" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.3„ÄÅSqlSessionFactory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14sqlsession" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.4„ÄÅSqlSession
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15-sql" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.5„ÄÅÊé¢Á©∂Â∑≤Êò†Â∞ÑÁöÑ SQL ËØ≠Âè•
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16scope" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.6„ÄÅ‰ΩúÁî®ÂüüÔºàScopeÔºâÂíåÁîüÂëΩÂë®Êúü
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2xml" class="md-nav__link">
    <span class="md-ellipsis">
      
        2„ÄÅXMLÈÖçÁΩÆ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2„ÄÅXMLÈÖçÁΩÆ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21properties" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1„ÄÅÂ±ûÊÄßÔºàpropertiesÔºâ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2„ÄÅËÆæÁΩÆÔºàsettingsÔºâ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23typealiases" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3„ÄÅÁ±ªÂûãÂà´ÂêçÔºàtypeAliasesÔºâ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24environments" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4„ÄÅÁéØÂ¢ÉÈÖçÁΩÆÔºàenvironmentsÔºâ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25mappers" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.5„ÄÅÊò†Â∞ÑÂô®ÔºàmappersÔºâ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3xml" class="md-nav__link">
    <span class="md-ellipsis">
      
        3„ÄÅXMLÊò†Â∞ÑÊñá‰ª∂
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3„ÄÅXMLÊò†Â∞ÑÊñá‰ª∂">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31select" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1„ÄÅselect
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32insertupdatedelete" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2„ÄÅinsert„ÄÅupdate„ÄÅdelete
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3„ÄÅÂèÇÊï∞
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4„ÄÅÁªìÊûúÊò†Â∞Ñ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.4„ÄÅÁªìÊûúÊò†Â∞Ñ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#341" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4.1„ÄÅÈ´òÁ∫ßÁªìÊûúÊò†Â∞Ñ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#342id-result" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4.2„ÄÅid &amp; result
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#343" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4.3„ÄÅÊûÑÈÄ†ÊñπÊ≥ï
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#344" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4.4„ÄÅÂÖ≥ËÅî
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.4.4„ÄÅÂÖ≥ËÅî">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#select" class="md-nav__link">
    <span class="md-ellipsis">
      
        ÂµåÂ•ó Select Êü•ËØ¢
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        ÂµåÂ•óÁªìÊûúÊò†Â∞Ñ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resultset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Â§öÁªìÊûúÈõÜÔºàResultSetÔºâ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#345" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4.5„ÄÅÈõÜÂêà
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.4.5„ÄÅÈõÜÂêà">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#select_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        ÂµåÂ•ó Select Êü•ËØ¢
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        ÂµåÂ•óÁªìÊûúÊò†Â∞Ñ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resultset_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Â§öÁªìÊûúÈõÜÔºàResultSetÔºâ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#346" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4.6„ÄÅÈâ¥Âà´Âô®
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.5„ÄÅËá™Âä®Êò†Â∞Ñ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.6„ÄÅÁºìÂ≠ò
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4sql" class="md-nav__link">
    <span class="md-ellipsis">
      
        4„ÄÅÂä®ÊÄÅSQL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4„ÄÅÂä®ÊÄÅSQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41if" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1„ÄÅIf
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42choosewhenotherwise" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2„ÄÅchoose„ÄÅwhen„ÄÅotherwise
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43trimwhereset" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3„ÄÅtrim„ÄÅwhere„ÄÅset
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44foreach" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.4„ÄÅforeach
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45ognl" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.5„ÄÅOGNL Ë°®ËææÂºè
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5java-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        5„ÄÅJava API
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5„ÄÅJava API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51sqlsessionfactory" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1„ÄÅSqlSessionFactory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52sqlsession" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2„ÄÅSqlSession
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3„ÄÅËØ≠Âè•ÊâßË°åÊñπÊ≥ï
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.4„ÄÅ‰ΩøÁî®Êò†Â∞ÑÂô®
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6sql" class="md-nav__link">
    <span class="md-ellipsis">
      
        6„ÄÅSQL ËØ≠Âè•ÊûÑÂª∫Âô®
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6„ÄÅSQL ËØ≠Âè•ÊûÑÂª∫Âô®">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sql" class="md-nav__link">
    <span class="md-ellipsis">
      
        SQL Á±ª
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    <span class="md-ellipsis">
      
        7„ÄÅÊó•Âøó
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8springboot" class="md-nav__link">
    <span class="md-ellipsis">
      
        8„ÄÅSpringBoot ÈõÜÊàê
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8„ÄÅSpringBoot ÈõÜÊàê">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1„ÄÅÊ≥®Ëß£Áâà
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82xml" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.2„ÄÅXML ÈÖçÁΩÆÁâà
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9" class="md-nav__link">
    <span class="md-ellipsis">
      
        9„ÄÅÂºÇÂ∏∏
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9„ÄÅÂºÇÂ∏∏">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91netsfjsqlparserparserparseexception" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1„ÄÅnet.sf.jsqlparser.parser.ParseException
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="mybatis">Mybatis<a class="headerlink" href="#mybatis" title="Permanent link">&para;</a></h1>
<h2 id="1">1„ÄÅÂÖ•Èó®<a class="headerlink" href="#1" title="Permanent link">&para;</a></h2>
<h3 id="11-mybatis">1.1„ÄÅ‰ªÄ‰πàÊòØ MyBatisÔºü<a class="headerlink" href="#11-mybatis" title="Permanent link">&para;</a></h3>
<p>MyBatis ÊòØ‰∏ÄÊ¨æ‰ºòÁßÄÁöÑÊåÅ‰πÖÂ±ÇÊ°ÜÊû∂ÔºåÂÆÉÊîØÊåÅËá™ÂÆö‰πâ SQL„ÄÅÂ≠òÂÇ®ËøáÁ®ã‰ª•ÂèäÈ´òÁ∫ßÊò†Â∞Ñ„ÄÇMyBatis ÂÖçÈô§‰∫ÜÂá†‰πéÊâÄÊúâÁöÑ JDBC ‰ª£Á†Å‰ª•ÂèäËÆæÁΩÆÂèÇÊï∞ÂíåËé∑ÂèñÁªìÊûúÈõÜÁöÑÂ∑•‰Ωú„ÄÇMyBatis ÂèØ‰ª•ÈÄöËøáÁÆÄÂçïÁöÑ XML ÊàñÊ≥®Ëß£Êù•ÈÖçÁΩÆÂíåÊò†Â∞ÑÂéüÂßãÁ±ªÂûã„ÄÅÊé•Âè£Âíå Java POJOÔºàPlain Old Java ObjectsÔºåÊôÆÈÄöËÄÅÂºè Java ÂØπË±°Ôºâ‰∏∫Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑËÆ∞ÂΩï„ÄÇ</p>
<h3 id="12">1.2„ÄÅÂÆâË£Ö<a class="headerlink" href="#12" title="Permanent link">&para;</a></h3>
<p>Ë¶Å‰ΩøÁî® MyBatisÔºå Âè™ÈúÄÂ∞Ü <a href="https://github.com/mybatis/mybatis-3/releases">mybatis-x.x.x.jar</a> Êñá‰ª∂ÁΩÆ‰∫éÁ±ªË∑ØÂæÑÔºàclasspathÔºâ‰∏≠Âç≥ÂèØ„ÄÇ</p>
<p>Â¶ÇÊûú‰ΩøÁî® Maven Êù•ÊûÑÂª∫È°πÁõÆÔºåÂàôÈúÄÂ∞Ü‰∏ãÈù¢ÁöÑ‰æùËµñ‰ª£Á†ÅÁΩÆ‰∫é pom.xml Êñá‰ª∂‰∏≠Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
<span class="w">  </span><span class="nt">&lt;groupId&gt;</span>org.mybatis<span class="nt">&lt;/groupId&gt;</span>
<span class="w">  </span><span class="nt">&lt;artifactId&gt;</span>mybatis<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">  </span><span class="nt">&lt;version&gt;</span>x.x.x<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<h3 id="13sqlsessionfactory">1.3„ÄÅSqlSessionFactory<a class="headerlink" href="#13sqlsessionfactory" title="Permanent link">&para;</a></h3>
<p>ÊØè‰∏™Âü∫‰∫é MyBatis ÁöÑÂ∫îÁî®ÈÉΩÊòØ‰ª•‰∏Ä‰∏™ SqlSessionFactory ÁöÑÂÆû‰æã‰∏∫Ê†∏ÂøÉÁöÑ„ÄÇSqlSessionFactory ÁöÑÂÆû‰æãÂèØ‰ª•ÈÄöËøá SqlSessionFactoryBuilder Ëé∑Âæó„ÄÇËÄå SqlSessionFactoryBuilder ÂàôÂèØ‰ª•‰ªé XML ÈÖçÁΩÆÊñá‰ª∂Êàñ‰∏Ä‰∏™È¢ÑÂÖàÈÖçÁΩÆÁöÑ Configuration ÂÆû‰æãÊù•ÊûÑÂª∫Âá∫ SqlSessionFactory ÂÆû‰æã„ÄÇ</p>
<p><strong>‰ªé XML ‰∏≠ÊûÑÂª∫ SqlSessionFactory</strong></p>
<p>‰ªé XML Êñá‰ª∂‰∏≠ÊûÑÂª∫ SqlSessionFactory ÁöÑÂÆû‰æãÈùûÂ∏∏ÁÆÄÂçïÔºåÂª∫ËÆÆ‰ΩøÁî®Á±ªË∑ØÂæÑ‰∏ãÁöÑËµÑÊ∫êÊñá‰ª∂ËøõË°åÈÖçÁΩÆ„ÄÇ ‰ΩÜ‰πüÂèØ‰ª•‰ΩøÁî®‰ªªÊÑèÁöÑËæìÂÖ•ÊµÅÔºàInputStreamÔºâÂÆû‰æãÔºåÊØîÂ¶ÇÁî®Êñá‰ª∂Ë∑ØÂæÑÂ≠óÁ¨¶‰∏≤Êàñ <code>file:// URL</code> ÊûÑÈÄ†ÁöÑËæìÂÖ•ÊµÅ„ÄÇMyBatis ÂåÖÂê´‰∏Ä‰∏™ÂêçÂè´ Resources ÁöÑÂ∑•ÂÖ∑Á±ªÔºåÂÆÉÂåÖÂê´‰∏Ä‰∫õÂÆûÁî®ÊñπÊ≥ïÔºå‰ΩøÂæó‰ªéÁ±ªË∑ØÂæÑÊàñÂÖ∂ÂÆÉ‰ΩçÁΩÆÂä†ËΩΩËµÑÊ∫êÊñá‰ª∂Êõ¥Âä†ÂÆπÊòì„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="n">String</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;org/mybatis/example/mybatis-config.xml&quot;</span><span class="p">;</span>
<span class="n">InputStream</span><span class="w"> </span><span class="n">inputStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resources</span><span class="p">.</span><span class="na">getResourceAsStream</span><span class="p">(</span><span class="n">resource</span><span class="p">);</span>
<span class="n">SqlSessionFactory</span><span class="w"> </span><span class="n">sqlSessionFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlSessionFactoryBuilder</span><span class="p">().</span><span class="na">build</span><span class="p">(</span><span class="n">inputStream</span><span class="p">);</span>
</code></pre></div>
<p>XML ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂåÖÂê´‰∫ÜÂØπ MyBatis Á≥ªÁªüÁöÑÊ†∏ÂøÉËÆæÁΩÆÔºåÂåÖÊã¨Ëé∑ÂèñÊï∞ÊçÆÂ∫ìËøûÊé•ÂÆû‰æãÁöÑÊï∞ÊçÆÊ∫êÔºàDataSourceÔºâ‰ª•ÂèäÂÜ≥ÂÆö‰∫ãÂä°‰ΩúÁî®ÂüüÂíåÊéßÂà∂ÊñπÂºèÁöÑ‰∫ãÂä°ÁÆ°ÁêÜÂô®ÔºàTransactionManagerÔºâ„ÄÇ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÁ§∫‰æãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE configuration</span>
<span class="cp">  PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>
<span class="cp">  &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span>
<span class="nt">&lt;configuration&gt;</span>
<span class="w">  </span><span class="nt">&lt;environments</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;development&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;environment</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;development&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;transactionManager</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;JDBC&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;dataSource</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;POOLED&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;driver&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${driver}&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;url&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${url}&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${username}&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;password&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${password}&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;/dataSource&gt;</span>
<span class="w">    </span><span class="nt">&lt;/environment&gt;</span>
<span class="w">  </span><span class="nt">&lt;/environments&gt;</span>
<span class="w">  </span><span class="nt">&lt;mappers&gt;</span>
<span class="w">    </span><span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;org/mybatis/example/BlogMapper.xml&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/mappers&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div>
<p>ÂΩìÁÑ∂ÔºåËøòÊúâÂæàÂ§öÂèØ‰ª•Âú® XML Êñá‰ª∂‰∏≠ÈÖçÁΩÆÁöÑÈÄâÈ°πÔºå‰∏äÈù¢ÁöÑÁ§∫‰æã‰ªÖÁΩóÂàó‰∫ÜÊúÄÂÖ≥ÈîÆÁöÑÈÉ®ÂàÜ„ÄÇ Ê≥®ÊÑè XML Â§¥ÈÉ®ÁöÑÂ£∞ÊòéÔºåÂÆÉÁî®Êù•È™åËØÅ XML ÊñáÊ°£ÁöÑÊ≠£Á°ÆÊÄß„ÄÇenvironment ÂÖÉÁ¥†‰Ωì‰∏≠ÂåÖÂê´‰∫Ü‰∫ãÂä°ÁÆ°ÁêÜÂíåËøûÊé•Ê±†ÁöÑÈÖçÁΩÆ„ÄÇmappers ÂÖÉÁ¥†ÂàôÂåÖÂê´‰∫Ü‰∏ÄÁªÑÊò†Â∞ÑÂô®ÔºàmapperÔºâÔºåËøô‰∫õÊò†Â∞ÑÂô®ÁöÑ XML Êò†Â∞ÑÊñá‰ª∂ÂåÖÂê´‰∫Ü SQL ‰ª£Á†ÅÂíåÊò†Â∞ÑÂÆö‰πâ‰ø°ÊÅØ„ÄÇ</p>
<p><strong>‰∏ç‰ΩøÁî® XML ÊûÑÂª∫ SqlSessionFactory</strong></p>
<p>Â¶ÇÊûúÊÉ≥Áõ¥Êé•‰ªé Java ‰ª£Á†ÅËÄå‰∏çÊòØ XML Êñá‰ª∂‰∏≠ÂàõÂª∫ÈÖçÁΩÆÔºåÊàñËÄÖÊÉ≥Ë¶ÅÂàõÂª∫‰Ω†Ëá™Â∑±ÁöÑÈÖçÁΩÆÂª∫ÈÄ†Âô®ÔºåMyBatis ‰πüÊèê‰æõ‰∫ÜÂÆåÊï¥ÁöÑÈÖçÁΩÆÁ±ªÔºåÊèê‰æõ‰∫ÜÊâÄÊúâ‰∏é XML Êñá‰ª∂Á≠â‰ª∑ÁöÑÈÖçÁΩÆÈ°π„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="n">Properties</span><span class="w"> </span><span class="n">properties</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Properties</span><span class="p">();</span>
<span class="n">properties</span><span class="p">.</span><span class="na">setProperty</span><span class="p">(</span><span class="s">&quot;driver&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="p">);</span>
<span class="n">properties</span><span class="p">.</span><span class="na">setProperty</span><span class="p">(</span><span class="s">&quot;url&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;jdbc:mysql://127.0.0.1:3306/mybatis&quot;</span><span class="p">);</span>
<span class="n">properties</span><span class="p">.</span><span class="na">setProperty</span><span class="p">(</span><span class="s">&quot;username&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;root&quot;</span><span class="p">);</span>
<span class="n">properties</span><span class="p">.</span><span class="na">setProperty</span><span class="p">(</span><span class="s">&quot;password&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;root&quot;</span><span class="p">);</span>
<span class="n">PooledDataSourceFactory</span><span class="w"> </span><span class="n">pooledDataSourceFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PooledDataSourceFactory</span><span class="p">();</span>
<span class="n">pooledDataSourceFactory</span><span class="p">.</span><span class="na">setProperties</span><span class="p">(</span><span class="n">properties</span><span class="p">);</span>
<span class="n">DataSource</span><span class="w">¬†</span><span class="n">dataSource</span><span class="w">¬†</span><span class="o">=</span><span class="w">¬†</span><span class="n">pooledDataSourceFactory</span><span class="p">.</span><span class="na">getDataSource</span><span class="p">();</span>
<span class="n">TransactionFactory</span><span class="w"> </span><span class="n">transactionFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JdbcTransactionFactory</span><span class="p">();</span>
<span class="n">Environment</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Environment</span><span class="p">(</span><span class="s">&quot;development&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">transactionFactory</span><span class="p">,</span><span class="w"> </span><span class="n">dataSource</span><span class="p">);</span>
<span class="n">Configuration</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Configuration</span><span class="p">(</span><span class="n">environment</span><span class="p">);</span>
<span class="n">configuration</span><span class="p">.</span><span class="na">addMapper</span><span class="p">(</span><span class="n">BlogMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="n">SqlSessionFactory</span><span class="w"> </span><span class="n">sqlSessionFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlSessionFactoryBuilder</span><span class="p">().</span><span class="na">build</span><span class="p">(</span><span class="n">configuration</span><span class="p">);</span>
</code></pre></div>
<p>Ê≥®ÊÑèËØ•‰æã‰∏≠Ôºåconfiguration Ê∑ªÂä†‰∫Ü‰∏Ä‰∏™Êò†Â∞ÑÂô®Á±ªÔºàmapper classÔºâ„ÄÇÊò†Â∞ÑÂô®Á±ªÊòØ Java Á±ªÔºåÂÆÉ‰ª¨ÂåÖÂê´ SQL Êò†Â∞ÑÊ≥®Ëß£‰ªéËÄåÈÅøÂÖç‰æùËµñ XML Êñá‰ª∂„ÄÇ‰∏çËøáÔºåÁî±‰∫é Java Ê≥®Ëß£ÁöÑ‰∏Ä‰∫õÈôêÂà∂‰ª•ÂèäÊüê‰∫õ MyBatis Êò†Â∞ÑÁöÑÂ§çÊùÇÊÄßÔºåË¶Å‰ΩøÁî®Â§ßÂ§öÊï∞È´òÁ∫ßÊò†Â∞ÑÔºàÊØîÂ¶ÇÔºöÂµåÂ•óËÅîÂêàÊò†Â∞ÑÔºâÔºå‰ªçÁÑ∂ÈúÄË¶Å‰ΩøÁî® XML ÈÖçÁΩÆ„ÄÇÊúâÈâ¥‰∫éÊ≠§ÔºåÂ¶ÇÊûúÂ≠òÂú®‰∏Ä‰∏™ÂêåÂêç XML ÈÖçÁΩÆÊñá‰ª∂ÔºåMyBatis ‰ºöËá™Âä®Êü•ÊâæÂπ∂Âä†ËΩΩÂÆÉÔºàÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÂü∫‰∫éÁ±ªË∑ØÂæÑÂíå BlogMapper.class ÁöÑÁ±ªÂêçÔºå‰ºöÂä†ËΩΩ BlogMapper.xmlÔºâ„ÄÇ</p>
<h3 id="14sqlsession">1.4„ÄÅSqlSession<a class="headerlink" href="#14sqlsession" title="Permanent link">&para;</a></h3>
<p>Êó¢ÁÑ∂Êúâ‰∫Ü SqlSessionFactoryÔºåÈ°æÂêçÊÄù‰πâÔºåÊàë‰ª¨ÂèØ‰ª•‰ªé‰∏≠Ëé∑Âæó SqlSession ÁöÑÂÆû‰æã„ÄÇSqlSession Êèê‰æõ‰∫ÜÂú®Êï∞ÊçÆÂ∫ìÊâßË°å SQL ÂëΩ‰ª§ÊâÄÈúÄÁöÑÊâÄÊúâÊñπÊ≥ï„ÄÇ‰Ω†ÂèØ‰ª•ÈÄöËøá SqlSession ÂÆû‰æãÊù•Áõ¥Êé•ÊâßË°åÂ∑≤Êò†Â∞ÑÁöÑ SQL ËØ≠Âè•„ÄÇ‰æãÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">SqlSession</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSessionFactory</span><span class="p">.</span><span class="na">openSession</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Blog</span><span class="w"> </span><span class="n">blog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Blog</span><span class="p">)</span><span class="w"> </span><span class="n">session</span><span class="p">.</span><span class="na">selectOne</span><span class="p">(</span><span class="s">&quot;org.mybatis.example.BlogMapper.selectBlog&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">101</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>ËØöÁÑ∂ÔºåËøôÁßçÊñπÂºèËÉΩÂ§üÊ≠£Â∏∏Â∑•‰Ωú„ÄÇ‰ΩÜÁé∞Âú®Êúâ‰∫Ü‰∏ÄÁßçÊõ¥ÁÆÄÊ¥ÅÁöÑÊñπÂºè‚Äî‚Äî‰ΩøÁî®ÂíåÊåáÂÆöËØ≠Âè•ÁöÑÂèÇÊï∞ÂíåËøîÂõûÂÄºÁõ∏ÂåπÈÖçÁöÑÊé•Âè£ÔºàÊØîÂ¶Ç BlogMapper.classÔºâÔºåÁé∞Âú®‰Ω†ÁöÑ‰ª£Á†Å‰∏ç‰ªÖÊõ¥Ê∏ÖÊô∞ÔºåÊõ¥Âä†Á±ªÂûãÂÆâÂÖ®ÔºåËøò‰∏çÁî®ÊãÖÂøÉÂèØËÉΩÂá∫ÈîôÁöÑÂ≠óÁ¨¶‰∏≤Â≠óÈù¢ÂÄº‰ª•ÂèäÂº∫Âà∂Á±ªÂûãËΩ¨Êç¢„ÄÇ</p>
<p>‰æãÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">SqlSession</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSessionFactory</span><span class="p">.</span><span class="na">openSession</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">BlogMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">session</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">BlogMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">  </span><span class="n">Blog</span><span class="w"> </span><span class="n">blog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">selectBlog</span><span class="p">(</span><span class="mi">101</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Áé∞Âú®Êàë‰ª¨Êù•Êé¢Á©∂‰∏Ä‰∏ãËøôÊÆµ‰ª£Á†ÅÁ©∂Á´üÂÅö‰∫Ü‰∫õ‰ªÄ‰πà„ÄÇ</p>
<h3 id="15-sql">1.5„ÄÅÊé¢Á©∂Â∑≤Êò†Â∞ÑÁöÑ SQL ËØ≠Âè•<a class="headerlink" href="#15-sql" title="Permanent link">&para;</a></h3>
<p>Âú®‰∏äÈù¢ÊèêÂà∞ÁöÑ‰æãÂ≠ê‰∏≠Ôºå‰∏Ä‰∏™ËØ≠Âè•Êó¢ÂèØ‰ª•ÈÄöËøá XML ÂÆö‰πâÔºå‰πüÂèØ‰ª•ÈÄöËøáÊ≥®Ëß£ÂÆö‰πâ„ÄÇÊàë‰ª¨ÂÖàÁúãÁúã XML ÂÆö‰πâËØ≠Âè•ÁöÑÊñπÂºèÔºå‰∫ãÂÆû‰∏ä MyBatis Êèê‰æõÁöÑÊâÄÊúâÁâπÊÄßÈÉΩÂèØ‰ª•Âà©Áî®Âü∫‰∫é XML ÁöÑÊò†Â∞ÑËØ≠Ë®ÄÊù•ÂÆûÁé∞ÔºåËøô‰ΩøÂæó MyBatis Âú®ËøáÂéªÁöÑÊï∞Âπ¥Èó¥Âæó‰ª•ÊµÅË°å„ÄÇËøôÈáåÁªôÂá∫‰∏Ä‰∏™Âü∫‰∫é XML Êò†Â∞ÑËØ≠Âè•ÁöÑÁ§∫‰æãÔºåÂÆÉÂ∫îËØ•ÂèØ‰ª•Êª°Ë∂≥‰∏ä‰∏™Á§∫‰æã‰∏≠ SqlSession ÁöÑË∞ÉÁî®„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper</span>
<span class="cp">  PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
<span class="cp">  &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>
<span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">namespace=</span><span class="s">&quot;org.mybatis.example.BlogMapper&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectBlog&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;Blog&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>select<span class="w"> </span>*<span class="w"> </span>from<span class="w"> </span>Blog<span class="w"> </span>where<span class="w"> </span>id<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="w">  </span><span class="nt">&lt;/select&gt;</span>
<span class="nt">&lt;/mapper&gt;</span>
</code></pre></div>
<p>Âú®‰∏Ä‰∏™ XML Êò†Â∞ÑÊñá‰ª∂‰∏≠ÔºåÂèØ‰ª•ÂÆö‰πâÊó†Êï∞‰∏™Êò†Â∞ÑËØ≠Âè•„ÄÇÊñáÊ°£ÁöÑÂÖ∂ÂÆÉÈÉ®ÂàÜÂæàÁõ¥ÁôΩÔºåÂÆπÊòìÁêÜËß£„ÄÇ ÂÆÉÂú®ÂëΩÂêçÁ©∫Èó¥ ‚Äúorg.mybatis.example.BlogMapper‚Äù ‰∏≠ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Âêç‰∏∫ ‚ÄúselectBlog‚Äù ÁöÑÊò†Â∞ÑËØ≠Âè•ÔºåËøôÊ†∑‰Ω†Â∞±ÂèØ‰ª•Áî®ÂÖ®ÈôêÂÆöÂêç ‚Äúorg.mybatis.example.BlogMapper.selectBlog‚Äù Êù•Ë∞ÉÁî®Êò†Â∞ÑËØ≠Âè•‰∫ÜÔºåÂ∞±ÂÉè‰∏äÈù¢‰æãÂ≠ê‰∏≠ÈÇ£Ê†∑Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="n">Blog</span><span class="w"> </span><span class="n">blog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Blog</span><span class="p">)</span><span class="w"> </span><span class="n">session</span><span class="p">.</span><span class="na">selectOne</span><span class="p">(</span><span class="s">&quot;org.mybatis.example.BlogMapper.selectBlog&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">101</span><span class="p">);</span>
</code></pre></div>
<p>ËøôÁßçÊñπÂºèÂíåÁî®ÂÖ®ÈôêÂÆöÂêçË∞ÉÁî® Java ÂØπË±°ÁöÑÊñπÊ≥ïÁ±ª‰ºº„ÄÇËøôÊ†∑ÔºåËØ•ÂëΩÂêçÂ∞±ÂèØ‰ª•Áõ¥Êé•Êò†Â∞ÑÂà∞Âú®ÂëΩÂêçÁ©∫Èó¥‰∏≠ÂêåÂêçÁöÑÊò†Â∞ÑÂô®Á±ªÔºåÂπ∂Â∞ÜÂ∑≤Êò†Â∞ÑÁöÑ select ËØ≠Âè•ÂåπÈÖçÂà∞ÂØπÂ∫îÂêçÁß∞„ÄÅÂèÇÊï∞ÂíåËøîÂõûÁ±ªÂûãÁöÑÊñπÊ≥ï„ÄÇÂõ†Ê≠§‰Ω†Â∞±ÂèØ‰ª•ÂÉè‰∏äÈù¢ÈÇ£Ê†∑Ôºå‰∏çË¥πÂêπÁÅ∞‰πãÂäõÂú∞Âú®ÂØπÂ∫îÁöÑÊò†Â∞ÑÂô®Êé•Âè£Ë∞ÉÁî®ÊñπÊ≥ïÔºåÂ∞±ÂÉè‰∏ãÈù¢ËøôÊ†∑Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="n">BlogMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">session</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">BlogMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="n">Blog</span><span class="w"> </span><span class="n">blog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">selectBlog</span><span class="p">(</span><span class="mi">101</span><span class="p">);</span>
</code></pre></div>
<p>Á¨¨‰∫åÁßçÊñπÊ≥ïÊúâÂæàÂ§ö‰ºòÂäøÔºåÈ¶ñÂÖàÂÆÉ‰∏ç‰æùËµñ‰∫éÂ≠óÁ¨¶‰∏≤Â≠óÈù¢ÂÄºÔºå‰ºöÊõ¥ÂÆâÂÖ®‰∏ÄÁÇπÔºõÂÖ∂Ê¨°ÔºåÂ¶ÇÊûú‰Ω†ÁöÑ IDE Êúâ‰ª£Á†ÅË°•ÂÖ®ÂäüËÉΩÔºåÈÇ£‰πà‰ª£Á†ÅË°•ÂÖ®ÂèØ‰ª•Â∏Æ‰Ω†Âø´ÈÄüÈÄâÊã©Âà∞Êò†Â∞ÑÂ•ΩÁöÑ SQL ËØ≠Âè•„ÄÇ</p>
<p><strong>ÂØπÂëΩÂêçÁ©∫Èó¥ÁöÑ‰∏ÄÁÇπË°•ÂÖÖ</strong>:</p>
<p>Âú®‰πãÂâçÁâàÊú¨ÁöÑ MyBatis ‰∏≠Ôºå<strong>ÂëΩÂêçÁ©∫Èó¥ÔºàNamespacesÔºâ</strong>ÁöÑ‰ΩúÁî®Âπ∂‰∏çÂ§ßÔºåÊòØÂèØÈÄâÁöÑ„ÄÇ ‰ΩÜÁé∞Âú®ÔºåÈöèÁùÄÂëΩÂêçÁ©∫Èó¥Ë∂äÂèëÈáçË¶ÅÔºå‰Ω†ÂøÖÈ°ªÊåáÂÆöÂëΩÂêçÁ©∫Èó¥„ÄÇ</p>
<p>ÂëΩÂêçÁ©∫Èó¥ÁöÑ‰ΩúÁî®Êúâ‰∏§‰∏™Ôºå‰∏Ä‰∏™ÊòØÂà©Áî®Êõ¥ÈïøÁöÑÂÖ®ÈôêÂÆöÂêçÊù•Â∞Ü‰∏çÂêåÁöÑËØ≠Âè•ÈöîÁ¶ªÂºÄÊù•ÔºåÂêåÊó∂‰πüÂÆûÁé∞‰∫Ü‰Ω†‰∏äÈù¢ËßÅÂà∞ÁöÑÊé•Âè£ÁªëÂÆö„ÄÇÂ∞±ÁÆó‰Ω†ËßâÂæóÊöÇÊó∂Áî®‰∏çÂà∞Êé•Âè£ÁªëÂÆöÔºå‰Ω†‰πüÂ∫îËØ•ÈÅµÂæ™ËøôÈáåÁöÑËßÑÂÆöÔºå‰ª•Èò≤Âì™Â§©‰Ω†ÊîπÂèò‰∫Ü‰∏ªÊÑè„ÄÇ ÈïøËøúÊù•ÁúãÔºåÂè™Ë¶ÅÂ∞ÜÂëΩÂêçÁ©∫Èó¥ÁΩÆ‰∫éÂêàÈÄÇÁöÑ Java ÂåÖÂëΩÂêçÁ©∫Èó¥‰πã‰∏≠Ôºå‰Ω†ÁöÑ‰ª£Á†Å‰ºöÂèòÂæóÊõ¥Âä†Êï¥Ê¥ÅÔºå‰πüÊúâÂà©‰∫é‰Ω†Êõ¥Êñπ‰æøÂú∞‰ΩøÁî® MyBatis„ÄÇ</p>
<p><strong>ÂëΩÂêçËß£ÊûêÔºö</strong>‰∏∫‰∫ÜÂáèÂ∞ëËæìÂÖ•ÈáèÔºåMyBatis ÂØπÊâÄÊúâÂÖ∑ÊúâÂêçÁß∞ÁöÑÈÖçÁΩÆÂÖÉÁ¥†ÔºàÂåÖÊã¨ËØ≠Âè•ÔºåÁªìÊûúÊò†Â∞ÑÔºåÁºìÂ≠òÁ≠âÔºâ‰ΩøÁî®‰∫ÜÂ¶Ç‰∏ãÁöÑÂëΩÂêçËß£ÊûêËßÑÂàô„ÄÇ</p>
<ul>
<li>ÂÖ®ÈôêÂÆöÂêçÔºàÊØîÂ¶Ç ‚Äúcom.mypackage.MyMapper.selectAllThingsÔºâÂ∞ÜË¢´Áõ¥Êé•Áî®‰∫éÊü•ÊâæÂèä‰ΩøÁî®„ÄÇ</li>
<li>Áü≠ÂêçÁß∞ÔºàÊØîÂ¶Ç ‚ÄúselectAllThings‚ÄùÔºâÂ¶ÇÊûúÂÖ®Â±ÄÂîØ‰∏Ä‰πüÂèØ‰ª•‰Ωú‰∏∫‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂºïÁî®„ÄÇ Â¶ÇÊûú‰∏çÂîØ‰∏ÄÔºåÊúâ‰∏§‰∏™Êàñ‰∏§‰∏™‰ª•‰∏äÁöÑÁõ∏ÂêåÂêçÁß∞ÔºàÊØîÂ¶Ç ‚Äúcom.foo.selectAllThings‚Äù Âíå ‚Äúcom.bar.selectAllThings‚ÄùÔºâÔºåÈÇ£‰πà‰ΩøÁî®Êó∂Â∞±‰ºö‰∫ßÁîü‚ÄúÁü≠ÂêçÁß∞‰∏çÂîØ‰∏Ä‚ÄùÁöÑÈîôËØØÔºåËøôÁßçÊÉÖÂÜµ‰∏ãÂ∞±ÂøÖÈ°ª‰ΩøÁî®ÂÖ®ÈôêÂÆöÂêç„ÄÇ</li>
</ul>
<p>ÂØπ‰∫éÂÉè BlogMapper ËøôÊ†∑ÁöÑÊò†Â∞ÑÂô®Á±ªÊù•ËØ¥ÔºåËøòÊúâÂè¶‰∏ÄÁßçÊñπÊ≥ïÊù•ÂÆåÊàêËØ≠Âè•Êò†Â∞Ñ„ÄÇ ÂÆÉ‰ª¨Êò†Â∞ÑÁöÑËØ≠Âè•ÂèØ‰ª•‰∏çÁî® XML Êù•ÈÖçÁΩÆÔºåËÄåÂèØ‰ª•‰ΩøÁî® Java Ê≥®Ëß£Êù•ÈÖçÁΩÆ„ÄÇÊØîÂ¶ÇÔºå‰∏äÈù¢ÁöÑ XML Á§∫‰æãÂèØ‰ª•Ë¢´ÊõøÊç¢ÊàêÂ¶Ç‰∏ãÁöÑÈÖçÁΩÆÔºö</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">org.mybatis.example</span><span class="p">;</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">BlogMapper</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nd">@Select</span><span class="p">(</span><span class="s">&quot;SELECT * FROM blog WHERE id = #{id}&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="n">Blog</span><span class="w"> </span><span class="nf">selectBlog</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>‰ΩøÁî®Ê≥®Ëß£Êù•Êò†Â∞ÑÁÆÄÂçïËØ≠Âè•‰ºö‰Ωø‰ª£Á†ÅÊòæÂæóÊõ¥Âä†ÁÆÄÊ¥ÅÔºå‰ΩÜÂØπ‰∫éÁ®çÂæÆÂ§çÊùÇ‰∏ÄÁÇπÁöÑËØ≠Âè•ÔºåJava Ê≥®Ëß£‰∏ç‰ªÖÂäõ‰∏ç‰ªéÂøÉÔºåËøò‰ºöËÆ©‰Ω†Êú¨Â∞±Â§çÊùÇÁöÑ SQL ËØ≠Âè•Êõ¥Âä†Ê∑∑‰π±‰∏çÂ†™„ÄÇ Âõ†Ê≠§ÔºåÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÂÅö‰∏Ä‰∫õÂæàÂ§çÊùÇÁöÑÊìç‰ΩúÔºåÊúÄÂ•ΩÁî® XML Êù•Êò†Â∞ÑËØ≠Âè•„ÄÇ</p>
<p>ÈÄâÊã©‰ΩïÁßçÊñπÂºèÊù•ÈÖçÁΩÆÊò†Â∞ÑÔºå‰ª•ÂèäËÆ§‰∏∫ÊòØÂê¶Â∫îËØ•Ë¶ÅÁªü‰∏ÄÊò†Â∞ÑËØ≠Âè•ÂÆö‰πâÁöÑÂΩ¢ÂºèÔºåÂÆåÂÖ®ÂèñÂÜ≥‰∫é‰Ω†Âíå‰Ω†ÁöÑÂõ¢Èòü„ÄÇ Êç¢Âè•ËØùËØ¥ÔºåÊ∞∏Ëøú‰∏çË¶ÅÊãòÊ≥•‰∫é‰∏ÄÁßçÊñπÂºèÔºå‰Ω†ÂèØ‰ª•ÂæàËΩªÊùæÁöÑÂú®Âü∫‰∫éÊ≥®Ëß£Âíå XML ÁöÑËØ≠Âè•Êò†Â∞ÑÊñπÂºèÈó¥Ëá™Áî±ÁßªÊ§çÂíåÂàáÊç¢„ÄÇ</p>
<h3 id="16scope">1.6„ÄÅ‰ΩúÁî®ÂüüÔºàScopeÔºâÂíåÁîüÂëΩÂë®Êúü<a class="headerlink" href="#16scope" title="Permanent link">&para;</a></h3>
<p><strong>SqlSessionFactoryBuilder</strong></p>
<p>Ëøô‰∏™Á±ªÂèØ‰ª•Ë¢´ÂÆû‰æãÂåñ„ÄÅ‰ΩøÁî®Âíå‰∏¢ÂºÉÔºå‰∏ÄÊó¶ÂàõÂª∫‰∫Ü SqlSessionFactoryÔºåÂ∞±‰∏çÂÜçÈúÄË¶ÅÂÆÉ‰∫Ü„ÄÇ Âõ†Ê≠§ SqlSessionFactoryBuilder ÂÆû‰æãÁöÑÊúÄ‰Ω≥‰ΩúÁî®ÂüüÊòØÊñπÊ≥ï‰ΩúÁî®ÂüüÔºà‰πüÂ∞±ÊòØÂ±ÄÈÉ®ÊñπÊ≥ïÂèòÈáèÔºâ„ÄÇ ‰Ω†ÂèØ‰ª•ÈáçÁî® SqlSessionFactoryBuilder Êù•ÂàõÂª∫Â§ö‰∏™ SqlSessionFactory ÂÆû‰æãÔºå‰ΩÜÊúÄÂ•ΩËøòÊòØ‰∏çË¶Å‰∏ÄÁõ¥‰øùÁïôÁùÄÂÆÉÔºå‰ª•‰øùËØÅÊâÄÊúâÁöÑ XML Ëß£ÊûêËµÑÊ∫êÂèØ‰ª•Ë¢´ÈáäÊîæÁªôÊõ¥ÈáçË¶ÅÁöÑ‰∫ãÊÉÖ„ÄÇ</p>
<p><strong>SqlSessionFactory</strong></p>
<p>SqlSessionFactory ‰∏ÄÊó¶Ë¢´ÂàõÂª∫Â∞±Â∫îËØ•Âú®Â∫îÁî®ÁöÑËøêË°åÊúüÈó¥‰∏ÄÁõ¥Â≠òÂú®ÔºåÊ≤°Êúâ‰ªª‰ΩïÁêÜÁî±‰∏¢ÂºÉÂÆÉÊàñÈáçÊñ∞ÂàõÂª∫Âè¶‰∏Ä‰∏™ÂÆû‰æã„ÄÇ ‰ΩøÁî® SqlSessionFactory ÁöÑÊúÄ‰Ω≥ÂÆûË∑µÊòØÂú®Â∫îÁî®ËøêË°åÊúüÈó¥‰∏çË¶ÅÈáçÂ§çÂàõÂª∫Â§öÊ¨°ÔºåÂ§öÊ¨°ÈáçÂª∫ SqlSessionFactory Ë¢´ËßÜ‰∏∫‰∏ÄÁßç‰ª£Á†Å‚ÄúÂùè‰π†ÊÉØ‚Äù„ÄÇÂõ†Ê≠§ SqlSessionFactory ÁöÑÊúÄ‰Ω≥‰ΩúÁî®ÂüüÊòØÂ∫îÁî®‰ΩúÁî®Âüü„ÄÇ ÊúâÂæàÂ§öÊñπÊ≥ïÂèØ‰ª•ÂÅöÂà∞ÔºåÊúÄÁÆÄÂçïÁöÑÂ∞±ÊòØ‰ΩøÁî®Âçï‰æãÊ®°ÂºèÊàñËÄÖÈùôÊÄÅÂçï‰æãÊ®°Âºè„ÄÇ</p>
<p><strong>SqlSession</strong></p>
<p>ÊØè‰∏™Á∫øÁ®ãÈÉΩÂ∫îËØ•ÊúâÂÆÉËá™Â∑±ÁöÑ SqlSession ÂÆû‰æã„ÄÇSqlSession ÁöÑÂÆû‰æã‰∏çÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÂõ†Ê≠§ÊòØ‰∏çËÉΩË¢´ÂÖ±‰∫´ÁöÑÔºåÊâÄ‰ª•ÂÆÉÁöÑÊúÄ‰Ω≥ÁöÑ‰ΩúÁî®ÂüüÊòØËØ∑Ê±ÇÊàñÊñπÊ≥ï‰ΩúÁî®Âüü„ÄÇ ÁªùÂØπ‰∏çËÉΩÂ∞Ü SqlSession ÂÆû‰æãÁöÑÂºïÁî®ÊîæÂú®‰∏Ä‰∏™Á±ªÁöÑÈùôÊÄÅÂüüÔºåÁîöËá≥‰∏Ä‰∏™Á±ªÁöÑÂÆû‰æãÂèòÈáè‰πü‰∏çË°å„ÄÇ ‰πüÁªù‰∏çËÉΩÂ∞Ü SqlSession ÂÆû‰æãÁöÑÂºïÁî®ÊîæÂú®‰ªª‰ΩïÁ±ªÂûãÁöÑÊâòÁÆ°‰ΩúÁî®Âüü‰∏≠ÔºåÊØîÂ¶Ç Servlet Ê°ÜÊû∂‰∏≠ÁöÑ HttpSession„ÄÇ Â¶ÇÊûú‰Ω†Áé∞Âú®Ê≠£Âú®‰ΩøÁî®‰∏ÄÁßç Web Ê°ÜÊû∂ÔºåËÄÉËôëÂ∞Ü SqlSession ÊîæÂú®‰∏Ä‰∏™Âíå HTTP ËØ∑Ê±ÇÁõ∏‰ººÁöÑ‰ΩúÁî®Âüü‰∏≠„ÄÇ Êç¢Âè•ËØùËØ¥ÔºåÊØèÊ¨°Êî∂Âà∞ HTTP ËØ∑Ê±ÇÔºåÂ∞±ÂèØ‰ª•ÊâìÂºÄ‰∏Ä‰∏™ SqlSessionÔºåËøîÂõû‰∏Ä‰∏™ÂìçÂ∫îÂêéÔºåÂ∞±ÂÖ≥Èó≠ÂÆÉ„ÄÇ Ëøô‰∏™ÂÖ≥Èó≠Êìç‰ΩúÂæàÈáçË¶ÅÔºå‰∏∫‰∫ÜÁ°Æ‰øùÊØèÊ¨°ÈÉΩËÉΩÊâßË°åÂÖ≥Èó≠Êìç‰ΩúÔºå‰Ω†Â∫îËØ•ÊääËøô‰∏™ÂÖ≥Èó≠Êìç‰ΩúÊîæÂà∞ finally Âùó‰∏≠„ÄÇ ‰∏ãÈù¢ÁöÑÁ§∫‰æãÂ∞±ÊòØ‰∏Ä‰∏™Á°Æ‰øù SqlSession ÂÖ≥Èó≠ÁöÑÊ†áÂáÜÊ®°ÂºèÔºö</p>
<div class="highlight"><pre><span></span><code><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">SqlSession</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSessionFactory</span><span class="p">.</span><span class="na">openSession</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// ‰Ω†ÁöÑÂ∫îÁî®ÈÄªËæë‰ª£Á†Å</span>
<span class="p">}</span>
</code></pre></div>
<p>Âú®ÊâÄÊúâ‰ª£Á†Å‰∏≠ÈÉΩÈÅµÂæ™ËøôÁßç‰ΩøÁî®Ê®°ÂºèÔºåÂèØ‰ª•‰øùËØÅÊâÄÊúâÊï∞ÊçÆÂ∫ìËµÑÊ∫êÈÉΩËÉΩË¢´Ê≠£Á°ÆÂú∞ÂÖ≥Èó≠„ÄÇ</p>
<p><strong>Êò†Â∞ÑÂô®ÂÆû‰æã</strong></p>
<p>Êò†Â∞ÑÂô®ÊòØ‰∏Ä‰∫õÁªëÂÆöÊò†Â∞ÑËØ≠Âè•ÁöÑÊé•Âè£„ÄÇÊò†Â∞ÑÂô®Êé•Âè£ÁöÑÂÆû‰æãÊòØ‰ªé SqlSession ‰∏≠Ëé∑ÂæóÁöÑ„ÄÇËôΩÁÑ∂‰ªéÊäÄÊúØÂ±ÇÈù¢‰∏äÊù•ËÆ≤Ôºå‰ªª‰ΩïÊò†Â∞ÑÂô®ÂÆû‰æãÁöÑÊúÄÂ§ß‰ΩúÁî®Âüü‰∏éËØ∑Ê±ÇÂÆÉ‰ª¨ÁöÑ SqlSession Áõ∏Âêå„ÄÇ‰ΩÜÊñπÊ≥ï‰ΩúÁî®ÂüüÊâçÊòØÊò†Â∞ÑÂô®ÂÆû‰æãÁöÑÊúÄÂêàÈÄÇÁöÑ‰ΩúÁî®Âüü„ÄÇ ‰πüÂ∞±ÊòØËØ¥ÔºåÊò†Â∞ÑÂô®ÂÆû‰æãÂ∫îËØ•Âú®Ë∞ÉÁî®ÂÆÉ‰ª¨ÁöÑÊñπÊ≥ï‰∏≠Ë¢´Ëé∑ÂèñÔºå‰ΩøÁî®ÂÆåÊØï‰πãÂêéÂç≥ÂèØ‰∏¢ÂºÉ„ÄÇ Êò†Â∞ÑÂô®ÂÆû‰æãÂπ∂‰∏çÈúÄË¶ÅË¢´ÊòæÂºèÂú∞ÂÖ≥Èó≠„ÄÇÂ∞ΩÁÆ°Âú®Êï¥‰∏™ËØ∑Ê±Ç‰ΩúÁî®Âüü‰øùÁïôÊò†Â∞ÑÂô®ÂÆû‰æã‰∏ç‰ºöÊúâ‰ªÄ‰πàÈóÆÈ¢òÔºå‰ΩÜÊòØ‰Ω†ÂæàÂø´‰ºöÂèëÁé∞ÔºåÂú®Ëøô‰∏™‰ΩúÁî®Âüü‰∏äÁÆ°ÁêÜÂ§™Â§öÂÉè SqlSession ÁöÑËµÑÊ∫ê‰ºöËÆ©‰Ω†Âøô‰∏çËøáÊù•„ÄÇ Âõ†Ê≠§ÔºåÊúÄÂ•ΩÂ∞ÜÊò†Â∞ÑÂô®ÊîæÂú®ÊñπÊ≥ï‰ΩúÁî®ÂüüÂÜÖ„ÄÇÂ∞±ÂÉè‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏ÄÊ†∑Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">SqlSession</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqlSessionFactory</span><span class="p">.</span><span class="na">openSession</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">BlogMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">session</span><span class="p">.</span><span class="na">getMapper</span><span class="p">(</span><span class="n">BlogMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// ‰Ω†ÁöÑÂ∫îÁî®ÈÄªËæë‰ª£Á†Å</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="2xml">2„ÄÅXMLÈÖçÁΩÆ<a class="headerlink" href="#2xml" title="Permanent link">&para;</a></h2>
<p>MyBatis ÁöÑÈÖçÁΩÆÊñá‰ª∂ÂåÖÂê´‰∫Ü‰ºöÊ∑±Ê∑±ÂΩ±Âìç MyBatis Ë°å‰∏∫ÁöÑËÆæÁΩÆÂíåÂ±ûÊÄß‰ø°ÊÅØ„ÄÇ ÈÖçÁΩÆÊñáÊ°£ÁöÑÈ°∂Â±ÇÁªìÊûÑÂ¶Ç‰∏ãÔºö</p>
<ul>
<li>configurationÔºàÈÖçÁΩÆÔºâ<ul>
<li>propertiesÔºàÂ±ûÊÄßÔºâ</li>
<li>settingsÔºàËÆæÁΩÆÔºâ</li>
<li>typeAliasesÔºàÁ±ªÂûãÂà´ÂêçÔºâ</li>
<li>typeHandlersÔºàÁ±ªÂûãÂ§ÑÁêÜÂô®Ôºâ</li>
<li>objectFactoryÔºàÂØπË±°Â∑•ÂéÇÔºâ</li>
<li>pluginsÔºàÊèí‰ª∂Ôºâ</li>
<li>environmentsÔºàÁéØÂ¢ÉÈÖçÁΩÆÔºâ<ul>
<li>environmentÔºàÁéØÂ¢ÉÂèòÈáèÔºâ<ul>
<li>transactionManagerÔºà‰∫ãÂä°ÁÆ°ÁêÜÂô®Ôºâ</li>
<li>dataSourceÔºàÊï∞ÊçÆÊ∫êÔºâ</li>
</ul>
</li>
</ul>
</li>
<li>databaseIdProviderÔºàÊï∞ÊçÆÂ∫ìÂéÇÂïÜÊ†áËØÜÔºâ</li>
<li>mappersÔºàÊò†Â∞ÑÂô®Ôºâ</li>
</ul>
</li>
</ul>
<h3 id="21properties">2.1„ÄÅÂ±ûÊÄßÔºàpropertiesÔºâ<a class="headerlink" href="#21properties" title="Permanent link">&para;</a></h3>
<p>Ëøô‰∫õÂ±ûÊÄßÂèØ‰ª•Âú®Â§ñÈÉ®ËøõË°åÈÖçÁΩÆÔºåÂπ∂ÂèØ‰ª•ËøõË°åÂä®ÊÄÅÊõøÊç¢„ÄÇ‰Ω†Êó¢ÂèØ‰ª•Âú®ÂÖ∏ÂûãÁöÑ Java Â±ûÊÄßÊñá‰ª∂‰∏≠ÈÖçÁΩÆËøô‰∫õÂ±ûÊÄßÔºå‰πüÂèØ‰ª•Âú® properties ÂÖÉÁ¥†ÁöÑÂ≠êÂÖÉÁ¥†‰∏≠ËÆæÁΩÆ„ÄÇ‰æãÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;properties</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;org/mybatis/example/config.properties&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;dev_user&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;password&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;F2Fa3!33TYyg&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/properties&gt;</span>
</code></pre></div>
<p>ËÆæÁΩÆÂ•ΩÁöÑÂ±ûÊÄßÂèØ‰ª•Âú®Êï¥‰∏™ÈÖçÁΩÆÊñá‰ª∂‰∏≠Áî®Êù•ÊõøÊç¢ÈúÄË¶ÅÂä®ÊÄÅÈÖçÁΩÆÁöÑÂ±ûÊÄßÂÄº„ÄÇÊØîÂ¶Ç:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dataSource</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;POOLED&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;driver&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${driver}&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;url&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${url}&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${username}&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;password&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${password}&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/dataSource&gt;</span>
</code></pre></div>
<p>Ëøô‰∏™‰æãÂ≠ê‰∏≠ÁöÑ username Âíå password Â∞Ü‰ºöÁî± properties ÂÖÉÁ¥†‰∏≠ËÆæÁΩÆÁöÑÁõ∏Â∫îÂÄºÊù•ÊõøÊç¢„ÄÇ driver Âíå url Â±ûÊÄßÂ∞Ü‰ºöÁî± config.properties Êñá‰ª∂‰∏≠ÂØπÂ∫îÁöÑÂÄºÊù•ÊõøÊç¢„ÄÇËøôÊ†∑Â∞±‰∏∫ÈÖçÁΩÆÊèê‰æõ‰∫ÜËØ∏Â§öÁÅµÊ¥ªÈÄâÊã©„ÄÇ‰πüÂèØ‰ª•Âú® SqlSessionFactoryBuilder.build() ÊñπÊ≥ï‰∏≠‰º†ÂÖ•Â±ûÊÄßÂÄº„ÄÇ‰æãÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="n">SqlSessionFactory</span><span class="w"> </span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlSessionFactoryBuilder</span><span class="p">().</span><span class="na">build</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span><span class="w"> </span><span class="n">props</span><span class="p">);</span>
<span class="c1">// ... ÊàñËÄÖ ...</span>
<span class="n">SqlSessionFactory</span><span class="w"> </span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlSessionFactoryBuilder</span><span class="p">().</span><span class="na">build</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span><span class="w"> </span><span class="n">environment</span><span class="p">,</span><span class="w"> </span><span class="n">props</span><span class="p">);</span>
</code></pre></div>
<p>Â¶ÇÊûú‰∏Ä‰∏™Â±ûÊÄßÂú®‰∏çÂè™‰∏Ä‰∏™Âú∞ÊñπËøõË°å‰∫ÜÈÖçÁΩÆÔºåÈÇ£‰πàÔºåMyBatis Â∞ÜÊåâÁÖß‰∏ãÈù¢ÁöÑÈ°∫Â∫èÊù•Âä†ËΩΩÔºö</p>
<ul>
<li>È¶ñÂÖàËØªÂèñÂú® properties ÂÖÉÁ¥†‰ΩìÂÜÖÊåáÂÆöÁöÑÂ±ûÊÄß„ÄÇ</li>
<li>ÁÑ∂ÂêéÊ†πÊçÆ properties ÂÖÉÁ¥†‰∏≠ÁöÑ resource Â±ûÊÄßËØªÂèñÁ±ªË∑ØÂæÑ‰∏ãÂ±ûÊÄßÊñá‰ª∂ÔºåÊàñÊ†πÊçÆ url Â±ûÊÄßÊåáÂÆöÁöÑË∑ØÂæÑËØªÂèñÂ±ûÊÄßÊñá‰ª∂ÔºåÂπ∂Ë¶ÜÁõñ‰πãÂâçËØªÂèñËøáÁöÑÂêåÂêçÂ±ûÊÄß„ÄÇ</li>
<li>ÊúÄÂêéËØªÂèñ‰Ωú‰∏∫ÊñπÊ≥ïÂèÇÊï∞‰º†ÈÄíÁöÑÂ±ûÊÄßÔºåÂπ∂Ë¶ÜÁõñ‰πãÂâçËØªÂèñËøáÁöÑÂêåÂêçÂ±ûÊÄß„ÄÇ</li>
</ul>
<p>Âõ†Ê≠§ÔºåÈÄöËøáÊñπÊ≥ïÂèÇÊï∞‰º†ÈÄíÁöÑÂ±ûÊÄßÂÖ∑ÊúâÊúÄÈ´ò‰ºòÂÖàÁ∫ßÔºåresource/url Â±ûÊÄß‰∏≠ÊåáÂÆöÁöÑÈÖçÁΩÆÊñá‰ª∂Ê¨°‰πãÔºåÊúÄ‰Ωé‰ºòÂÖàÁ∫ßÁöÑÂàôÊòØ properties ÂÖÉÁ¥†‰∏≠ÊåáÂÆöÁöÑÂ±ûÊÄß„ÄÇ</p>
<p>‰ªé MyBatis 3.4.2 ÂºÄÂßãÔºå‰Ω†ÂèØ‰ª•‰∏∫Âç†‰ΩçÁ¨¶ÊåáÂÆö‰∏Ä‰∏™ÈªòËÆ§ÂÄº„ÄÇ‰æãÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dataSource</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;POOLED&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="cm">&lt;!-- ... --&gt;</span>
<span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${username:ut_user}&quot;</span><span class="nt">/&gt;</span><span class="w"> </span>
<span class="w">  </span><span class="cm">&lt;!-- Â¶ÇÊûúÂ±ûÊÄß &#39;username&#39; Ê≤°ÊúâË¢´ÈÖçÁΩÆÔºå&#39;username&#39; Â±ûÊÄßÁöÑÂÄºÂ∞Ü‰∏∫ &#39;ut_user&#39; --&gt;</span>
<span class="nt">&lt;/dataSource&gt;</span>
</code></pre></div>
<p>Ëøô‰∏™ÁâπÊÄßÈªòËÆ§ÊòØÂÖ≥Èó≠ÁöÑ„ÄÇË¶ÅÂêØÁî®Ëøô‰∏™ÁâπÊÄßÔºåÈúÄË¶ÅÊ∑ªÂä†‰∏Ä‰∏™ÁâπÂÆöÁöÑÂ±ûÊÄßÊù•ÂºÄÂêØËøô‰∏™ÁâπÊÄß„ÄÇ‰æãÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;properties</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;org/mybatis/example/config.properties&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="cm">&lt;!-- ... --&gt;</span>
<span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;org.apache.ibatis.parsing.PropertyParser.enable-default-value&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span><span class="w"> </span>
<span class="w">  </span><span class="cm">&lt;!-- ÂêØÁî®ÈªòËÆ§ÂÄºÁâπÊÄß --&gt;</span>
<span class="nt">&lt;/properties&gt;</span>
</code></pre></div>
<p>Â¶ÇÊûú‰Ω†Âú®Â±ûÊÄßÂêç‰∏≠‰ΩøÁî®‰∫Ü <code>:</code> Â≠óÁ¨¶ÔºàÂ¶ÇÔºö<code>db:username</code>ÔºâÔºåÊàñËÄÖÂú® SQL Êò†Â∞Ñ‰∏≠‰ΩøÁî®‰∫Ü OGNL Ë°®ËææÂºèÁöÑ‰∏âÂÖÉËøêÁÆóÁ¨¶ÔºàÂ¶ÇÔºö <code>${tableName != null ? tableName : 'global_constants'}</code>ÔºâÔºåÂ∞±ÈúÄË¶ÅËÆæÁΩÆÁâπÂÆöÁöÑÂ±ûÊÄßÊù•‰øÆÊîπÂàÜÈöîÂ±ûÊÄßÂêçÂíåÈªòËÆ§ÂÄºÁöÑÂ≠óÁ¨¶„ÄÇ‰æãÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;properties</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;org/mybatis/example/config.properties&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="cm">&lt;!-- ... --&gt;</span>
<span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;org.apache.ibatis.parsing.PropertyParser.default-value-separator&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;?:&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="cm">&lt;!-- ‰øÆÊîπÈªòËÆ§ÂÄºÁöÑÂàÜÈöîÁ¨¶ --&gt;</span>
<span class="nt">&lt;/properties&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dataSource</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;POOLED&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="cm">&lt;!-- ... --&gt;</span>
<span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${db:username?:ut_user}&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/dataSource&gt;</span>
</code></pre></div>
<h3 id="22settings">2.2„ÄÅËÆæÁΩÆÔºàsettingsÔºâ<a class="headerlink" href="#22settings" title="Permanent link">&para;</a></h3>
<p>ËøôÊòØ MyBatis ‰∏≠ÊûÅ‰∏∫ÈáçË¶ÅÁöÑË∞ÉÊï¥ËÆæÁΩÆÔºåÂÆÉ‰ª¨‰ºöÊîπÂèò MyBatis ÁöÑËøêË°åÊó∂Ë°å‰∏∫„ÄÇ ‰∏ãË°®ÊèèËø∞‰∫ÜËÆæÁΩÆ‰∏≠ÂêÑÈ°πËÆæÁΩÆÁöÑÂê´‰πâ„ÄÅÈªòËÆ§ÂÄºÁ≠â„ÄÇ</p>
<p><img src="!assets/Mybatis/20200605012013.png" alt="20200605012013" style="" /></p>
<p>‰∏Ä‰∏™ÈÖçÁΩÆÂÆåÊï¥ÁöÑ settings ÂÖÉÁ¥†ÁöÑÁ§∫‰æãÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;settings&gt;</span>
<span class="w">  </span><span class="nt">&lt;setting</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;cacheEnabled&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;setting</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;lazyLoadingEnabled&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;setting</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;multipleResultSetsEnabled&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;setting</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;useColumnLabel&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;setting</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;useGeneratedKeys&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;setting</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;autoMappingBehavior&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;PARTIAL&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;setting</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;autoMappingUnknownColumnBehavior&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;WARNING&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;setting</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;defaultExecutorType&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;SIMPLE&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;setting</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;defaultStatementTimeout&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;25&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;setting</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;defaultFetchSize&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;100&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;setting</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;safeRowBoundsEnabled&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;setting</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;mapUnderscoreToCamelCase&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;setting</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;localCacheScope&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;SESSION&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;setting</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;jdbcTypeForNull&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;OTHER&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;setting</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;lazyLoadTriggerMethods&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;equals,clone,hashCode,toString&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/settings&gt;</span>
</code></pre></div>
<h3 id="23typealiases">2.3„ÄÅÁ±ªÂûãÂà´ÂêçÔºàtypeAliasesÔºâ<a class="headerlink" href="#23typealiases" title="Permanent link">&para;</a></h3>
<p>Á±ªÂûãÂà´ÂêçÂèØ‰∏∫ Java Á±ªÂûãËÆæÁΩÆ‰∏Ä‰∏™Áº©ÂÜôÂêçÂ≠ó„ÄÇ ÂÆÉ‰ªÖÁî®‰∫é XML ÈÖçÁΩÆÔºåÊÑèÂú®Èôç‰ΩéÂÜó‰ΩôÁöÑÂÖ®ÈôêÂÆöÁ±ªÂêç‰π¶ÂÜô„ÄÇ‰æãÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;typeAliases&gt;</span>
<span class="w">  </span><span class="nt">&lt;typeAlias</span><span class="w"> </span><span class="na">alias=</span><span class="s">&quot;Author&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;domain.blog.Author&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;typeAlias</span><span class="w"> </span><span class="na">alias=</span><span class="s">&quot;Blog&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;domain.blog.Blog&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;typeAlias</span><span class="w"> </span><span class="na">alias=</span><span class="s">&quot;Comment&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;domain.blog.Comment&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;typeAlias</span><span class="w"> </span><span class="na">alias=</span><span class="s">&quot;Post&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;domain.blog.Post&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;typeAlias</span><span class="w"> </span><span class="na">alias=</span><span class="s">&quot;Section&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;domain.blog.Section&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;typeAlias</span><span class="w"> </span><span class="na">alias=</span><span class="s">&quot;Tag&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;domain.blog.Tag&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/typeAliases&gt;</span>
</code></pre></div>
<p>ÂΩìËøôÊ†∑ÈÖçÁΩÆÊó∂Ôºå<code>Blog</code> ÂèØ‰ª•Áî®Âú®‰ªª‰Ωï‰ΩøÁî® <code>domain.blog.Blog</code> ÁöÑÂú∞Êñπ„ÄÇ</p>
<p>‰πüÂèØ‰ª•ÊåáÂÆö‰∏Ä‰∏™ÂåÖÂêçÔºåMyBatis ‰ºöÂú®ÂåÖÂêç‰∏ãÈù¢ÊêúÁ¥¢ÈúÄË¶ÅÁöÑ Java BeanÔºåÊØîÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;typeAliases&gt;</span>
<span class="w">  </span><span class="nt">&lt;package</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;domain.blog&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/typeAliases&gt;</span>
</code></pre></div>
<p>ÊØè‰∏Ä‰∏™Âú®ÂåÖ <code>domain.blog</code> ‰∏≠ÁöÑ Java BeanÔºåÂú®Ê≤°ÊúâÊ≥®Ëß£ÁöÑÊÉÖÂÜµ‰∏ãÔºå‰ºö‰ΩøÁî® Bean ÁöÑÈ¶ñÂ≠óÊØçÂ∞èÂÜôÁöÑÈùûÈôêÂÆöÁ±ªÂêçÊù•‰Ωú‰∏∫ÂÆÉÁöÑÂà´Âêç„ÄÇ ÊØîÂ¶Ç <code>domain.blog.Author</code> ÁöÑÂà´Âêç‰∏∫ <code>author</code>ÔºõËã•ÊúâÊ≥®Ëß£ÔºåÂàôÂà´Âêç‰∏∫ÂÖ∂Ê≥®Ëß£ÂÄº„ÄÇËßÅ‰∏ãÈù¢ÁöÑ‰æãÂ≠êÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Alias</span><span class="p">(</span><span class="s">&quot;author&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Author</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">...</span>
<span class="p">}</span>
</code></pre></div>
<p>‰∏ãÈù¢ÊòØ‰∏Ä‰∫õ‰∏∫Â∏∏ËßÅÁöÑ Java Á±ªÂûãÂÜÖÂª∫ÁöÑÁ±ªÂûãÂà´Âêç„ÄÇÂÆÉ‰ª¨ÈÉΩÊòØ‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜôÁöÑÔºåÊ≥®ÊÑèÔºå‰∏∫‰∫ÜÂ∫îÂØπÂéüÂßãÁ±ªÂûãÁöÑÂëΩÂêçÈáçÂ§çÔºåÈááÂèñ‰∫ÜÁâπÊÆäÁöÑÂëΩÂêçÈ£éÊ†º„ÄÇ</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Âà´Âêç</th>
<th style="text-align: center;">Êò†Â∞ÑÁöÑÁ±ªÂûã</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">_byte</td>
<td style="text-align: center;">byte</td>
</tr>
<tr>
<td style="text-align: center;">_long</td>
<td style="text-align: center;">long</td>
</tr>
<tr>
<td style="text-align: center;">_short</td>
<td style="text-align: center;">short</td>
</tr>
<tr>
<td style="text-align: center;">_int</td>
<td style="text-align: center;">int</td>
</tr>
<tr>
<td style="text-align: center;">_integer</td>
<td style="text-align: center;">int</td>
</tr>
<tr>
<td style="text-align: center;">_double</td>
<td style="text-align: center;">double</td>
</tr>
<tr>
<td style="text-align: center;">_float</td>
<td style="text-align: center;">float</td>
</tr>
<tr>
<td style="text-align: center;">_boolean</td>
<td style="text-align: center;">boolean</td>
</tr>
<tr>
<td style="text-align: center;">string</td>
<td style="text-align: center;">String</td>
</tr>
<tr>
<td style="text-align: center;">byte</td>
<td style="text-align: center;">Byte</td>
</tr>
<tr>
<td style="text-align: center;">long</td>
<td style="text-align: center;">Long</td>
</tr>
<tr>
<td style="text-align: center;">short</td>
<td style="text-align: center;">Short</td>
</tr>
<tr>
<td style="text-align: center;">int</td>
<td style="text-align: center;">Integer</td>
</tr>
<tr>
<td style="text-align: center;">integer</td>
<td style="text-align: center;">Integer</td>
</tr>
<tr>
<td style="text-align: center;">double</td>
<td style="text-align: center;">Double</td>
</tr>
<tr>
<td style="text-align: center;">float</td>
<td style="text-align: center;">Float</td>
</tr>
<tr>
<td style="text-align: center;">boolean</td>
<td style="text-align: center;">Boolean</td>
</tr>
<tr>
<td style="text-align: center;">date</td>
<td style="text-align: center;">Date</td>
</tr>
<tr>
<td style="text-align: center;">decimal</td>
<td style="text-align: center;">BigDecimal</td>
</tr>
<tr>
<td style="text-align: center;">bigdecimal</td>
<td style="text-align: center;">BigDecimal</td>
</tr>
<tr>
<td style="text-align: center;">object</td>
<td style="text-align: center;">Object</td>
</tr>
<tr>
<td style="text-align: center;">map</td>
<td style="text-align: center;">Map</td>
</tr>
<tr>
<td style="text-align: center;">hashmap</td>
<td style="text-align: center;">HashMap</td>
</tr>
<tr>
<td style="text-align: center;">list</td>
<td style="text-align: center;">List</td>
</tr>
<tr>
<td style="text-align: center;">arraylist</td>
<td style="text-align: center;">ArrayList</td>
</tr>
<tr>
<td style="text-align: center;">collection</td>
<td style="text-align: center;">Collection</td>
</tr>
<tr>
<td style="text-align: center;">iterator</td>
<td style="text-align: center;">Iterator</td>
</tr>
</tbody>
</table>
<h3 id="24environments">2.4„ÄÅÁéØÂ¢ÉÈÖçÁΩÆÔºàenvironmentsÔºâ<a class="headerlink" href="#24environments" title="Permanent link">&para;</a></h3>
<p>MyBatis ÂèØ‰ª•ÈÖçÁΩÆÊàêÈÄÇÂ∫îÂ§öÁßçÁéØÂ¢ÉÔºåËøôÁßçÊú∫Âà∂ÊúâÂä©‰∫éÂ∞Ü SQL Êò†Â∞ÑÂ∫îÁî®‰∫éÂ§öÁßçÊï∞ÊçÆÂ∫ì‰πã‰∏≠Ôºå Áé∞ÂÆûÊÉÖÂÜµ‰∏ãÊúâÂ§öÁßçÁêÜÁî±ÈúÄË¶ÅËøô‰πàÂÅö„ÄÇ‰æãÂ¶ÇÔºåÂºÄÂèë„ÄÅÊµãËØïÂíåÁîü‰∫ßÁéØÂ¢ÉÈúÄË¶ÅÊúâ‰∏çÂêåÁöÑÈÖçÁΩÆÔºõÊàñËÄÖÊÉ≥Âú®ÂÖ∑ÊúâÁõ∏Âêå Schema ÁöÑÂ§ö‰∏™Áîü‰∫ßÊï∞ÊçÆÂ∫ì‰∏≠‰ΩøÁî®Áõ∏ÂêåÁöÑ SQL Êò†Â∞Ñ„ÄÇËøòÊúâËÆ∏Â§öÁ±ª‰ººÁöÑ‰ΩøÁî®Âú∫ÊôØ„ÄÇ</p>
<p>==‰∏çËøáË¶ÅËÆ∞‰ΩèÔºöÂ∞ΩÁÆ°ÂèØ‰ª•ÈÖçÁΩÆÂ§ö‰∏™ÁéØÂ¢ÉÔºå‰ΩÜÊØè‰∏™ SqlSessionFactory ÂÆû‰æãÂè™ËÉΩÈÄâÊã©‰∏ÄÁßçÁéØÂ¢É„ÄÇ==</p>
<p>ÊâÄ‰ª•ÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥ËøûÊé•‰∏§‰∏™Êï∞ÊçÆÂ∫ìÔºåÂ∞±ÈúÄË¶ÅÂàõÂª∫‰∏§‰∏™ SqlSessionFactory ÂÆû‰æãÔºåÊØè‰∏™Êï∞ÊçÆÂ∫ìÂØπÂ∫î‰∏Ä‰∏™„ÄÇËÄåÂ¶ÇÊûúÊòØ‰∏â‰∏™Êï∞ÊçÆÂ∫ìÔºåÂ∞±ÈúÄË¶Å‰∏â‰∏™ÂÆû‰æãÔºå‰æùÊ≠§Á±ªÊé®ÔºåËÆ∞Ëµ∑Êù•ÂæàÁÆÄÂçïÔºö<strong>ÊØè‰∏™Êï∞ÊçÆÂ∫ìÂØπÂ∫î‰∏Ä‰∏™ SqlSessionFactory ÂÆû‰æã</strong></p>
<p>‰∏∫‰∫ÜÊåáÂÆöÂàõÂª∫Âì™ÁßçÁéØÂ¢ÉÔºåÂè™Ë¶ÅÂ∞ÜÂÆÉ‰Ωú‰∏∫ÂèØÈÄâÁöÑÂèÇÊï∞‰º†ÈÄíÁªô SqlSessionFactoryBuilder Âç≥ÂèØ„ÄÇÂèØ‰ª•Êé•ÂèóÁéØÂ¢ÉÈÖçÁΩÆÁöÑ‰∏§‰∏™ÊñπÊ≥ïÁ≠æÂêçÊòØÔºö</p>
<div class="highlight"><pre><span></span><code><span class="n">SqlSessionFactory</span><span class="w"> </span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlSessionFactoryBuilder</span><span class="p">().</span><span class="na">build</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span><span class="w"> </span><span class="n">environment</span><span class="p">);</span>
<span class="n">SqlSessionFactory</span><span class="w"> </span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlSessionFactoryBuilder</span><span class="p">().</span><span class="na">build</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span><span class="w"> </span><span class="n">environment</span><span class="p">,</span><span class="w"> </span><span class="n">properties</span><span class="p">);</span>
</code></pre></div>
<p>Â¶ÇÊûúÂøΩÁï•‰∫ÜÁéØÂ¢ÉÂèÇÊï∞ÔºåÈÇ£‰πàÂ∞Ü‰ºöÂä†ËΩΩÈªòËÆ§ÁéØÂ¢ÉÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="n">SqlSessionFactory</span><span class="w"> </span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlSessionFactoryBuilder</span><span class="p">().</span><span class="na">build</span><span class="p">(</span><span class="n">reader</span><span class="p">);</span>
<span class="n">SqlSessionFactory</span><span class="w"> </span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlSessionFactoryBuilder</span><span class="p">().</span><span class="na">build</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span><span class="w"> </span><span class="n">properties</span><span class="p">);</span>
</code></pre></div>
<p>environments ÂÖÉÁ¥†ÂÆö‰πâ‰∫ÜÂ¶Ç‰ΩïÈÖçÁΩÆÁéØÂ¢É„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;environments</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;development&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;environment</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;development&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;transactionManager</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;JDBC&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;...&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;...&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/transactionManager&gt;</span>
<span class="w">    </span><span class="nt">&lt;dataSource</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;POOLED&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;driver&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${driver}&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;url&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${url}&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${username}&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;password&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${password}&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/dataSource&gt;</span>
<span class="w">  </span><span class="nt">&lt;/environment&gt;</span>
<span class="nt">&lt;/environments&gt;</span>
</code></pre></div>
<p>Ê≥®ÊÑè‰∏Ä‰∫õÂÖ≥ÈîÆÁÇπ:</p>
<ul>
<li>ÈªòËÆ§‰ΩøÁî®ÁöÑÁéØÂ¢É IDÔºàÊØîÂ¶ÇÔºödefault="development"Ôºâ„ÄÇ</li>
<li>ÊØè‰∏™ environment ÂÖÉÁ¥†ÂÆö‰πâÁöÑÁéØÂ¢É IDÔºàÊØîÂ¶ÇÔºöid="development"Ôºâ„ÄÇ</li>
<li>‰∫ãÂä°ÁÆ°ÁêÜÂô®ÁöÑÈÖçÁΩÆÔºàÊØîÂ¶ÇÔºötype="JDBC"Ôºâ„ÄÇ</li>
<li>Êï∞ÊçÆÊ∫êÁöÑÈÖçÁΩÆÔºàÊØîÂ¶ÇÔºötype="POOLED"Ôºâ„ÄÇ</li>
</ul>
<p>ÈªòËÆ§ÁéØÂ¢ÉÂíåÁéØÂ¢É ID È°æÂêçÊÄù‰πâ„ÄÇ ÁéØÂ¢ÉÂèØ‰ª•ÈöèÊÑèÂëΩÂêçÔºå‰ΩÜÂä°ÂøÖ‰øùËØÅÈªòËÆ§ÁöÑÁéØÂ¢É ID Ë¶ÅÂåπÈÖçÂÖ∂‰∏≠‰∏Ä‰∏™ÁéØÂ¢É ID„ÄÇ</p>
<p><strong>‰∫ãÂä°ÁÆ°ÁêÜÂô®ÔºàtransactionManagerÔºâ</strong></p>
<p>Âú® MyBatis ‰∏≠Êúâ‰∏§ÁßçÁ±ªÂûãÁöÑ‰∫ãÂä°ÁÆ°ÁêÜÂô®Ôºà‰πüÂ∞±ÊòØ type="[JDBC|MANAGED]"ÔºâÔºö</p>
<ul>
<li>
<p>JDBC ‚Äì Ëøô‰∏™ÈÖçÁΩÆÁõ¥Êé•‰ΩøÁî®‰∫Ü JDBC ÁöÑÊèê‰∫§ÂíåÂõûÊªöËÆæÊñΩÔºåÂÆÉ‰æùËµñ‰ªéÊï∞ÊçÆÊ∫êËé∑ÂæóÁöÑËøûÊé•Êù•ÁÆ°ÁêÜ‰∫ãÂä°‰ΩúÁî®Âüü„ÄÇ</p>
</li>
<li>
<p>MANAGED ‚Äì Ëøô‰∏™ÈÖçÁΩÆÂá†‰πéÊ≤°ÂÅö‰ªÄ‰πà„ÄÇÂÆÉ‰ªé‰∏çÊèê‰∫§ÊàñÂõûÊªö‰∏Ä‰∏™ËøûÊé•ÔºåËÄåÊòØËÆ©ÂÆπÂô®Êù•ÁÆ°ÁêÜ‰∫ãÂä°ÁöÑÊï¥‰∏™ÁîüÂëΩÂë®ÊúüÔºàÊØîÂ¶Ç JEE Â∫îÁî®ÊúçÂä°Âô®ÁöÑ‰∏ä‰∏ãÊñáÔºâ„ÄÇ ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÂÆÉ‰ºöÂÖ≥Èó≠ËøûÊé•„ÄÇÁÑ∂ËÄå‰∏Ä‰∫õÂÆπÂô®Âπ∂‰∏çÂ∏åÊúõËøûÊé•Ë¢´ÂÖ≥Èó≠ÔºåÂõ†Ê≠§ÈúÄË¶ÅÂ∞Ü closeConnection Â±ûÊÄßËÆæÁΩÆ‰∏∫ false Êù•ÈòªÊ≠¢ÈªòËÆ§ÁöÑÂÖ≥Èó≠Ë°å‰∏∫„ÄÇ‰æãÂ¶Ç:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;transactionManager</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;MANAGED&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;closeConnection&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/transactionManager&gt;</span>
</code></pre></div>
</li>
</ul>
<p><strong>ÊèêÁ§∫</strong> Â¶ÇÊûú‰Ω†Ê≠£Âú®‰ΩøÁî® Spring + MyBatisÔºåÂàôÊ≤°ÊúâÂøÖË¶ÅÈÖçÁΩÆ‰∫ãÂä°ÁÆ°ÁêÜÂô®ÔºåÂõ†‰∏∫ Spring Ê®°Âùó‰ºö‰ΩøÁî®Ëá™Â∏¶ÁöÑÁÆ°ÁêÜÂô®Êù•Ë¶ÜÁõñÂâçÈù¢ÁöÑÈÖçÁΩÆ„ÄÇ</p>
<p>Ëøô‰∏§Áßç‰∫ãÂä°ÁÆ°ÁêÜÂô®Á±ªÂûãÈÉΩ‰∏çÈúÄË¶ÅËÆæÁΩÆ‰ªª‰ΩïÂ±ûÊÄß„ÄÇÂÆÉ‰ª¨ÂÖ∂ÂÆûÊòØÁ±ªÂûãÂà´ÂêçÔºåÊç¢Âè•ËØùËØ¥Ôºå‰Ω†ÂèØ‰ª•Áî® TransactionFactory Êé•Âè£ÂÆûÁé∞Á±ªÁöÑÂÖ®ÈôêÂÆöÂêçÊàñÁ±ªÂûãÂà´Âêç‰ª£ÊõøÂÆÉ‰ª¨„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">TransactionFactory</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setProperties</span><span class="p">(</span><span class="n">Properties</span><span class="w"> </span><span class="n">props</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// ‰ªé 3.5.2 ÂºÄÂßãÔºåËØ•ÊñπÊ≥ï‰∏∫ÈªòËÆ§ÊñπÊ≥ï</span>
<span class="w">    </span><span class="c1">// Á©∫ÂÆûÁé∞</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">Transaction</span><span class="w"> </span><span class="nf">newTransaction</span><span class="p">(</span><span class="n">Connection</span><span class="w"> </span><span class="n">conn</span><span class="p">);</span>
<span class="w">  </span><span class="n">Transaction</span><span class="w"> </span><span class="nf">newTransaction</span><span class="p">(</span><span class="n">DataSource</span><span class="w"> </span><span class="n">dataSource</span><span class="p">,</span><span class="w"> </span><span class="n">TransactionIsolationLevel</span><span class="w"> </span><span class="n">level</span><span class="p">,</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">autoCommit</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Âú®‰∫ãÂä°ÁÆ°ÁêÜÂô®ÂÆû‰æãÂåñÂêéÔºåÊâÄÊúâÂú® XML ‰∏≠ÈÖçÁΩÆÁöÑÂ±ûÊÄßÂ∞Ü‰ºöË¢´‰º†ÈÄíÁªô setProperties() ÊñπÊ≥ï„ÄÇ‰Ω†ÁöÑÂÆûÁé∞ËøòÈúÄË¶ÅÂàõÂª∫‰∏Ä‰∏™ Transaction Êé•Âè£ÁöÑÂÆûÁé∞Á±ªÔºåËøô‰∏™Êé•Âè£‰πüÂæàÁÆÄÂçïÔºö</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Transaction</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Connection</span><span class="w"> </span><span class="nf">getConnection</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="p">;</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">commit</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="p">;</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">rollback</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="p">;</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">close</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="p">;</span>
<span class="w">  </span><span class="n">Integer</span><span class="w"> </span><span class="nf">getTimeout</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>‰ΩøÁî®Ëøô‰∏§‰∏™Êé•Âè£Ôºå‰Ω†ÂèØ‰ª•ÂÆåÂÖ®Ëá™ÂÆö‰πâ MyBatis ÂØπ‰∫ãÂä°ÁöÑÂ§ÑÁêÜ„ÄÇ</p>
<p><strong>Êï∞ÊçÆÊ∫êÔºàdataSourceÔºâ</strong></p>
<p>dataSource ÂÖÉÁ¥†‰ΩøÁî®Ê†áÂáÜÁöÑ JDBC Êï∞ÊçÆÊ∫êÊé•Âè£Êù•ÈÖçÁΩÆ JDBC ËøûÊé•ÂØπË±°ÁöÑËµÑÊ∫ê„ÄÇÂ§ßÂ§öÊï∞ MyBatis Â∫îÁî®Á®ãÂ∫è‰ºöÊåâÁ§∫‰æã‰∏≠ÁöÑ‰æãÂ≠êÊù•ÈÖçÁΩÆÊï∞ÊçÆÊ∫ê„ÄÇËôΩÁÑ∂Êï∞ÊçÆÊ∫êÈÖçÁΩÆÊòØÂèØÈÄâÁöÑÔºå‰ΩÜÂ¶ÇÊûúË¶ÅÂêØÁî®Âª∂ËøüÂä†ËΩΩÁâπÊÄßÔºåÂ∞±ÂøÖÈ°ªÈÖçÁΩÆÊï∞ÊçÆÊ∫ê„ÄÇ</p>
<p>Êúâ‰∏âÁßçÂÜÖÂª∫ÁöÑÊï∞ÊçÆÊ∫êÁ±ªÂûãÔºà‰πüÂ∞±ÊòØ type="[UNPOOLED|POOLED|JNDI]"ÔºâÔºö</p>
<ol>
<li>
<p><strong>UNPOOLED</strong>‚Äì Ëøô‰∏™Êï∞ÊçÆÊ∫êÁöÑÂÆûÁé∞‰ºöÊØèÊ¨°ËØ∑Ê±ÇÊó∂ÊâìÂºÄÂíåÂÖ≥Èó≠ËøûÊé•„ÄÇËôΩÁÑ∂ÊúâÁÇπÊÖ¢Ôºå‰ΩÜÂØπÈÇ£‰∫õÊï∞ÊçÆÂ∫ìËøûÊé•ÂèØÁî®ÊÄßË¶ÅÊ±Ç‰∏çÈ´òÁöÑÁÆÄÂçïÂ∫îÁî®Á®ãÂ∫èÊù•ËØ¥ÔºåÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÈÄâÊã©„ÄÇ ÊÄßËÉΩË°®Áé∞Âàô‰æùËµñ‰∫é‰ΩøÁî®ÁöÑÊï∞ÊçÆÂ∫ìÔºåÂØπÊüê‰∫õÊï∞ÊçÆÂ∫ìÊù•ËØ¥Ôºå‰ΩøÁî®ËøûÊé•Ê±†Âπ∂‰∏çÈáçË¶ÅÔºåËøô‰∏™ÈÖçÁΩÆÂ∞±ÂæàÈÄÇÂêàËøôÁßçÊÉÖÂΩ¢„ÄÇUNPOOLED Á±ªÂûãÁöÑÊï∞ÊçÆÊ∫ê‰ªÖ‰ªÖÈúÄË¶ÅÈÖçÁΩÆ‰ª•‰∏ã 5 ÁßçÂ±ûÊÄßÔºö</p>
<ul>
<li><code>driver</code> ‚Äì ËøôÊòØ JDBC È©±Âä®ÁöÑ Java Á±ªÂÖ®ÈôêÂÆöÂêçÔºàÂπ∂‰∏çÊòØ JDBC È©±Âä®‰∏≠ÂèØËÉΩÂåÖÂê´ÁöÑÊï∞ÊçÆÊ∫êÁ±ªÔºâ„ÄÇ</li>
<li><code>url</code> ‚Äì ËøôÊòØÊï∞ÊçÆÂ∫ìÁöÑ JDBC URL Âú∞ÂùÄ„ÄÇ</li>
<li><code>username</code> ‚Äì ÁôªÂΩïÊï∞ÊçÆÂ∫ìÁöÑÁî®Êà∑Âêç„ÄÇ</li>
<li><code>password</code> ‚Äì ÁôªÂΩïÊï∞ÊçÆÂ∫ìÁöÑÂØÜÁ†Å„ÄÇ</li>
<li><code>defaultTransactionIsolationLevel</code> ‚Äì ÈªòËÆ§ÁöÑËøûÊé•‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´„ÄÇ</li>
<li><code>defaultNetworkTimeout</code> ‚Äì Á≠âÂæÖÊï∞ÊçÆÂ∫ìÊìç‰ΩúÂÆåÊàêÁöÑÈªòËÆ§ÁΩëÁªúË∂ÖÊó∂Êó∂Èó¥ÔºàÂçï‰ΩçÔºöÊØ´ÁßíÔºâ„ÄÇ</li>
</ul>
<p>‰Ωú‰∏∫ÂèØÈÄâÈ°πÔºå‰Ω†‰πüÂèØ‰ª•‰º†ÈÄíÂ±ûÊÄßÁªôÊï∞ÊçÆÂ∫ìÈ©±Âä®„ÄÇÂè™ÈúÄÂú®Â±ûÊÄßÂêçÂä†‰∏ä‚Äúdriver.‚ÄùÂâçÁºÄÂç≥ÂèØÔºå‰æãÂ¶ÇÔºö</p>
<ul>
<li><code>driver.encoding=UTF8</code></li>
</ul>
<p>ËøôÂ∞ÜÈÄöËøá DriverManager.getConnection(url, driverProperties) ÊñπÊ≥ï‰º†ÈÄíÂÄº‰∏∫ <code>UTF8</code> ÁöÑ <code>encoding</code> Â±ûÊÄßÁªôÊï∞ÊçÆÂ∫ìÈ©±Âä®„ÄÇ</p>
</li>
<li>
<p><strong>POOLED</strong>‚Äì ËøôÁßçÊï∞ÊçÆÊ∫êÁöÑÂÆûÁé∞Âà©Áî®‚ÄúÊ±†‚ÄùÁöÑÊ¶ÇÂøµÂ∞Ü JDBC ËøûÊé•ÂØπË±°ÁªÑÁªáËµ∑Êù•ÔºåÈÅøÂÖç‰∫ÜÂàõÂª∫Êñ∞ÁöÑËøûÊé•ÂÆû‰æãÊó∂ÊâÄÂøÖÈúÄÁöÑÂàùÂßãÂåñÂíåËÆ§ËØÅÊó∂Èó¥„ÄÇ ËøôÁßçÂ§ÑÁêÜÊñπÂºèÂæàÊµÅË°åÔºåËÉΩ‰ΩøÂπ∂Âèë Web Â∫îÁî®Âø´ÈÄüÂìçÂ∫îËØ∑Ê±Ç„ÄÇ</p>
<p>Èô§‰∫Ü‰∏äËø∞ÊèêÂà∞ UNPOOLED ‰∏ãÁöÑÂ±ûÊÄßÂ§ñÔºåËøòÊúâÊõ¥Â§öÂ±ûÊÄßÁî®Êù•ÈÖçÁΩÆ POOLED ÁöÑÊï∞ÊçÆÊ∫êÔºö</p>
<ul>
<li><code>poolMaximumActiveConnections</code> ‚Äì Âú®‰ªªÊÑèÊó∂Èó¥ÂèØÂ≠òÂú®ÁöÑÊ¥ªÂä®ÔºàÊ≠£Âú®‰ΩøÁî®ÔºâËøûÊé•Êï∞ÈáèÔºåÈªòËÆ§ÂÄºÔºö10</li>
<li><code>poolMaximumIdleConnections</code> ‚Äì ‰ªªÊÑèÊó∂Èó¥ÂèØËÉΩÂ≠òÂú®ÁöÑÁ©∫Èó≤ËøûÊé•Êï∞„ÄÇ</li>
<li><code>poolMaximumCheckoutTime</code> ‚Äì Âú®Ë¢´Âº∫Âà∂ËøîÂõû‰πãÂâçÔºåÊ±†‰∏≠ËøûÊé•Ë¢´Ê£ÄÂá∫Ôºàchecked outÔºâÊó∂Èó¥ÔºåÈªòËÆ§ÂÄºÔºö20000 ÊØ´ÁßíÔºàÂç≥ 20 ÁßíÔºâ</li>
<li><code>poolTimeToWait</code> ‚Äì ËøôÊòØ‰∏Ä‰∏™Â∫ïÂ±ÇËÆæÁΩÆÔºåÂ¶ÇÊûúËé∑ÂèñËøûÊé•Ëä±Ë¥π‰∫ÜÁõ∏ÂΩìÈïøÁöÑÊó∂Èó¥ÔºåËøûÊé•Ê±†‰ºöÊâìÂç∞Áä∂ÊÄÅÊó•ÂøóÂπ∂ÈáçÊñ∞Â∞ùËØïËé∑Âèñ‰∏Ä‰∏™ËøûÊé•ÔºàÈÅøÂÖçÂú®ËØØÈÖçÁΩÆÁöÑÊÉÖÂÜµ‰∏ã‰∏ÄÁõ¥Â§±Ë¥•‰∏î‰∏çÊâìÂç∞Êó•ÂøóÔºâÔºåÈªòËÆ§ÂÄºÔºö20000 ÊØ´ÁßíÔºàÂç≥ 20 ÁßíÔºâ„ÄÇ</li>
<li><code>poolMaximumLocalBadConnectionTolerance</code> ‚Äì ËøôÊòØ‰∏Ä‰∏™ÂÖ≥‰∫éÂùèËøûÊé•ÂÆπÂøçÂ∫¶ÁöÑÂ∫ïÂ±ÇËÆæÁΩÆÔºå ‰ΩúÁî®‰∫éÊØè‰∏Ä‰∏™Â∞ùËØï‰ªéÁºìÂ≠òÊ±†Ëé∑ÂèñËøûÊé•ÁöÑÁ∫øÁ®ã„ÄÇ Â¶ÇÊûúËøô‰∏™Á∫øÁ®ãËé∑ÂèñÂà∞ÁöÑÊòØ‰∏Ä‰∏™ÂùèÁöÑËøûÊé•ÔºåÈÇ£‰πàËøô‰∏™Êï∞ÊçÆÊ∫êÂÖÅËÆ∏Ëøô‰∏™Á∫øÁ®ãÂ∞ùËØïÈáçÊñ∞Ëé∑Âèñ‰∏Ä‰∏™Êñ∞ÁöÑËøûÊé•Ôºå‰ΩÜÊòØËøô‰∏™ÈáçÊñ∞Â∞ùËØïÁöÑÊ¨°Êï∞‰∏çÂ∫îËØ•Ë∂ÖËøá <code>poolMaximumIdleConnections</code> ‰∏é <code>poolMaximumLocalBadConnectionTolerance</code> ‰πãÂíå„ÄÇ ÈªòËÆ§ÂÄºÔºö3ÔºàÊñ∞Â¢û‰∫é 3.4.5Ôºâ</li>
<li><code>poolPingQuery</code> ‚Äì ÂèëÈÄÅÂà∞Êï∞ÊçÆÂ∫ìÁöÑ‰æ¶ÊµãÊü•ËØ¢ÔºåÁî®Êù•Ê£ÄÈ™åËøûÊé•ÊòØÂê¶Ê≠£Â∏∏Â∑•‰ΩúÂπ∂ÂáÜÂ§áÊé•ÂèóËØ∑Ê±Ç„ÄÇÈªòËÆ§ÊòØ‚ÄúNO PING QUERY SET‚ÄùÔºåËøô‰ºöÂØºËá¥Â§öÊï∞Êï∞ÊçÆÂ∫ìÈ©±Âä®Âá∫ÈîôÊó∂ËøîÂõûÊÅ∞ÂΩìÁöÑÈîôËØØÊ∂àÊÅØ„ÄÇ</li>
<li><code>poolPingEnabled</code> ‚Äì ÊòØÂê¶ÂêØÁî®‰æ¶ÊµãÊü•ËØ¢„ÄÇËã•ÂºÄÂêØÔºåÈúÄË¶ÅËÆæÁΩÆ <code>poolPingQuery</code> Â±ûÊÄß‰∏∫‰∏Ä‰∏™ÂèØÊâßË°åÁöÑ SQL ËØ≠Âè•ÔºàÊúÄÂ•ΩÊòØ‰∏Ä‰∏™ÈÄüÂ∫¶ÈùûÂ∏∏Âø´ÁöÑ SQL ËØ≠Âè•ÔºâÔºåÈªòËÆ§ÂÄºÔºöfalse„ÄÇ</li>
<li><code>poolPingConnectionsNotUsedFor</code> ‚Äì ÈÖçÁΩÆ poolPingQuery ÁöÑÈ¢ëÁéá„ÄÇÂèØ‰ª•Ë¢´ËÆæÁΩÆ‰∏∫ÂíåÊï∞ÊçÆÂ∫ìËøûÊé•Ë∂ÖÊó∂Êó∂Èó¥‰∏ÄÊ†∑ÔºåÊù•ÈÅøÂÖç‰∏çÂøÖË¶ÅÁöÑ‰æ¶ÊµãÔºåÈªòËÆ§ÂÄºÔºö0ÔºàÂç≥ÊâÄÊúâËøûÊé•ÊØè‰∏ÄÊó∂ÂàªÈÉΩË¢´‰æ¶Êµã ‚Äî ÂΩìÁÑ∂‰ªÖÂΩì poolPingEnabled ‰∏∫ true Êó∂ÈÄÇÁî®Ôºâ„ÄÇ</li>
</ul>
</li>
<li>
<p><strong>JNDI</strong> ‚Äì Ëøô‰∏™Êï∞ÊçÆÊ∫êÂÆûÁé∞ÊòØ‰∏∫‰∫ÜËÉΩÂú®Â¶Ç EJB ÊàñÂ∫îÁî®ÊúçÂä°Âô®ËøôÁ±ªÂÆπÂô®‰∏≠‰ΩøÁî®ÔºåÂÆπÂô®ÂèØ‰ª•ÈõÜ‰∏≠ÊàñÂú®Â§ñÈÉ®ÈÖçÁΩÆÊï∞ÊçÆÊ∫êÔºåÁÑ∂ÂêéÊîæÁΩÆ‰∏Ä‰∏™ JNDI ‰∏ä‰∏ãÊñáÁöÑÊï∞ÊçÆÊ∫êÂºïÁî®„ÄÇËøôÁßçÊï∞ÊçÆÊ∫êÈÖçÁΩÆÂè™ÈúÄË¶Å‰∏§‰∏™Â±ûÊÄßÔºö</p>
<ul>
<li><code>initial_context</code> ‚Äì Ëøô‰∏™Â±ûÊÄßÁî®Êù•Âú® InitialContext ‰∏≠ÂØªÊâæ‰∏ä‰∏ãÊñáÔºàÂç≥ÔºåinitialContext.lookup(initial_context)Ôºâ„ÄÇËøôÊòØ‰∏™ÂèØÈÄâÂ±ûÊÄßÔºåÂ¶ÇÊûúÂøΩÁï•ÔºåÈÇ£‰πàÂ∞Ü‰ºöÁõ¥Êé•‰ªé InitialContext ‰∏≠ÂØªÊâæ data_source Â±ûÊÄß„ÄÇ</li>
<li><code>data_source</code> ‚Äì ËøôÊòØÂºïÁî®Êï∞ÊçÆÊ∫êÂÆû‰æã‰ΩçÁΩÆÁöÑ‰∏ä‰∏ãÊñáË∑ØÂæÑ„ÄÇÊèê‰æõ‰∫Ü initial_context ÈÖçÁΩÆÊó∂‰ºöÂú®ÂÖ∂ËøîÂõûÁöÑ‰∏ä‰∏ãÊñá‰∏≠ËøõË°åÊü•ÊâæÔºåÊ≤°ÊúâÊèê‰æõÊó∂ÂàôÁõ¥Êé•Âú® InitialContext ‰∏≠Êü•Êâæ„ÄÇ</li>
</ul>
<p>ÂíåÂÖ∂‰ªñÊï∞ÊçÆÊ∫êÈÖçÁΩÆÁ±ª‰ººÔºåÂèØ‰ª•ÈÄöËøáÊ∑ªÂä†ÂâçÁºÄ‚Äúenv.‚ÄùÁõ¥Êé•ÊääÂ±ûÊÄß‰º†ÈÄíÁªô InitialContext„ÄÇÊØîÂ¶ÇÔºö</p>
<ul>
<li><code>env.encoding=UTF8</code></li>
</ul>
<p>ËøôÂ∞±‰ºöÂú® InitialContext ÂÆû‰æãÂåñÊó∂ÂæÄÂÆÉÁöÑÊûÑÈÄ†ÊñπÊ≥ï‰º†ÈÄíÂÄº‰∏∫ <code>UTF8</code> ÁöÑ <code>encoding</code> Â±ûÊÄß„ÄÇ</p>
</li>
</ol>
<p>‰Ω†ÂèØ‰ª•ÈÄöËøáÂÆûÁé∞Êé•Âè£ <code>org.apache.ibatis.datasource.DataSourceFactory</code> Êù•‰ΩøÁî®Á¨¨‰∏âÊñπÊï∞ÊçÆÊ∫êÂÆûÁé∞Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">DataSourceFactory</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">setProperties</span><span class="p">(</span><span class="n">Properties</span><span class="w"> </span><span class="n">props</span><span class="p">);</span>
<span class="w">  </span><span class="n">DataSource</span><span class="w"> </span><span class="nf">getDataSource</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p><code>org.apache.ibatis.datasource.unpooled.UnpooledDataSourceFactory</code> ÂèØË¢´Áî®‰ΩúÁà∂Á±ªÊù•ÊûÑÂª∫Êñ∞ÁöÑÊï∞ÊçÆÊ∫êÈÄÇÈÖçÂô®ÔºåÊØîÂ¶Ç‰∏ãÈù¢ËøôÊÆµÊèíÂÖ• C3P0 Êï∞ÊçÆÊ∫êÊâÄÂøÖÈúÄÁöÑ‰ª£Á†ÅÔºö</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.datasource.unpooled.UnpooledDataSourceFactory</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">com.mchange.v2.c3p0.ComboPooledDataSource</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">C3P0DataSourceFactory</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">UnpooledDataSourceFactory</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="nf">C3P0DataSourceFactory</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="na">dataSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ComboPooledDataSource</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>‰∏∫‰∫Ü‰ª§ÂÖ∂Â∑•‰ΩúÔºåËÆ∞ÂæóÂú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠‰∏∫ÊØè‰∏™Â∏åÊúõ MyBatis Ë∞ÉÁî®ÁöÑ setter ÊñπÊ≥ïÂ¢ûÂä†ÂØπÂ∫îÁöÑÂ±ûÊÄß„ÄÇ ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ÂèØ‰ª•ËøûÊé•Ëá≥ PostgreSQL Êï∞ÊçÆÂ∫ìÁöÑ‰æãÂ≠êÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dataSource</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;org.myproject.C3P0DataSourceFactory&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;driver&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;org.postgresql.Driver&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;url&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;jdbc:postgresql:mydb&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;postgres&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;password&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;root&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/dataSource&gt;</span>
</code></pre></div>
<h3 id="25mappers">2.5„ÄÅÊò†Â∞ÑÂô®ÔºàmappersÔºâ<a class="headerlink" href="#25mappers" title="Permanent link">&para;</a></h3>
<p>Êó¢ÁÑ∂ MyBatis ÁöÑË°å‰∏∫Â∑≤ÁªèÁî±‰∏äËø∞ÂÖÉÁ¥†ÈÖçÁΩÆÂÆå‰∫ÜÔºåÊàë‰ª¨Áé∞Âú®Â∞±Ë¶ÅÊù•ÂÆö‰πâ SQL Êò†Â∞ÑËØ≠Âè•‰∫Ü„ÄÇ ‰ΩÜÈ¶ñÂÖàÔºåÊàë‰ª¨ÈúÄË¶ÅÂëäËØâ MyBatis Âà∞Âì™ÈáåÂéªÊâæÂà∞Ëøô‰∫õËØ≠Âè•„ÄÇ Âú®Ëá™Âä®Êü•ÊâæËµÑÊ∫êÊñπÈù¢ÔºåJava Âπ∂Ê≤°ÊúâÊèê‰æõ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑËß£ÂÜ≥ÊñπÊ°àÔºåÊâÄ‰ª•ÊúÄÂ•ΩÁöÑÂäûÊ≥ïÊòØÁõ¥Êé•ÂëäËØâ MyBatis Âà∞Âì™ÈáåÂéªÊâæÊò†Â∞ÑÊñá‰ª∂„ÄÇ ‰Ω†ÂèØ‰ª•‰ΩøÁî®Áõ∏ÂØπ‰∫éÁ±ªË∑ØÂæÑÁöÑËµÑÊ∫êÂºïÁî®ÔºåÊàñÂÆåÂÖ®ÈôêÂÆöËµÑÊ∫êÂÆö‰ΩçÁ¨¶ÔºàÂåÖÊã¨ <code>file:///</code> ÂΩ¢ÂºèÁöÑ URLÔºâÔºåÊàñÁ±ªÂêçÂíåÂåÖÂêçÁ≠â„ÄÇ‰æãÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- ‰ΩøÁî®Áõ∏ÂØπ‰∫éÁ±ªË∑ØÂæÑÁöÑËµÑÊ∫êÂºïÁî® --&gt;</span>
<span class="nt">&lt;mappers&gt;</span>
<span class="w">  </span><span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;org/mybatis/builder/AuthorMapper.xml&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;org/mybatis/builder/BlogMapper.xml&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;org/mybatis/builder/PostMapper.xml&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/mappers&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- ‰ΩøÁî®ÂÆåÂÖ®ÈôêÂÆöËµÑÊ∫êÂÆö‰ΩçÁ¨¶ÔºàURLÔºâ --&gt;</span>
<span class="nt">&lt;mappers&gt;</span>
<span class="w">  </span><span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">url=</span><span class="s">&quot;file:///var/mappers/AuthorMapper.xml&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">url=</span><span class="s">&quot;file:///var/mappers/BlogMapper.xml&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">url=</span><span class="s">&quot;file:///var/mappers/PostMapper.xml&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/mappers&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- ‰ΩøÁî®Êò†Â∞ÑÂô®Êé•Âè£ÂÆûÁé∞Á±ªÁöÑÂÆåÂÖ®ÈôêÂÆöÁ±ªÂêç --&gt;</span>
<span class="nt">&lt;mappers&gt;</span>
<span class="w">  </span><span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.mybatis.builder.AuthorMapper&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.mybatis.builder.BlogMapper&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.mybatis.builder.PostMapper&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/mappers&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- Â∞ÜÂåÖÂÜÖÁöÑÊò†Â∞ÑÂô®Êé•Âè£ÂÆûÁé∞ÂÖ®ÈÉ®Ê≥®ÂÜå‰∏∫Êò†Â∞ÑÂô® --&gt;</span>
<span class="nt">&lt;mappers&gt;</span>
<span class="w">  </span><span class="nt">&lt;package</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;org.mybatis.builder&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/mappers&gt;</span>
</code></pre></div>
<p>Ëøô‰∫õÈÖçÁΩÆ‰ºöÂëäËØâ MyBatis ÂéªÂì™ÈáåÊâæÊò†Â∞ÑÊñá‰ª∂ÔºåÂâ©‰∏ãÁöÑÁªÜËäÇÂ∞±Â∫îËØ•ÊòØÊØè‰∏™ SQL Êò†Â∞ÑÊñá‰ª∂‰∫Ü„ÄÇ</p>
<h2 id="3xml">3„ÄÅXMLÊò†Â∞ÑÊñá‰ª∂<a class="headerlink" href="#3xml" title="Permanent link">&para;</a></h2>
<p>SQL Êò†Â∞ÑÊñá‰ª∂Âè™ÊúâÂæàÂ∞ëÁöÑÂá†‰∏™È°∂Á∫ßÂÖÉÁ¥†ÔºàÊåâÁÖßÂ∫îË¢´ÂÆö‰πâÁöÑÈ°∫Â∫èÂàóÂá∫ÔºâÔºö</p>
<ul>
<li><code>cache</code> ‚Äì ËØ•ÂëΩÂêçÁ©∫Èó¥ÁöÑÁºìÂ≠òÈÖçÁΩÆ„ÄÇ</li>
<li><code>cache-ref</code> ‚Äì ÂºïÁî®ÂÖ∂ÂÆÉÂëΩÂêçÁ©∫Èó¥ÁöÑÁºìÂ≠òÈÖçÁΩÆ„ÄÇ</li>
<li><code>resultMap</code> ‚Äì ÊèèËø∞Â¶Ç‰Ωï‰ªéÊï∞ÊçÆÂ∫ìÁªìÊûúÈõÜ‰∏≠Âä†ËΩΩÂØπË±°ÔºåÊòØÊúÄÂ§çÊùÇ‰πüÊòØÊúÄÂº∫Â§ßÁöÑÂÖÉÁ¥†„ÄÇ</li>
<li>~~<code>parameterMap</code> ‚Äì ËÄÅÂºèÈ£éÊ†ºÁöÑÂèÇÊï∞Êò†Â∞Ñ„ÄÇÊ≠§ÂÖÉÁ¥†Â∑≤Ë¢´Â∫üÂºÉÔºåÂπ∂ÂèØËÉΩÂú®Â∞ÜÊù•Ë¢´ÁßªÈô§ÔºÅ~~</li>
<li><code>sql</code> ‚Äì ÂèØË¢´ÂÖ∂ÂÆÉËØ≠Âè•ÂºïÁî®ÁöÑÂèØÈáçÁî®ËØ≠Âè•Âùó„ÄÇ</li>
<li><code>insert</code> ‚Äì Êò†Â∞ÑÊèíÂÖ•ËØ≠Âè•„ÄÇ</li>
<li><code>update</code> ‚Äì Êò†Â∞ÑÊõ¥Êñ∞ËØ≠Âè•„ÄÇ</li>
<li><code>delete</code> ‚Äì Êò†Â∞ÑÂà†Èô§ËØ≠Âè•„ÄÇ</li>
<li><code>select</code> ‚Äì Êò†Â∞ÑÊü•ËØ¢ËØ≠Âè•„ÄÇ</li>
</ul>
<h3 id="31select">3.1„ÄÅselect<a class="headerlink" href="#31select" title="Permanent link">&para;</a></h3>
<p>Êü•ËØ¢ËØ≠Âè•ÊòØ MyBatis ‰∏≠ÊúÄÂ∏∏Áî®ÁöÑÂÖÉÁ¥†‰πã‰∏Ä‚Äî‚ÄîÂÖâËÉΩÊääÊï∞ÊçÆÂ≠òÂà∞Êï∞ÊçÆÂ∫ì‰∏≠‰ª∑ÂÄºÂπ∂‰∏çÂ§ßÔºåËøòË¶ÅËÉΩÈáçÊñ∞ÂèñÂá∫Êù•ÊâçÊúâÁî®ÔºåÂ§öÊï∞Â∫îÁî®‰πüÈÉΩÊòØÊü•ËØ¢ÊØî‰øÆÊîπË¶ÅÈ¢ëÁπÅ„ÄÇ MyBatis ÁöÑÂü∫Êú¨ÂéüÂàô‰πã‰∏ÄÊòØÔºöÂú®ÊØè‰∏™ÊèíÂÖ•„ÄÅÊõ¥Êñ∞ÊàñÂà†Èô§Êìç‰Ωú‰πãÈó¥ÔºåÈÄöÂ∏∏‰ºöÊâßË°åÂ§ö‰∏™Êü•ËØ¢Êìç‰Ωú„ÄÇÂõ†Ê≠§ÔºåMyBatis Âú®Êü•ËØ¢ÂíåÁªìÊûúÊò†Â∞ÑÂÅö‰∫ÜÁõ∏ÂΩìÂ§öÁöÑÊîπËøõ„ÄÇ‰∏Ä‰∏™ÁÆÄÂçïÊü•ËØ¢ÁöÑ select ÂÖÉÁ¥†ÊòØÈùûÂ∏∏ÁÆÄÂçïÁöÑ„ÄÇÊØîÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectPerson&quot;</span><span class="w"> </span><span class="na">parameterType=</span><span class="s">&quot;int&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;hashmap&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>PERSON<span class="w"> </span>WHERE<span class="w"> </span>ID<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p>Ëøô‰∏™ËØ≠Âè•Âêç‰∏∫ selectPersonÔºåÊé•Âèó‰∏Ä‰∏™ intÔºàÊàñ IntegerÔºâÁ±ªÂûãÁöÑÂèÇÊï∞ÔºåÂπ∂ËøîÂõû‰∏Ä‰∏™ HashMap Á±ªÂûãÁöÑÂØπË±°ÔºåÂÖ∂‰∏≠ÁöÑÈîÆÊòØÂàóÂêçÔºåÂÄº‰æøÊòØÁªìÊûúË°å‰∏≠ÁöÑÂØπÂ∫îÂÄº„ÄÇ</p>
<p>Ê≥®ÊÑèÂèÇÊï∞Á¨¶Âè∑Ôºö</p>
<div class="highlight"><pre><span></span><code>#{id}
</code></pre></div>
<p>ËøôÂ∞±ÂëäËØâ MyBatis ÂàõÂª∫‰∏Ä‰∏™È¢ÑÂ§ÑÁêÜËØ≠Âè•ÔºàPreparedStatementÔºâÂèÇÊï∞ÔºåÂú® JDBC ‰∏≠ÔºåËøôÊ†∑ÁöÑ‰∏Ä‰∏™ÂèÇÊï∞Âú® SQL ‰∏≠‰ºöÁî±‰∏Ä‰∏™‚Äú?‚ÄùÊù•Ê†áËØÜÔºåÂπ∂Ë¢´‰º†ÈÄíÂà∞‰∏Ä‰∏™Êñ∞ÁöÑÈ¢ÑÂ§ÑÁêÜËØ≠Âè•‰∏≠ÔºåÂ∞±ÂÉèËøôÊ†∑Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Ëøë‰ººÁöÑ JDBC ‰ª£Á†ÅÔºåÈùû MyBatis ‰ª£Á†Å...</span>
<span class="n">String</span><span class="w"> </span><span class="n">selectPerson</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SELECT * FROM PERSON WHERE ID=?&quot;</span><span class="p">;</span>
<span class="n">PreparedStatement</span><span class="w"> </span><span class="n">ps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">conn</span><span class="p">.</span><span class="na">prepareStatement</span><span class="p">(</span><span class="n">selectPerson</span><span class="p">);</span>
<span class="n">ps</span><span class="p">.</span><span class="na">setInt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">id</span><span class="p">);</span>
</code></pre></div>
<p>ÂΩìÁÑ∂Ôºå‰ΩøÁî® JDBC Â∞±ÊÑèÂë≥ÁùÄ‰ΩøÁî®Êõ¥Â§öÁöÑ‰ª£Á†ÅÔºå‰ª•‰æøÊèêÂèñÁªìÊûúÂπ∂Â∞ÜÂÆÉ‰ª¨Êò†Â∞ÑÂà∞ÂØπË±°ÂÆû‰æã‰∏≠ÔºåËÄåËøôÂ∞±ÊòØ MyBatis ÁöÑÊãøÊâãÂ•ΩÊàè„ÄÇ</p>
<p>select ÂÖÉÁ¥†ÂÖÅËÆ∏‰Ω†ÈÖçÁΩÆÂæàÂ§öÂ±ûÊÄßÊù•ÈÖçÁΩÆÊØèÊù°ËØ≠Âè•ÁöÑË°å‰∏∫ÁªÜËäÇ„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span>
<span class="w">  </span><span class="na">id=</span><span class="s">&quot;selectPerson&quot;</span>
<span class="w">  </span><span class="na">parameterType=</span><span class="s">&quot;int&quot;</span>
<span class="w">  </span><span class="na">parameterMap=</span><span class="s">&quot;deprecated&quot;</span>
<span class="w">  </span><span class="na">resultType=</span><span class="s">&quot;hashmap&quot;</span>
<span class="w">  </span><span class="na">resultMap=</span><span class="s">&quot;personResultMap&quot;</span>
<span class="w">  </span><span class="na">flushCache=</span><span class="s">&quot;false&quot;</span>
<span class="w">  </span><span class="na">useCache=</span><span class="s">&quot;true&quot;</span>
<span class="w">  </span><span class="na">timeout=</span><span class="s">&quot;10&quot;</span>
<span class="w">  </span><span class="na">fetchSize=</span><span class="s">&quot;256&quot;</span>
<span class="w">  </span><span class="na">statementType=</span><span class="s">&quot;PREPARED&quot;</span>
<span class="w">  </span><span class="na">resultSetType=</span><span class="s">&quot;FORWARD_ONLY&quot;</span><span class="nt">&gt;</span>
</code></pre></div>
<p><img src="!assets/Mybatis/image-20200614172418322.png" alt="image-20200614172418322" style="" /></p>
<h3 id="32insertupdatedelete">3.2„ÄÅinsert„ÄÅupdate„ÄÅdelete<a class="headerlink" href="#32insertupdatedelete" title="Permanent link">&para;</a></h3>
<p>Êï∞ÊçÆÂèòÊõ¥ËØ≠Âè• insertÔºåupdate Âíå delete ÁöÑÂÆûÁé∞ÈùûÂ∏∏Êé•ËøëÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;insert</span>
<span class="w">  </span><span class="na">id=</span><span class="s">&quot;insertAuthor&quot;</span>
<span class="w">  </span><span class="na">parameterType=</span><span class="s">&quot;domain.blog.Author&quot;</span>
<span class="w">  </span><span class="na">flushCache=</span><span class="s">&quot;true&quot;</span>
<span class="w">  </span><span class="na">statementType=</span><span class="s">&quot;PREPARED&quot;</span>
<span class="w">  </span><span class="na">keyProperty=</span><span class="s">&quot;&quot;</span>
<span class="w">  </span><span class="na">keyColumn=</span><span class="s">&quot;&quot;</span>
<span class="w">  </span><span class="na">useGeneratedKeys=</span><span class="s">&quot;&quot;</span>
<span class="w">  </span><span class="na">timeout=</span><span class="s">&quot;20&quot;</span><span class="nt">&gt;</span>

<span class="nt">&lt;update</span>
<span class="w">  </span><span class="na">id=</span><span class="s">&quot;updateAuthor&quot;</span>
<span class="w">  </span><span class="na">parameterType=</span><span class="s">&quot;domain.blog.Author&quot;</span>
<span class="w">  </span><span class="na">flushCache=</span><span class="s">&quot;true&quot;</span>
<span class="w">  </span><span class="na">statementType=</span><span class="s">&quot;PREPARED&quot;</span>
<span class="w">  </span><span class="na">timeout=</span><span class="s">&quot;20&quot;</span><span class="nt">&gt;</span>

<span class="nt">&lt;delete</span>
<span class="w">  </span><span class="na">id=</span><span class="s">&quot;deleteAuthor&quot;</span>
<span class="w">  </span><span class="na">parameterType=</span><span class="s">&quot;domain.blog.Author&quot;</span>
<span class="w">  </span><span class="na">flushCache=</span><span class="s">&quot;true&quot;</span>
<span class="w">  </span><span class="na">statementType=</span><span class="s">&quot;PREPARED&quot;</span>
<span class="w">  </span><span class="na">timeout=</span><span class="s">&quot;20&quot;</span><span class="nt">&gt;</span>
</code></pre></div>
<p><img src="!assets/Mybatis/image-20200614172730202.png" alt="image-20200614172730202" style="" /></p>
<p>‰∏ãÈù¢ÊòØ insert„ÄÅupdate„ÄÅdelete ËØ≠Âè•ÁöÑÁ§∫‰æãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;insert</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;insertAuthor&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>insert<span class="w"> </span>into<span class="w"> </span>Author<span class="w"> </span>(id,username,password,email,bio)
<span class="w">  </span>values<span class="w"> </span>(#{id},#{username},#{password},#{email},#{bio})
<span class="nt">&lt;/insert&gt;</span>

<span class="nt">&lt;update</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;updateAuthor&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>update<span class="w"> </span>Author<span class="w"> </span>set
<span class="w">    </span>username<span class="w"> </span>=<span class="w"> </span>#{username},
<span class="w">    </span>password<span class="w"> </span>=<span class="w"> </span>#{password},
<span class="w">    </span>email<span class="w"> </span>=<span class="w"> </span>#{email},
<span class="w">    </span>bio<span class="w"> </span>=<span class="w"> </span>#{bio}
<span class="w">  </span>where<span class="w"> </span>id<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="nt">&lt;/update&gt;</span>

<span class="nt">&lt;delete</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;deleteAuthor&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>delete<span class="w"> </span>from<span class="w"> </span>Author<span class="w"> </span>where<span class="w"> </span>id<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="nt">&lt;/delete&gt;</span>
</code></pre></div>
<p>Â¶ÇÂâçÊâÄËø∞ÔºåÊèíÂÖ•ËØ≠Âè•ÁöÑÈÖçÁΩÆËßÑÂàôÊõ¥Âä†‰∏∞ÂØåÔºåÂú®ÊèíÂÖ•ËØ≠Âè•ÈáåÈù¢Êúâ‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑÂ±ûÊÄßÂíåÂ≠êÂÖÉÁ¥†Áî®Êù•Â§ÑÁêÜ‰∏ªÈîÆÁöÑÁîüÊàêÔºåÂπ∂‰∏îÊèê‰æõ‰∫ÜÂ§öÁßçÁîüÊàêÊñπÂºè„ÄÇ</p>
<p>È¶ñÂÖàÔºåÂ¶ÇÊûú‰Ω†ÁöÑÊï∞ÊçÆÂ∫ìÊîØÊåÅËá™Âä®ÁîüÊàê‰∏ªÈîÆÁöÑÂ≠óÊÆµÔºàÊØîÂ¶Ç MySQL Âíå SQL ServerÔºâÔºåÈÇ£‰πà‰Ω†ÂèØ‰ª•ËÆæÁΩÆ useGeneratedKeys=‚Äùtrue‚ÄùÔºåÁÑ∂ÂêéÂÜçÊää keyProperty ËÆæÁΩÆ‰∏∫ÁõÆÊ†áÂ±ûÊÄßÂ∞± OK ‰∫Ü„ÄÇ‰æãÂ¶ÇÔºåÂ¶ÇÊûú‰∏äÈù¢ÁöÑ Author Ë°®Â∑≤ÁªèÂú® id Âàó‰∏ä‰ΩøÁî®‰∫ÜËá™Âä®ÁîüÊàêÔºåÈÇ£‰πàËØ≠Âè•ÂèØ‰ª•‰øÆÊîπ‰∏∫Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;insert</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;insertAuthor&quot;</span><span class="w"> </span><span class="na">useGeneratedKeys=</span><span class="s">&quot;true&quot;</span>
<span class="w">    </span><span class="na">keyProperty=</span><span class="s">&quot;id&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>insert<span class="w"> </span>into<span class="w"> </span>Author<span class="w"> </span>(username,password,email,bio)
<span class="w">  </span>values<span class="w"> </span>(#{username},#{password},#{email},#{bio})
<span class="nt">&lt;/insert&gt;</span>
</code></pre></div>
<p>Â¶ÇÊûú‰Ω†ÁöÑÊï∞ÊçÆÂ∫ìËøòÊîØÊåÅÂ§öË°åÊèíÂÖ•, ‰Ω†‰πüÂèØ‰ª•‰º†ÂÖ•‰∏Ä‰∏™ <code>Author</code> Êï∞ÁªÑÊàñÈõÜÂêàÔºåÂπ∂ËøîÂõûËá™Âä®ÁîüÊàêÁöÑ‰∏ªÈîÆ„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;insert</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;insertAuthor&quot;</span><span class="w"> </span><span class="na">useGeneratedKeys=</span><span class="s">&quot;true&quot;</span>
<span class="w">    </span><span class="na">keyProperty=</span><span class="s">&quot;id&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>insert<span class="w"> </span>into<span class="w"> </span>Author<span class="w"> </span>(username,<span class="w"> </span>password,<span class="w"> </span>email,<span class="w"> </span>bio)<span class="w"> </span>values
<span class="w">  </span><span class="nt">&lt;foreach</span><span class="w"> </span><span class="na">item=</span><span class="s">&quot;item&quot;</span><span class="w"> </span><span class="na">collection=</span><span class="s">&quot;list&quot;</span><span class="w"> </span><span class="na">separator=</span><span class="s">&quot;,&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>(#{item.username},<span class="w"> </span>#{item.password},<span class="w"> </span>#{item.email},<span class="w"> </span>#{item.bio})
<span class="w">  </span><span class="nt">&lt;/foreach&gt;</span>
<span class="nt">&lt;/insert&gt;</span>
</code></pre></div>
<p>ÂØπ‰∫é‰∏çÊîØÊåÅËá™Âä®ÁîüÊàê‰∏ªÈîÆÂàóÁöÑÊï∞ÊçÆÂ∫ìÂíåÂèØËÉΩ‰∏çÊîØÊåÅËá™Âä®ÁîüÊàê‰∏ªÈîÆÁöÑ JDBC È©±Âä®ÔºåMyBatis ÊúâÂè¶Â§ñ‰∏ÄÁßçÊñπÊ≥ïÊù•ÁîüÊàê‰∏ªÈîÆ„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;insert</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;insertAuthor&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;selectKey</span><span class="w"> </span><span class="na">keyProperty=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;int&quot;</span><span class="w"> </span><span class="na">order=</span><span class="s">&quot;BEFORE&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>select<span class="w"> </span>CAST(RANDOM()*1000000<span class="w"> </span>as<span class="w"> </span>INTEGER)<span class="w"> </span>a<span class="w"> </span>from<span class="w"> </span>SYSIBM.SYSDUMMY1
<span class="w">  </span><span class="nt">&lt;/selectKey&gt;</span>
<span class="w">  </span>insert<span class="w"> </span>into<span class="w"> </span>Author
<span class="w">    </span>(id,<span class="w"> </span>username,<span class="w"> </span>password,<span class="w"> </span>email,bio,<span class="w"> </span>favourite_section)
<span class="w">  </span>values
<span class="w">    </span>(#{id},<span class="w"> </span>#{username},<span class="w"> </span>#{password},<span class="w"> </span>#{email},<span class="w"> </span>#{bio},<span class="w"> </span>#{favouriteSection,jdbcType=VARCHAR})
<span class="nt">&lt;/insert&gt;</span>
</code></pre></div>
<p>Âú®‰∏äÈù¢ÁöÑÁ§∫‰æã‰∏≠ÔºåÈ¶ñÂÖà‰ºöËøêË°å selectKey ÂÖÉÁ¥†‰∏≠ÁöÑËØ≠Âè•ÔºåÂπ∂ËÆæÁΩÆ Author ÁöÑ idÔºåÁÑ∂ÂêéÊâç‰ºöË∞ÉÁî®ÊèíÂÖ•ËØ≠Âè•„ÄÇËøôÊ†∑Â∞±ÂÆûÁé∞‰∫ÜÊï∞ÊçÆÂ∫ìËá™Âä®ÁîüÊàê‰∏ªÈîÆÁ±ª‰ººÁöÑË°å‰∏∫ÔºåÂêåÊó∂‰øùÊåÅ‰∫Ü Java ‰ª£Á†ÅÁöÑÁÆÄÊ¥Å„ÄÇ</p>
<p>selectKey ÂÖÉÁ¥†ÊèèËø∞Â¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;selectKey</span>
<span class="w">  </span><span class="na">keyProperty=</span><span class="s">&quot;id&quot;</span>
<span class="w">  </span><span class="na">resultType=</span><span class="s">&quot;int&quot;</span>
<span class="w">  </span><span class="na">order=</span><span class="s">&quot;BEFORE&quot;</span>
<span class="w">  </span><span class="na">statementType=</span><span class="s">&quot;PREPARED&quot;</span><span class="nt">&gt;</span>
</code></pre></div>
<p><img src="!assets/Mybatis/image-20200614175334779.png" alt="image-20200614175334779" style="" /></p>
<p><strong>SQL</strong></p>
<p>Ëøô‰∏™ÂÖÉÁ¥†ÂèØ‰ª•Áî®Êù•ÂÆö‰πâÂèØÈáçÁî®ÁöÑ SQL ‰ª£Á†ÅÁâáÊÆµÔºå‰ª•‰æøÂú®ÂÖ∂ÂÆÉËØ≠Âè•‰∏≠‰ΩøÁî®„ÄÇ ÂèÇÊï∞ÂèØ‰ª•ÈùôÊÄÅÂú∞ÔºàÂú®Âä†ËΩΩÁöÑÊó∂ÂÄôÔºâÁ°ÆÂÆö‰∏ãÊù•ÔºåÂπ∂‰∏îÂèØ‰ª•Âú®‰∏çÂêåÁöÑ include ÂÖÉÁ¥†‰∏≠ÂÆö‰πâ‰∏çÂêåÁöÑÂèÇÊï∞ÂÄº„ÄÇÊØîÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;sql</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;userColumns&quot;</span><span class="nt">&gt;</span><span class="w"> </span>${alias}.id,${alias}.username,${alias}.password<span class="w"> </span><span class="nt">&lt;/sql&gt;</span>
</code></pre></div>
<p>Ëøô‰∏™ SQL ÁâáÊÆµÂèØ‰ª•Âú®ÂÖ∂ÂÆÉËØ≠Âè•‰∏≠‰ΩøÁî®Ôºå‰æãÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectUsers&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>select
<span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">refid=</span><span class="s">&quot;userColumns&quot;</span><span class="nt">&gt;&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;alias&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;t1&quot;</span><span class="nt">/&gt;&lt;/include&gt;</span>,
<span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">refid=</span><span class="s">&quot;userColumns&quot;</span><span class="nt">&gt;&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;alias&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;t2&quot;</span><span class="nt">/&gt;&lt;/include&gt;</span>
<span class="w">  </span>from<span class="w"> </span>some_table<span class="w"> </span>t1
<span class="w">    </span>cross<span class="w"> </span>join<span class="w"> </span>some_table<span class="w"> </span>t2
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p>‰πüÂèØ‰ª•Âú® include ÂÖÉÁ¥†ÁöÑ refid Â±ûÊÄßÊàñÂÜÖÈÉ®ËØ≠Âè•‰∏≠‰ΩøÁî®Â±ûÊÄßÂÄºÔºå‰æãÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;sql</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;sometable&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>${prefix}Table
<span class="nt">&lt;/sql&gt;</span>

<span class="nt">&lt;sql</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;someinclude&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>from
<span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">refid=</span><span class="s">&quot;${include_target}&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/sql&gt;</span>

<span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>select
<span class="w">    </span>field1,<span class="w"> </span>field2,<span class="w"> </span>field3
<span class="w">  </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">refid=</span><span class="s">&quot;someinclude&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;prefix&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Some&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;include_target&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;sometable&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/include&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<h3 id="33">3.3„ÄÅÂèÇÊï∞<a class="headerlink" href="#33" title="Permanent link">&para;</a></h3>
<p>‰πãÂâçËßÅÂà∞ÁöÑÊâÄÊúâËØ≠Âè•ÈÉΩ‰ΩøÁî®‰∫ÜÁÆÄÂçïÁöÑÂèÇÊï∞ÂΩ¢Âºè„ÄÇ‰ΩÜÂÆûÈôÖ‰∏äÔºåÂèÇÊï∞ÊòØ MyBatis ÈùûÂ∏∏Âº∫Â§ßÁöÑÂÖÉÁ¥†„ÄÇÂØπ‰∫éÂ§ßÂ§öÊï∞ÁÆÄÂçïÁöÑ‰ΩøÁî®Âú∫ÊôØÔºå‰Ω†ÈÉΩ‰∏çÈúÄË¶Å‰ΩøÁî®Â§çÊùÇÁöÑÂèÇÊï∞ÔºåÊØîÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectUsers&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;User&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>select<span class="w"> </span>id,<span class="w"> </span>username,<span class="w"> </span>password
<span class="w">  </span>from<span class="w"> </span>users
<span class="w">  </span>where<span class="w"> </span>id<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p>‰∏äÈù¢ÁöÑËøô‰∏™Á§∫‰æãËØ¥Êòé‰∫Ü‰∏Ä‰∏™ÈùûÂ∏∏ÁÆÄÂçïÁöÑÂëΩÂêçÂèÇÊï∞Êò†Â∞Ñ„ÄÇÈâ¥‰∫éÂèÇÊï∞Á±ªÂûãÔºàparameterTypeÔºâ‰ºöË¢´Ëá™Âä®ËÆæÁΩÆ‰∏∫ <code>int</code>ÔºåËøô‰∏™ÂèÇÊï∞ÂèØ‰ª•ÈöèÊÑèÂëΩÂêç„ÄÇÂéüÂßãÁ±ªÂûãÊàñÁÆÄÂçïÊï∞ÊçÆÁ±ªÂûãÔºàÊØîÂ¶Ç <code>Integer</code> Âíå <code>String</code>ÔºâÂõ†‰∏∫Ê≤°ÊúâÂÖ∂ÂÆÉÂ±ûÊÄßÔºå‰ºöÁî®ÂÆÉ‰ª¨ÁöÑÂÄºÊù•‰Ωú‰∏∫ÂèÇÊï∞„ÄÇ ÁÑ∂ËÄåÔºåÂ¶ÇÊûú‰º†ÂÖ•‰∏Ä‰∏™Â§çÊùÇÁöÑÂØπË±°ÔºåË°å‰∏∫Â∞±‰ºöÊúâÁÇπ‰∏ç‰∏ÄÊ†∑‰∫Ü„ÄÇÊØîÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;insert</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;insertUser&quot;</span><span class="w"> </span><span class="na">parameterType=</span><span class="s">&quot;User&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>insert<span class="w"> </span>into<span class="w"> </span>users<span class="w"> </span>(id,<span class="w"> </span>username,<span class="w"> </span>password)
<span class="w">  </span>values<span class="w"> </span>(#{id},<span class="w"> </span>#{username},<span class="w"> </span>#{password})
<span class="nt">&lt;/insert&gt;</span>
</code></pre></div>
<p>Â¶ÇÊûú User Á±ªÂûãÁöÑÂèÇÊï∞ÂØπË±°‰º†ÈÄíÂà∞‰∫ÜËØ≠Âè•‰∏≠Ôºå‰ºöÊü•Êâæ id„ÄÅusername Âíå password Â±ûÊÄßÔºåÁÑ∂ÂêéÂ∞ÜÂÆÉ‰ª¨ÁöÑÂÄº‰º†ÂÖ•È¢ÑÂ§ÑÁêÜËØ≠Âè•ÁöÑÂèÇÊï∞‰∏≠„ÄÇ</p>
<p>ÂØπ‰º†ÈÄíËØ≠Âè•ÂèÇÊï∞Êù•ËØ¥ÔºåËøôÁßçÊñπÂºèÁúüÊòØÂπ≤ËÑÜÂà©ËêΩ„ÄÇ‰∏çËøáÂèÇÊï∞Êò†Â∞ÑÁöÑÂäüËÉΩËøú‰∏çÊ≠¢‰∫éÊ≠§„ÄÇ</p>
<p>È¶ñÂÖàÔºåÂíå MyBatis ÁöÑÂÖ∂ÂÆÉÈÉ®ÂàÜ‰∏ÄÊ†∑ÔºåÂèÇÊï∞‰πüÂèØ‰ª•ÊåáÂÆö‰∏Ä‰∏™ÁâπÊÆäÁöÑÊï∞ÊçÆÁ±ªÂûã„ÄÇ</p>
<div class="highlight"><pre><span></span><code>#{property,javaType=int,jdbcType=NUMERIC}
</code></pre></div>
<p>Âíå MyBatis ÁöÑÂÖ∂ÂÆÉÈÉ®ÂàÜ‰∏ÄÊ†∑ÔºåÂá†‰πéÊÄªÊòØÂèØ‰ª•Ê†πÊçÆÂèÇÊï∞ÂØπË±°ÁöÑÁ±ªÂûãÁ°ÆÂÆö javaTypeÔºåÈô§ÈùûËØ•ÂØπË±°ÊòØ‰∏Ä‰∏™ <code>HashMap</code>„ÄÇËøô‰∏™Êó∂ÂÄôÔºå‰Ω†ÈúÄË¶ÅÊòæÂºèÊåáÂÆö <code>javaType</code> Êù•Á°Æ‰øùÊ≠£Á°ÆÁöÑÁ±ªÂûãÂ§ÑÁêÜÂô®Ôºà<code>TypeHandler</code>ÔºâË¢´‰ΩøÁî®„ÄÇ</p>
<p><strong>ÊèêÁ§∫</strong> JDBC Ë¶ÅÊ±ÇÔºåÂ¶ÇÊûú‰∏Ä‰∏™ÂàóÂÖÅËÆ∏‰ΩøÁî® null ÂÄºÔºåÂπ∂‰∏î‰ºö‰ΩøÁî®ÂÄº‰∏∫ null ÁöÑÂèÇÊï∞ÔºåÂ∞±ÂøÖÈ°ªË¶ÅÊåáÂÆö JDBC Á±ªÂûãÔºàjdbcTypeÔºâ„ÄÇ</p>
<p>Ë¶ÅÊõ¥Ëøõ‰∏ÄÊ≠•Âú∞Ëá™ÂÆö‰πâÁ±ªÂûãÂ§ÑÁêÜÊñπÂºèÔºåÂèØ‰ª•ÊåáÂÆö‰∏Ä‰∏™ÁâπÊÆäÁöÑÁ±ªÂûãÂ§ÑÁêÜÂô®Á±ªÔºàÊàñÂà´ÂêçÔºâÔºåÊØîÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code>#{age,javaType=int,jdbcType=NUMERIC,typeHandler=MyTypeHandler}
</code></pre></div>
<p>ÂèÇÊï∞ÁöÑÈÖçÁΩÆÂ•ΩÂÉèË∂äÊù•Ë∂äÁπÅÁêê‰∫ÜÔºå‰ΩÜÂÆûÈôÖ‰∏äÔºåÂæàÂ∞ëÈúÄË¶ÅÂ¶ÇÊ≠§ÁπÅÁêêÁöÑÈÖçÁΩÆ„ÄÇ</p>
<p>ÂØπ‰∫éÊï∞ÂÄºÁ±ªÂûãÔºåËøòÂèØ‰ª•ËÆæÁΩÆ <code>numericScale</code> ÊåáÂÆöÂ∞èÊï∞ÁÇπÂêé‰øùÁïôÁöÑ‰ΩçÊï∞„ÄÇ</p>
<div class="highlight"><pre><span></span><code>#{height,javaType=double,jdbcType=NUMERIC,numericScale=2}
</code></pre></div>
<p>ÊúÄÂêéÔºåmode Â±ûÊÄßÂÖÅËÆ∏‰Ω†ÊåáÂÆö <code>IN</code>Ôºå<code>OUT</code> Êàñ <code>INOUT</code> ÂèÇÊï∞„ÄÇÂ¶ÇÊûúÂèÇÊï∞ÁöÑ <code>mode</code> ‰∏∫ <code>OUT</code> Êàñ <code>INOUT</code>ÔºåÂ∞Ü‰ºö‰øÆÊîπÂèÇÊï∞ÂØπË±°ÁöÑÂ±ûÊÄßÂÄºÔºå‰ª•‰æø‰Ωú‰∏∫ËæìÂá∫ÂèÇÊï∞ËøîÂõû„ÄÇ Â¶ÇÊûú <code>mode</code> ‰∏∫ <code>OUT</code>ÔºàÊàñ <code>INOUT</code>ÔºâÔºåËÄå‰∏î <code>jdbcType</code> ‰∏∫ <code>CURSOR</code>Ôºà‰πüÂ∞±ÊòØ Oracle ÁöÑ REFCURSORÔºâÔºå‰Ω†ÂøÖÈ°ªÊåáÂÆö‰∏Ä‰∏™ <code>resultMap</code> ÂºïÁî®Êù•Â∞ÜÁªìÊûúÈõÜ <code>ResultMap</code> Êò†Â∞ÑÂà∞ÂèÇÊï∞ÁöÑÁ±ªÂûã‰∏ä„ÄÇË¶ÅÊ≥®ÊÑèËøôÈáåÁöÑ <code>javaType</code> Â±ûÊÄßÊòØÂèØÈÄâÁöÑÔºåÂ¶ÇÊûúÁïôÁ©∫Âπ∂‰∏î jdbcType ÊòØ <code>CURSOR</code>ÔºåÂÆÉ‰ºöË¢´Ëá™Âä®Âú∞Ë¢´ËÆæ‰∏∫ <code>ResultMap</code>„ÄÇ</p>
<div class="highlight"><pre><span></span><code>#{department,<span class="w"> </span>mode=OUT,<span class="w"> </span>jdbcType=CURSOR,<span class="w"> </span>javaType=ResultSet,<span class="w"> </span>resultMap=departmentResultMap}
</code></pre></div>
<p>MyBatis ‰πüÊîØÊåÅÂæàÂ§öÈ´òÁ∫ßÁöÑÊï∞ÊçÆÁ±ªÂûãÔºåÊØîÂ¶ÇÁªìÊûÑ‰ΩìÔºàstructsÔºâÔºå‰ΩÜÊòØÂΩì‰ΩøÁî® out ÂèÇÊï∞Êó∂Ôºå‰Ω†ÂøÖÈ°ªÊòæÂºèËÆæÁΩÆÁ±ªÂûãÁöÑÂêçÁß∞„ÄÇÊØîÂ¶ÇÔºàÂÜçÊ¨°ÊèêÁ§∫ÔºåÂú®ÂÆûÈôÖ‰∏≠Ë¶ÅÂÉèËøôÊ†∑‰∏çËÉΩÊç¢Ë°åÔºâÔºö</p>
<div class="highlight"><pre><span></span><code>#{middleInitial,<span class="w"> </span>mode=OUT,<span class="w"> </span>jdbcType=STRUCT,<span class="w"> </span>jdbcTypeName=MY_TYPE,<span class="w"> </span>resultMap=departmentResultMap}
</code></pre></div>
<p>Â∞ΩÁÆ°‰∏äÈù¢Ëøô‰∫õÈÄâÈ°πÂæàÂº∫Â§ßÔºå‰ΩÜÂ§ßÂ§öÊó∂ÂÄôÔºå‰Ω†Âè™È°ªÁÆÄÂçïÊåáÂÆöÂ±ûÊÄßÂêçÔºåÈ°∂Â§öË¶Å‰∏∫ÂèØËÉΩ‰∏∫Á©∫ÁöÑÂàóÊåáÂÆö <code>jdbcType</code>ÔºåÂÖ∂‰ªñÁöÑ‰∫ãÊÉÖ‰∫§Áªô MyBatis Ëá™Â∑±ÂéªÊé®Êñ≠Â∞±Ë°å‰∫Ü„ÄÇ</p>
<div class="highlight"><pre><span></span><code>#{firstName}
#{middleInitial,jdbcType=VARCHAR}
#{lastName}
</code></pre></div>
<p><strong>Â≠óÁ¨¶‰∏≤ÊõøÊç¢</strong></p>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå‰ΩøÁî® <code>#{}</code> ÂèÇÊï∞ËØ≠Ê≥ïÊó∂ÔºåMyBatis ‰ºöÂàõÂª∫ <code>PreparedStatement</code> ÂèÇÊï∞Âç†‰ΩçÁ¨¶ÔºåÂπ∂ÈÄöËøáÂç†‰ΩçÁ¨¶ÂÆâÂÖ®Âú∞ËÆæÁΩÆÂèÇÊï∞ÔºàÂ∞±ÂÉè‰ΩøÁî® ? ‰∏ÄÊ†∑Ôºâ„ÄÇ ËøôÊ†∑ÂÅöÊõ¥ÂÆâÂÖ®ÔºåÊõ¥ËøÖÈÄüÔºåÈÄöÂ∏∏‰πüÊòØÈ¶ñÈÄâÂÅöÊ≥ïÔºå‰∏çËøáÊúâÊó∂‰Ω†Â∞±ÊòØÊÉ≥Áõ¥Êé•Âú® SQL ËØ≠Âè•‰∏≠Áõ¥Êé•ÊèíÂÖ•‰∏Ä‰∏™‰∏çËΩ¨‰πâÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ ÊØîÂ¶Ç ORDER BY Â≠êÂè•ÔºåËøôÊó∂ÂÄô‰Ω†ÂèØ‰ª•Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">$</span><span class="err">{</span><span class="n">columnName</span><span class="err">}</span>
</code></pre></div>
<p>ËøôÊ†∑ÔºåMyBatis Â∞±‰∏ç‰ºö‰øÆÊîπÊàñËΩ¨‰πâËØ•Â≠óÁ¨¶‰∏≤‰∫Ü„ÄÇ</p>
<p>ÂΩì SQL ËØ≠Âè•‰∏≠ÁöÑÂÖÉÊï∞ÊçÆÔºàÂ¶ÇË°®ÂêçÊàñÂàóÂêçÔºâÊòØÂä®ÊÄÅÁîüÊàêÁöÑÊó∂ÂÄôÔºåÂ≠óÁ¨¶‰∏≤ÊõøÊç¢Â∞Ü‰ºöÈùûÂ∏∏ÊúâÁî®„ÄÇ ‰∏æ‰∏™‰æãÂ≠êÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥ <code>select</code> ‰∏Ä‰∏™Ë°®‰ªªÊÑè‰∏ÄÂàóÁöÑÊï∞ÊçÆÊó∂Ôºå‰∏çÈúÄË¶ÅËøôÊ†∑ÂÜôÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Select</span><span class="p">(</span><span class="s">&quot;select * from user where id = #{id}&quot;</span><span class="p">)</span>
<span class="n">User</span><span class="w"> </span><span class="nf">findById</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">)</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>

<span class="nd">@Select</span><span class="p">(</span><span class="s">&quot;select * from user where name = #{name}&quot;</span><span class="p">)</span>
<span class="n">User</span><span class="w"> </span><span class="nf">findByName</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>

<span class="nd">@Select</span><span class="p">(</span><span class="s">&quot;select * from user where email = #{email}&quot;</span><span class="p">)</span>
<span class="n">User</span><span class="w"> </span><span class="nf">findByEmail</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;email&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">email</span><span class="p">);</span>

<span class="c1">// ÂÖ∂ÂÆÉÁöÑ &quot;findByXxx&quot; ÊñπÊ≥ï</span>
</code></pre></div>
<p>ËÄåÊòØÂèØ‰ª•Âè™ÂÜôËøôÊ†∑‰∏Ä‰∏™ÊñπÊ≥ïÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Select</span><span class="p">(</span><span class="s">&quot;select * from user where ${column} = #{value}&quot;</span><span class="p">)</span>
<span class="n">User</span><span class="w"> </span><span class="nf">findByColumn</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;column&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">column</span><span class="p">,</span><span class="w"> </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">);</span>
</code></pre></div>
<p>ÂÖ∂‰∏≠ <code>${column}</code> ‰ºöË¢´Áõ¥Êé•ÊõøÊç¢ÔºåËÄå <code>#{value}</code> ‰ºö‰ΩøÁî® <code>?</code> È¢ÑÂ§ÑÁêÜ„ÄÇ ËøôÊ†∑ÔºåÂ∞±ËÉΩÂÆåÊàêÂêåÊ†∑ÁöÑ‰ªªÂä°Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="n">User</span><span class="w"> </span><span class="n">userOfId1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userMapper</span><span class="p">.</span><span class="na">findByColumn</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1L</span><span class="p">);</span>
<span class="n">User</span><span class="w"> </span><span class="n">userOfNameKid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userMapper</span><span class="p">.</span><span class="na">findByColumn</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;kid&quot;</span><span class="p">);</span>
<span class="n">User</span><span class="w"> </span><span class="n">userOfEmail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userMapper</span><span class="p">.</span><span class="na">findByColumn</span><span class="p">(</span><span class="s">&quot;email&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;noone@nowhere.com&quot;</span><span class="p">);</span>
</code></pre></div>
<p>ËøôÁßçÊñπÂºè‰πüÂêåÊ†∑ÈÄÇÁî®‰∫éÊõøÊç¢Ë°®ÂêçÁöÑÊÉÖÂÜµ„ÄÇ</p>
<p><strong>ÊèêÁ§∫</strong> Áî®ËøôÁßçÊñπÂºèÊé•ÂèóÁî®Êà∑ÁöÑËæìÂÖ•ÔºåÂπ∂Áî®‰ΩúËØ≠Âè•ÂèÇÊï∞ÊòØ‰∏çÂÆâÂÖ®ÁöÑÔºå‰ºöÂØºËá¥ÊΩúÂú®ÁöÑ SQL Ê≥®ÂÖ•ÊîªÂáª„ÄÇÂõ†Ê≠§ÔºåË¶Å‰πà‰∏çÂÖÅËÆ∏Áî®Êà∑ËæìÂÖ•Ëøô‰∫õÂ≠óÊÆµÔºåË¶Å‰πàËá™Ë°åËΩ¨‰πâÂπ∂Ê£ÄÈ™åËøô‰∫õÂèÇÊï∞„ÄÇ</p>
<h3 id="34">3.4„ÄÅÁªìÊûúÊò†Â∞Ñ<a class="headerlink" href="#34" title="Permanent link">&para;</a></h3>
<p><code>resultMap</code> ÂÖÉÁ¥†ÊòØ MyBatis ‰∏≠ÊúÄÈáçË¶ÅÊúÄÂº∫Â§ßÁöÑÂÖÉÁ¥†„ÄÇResultMap ÁöÑËÆæËÆ°ÊÄùÊÉ≥ÊòØÔºåÂØπÁÆÄÂçïÁöÑËØ≠Âè•ÂÅöÂà∞Èõ∂ÈÖçÁΩÆÔºåÂØπ‰∫éÂ§çÊùÇ‰∏ÄÁÇπÁöÑËØ≠Âè•ÔºåÂè™ÈúÄË¶ÅÊèèËø∞ËØ≠Âè•‰πãÈó¥ÁöÑÂÖ≥Á≥ªÂ∞±Ë°å‰∫Ü„ÄÇ</p>
<p>‰πãÂâçÂ∑≤ÁªèËßÅËøáÁÆÄÂçïÊò†Â∞ÑËØ≠Âè•ÁöÑÁ§∫‰æãÔºåÂÆÉ‰ª¨Ê≤°ÊúâÊòæÂºèÊåáÂÆö <code>resultMap</code>„ÄÇÊØîÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectUsers&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>select<span class="w"> </span>id,<span class="w"> </span>username,<span class="w"> </span>hashedPassword
<span class="w">  </span>from<span class="w"> </span>some_table
<span class="w">  </span>where<span class="w"> </span>id<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p>‰∏äËø∞ËØ≠Âè•Âè™ÊòØÁÆÄÂçïÂú∞Â∞ÜÊâÄÊúâÁöÑÂàóÊò†Â∞ÑÂà∞ <code>HashMap</code> ÁöÑÈîÆ‰∏äÔºåËøôÁî± <code>resultType</code> Â±ûÊÄßÊåáÂÆö„ÄÇËôΩÁÑ∂Âú®Â§ßÈÉ®ÂàÜÊÉÖÂÜµ‰∏ãÈÉΩÂ§üÁî®Ôºå‰ΩÜÊòØÁ®ãÂ∫èÊõ¥ÂèØËÉΩ‰ºö‰ΩøÁî® JavaBean Êàñ POJOÔºàPlain Old Java ObjectsÔºåÊôÆÈÄöËÄÅÂºè Java ÂØπË±°Ôºâ‰Ωú‰∏∫È¢ÜÂüüÊ®°Âûã„ÄÇMyBatis ÂØπ‰∏§ËÄÖÈÉΩÊèê‰æõ‰∫ÜÊîØÊåÅ„ÄÇÁúãÁúã‰∏ãÈù¢Ëøô‰∏™ JavaBeanÔºö</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.someapp.model</span><span class="p">;</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">username</span><span class="p">;</span>
<span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">hashedPassword</span><span class="p">;</span>
<span class="w">  </span><span class="c1">// get,set...</span>
<span class="p">}</span>
</code></pre></div>
<p>Âü∫‰∫é JavaBean ÁöÑËßÑËåÉÔºå‰∏äÈù¢Ëøô‰∏™Á±ªÊúâ 3 ‰∏™Â±ûÊÄßÔºöid„ÄÅusername Âíå hashedPassword„ÄÇËøô‰∫õÂ±ûÊÄß‰ºöÂØπÂ∫îÂà∞ <code>SELECT</code> ËØ≠Âè•‰∏≠ÁöÑÂàóÂêç„ÄÇ</p>
<p>ËøôÊ†∑ÁöÑ‰∏Ä‰∏™ JavaBean ÂèØ‰ª•Ë¢´Êò†Â∞ÑÂà∞ <code>ResultSet</code>ÔºåÂ∞±ÂÉèÊò†Â∞ÑÂà∞ <code>HashMap</code> ‰∏ÄÊ†∑ÁÆÄÂçïÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectUsers&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;com.someapp.model.User&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>select<span class="w"> </span>id,<span class="w"> </span>username,<span class="w"> </span>hashedPassword
<span class="w">  </span>from<span class="w"> </span>some_table
<span class="w">  </span>where<span class="w"> </span>id<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p>‰ΩøÁî®Á±ªÂûãÂà´ÂêçÂ∞±ÂèØ‰ª•‰∏çÁî®ËæìÂÖ•Á±ªÁöÑÂÖ®ÈôêÂÆöÂêç‰∫Ü„ÄÇÊØîÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- mybatis-config.xml ‰∏≠ --&gt;</span>
<span class="nt">&lt;typeAlias</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;com.someapp.model.User&quot;</span><span class="w"> </span><span class="na">alias=</span><span class="s">&quot;User&quot;</span><span class="nt">/&gt;</span>

<span class="cm">&lt;!-- SQL Êò†Â∞Ñ XML ‰∏≠ --&gt;</span>
<span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectUsers&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;User&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>select<span class="w"> </span>id,<span class="w"> </span>username,<span class="w"> </span>hashedPassword
<span class="w">  </span>from<span class="w"> </span>some_table
<span class="w">  </span>where<span class="w"> </span>id<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p>Âú®Ëøô‰∫õÊÉÖÂÜµ‰∏ãÔºåMyBatis ‰ºöÂú®ÂπïÂêéËá™Âä®ÂàõÂª∫‰∏Ä‰∏™ <code>ResultMap</code>ÔºåÂÜçÊ†πÊçÆÂ±ûÊÄßÂêçÊù•Êò†Â∞ÑÂàóÂà∞ JavaBean ÁöÑÂ±ûÊÄß‰∏ä„ÄÇÂ¶ÇÊûúÂàóÂêçÂíåÂ±ûÊÄßÂêç‰∏çËÉΩÂåπÈÖç‰∏äÔºåÂèØ‰ª•Âú® <code>SELECT</code> ËØ≠Âè•‰∏≠ËÆæÁΩÆÂàóÂà´ÂêçÔºàËøôÊòØ‰∏Ä‰∏™Âü∫Êú¨ÁöÑ SQL ÁâπÊÄßÔºâÊù•ÂÆåÊàêÂåπÈÖç„ÄÇÊØîÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectUsers&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;User&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>select
<span class="w">    </span>user_id<span class="w">             </span>as<span class="w"> </span>&quot;id&quot;,
<span class="w">    </span>user_name<span class="w">           </span>as<span class="w"> </span>&quot;userName&quot;,
<span class="w">    </span>hashed_password<span class="w">     </span>as<span class="w"> </span>&quot;hashedPassword&quot;
<span class="w">  </span>from<span class="w"> </span>some_table
<span class="w">  </span>where<span class="w"> </span>id<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p>‰∏äÈù¢ÁöÑ‰æãÂ≠êÊ≤°Êúâ‰∏Ä‰∏™ÈúÄË¶ÅÊòæÂºèÈÖçÁΩÆ <code>ResultMap</code>ÔºåËøôÂ∞±ÊòØ <code>ResultMap</code> ÁöÑ‰ºòÁßÄ‰πãÂ§ÑÔºöÂÆåÂÖ®ÂèØ‰ª•‰∏çÁî®ÊòæÂºèÂú∞ÈÖçÁΩÆÂÆÉ‰ª¨„ÄÇ Âú®ÂàöÂàöÁöÑÁ§∫‰æã‰∏≠ÔºåËß£ÂÜ≥ÂàóÂêç‰∏çÂåπÈÖçÁöÑÂè¶Â§ñ‰∏ÄÁßçÊñπÂºèÔºåÂ∞±ÊòØÊòæÂºè‰ΩøÁî®Â§ñÈÉ®ÁöÑ <code>resultMap</code>Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;userResultMap&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;User&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;user_id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;user_name&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;password&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;hashed_password&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
</code></pre></div>
<p>ÁÑ∂ÂêéÂú®ÂºïÁî®ÂÆÉÁöÑËØ≠Âè•‰∏≠ËÆæÁΩÆ <code>resultMap</code> Â±ûÊÄßÂ∞±Ë°å‰∫ÜÔºàÊ≥®ÊÑèÂéªÊéâ‰∫Ü <code>resultType</code> Â±ûÊÄßÔºâ„ÄÇÊØîÂ¶Ç:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectUsers&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;userResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>select<span class="w"> </span>user_id,<span class="w"> </span>user_name,<span class="w"> </span>hashed_password
<span class="w">  </span>from<span class="w"> </span>some_table
<span class="w">  </span>where<span class="w"> </span>id<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<h4 id="341">3.4.1„ÄÅÈ´òÁ∫ßÁªìÊûúÊò†Â∞Ñ<a class="headerlink" href="#341" title="Permanent link">&para;</a></h4>
<p>ÈÇ£‰πàÂ¶Ç‰ΩïÊò†Â∞Ñ‰∏ãÈù¢Ëøô‰∏™ÈùûÂ∏∏Â§çÊùÇÁöÑËØ≠Âè•Ôºü</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- ÈùûÂ∏∏Â§çÊùÇÁöÑËØ≠Âè• --&gt;</span>
<span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectBlogDetails&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;detailedBlogResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>select
<span class="w">       </span>B.id<span class="w"> </span>as<span class="w"> </span>blog_id,
<span class="w">       </span>B.title<span class="w"> </span>as<span class="w"> </span>blog_title,
<span class="w">       </span>B.author_id<span class="w"> </span>as<span class="w"> </span>blog_author_id,
<span class="w">       </span>A.id<span class="w"> </span>as<span class="w"> </span>author_id,
<span class="w">       </span>A.username<span class="w"> </span>as<span class="w"> </span>author_username,
<span class="w">       </span>A.password<span class="w"> </span>as<span class="w"> </span>author_password,
<span class="w">       </span>A.email<span class="w"> </span>as<span class="w"> </span>author_email,
<span class="w">       </span>A.bio<span class="w"> </span>as<span class="w"> </span>author_bio,
<span class="w">       </span>A.favourite_section<span class="w"> </span>as<span class="w"> </span>author_favourite_section,
<span class="w">       </span>P.id<span class="w"> </span>as<span class="w"> </span>post_id,
<span class="w">       </span>P.blog_id<span class="w"> </span>as<span class="w"> </span>post_blog_id,
<span class="w">       </span>P.author_id<span class="w"> </span>as<span class="w"> </span>post_author_id,
<span class="w">       </span>P.created_on<span class="w"> </span>as<span class="w"> </span>post_created_on,
<span class="w">       </span>P.section<span class="w"> </span>as<span class="w"> </span>post_section,
<span class="w">       </span>P.subject<span class="w"> </span>as<span class="w"> </span>post_subject,
<span class="w">       </span>P.draft<span class="w"> </span>as<span class="w"> </span>draft,
<span class="w">       </span>P.body<span class="w"> </span>as<span class="w"> </span>post_body,
<span class="w">       </span>C.id<span class="w"> </span>as<span class="w"> </span>comment_id,
<span class="w">       </span>C.post_id<span class="w"> </span>as<span class="w"> </span>comment_post_id,
<span class="w">       </span>C.name<span class="w"> </span>as<span class="w"> </span>comment_name,
<span class="w">       </span>C.comment<span class="w"> </span>as<span class="w"> </span>comment_text,
<span class="w">       </span>T.id<span class="w"> </span>as<span class="w"> </span>tag_id,
<span class="w">       </span>T.name<span class="w"> </span>as<span class="w"> </span>tag_name
<span class="w">  </span>from<span class="w"> </span>Blog<span class="w"> </span>B
<span class="w">       </span>left<span class="w"> </span>outer<span class="w"> </span>join<span class="w"> </span>Author<span class="w"> </span>A<span class="w"> </span>on<span class="w"> </span>B.author_id<span class="w"> </span>=<span class="w"> </span>A.id
<span class="w">       </span>left<span class="w"> </span>outer<span class="w"> </span>join<span class="w"> </span>Post<span class="w"> </span>P<span class="w"> </span>on<span class="w"> </span>B.id<span class="w"> </span>=<span class="w"> </span>P.blog_id
<span class="w">       </span>left<span class="w"> </span>outer<span class="w"> </span>join<span class="w"> </span>Comment<span class="w"> </span>C<span class="w"> </span>on<span class="w"> </span>P.id<span class="w"> </span>=<span class="w"> </span>C.post_id
<span class="w">       </span>left<span class="w"> </span>outer<span class="w"> </span>join<span class="w"> </span>Post_Tag<span class="w"> </span>PT<span class="w"> </span>on<span class="w"> </span>PT.post_id<span class="w"> </span>=<span class="w"> </span>P.id
<span class="w">       </span>left<span class="w"> </span>outer<span class="w"> </span>join<span class="w"> </span>Tag<span class="w"> </span>T<span class="w"> </span>on<span class="w"> </span>PT.tag_id<span class="w"> </span>=<span class="w"> </span>T.id
<span class="w">  </span>where<span class="w"> </span>B.id<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p>ÂèØ‰ª•ÊääÂÆÉÊò†Â∞ÑÂà∞‰∏Ä‰∏™Êô∫ËÉΩÁöÑÂØπË±°Ê®°ÂûãÔºåËøô‰∏™ÂØπË±°Ë°®Á§∫‰∫Ü‰∏ÄÁØáÂçöÂÆ¢ÔºåÂÆÉÁî±Êüê‰Ωç‰ΩúËÄÖÊâÄÂÜôÔºåÊúâÂæàÂ§öÁöÑÂçöÊñáÔºåÊØèÁØáÂçöÊñáÊúâÈõ∂ÊàñÂ§öÊù°ÁöÑËØÑËÆ∫ÂíåÊ†áÁ≠æÔºö</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- ÈùûÂ∏∏Â§çÊùÇÁöÑÁªìÊûúÊò†Â∞Ñ --&gt;</span>
<span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;detailedBlogResultMap&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;Blog&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;constructor&gt;</span>
<span class="w">    </span><span class="nt">&lt;idArg</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;blog_id&quot;</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;int&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/constructor&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;title&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;blog_title&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;association</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;author&quot;</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;Author&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_username&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;password&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_password&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;email&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_email&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;bio&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_bio&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;favouriteSection&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_favourite_section&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/association&gt;</span>
<span class="w">  </span><span class="nt">&lt;collection</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;posts&quot;</span><span class="w"> </span><span class="na">ofType=</span><span class="s">&quot;Post&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;post_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;subject&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;post_subject&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;association</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;author&quot;</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;Author&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;collection</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;comments&quot;</span><span class="w"> </span><span class="na">ofType=</span><span class="s">&quot;Comment&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;comment_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/collection&gt;</span>
<span class="w">    </span><span class="nt">&lt;collection</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;tags&quot;</span><span class="w"> </span><span class="na">ofType=</span><span class="s">&quot;Tag&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;tag_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/collection&gt;</span>
<span class="w">    </span><span class="nt">&lt;discriminator</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;int&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;draft&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;case</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;DraftPost&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/discriminator&gt;</span>
<span class="w">  </span><span class="nt">&lt;/collection&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
</code></pre></div>
<p><code>resultMap</code> ÂÖÉÁ¥†ÊúâÂæàÂ§öÂ≠êÂÖÉÁ¥†Âíå‰∏Ä‰∏™ÂÄºÂæóÊ∑±ÂÖ•Êé¢ËÆ®ÁöÑÁªìÊûÑ„ÄÇ </p>
<p>‰∏ãÈù¢ÊòØ <code>resultMap</code> ÂÖÉÁ¥†ÁöÑÊ¶ÇÂøµËßÜÂõæÔºö</p>
<ul>
<li><code>constructor</code>ÔºöÁî®‰∫éÂú®ÂÆû‰æãÂåñÁ±ªÊó∂ÔºåÊ≥®ÂÖ•ÁªìÊûúÂà∞ÊûÑÈÄ†ÊñπÊ≥ï‰∏≠„ÄÇ<ul>
<li><code>idArg</code>ÔºöID ÂèÇÊï∞ÔºõÊ†áËÆ∞Âá∫‰Ωú‰∏∫ ID ÁöÑÁªìÊûúÂèØ‰ª•Â∏ÆÂä©ÊèêÈ´òÊï¥‰ΩìÊÄßËÉΩ„ÄÇ</li>
<li><code>arg</code>ÔºöÂ∞ÜË¢´Ê≥®ÂÖ•Âà∞ÊûÑÈÄ†ÊñπÊ≥ïÁöÑ‰∏Ä‰∏™ÊôÆÈÄöÁªìÊûú„ÄÇ</li>
</ul>
</li>
<li><code>id</code>Ôºö‰∏Ä‰∏™ ID ÁªìÊûúÔºõÊ†áËÆ∞Âá∫‰Ωú‰∏∫ ID ÁöÑÁªìÊûúÂèØ‰ª•Â∏ÆÂä©ÊèêÈ´òÊï¥‰ΩìÊÄßËÉΩ„ÄÇ</li>
<li><code>result</code>ÔºöÊ≥®ÂÖ•Âà∞Â≠óÊÆµÊàñ JavaBean Â±ûÊÄßÁöÑÊôÆÈÄöÁªìÊûú„ÄÇ</li>
<li><code>association</code>Ôºö‰∏Ä‰∏™Â§çÊùÇÁ±ªÂûãÁöÑÂÖ≥ËÅîÔºõËÆ∏Â§öÁªìÊûúÂ∞ÜÂåÖË£ÖÊàêËøôÁßçÁ±ªÂûã„ÄÇ</li>
<li><code>collection</code>Ôºö‰∏Ä‰∏™Â§çÊùÇÁ±ªÂûãÁöÑÈõÜÂêà„ÄÇ</li>
<li><code>discriminator</code>Ôºö‰ΩøÁî®ÁªìÊûúÂÄºÊù•ÂÜ≥ÂÆö‰ΩøÁî®Âì™‰∏™ <code>resultMap</code>„ÄÇ<ul>
<li><code>case</code>ÔºöÂü∫‰∫éÊüê‰∫õÂÄºÁöÑÁªìÊûúÊò†Â∞Ñ„ÄÇ</li>
</ul>
</li>
</ul>
<p>ResultMap ÁöÑÂ±ûÊÄßÂàóË°®Ôºö</p>
<table>
<thead>
<tr>
<th>Â±ûÊÄß</th>
<th>ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>ÂΩìÂâçÂëΩÂêçÁ©∫Èó¥‰∏≠ÁöÑ‰∏Ä‰∏™ÂîØ‰∏ÄÊ†áËØÜÔºåÁî®‰∫éÊ†áËØÜ‰∏Ä‰∏™ÁªìÊûúÊò†Â∞Ñ„ÄÇ</td>
</tr>
<tr>
<td><code>type</code></td>
<td>Á±ªÁöÑÂÆåÂÖ®ÈôêÂÆöÂêç, ÊàñËÄÖ‰∏Ä‰∏™Á±ªÂûãÂà´ÂêçÔºàÂÖ≥‰∫éÂÜÖÁΩÆÁöÑÁ±ªÂûãÂà´ÂêçÔºåÂèØ‰ª•ÂèÇËÄÉ‰∏äÈù¢ÁöÑË°®Ê†ºÔºâ„ÄÇ</td>
</tr>
<tr>
<td><code>autoMapping</code></td>
<td>Â¶ÇÊûúËÆæÁΩÆËøô‰∏™Â±ûÊÄßÔºåMyBatis Â∞Ü‰ºö‰∏∫Êú¨ÁªìÊûúÊò†Â∞ÑÂºÄÂêØÊàñËÄÖÂÖ≥Èó≠Ëá™Âä®Êò†Â∞Ñ„ÄÇ Ëøô‰∏™Â±ûÊÄß‰ºöË¶ÜÁõñÂÖ®Â±ÄÁöÑÂ±ûÊÄß <code>autoMappingBehavior</code>„ÄÇÈªòËÆ§ÂÄºÔºöÊú™ËÆæÁΩÆÔºà<code>unset</code>Ôºâ„ÄÇ</td>
</tr>
</tbody>
</table>
<h4 id="342id-result">3.4.2„ÄÅid &amp; result<a class="headerlink" href="#342id-result" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;post_id&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;subject&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;post_subject&quot;</span><span class="nt">/&gt;</span>
</code></pre></div>
<p>Ëøô‰∫õÂÖÉÁ¥†ÊòØÁªìÊûúÊò†Â∞ÑÁöÑÂü∫Á°Ä„ÄÇ<code>id</code> Âíå <code>result</code> ÂÖÉÁ¥†ÈÉΩÂ∞Ü‰∏Ä‰∏™ÂàóÁöÑÂÄºÊò†Â∞ÑÂà∞‰∏Ä‰∏™ÁÆÄÂçïÊï∞ÊçÆÁ±ªÂûãÔºàString„ÄÅint„ÄÅdouble„ÄÅDate Á≠âÔºâÁöÑÂ±ûÊÄßÊàñÂ≠óÊÆµ„ÄÇ</p>
<p>Ëøô‰∏§ËÄÖ‰πãÈó¥ÁöÑÂîØ‰∏Ä‰∏çÂêåÊòØÔºå<code>id</code> ÂÖÉÁ¥†ÂØπÂ∫îÁöÑÂ±ûÊÄß‰ºöË¢´Ê†áËÆ∞‰∏∫ÂØπË±°ÁöÑÊ†áËØÜÁ¨¶ÔºåÂú®ÊØîËæÉÂØπË±°ÂÆû‰æãÊó∂‰ΩøÁî®„ÄÇ ËøôÊ†∑ÂèØ‰ª•ÊèêÈ´òÊï¥‰ΩìÁöÑÊÄßËÉΩÔºåÂ∞§ÂÖ∂ÊòØËøõË°åÁºìÂ≠òÂíåÂµåÂ•óÁªìÊûúÊò†Â∞ÑÔºà‰πüÂ∞±ÊòØËøûÊé•Êò†Â∞ÑÔºâÁöÑÊó∂ÂÄô„ÄÇ</p>
<p>‰∏§‰∏™ÂÖÉÁ¥†ÈÉΩÊúâ‰∏Ä‰∫õÂ±ûÊÄßÔºö</p>
<table>
<thead>
<tr>
<th>Â±ûÊÄß</th>
<th>ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>property</code></td>
<td>Êò†Â∞ÑÂà∞ÂàóÁªìÊûúÁöÑÂ≠óÊÆµÊàñÂ±ûÊÄß„ÄÇÂ¶ÇÊûú JavaBean ÊúâËøô‰∏™ÂêçÂ≠óÁöÑÂ±ûÊÄßÔºàpropertyÔºâÔºå‰ºöÂÖà‰ΩøÁî®ËØ•Â±ûÊÄß„ÄÇÂê¶Âàô MyBatis Â∞Ü‰ºöÂØªÊâæÁªôÂÆöÂêçÁß∞ÁöÑÂ≠óÊÆµÔºàfieldÔºâ„ÄÇ Êó†ËÆ∫ÊòØÂì™‰∏ÄÁßçÊÉÖÂΩ¢Ôºå‰Ω†ÈÉΩÂèØ‰ª•‰ΩøÁî®Â∏∏ËßÅÁöÑÁÇπÂºèÂàÜÈöîÂΩ¢ÂºèËøõË°åÂ§çÊùÇÂ±ûÊÄßÂØºËà™„ÄÇ ÊØîÂ¶ÇÔºå‰Ω†ÂèØ‰ª•ËøôÊ†∑Êò†Â∞Ñ‰∏Ä‰∫õÁÆÄÂçïÁöÑ‰∏úË•øÔºö‚Äúusername‚ÄùÔºåÊàñËÄÖÊò†Â∞ÑÂà∞‰∏Ä‰∫õÂ§çÊùÇÁöÑ‰∏úË•ø‰∏äÔºö‚Äúaddress.street.number‚Äù„ÄÇ</td>
</tr>
<tr>
<td><code>column</code></td>
<td>Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÂàóÂêçÔºåÊàñËÄÖÊòØÂàóÁöÑÂà´Âêç„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåËøôÂíå‰º†ÈÄíÁªô <code>resultSet.getString(columnName)</code> ÊñπÊ≥ïÁöÑÂèÇÊï∞‰∏ÄÊ†∑„ÄÇ</td>
</tr>
<tr>
<td><code>javaType</code></td>
<td>‰∏Ä‰∏™ Java Á±ªÁöÑÂÖ®ÈôêÂÆöÂêçÔºåÊàñ‰∏Ä‰∏™Á±ªÂûãÂà´ÂêçÔºàÂÖ≥‰∫éÂÜÖÁΩÆÁöÑÁ±ªÂûãÂà´ÂêçÔºåÂèØ‰ª•ÂèÇËÄÉ‰∏äÈù¢ÁöÑË°®Ê†ºÔºâ„ÄÇ Â¶ÇÊûú‰Ω†Êò†Â∞ÑÂà∞‰∏Ä‰∏™ JavaBeanÔºåMyBatis ÈÄöÂ∏∏ÂèØ‰ª•Êé®Êñ≠Á±ªÂûã„ÄÇÁÑ∂ËÄåÔºåÂ¶ÇÊûú‰Ω†Êò†Â∞ÑÂà∞ÁöÑÊòØ HashMapÔºåÈÇ£‰πà‰Ω†Â∫îËØ•ÊòéÁ°ÆÂú∞ÊåáÂÆö javaType Êù•‰øùËØÅË°å‰∏∫‰∏éÊúüÊúõÁöÑÁõ∏‰∏ÄËá¥„ÄÇ</td>
</tr>
<tr>
<td><code>jdbcType</code></td>
<td>JDBC Á±ªÂûãÔºåÊâÄÊîØÊåÅÁöÑ JDBC Á±ªÂûãÂèÇËßÅËøô‰∏™Ë°®Ê†º‰πãÂêéÁöÑ ‚ÄúÊîØÊåÅÁöÑ JDBC Á±ªÂûã‚Äù„ÄÇ Âè™ÈúÄË¶ÅÂú®ÂèØËÉΩÊâßË°åÊèíÂÖ•„ÄÅÊõ¥Êñ∞ÂíåÂà†Èô§ÁöÑ‰∏îÂÖÅËÆ∏Á©∫ÂÄºÁöÑÂàó‰∏äÊåáÂÆö JDBC Á±ªÂûã„ÄÇËøôÊòØ JDBC ÁöÑË¶ÅÊ±ÇËÄåÈùû MyBatis ÁöÑË¶ÅÊ±Ç„ÄÇÂ¶ÇÊûú‰Ω†Áõ¥Êé•Èù¢Âêë JDBC ÁºñÁ®ãÔºå‰Ω†ÈúÄË¶ÅÂØπÂèØ‰ª•‰∏∫Á©∫ÂÄºÁöÑÂàóÊåáÂÆöËøô‰∏™Á±ªÂûã„ÄÇ</td>
</tr>
<tr>
<td><code>typeHandler</code></td>
<td>Êàë‰ª¨Âú®ÂâçÈù¢ËÆ®ËÆ∫ËøáÈªòËÆ§ÁöÑÁ±ªÂûãÂ§ÑÁêÜÂô®„ÄÇ‰ΩøÁî®Ëøô‰∏™Â±ûÊÄßÔºå‰Ω†ÂèØ‰ª•Ë¶ÜÁõñÈªòËÆ§ÁöÑÁ±ªÂûãÂ§ÑÁêÜÂô®„ÄÇ Ëøô‰∏™Â±ûÊÄßÂÄºÊòØ‰∏Ä‰∏™Á±ªÂûãÂ§ÑÁêÜÂô®ÂÆûÁé∞Á±ªÁöÑÂÖ®ÈôêÂÆöÂêçÔºåÊàñËÄÖÊòØÁ±ªÂûãÂà´Âêç„ÄÇ</td>
</tr>
</tbody>
</table>
<p><strong>ÊîØÊåÅÁöÑ JDBC Á±ªÂûã</strong></p>
<p>MyBatis ÈÄöËøáÂÜÖÁΩÆÁöÑ jdbcType Êûö‰∏æÁ±ªÂûãÊîØÊåÅ‰∏ãÈù¢ÁöÑ JDBC Á±ªÂûãÔºö</p>
<p><img alt="image-20250724223129075" src="image-20250724223129075.png" /></p>
<h4 id="343">3.4.3„ÄÅÊûÑÈÄ†ÊñπÊ≥ï<a class="headerlink" href="#343" title="Permanent link">&para;</a></h4>
<p>ÈÄöËøáÊó†ÂèÇÊûÑÈÄ†ÂáΩÊï∞ + setter ÊñπÂºèÔºåÂèØ‰ª•Êª°Ë∂≥Â§ßÂ§öÊï∞ÁöÑÊï∞ÊçÆ‰º†ËæìÂØπË±°ÔºàData Transfer Object, DTOÔºâ‰ª•ÂèäÁªùÂ§ßÈÉ®ÂàÜÈ¢ÜÂüüÊ®°ÂûãÁöÑË¶ÅÊ±Ç„ÄÇ‰ΩÜÊúâ‰∫õÊÉÖÂÜµ‰∏ã‰Ω†ÊÉ≥‰ΩøÁî®‰∏çÂèØÂèòÁ±ª„ÄÇ ‰∏ÄËà¨Êù•ËØ¥ÔºåÂæàÂ∞ëÊîπÂèòÊàñÂü∫Êú¨‰∏çÂèòÁöÑÂåÖÂê´ÂºïÁî®ÊàñÊï∞ÊçÆÁöÑË°®ÔºåÂæàÈÄÇÂêà‰ΩøÁî®‰∏çÂèØÂèòÁ±ª„ÄÇ </p>
<p>ÊûÑÈÄ†ÂáΩÊï∞ÊñπÂºèÊ≥®ÂÖ•ÂÖÅËÆ∏‰Ω†Âú®ÂàùÂßãÂåñÊó∂‰∏∫Á±ªËÆæÁΩÆÂ±ûÊÄßÁöÑÂÄºÔºåËÄå‰∏çÁî®Êö¥Èú≤Âá∫ÂÖ¨ÊúâÊñπÊ≥ï„ÄÇMyBatis ‰πüÊîØÊåÅÁßÅÊúâÂ±ûÊÄßÂíåÁßÅÊúâ JavaBean Â±ûÊÄßÊù•ÂÆåÊàêÊ≥®ÂÖ•Ôºå‰ΩÜÊúâ‰∏Ä‰∫õ‰∫∫Êõ¥ÈùíÁùê‰∫éÈÄöËøáÊûÑÈÄ†ÂáΩÊï∞ËøõË°åÊ≥®ÂÖ•„ÄÇ <code>constructor</code> ÂÖÉÁ¥†Â∞±ÊòØ‰∏∫Ê≠§ËÄåÁîüÁöÑ„ÄÇ</p>
<p>ÁúãÁúã‰∏ãÈù¢Ëøô‰∏™ Java Á±ª:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">username</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">User</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">username</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">username</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Ê≤°ÊúâsetterÊñπÊ≥ï</span>
<span class="p">}</span>
</code></pre></div>
<p>‰∏∫‰∫ÜÂ∞ÜÁªìÊûúÊ≥®ÂÖ•ÊûÑÈÄ†ÊñπÊ≥ïÔºåMyBatis ÈúÄË¶ÅÈÄöËøáÊüêÁßçÊñπÂºèÂÆö‰ΩçÁõ∏Â∫îÁöÑÊûÑÈÄ†ÊñπÊ≥ï„ÄÇ Âú®‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÔºåMyBatis ÊêúÁ¥¢‰∏Ä‰∏™Â£∞Êòé‰∫Ü‰∏â‰∏™ÂΩ¢ÂèÇÁöÑÊûÑÈÄ†ÊñπÊ≥ïÔºåÂèÇÊï∞Á±ªÂûã‰ª• <code>java.lang.Integer</code>„ÄÅ<code>java.lang.String</code> Âíå <code>int</code> ÁöÑÈ°∫Â∫èÁªôÂá∫Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;constructor&gt;</span>
<span class="w">   </span><span class="nt">&lt;idArg</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;int&quot;</span><span class="nt">/&gt;</span>
<span class="w">   </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;String&quot;</span><span class="nt">/&gt;</span>
<span class="w">   </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;age&quot;</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;_int&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/constructor&gt;</span>
</code></pre></div>
<p>ÂΩì‰Ω†Âú®Â§ÑÁêÜ‰∏Ä‰∏™Â∏¶ÊúâÂ§ö‰∏™ÂΩ¢ÂèÇÁöÑÊûÑÈÄ†ÊñπÊ≥ïÊó∂ÔºåÂæàÂÆπÊòìÊêû‰π± arg ÂÖÉÁ¥†ÁöÑÈ°∫Â∫è„ÄÇ ‰ªéÁâàÊú¨ 3.4.3 ÂºÄÂßãÔºåÂèØ‰ª•Âú®ÊåáÂÆöÂèÇÊï∞ÂêçÁß∞ÁöÑÂâçÊèê‰∏ãÔºå‰ª•‰ªªÊÑèÈ°∫Â∫èÁºñÂÜô arg ÂÖÉÁ¥†„ÄÇ ‰∏∫‰∫ÜÈÄöËøáÂêçÁß∞Êù•ÂºïÁî®ÊûÑÈÄ†ÊñπÊ≥ïÂèÇÊï∞Ôºå‰Ω†ÂèØ‰ª•Ê∑ªÂä† <code>@Param</code> Ê≥®Ëß£ÔºåÊàñËÄÖ‰ΩøÁî® <code>-parameters</code> ÁºñËØëÈÄâÈ°πÂπ∂ÂêØÁî® <code>useActualParamName</code> ÈÄâÈ°πÔºàÈªòËÆ§ÂºÄÂêØÔºâÊù•ÁºñËØëÈ°πÁõÆ„ÄÇ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™Á≠â‰ª∑ÁöÑ‰æãÂ≠êÔºåÂ∞ΩÁÆ°ÂáΩÊï∞Á≠æÂêç‰∏≠Á¨¨‰∫åÂíåÁ¨¨‰∏â‰∏™ÂΩ¢ÂèÇÁöÑÈ°∫Â∫è‰∏é <code>constructor</code> ÂÖÉÁ¥†‰∏≠ÂèÇÊï∞Â£∞ÊòéÁöÑÈ°∫Â∫è‰∏çÂåπÈÖçÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;constructor&gt;</span>
<span class="w">   </span><span class="nt">&lt;idArg</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;int&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">   </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;age&quot;</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;_int&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;age&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">   </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;String&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/constructor&gt;</span>
</code></pre></div>
<p>Â¶ÇÊûúÂ≠òÂú®ÂêçÁß∞ÂíåÁ±ªÂûãÁõ∏ÂêåÁöÑÂ±ûÊÄßÔºåÈÇ£‰πàÂèØ‰ª•ÁúÅÁï• <code>javaType</code> „ÄÇ</p>
<p>Ââ©‰ΩôÁöÑÂ±ûÊÄßÂíåËßÑÂàôÂíåÊôÆÈÄöÁöÑ <code>id</code> Âíå <code>result</code> ÂÖÉÁ¥†ÊòØ‰∏ÄÊ†∑ÁöÑÔºö</p>
<table>
<thead>
<tr>
<th>Â±ûÊÄß</th>
<th>ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>column</code></td>
<td>Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÂàóÂêçÔºåÊàñËÄÖÊòØÂàóÁöÑÂà´Âêç„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåËøôÂíå‰º†ÈÄíÁªô <code>resultSet.getString(columnName)</code> ÊñπÊ≥ïÁöÑÂèÇÊï∞‰∏ÄÊ†∑„ÄÇ</td>
</tr>
<tr>
<td><code>javaType</code></td>
<td>‰∏Ä‰∏™ Java Á±ªÁöÑÂÆåÂÖ®ÈôêÂÆöÂêçÔºåÊàñ‰∏Ä‰∏™Á±ªÂûãÂà´ÂêçÔºàÂÖ≥‰∫éÂÜÖÁΩÆÁöÑÁ±ªÂûãÂà´ÂêçÔºåÂèØ‰ª•ÂèÇËÄÉ‰∏äÈù¢ÁöÑË°®Ê†ºÔºâ„ÄÇ Â¶ÇÊûú‰Ω†Êò†Â∞ÑÂà∞‰∏Ä‰∏™ JavaBeanÔºåMyBatis ÈÄöÂ∏∏ÂèØ‰ª•Êé®Êñ≠Á±ªÂûã„ÄÇÁÑ∂ËÄåÔºåÂ¶ÇÊûú‰Ω†Êò†Â∞ÑÂà∞ÁöÑÊòØ HashMapÔºåÈÇ£‰πà‰Ω†Â∫îËØ•ÊòéÁ°ÆÂú∞ÊåáÂÆö javaType Êù•‰øùËØÅË°å‰∏∫‰∏éÊúüÊúõÁöÑÁõ∏‰∏ÄËá¥„ÄÇ</td>
</tr>
<tr>
<td><code>jdbcType</code></td>
<td>JDBC Á±ªÂûãÔºåÊâÄÊîØÊåÅÁöÑ JDBC Á±ªÂûãÂèÇËßÅËøô‰∏™Ë°®Ê†º‰πãÂâçÁöÑ‚ÄúÊîØÊåÅÁöÑ JDBC Á±ªÂûã‚Äù„ÄÇ Âè™ÈúÄË¶ÅÂú®ÂèØËÉΩÊâßË°åÊèíÂÖ•„ÄÅÊõ¥Êñ∞ÂíåÂà†Èô§ÁöÑ‰∏îÂÖÅËÆ∏Á©∫ÂÄºÁöÑÂàó‰∏äÊåáÂÆö JDBC Á±ªÂûã„ÄÇËøôÊòØ JDBC ÁöÑË¶ÅÊ±ÇËÄåÈùû MyBatis ÁöÑË¶ÅÊ±Ç„ÄÇÂ¶ÇÊûú‰Ω†Áõ¥Êé•Èù¢Âêë JDBC ÁºñÁ®ãÔºå‰Ω†ÈúÄË¶ÅÂØπÂèØËÉΩÂ≠òÂú®Á©∫ÂÄºÁöÑÂàóÊåáÂÆöËøô‰∏™Á±ªÂûã„ÄÇ</td>
</tr>
<tr>
<td><code>typeHandler</code></td>
<td>Êàë‰ª¨Âú®ÂâçÈù¢ËÆ®ËÆ∫ËøáÈªòËÆ§ÁöÑÁ±ªÂûãÂ§ÑÁêÜÂô®„ÄÇ‰ΩøÁî®Ëøô‰∏™Â±ûÊÄßÔºå‰Ω†ÂèØ‰ª•Ë¶ÜÁõñÈªòËÆ§ÁöÑÁ±ªÂûãÂ§ÑÁêÜÂô®„ÄÇ Ëøô‰∏™Â±ûÊÄßÂÄºÊòØ‰∏Ä‰∏™Á±ªÂûãÂ§ÑÁêÜÂô®ÂÆûÁé∞Á±ªÁöÑÂÆåÂÖ®ÈôêÂÆöÂêçÔºåÊàñËÄÖÊòØÁ±ªÂûãÂà´Âêç„ÄÇ</td>
</tr>
<tr>
<td><code>select</code></td>
<td>Áî®‰∫éÂä†ËΩΩÂ§çÊùÇÁ±ªÂûãÂ±ûÊÄßÁöÑÊò†Â∞ÑËØ≠Âè•ÁöÑ IDÔºåÂÆÉ‰ºö‰ªé <code>column</code> Â±ûÊÄß‰∏≠ÊåáÂÆöÁöÑÂàóÊ£ÄÁ¥¢Êï∞ÊçÆÔºå‰Ωú‰∏∫ÂèÇÊï∞‰º†ÈÄíÁªôÊ≠§ <code>SELECT</code> ËØ≠Âè•„ÄÇÂÖ∑‰ΩìËØ∑ÂèÇËÄÉÂÖ≥ËÅîÂÖÉÁ¥†„ÄÇ</td>
</tr>
<tr>
<td><code>resultMap</code></td>
<td>ÁªìÊûúÊò†Â∞ÑÁöÑ IDÔºåÂèØ‰ª•Â∞ÜÂµåÂ•óÁöÑÁªìÊûúÈõÜÊò†Â∞ÑÂà∞‰∏Ä‰∏™ÂêàÈÄÇÁöÑÂØπË±°Ê†ë‰∏≠„ÄÇ ÂÆÉÂèØ‰ª•‰Ωú‰∏∫‰ΩøÁî®È¢ùÂ§ñ select ËØ≠Âè•ÁöÑÊõø‰ª£ÊñπÊ°à„ÄÇÂÆÉÂèØ‰ª•Â∞ÜÂ§öË°®ËøûÊé•Êìç‰ΩúÁöÑÁªìÊûúÊò†Â∞ÑÊàê‰∏Ä‰∏™Âçï‰∏ÄÁöÑ <code>ResultSet</code>„ÄÇËøôÊ†∑ÁöÑ <code>ResultSet</code> Â∞Ü‰ºöÂ∞ÜÂåÖÂê´ÈáçÂ§çÊàñÈÉ®ÂàÜÊï∞ÊçÆÈáçÂ§çÁöÑÁªìÊûúÈõÜ„ÄÇ‰∏∫‰∫ÜÂ∞ÜÁªìÊûúÈõÜÊ≠£Á°ÆÂú∞Êò†Â∞ÑÂà∞ÂµåÂ•óÁöÑÂØπË±°Ê†ë‰∏≠ÔºåMyBatis ÂÖÅËÆ∏‰Ω† ‚Äú‰∏≤ËÅî‚ÄùÁªìÊûúÊò†Â∞ÑÔºå‰ª•‰æøËß£ÂÜ≥ÂµåÂ•óÁªìÊûúÈõÜÁöÑÈóÆÈ¢ò„ÄÇÊÉ≥‰∫ÜËß£Êõ¥Â§öÂÜÖÂÆπÔºåËØ∑ÂèÇËÄÉ‰∏ãÈù¢ÁöÑÂÖ≥ËÅîÂÖÉÁ¥†„ÄÇ</td>
</tr>
<tr>
<td><code>name</code></td>
<td>ÊûÑÈÄ†ÊñπÊ≥ïÂΩ¢ÂèÇÁöÑÂêçÂ≠ó„ÄÇ‰ªé 3.4.3 ÁâàÊú¨ÂºÄÂßãÔºåÈÄöËøáÊåáÂÆöÂÖ∑‰ΩìÁöÑÂèÇÊï∞ÂêçÔºå‰Ω†ÂèØ‰ª•‰ª•‰ªªÊÑèÈ°∫Â∫èÂÜôÂÖ• <code>arg</code> ÂÖÉÁ¥†„ÄÇ</td>
</tr>
</tbody>
</table>
<h4 id="344">3.4.4„ÄÅÂÖ≥ËÅî<a class="headerlink" href="#344" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;association</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;author&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;blog_author_id&quot;</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;Author&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_username&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/association&gt;</span>
</code></pre></div>
<p>ÂÖ≥ËÅîÔºàassociationÔºâÂÖÉÁ¥†Â§ÑÁêÜ ‚ÄúÊúâ‰∏Ä‰∏™‚Äù Á±ªÂûãÁöÑÂÖ≥Á≥ª„ÄÇ ÊØîÂ¶ÇÂú®Á§∫‰æã‰∏≠Ôºå‰∏Ä‰∏™ÂçöÂÆ¢Êúâ‰∏Ä‰∏™Áî®Êà∑„ÄÇÂÖ≥ËÅîÁªìÊûúÊò†Â∞ÑÂíåÂÖ∂ÂÆÉÁ±ªÂûãÁöÑÊò†Â∞ÑÂ∑•‰ΩúÊñπÂºèÂ∑Æ‰∏çÂ§ö„ÄÇ ‰Ω†ÈúÄË¶ÅÊåáÂÆöÁõÆÊ†áÂ±ûÊÄßÂêç‰ª•ÂèäÂ±ûÊÄßÁöÑ<code>javaType</code>ÔºàÂæàÂ§öÊó∂ÂÄô MyBatis ÂèØ‰ª•Ëá™Â∑±Êé®Êñ≠Âá∫Êù•ÔºâÔºåÂú®ÂøÖË¶ÅÁöÑÊÉÖÂÜµ‰∏ã‰Ω†ËøòÂèØ‰ª•ËÆæÁΩÆ JDBC Á±ªÂûãÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥Ë¶ÜÁõñËé∑ÂèñÁªìÊûúÂÄºÁöÑËøáÁ®ãÔºåËøòÂèØ‰ª•ËÆæÁΩÆÁ±ªÂûãÂ§ÑÁêÜÂô®„ÄÇ</p>
<p>ÂÖ≥ËÅîÁöÑ‰∏çÂêå‰πãÂ§ÑÊòØÔºå‰Ω†ÈúÄË¶ÅÂëäËØâ MyBatis Â¶Ç‰ΩïÂä†ËΩΩÂÖ≥ËÅî„ÄÇMyBatis Êúâ‰∏§Áßç‰∏çÂêåÁöÑÊñπÂºèÂä†ËΩΩÂÖ≥ËÅîÔºö</p>
<ul>
<li>ÂµåÂ•ó Select Êü•ËØ¢ÔºöÈÄöËøáÊâßË°åÂè¶Â§ñ‰∏Ä‰∏™ SQL Êò†Â∞ÑËØ≠Âè•Êù•Âä†ËΩΩÊúüÊúõÁöÑÂ§çÊùÇÁ±ªÂûã„ÄÇ</li>
<li>ÂµåÂ•óÁªìÊûúÊò†Â∞ÑÔºö‰ΩøÁî®ÂµåÂ•óÁöÑÁªìÊûúÊò†Â∞ÑÊù•Â§ÑÁêÜËøûÊé•ÁªìÊûúÁöÑÈáçÂ§çÂ≠êÈõÜ„ÄÇ</li>
</ul>
<p><code>association</code> ÂÖÉÁ¥†ÁöÑÂü∫Êú¨Â±ûÊÄßÂíåÊôÆÈÄöÁöÑÁªìÊûúÊò†Â∞ÑÁõ∏ÊØîÔºåÂÆÉÂè™Âú® <code>select</code> Âíå <code>resultMap</code> Â±ûÊÄß‰∏äÊúâÊâÄ‰∏çÂêåÔºö</p>
<table>
<thead>
<tr>
<th>Â±ûÊÄß</th>
<th>ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>property</code></td>
<td>Êò†Â∞ÑÂà∞ÂàóÁªìÊûúÁöÑÂ≠óÊÆµÊàñÂ±ûÊÄß„ÄÇÂ¶ÇÊûúÁî®Êù•ÂåπÈÖçÁöÑ JavaBean Â≠òÂú®ÁªôÂÆöÂêçÂ≠óÁöÑÂ±ûÊÄßÔºåÈÇ£‰πàÂÆÉÂ∞Ü‰ºöË¢´‰ΩøÁî®„ÄÇÂê¶Âàô MyBatis Â∞Ü‰ºöÂØªÊâæÁªôÂÆöÂêçÁß∞ÁöÑÂ≠óÊÆµ„ÄÇ Êó†ËÆ∫ÊòØÂì™‰∏ÄÁßçÊÉÖÂΩ¢Ôºå‰Ω†ÈÉΩÂèØ‰ª•‰ΩøÁî®ÈÄöÂ∏∏ÁöÑÁÇπÂºèÂàÜÈöîÂΩ¢ÂºèËøõË°åÂ§çÊùÇÂ±ûÊÄßÂØºËà™„ÄÇ ÊØîÂ¶ÇÔºå‰Ω†ÂèØ‰ª•ËøôÊ†∑Êò†Â∞Ñ‰∏Ä‰∫õÁÆÄÂçïÁöÑ‰∏úË•øÔºö‚Äúusername‚ÄùÔºåÊàñËÄÖÊò†Â∞ÑÂà∞‰∏Ä‰∫õÂ§çÊùÇÁöÑ‰∏úË•ø‰∏äÔºö‚Äúaddress.street.number‚Äù„ÄÇ</td>
</tr>
<tr>
<td><code>javaType</code></td>
<td>‰∏Ä‰∏™ Java Á±ªÁöÑÂÆåÂÖ®ÈôêÂÆöÂêçÔºåÊàñ‰∏Ä‰∏™Á±ªÂûãÂà´ÂêçÔºàÂÖ≥‰∫éÂÜÖÁΩÆÁöÑÁ±ªÂûãÂà´ÂêçÔºåÂèØ‰ª•ÂèÇËÄÉ‰∏äÈù¢ÁöÑË°®Ê†ºÔºâ„ÄÇ Â¶ÇÊûú‰Ω†Êò†Â∞ÑÂà∞‰∏Ä‰∏™ JavaBeanÔºåMyBatis ÈÄöÂ∏∏ÂèØ‰ª•Êé®Êñ≠Á±ªÂûã„ÄÇÁÑ∂ËÄåÔºåÂ¶ÇÊûú‰Ω†Êò†Â∞ÑÂà∞ÁöÑÊòØ HashMapÔºåÈÇ£‰πà‰Ω†Â∫îËØ•ÊòéÁ°ÆÂú∞ÊåáÂÆö javaType Êù•‰øùËØÅË°å‰∏∫‰∏éÊúüÊúõÁöÑÁõ∏‰∏ÄËá¥„ÄÇ</td>
</tr>
<tr>
<td><code>jdbcType</code></td>
<td>JDBC Á±ªÂûãÔºåÊâÄÊîØÊåÅÁöÑ JDBC Á±ªÂûãÂèÇËßÅËøô‰∏™Ë°®Ê†º‰πãÂâçÁöÑ‚ÄúÊîØÊåÅÁöÑ JDBC Á±ªÂûã‚Äù„ÄÇ Âè™ÈúÄË¶ÅÂú®ÂèØËÉΩÊâßË°åÊèíÂÖ•„ÄÅÊõ¥Êñ∞ÂíåÂà†Èô§ÁöÑ‰∏îÂÖÅËÆ∏Á©∫ÂÄºÁöÑÂàó‰∏äÊåáÂÆö JDBC Á±ªÂûã„ÄÇËøôÊòØ JDBC ÁöÑË¶ÅÊ±ÇËÄåÈùû MyBatis ÁöÑË¶ÅÊ±Ç„ÄÇÂ¶ÇÊûú‰Ω†Áõ¥Êé•Èù¢Âêë JDBC ÁºñÁ®ãÔºå‰Ω†ÈúÄË¶ÅÂØπÂèØËÉΩÂ≠òÂú®Á©∫ÂÄºÁöÑÂàóÊåáÂÆöËøô‰∏™Á±ªÂûã„ÄÇ</td>
</tr>
<tr>
<td><code>typeHandler</code></td>
<td>Êàë‰ª¨Âú®ÂâçÈù¢ËÆ®ËÆ∫ËøáÈªòËÆ§ÁöÑÁ±ªÂûãÂ§ÑÁêÜÂô®„ÄÇ‰ΩøÁî®Ëøô‰∏™Â±ûÊÄßÔºå‰Ω†ÂèØ‰ª•Ë¶ÜÁõñÈªòËÆ§ÁöÑÁ±ªÂûãÂ§ÑÁêÜÂô®„ÄÇ Ëøô‰∏™Â±ûÊÄßÂÄºÊòØ‰∏Ä‰∏™Á±ªÂûãÂ§ÑÁêÜÂô®ÂÆûÁé∞Á±ªÁöÑÂÆåÂÖ®ÈôêÂÆöÂêçÔºåÊàñËÄÖÊòØÁ±ªÂûãÂà´Âêç„ÄÇ</td>
</tr>
</tbody>
</table>
<h5 id="select">ÂµåÂ•ó Select Êü•ËØ¢<a class="headerlink" href="#select" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Â±ûÊÄß</th>
<th>ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>column</code></td>
<td>Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÂàóÂêçÔºåÊàñËÄÖÊòØÂàóÁöÑÂà´Âêç„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåËøôÂíå‰º†ÈÄíÁªô <code>resultSet.getString(columnName)</code> ÊñπÊ≥ïÁöÑÂèÇÊï∞‰∏ÄÊ†∑„ÄÇ Ê≥®ÊÑèÔºöÂú®‰ΩøÁî®Â§çÂêà‰∏ªÈîÆÁöÑÊó∂ÂÄôÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî® <code>column="{prop1=col1,prop2=col2}"</code> ËøôÊ†∑ÁöÑËØ≠Ê≥ïÊù•ÊåáÂÆöÂ§ö‰∏™‰º†ÈÄíÁªôÂµåÂ•ó Select Êü•ËØ¢ËØ≠Âè•ÁöÑÂàóÂêç„ÄÇËøô‰ºö‰ΩøÂæó <code>prop1</code> Âíå <code>prop2</code> ‰Ωú‰∏∫ÂèÇÊï∞ÂØπË±°ÔºåË¢´ËÆæÁΩÆ‰∏∫ÂØπÂ∫îÂµåÂ•ó Select ËØ≠Âè•ÁöÑÂèÇÊï∞„ÄÇ</td>
</tr>
<tr>
<td><code>select</code></td>
<td>Áî®‰∫éÂä†ËΩΩÂ§çÊùÇÁ±ªÂûãÂ±ûÊÄßÁöÑÊò†Â∞ÑËØ≠Âè•ÁöÑ IDÔºåÂÆÉ‰ºö‰ªé column Â±ûÊÄßÊåáÂÆöÁöÑÂàó‰∏≠Ê£ÄÁ¥¢Êï∞ÊçÆÔºå‰Ωú‰∏∫ÂèÇÊï∞‰º†ÈÄíÁªôÁõÆÊ†á select ËØ≠Âè•„ÄÇ ÂÖ∑‰ΩìËØ∑ÂèÇËÄÉ‰∏ãÈù¢ÁöÑ‰æãÂ≠ê„ÄÇÊ≥®ÊÑèÔºöÂú®‰ΩøÁî®Â§çÂêà‰∏ªÈîÆÁöÑÊó∂ÂÄôÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî® <code>column="{prop1=col1,prop2=col2}"</code> ËøôÊ†∑ÁöÑËØ≠Ê≥ïÊù•ÊåáÂÆöÂ§ö‰∏™‰º†ÈÄíÁªôÂµåÂ•ó Select Êü•ËØ¢ËØ≠Âè•ÁöÑÂàóÂêç„ÄÇËøô‰ºö‰ΩøÂæó <code>prop1</code> Âíå <code>prop2</code> ‰Ωú‰∏∫ÂèÇÊï∞ÂØπË±°ÔºåË¢´ËÆæÁΩÆ‰∏∫ÂØπÂ∫îÂµåÂ•ó Select ËØ≠Âè•ÁöÑÂèÇÊï∞„ÄÇ</td>
</tr>
<tr>
<td><code>fetchType</code></td>
<td>ÂèØÈÄâÁöÑ„ÄÇÊúâÊïàÂÄº‰∏∫ <code>lazy</code> Âíå <code>eager</code>„ÄÇ ÊåáÂÆöÂ±ûÊÄßÂêéÔºåÂ∞ÜÂú®Êò†Â∞Ñ‰∏≠ÂøΩÁï•ÂÖ®Â±ÄÈÖçÁΩÆÂèÇÊï∞ <code>lazyLoadingEnabled</code>Ôºå‰ΩøÁî®Â±ûÊÄßÁöÑÂÄº„ÄÇ</td>
</tr>
</tbody>
</table>
<p>Á§∫‰æãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;blogResult&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;Blog&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;association</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;author&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_id&quot;</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;Author&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;selectAuthor&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>

<span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectBlog&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;blogResult&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>BLOG<span class="w"> </span>WHERE<span class="w"> </span>ID<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="nt">&lt;/select&gt;</span>

<span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectAuthor&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;Author&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>AUTHOR<span class="w"> </span>WHERE<span class="w"> </span>ID<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p>Êúâ‰∏§‰∏™ select Êü•ËØ¢ËØ≠Âè•Ôºö‰∏Ä‰∏™Áî®Êù•Âä†ËΩΩÂçöÂÆ¢ÔºàBlogÔºâÔºåÂè¶Â§ñ‰∏Ä‰∏™Áî®Êù•Âä†ËΩΩ‰ΩúËÄÖÔºàAuthorÔºâÔºåËÄå‰∏îÂçöÂÆ¢ÁöÑÁªìÊûúÊò†Â∞ÑÊèèËø∞‰∫ÜÂ∫îËØ•‰ΩøÁî® <code>selectAuthor</code> ËØ≠Âè•Âä†ËΩΩÂÆÉÁöÑ <code>author</code> Â±ûÊÄß„ÄÇ</p>
<p>ÂÖ∂ÂÆÉÊâÄÊúâÁöÑÂ±ûÊÄßÂ∞Ü‰ºöË¢´Ëá™Âä®Âä†ËΩΩÔºåÂè™Ë¶ÅÂÆÉ‰ª¨ÁöÑÂàóÂêçÂíåÂ±ûÊÄßÂêçÁõ∏ÂåπÈÖç„ÄÇ</p>
<p>ËøôÁßçÊñπÂºèËôΩÁÑ∂ÂæàÁÆÄÂçïÔºå‰ΩÜÂú®Â§ßÂûãÊï∞ÊçÆÈõÜÊàñÂ§ßÂûãÊï∞ÊçÆË°®‰∏äË°®Áé∞‰∏ç‰Ω≥„ÄÇËøô‰∏™ÈóÆÈ¢òË¢´Áß∞‰∏∫ ‚ÄúN+1 Êü•ËØ¢ÈóÆÈ¢ò‚Äù„ÄÇ Ê¶ÇÊã¨Âú∞ËÆ≤ÔºåN+1 Êü•ËØ¢ÈóÆÈ¢òÊòØËøôÊ†∑Â≠êÁöÑÔºö</p>
<ul>
<li>‰Ω†ÊâßË°å‰∫Ü‰∏Ä‰∏™ÂçïÁã¨ÁöÑ SQL ËØ≠Âè•Êù•Ëé∑ÂèñÁªìÊûúÁöÑ‰∏Ä‰∏™ÂàóË°®ÔºàÂ∞±ÊòØ‚Äú+1‚ÄùÔºâ„ÄÇ</li>
<li>ÂØπÂàóË°®ËøîÂõûÁöÑÊØèÊù°ËÆ∞ÂΩïÔºå‰Ω†ÊâßË°å‰∏Ä‰∏™ select Êü•ËØ¢ËØ≠Âè•Êù•‰∏∫ÊØèÊù°ËÆ∞ÂΩïÂä†ËΩΩËØ¶ÁªÜ‰ø°ÊÅØÔºàÂ∞±ÊòØ‚ÄúN‚ÄùÔºâ„ÄÇ</li>
</ul>
<p>Ëøô‰∏™ÈóÆÈ¢ò‰ºöÂØºËá¥ÊàêÁôæ‰∏äÂçÉÁöÑ SQL ËØ≠Âè•Ë¢´ÊâßË°å„ÄÇÂ•ΩÊ∂àÊÅØÊòØÔºåMyBatis ËÉΩÂ§üÂØπËøôÊ†∑ÁöÑÊü•ËØ¢ËøõË°åÂª∂ËøüÂä†ËΩΩÔºåÂõ†Ê≠§ÂèØ‰ª•Â∞ÜÂ§ßÈáèËØ≠Âè•ÂêåÊó∂ËøêË°åÁöÑÂºÄÈîÄÂàÜÊï£ÂºÄÊù•„ÄÇ ÁÑ∂ËÄåÔºåÂ¶ÇÊûú‰Ω†Âä†ËΩΩËÆ∞ÂΩïÂàóË°®‰πãÂêéÁ´ãÂàªÂ∞±ÈÅçÂéÜÂàóË°®‰ª•Ëé∑ÂèñÂµåÂ•óÁöÑÊï∞ÊçÆÔºåÂ∞±‰ºöËß¶ÂèëÊâÄÊúâÁöÑÂª∂ËøüÂä†ËΩΩÊü•ËØ¢ÔºåÊÄßËÉΩÂèØËÉΩ‰ºöÂèòÂæóÂæàÁ≥üÁ≥ï„ÄÇ</p>
<h5 id="_1">ÂµåÂ•óÁªìÊûúÊò†Â∞Ñ<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Â±ûÊÄß</th>
<th>ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>resultMap</code></td>
<td>ÁªìÊûúÊò†Â∞ÑÁöÑ IDÔºåÂèØ‰ª•Â∞ÜÊ≠§ÂÖ≥ËÅîÁöÑÂµåÂ•óÁªìÊûúÈõÜÊò†Â∞ÑÂà∞‰∏Ä‰∏™ÂêàÈÄÇÁöÑÂØπË±°Ê†ë‰∏≠„ÄÇ ÂÆÉÂèØ‰ª•‰Ωú‰∏∫‰ΩøÁî®È¢ùÂ§ñ select ËØ≠Âè•ÁöÑÊõø‰ª£ÊñπÊ°à„ÄÇÂÆÉÂèØ‰ª•Â∞ÜÂ§öË°®ËøûÊé•Êìç‰ΩúÁöÑÁªìÊûúÊò†Â∞ÑÊàê‰∏Ä‰∏™Âçï‰∏ÄÁöÑ <code>ResultSet</code>„ÄÇËøôÊ†∑ÁöÑ <code>ResultSet</code> ÊúâÈÉ®ÂàÜÊï∞ÊçÆÊòØÈáçÂ§çÁöÑ„ÄÇ ‰∏∫‰∫ÜÂ∞ÜÁªìÊûúÈõÜÊ≠£Á°ÆÂú∞Êò†Â∞ÑÂà∞ÂµåÂ•óÁöÑÂØπË±°Ê†ë‰∏≠, MyBatis ÂÖÅËÆ∏‰Ω† ‚Äú‰∏≤ËÅî‚Äù ÁªìÊûúÊò†Â∞ÑÔºå‰ª•‰æøËß£ÂÜ≥ÂµåÂ•óÁªìÊûúÈõÜÁöÑÈóÆÈ¢ò„ÄÇ‰ΩøÁî®ÂµåÂ•óÁªìÊûúÊò†Â∞ÑÁöÑ‰∏Ä‰∏™‰æãÂ≠êÂú®Ë°®Ê†º‰ª•Âêé„ÄÇ</td>
</tr>
<tr>
<td><code>columnPrefix</code></td>
<td>ÂΩìËøûÊé•Â§ö‰∏™Ë°®Êó∂Ôºå‰Ω†ÂèØËÉΩ‰ºö‰∏çÂæó‰∏ç‰ΩøÁî®ÂàóÂà´ÂêçÊù•ÈÅøÂÖçÂú® <code>ResultSet</code> ‰∏≠‰∫ßÁîüÈáçÂ§çÁöÑÂàóÂêç„ÄÇÊåáÂÆö <code>columnPrefix</code> ÂàóÂêçÂâçÁºÄÂÖÅËÆ∏‰Ω†Â∞ÜÂ∏¶ÊúâËøô‰∫õÂâçÁºÄÁöÑÂàóÊò†Â∞ÑÂà∞‰∏Ä‰∏™Â§ñÈÉ®ÁöÑÁªìÊûúÊò†Â∞Ñ‰∏≠„ÄÇ ËØ¶ÁªÜËØ¥ÊòéËØ∑ÂèÇËÄÉÂêéÈù¢ÁöÑ‰æãÂ≠ê„ÄÇ</td>
</tr>
<tr>
<td><code>notNullColumn</code></td>
<td>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂú®Ëá≥Â∞ë‰∏Ä‰∏™Ë¢´Êò†Â∞ÑÂà∞Â±ûÊÄßÁöÑÂàó‰∏ç‰∏∫Á©∫Êó∂ÔºåÂ≠êÂØπË±°Êâç‰ºöË¢´ÂàõÂª∫„ÄÇ ‰Ω†ÂèØ‰ª•Âú®Ëøô‰∏™Â±ûÊÄß‰∏äÊåáÂÆöÈùûÁ©∫ÁöÑÂàóÊù•ÊîπÂèòÈªòËÆ§Ë°å‰∏∫ÔºåÊåáÂÆöÂêéÔºåMybatis Â∞ÜÂè™Âú®Ëøô‰∫õÂàó‰∏≠‰ªªÊÑè‰∏ÄÂàóÈùûÁ©∫Êó∂ÊâçÂàõÂª∫‰∏Ä‰∏™Â≠êÂØπË±°„ÄÇÂèØ‰ª•‰ΩøÁî®ÈÄóÂè∑ÂàÜÈöîÊù•ÊåáÂÆöÂ§ö‰∏™Âàó„ÄÇÈªòËÆ§ÂÄºÔºöÊú™ËÆæÁΩÆÔºà<code>unset</code>Ôºâ„ÄÇ</td>
</tr>
<tr>
<td><code>autoMapping</code></td>
<td>Â¶ÇÊûúËÆæÁΩÆËøô‰∏™Â±ûÊÄßÔºåMyBatis Â∞Ü‰ºö‰∏∫Êú¨ÁªìÊûúÊò†Â∞ÑÂºÄÂêØÊàñËÄÖÂÖ≥Èó≠Ëá™Âä®Êò†Â∞Ñ„ÄÇ Ëøô‰∏™Â±ûÊÄß‰ºöË¶ÜÁõñÂÖ®Â±ÄÁöÑÂ±ûÊÄß <code>autoMappingBehavior</code>„ÄÇÊ≥®ÊÑèÔºåÊú¨Â±ûÊÄßÂØπÂ§ñÈÉ®ÁöÑÁªìÊûúÊò†Â∞ÑÊó†ÊïàÔºåÊâÄ‰ª•‰∏çËÉΩÊê≠ÈÖç <code>select</code> Êàñ <code>resultMap</code> ÂÖÉÁ¥†‰ΩøÁî®„ÄÇÈªòËÆ§ÂÄºÔºöÊú™ËÆæÁΩÆÔºà<code>unset</code>Ôºâ„ÄÇ</td>
</tr>
</tbody>
</table>
<p>Áé∞Âú®Â∞ÜÂçöÂÆ¢Ë°®Âíå‰ΩúËÄÖË°®ËøûÊé•Âú®‰∏ÄËµ∑ÔºåËÄå‰∏çÊòØÊâßË°å‰∏Ä‰∏™Áã¨Á´ãÁöÑÊü•ËØ¢ËØ≠Âè•ÔºåÂ∞±ÂÉèËøôÊ†∑Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectBlog&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;blogResult&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>select
<span class="w">    </span>B.id<span class="w">            </span>as<span class="w"> </span>blog_id,
<span class="w">    </span>B.title<span class="w">         </span>as<span class="w"> </span>blog_title,
<span class="w">    </span>B.author_id<span class="w">     </span>as<span class="w"> </span>blog_author_id,
<span class="w">    </span>A.id<span class="w">            </span>as<span class="w"> </span>author_id,
<span class="w">    </span>A.username<span class="w">      </span>as<span class="w"> </span>author_username,
<span class="w">    </span>A.password<span class="w">      </span>as<span class="w"> </span>author_password,
<span class="w">    </span>A.email<span class="w">         </span>as<span class="w"> </span>author_email,
<span class="w">    </span>A.bio<span class="w">           </span>as<span class="w"> </span>author_bio
<span class="w">  </span>from<span class="w"> </span>Blog<span class="w"> </span>B<span class="w"> </span>left<span class="w"> </span>outer<span class="w"> </span>join<span class="w"> </span>Author<span class="w"> </span>A<span class="w"> </span>on<span class="w"> </span>B.author_id<span class="w"> </span>=<span class="w"> </span>A.id
<span class="w">  </span>where<span class="w"> </span>B.id<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p>ÂèØ‰ª•Êò†Â∞ÑËøô‰∏™ÁªìÊûúÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;blogResult&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;Blog&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;blog_id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;title&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;blog_title&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;association</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;author&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;blog_author_id&quot;</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;Author&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;authorResult&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>

<span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;authorResult&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;Author&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_username&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;password&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_password&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;email&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_email&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;bio&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_bio&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
</code></pre></div>
<p>Âú®‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÂçöÂÆ¢ÔºàBlogÔºâ‰ΩúËÄÖÔºàauthorÔºâÁöÑÂÖ≥ËÅîÂÖÉÁ¥†ÂßîÊâòÂêç‰∏∫ ‚ÄúauthorResult‚Äù ÁöÑÁªìÊûúÊò†Â∞ÑÊù•Âä†ËΩΩ‰ΩúËÄÖÂØπË±°ÁöÑÂÆû‰æã„ÄÇ</p>
<div class="admonition tip">
<p class="admonition-title">Important</p>
<p><code>id</code> ÂÖÉÁ¥†Âú®ÂµåÂ•óÁªìÊûúÊò†Â∞Ñ‰∏≠ÊâÆÊºîÁùÄÈùûÂ∏∏ÈáçË¶ÅÁöÑËßíËâ≤„ÄÇ‰Ω†Â∫îËØ•ÊÄªÊòØÊåáÂÆö‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂèØ‰ª•ÂîØ‰∏ÄÊ†áËØÜÁªìÊûúÁöÑÂ±ûÊÄß„ÄÇ ËôΩÁÑ∂ÔºåÂç≥‰Ωø‰∏çÊåáÂÆöËøô‰∏™Â±ûÊÄßÔºåMyBatis ‰ªçÁÑ∂ÂèØ‰ª•Â∑•‰ΩúÔºå‰ΩÜÊòØ‰ºö‰∫ßÁîü‰∏•ÈáçÁöÑÊÄßËÉΩÈóÆÈ¢ò„ÄÇ Âè™ÈúÄË¶ÅÊåáÂÆöÂèØ‰ª•ÂîØ‰∏ÄÊ†áËØÜÁªìÊûúÁöÑÊúÄÂ∞ëÂ±ûÊÄß„ÄÇÊòæÁÑ∂Ôºå‰Ω†ÂèØ‰ª•ÈÄâÊã©‰∏ªÈîÆÔºàÂ§çÂêà‰∏ªÈîÆ‰πüÂèØ‰ª•Ôºâ„ÄÇ</p>
</div>
<p>Áé∞Âú®Ôºå‰∏äÈù¢ÁöÑÁ§∫‰æã‰ΩøÁî®‰∫ÜÂ§ñÈÉ®ÁöÑÁªìÊûúÊò†Â∞ÑÂÖÉÁ¥†Êù•Êò†Â∞ÑÂÖ≥ËÅî„ÄÇËøô‰ΩøÂæó Author ÁöÑÁªìÊûúÊò†Â∞ÑÂèØ‰ª•Ë¢´ÈáçÁî®„ÄÇ Â¶ÇÊûú‰∏çÊâìÁÆóÈáçÁî®ÂÆÉÔºåÊàñËÄÖ‰Ω†Êõ¥ÂñúÊ¨¢Â∞Ü‰Ω†ÊâÄÊúâÁöÑÁªìÊûúÊò†Â∞ÑÊîæÂú®‰∏Ä‰∏™ÂÖ∑ÊúâÊèèËø∞ÊÄßÁöÑÁªìÊûúÊò†Â∞ÑÂÖÉÁ¥†‰∏≠ÔºåÂèØ‰ª•Áõ¥Êé•Â∞ÜÁªìÊûúÊò†Â∞Ñ‰Ωú‰∏∫Â≠êÂÖÉÁ¥†ÂµåÂ•óÂú®ÂÜÖ„ÄÇËøôÈáåÁªôÂá∫‰ΩøÁî®ËøôÁßçÊñπÂºèÁöÑÁ≠âÊïà‰æãÂ≠êÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;blogResult&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;Blog&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;blog_id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;title&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;blog_title&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;association</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;author&quot;</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;Author&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_username&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;password&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_password&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;email&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_email&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;bio&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_bio&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/association&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
</code></pre></div>
<p>ÈÇ£Â¶ÇÊûúÂçöÂÆ¢ÔºàblogÔºâÊúâ‰∏Ä‰∏™ÂÖ±Âêå‰ΩúËÄÖÔºàco-authorÔºâËØ•ÊÄé‰πàÂäûÔºüselect ËØ≠Âè•ÁúãËµ∑Êù•‰ºöÊòØËøôÊ†∑ÁöÑÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectBlog&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;blogResult&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>select
<span class="w">    </span>B.id<span class="w">            </span>as<span class="w"> </span>blog_id,
<span class="w">    </span>B.title<span class="w">         </span>as<span class="w"> </span>blog_title,
<span class="w">    </span>A.id<span class="w">            </span>as<span class="w"> </span>author_id,
<span class="w">    </span>A.username<span class="w">      </span>as<span class="w"> </span>author_username,
<span class="w">    </span>A.password<span class="w">      </span>as<span class="w"> </span>author_password,
<span class="w">    </span>A.email<span class="w">         </span>as<span class="w"> </span>author_email,
<span class="w">    </span>A.bio<span class="w">           </span>as<span class="w"> </span>author_bio,
<span class="w">    </span>CA.id<span class="w">           </span>as<span class="w"> </span>co_author_id,
<span class="w">    </span>CA.username<span class="w">     </span>as<span class="w"> </span>co_author_username,
<span class="w">    </span>CA.password<span class="w">     </span>as<span class="w"> </span>co_author_password,
<span class="w">    </span>CA.email<span class="w">        </span>as<span class="w"> </span>co_author_email,
<span class="w">    </span>CA.bio<span class="w">          </span>as<span class="w"> </span>co_author_bio
<span class="w">  </span>from<span class="w"> </span>Blog<span class="w"> </span>B
<span class="w">  </span>left<span class="w"> </span>outer<span class="w"> </span>join<span class="w"> </span>Author<span class="w"> </span>A<span class="w"> </span>on<span class="w"> </span>B.author_id<span class="w"> </span>=<span class="w"> </span>A.id
<span class="w">  </span>left<span class="w"> </span>outer<span class="w"> </span>join<span class="w"> </span>Author<span class="w"> </span>CA<span class="w"> </span>on<span class="w"> </span>B.co_author_id<span class="w"> </span>=<span class="w"> </span>CA.id
<span class="w">  </span>where<span class="w"> </span>B.id<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p>ÂõûÂøÜ‰∏Ä‰∏ãÔºåAuthor ÁöÑÁªìÊûúÊò†Â∞ÑÂÆö‰πâÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;authorResult&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;Author&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_username&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;password&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_password&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;email&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_email&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;bio&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_bio&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
</code></pre></div>
<p>Áî±‰∫éÁªìÊûú‰∏≠ÁöÑÂàóÂêç‰∏éÁªìÊûúÊò†Â∞Ñ‰∏≠ÁöÑÂàóÂêç‰∏çÂêåÔºåÈúÄË¶ÅÊåáÂÆö <code>columnPrefix</code> ‰ª•‰æøÈáçÂ§ç‰ΩøÁî®ËØ•ÁªìÊûúÊò†Â∞ÑÊù•Êò†Â∞Ñ co-author ÁöÑÁªìÊûúÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;blogResult&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;Blog&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;blog_id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;title&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;blog_title&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;association</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;author&quot;</span>
<span class="w">    </span><span class="na">resultMap=</span><span class="s">&quot;authorResult&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;association</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;coAuthor&quot;</span>
<span class="w">    </span><span class="na">resultMap=</span><span class="s">&quot;authorResult&quot;</span>
<span class="w">    </span><span class="na">columnPrefix=</span><span class="s">&quot;co_&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
</code></pre></div>
<h5 id="resultset">Â§öÁªìÊûúÈõÜÔºàResultSetÔºâ<a class="headerlink" href="#resultset" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Â±ûÊÄß</th>
<th>ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>column</code></td>
<td>ÂΩì‰ΩøÁî®Â§ö‰∏™ÁªìÊûúÈõÜÊó∂ÔºåËØ•Â±ûÊÄßÊåáÂÆöÁªìÊûúÈõÜ‰∏≠Áî®‰∫é‰∏é <code>foreignColumn</code> ÂåπÈÖçÁöÑÂàóÔºàÂ§ö‰∏™ÂàóÂêç‰ª•ÈÄóÂè∑ÈöîÂºÄÔºâÔºå‰ª•ËØÜÂà´ÂÖ≥Á≥ª‰∏≠ÁöÑÁà∂Á±ªÂûã‰∏éÂ≠êÁ±ªÂûã„ÄÇ</td>
</tr>
<tr>
<td><code>foreignColumn</code></td>
<td>ÊåáÂÆöÂ§ñÈîÆÂØπÂ∫îÁöÑÂàóÂêçÔºåÊåáÂÆöÁöÑÂàóÂ∞Ü‰∏éÁà∂Á±ªÂûã‰∏≠ <code>column</code> ÁöÑÁªôÂá∫ÁöÑÂàóËøõË°åÂåπÈÖç„ÄÇ</td>
</tr>
<tr>
<td><code>resultSet</code></td>
<td>ÊåáÂÆöÁî®‰∫éÂä†ËΩΩÂ§çÊùÇÁ±ªÂûãÁöÑÁªìÊûúÈõÜÂêçÂ≠ó„ÄÇ</td>
</tr>
</tbody>
</table>
<p>‰ªéÁâàÊú¨ 3.2.3 ÂºÄÂßãÔºåMyBatis Êèê‰æõ‰∫ÜÂè¶‰∏ÄÁßçËß£ÂÜ≥ N+1 Êü•ËØ¢ÈóÆÈ¢òÁöÑÊñπÊ≥ï„ÄÇ</p>
<p>Êüê‰∫õÊï∞ÊçÆÂ∫ìÂÖÅËÆ∏Â≠òÂÇ®ËøáÁ®ãËøîÂõûÂ§ö‰∏™ÁªìÊûúÈõÜÔºåÊàñ‰∏ÄÊ¨°ÊÄßÊâßË°åÂ§ö‰∏™ËØ≠Âè•ÔºåÊØè‰∏™ËØ≠Âè•ËøîÂõû‰∏Ä‰∏™ÁªìÊûúÈõÜ„ÄÇ Êàë‰ª¨ÂèØ‰ª•Âà©Áî®Ëøô‰∏™ÁâπÊÄßÔºåÂú®‰∏ç‰ΩøÁî®ËøûÊé•ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂè™ËÆøÈóÆÊï∞ÊçÆÂ∫ì‰∏ÄÊ¨°Â∞±ËÉΩËé∑ÂæóÁõ∏ÂÖ≥Êï∞ÊçÆ„ÄÇ</p>
<p>Âú®‰æãÂ≠ê‰∏≠ÔºåÂ≠òÂÇ®ËøáÁ®ãÊâßË°å‰∏ãÈù¢ÁöÑÊü•ËØ¢Âπ∂ËøîÂõû‰∏§‰∏™ÁªìÊûúÈõÜ„ÄÇÁ¨¨‰∏Ä‰∏™ÁªìÊûúÈõÜ‰ºöËøîÂõûÂçöÂÆ¢ÔºàBlogÔºâÁöÑÁªìÊûúÔºåÁ¨¨‰∫å‰∏™ÂàôËøîÂõû‰ΩúËÄÖÔºàAuthorÔºâÁöÑÁªìÊûúÔºö</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">BLOG</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="c1">#{id}</span>

<span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">AUTHOR</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="c1">#{id}</span>
</code></pre></div>
<p>Âú®Êò†Â∞ÑËØ≠Âè•‰∏≠ÔºåÂøÖÈ°ªÈÄöËøá <code>resultSets</code> Â±ûÊÄß‰∏∫ÊØè‰∏™ÁªìÊûúÈõÜÊåáÂÆö‰∏Ä‰∏™ÂêçÂ≠óÔºåÂ§ö‰∏™ÂêçÂ≠ó‰ΩøÁî®ÈÄóÂè∑ÈöîÂºÄ„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectBlog&quot;</span><span class="w"> </span><span class="na">resultSets=</span><span class="s">&quot;blogs,authors&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;blogResult&quot;</span><span class="w"> </span><span class="na">statementType=</span><span class="s">&quot;CALLABLE&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>{call<span class="w"> </span>getBlogsAndAuthors(#{id,jdbcType=INTEGER,mode=IN})}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p>Áé∞Âú®ÂèØ‰ª•ÊåáÂÆö‰ΩøÁî® ‚Äúauthors‚Äù ÁªìÊûúÈõÜÁöÑÊï∞ÊçÆÊù•Â°´ÂÖÖ ‚Äúauthor‚Äù ÂÖ≥ËÅîÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;blogResult&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;Blog&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;title&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;title&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;association</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;author&quot;</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;Author&quot;</span><span class="w"> </span><span class="na">resultSet=</span><span class="s">&quot;authors&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_id&quot;</span><span class="w"> </span><span class="na">foreignColumn=</span><span class="s">&quot;id&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;id&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;username&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;password&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;password&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;email&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;email&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;bio&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;bio&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/association&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
</code></pre></div>
<h4 id="345">3.4.5„ÄÅÈõÜÂêà<a class="headerlink" href="#345" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;collection</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;posts&quot;</span><span class="w"> </span><span class="na">ofType=</span><span class="s">&quot;domain.blog.Post&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;post_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;subject&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;post_subject&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;body&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;post_body&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/collection&gt;</span>
</code></pre></div>
<p>ÈõÜÂêàÂÖÉÁ¥†ÂíåÂÖ≥ËÅîÂÖÉÁ¥†Âá†‰πéÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ</p>
<p>ÁªßÁª≠‰∏äÈù¢ÁöÑÁ§∫‰æãÔºå‰∏Ä‰∏™ÂçöÂÆ¢ÔºàBlogÔºâÂè™Êúâ‰∏Ä‰∏™‰ΩúËÄÖÔºàAuthor)„ÄÇ‰ΩÜ‰∏Ä‰∏™ÂçöÂÆ¢ÊúâÂæàÂ§öÊñáÁ´†ÔºàPost)„ÄÇ Âú®ÂçöÂÆ¢Á±ª‰∏≠ÔºåËøôÂèØ‰ª•Áî®‰∏ãÈù¢ÁöÑÂÜôÊ≥ïÊù•Ë°®Á§∫Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Post</span><span class="o">&gt;</span><span class="w"> </span><span class="n">posts</span><span class="p">;</span>
</code></pre></div>
<p>Ë¶ÅÂÉè‰∏äÈù¢ËøôÊ†∑ÔºåÊò†Â∞ÑÂµåÂ•óÁªìÊûúÈõÜÂêàÂà∞‰∏Ä‰∏™ List ‰∏≠ÔºåÂèØ‰ª•‰ΩøÁî®ÈõÜÂêàÂÖÉÁ¥†„ÄÇ ÂíåÂÖ≥ËÅîÂÖÉÁ¥†‰∏ÄÊ†∑ÔºåÂèØ‰ª•‰ΩøÁî®ÂµåÂ•ó Select Êü•ËØ¢ÔºåÊàñÂü∫‰∫éËøûÊé•ÁöÑÂµåÂ•óÁªìÊûúÊò†Â∞ÑÈõÜÂêà„ÄÇ</p>
<h5 id="select_1">ÂµåÂ•ó Select Êü•ËØ¢<a class="headerlink" href="#select_1" title="Permanent link">&para;</a></h5>
<p>‰ΩøÁî®ÂµåÂ•ó Select Êü•ËØ¢Êù•‰∏∫ÂçöÂÆ¢Âä†ËΩΩÊñáÁ´†Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;blogResult&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;Blog&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;collection</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;posts&quot;</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;ArrayList&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">ofType=</span><span class="s">&quot;Post&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;selectPostsForBlog&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>

<span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectBlog&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;blogResult&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>BLOG<span class="w"> </span>WHERE<span class="w"> </span>ID<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="nt">&lt;/select&gt;</span>

<span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectPostsForBlog&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;Post&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>POST<span class="w"> </span>WHERE<span class="w"> </span>BLOG_ID<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p>Â§ßÈÉ®ÂàÜÈÉΩÂíå‰∏äÈù¢ÁöÑÂÖ≥ËÅîÂÖÉÁ¥†ÈùûÂ∏∏Áõ∏‰ººÔºåÈõÜÂêàÊúâ‰∏Ä‰∏™Êñ∞ÁöÑ <code>ofType</code> Â±ûÊÄßÔºåËøô‰∏™Â±ûÊÄßÈùûÂ∏∏ÈáçË¶ÅÔºåÂÆÉÁî®Êù•Â∞Ü JavaBeanÔºàÊàñÂ≠óÊÆµÔºâÂ±ûÊÄßÁöÑÁ±ªÂûãÂíåÈõÜÂêàÂ≠òÂÇ®ÁöÑÁ±ªÂûãÂå∫ÂàÜÂºÄÊù•„ÄÇ ÊâÄ‰ª•ÂèØ‰ª•ÊåâÁÖß‰∏ãÈù¢ËøôÊ†∑Êù•ÈòÖËØªÊò†Â∞ÑÔºö ‚Äúposts ÊòØ‰∏Ä‰∏™Â≠òÂÇ® Post ÁöÑ ArrayList ÈõÜÂêà‚Äù„ÄÇ</p>
<p>Âú®‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåMyBatis ÂèØ‰ª•Êé®Êñ≠ <code>javaType</code> Â±ûÊÄßÔºåÂõ†Ê≠§Âπ∂‰∏çÈúÄË¶ÅÂ°´ÂÜô„ÄÇÊâÄ‰ª•ÂæàÂ§öÊó∂ÂÄôÂèØ‰ª•ÁÆÄÁï•ÊàêÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;collection</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;posts&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">ofType=</span><span class="s">&quot;Post&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;selectPostsForBlog&quot;</span><span class="nt">/&gt;</span>
</code></pre></div>
<h5 id="_2">ÂµåÂ•óÁªìÊûúÊò†Â∞Ñ<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h5>
<p>ÈõÜÂêàÁöÑÂµåÂ•óÁªìÊûúÊò†Â∞ÑÈô§‰∫ÜÊñ∞Â¢ûÁöÑ <code>ofType</code> Â±ûÊÄßÔºåÂÖ∂‰ªñÂíåÂÖ≥ËÅîÁöÑÂÆåÂÖ®Áõ∏Âêå„ÄÇ</p>
<p>ÂØπÂ∫îÁöÑ SQL ËØ≠Âè•Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectBlog&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;blogResult&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>select
<span class="w">  </span>B.id<span class="w"> </span>as<span class="w"> </span>blog_id,
<span class="w">  </span>B.title<span class="w"> </span>as<span class="w"> </span>blog_title,
<span class="w">  </span>B.author_id<span class="w"> </span>as<span class="w"> </span>blog_author_id,
<span class="w">  </span>P.id<span class="w"> </span>as<span class="w"> </span>post_id,
<span class="w">  </span>P.subject<span class="w"> </span>as<span class="w"> </span>post_subject,
<span class="w">  </span>P.body<span class="w"> </span>as<span class="w"> </span>post_body,
<span class="w">  </span>from<span class="w"> </span>Blog<span class="w"> </span>B
<span class="w">  </span>left<span class="w"> </span>outer<span class="w"> </span>join<span class="w"> </span>Post<span class="w"> </span>P<span class="w"> </span>on<span class="w"> </span>B.id<span class="w"> </span>=<span class="w"> </span>P.blog_id
<span class="w">  </span>where<span class="w"> </span>B.id<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p>Ë¶ÅÊò†Â∞ÑÂçöÂÆ¢ÈáåÈù¢ÁöÑÊñáÁ´†ÈõÜÂêàÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;blogResult&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;Blog&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;blog_id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;title&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;blog_title&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;collection</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;posts&quot;</span><span class="w"> </span><span class="na">ofType=</span><span class="s">&quot;Post&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;post_id&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;subject&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;post_subject&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;body&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;post_body&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/collection&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
</code></pre></div>
<p>Â¶ÇÊûú‰Ω†ÂñúÊ¨¢Êõ¥ËØ¶Áï•ÁöÑ„ÄÅÂèØÈáçÁî®ÁöÑÁªìÊûúÊò†Â∞ÑÔºåÂèØ‰ª•‰ΩøÁî®‰∏ãÈù¢ÁöÑÁ≠â‰ª∑ÂΩ¢ÂºèÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;blogResult&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;Blog&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;blog_id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;title&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;blog_title&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;collection</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;posts&quot;</span><span class="w"> </span><span class="na">ofType=</span><span class="s">&quot;Post&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;blogPostResult&quot;</span><span class="w"> </span><span class="na">columnPrefix=</span><span class="s">&quot;post_&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>

<span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;blogPostResult&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;Post&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;id&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;subject&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;subject&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;body&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;body&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
</code></pre></div>
<h5 id="resultset_1">Â§öÁªìÊûúÈõÜÔºàResultSetÔºâ<a class="headerlink" href="#resultset_1" title="Permanent link">&para;</a></h5>
<p>ÂÉèÂÖ≥ËÅîÂÖÉÁ¥†ÈÇ£Ê†∑ÂèØ‰ª•ÈÄöËøáÊâßË°åÂ≠òÂÇ®ËøáÁ®ãÂÆûÁé∞ÔºåÂÆÉ‰ºöÊâßË°å‰∏§‰∏™Êü•ËØ¢Âπ∂ËøîÂõû‰∏§‰∏™ÁªìÊûúÈõÜÔºå‰∏Ä‰∏™ÊòØÂçöÂÆ¢ÁöÑÁªìÊûúÈõÜÔºåÂè¶‰∏Ä‰∏™ÊòØÊñáÁ´†ÁöÑÁªìÊûúÈõÜÔºö</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">BLOG</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="c1">#{id}</span>

<span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">POST</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">BLOG_ID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="c1">#{id}</span>
</code></pre></div>
<p>Âú®Êò†Â∞ÑËØ≠Âè•‰∏≠ÔºåÂøÖÈ°ªÈÄöËøá <code>resultSets</code> Â±ûÊÄß‰∏∫ÊØè‰∏™ÁªìÊûúÈõÜÊåáÂÆö‰∏Ä‰∏™ÂêçÂ≠óÔºåÂ§ö‰∏™ÂêçÂ≠ó‰ΩøÁî®ÈÄóÂè∑ÈöîÂºÄ„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectBlog&quot;</span><span class="w"> </span><span class="na">resultSets=</span><span class="s">&quot;blogs,posts&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;blogResult&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>{call<span class="w"> </span>getBlogsAndPosts(#{id,jdbcType=INTEGER,mode=IN})}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p>ÊåáÂÆö ‚Äúposts‚Äù ÈõÜÂêàÂ∞Ü‰ºö‰ΩøÁî®Â≠òÂÇ®Âú® ‚Äúposts‚Äù ÁªìÊûúÈõÜ‰∏≠ÁöÑÊï∞ÊçÆËøõË°åÂ°´ÂÖÖÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;blogResult&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;Blog&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;title&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;title&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;collection</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;posts&quot;</span><span class="w"> </span><span class="na">ofType=</span><span class="s">&quot;Post&quot;</span><span class="w"> </span><span class="na">resultSet=</span><span class="s">&quot;posts&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">foreignColumn=</span><span class="s">&quot;blog_id&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;id&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;subject&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;subject&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;body&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;body&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/collection&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
</code></pre></div>
<h4 id="346">3.4.6„ÄÅÈâ¥Âà´Âô®<a class="headerlink" href="#346" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;discriminator</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;int&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;draft&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;case</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;DraftPost&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/discriminator&gt;</span>
</code></pre></div>
<p>ÊúâÊó∂ÂÄôÔºå‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÊü•ËØ¢ÂèØËÉΩ‰ºöËøîÂõûÂ§ö‰∏™‰∏çÂêåÁöÑÁªìÊûúÈõÜÔºà‰ΩÜÊÄª‰Ωì‰∏äËøòÊòØÊúâ‰∏ÄÂÆöÁöÑËÅîÁ≥ªÁöÑÔºâ„ÄÇ Èâ¥Âà´Âô®ÔºàdiscriminatorÔºâÂÖÉÁ¥†Â∞±ÊòØË¢´ËÆæËÆ°Êù•Â∫îÂØπËøôÁßçÊÉÖÂÜµÁöÑÔºåÂè¶Â§ñ‰πüËÉΩÂ§ÑÁêÜÂÖ∂ÂÆÉÊÉÖÂÜµÔºå‰æãÂ¶ÇÁ±ªÁöÑÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ„ÄÇ Èâ¥Âà´Âô®ÁöÑÊ¶ÇÂøµÂæàÂ•ΩÁêÜËß£‚Äî‚ÄîÂÆÉÂæàÂÉè Java ËØ≠Ë®Ä‰∏≠ÁöÑ switch ËØ≠Âè•„ÄÇ</p>
<p>‰∏Ä‰∏™Èâ¥Âà´Âô®ÁöÑÂÆö‰πâÈúÄË¶ÅÊåáÂÆö column Âíå javaType Â±ûÊÄß„ÄÇcolumn ÊåáÂÆö‰∫Ü MyBatis Êü•ËØ¢Ë¢´ÊØîËæÉÂÄºÁöÑÂú∞Êñπ„ÄÇ ËÄå javaType Áî®Êù•Á°Æ‰øù‰ΩøÁî®Ê≠£Á°ÆÁöÑÁõ∏Á≠âÊµãËØïÔºàËôΩÁÑ∂ÂæàÂ§öÊÉÖÂÜµ‰∏ãÂ≠óÁ¨¶‰∏≤ÁöÑÁõ∏Á≠âÊµãËØïÈÉΩÂèØ‰ª•Â∑•‰ΩúÔºâ„ÄÇ‰æãÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;vehicleResult&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;Vehicle&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;vin&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;vin&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;year&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;year&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;make&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;make&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;model&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;model&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;color&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;color&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;discriminator</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;int&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;vehicle_type&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;case</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;carResult&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;case</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;truckResult&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;case</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;vanResult&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;case</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;4&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;suvResult&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/discriminator&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
</code></pre></div>
<p>Âú®Ëøô‰∏™Á§∫‰æã‰∏≠ÔºåMyBatis ‰ºö‰ªéÁªìÊûúÈõÜ‰∏≠ÂæóÂà∞ÊØèÊù°ËÆ∞ÂΩïÔºåÁÑ∂ÂêéÊØîËæÉÂÆÉÁöÑ vehicle type ÂÄº„ÄÇ Â¶ÇÊûúÂÆÉÂåπÈÖç‰ªªÊÑè‰∏Ä‰∏™Èâ¥Âà´Âô®ÁöÑ caseÔºåÂ∞±‰ºö‰ΩøÁî®Ëøô‰∏™ case ÊåáÂÆöÁöÑÁªìÊûúÊò†Â∞Ñ„ÄÇ Ëøô‰∏™ËøáÁ®ãÊòØ‰∫íÊñ•ÁöÑÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÂâ©‰ΩôÁöÑÁªìÊûúÊò†Â∞ÑÂ∞ÜË¢´ÂøΩÁï•ÔºàÈô§ÈùûÂÆÉÊòØÊâ©Â±ïÁöÑÔºåÊàë‰ª¨Â∞ÜÂú®Á®çÂêéËÆ®ËÆ∫ÂÆÉÔºâ„ÄÇ Â¶ÇÊûú‰∏çËÉΩÂåπÈÖç‰ªª‰Ωï‰∏Ä‰∏™ caseÔºåMyBatis Â∞±Âè™‰ºö‰ΩøÁî®Èâ¥Âà´Âô®ÂùóÂ§ñÂÆö‰πâÁöÑÁªìÊûúÊò†Â∞Ñ„ÄÇ ÊâÄ‰ª•ÔºåÂ¶ÇÊûú carResult ÁöÑÂ£∞ÊòéÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;carResult&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;Car&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;doorCount&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;door_count&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
</code></pre></div>
<p>ÈÇ£‰πàÂè™Êúâ doorCount Â±ûÊÄß‰ºöË¢´Âä†ËΩΩ„ÄÇËøôÊòØ‰∏∫‰∫ÜÂç≥‰ΩøÈâ¥Âà´Âô®ÁöÑ case ‰πãÈó¥ÈÉΩËÉΩÂàÜ‰∏∫ÂÆåÂÖ®Áã¨Á´ãÁöÑ‰∏ÄÁªÑÔºåÂ∞ΩÁÆ°ÂíåÁà∂ÁªìÊûúÊò†Â∞ÑÂèØËÉΩÊ≤°Êúâ‰ªÄ‰πàÂÖ≥Á≥ª„ÄÇÂú®‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨ÂΩìÁÑ∂Áü•ÈÅì cars Âíå vehicles ‰πãÈó¥ÊúâÂÖ≥Á≥ªÔºå‰πüÂ∞±ÊòØ Car ÊòØ‰∏Ä‰∏™ Vehicle„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨Â∏åÊúõÂâ©‰ΩôÁöÑÂ±ûÊÄß‰πüËÉΩË¢´Âä†ËΩΩ„ÄÇËÄåËøôÂè™ÈúÄË¶Å‰∏Ä‰∏™Â∞è‰øÆÊîπ„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;carResult&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;Car&quot;</span><span class="w"> </span><span class="na">extends=</span><span class="s">&quot;vehicleResult&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;doorCount&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;door_count&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
</code></pre></div>
<p>Áé∞Âú® vehicleResult Âíå carResult ÁöÑÂ±ûÊÄßÈÉΩ‰ºöË¢´Âä†ËΩΩ‰∫Ü„ÄÇ</p>
<p>ÂèØËÉΩÊúâ‰∫∫Âèà‰ºöËßâÂæóÊò†Â∞ÑÁöÑÂ§ñÈÉ®ÂÆö‰πâÊúâÁÇπÂ§™ÂÜóÈïø‰∫Ü„ÄÇ Âõ†Ê≠§ÔºåÂØπ‰∫éÈÇ£‰∫õÊõ¥ÂñúÊ¨¢ÁÆÄÊ¥ÅÁöÑÊò†Â∞ÑÈ£éÊ†ºÁöÑ‰∫∫Êù•ËØ¥ÔºåËøòÊúâÂè¶‰∏ÄÁßçËØ≠Ê≥ïÂèØ‰ª•ÈÄâÊã©„ÄÇ‰æãÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;vehicleResult&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;Vehicle&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;id</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;vin&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;vin&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;year&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;year&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;make&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;make&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;model&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;model&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;color&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;color&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;discriminator</span><span class="w"> </span><span class="na">javaType=</span><span class="s">&quot;int&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;vehicle_type&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;case</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;carResult&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;doorCount&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;door_count&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/case&gt;</span>
<span class="w">    </span><span class="nt">&lt;case</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;truckResult&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;boxSize&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;box_size&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;extendedCab&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;extended_cab&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/case&gt;</span>
<span class="w">    </span><span class="nt">&lt;case</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;vanResult&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;powerSlidingDoor&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;power_sliding_door&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/case&gt;</span>
<span class="w">    </span><span class="nt">&lt;case</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;4&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;suvResult&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;allWheelDrive&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;all_wheel_drive&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/case&gt;</span>
<span class="w">  </span><span class="nt">&lt;/discriminator&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
</code></pre></div>
<h3 id="35">3.5„ÄÅËá™Âä®Êò†Â∞Ñ<a class="headerlink" href="#35" title="Permanent link">&para;</a></h3>
<p>Ê≠£Â¶Ç‰Ω†Âú®ÂâçÈù¢‰∏ÄËäÇÁúãÂà∞ÁöÑÔºåÂú®ÁÆÄÂçïÁöÑÂú∫ÊôØ‰∏ãÔºåMyBatis ÂèØ‰ª•‰∏∫‰Ω†Ëá™Âä®Êò†Â∞ÑÊü•ËØ¢ÁªìÊûú„ÄÇ‰ΩÜÂ¶ÇÊûúÈÅáÂà∞Â§çÊùÇÁöÑÂú∫ÊôØÔºå‰Ω†ÈúÄË¶ÅÊûÑÂª∫‰∏Ä‰∏™ÁªìÊûúÊò†Â∞Ñ„ÄÇ ‰ΩÜÊòØÂú®Êú¨ËäÇ‰∏≠Ôºå‰Ω†Â∞ÜÁúãÂà∞Ôºå‰Ω†ÂèØ‰ª•Ê∑∑Âêà‰ΩøÁî®Ëøô‰∏§ÁßçÁ≠ñÁï•„ÄÇËÆ©Êàë‰ª¨Ê∑±ÂÖ•‰∫ÜËß£‰∏Ä‰∏ãËá™Âä®Êò†Â∞ÑÊòØÊÄéÊ†∑Â∑•‰ΩúÁöÑ„ÄÇ</p>
<p>ÂΩìËá™Âä®Êò†Â∞ÑÊü•ËØ¢ÁªìÊûúÊó∂ÔºåMyBatis ‰ºöËé∑ÂèñÁªìÊûú‰∏≠ËøîÂõûÁöÑÂàóÂêçÂπ∂Âú® Java Á±ª‰∏≠Êü•ÊâæÁõ∏ÂêåÂêçÂ≠óÁöÑÂ±ûÊÄßÔºàÂøΩÁï•Â§ßÂ∞èÂÜôÔºâ„ÄÇ ËøôÊÑèÂë≥ÁùÄÂ¶ÇÊûúÂèëÁé∞‰∫Ü <em>ID</em> ÂàóÂíå <em>id</em> Â±ûÊÄßÔºåMyBatis ‰ºöÂ∞ÜÂàó <em>ID</em> ÁöÑÂÄºËµãÁªô <em>id</em> Â±ûÊÄß„ÄÇ</p>
<p>ÈÄöÂ∏∏Êï∞ÊçÆÂ∫ìÂàó‰ΩøÁî®Â§ßÂÜôÂ≠óÊØçÁªÑÊàêÁöÑÂçïËØçÂëΩÂêçÔºåÂçïËØçÈó¥Áî®‰∏ãÂàíÁ∫øÂàÜÈöîÔºõËÄå Java Â±ûÊÄß‰∏ÄËà¨ÈÅµÂæ™È©ºÂ≥∞ÂëΩÂêçÊ≥ïÁ∫¶ÂÆö„ÄÇ‰∏∫‰∫ÜÂú®Ëøô‰∏§ÁßçÂëΩÂêçÊñπÂºè‰πãÈó¥ÂêØÁî®Ëá™Âä®Êò†Â∞ÑÔºåÈúÄË¶ÅÂ∞Ü <code>mapUnderscoreToCamelCase</code> ËÆæÁΩÆ‰∏∫ true„ÄÇ</p>
<p>ÁîöËá≥Âú®Êèê‰æõ‰∫ÜÁªìÊûúÊò†Â∞ÑÂêéÔºåËá™Âä®Êò†Â∞Ñ‰πüËÉΩÂ∑•‰Ωú„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂØπ‰∫éÊØè‰∏Ä‰∏™ÁªìÊûúÊò†Â∞ÑÔºåÂú® ResultSet Âá∫Áé∞ÁöÑÂàóÔºåÂ¶ÇÊûúÊ≤°ÊúâËÆæÁΩÆÊâãÂä®Êò†Â∞ÑÔºåÂ∞ÜË¢´Ëá™Âä®Êò†Â∞Ñ„ÄÇÂú®Ëá™Âä®Êò†Â∞ÑÂ§ÑÁêÜÂÆåÊØïÂêéÔºåÂÜçÂ§ÑÁêÜÊâãÂä®Êò†Â∞Ñ„ÄÇ Âú®‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Ôºå<em>id</em> Âíå <em>userName</em> ÂàóÂ∞ÜË¢´Ëá™Âä®Êò†Â∞ÑÔºå<em>hashed_password</em> ÂàóÂ∞ÜÊ†πÊçÆÈÖçÁΩÆËøõË°åÊò†Â∞Ñ„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectUsers&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;userResultMap&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>select
<span class="w">    </span>user_id<span class="w">             </span>as<span class="w"> </span>&quot;id&quot;,
<span class="w">    </span>user_name<span class="w">           </span>as<span class="w"> </span>&quot;userName&quot;,
<span class="w">    </span>hashed_password
<span class="w">  </span>from<span class="w"> </span>some_table
<span class="w">  </span>where<span class="w"> </span>id<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;userResultMap&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;User&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;password&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;hashed_password&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
</code></pre></div>
<p>Êúâ‰∏âÁßçËá™Âä®Êò†Â∞ÑÁ≠âÁ∫ßÔºö</p>
<ul>
<li><code>NONE</code> - Á¶ÅÁî®Ëá™Âä®Êò†Â∞Ñ„ÄÇ‰ªÖÂØπÊâãÂä®Êò†Â∞ÑÁöÑÂ±ûÊÄßËøõË°åÊò†Â∞Ñ„ÄÇ</li>
<li><code>PARTIAL</code> - ÂØπÈô§Âú®ÂÜÖÈÉ®ÂÆö‰πâ‰∫ÜÂµåÂ•óÁªìÊûúÊò†Â∞ÑÔºà‰πüÂ∞±ÊòØËøûÊé•ÁöÑÂ±ûÊÄßÔºâ‰ª•Â§ñÁöÑÂ±ûÊÄßËøõË°åÊò†Â∞Ñ</li>
<li><code>FULL</code> - Ëá™Âä®Êò†Â∞ÑÊâÄÊúâÂ±ûÊÄß„ÄÇ</li>
</ul>
<p>ÈªòËÆ§ÂÄºÊòØ <code>PARTIAL</code>ÔºåËøôÊòØÊúâÂéüÂõ†ÁöÑ„ÄÇÂΩìÂØπËøûÊé•Êü•ËØ¢ÁöÑÁªìÊûú‰ΩøÁî® <code>FULL</code> Êó∂ÔºåËøûÊé•Êü•ËØ¢‰ºöÂú®Âêå‰∏ÄË°å‰∏≠Ëé∑ÂèñÂ§ö‰∏™‰∏çÂêåÂÆû‰ΩìÁöÑÊï∞ÊçÆÔºåÂõ†Ê≠§ÂèØËÉΩÂØºËá¥ÈùûÈ¢ÑÊúüÁöÑÊò†Â∞Ñ„ÄÇ ‰∏ãÈù¢ÁöÑ‰æãÂ≠êÂ∞ÜÂ±ïÁ§∫ËøôÁßçÈ£éÈô©Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectBlog&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;blogResult&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>select
<span class="w">    </span>B.id,
<span class="w">    </span>B.title,
<span class="w">    </span>A.username,
<span class="w">  </span>from<span class="w"> </span>Blog<span class="w"> </span>B<span class="w"> </span>left<span class="w"> </span>outer<span class="w"> </span>join<span class="w"> </span>Author<span class="w"> </span>A<span class="w"> </span>on<span class="w"> </span>B.author_id<span class="w"> </span>=<span class="w"> </span>A.id
<span class="w">  </span>where<span class="w"> </span>B.id<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;blogResult&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;Blog&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;association</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;author&quot;</span><span class="w"> </span><span class="na">resultMap=</span><span class="s">&quot;authorResult&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>

<span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;authorResult&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;Author&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;username&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;author_username&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/resultMap&gt;</span>
</code></pre></div>
<p>Âú®ËØ•ÁªìÊûúÊò†Â∞Ñ‰∏≠Ôºå<em>Blog</em> Âíå <em>Author</em> ÂùáÂ∞ÜË¢´Ëá™Âä®Êò†Â∞Ñ„ÄÇ‰ΩÜÊòØÊ≥®ÊÑè <em>Author</em> Êúâ‰∏Ä‰∏™ <em>id</em> Â±ûÊÄßÔºåÂú® ResultSet ‰∏≠‰πüÊúâ‰∏Ä‰∏™Âêç‰∏∫ <em>id</em> ÁöÑÂàóÔºåÊâÄ‰ª• Author ÁöÑ id Â∞ÜÂ°´ÂÖ• Blog ÁöÑ idÔºåËøôÂèØ‰∏çÊòØ‰Ω†ÊúüÊúõÁöÑË°å‰∏∫„ÄÇ ÊâÄ‰ª•ÔºåË¶ÅË∞®ÊÖé‰ΩøÁî® <code>FULL</code>„ÄÇ</p>
<p>Êó†ËÆ∫ËÆæÁΩÆÁöÑËá™Âä®Êò†Â∞ÑÁ≠âÁ∫ßÊòØÂì™ÁßçÔºå‰Ω†ÈÉΩÂèØ‰ª•ÈÄöËøáÂú®ÁªìÊûúÊò†Â∞Ñ‰∏äËÆæÁΩÆ <code>autoMapping</code> Â±ûÊÄßÊù•‰∏∫ÊåáÂÆöÁöÑÁªìÊûúÊò†Â∞ÑËÆæÁΩÆÂêØÁî®/Á¶ÅÁî®Ëá™Âä®Êò†Â∞Ñ„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;resultMap</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;userResultMap&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;User&quot;</span><span class="w"> </span><span class="na">autoMapping=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;password&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;hashed_password&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/resultMp&gt;</span>
</code></pre></div>
<h3 id="36">3.6„ÄÅÁºìÂ≠ò<a class="headerlink" href="#36" title="Permanent link">&para;</a></h3>
<p>MyBatis ÂÜÖÁΩÆ‰∫Ü‰∏Ä‰∏™Âº∫Â§ßÁöÑ‰∫ãÂä°ÊÄßÊü•ËØ¢ÁºìÂ≠òÊú∫Âà∂ÔºåÂÆÉÂèØ‰ª•ÈùûÂ∏∏Êñπ‰æøÂú∞ÈÖçÁΩÆÂíåÂÆöÂà∂„ÄÇ ‰∏∫‰∫Ü‰ΩøÂÆÉÊõ¥Âä†Âº∫Â§ßËÄå‰∏îÊòì‰∫éÈÖçÁΩÆÔºåÊàë‰ª¨ÂØπ MyBatis 3 ‰∏≠ÁöÑÁºìÂ≠òÂÆûÁé∞ËøõË°å‰∫ÜËÆ∏Â§öÊîπËøõ„ÄÇ</p>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂè™ÂêØÁî®‰∫ÜÊú¨Âú∞ÁöÑ‰ºöËØùÁºìÂ≠òÔºåÂÆÉ‰ªÖ‰ªÖÂØπ‰∏Ä‰∏™‰ºöËØù‰∏≠ÁöÑÊï∞ÊçÆËøõË°åÁºìÂ≠ò„ÄÇ Ë¶ÅÂêØÁî®ÂÖ®Â±ÄÁöÑ‰∫åÁ∫ßÁºìÂ≠òÔºåÂè™ÈúÄË¶ÅÂú®‰Ω†ÁöÑ SQL Êò†Â∞ÑÊñá‰ª∂‰∏≠Ê∑ªÂä†‰∏ÄË°åÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;cache/&gt;</span>
</code></pre></div>
<p>Âü∫Êú¨‰∏äÂ∞±ÊòØËøôÊ†∑„ÄÇËøô‰∏™ÁÆÄÂçïËØ≠Âè•ÁöÑÊïàÊûúÂ¶Ç‰∏ã:</p>
<ul>
<li>Êò†Â∞ÑËØ≠Âè•Êñá‰ª∂‰∏≠ÁöÑÊâÄÊúâ select ËØ≠Âè•ÁöÑÁªìÊûúÂ∞Ü‰ºöË¢´ÁºìÂ≠ò„ÄÇ</li>
<li>Êò†Â∞ÑËØ≠Âè•Êñá‰ª∂‰∏≠ÁöÑÊâÄÊúâ insert„ÄÅupdate Âíå delete ËØ≠Âè•‰ºöÂà∑Êñ∞ÁºìÂ≠ò„ÄÇ</li>
<li>ÁºìÂ≠ò‰ºö‰ΩøÁî®ÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÁÆóÊ≥ïÔºàLRU, Least Recently UsedÔºâÁÆóÊ≥ïÊù•Ê∏ÖÈô§‰∏çÈúÄË¶ÅÁöÑÁºìÂ≠ò„ÄÇ</li>
<li>ÁºìÂ≠ò‰∏ç‰ºöÂÆöÊó∂ËøõË°åÂà∑Êñ∞Ôºà‰πüÂ∞±ÊòØËØ¥ÔºåÊ≤°ÊúâÂà∑Êñ∞Èó¥ÈöîÔºâ„ÄÇ</li>
<li>ÁºìÂ≠ò‰ºö‰øùÂ≠òÂàóË°®ÊàñÂØπË±°ÔºàÊó†ËÆ∫Êü•ËØ¢ÊñπÊ≥ïËøîÂõûÂì™ÁßçÔºâÁöÑ 1024 ‰∏™ÂºïÁî®„ÄÇ</li>
<li>ÁºìÂ≠ò‰ºöË¢´ËßÜ‰∏∫ËØª/ÂÜôÁºìÂ≠òÔºåËøôÊÑèÂë≥ÁùÄËé∑ÂèñÂà∞ÁöÑÂØπË±°Âπ∂‰∏çÊòØÂÖ±‰∫´ÁöÑÔºåÂèØ‰ª•ÂÆâÂÖ®Âú∞Ë¢´Ë∞ÉÁî®ËÄÖ‰øÆÊîπÔºåËÄå‰∏çÂπ≤Êâ∞ÂÖ∂‰ªñË∞ÉÁî®ËÄÖÊàñÁ∫øÁ®ãÊâÄÂÅöÁöÑÊΩúÂú®‰øÆÊîπ„ÄÇ</li>
</ul>
<p><strong>ÊèêÁ§∫</strong> ÁºìÂ≠òÂè™‰ΩúÁî®‰∫é cache Ê†áÁ≠æÊâÄÂú®ÁöÑÊò†Â∞ÑÊñá‰ª∂‰∏≠ÁöÑËØ≠Âè•„ÄÇÂ¶ÇÊûú‰Ω†Ê∑∑Âêà‰ΩøÁî® Java API Âíå XML Êò†Â∞ÑÊñá‰ª∂ÔºåÂú®ÂÖ±Áî®Êé•Âè£‰∏≠ÁöÑËØ≠Âè•Â∞Ü‰∏ç‰ºöË¢´ÈªòËÆ§ÁºìÂ≠ò„ÄÇ‰Ω†ÈúÄË¶Å‰ΩøÁî® @CacheNamespaceRef Ê≥®Ëß£ÊåáÂÆöÁºìÂ≠ò‰ΩúÁî®Âüü„ÄÇ</p>
<p>Ëøô‰∫õÂ±ûÊÄßÂèØ‰ª•ÈÄöËøá cache ÂÖÉÁ¥†ÁöÑÂ±ûÊÄßÊù•‰øÆÊîπ„ÄÇÊØîÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;cache</span>
<span class="w">  </span><span class="na">eviction=</span><span class="s">&quot;FIFO&quot;</span>
<span class="w">  </span><span class="na">flushInterval=</span><span class="s">&quot;60000&quot;</span>
<span class="w">  </span><span class="na">size=</span><span class="s">&quot;512&quot;</span>
<span class="w">  </span><span class="na">readOnly=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</code></pre></div>
<p>Ëøô‰∏™Êõ¥È´òÁ∫ßÁöÑÈÖçÁΩÆÂàõÂª∫‰∫Ü‰∏Ä‰∏™ FIFO ÁºìÂ≠òÔºåÊØèÈöî 60 ÁßíÂà∑Êñ∞ÔºåÊúÄÂ§öÂèØ‰ª•Â≠òÂÇ®ÁªìÊûúÂØπË±°ÊàñÂàóË°®ÁöÑ 512 ‰∏™ÂºïÁî®ÔºåËÄå‰∏îËøîÂõûÁöÑÂØπË±°Ë¢´ËÆ§‰∏∫ÊòØÂè™ËØªÁöÑÔºåÂõ†Ê≠§ÂØπÂÆÉ‰ª¨ËøõË°å‰øÆÊîπÂèØËÉΩ‰ºöÂú®‰∏çÂêåÁ∫øÁ®ã‰∏≠ÁöÑË∞ÉÁî®ËÄÖ‰∫ßÁîüÂÜ≤Á™Å„ÄÇ</p>
<p>ÂèØÁî®ÁöÑÊ∏ÖÈô§Á≠ñÁï•ÊúâÔºö</p>
<ul>
<li><code>LRU</code> ‚Äì ÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÔºöÁßªÈô§ÊúÄÈïøÊó∂Èó¥‰∏çË¢´‰ΩøÁî®ÁöÑÂØπË±°„ÄÇ</li>
<li><code>FIFO</code> ‚Äì ÂÖàËøõÂÖàÂá∫ÔºöÊåâÂØπË±°ËøõÂÖ•ÁºìÂ≠òÁöÑÈ°∫Â∫èÊù•ÁßªÈô§ÂÆÉ‰ª¨„ÄÇ</li>
<li><code>SOFT</code> ‚Äì ËΩØÂºïÁî®ÔºöÂü∫‰∫éÂûÉÂúæÂõûÊî∂Âô®Áä∂ÊÄÅÂíåËΩØÂºïÁî®ËßÑÂàôÁßªÈô§ÂØπË±°„ÄÇ</li>
<li><code>WEAK</code> ‚Äì Âº±ÂºïÁî®ÔºöÊõ¥ÁßØÊûÅÂú∞Âü∫‰∫éÂûÉÂúæÊî∂ÈõÜÂô®Áä∂ÊÄÅÂíåÂº±ÂºïÁî®ËßÑÂàôÁßªÈô§ÂØπË±°„ÄÇ</li>
</ul>
<p>ÈªòËÆ§ÁöÑÊ∏ÖÈô§Á≠ñÁï•ÊòØ LRU„ÄÇ</p>
<p>flushIntervalÔºàÂà∑Êñ∞Èó¥ÈöîÔºâÂ±ûÊÄßÂèØ‰ª•Ë¢´ËÆæÁΩÆ‰∏∫‰ªªÊÑèÁöÑÊ≠£Êï¥Êï∞ÔºåËÆæÁΩÆÁöÑÂÄºÂ∫îËØ•ÊòØ‰∏Ä‰∏™‰ª•ÊØ´Áßí‰∏∫Âçï‰ΩçÁöÑÂêàÁêÜÊó∂Èó¥Èáè„ÄÇ ÈªòËÆ§ÊÉÖÂÜµÊòØ‰∏çËÆæÁΩÆÔºå‰πüÂ∞±ÊòØÊ≤°ÊúâÂà∑Êñ∞Èó¥ÈöîÔºåÁºìÂ≠ò‰ªÖ‰ªÖ‰ºöÂú®Ë∞ÉÁî®ËØ≠Âè•Êó∂Âà∑Êñ∞„ÄÇ</p>
<p>sizeÔºàÂºïÁî®Êï∞ÁõÆÔºâÂ±ûÊÄßÂèØ‰ª•Ë¢´ËÆæÁΩÆ‰∏∫‰ªªÊÑèÊ≠£Êï¥Êï∞ÔºåË¶ÅÊ≥®ÊÑèÊ¨≤ÁºìÂ≠òÂØπË±°ÁöÑÂ§ßÂ∞èÂíåËøêË°åÁéØÂ¢É‰∏≠ÂèØÁî®ÁöÑÂÜÖÂ≠òËµÑÊ∫ê„ÄÇÈªòËÆ§ÂÄºÊòØ 1024„ÄÇ</p>
<p>readOnlyÔºàÂè™ËØªÔºâÂ±ûÊÄßÂèØ‰ª•Ë¢´ËÆæÁΩÆ‰∏∫ true Êàñ false„ÄÇÂè™ËØªÁöÑÁºìÂ≠ò‰ºöÁªôÊâÄÊúâË∞ÉÁî®ËÄÖËøîÂõûÁºìÂ≠òÂØπË±°ÁöÑÁõ∏ÂêåÂÆû‰æã„ÄÇ Âõ†Ê≠§Ëøô‰∫õÂØπË±°‰∏çËÉΩË¢´‰øÆÊîπ„ÄÇËøôÂ∞±Êèê‰æõ‰∫ÜÂèØËßÇÁöÑÊÄßËÉΩÊèêÂçá„ÄÇËÄåÂèØËØªÂÜôÁöÑÁºìÂ≠ò‰ºöÔºàÈÄöËøáÂ∫èÂàóÂåñÔºâËøîÂõûÁºìÂ≠òÂØπË±°ÁöÑÊã∑Ë¥ù„ÄÇ ÈÄüÂ∫¶‰∏ä‰ºöÊÖ¢‰∏Ä‰∫õÔºå‰ΩÜÊòØÊõ¥ÂÆâÂÖ®ÔºåÂõ†Ê≠§ÈªòËÆ§ÂÄºÊòØ false„ÄÇ</p>
<p><strong>ÊèêÁ§∫</strong> ‰∫åÁ∫ßÁºìÂ≠òÊòØ‰∫ãÂä°ÊÄßÁöÑ„ÄÇËøôÊÑèÂë≥ÁùÄÔºåÂΩì SqlSession ÂÆåÊàêÂπ∂Êèê‰∫§Êó∂ÔºåÊàñÊòØÂÆåÊàêÂπ∂ÂõûÊªöÔºå‰ΩÜÊ≤°ÊúâÊâßË°å flushCache=true ÁöÑ insert/delete/update ËØ≠Âè•Êó∂ÔºåÁºìÂ≠ò‰ºöËé∑ÂæóÊõ¥Êñ∞„ÄÇ</p>
<p><strong>‰ΩøÁî®Ëá™ÂÆö‰πâÁºìÂ≠ò</strong></p>
<p>Èô§‰∫Ü‰∏äËø∞Ëá™ÂÆö‰πâÁºìÂ≠òÁöÑÊñπÂºèÔºå‰Ω†‰πüÂèØ‰ª•ÈÄöËøáÂÆûÁé∞‰Ω†Ëá™Â∑±ÁöÑÁºìÂ≠òÔºåÊàñ‰∏∫ÂÖ∂‰ªñÁ¨¨‰∏âÊñπÁºìÂ≠òÊñπÊ°àÂàõÂª∫ÈÄÇÈÖçÂô®ÔºåÊù•ÂÆåÂÖ®Ë¶ÜÁõñÁºìÂ≠òË°å‰∏∫„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;cache</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;com.domain.something.MyCustomCache&quot;</span><span class="nt">/&gt;</span>
</code></pre></div>
<p>Ëøô‰∏™Á§∫‰æãÂ±ïÁ§∫‰∫ÜÂ¶Ç‰Ωï‰ΩøÁî®‰∏Ä‰∏™Ëá™ÂÆö‰πâÁöÑÁºìÂ≠òÂÆûÁé∞„ÄÇtype Â±ûÊÄßÊåáÂÆöÁöÑÁ±ªÂøÖÈ°ªÂÆûÁé∞ org.apache.ibatis.cache.Cache Êé•Âè£Ôºå‰∏îÊèê‰æõ‰∏Ä‰∏™Êé•Âèó String ÂèÇÊï∞‰Ωú‰∏∫ id ÁöÑÊûÑÈÄ†Âô®„ÄÇ Ëøô‰∏™Êé•Âè£ÊòØ MyBatis Ê°ÜÊû∂‰∏≠ËÆ∏Â§öÂ§çÊùÇÁöÑÊé•Âè£‰πã‰∏ÄÔºå‰ΩÜÊòØË°å‰∏∫Âç¥ÈùûÂ∏∏ÁÆÄÂçï„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Cache</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">String</span><span class="w"> </span><span class="nf">getId</span><span class="p">();</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="nf">getSize</span><span class="p">();</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">putObject</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">value</span><span class="p">);</span>
<span class="w">  </span><span class="n">Object</span><span class="w"> </span><span class="nf">getObject</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">);</span>
<span class="w">  </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">hasKey</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">);</span>
<span class="w">  </span><span class="n">Object</span><span class="w"> </span><span class="nf">removeObject</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">key</span><span class="p">);</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">clear</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>‰∏∫‰∫ÜÂØπ‰Ω†ÁöÑÁºìÂ≠òËøõË°åÈÖçÁΩÆÔºåÂè™ÈúÄË¶ÅÁÆÄÂçïÂú∞Âú®‰Ω†ÁöÑÁºìÂ≠òÂÆûÁé∞‰∏≠Ê∑ªÂä†ÂÖ¨ÊúâÁöÑ JavaBean Â±ûÊÄßÔºåÁÑ∂ÂêéÈÄöËøá cache ÂÖÉÁ¥†‰º†ÈÄíÂ±ûÊÄßÂÄºÔºå‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑ‰æãÂ≠êÂ∞ÜÂú®‰Ω†ÁöÑÁºìÂ≠òÂÆûÁé∞‰∏äË∞ÉÁî®‰∏Ä‰∏™Âêç‰∏∫ <code>setCacheFile(String file)</code> ÁöÑÊñπÊ≥ïÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;cache</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;com.domain.something.MyCustomCache&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;cacheFile&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;/tmp/my-custom-cache.tmp&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/cache&gt;</span>
</code></pre></div>
<p>‰Ω†ÂèØ‰ª•‰ΩøÁî®ÊâÄÊúâÁÆÄÂçïÁ±ªÂûã‰Ωú‰∏∫ JavaBean Â±ûÊÄßÁöÑÁ±ªÂûãÔºåMyBatis ‰ºöËøõË°åËΩ¨Êç¢„ÄÇ ‰Ω†‰πüÂèØ‰ª•‰ΩøÁî®Âç†‰ΩçÁ¨¶ÔºàÂ¶Ç <code>${cache.file}</code>ÔºâÔºå‰ª•‰æøÊõøÊç¢ÊàêÂú®ÈÖçÁΩÆÊñá‰ª∂Â±ûÊÄß‰∏≠ÂÆö‰πâÁöÑÂÄº„ÄÇ</p>
<p>‰ªéÁâàÊú¨ 3.4.2 ÂºÄÂßãÔºåMyBatis Â∑≤ÁªèÊîØÊåÅÂú®ÊâÄÊúâÂ±ûÊÄßËÆæÁΩÆÂÆåÊØï‰πãÂêéÔºåË∞ÉÁî®‰∏Ä‰∏™ÂàùÂßãÂåñÊñπÊ≥ï„ÄÇ Â¶ÇÊûúÊÉ≥Ë¶Å‰ΩøÁî®Ëøô‰∏™ÁâπÊÄßÔºåËØ∑Âú®‰Ω†ÁöÑËá™ÂÆö‰πâÁºìÂ≠òÁ±ªÈáåÂÆûÁé∞ <code>org.apache.ibatis.builder.InitializingObject</code> Êé•Âè£„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">InitializingObject</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">initialize</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>ÊèêÁ§∫</strong> ‰∏ä‰∏ÄËäÇ‰∏≠ÂØπÁºìÂ≠òÁöÑÈÖçÁΩÆÔºàÂ¶ÇÊ∏ÖÈô§Á≠ñÁï•„ÄÅÂèØËØªÊàñÂèØËØªÂÜôÁ≠âÔºâÔºå‰∏çËÉΩÂ∫îÁî®‰∫éËá™ÂÆö‰πâÁºìÂ≠ò„ÄÇ</p>
<p>ËØ∑Ê≥®ÊÑèÔºåÁºìÂ≠òÁöÑÈÖçÁΩÆÂíåÁºìÂ≠òÂÆû‰æã‰ºöË¢´ÁªëÂÆöÂà∞ SQL Êò†Â∞ÑÊñá‰ª∂ÁöÑÂëΩÂêçÁ©∫Èó¥‰∏≠„ÄÇ Âõ†Ê≠§ÔºåÂêå‰∏ÄÂëΩÂêçÁ©∫Èó¥‰∏≠ÁöÑÊâÄÊúâËØ≠Âè•ÂíåÁºìÂ≠òÂ∞ÜÈÄöËøáÂëΩÂêçÁ©∫Èó¥ÁªëÂÆöÂú®‰∏ÄËµ∑„ÄÇ ÊØèÊù°ËØ≠Âè•ÂèØ‰ª•Ëá™ÂÆö‰πâ‰∏éÁºìÂ≠ò‰∫§‰∫íÁöÑÊñπÂºèÔºåÊàñÂ∞ÜÂÆÉ‰ª¨ÂÆåÂÖ®ÊéíÈô§‰∫éÁºìÂ≠ò‰πãÂ§ñÔºåËøôÂèØ‰ª•ÈÄöËøáÂú®ÊØèÊù°ËØ≠Âè•‰∏ä‰ΩøÁî®‰∏§‰∏™ÁÆÄÂçïÂ±ûÊÄßÊù•ËææÊàê„ÄÇ ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåËØ≠Âè•‰ºöËøôÊ†∑Êù•ÈÖçÁΩÆÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="na">flushCache=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="na">useCache=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;insert</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="na">flushCache=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;update</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="na">flushCache=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;delete</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="na">flushCache=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</code></pre></div>
<p>Èâ¥‰∫éËøôÊòØÈªòËÆ§Ë°å‰∏∫ÔºåÊòæÁÑ∂‰Ω†Ê∞∏Ëøú‰∏çÂ∫îËØ•‰ª•ËøôÊ†∑ÁöÑÊñπÂºèÊòæÂºèÈÖçÁΩÆ‰∏ÄÊù°ËØ≠Âè•„ÄÇ‰ΩÜÂ¶ÇÊûú‰Ω†ÊÉ≥ÊîπÂèòÈªòËÆ§ÁöÑË°å‰∏∫ÔºåÂè™ÈúÄË¶ÅËÆæÁΩÆ flushCache Âíå useCache Â±ûÊÄß„ÄÇÊØîÂ¶ÇÔºåÊüê‰∫õÊÉÖÂÜµ‰∏ã‰Ω†ÂèØËÉΩÂ∏åÊúõÁâπÂÆö select ËØ≠Âè•ÁöÑÁªìÊûúÊéíÈô§‰∫éÁºìÂ≠ò‰πãÂ§ñÔºåÊàñÂ∏åÊúõ‰∏ÄÊù° select ËØ≠Âè•Ê∏ÖÁ©∫ÁºìÂ≠ò„ÄÇÁ±ª‰ººÂú∞Ôºå‰Ω†ÂèØËÉΩÂ∏åÊúõÊüê‰∫õ update ËØ≠Âè•ÊâßË°åÊó∂‰∏çË¶ÅÂà∑Êñ∞ÁºìÂ≠ò„ÄÇ</p>
<p><strong>cache-ref</strong></p>
<p>ÂõûÊÉ≥‰∏Ä‰∏ã‰∏ä‰∏ÄËäÇÁöÑÂÜÖÂÆπÔºåÂØπÊüê‰∏ÄÂëΩÂêçÁ©∫Èó¥ÁöÑËØ≠Âè•ÔºåÂè™‰ºö‰ΩøÁî®ËØ•ÂëΩÂêçÁ©∫Èó¥ÁöÑÁºìÂ≠òËøõË°åÁºìÂ≠òÊàñÂà∑Êñ∞„ÄÇ ‰ΩÜ‰Ω†ÂèØËÉΩ‰ºöÊÉ≥Ë¶ÅÂú®Â§ö‰∏™ÂëΩÂêçÁ©∫Èó¥‰∏≠ÂÖ±‰∫´Áõ∏ÂêåÁöÑÁºìÂ≠òÈÖçÁΩÆÂíåÂÆû‰æã„ÄÇË¶ÅÂÆûÁé∞ËøôÁßçÈúÄÊ±ÇÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî® cache-ref ÂÖÉÁ¥†Êù•ÂºïÁî®Âè¶‰∏Ä‰∏™ÁºìÂ≠ò„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;cache-ref</span><span class="w"> </span><span class="na">namespace=</span><span class="s">&quot;com.someone.application.data.SomeMapper&quot;</span><span class="nt">/&gt;</span>
</code></pre></div>
<p><strong>‰∏ÄÁ∫ßÁºìÂ≠òÂíå‰∫åÁ∫ßÁºìÂ≠ò</strong></p>
<p>‰∏ÄÁ∫ßÁºìÂ≠òÊòØÈªòËÆ§ÂºÄÂêØÁöÑÔºå‰ΩúÁî®ÂüüÊòØsessionÁ∫ßÂà´ÁöÑÔºåÂú®commit‰πãÂâçÔºåÁ¨¨‰∏ÄÊ¨°Êü•ËØ¢ÁªìÊûúÊç¢‰ª•key valueÁöÑÂΩ¢ÂºèÂ≠òËµ∑Êù•ÔºåÂ¶ÇÊûúÊúâÁõ∏ÂêåÁöÑkeyËøõÊù•ÔºåÁõ¥Êé•ËøîÂõûvalueÔºåËøôÊ†∑ÊúâÂä©‰∫éÂáèËΩªÊï∞ÊçÆÁöÑÂéãÂäõ„ÄÇÂΩìcommitÊàñËÄÖrollbackÁöÑÊó∂ÂÄô‰ºöÊ∏ÖÈô§ÁºìÂ≠òÔºåÂπ∂‰∏îÊâßË°åinsert„ÄÅupdate„ÄÅdeleteÁöÑÊó∂ÂÄô‰πü‰ºöÊ∏ÖÈô§ÁºìÂ≠ò„ÄÇ</p>
<p>‰∫åÁ∫ßÁºìÂ≠òÊòØÊâãÂä®ÂºÄÂêØÁöÑÔºå‰ΩúÁî®Âüü‰∏∫sessionfactoryÔºà‰πüÂèØ‰ª•ËØ¥MapperStatementÁ∫ßÁºìÂ≠òÔºå‰πüÂ∞±ÊòØ‰∏Ä‰∏™namespaceÂ∞±‰ºöÊúâ‰∏Ä‰∏™ÁºìÂ≠òÔºâÔºåÂõ†‰∏∫‰∫åÁ∫ßÁºìÂ≠òÁöÑÊï∞ÊçÆ‰∏ç‰∏ÄÂÆöÈÉΩÊòØÂ≠òÂÇ®Âà∞ÂÜÖÂ≠ò‰∏≠ÔºåÂÆÉÁöÑÂ≠òÂÇ®‰ªãË¥®Â§öÁßçÂ§öÊ†∑ÔºåÂÆûÁé∞‰∫åÁ∫ßÁºìÂ≠òÁöÑÊó∂ÂÄôÔºåMyBatisË¶ÅÊ±ÇËøîÂõûÁöÑPOJOÂøÖÈ°ªÊòØÂèØÂ∫èÂàóÂåñÁöÑÔºå‰πüÂ∞±ÊòØË¶ÅÊ±ÇÂÆûÁé∞SerializableÊé•Âè£ÔºåÂ¶ÇÊûúÂ≠òÂÇ®Âú®ÂÜÖÂ≠ò‰∏≠ÁöÑËØùÔºåÂÆûÊµã‰∏çÂ∫èÂàóÂåñ‰πüÂèØ‰ª•ÁöÑ„ÄÇ</p>
<h2 id="4sql">4„ÄÅÂä®ÊÄÅSQL<a class="headerlink" href="#4sql" title="Permanent link">&para;</a></h2>
<p>Âä®ÊÄÅ SQL ÊòØ MyBatis ÁöÑÂº∫Â§ßÁâπÊÄß‰πã‰∏Ä„ÄÇÂ¶ÇÊûú‰Ω†‰ΩøÁî®Ëøá JDBC ÊàñÂÖ∂ÂÆÉÁ±ª‰ººÁöÑÊ°ÜÊû∂Ôºå‰Ω†Â∫îËØ•ËÉΩÁêÜËß£Ê†πÊçÆ‰∏çÂêåÊù°‰ª∂ÊãºÊé• SQL ËØ≠Âè•ÊúâÂ§öÁóõËã¶Ôºå‰æãÂ¶ÇÊãºÊé•Êó∂Ë¶ÅÁ°Æ‰øù‰∏çËÉΩÂøòËÆ∞Ê∑ªÂä†ÂøÖË¶ÅÁöÑÁ©∫Ê†ºÔºåËøòË¶ÅÊ≥®ÊÑèÂéªÊéâÂàóË°®ÊúÄÂêé‰∏Ä‰∏™ÂàóÂêçÁöÑÈÄóÂè∑„ÄÇÂà©Áî®Âä®ÊÄÅ SQLÔºåÂèØ‰ª•ÂΩªÂ∫ïÊëÜËÑ±ËøôÁßçÁóõËã¶„ÄÇ</p>
<p>‰ΩøÁî®Âä®ÊÄÅ SQL Âπ∂Èùû‰∏Ä‰ª∂Êòì‰∫ãÔºå‰ΩÜÂÄüÂä©ÂèØÁî®‰∫é‰ªª‰Ωï SQL Êò†Â∞ÑËØ≠Âè•‰∏≠ÁöÑÂº∫Â§ßÁöÑÂä®ÊÄÅ SQL ËØ≠Ë®ÄÔºåMyBatis ÊòæËëóÂú∞ÊèêÂçá‰∫ÜËøô‰∏ÄÁâπÊÄßÁöÑÊòìÁî®ÊÄß„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†‰πãÂâçÁî®Ëøá JSTL Êàñ‰ªª‰ΩïÂü∫‰∫éÁ±ª XML ËØ≠Ë®ÄÁöÑÊñáÊú¨Â§ÑÁêÜÂô®Ôºå‰Ω†ÂØπÂä®ÊÄÅ SQL ÂÖÉÁ¥†ÂèØËÉΩ‰ºöÊÑüËßâ‰ººÊõæÁõ∏ËØÜ„ÄÇÂú® MyBatis ‰πãÂâçÁöÑÁâàÊú¨‰∏≠ÔºåÈúÄË¶ÅËä±Êó∂Èó¥‰∫ÜËß£Â§ßÈáèÁöÑÂÖÉÁ¥†„ÄÇÂÄüÂä©ÂäüËÉΩÂº∫Â§ßÁöÑÂü∫‰∫é OGNL ÁöÑË°®ËææÂºèÔºåMyBatis 3 ÊõøÊç¢‰∫Ü‰πãÂâçÁöÑÂ§ßÈÉ®ÂàÜÂÖÉÁ¥†ÔºåÂ§ßÂ§ßÁ≤æÁÆÄ‰∫ÜÂÖÉÁ¥†ÁßçÁ±ªÔºåÁé∞Âú®Ë¶ÅÂ≠¶‰π†ÁöÑÂÖÉÁ¥†ÁßçÁ±ªÊØîÂéüÊù•ÁöÑ‰∏ÄÂçäËøòË¶ÅÂ∞ë„ÄÇ</p>
<ul>
<li>if</li>
<li>choose (when, otherwise)</li>
<li>trim (where, set)</li>
<li>foreach</li>
</ul>
<h3 id="41if">4.1„ÄÅIf<a class="headerlink" href="#41if" title="Permanent link">&para;</a></h3>
<p>‰ΩøÁî®Âä®ÊÄÅ SQL ÊúÄÂ∏∏ËßÅÊÉÖÊôØÊòØÊ†πÊçÆÊù°‰ª∂ÂåÖÂê´ where Â≠êÂè•ÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇÊØîÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findActiveBlogWithTitleLike&quot;</span>
<span class="w">     </span><span class="na">resultType=</span><span class="s">&quot;Blog&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>BLOG
<span class="w">  </span>WHERE<span class="w"> </span>state<span class="w"> </span>=<span class="w"> </span>‚ÄòACTIVE‚Äô
<span class="w">  </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;title != null&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>AND<span class="w"> </span>title<span class="w"> </span>like<span class="w"> </span>#{title}
<span class="w">  </span><span class="nt">&lt;/if&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p>ËøôÊù°ËØ≠Âè•Êèê‰æõ‰∫ÜÂèØÈÄâÁöÑÊü•ÊâæÊñáÊú¨ÂäüËÉΩ„ÄÇÂ¶ÇÊûú‰∏ç‰º†ÂÖ• ‚Äútitle‚ÄùÔºåÈÇ£‰πàÊâÄÊúâÂ§Ñ‰∫é ‚ÄúACTIVE‚Äù Áä∂ÊÄÅÁöÑ BLOG ÈÉΩ‰ºöËøîÂõûÔºõÂ¶ÇÊûú‰º†ÂÖ•‰∫Ü ‚Äútitle‚Äù ÂèÇÊï∞ÔºåÈÇ£‰πàÂ∞±‰ºöÂØπ ‚Äútitle‚Äù ‰∏ÄÂàóËøõË°åÊ®°Á≥äÊü•ÊâæÂπ∂ËøîÂõûÂØπÂ∫îÁöÑ BLOG ÁªìÊûúÔºàÁªÜÂøÉÁöÑËØªËÄÖÂèØËÉΩ‰ºöÂèëÁé∞Ôºå‚Äútitle‚Äù ÁöÑÂèÇÊï∞ÂÄºÈúÄË¶ÅÂåÖÂê´Êü•ÊâæÊé©Á†ÅÊàñÈÄöÈÖçÁ¨¶Â≠óÁ¨¶Ôºâ„ÄÇ</p>
<p>Â¶ÇÊûúÂ∏åÊúõÈÄöËøá ‚Äútitle‚Äù Âíå ‚Äúauthor‚Äù ‰∏§‰∏™ÂèÇÊï∞ËøõË°åÂèØÈÄâÊêúÁ¥¢ËØ•ÊÄé‰πàÂäûÂë¢ÔºüÈ¶ñÂÖàÔºåÊàëÊÉ≥ÂÖàÂ∞ÜËØ≠Âè•ÂêçÁß∞‰øÆÊîπÊàêÊõ¥ÂêçÂâØÂÖ∂ÂÆûÁöÑÂêçÁß∞ÔºõÊé•‰∏ãÊù•ÔºåÂè™ÈúÄË¶ÅÂä†ÂÖ•Âè¶‰∏Ä‰∏™Êù°‰ª∂Âç≥ÂèØ„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findActiveBlogLike&quot;</span>
<span class="w">     </span><span class="na">resultType=</span><span class="s">&quot;Blog&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>BLOG<span class="w"> </span>WHERE<span class="w"> </span>state<span class="w"> </span>=<span class="w"> </span>‚ÄòACTIVE‚Äô
<span class="w">  </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;title != null&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>AND<span class="w"> </span>title<span class="w"> </span>like<span class="w"> </span>#{title}
<span class="w">  </span><span class="nt">&lt;/if&gt;</span>
<span class="w">  </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;author != null and author.name != null&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>AND<span class="w"> </span>author_name<span class="w"> </span>like<span class="w"> </span>#{author.name}
<span class="w">  </span><span class="nt">&lt;/if&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p><strong>Âà§Êñ≠Á≠â‰∫é‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&#39;type==&quot;y&quot;&#39;</span><span class="nt">&gt;</span><span class="w">  </span>//Ê≥®ÊÑèÊòØÂèåÂºïÂè∑Ôºå‰∏çÊòØÂçïÂºïÂè∑ÔºÅÔºÅÔºÅ
<span class="w">    </span>and<span class="w"> </span>status<span class="w"> </span>=<span class="w"> </span>0<span class="w">   </span>
<span class="nt">&lt;/if&gt;</span><span class="w"> </span>
</code></pre></div>
<p>ÊàñËÄÖ</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;type==&#39;y&#39;.toString()&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>and<span class="w"> </span>status<span class="w"> </span>=<span class="w"> </span>0<span class="w">   </span>
<span class="nt">&lt;/if&gt;</span><span class="w"> </span>
</code></pre></div>
<blockquote>
<p>Âú® xml ÈÖçÁΩÆÊñá‰ª∂‰∏≠Â§ß‰∫éÂ∞è‰∫éÁ¨¶Âè∑ÂèØËÉΩ‰ºöË¢´ËÆ§ÂÆö‰∏∫Ê†áÁ≠æÁöÑ<code>&lt;</code>„ÄÅ<code>&gt;</code>„ÄÇ</p>
</blockquote>
<div class="highlight"><pre><span></span><code>Á¨¨‰∏ÄÁßçÂÜôÊ≥ïÔºà1ÔºâÔºö

ÂéüÁ¨¶Âè∑       &lt;        &lt;=      &gt;       &gt;=       &amp;        &#39;        &quot;
ÊõøÊç¢Á¨¶Âè∑    &amp;lt;     &amp;lt;=   &amp;gt;    &amp;gt;=    &amp;amp;   &amp;apos;  &amp;quot;
‰æãÂ¶ÇÔºösqlÂ¶Ç‰∏ãÔºö
create_date_time &amp;gt;= #{startTime} and  create_date_time &amp;lt;= #{endTime}

Á¨¨‰∫åÁßçÂÜôÊ≥ïÔºà2ÔºâÔºö
Â§ß‰∫éÁ≠â‰∫é
&lt;![CDATA[ &gt;= ]]&gt;
Â∞è‰∫éÁ≠â‰∫é
&lt;![CDATA[ &lt;= ]]&gt;
‰æãÂ¶ÇÔºösqlÂ¶Ç‰∏ãÔºö
create_date_time &lt;![CDATA[ &gt;= ]]&gt; #{startTime} and  create_date_time &lt;![CDATA[ &lt;= ]]&gt; #{endTime}
</code></pre></div>
<h3 id="42choosewhenotherwise">4.2„ÄÅchoose„ÄÅwhen„ÄÅotherwise<a class="headerlink" href="#42choosewhenotherwise" title="Permanent link">&para;</a></h3>
<p>ÊúâÊó∂ÂÄôÔºåÊàë‰ª¨‰∏çÊÉ≥‰ΩøÁî®ÊâÄÊúâÁöÑÊù°‰ª∂ÔºåËÄåÂè™ÊòØÊÉ≥‰ªéÂ§ö‰∏™Êù°‰ª∂‰∏≠ÈÄâÊã©‰∏Ä‰∏™‰ΩøÁî®„ÄÇÈíàÂØπËøôÁßçÊÉÖÂÜµÔºåMyBatis Êèê‰æõ‰∫Ü choose ÂÖÉÁ¥†ÔºåÂÆÉÊúâÁÇπÂÉè Java ‰∏≠ÁöÑ switch ËØ≠Âè•„ÄÇ</p>
<p>ËøòÊòØ‰∏äÈù¢ÁöÑ‰æãÂ≠êÔºå‰ΩÜÊòØÁ≠ñÁï•Âèò‰∏∫Ôºö‰º†ÂÖ•‰∫Ü ‚Äútitle‚Äù Â∞±Êåâ ‚Äútitle‚Äù Êü•ÊâæÔºå‰º†ÂÖ•‰∫Ü ‚Äúauthor‚Äù Â∞±Êåâ ‚Äúauthor‚Äù Êü•ÊâæÁöÑÊÉÖÂΩ¢„ÄÇËã•‰∏§ËÄÖÈÉΩÊ≤°Êúâ‰º†ÂÖ•ÔºåÂ∞±ËøîÂõûÊ†áËÆ∞‰∏∫ featured ÁöÑ BLOGÔºàËøôÂèØËÉΩÊòØÁÆ°ÁêÜÂëòËÆ§‰∏∫Ôºå‰∏éÂÖ∂ËøîÂõûÂ§ßÈáèÁöÑÊó†ÊÑè‰πâÈöèÊú∫ BlogÔºåËøò‰∏çÂ¶ÇËøîÂõû‰∏Ä‰∫õÁî±ÁÆ°ÁêÜÂëòÊåëÈÄâÁöÑ BlogÔºâ„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findActiveBlogLike&quot;</span>
<span class="w">     </span><span class="na">resultType=</span><span class="s">&quot;Blog&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>BLOG<span class="w"> </span>WHERE<span class="w"> </span>state<span class="w"> </span>=<span class="w"> </span>‚ÄòACTIVE‚Äô
<span class="w">  </span><span class="nt">&lt;choose&gt;</span>
<span class="w">    </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;title != null&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span>AND<span class="w"> </span>title<span class="w"> </span>like<span class="w"> </span>#{title}
<span class="w">    </span><span class="nt">&lt;/when&gt;</span>
<span class="w">    </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;author != null and author.name != null&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span>AND<span class="w"> </span>author_name<span class="w"> </span>like<span class="w"> </span>#{author.name}
<span class="w">    </span><span class="nt">&lt;/when&gt;</span>
<span class="w">    </span><span class="nt">&lt;otherwise&gt;</span>
<span class="w">      </span>AND<span class="w"> </span>featured<span class="w"> </span>=<span class="w"> </span>1
<span class="w">    </span><span class="nt">&lt;/otherwise&gt;</span>
<span class="w">  </span><span class="nt">&lt;/choose&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<h3 id="43trimwhereset">4.3„ÄÅtrim„ÄÅwhere„ÄÅset<a class="headerlink" href="#43trimwhereset" title="Permanent link">&para;</a></h3>
<p>ÂâçÈù¢Âá†‰∏™‰æãÂ≠êÂ∑≤ÁªèÂêàÂÆúÂú∞Ëß£ÂÜ≥‰∫Ü‰∏Ä‰∏™Ëá≠ÂêçÊò≠ËëóÁöÑÂä®ÊÄÅ SQL ÈóÆÈ¢ò„ÄÇÁé∞Âú®ÂõûÂà∞‰πãÂâçÁöÑ ‚Äúif‚Äù Á§∫‰æãÔºåËøôÊ¨°Êàë‰ª¨Â∞Ü ‚Äústate = ‚ÄòACTIVE‚Äô‚Äù ËÆæÁΩÆÊàêÂä®ÊÄÅÊù°‰ª∂ÔºåÁúãÁúã‰ºöÂèëÁîü‰ªÄ‰πà„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findActiveBlogLike&quot;</span>
<span class="w">     </span><span class="na">resultType=</span><span class="s">&quot;Blog&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>BLOG
<span class="w">  </span>WHERE
<span class="w">  </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;state != null&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>state<span class="w"> </span>=<span class="w"> </span>#{state}
<span class="w">  </span><span class="nt">&lt;/if&gt;</span>
<span class="w">  </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;title != null&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>AND<span class="w"> </span>title<span class="w"> </span>like<span class="w"> </span>#{title}
<span class="w">  </span><span class="nt">&lt;/if&gt;</span>
<span class="w">  </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;author != null and author.name != null&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>AND<span class="w"> </span>author_name<span class="w"> </span>like<span class="w"> </span>#{author.name}
<span class="w">  </span><span class="nt">&lt;/if&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p>Â¶ÇÊûúÊ≤°ÊúâÂåπÈÖçÁöÑÊù°‰ª∂‰ºöÊÄé‰πàÊ†∑ÔºüÊúÄÁªàËøôÊù° SQL ‰ºöÂèòÊàêËøôÊ†∑Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">BLOG</span>
<span class="k">WHERE</span>
</code></pre></div>
<p>Ëøô‰ºöÂØºËá¥Êü•ËØ¢Â§±Ë¥•„ÄÇÂ¶ÇÊûúÂåπÈÖçÁöÑÂè™ÊòØÁ¨¨‰∫å‰∏™Êù°‰ª∂Âèà‰ºöÊÄéÊ†∑ÔºüËøôÊù° SQL ‰ºöÊòØËøôÊ†∑:</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">BLOG</span>
<span class="k">WHERE</span>
<span class="k">AND</span><span class="w"> </span><span class="n">title</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="n">‚ÄòsomeTitle‚Äô</span>
</code></pre></div>
<p>Ëøô‰∏™Êü•ËØ¢‰πü‰ºöÂ§±Ë¥•„ÄÇËøô‰∏™ÈóÆÈ¢ò‰∏çËÉΩÁÆÄÂçïÂú∞Áî®Êù°‰ª∂ÂÖÉÁ¥†Êù•Ëß£ÂÜ≥„ÄÇËøô‰∏™ÈóÆÈ¢òÊòØÂ¶ÇÊ≠§ÁöÑÈöæ‰ª•Ëß£ÂÜ≥Ôºå‰ª•Ëá≥‰∫éËß£ÂÜ≥ËøáÁöÑ‰∫∫‰∏ç‰ºöÂÜçÊÉ≥Á¢∞Âà∞ËøôÁßçÈóÆÈ¢ò„ÄÇ</p>
<p>MyBatis Êúâ‰∏Ä‰∏™ÁÆÄÂçï‰∏îÈÄÇÂêàÂ§ßÂ§öÊï∞Âú∫ÊôØÁöÑËß£ÂÜ≥ÂäûÊ≥ï„ÄÇËÄåÂú®ÂÖ∂‰ªñÂú∫ÊôØ‰∏≠ÔºåÂèØ‰ª•ÂØπÂÖ∂ËøõË°åËá™ÂÆö‰πâ‰ª•Á¨¶ÂêàÈúÄÊ±Ç„ÄÇËÄåËøôÔºåÂè™ÈúÄË¶Å‰∏ÄÂ§ÑÁÆÄÂçïÁöÑÊîπÂä®Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findActiveBlogLike&quot;</span>
<span class="w">     </span><span class="na">resultType=</span><span class="s">&quot;Blog&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>BLOG
<span class="w">  </span><span class="nt">&lt;where&gt;</span>
<span class="w">    </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;state != null&quot;</span><span class="nt">&gt;</span>
<span class="w">         </span>state<span class="w"> </span>=<span class="w"> </span>#{state}
<span class="w">    </span><span class="nt">&lt;/if&gt;</span>
<span class="w">    </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;title != null&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>AND<span class="w"> </span>title<span class="w"> </span>like<span class="w"> </span>#{title}
<span class="w">    </span><span class="nt">&lt;/if&gt;</span>
<span class="w">    </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;author != null and author.name != null&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>AND<span class="w"> </span>author_name<span class="w"> </span>like<span class="w"> </span>#{author.name}
<span class="w">    </span><span class="nt">&lt;/if&gt;</span>
<span class="w">  </span><span class="nt">&lt;/where&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p><em>where</em> ÂÖÉÁ¥†Âè™‰ºöÂú®Â≠êÂÖÉÁ¥†ËøîÂõû‰ªª‰ΩïÂÜÖÂÆπÁöÑÊÉÖÂÜµ‰∏ãÊâçÊèíÂÖ• ‚ÄúWHERE‚Äù Â≠êÂè•„ÄÇËÄå‰∏îÔºåËã•Â≠êÂè•ÁöÑÂºÄÂ§¥‰∏∫ ‚ÄúAND‚Äù Êàñ ‚ÄúOR‚ÄùÔºå<em>where</em> ÂÖÉÁ¥†‰πü‰ºöÂ∞ÜÂÆÉ‰ª¨ÂéªÈô§„ÄÇ</p>
<p>Â¶ÇÊûú <em>where</em> ÂÖÉÁ¥†‰∏é‰Ω†ÊúüÊúõÁöÑ‰∏çÂ§™‰∏ÄÊ†∑Ôºå‰Ω†‰πüÂèØ‰ª•ÈÄöËøáËá™ÂÆö‰πâ trim ÂÖÉÁ¥†Êù•ÂÆöÂà∂ <em>where</em> ÂÖÉÁ¥†ÁöÑÂäüËÉΩ„ÄÇÊØîÂ¶ÇÔºåÂíå <em>where</em> ÂÖÉÁ¥†Á≠â‰ª∑ÁöÑËá™ÂÆö‰πâ trim ÂÖÉÁ¥†‰∏∫Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;trim</span><span class="w"> </span><span class="na">prefix=</span><span class="s">&quot;WHERE&quot;</span><span class="w"> </span><span class="na">prefixOverrides=</span><span class="s">&quot;AND |OR &quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>...
<span class="nt">&lt;/trim&gt;</span>
</code></pre></div>
<p><em>prefixOverrides</em> Â±ûÊÄß‰ºöÂøΩÁï•ÈÄöËøáÁÆ°ÈÅìÁ¨¶ÂàÜÈöîÁöÑÊñáÊú¨Â∫èÂàóÔºàÊ≥®ÊÑèÊ≠§‰æã‰∏≠ÁöÑÁ©∫Ê†ºÊòØÂøÖË¶ÅÁöÑÔºâ„ÄÇ‰∏äËø∞‰æãÂ≠ê‰ºöÁßªÈô§ÊâÄÊúâ <em>prefixOverrides</em> Â±ûÊÄß‰∏≠ÊåáÂÆöÁöÑÂÜÖÂÆπÔºåÂπ∂‰∏îÊèíÂÖ• <em>prefix</em> Â±ûÊÄß‰∏≠ÊåáÂÆöÁöÑÂÜÖÂÆπ„ÄÇ</p>
<p>Áî®‰∫éÂä®ÊÄÅÊõ¥Êñ∞ËØ≠Âè•ÁöÑÁ±ª‰ººËß£ÂÜ≥ÊñπÊ°àÂè´ÂÅö <em>set</em>„ÄÇ<em>set</em> ÂÖÉÁ¥†ÂèØ‰ª•Áî®‰∫éÂä®ÊÄÅÂåÖÂê´ÈúÄË¶ÅÊõ¥Êñ∞ÁöÑÂàóÔºåÂøΩÁï•ÂÖ∂ÂÆÉ‰∏çÊõ¥Êñ∞ÁöÑÂàó„ÄÇÊØîÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;update</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;updateAuthorIfNecessary&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>update<span class="w"> </span>Author
<span class="w">    </span><span class="nt">&lt;set&gt;</span>
<span class="w">      </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;username != null&quot;</span><span class="nt">&gt;</span>username=#{username},<span class="nt">&lt;/if&gt;</span>
<span class="w">      </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;password != null&quot;</span><span class="nt">&gt;</span>password=#{password},<span class="nt">&lt;/if&gt;</span>
<span class="w">      </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;email != null&quot;</span><span class="nt">&gt;</span>email=#{email},<span class="nt">&lt;/if&gt;</span>
<span class="w">      </span><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;bio != null&quot;</span><span class="nt">&gt;</span>bio=#{bio}<span class="nt">&lt;/if&gt;</span>
<span class="w">    </span><span class="nt">&lt;/set&gt;</span>
<span class="w">  </span>where<span class="w"> </span>id=#{id}
<span class="nt">&lt;/update&gt;</span>
</code></pre></div>
<p>Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå<em>set</em> ÂÖÉÁ¥†‰ºöÂä®ÊÄÅÂú∞Âú®Ë°åÈ¶ñÊèíÂÖ• SET ÂÖ≥ÈîÆÂ≠óÔºåÂπ∂‰ºöÂà†ÊéâÈ¢ùÂ§ñÁöÑÈÄóÂè∑ÔºàËøô‰∫õÈÄóÂè∑ÊòØÂú®‰ΩøÁî®Êù°‰ª∂ËØ≠Âè•ÁªôÂàóËµãÂÄºÊó∂ÂºïÂÖ•ÁöÑÔºâ„ÄÇ</p>
<p>Êù•ÁúãÁúã‰∏é <em>set</em> ÂÖÉÁ¥†Á≠â‰ª∑ÁöÑËá™ÂÆö‰πâ <em>trim</em> ÂÖÉÁ¥†ÂêßÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;trim</span><span class="w"> </span><span class="na">prefix=</span><span class="s">&quot;SET&quot;</span><span class="w"> </span><span class="na">suffixOverrides=</span><span class="s">&quot;,&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>...
<span class="nt">&lt;/trim&gt;</span>
</code></pre></div>
<p>Ê≥®ÊÑèÔºåÊàë‰ª¨Ë¶ÜÁõñ‰∫ÜÂêéÁºÄÂÄºËÆæÁΩÆÔºåÂπ∂‰∏îËá™ÂÆö‰πâ‰∫ÜÂâçÁºÄÂÄº„ÄÇ</p>
<h3 id="44foreach">4.4„ÄÅforeach<a class="headerlink" href="#44foreach" title="Permanent link">&para;</a></h3>
<p>Âä®ÊÄÅ SQL ÁöÑÂè¶‰∏Ä‰∏™Â∏∏ËßÅ‰ΩøÁî®Âú∫ÊôØÊòØÂØπÈõÜÂêàËøõË°åÈÅçÂéÜÔºàÂ∞§ÂÖ∂ÊòØÂú®ÊûÑÂª∫ IN Êù°‰ª∂ËØ≠Âè•ÁöÑÊó∂ÂÄôÔºâ„ÄÇÊØîÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectPostIn&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;domain.blog.Post&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>SELECT<span class="w"> </span>*
<span class="w">  </span>FROM<span class="w"> </span>POST<span class="w"> </span>P
<span class="w">  </span>WHERE<span class="w"> </span>ID<span class="w"> </span>in
<span class="w">  </span><span class="nt">&lt;foreach</span><span class="w"> </span><span class="na">item=</span><span class="s">&quot;item&quot;</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;index&quot;</span><span class="w"> </span><span class="na">collection=</span><span class="s">&quot;list&quot;</span>
<span class="w">      </span><span class="na">open=</span><span class="s">&quot;(&quot;</span><span class="w"> </span><span class="na">separator=</span><span class="s">&quot;,&quot;</span><span class="w"> </span><span class="na">close=</span><span class="s">&quot;)&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>#{item}
<span class="w">  </span><span class="nt">&lt;/foreach&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p><em>foreach</em> ÂÖÉÁ¥†ÁöÑÂäüËÉΩÈùûÂ∏∏Âº∫Â§ßÔºåÂÆÉÂÖÅËÆ∏‰Ω†ÊåáÂÆö‰∏Ä‰∏™ÈõÜÂêàÔºåÂ£∞ÊòéÂèØ‰ª•Âú®ÂÖÉÁ¥†‰ΩìÂÜÖ‰ΩøÁî®ÁöÑÈõÜÂêàÈ°πÔºàitemÔºâÂíåÁ¥¢ÂºïÔºàindexÔºâÂèòÈáè„ÄÇÂÆÉ‰πüÂÖÅËÆ∏‰Ω†ÊåáÂÆöÂºÄÂ§¥‰∏éÁªìÂ∞æÁöÑÂ≠óÁ¨¶‰∏≤‰ª•ÂèäÈõÜÂêàÈ°πËø≠‰ª£‰πãÈó¥ÁöÑÂàÜÈöîÁ¨¶„ÄÇËøô‰∏™ÂÖÉÁ¥†‰πü‰∏ç‰ºöÈîôËØØÂú∞Ê∑ªÂä†Â§ö‰ΩôÁöÑÂàÜÈöîÁ¨¶ÔºåÁúãÂÆÉÂ§öÊô∫ËÉΩÔºÅ</p>
<p><strong>ÊèêÁ§∫</strong> ‰Ω†ÂèØ‰ª•Â∞Ü‰ªª‰ΩïÂèØËø≠‰ª£ÂØπË±°ÔºàÂ¶Ç List„ÄÅSet Á≠âÔºâ„ÄÅMap ÂØπË±°ÊàñËÄÖÊï∞ÁªÑÂØπË±°‰Ωú‰∏∫ÈõÜÂêàÂèÇÊï∞‰º†ÈÄíÁªô <em>foreach</em>„ÄÇÂΩì‰ΩøÁî®ÂèØËø≠‰ª£ÂØπË±°ÊàñËÄÖÊï∞ÁªÑÊó∂Ôºåindex ÊòØÂΩìÂâçËø≠‰ª£ÁöÑÂ∫èÂè∑Ôºåitem ÁöÑÂÄºÊòØÊú¨Ê¨°Ëø≠‰ª£Ëé∑ÂèñÂà∞ÁöÑÂÖÉÁ¥†„ÄÇÂΩì‰ΩøÁî® Map ÂØπË±°ÔºàÊàñËÄÖ Map.Entry ÂØπË±°ÁöÑÈõÜÂêàÔºâÊó∂Ôºåindex ÊòØÈîÆÔºåitem ÊòØÂÄº„ÄÇ</p>
<p><strong>foreachËøòËÉΩÂØπÂ≠óÁ¨¶‰∏≤ËøõË°åËø≠‰ª£</strong></p>
<p>ÊØîÂ¶ÇÂ≠óÁ¨¶‰∏≤ <code>departIds="1,2,3,4,5,6"</code> ÔºåÂú®Áî® foreach Ëø≠‰ª£ÁöÑÊó∂ÂÄôÔºåÂ∞±ÂèØ‰ª•ËøôÊ†∑ÂÜôÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;foreach</span><span class="w"> </span><span class="na">collection=</span><span class="s">&quot;departIds.split(&#39;,&#39;)&quot;</span><span class="w"> </span><span class="na">item=</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="na">open=</span><span class="s">&quot;(&quot;</span><span class="w"> </span><span class="na">separator=</span><span class="s">&quot;,&quot;</span><span class="w"> </span><span class="na">close=</span><span class="s">&quot;)&quot;</span><span class="nt">&gt;</span>
<span class="w">„ÄÄ„ÄÄ</span>#{id}
<span class="nt">&lt;/foreach&gt;</span>
</code></pre></div>
<h3 id="45ognl">4.5„ÄÅOGNL Ë°®ËææÂºè<a class="headerlink" href="#45ognl" title="Permanent link">&para;</a></h3>
<p>MyBatis ÁöÑÂä®ÊÄÅ SQL ÂπøÊ≥õÂ∫îÁî®Âà∞‰∫ÜOGNL Ë°®ËææÂºèÔºåOGNL Ë°®ËææÂºèÂèØ‰ª•ÁÅµÊ¥ªÁöÑÁªÑË£Ö SQL ËØ≠Âè•Ôºå‰ªéËÄåÂÆåÊàêÊõ¥Â§öÁöÑÂäüËÉΩ„ÄÇ</p>
<blockquote>
<p>OGNL ÂÖ®Áß∞ Object-Graph Navigation LanguageÔºåÊòØ Java ‰∏≠ÁöÑ‰∏Ä‰∏™ÂºÄÊ∫êÁöÑË°®ËææÂºèËØ≠Ë®ÄÔºåÁî®‰∫éËÆøÈóÆÂØπË±°Êï∞ÊçÆ„ÄÇ</p>
</blockquote>
<p>OGNL ÊúÄÂ∏∏Áî®‰∫é if Ê†áÁ≠æ‰∏≠ÔºåÁî®‰∫éÂà§Êñ≠Êù°‰ª∂ÊòØÂê¶Êª°Ë∂≥ÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;age != null&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>AND<span class="w"> </span>age<span class="w"> </span>=<span class="w"> </span>#{age}
<span class="nt">&lt;/if&gt;</span>
</code></pre></div>
<p>if Ê†áÁ≠æÁöÑ test Â±ûÊÄßÂ∞±ÊòØ‰∏™ÂÖ∏ÂûãÁöÑ OGNL Ë°®ËææÂºè„ÄÇ<code>age != null</code>Ë°®Á§∫ÂΩì age ‰∏ç‰∏∫ null ÁöÑÊó∂ÂÄô if ÊàêÁ´ãÔºåÂàôÂä®ÊÄÅÁöÑÂêë SQL ‰∏≠ÊèíÂÖ•Ê†áÁ≠æÂÜÖÁöÑ SQL ‰ª£Á†ÅÊÆµ„ÄÇ</p>
<p><strong>Â∏∏ËßÅÁöÑ OGNL Ë°®ËææÂºè</strong></p>
<div class="highlight"><pre><span></span><code>e1 or e2ÔºöÊàñÂÖ≥Á≥ª
e1 and e2Ôºö‰∏éÂÖ≥Á≥ª
e1 == e2 ÊàñËÄÖ e1 eq e2ÔºöÁõ∏Á≠â
e1 != e2 ÊàñËÄÖ e1 neq e2Ôºö‰∏çÁ≠â
e1 lt e2 Ôºõe1 &lt; e2Ôºõe1 gt e2Ôºõe1 &gt; e2Ôºõe1 lte e2Ôºõe1 &lt;= e2Ôºõe1 gte e2Ôºõe1 &gt;= e2ÔºöÊØîËæÉÂÖ≥Á≥ª
e1 + e2Ôºõe1 ‚Äì e2Ôºõe1 * e2Ôºõe1 / e2Ôºõe1 % e2ÔºöËøêÁÆóÂÖ≥Á≥ª
!e ÊàñËÄÖ not eÔºöÈùûÔºåÂèñÂèç
e.method(args)ÔºöË∞ÉÁî®ÂØπË±°ÊñπÊ≥ï
e.propertyÔºöËÆøÈóÆÂ±ûÊÄßÂÄº
e1[e2]ÔºöËÆøÈóÆÊï∞ÁªÑ„ÄÅÈìæË°®Ôºàe2 ‰∏∫Â∫èÂè∑ÔºâÊàñËÄÖ MapÔºàe2 ‰∏∫ÈîÆÂÄºÔºâ
</code></pre></div>
<p>ÂÖ∂‰∏≠ 1ÔΩû4 ‰ª•Âèä 9ÔΩû10 ÈÉΩÊòØÁâπÂà´Â∏∏Áî®ÁöÑÂá†ÁßçÊÉÖÂÜµÔºåËÄåÂÖ∂ÂÆÉÁöÑÊÉÖÂÜµ‰∏çÂà©‰∫é SQL ÁöÑÁª¥Êä§ÔºåÂõ†Ê≠§Âπ∂‰∏çÂ∏∏ËßÅ„ÄÇ</p>
<p><strong>Á§∫‰æãÔºö</strong></p>
<p>Êúâ‰∏Ä‰∏™Âêç‰∏∫ pedro ÁöÑ User ÂØπË±°ÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="n">User</span><span class="w"> </span><span class="n">pedro</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span>
<span class="n">pedro</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="s">&quot;pedro&quot;</span><span class="p">);</span>
<span class="n">pedro</span><span class="p">.</span><span class="na">setTags</span><span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="s">&quot;admin&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;man&quot;</span><span class="p">));</span>
<span class="n">pedro</span><span class="p">.</span><span class="na">setAge</span><span class="p">(</span><span class="mi">23</span><span class="p">);</span>
</code></pre></div>
<p>ËÆøÈóÆÁî®Êà∑ÁöÑ username Â±ûÊÄßÔºåOGNL Ë°®ËææÂºè‰∏∫<code>pedro.username</code>ÔºåÁªìÊûú‰∏∫Ôºö</p>
<div class="highlight"><pre><span></span><code>## pedro.username
pedro
</code></pre></div>
<p>ËÆøÈóÆÁî®Êà∑ÁöÑÁ¨¨‰∏Ä‰∏™Ê†áÁ≠æÔºåOGNL Ë°®ËææÂºè‰∏∫<code>pedro.tags[0]</code>ÔºåÁªìÊûú‰∏∫Ôºö</p>
<div class="highlight"><pre><span></span><code>## pedro.tags[0]
admin
</code></pre></div>
<p>ÊØîËæÉÁî®Êà∑Ê†áÁ≠æÈïøÂ∫¶ÊòØÂê¶Â§ß‰∫é 1ÔºåOGNL Ë°®ËææÂºè‰∏∫<code>pedro.tags[0]</code>ÔºåÁªìÊûú‰∏∫Ôºö</p>
<div class="highlight"><pre><span></span><code>## pedro.tags.size &gt; 1
true
</code></pre></div>
<p>Áî®Êà∑Âπ¥ÈæÑÂä†‰∏ä‰∏Ä‰∏™Êï¥Êï∞ 22ÔºåOGNL Ë°®ËææÂºè‰∏∫<code>pedro.age + 22</code>ÔºåÁªìÊûú‰∏∫Ôºö</p>
<div class="highlight"><pre><span></span><code>## pedro.age + 22
45
</code></pre></div>
<p>Â∞ÜÁî®Êà∑Âπ¥ÈæÑÂÖ®ÈÉ®Â§ßÂÜôÔºåOGNL Ë°®ËææÂºè‰∏∫<code>pedro.username.toUpperCase</code>ÔºåÁªìÊûú‰∏∫Ôºö</p>
<div class="highlight"><pre><span></span><code>## pedro.username.toUpperCase
PEDRO
</code></pre></div>
<h2 id="5java-api">5„ÄÅJava API<a class="headerlink" href="#5java-api" title="Permanent link">&para;</a></h2>
<p>Êó¢ÁÑ∂‰Ω†Â∑≤ÁªèÁü•ÈÅìÂ¶Ç‰ΩïÈÖçÁΩÆ MyBatis ‰ª•ÂèäÂ¶Ç‰ΩïÂàõÂª∫Êò†Â∞ÑÔºåÊòØÊó∂ÂÄôÊù•Â∞ùÁÇπÁîúÂ§¥‰∫Ü„ÄÇMyBatis ÁöÑ Java API Â∞±ÊòØËøô‰∏™ÁîúÂ§¥„ÄÇÁ®çÂêé‰Ω†Â∞ÜÁúãÂà∞ÔºåÂíå JDBC Áõ∏ÊØîÔºåMyBatis Â§ßÂπÖÁÆÄÂåñ‰Ω†ÁöÑ‰ª£Á†ÅÂπ∂ÂäõÂõæ‰øùÊåÅÂÖ∂ÁÆÄÊ¥Å„ÄÅÂÆπÊòìÁêÜËß£ÂíåÁª¥Êä§„ÄÇ‰∏∫‰∫Ü‰ΩøÂæó SQL Êò†Â∞ÑÊõ¥Âä†‰ºòÁßÄÔºåMyBatis 3 ÂºïÂÖ•‰∫ÜËÆ∏Â§öÈáçË¶ÅÁöÑÊîπËøõ„ÄÇ</p>
<p>‰ΩøÁî® MyBatis ÁöÑ‰∏ªË¶Å Java Êé•Âè£Â∞±ÊòØ SqlSession„ÄÇ‰Ω†ÂèØ‰ª•ÈÄöËøáËøô‰∏™Êé•Âè£Êù•ÊâßË°åÂëΩ‰ª§ÔºåËé∑ÂèñÊò†Â∞ÑÂô®Á§∫‰æãÂíåÁÆ°ÁêÜ‰∫ãÂä°„ÄÇÂú®‰ªãÁªç SqlSession Êé•Âè£‰πãÂâçÔºåÊàë‰ª¨ÂÖàÊù•‰∫ÜËß£Â¶Ç‰ΩïËé∑Âèñ‰∏Ä‰∏™ SqlSession ÂÆû‰æã„ÄÇSqlSessions ÊòØÁî± SqlSessionFactory ÂÆû‰æãÂàõÂª∫ÁöÑ„ÄÇSqlSessionFactory ÂØπË±°ÂåÖÂê´ÂàõÂª∫ SqlSession ÂÆû‰æãÁöÑÂêÑÁßçÊñπÊ≥ï„ÄÇËÄå SqlSessionFactory Êú¨Ë∫´ÊòØÁî± SqlSessionFactoryBuilder ÂàõÂª∫ÁöÑÔºåÂÆÉÂèØ‰ª•‰ªé XML„ÄÅÊ≥®Ëß£Êàñ Java ÈÖçÁΩÆ‰ª£Á†ÅÊù•ÂàõÂª∫ SqlSessionFactory„ÄÇ</p>
<p><strong>ÊèêÁ§∫</strong> ÂΩì Mybatis ‰∏é‰∏Ä‰∫õ‰æùËµñÊ≥®ÂÖ•Ê°ÜÊû∂ÔºàÂ¶Ç Spring ÊàñËÄÖ GuiceÔºâÊê≠ÈÖç‰ΩøÁî®Êó∂ÔºåSqlSession Â∞ÜË¢´‰æùËµñÊ≥®ÂÖ•Ê°ÜÊû∂ÂàõÂª∫Âπ∂Ê≥®ÂÖ•ÔºåÊâÄ‰ª•‰Ω†‰∏çÈúÄË¶Å‰ΩøÁî® SqlSessionFactoryBuilder ÊàñËÄÖ SqlSessionFactory„ÄÇ</p>
<h3 id="51sqlsessionfactory">5.1„ÄÅSqlSessionFactory<a class="headerlink" href="#51sqlsessionfactory" title="Permanent link">&para;</a></h3>
<p>SqlSessionFactoryBuilder Êúâ‰∫î‰∏™ build() ÊñπÊ≥ïÔºåÊØè‰∏ÄÁßçÈÉΩÂÖÅËÆ∏‰Ω†‰ªé‰∏çÂêåÁöÑËµÑÊ∫ê‰∏≠ÂàõÂª∫‰∏Ä‰∏™ SqlSessionFactory ÂÆû‰æã„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="n">SqlSessionFactory</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">InputStream</span><span class="w"> </span><span class="n">inputStream</span><span class="p">)</span>
<span class="n">SqlSessionFactory</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">InputStream</span><span class="w"> </span><span class="n">inputStream</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">environment</span><span class="p">)</span>
<span class="n">SqlSessionFactory</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">InputStream</span><span class="w"> </span><span class="n">inputStream</span><span class="p">,</span><span class="w"> </span><span class="n">Properties</span><span class="w"> </span><span class="n">properties</span><span class="p">)</span>
<span class="n">SqlSessionFactory</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">InputStream</span><span class="w"> </span><span class="n">inputStream</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">environment</span><span class="p">,</span><span class="w"> </span><span class="n">Properties</span><span class="w"> </span><span class="n">props</span><span class="p">)</span>
<span class="n">SqlSessionFactory</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">Configuration</span><span class="w"> </span><span class="n">config</span><span class="p">)</span>
</code></pre></div>
<p>Á¨¨‰∏ÄÁßçÊñπÊ≥ïÊòØÊúÄÂ∏∏Áî®ÁöÑÔºåÂÆÉÊé•Âèó‰∏Ä‰∏™ÊåáÂêë XML Êñá‰ª∂Ôºà‰πüÂ∞±ÊòØ‰πãÂâçËÆ®ËÆ∫ÁöÑ mybatis-config.xml Êñá‰ª∂ÔºâÁöÑ InputStream ÂÆû‰æã„ÄÇÂèØÈÄâÁöÑÂèÇÊï∞ÊòØ environment Âíå properties„ÄÇenvironment ÂÜ≥ÂÆöÂä†ËΩΩÂì™ÁßçÁéØÂ¢ÉÔºåÂåÖÊã¨Êï∞ÊçÆÊ∫êÂíå‰∫ãÂä°ÁÆ°ÁêÜÂô®„ÄÇÊØîÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;environments</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;development&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;environment</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;development&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;transactionManager</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;JDBC&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>...
<span class="w">    </span><span class="nt">&lt;dataSource</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;POOLED&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>...
<span class="w">  </span><span class="nt">&lt;/environment&gt;</span>
<span class="w">  </span><span class="nt">&lt;environment</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;production&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;transactionManager</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;MANAGED&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>...
<span class="w">    </span><span class="nt">&lt;dataSource</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;JNDI&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>...
<span class="w">  </span><span class="nt">&lt;/environment&gt;</span>
<span class="nt">&lt;/environments&gt;</span>
</code></pre></div>
<p>Â¶ÇÊûú‰Ω†Ë∞ÉÁî®‰∫ÜÂ∏¶ environment ÂèÇÊï∞ÁöÑ build ÊñπÊ≥ïÔºåÈÇ£‰πà MyBatis Â∞Ü‰ΩøÁî®ËØ•ÁéØÂ¢ÉÂØπÂ∫îÁöÑÈÖçÁΩÆ„ÄÇÂΩìÁÑ∂ÔºåÂ¶ÇÊûú‰Ω†ÊåáÂÆö‰∫Ü‰∏Ä‰∏™Êó†ÊïàÁöÑÁéØÂ¢ÉÔºå‰ºöÊî∂Âà∞ÈîôËØØ„ÄÇÂ¶ÇÊûú‰Ω†Ë∞ÉÁî®‰∫Ü‰∏çÂ∏¶ environment ÂèÇÊï∞ÁöÑ build ÊñπÊ≥ïÔºåÈÇ£‰πàÂ∞±‰ºö‰ΩøÁî®ÈªòËÆ§ÁöÑÁéØÂ¢ÉÈÖçÁΩÆÔºàÂú®‰∏äÈù¢ÁöÑÁ§∫‰æã‰∏≠ÔºåÈÄöËøá default="development" ÊåáÂÆö‰∫ÜÈªòËÆ§ÁéØÂ¢ÉÔºâ„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†Ë∞ÉÁî®‰∫ÜÊé•Âèó properties ÂÆû‰æãÁöÑÊñπÊ≥ïÔºåÈÇ£‰πà MyBatis Â∞±‰ºöÂä†ËΩΩËøô‰∫õÂ±ûÊÄßÔºåÂπ∂Âú®ÈÖçÁΩÆ‰∏≠Êèê‰æõ‰ΩøÁî®„ÄÇÁªùÂ§ßÂ§öÊï∞Âú∫Âêà‰∏ãÔºåÂèØ‰ª•Áî® ${propName} ÂΩ¢ÂºèÂºïÁî®Ëøô‰∫õÈÖçÁΩÆÂÄº„ÄÇ</p>
<p>ÂâçÂõõ‰∏™ÊñπÊ≥ïÂæàÂ§ßÁ®ãÂ∫¶‰∏äÊòØÁõ∏ÂêåÁöÑÔºå‰ΩÜÊèê‰æõ‰∫Ü‰∏çÂêåÁöÑË¶ÜÁõñÈÄâÈ°πÔºåÂÖÅËÆ∏‰Ω†ÂèØÈÄâÂú∞ÊåáÂÆö environment Âíå/Êàñ properties„ÄÇ‰ª•‰∏ãÁªôÂá∫‰∏Ä‰∏™‰ªé mybatis-config.xml Êñá‰ª∂ÂàõÂª∫ SqlSessionFactory ÁöÑÁ§∫‰æãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="n">String</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;org/mybatis/builder/mybatis-config.xml&quot;</span><span class="p">;</span>
<span class="n">InputStream</span><span class="w"> </span><span class="n">inputStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resources</span><span class="p">.</span><span class="na">getResourceAsStream</span><span class="p">(</span><span class="n">resource</span><span class="p">);</span>
<span class="n">SqlSessionFactoryBuilder</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlSessionFactoryBuilder</span><span class="p">();</span>
<span class="n">SqlSessionFactory</span><span class="w"> </span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">builder</span><span class="p">.</span><span class="na">build</span><span class="p">(</span><span class="n">inputStream</span><span class="p">);</span>
</code></pre></div>
<p>Ê≥®ÊÑèÔºåËøôÈáåÊàë‰ª¨‰ΩøÁî®‰∫Ü Resources Â∑•ÂÖ∑Á±ªÔºåËøô‰∏™Á±ªÂú® org.apache.ibatis.io ÂåÖ‰∏≠„ÄÇResources Á±ªÊ≠£Â¶ÇÂÖ∂ÂêçÔºå‰ºöÂ∏ÆÂä©‰Ω†‰ªéÁ±ªË∑ØÂæÑ‰∏ã„ÄÅÊñá‰ª∂Á≥ªÁªüÊàñ‰∏Ä‰∏™ web URL ‰∏≠Âä†ËΩΩËµÑÊ∫êÊñá‰ª∂„ÄÇÂú®Áï•ËØªËØ•Á±ªÁöÑÊ∫ê‰ª£Á†ÅÊàñÁî® IDE Êü•ÁúãËØ•Á±ª‰ø°ÊÅØÂêéÔºå‰Ω†‰ºöÂèëÁé∞‰∏ÄÊï¥Â•óÁõ∏ÂΩìÂÆûÁî®ÁöÑÊñπÊ≥ï„ÄÇËøôÈáåÁªôÂá∫‰∏Ä‰∏™ÁÆÄË°®Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="n">URL</span><span class="w"> </span><span class="nf">getResourceURL</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">resource</span><span class="p">)</span>
<span class="n">URL</span><span class="w"> </span><span class="nf">getResourceURL</span><span class="p">(</span><span class="n">ClassLoader</span><span class="w"> </span><span class="n">loader</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">resource</span><span class="p">)</span>
<span class="n">InputStream</span><span class="w"> </span><span class="nf">getResourceAsStream</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">resource</span><span class="p">)</span>
<span class="n">InputStream</span><span class="w"> </span><span class="nf">getResourceAsStream</span><span class="p">(</span><span class="n">ClassLoader</span><span class="w"> </span><span class="n">loader</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">resource</span><span class="p">)</span>
<span class="n">Properties</span><span class="w"> </span><span class="nf">getResourceAsProperties</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">resource</span><span class="p">)</span>
<span class="n">Properties</span><span class="w"> </span><span class="nf">getResourceAsProperties</span><span class="p">(</span><span class="n">ClassLoader</span><span class="w"> </span><span class="n">loader</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">resource</span><span class="p">)</span>
<span class="n">Reader</span><span class="w"> </span><span class="nf">getResourceAsReader</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">resource</span><span class="p">)</span>
<span class="n">Reader</span><span class="w"> </span><span class="nf">getResourceAsReader</span><span class="p">(</span><span class="n">ClassLoader</span><span class="w"> </span><span class="n">loader</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">resource</span><span class="p">)</span>
<span class="n">File</span><span class="w"> </span><span class="nf">getResourceAsFile</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">resource</span><span class="p">)</span>
<span class="n">File</span><span class="w"> </span><span class="nf">getResourceAsFile</span><span class="p">(</span><span class="n">ClassLoader</span><span class="w"> </span><span class="n">loader</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">resource</span><span class="p">)</span>
<span class="n">InputStream</span><span class="w"> </span><span class="nf">getUrlAsStream</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">urlString</span><span class="p">)</span>
<span class="n">Reader</span><span class="w"> </span><span class="nf">getUrlAsReader</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">urlString</span><span class="p">)</span>
<span class="n">Properties</span><span class="w"> </span><span class="nf">getUrlAsProperties</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">urlString</span><span class="p">)</span>
<span class="n">Class</span><span class="w"> </span><span class="nf">classForName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">className</span><span class="p">)</span>
</code></pre></div>
<p>ÊúÄÂêé‰∏Ä‰∏™ build ÊñπÊ≥ïÊé•Âèó‰∏Ä‰∏™ Configuration ÂÆû‰æã„ÄÇConfiguration Á±ªÂåÖÂê´‰∫ÜÂØπ‰∏Ä‰∏™ SqlSessionFactory ÂÆû‰æã‰Ω†ÂèØËÉΩÂÖ≥ÂøÉÁöÑÊâÄÊúâÂÜÖÂÆπ„ÄÇÂú®Ê£ÄÊü•ÈÖçÁΩÆÊó∂ÔºåConfiguration Á±ªÂæàÊúâÁî®ÔºåÂÆÉÂÖÅËÆ∏‰Ω†Êü•ÊâæÂíåÊìçÁ∫µ SQL Êò†Â∞ÑÔºà‰ΩÜÂΩìÂ∫îÁî®ÂºÄÂßãÊé•Êî∂ËØ∑Ê±ÇÊó∂‰∏çÊé®Ëçê‰ΩøÁî®Ôºâ„ÄÇ‰Ω†‰πãÂâçÂ≠¶‰π†ËøáÁöÑÊâÄÊúâÈÖçÁΩÆÂºÄÂÖ≥ÈÉΩÂ≠òÂú®‰∫é Configuration Á±ªÔºåÂè™‰∏çËøáÂÆÉ‰ª¨ÊòØ‰ª• Java API ÂΩ¢ÂºèÊö¥Èú≤ÁöÑ„ÄÇ‰ª•‰∏ãÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÁ§∫‰æãÔºåÊºîÁ§∫Â¶Ç‰ΩïÊâãÂä®ÈÖçÁΩÆ Configuration ÂÆû‰æãÔºåÁÑ∂ÂêéÂ∞ÜÂÆÉ‰º†ÈÄíÁªô build() ÊñπÊ≥ïÊù•ÂàõÂª∫ SqlSessionFactory„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="n">DataSource</span><span class="w"> </span><span class="n">dataSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BaseDataTest</span><span class="p">.</span><span class="na">createBlogDataSource</span><span class="p">();</span>
<span class="n">TransactionFactory</span><span class="w"> </span><span class="n">transactionFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JdbcTransactionFactory</span><span class="p">();</span>

<span class="n">Environment</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Environment</span><span class="p">(</span><span class="s">&quot;development&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">transactionFactory</span><span class="p">,</span><span class="w"> </span><span class="n">dataSource</span><span class="p">);</span>

<span class="n">Configuration</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Configuration</span><span class="p">(</span><span class="n">environment</span><span class="p">);</span>
<span class="n">configuration</span><span class="p">.</span><span class="na">setLazyLoadingEnabled</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="n">configuration</span><span class="p">.</span><span class="na">setEnhancementEnabled</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="n">configuration</span><span class="p">.</span><span class="na">getTypeAliasRegistry</span><span class="p">().</span><span class="na">registerAlias</span><span class="p">(</span><span class="n">Blog</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="n">configuration</span><span class="p">.</span><span class="na">getTypeAliasRegistry</span><span class="p">().</span><span class="na">registerAlias</span><span class="p">(</span><span class="n">Post</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="n">configuration</span><span class="p">.</span><span class="na">getTypeAliasRegistry</span><span class="p">().</span><span class="na">registerAlias</span><span class="p">(</span><span class="n">Author</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="n">configuration</span><span class="p">.</span><span class="na">addMapper</span><span class="p">(</span><span class="n">BoundBlogMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="n">configuration</span><span class="p">.</span><span class="na">addMapper</span><span class="p">(</span><span class="n">BoundAuthorMapper</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="n">SqlSessionFactoryBuilder</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlSessionFactoryBuilder</span><span class="p">();</span>
<span class="n">SqlSessionFactory</span><span class="w"> </span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">builder</span><span class="p">.</span><span class="na">build</span><span class="p">(</span><span class="n">configuration</span><span class="p">);</span>
</code></pre></div>
<p>Áé∞Âú®‰Ω†Â∞±Ëé∑Âæó‰∏Ä‰∏™ÂèØ‰ª•Áî®Êù•ÂàõÂª∫ SqlSession ÂÆû‰æãÁöÑ SqlSessionFactory ‰∫Ü„ÄÇ</p>
<h3 id="52sqlsession">5.2„ÄÅSqlSession<a class="headerlink" href="#52sqlsession" title="Permanent link">&para;</a></h3>
<p>SqlSessionFactory ÊúâÂÖ≠‰∏™ÊñπÊ≥ïÂàõÂª∫ SqlSession ÂÆû‰æã„ÄÇÈÄöÂ∏∏Êù•ËØ¥ÔºåÂΩì‰Ω†ÈÄâÊã©ÂÖ∂‰∏≠‰∏Ä‰∏™ÊñπÊ≥ïÊó∂Ôºå‰Ω†ÈúÄË¶ÅËÄÉËôë‰ª•‰∏ãÂá†ÁÇπÔºö</p>
<ul>
<li><strong>‰∫ãÂä°Â§ÑÁêÜ</strong>Ôºö‰Ω†Â∏åÊúõÂú® session ‰ΩúÁî®Âüü‰∏≠‰ΩøÁî®‰∫ãÂä°‰ΩúÁî®ÂüüÔºåËøòÊòØ‰ΩøÁî®Ëá™Âä®Êèê‰∫§Ôºàauto-commitÔºâÔºüÔºàÂØπÂæàÂ§öÊï∞ÊçÆÂ∫ìÂíå/Êàñ JDBC È©±Âä®Êù•ËØ¥ÔºåÁ≠âÂêå‰∫éÂÖ≥Èó≠‰∫ãÂä°ÊîØÊåÅÔºâ</li>
<li><strong>Êï∞ÊçÆÂ∫ìËøûÊé•</strong>Ôºö‰Ω†Â∏åÊúõ MyBatis Â∏Æ‰Ω†‰ªéÂ∑≤ÈÖçÁΩÆÁöÑÊï∞ÊçÆÊ∫êËé∑ÂèñËøûÊé•ÔºåËøòÊòØ‰ΩøÁî®Ëá™Â∑±Êèê‰æõÁöÑËøûÊé•Ôºü</li>
<li><strong>ËØ≠Âè•ÊâßË°å</strong>Ôºö‰Ω†Â∏åÊúõ MyBatis Â§çÁî® PreparedStatement Âíå/ÊàñÊâπÈáèÊõ¥Êñ∞ËØ≠Âè•ÔºàÂåÖÊã¨ÊèíÂÖ•ËØ≠Âè•ÂíåÂà†Èô§ËØ≠Âè•ÔºâÂêóÔºü</li>
</ul>
<p>Âü∫‰∫é‰ª•‰∏äÈúÄÊ±ÇÔºåÊúâ‰∏ãÂàóÂ∑≤ÈáçËΩΩÁöÑÂ§ö‰∏™ openSession() ÊñπÊ≥ï‰æõ‰ΩøÁî®„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="n">SqlSession</span><span class="w"> </span><span class="nf">openSession</span><span class="p">()</span>
<span class="n">SqlSession</span><span class="w"> </span><span class="nf">openSession</span><span class="p">(</span><span class="kt">boolean</span><span class="w"> </span><span class="n">autoCommit</span><span class="p">)</span>
<span class="n">SqlSession</span><span class="w"> </span><span class="nf">openSession</span><span class="p">(</span><span class="n">Connection</span><span class="w"> </span><span class="n">connection</span><span class="p">)</span>
<span class="n">SqlSession</span><span class="w"> </span><span class="nf">openSession</span><span class="p">(</span><span class="n">TransactionIsolationLevel</span><span class="w"> </span><span class="n">level</span><span class="p">)</span>
<span class="n">SqlSession</span><span class="w"> </span><span class="nf">openSession</span><span class="p">(</span><span class="n">ExecutorType</span><span class="w"> </span><span class="n">execType</span><span class="p">,</span><span class="w"> </span><span class="n">TransactionIsolationLevel</span><span class="w"> </span><span class="n">level</span><span class="p">)</span>
<span class="n">SqlSession</span><span class="w"> </span><span class="nf">openSession</span><span class="p">(</span><span class="n">ExecutorType</span><span class="w"> </span><span class="n">execType</span><span class="p">)</span>
<span class="n">SqlSession</span><span class="w"> </span><span class="nf">openSession</span><span class="p">(</span><span class="n">ExecutorType</span><span class="w"> </span><span class="n">execType</span><span class="p">,</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">autoCommit</span><span class="p">)</span>
<span class="n">SqlSession</span><span class="w"> </span><span class="nf">openSession</span><span class="p">(</span><span class="n">ExecutorType</span><span class="w"> </span><span class="n">execType</span><span class="p">,</span><span class="w"> </span><span class="n">Connection</span><span class="w"> </span><span class="n">connection</span><span class="p">)</span>
<span class="n">Configuration</span><span class="w"> </span><span class="nf">getConfiguration</span><span class="p">();</span>
</code></pre></div>
<p>ÈªòËÆ§ÁöÑ openSession() ÊñπÊ≥ïÊ≤°ÊúâÂèÇÊï∞ÔºåÂÆÉ‰ºöÂàõÂª∫ÂÖ∑Â§áÂ¶Ç‰∏ãÁâπÊÄßÁöÑ SqlSessionÔºö</p>
<ul>
<li>‰∫ãÂä°‰ΩúÁî®ÂüüÂ∞Ü‰ºöÂºÄÂêØÔºà‰πüÂ∞±ÊòØ‰∏çËá™Âä®Êèê‰∫§Ôºâ„ÄÇ</li>
<li>Â∞ÜÁî±ÂΩìÂâçÁéØÂ¢ÉÈÖçÁΩÆÁöÑ DataSource ÂÆû‰æã‰∏≠Ëé∑Âèñ Connection ÂØπË±°„ÄÇ</li>
<li>‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´Â∞Ü‰ºö‰ΩøÁî®È©±Âä®ÊàñÊï∞ÊçÆÊ∫êÁöÑÈªòËÆ§ËÆæÁΩÆ„ÄÇ</li>
<li>È¢ÑÂ§ÑÁêÜËØ≠Âè•‰∏ç‰ºöË¢´Â§çÁî®Ôºå‰πü‰∏ç‰ºöÊâπÈáèÂ§ÑÁêÜÊõ¥Êñ∞„ÄÇ</li>
</ul>
<p>Áõ∏‰ø°‰Ω†Â∑≤ÁªèËÉΩ‰ªéÊñπÊ≥ïÁ≠æÂêç‰∏≠Áü•ÈÅìËøô‰∫õÊñπÊ≥ïÁöÑÂå∫Âà´„ÄÇÂêë <code>autoCommit</code> ÂèØÈÄâÂèÇÊï∞‰º†ÈÄí <code>true</code> ÂÄºÂç≥ÂèØÂºÄÂêØËá™Âä®Êèê‰∫§ÂäüËÉΩ„ÄÇËã•Ë¶Å‰ΩøÁî®Ëá™Â∑±ÁöÑ <code>Connection</code> ÂÆû‰æãÔºå‰º†ÈÄí‰∏Ä‰∏™ <code>Connection</code> ÂÆû‰æãÁªô <code>connection</code> ÂèÇÊï∞Âç≥ÂèØ„ÄÇÊ≥®ÊÑèÔºåÊàë‰ª¨Ê≤°ÊúâÊèê‰æõÂêåÊó∂ËÆæÁΩÆ <code>Connection</code> Âíå <code>autoCommit</code> ÁöÑÊñπÊ≥ïÔºåËøôÊòØÂõ†‰∏∫ MyBatis ‰ºö‰æùÊçÆ‰º†ÂÖ•ÁöÑ Connection Êù•ÂÜ≥ÂÆöÊòØÂê¶ÂêØÁî® autoCommit„ÄÇÂØπ‰∫é‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ÔºåMyBatis ‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ Java Êûö‰∏æÂåÖË£ÖÂô®Êù•Ë°®Á§∫ÔºåÁß∞‰∏∫ <code>TransactionIsolationLevel</code>Ôºå‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ÊîØÊåÅ JDBC ÁöÑ‰∫î‰∏™ÈöîÁ¶ªÁ∫ßÂà´Ôºà<code>NONE</code>„ÄÅ<code>READ_UNCOMMITTED</code>„ÄÅ<code>READ_COMMITTED</code>„ÄÅ<code>REPEATABLE_READ</code> Âíå <code>SERIALIZABLE</code>ÔºâÔºåÂπ∂‰∏î‰∏éÈ¢ÑÊúüÁöÑË°å‰∏∫‰∏ÄËá¥„ÄÇ</p>
<p>‰Ω†ÂèØËÉΩÂØπ <code>ExecutorType</code> ÂèÇÊï∞ÊÑüÂà∞ÈôåÁîü„ÄÇËøô‰∏™Êûö‰∏æÁ±ªÂûãÂÆö‰πâ‰∫Ü‰∏â‰∏™ÂÄº:</p>
<ul>
<li><code>ExecutorType.SIMPLE</code>ÔºöËØ•Á±ªÂûãÁöÑÊâßË°åÂô®Ê≤°ÊúâÁâπÂà´ÁöÑË°å‰∏∫„ÄÇÂÆÉ‰∏∫ÊØè‰∏™ËØ≠Âè•ÁöÑÊâßË°åÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÈ¢ÑÂ§ÑÁêÜËØ≠Âè•„ÄÇ</li>
<li><code>ExecutorType.REUSE</code>ÔºöËØ•Á±ªÂûãÁöÑÊâßË°åÂô®‰ºöÂ§çÁî®È¢ÑÂ§ÑÁêÜËØ≠Âè•„ÄÇ</li>
<li><code>ExecutorType.BATCH</code>ÔºöËØ•Á±ªÂûãÁöÑÊâßË°åÂô®‰ºöÊâπÈáèÊâßË°åÊâÄÊúâÊõ¥Êñ∞ËØ≠Âè•ÔºåÂ¶ÇÊûú SELECT Âú®Â§ö‰∏™Êõ¥Êñ∞‰∏≠Èó¥ÊâßË°åÔºåÂ∞ÜÂú®ÂøÖË¶ÅÊó∂Â∞ÜÂ§öÊù°Êõ¥Êñ∞ËØ≠Âè•ÂàÜÈöîÂºÄÊù•Ôºå‰ª•Êñπ‰æøÁêÜËß£„ÄÇ</li>
</ul>
<p><strong>ÊèêÁ§∫</strong> Âú® SqlSessionFactory ‰∏≠ËøòÊúâ‰∏Ä‰∏™ÊñπÊ≥ïÊàë‰ª¨Ê≤°ÊúâÊèêÂèäÔºåÂ∞±ÊòØ getConfiguration()„ÄÇËøô‰∏™ÊñπÊ≥ï‰ºöËøîÂõû‰∏Ä‰∏™ Configuration ÂÆû‰æãÔºå‰Ω†ÂèØ‰ª•Âú®ËøêË°åÊó∂‰ΩøÁî®ÂÆÉÊù•Ê£ÄÊü• MyBatis ÁöÑÈÖçÁΩÆ„ÄÇ</p>
<p>SqlSession Á±ªÁöÑÊñπÊ≥ïË∂ÖËøá‰∫Ü 20 ‰∏™Ôºå‰∏∫‰∫ÜÊñπ‰æøÁêÜËß£ÔºåÊàë‰ª¨Â∞ÜÂÆÉ‰ª¨ÂàÜÊàêÂá†ÁßçÁªÑÂà´„ÄÇ</p>
<h3 id="53">5.3„ÄÅËØ≠Âè•ÊâßË°åÊñπÊ≥ï<a class="headerlink" href="#53" title="Permanent link">&para;</a></h3>
<p>Ëøô‰∫õÊñπÊ≥ïË¢´Áî®Êù•ÊâßË°åÂÆö‰πâÂú® SQL Êò†Â∞Ñ XML Êñá‰ª∂‰∏≠ÁöÑ SELECT„ÄÅINSERT„ÄÅUPDATE Âíå DELETE ËØ≠Âè•„ÄÇ‰Ω†ÂèØ‰ª•ÈÄöËøáÂêçÂ≠óÂø´ÈÄü‰∫ÜËß£ÂÆÉ‰ª¨ÁöÑ‰ΩúÁî®ÔºåÊØè‰∏ÄÊñπÊ≥ïÈÉΩÊé•ÂèóËØ≠Âè•ÁöÑ ID ‰ª•ÂèäÂèÇÊï∞ÂØπË±°ÔºåÂèÇÊï∞ÂèØ‰ª•ÊòØÂéüÂßãÁ±ªÂûãÔºàÊîØÊåÅËá™Âä®Ë£ÖÁÆ±ÊàñÂåÖË£ÖÁ±ªÔºâ„ÄÅJavaBean„ÄÅPOJO Êàñ Map„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="nf">selectOne</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">statement</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">parameter</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">selectList</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">statement</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">parameter</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Cursor</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">selectCursor</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">statement</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">parameter</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">selectMap</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">statement</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">parameter</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">mapKey</span><span class="p">)</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">insert</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">statement</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">parameter</span><span class="p">)</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">statement</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">parameter</span><span class="p">)</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">delete</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">statement</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">parameter</span><span class="p">)</span>
</code></pre></div>
<p>selectOne Âíå selectList ÁöÑ‰∏çÂêå‰ªÖ‰ªÖÊòØ selectOne ÂøÖÈ°ªËøîÂõû‰∏Ä‰∏™ÂØπË±°Êàñ null ÂÄº„ÄÇÂ¶ÇÊûúËøîÂõûÂÄºÂ§ö‰∫é‰∏Ä‰∏™ÔºåÂ∞±‰ºöÊäõÂá∫ÂºÇÂ∏∏„ÄÇÂ¶ÇÊûú‰Ω†‰∏çÁü•ÈÅìËøîÂõûÂØπË±°‰ºöÊúâÂ§öÂ∞ëÔºåËØ∑‰ΩøÁî® selectList„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÊü•ÁúãÊüê‰∏™ÂØπË±°ÊòØÂê¶Â≠òÂú®ÔºåÊúÄÂ•ΩÁöÑÂäûÊ≥ïÊòØÊü•ËØ¢‰∏Ä‰∏™ count ÂÄºÔºà0 Êàñ 1Ôºâ„ÄÇselectMap Á®çÂæÆÁâπÊÆä‰∏ÄÁÇπÔºåÂÆÉ‰ºöÂ∞ÜËøîÂõûÂØπË±°ÁöÑÂÖ∂‰∏≠‰∏Ä‰∏™Â±ûÊÄß‰Ωú‰∏∫ key ÂÄºÔºåÂ∞ÜÂØπË±°‰Ωú‰∏∫ value ÂÄºÔºå‰ªéËÄåÂ∞ÜÂ§ö‰∏™ÁªìÊûúÈõÜËΩ¨‰∏∫ Map Á±ªÂûãÂÄº„ÄÇÁî±‰∫éÂπ∂‰∏çÊòØÊâÄÊúâËØ≠Âè•ÈÉΩÈúÄË¶ÅÂèÇÊï∞ÔºåÊâÄ‰ª•Ëøô‰∫õÊñπÊ≥ïÈÉΩÂÖ∑Êúâ‰∏Ä‰∏™‰∏çÈúÄË¶ÅÂèÇÊï∞ÁöÑÈáçËΩΩÂΩ¢Âºè„ÄÇ</p>
<p>Ê∏∏Ê†áÔºàCursorÔºâ‰∏éÂàóË°®ÔºàListÔºâËøîÂõûÁöÑÁªìÊûúÁõ∏ÂêåÔºå‰∏çÂêåÁöÑÊòØÔºåÊ∏∏Ê†áÂÄüÂä©Ëø≠‰ª£Âô®ÂÆûÁé∞‰∫ÜÊï∞ÊçÆÁöÑÊÉ∞ÊÄßÂä†ËΩΩ„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">Cursor</span><span class="o">&lt;</span><span class="n">MyEntity</span><span class="o">&gt;</span><span class="w"> </span><span class="n">entities</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">session</span><span class="p">.</span><span class="na">selectCursor</span><span class="p">(</span><span class="n">statement</span><span class="p">,</span><span class="w"> </span><span class="n">param</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">MyEntity</span><span class="w"> </span><span class="n">entity</span><span class="p">:</span><span class="n">entities</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Â§ÑÁêÜÂçï‰∏™ÂÆû‰Ωì</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>insert„ÄÅupdate ‰ª•Âèä delete ÊñπÊ≥ïËøîÂõûÁöÑÂÄºË°®Á§∫ÂèóËØ•ËØ≠Âè•ÂΩ±ÂìçÁöÑË°åÊï∞„ÄÇ</p>
<p>ÊúÄÂêéÔºåËøòÊúâ select ÊñπÊ≥ïÁöÑ‰∏â‰∏™È´òÁ∫ßÁâàÊú¨ÔºåÂÆÉ‰ª¨ÂÖÅËÆ∏‰Ω†ÈôêÂà∂ËøîÂõûË°åÊï∞ÁöÑËåÉÂõ¥ÔºåÊàñÊòØÊèê‰æõËá™ÂÆö‰πâÁªìÊûúÂ§ÑÁêÜÈÄªËæëÔºåÈÄöÂ∏∏Âú®Êï∞ÊçÆÈõÜÈùûÂ∏∏Â∫ûÂ§ßÁöÑÊÉÖÂΩ¢‰∏ã‰ΩøÁî®„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">selectList</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">statement</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">parameter</span><span class="p">,</span><span class="w"> </span><span class="n">RowBounds</span><span class="w"> </span><span class="n">rowBounds</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Cursor</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">selectCursor</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">statement</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">parameter</span><span class="p">,</span><span class="w"> </span><span class="n">RowBounds</span><span class="w"> </span><span class="n">rowBounds</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span><span class="n">V</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">selectMap</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">statement</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">parameter</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">mapKey</span><span class="p">,</span><span class="w"> </span><span class="n">RowBounds</span><span class="w"> </span><span class="n">rowbounds</span><span class="p">)</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">select</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">statement</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">parameter</span><span class="p">,</span><span class="w"> </span><span class="n">ResultHandler</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">handler</span><span class="p">)</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">select</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">statement</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">parameter</span><span class="p">,</span><span class="w"> </span><span class="n">RowBounds</span><span class="w"> </span><span class="n">rowBounds</span><span class="p">,</span><span class="w"> </span><span class="n">ResultHandler</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">handler</span><span class="p">)</span>
</code></pre></div>
<p>RowBounds ÂèÇÊï∞‰ºöÂëäËØâ MyBatis Áï•ËøáÊåáÂÆöÊï∞ÈáèÁöÑËÆ∞ÂΩïÔºåÂπ∂ÈôêÂà∂ËøîÂõûÁªìÊûúÁöÑÊï∞Èáè„ÄÇRowBounds Á±ªÁöÑ offset Âíå limit ÂÄºÂè™ÊúâÂú®ÊûÑÈÄ†ÂáΩÊï∞Êó∂ÊâçËÉΩ‰º†ÂÖ•ÔºåÂÖ∂ÂÆÉÊó∂ÂÄôÊòØ‰∏çËÉΩ‰øÆÊîπÁöÑ„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">25</span><span class="p">;</span>
<span class="n">RowBounds</span><span class="w"> </span><span class="n">rowBounds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RowBounds</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span><span class="w"> </span><span class="n">limit</span><span class="p">);</span>
</code></pre></div>
<p>Êï∞ÊçÆÂ∫ìÈ©±Âä®ÂÜ≥ÂÆö‰∫ÜÁï•ËøáËÆ∞ÂΩïÊó∂ÁöÑÊü•ËØ¢ÊïàÁéá„ÄÇ‰∏∫‰∫ÜËé∑ÂæóÊúÄ‰Ω≥ÁöÑÊÄßËÉΩÔºåÂª∫ËÆÆÂ∞Ü ResultSet Á±ªÂûãËÆæÁΩÆ‰∏∫ SCROLL_SENSITIVE Êàñ SCROLL_INSENSITIVEÔºàÊç¢Âè•ËØùËØ¥Ôºö‰∏çË¶Å‰ΩøÁî® FORWARD_ONLYÔºâ„ÄÇ</p>
<p>ResultHandler ÂèÇÊï∞ÂÖÅËÆ∏Ëá™ÂÆö‰πâÊØèË°åÁªìÊûúÁöÑÂ§ÑÁêÜËøáÁ®ã„ÄÇ‰Ω†ÂèØ‰ª•Â∞ÜÂÆÉÊ∑ªÂä†Âà∞ List ‰∏≠„ÄÅÂàõÂª∫ Map Âíå SetÔºåÁîöËá≥‰∏¢ÂºÉÊØè‰∏™ËøîÂõûÂÄºÔºåÂè™‰øùÁïôËÆ°ÁÆóÂêéÁöÑÁªüËÆ°ÁªìÊûú„ÄÇ‰Ω†ÂèØ‰ª•‰ΩøÁî® ResultHandler ÂÅöÂæàÂ§ö‰∫ãÔºåËøôÂÖ∂ÂÆûÂ∞±ÊòØ MyBatis ÊûÑÂª∫ ÁªìÊûúÂàóË°®ÁöÑÂÜÖÈÉ®ÂÆûÁé∞ÂäûÊ≥ï„ÄÇ</p>
<p>‰ªéÁâàÊú¨ 3.4.6 ÂºÄÂßãÔºå<code>ResultHandler</code> ‰ºöÂú®Â≠òÂÇ®ËøáÁ®ãÁöÑ REFCURSOR ËæìÂá∫ÂèÇÊï∞‰∏≠‰º†ÈÄí‰ΩøÁî®ÁöÑ <code>CALLABLE</code> ËØ≠Âè•„ÄÇ</p>
<p>ÂÆÉÁöÑÊé•Âè£ÂæàÁÆÄÂçïÔºö</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">org.apache.ibatis.session</span><span class="p">;</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">ResultHandler</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">handleResult</span><span class="p">(</span><span class="n">ResultContext</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">context</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>ResultContext ÂèÇÊï∞ÂÖÅËÆ∏‰Ω†ËÆøÈóÆÁªìÊûúÂØπË±°ÂíåÂΩìÂâçÂ∑≤Ë¢´ÂàõÂª∫ÁöÑÂØπË±°Êï∞ÁõÆÔºåÂè¶Â§ñËøòÊèê‰æõ‰∫Ü‰∏Ä‰∏™ËøîÂõûÂÄº‰∏∫ Boolean ÁöÑ stop ÊñπÊ≥ïÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî®Ê≠§ stop ÊñπÊ≥ïÊù•ÂÅúÊ≠¢ MyBatis Âä†ËΩΩÊõ¥Â§öÁöÑÁªìÊûú„ÄÇ</p>
<p>‰ΩøÁî® ResultHandler ÁöÑÊó∂ÂÄôÈúÄË¶ÅÊ≥®ÊÑè‰ª•‰∏ã‰∏§‰∏™ÈôêÂà∂Ôºö</p>
<ul>
<li>‰ΩøÁî®Â∏¶ ResultHandler ÂèÇÊï∞ÁöÑÊñπÊ≥ïÊó∂ÔºåÊî∂Âà∞ÁöÑÊï∞ÊçÆ‰∏ç‰ºöË¢´ÁºìÂ≠ò„ÄÇ</li>
<li>ÂΩì‰ΩøÁî®È´òÁ∫ßÁöÑÁªìÊûúÊò†Â∞ÑÈõÜÔºàresultMapÔºâÊó∂ÔºåMyBatis ÂæàÂèØËÉΩÈúÄË¶ÅÊï∞Ë°åÁªìÊûúÊù•ÊûÑÈÄ†‰∏Ä‰∏™ÂØπË±°„ÄÇÂ¶ÇÊûú‰Ω†‰ΩøÁî®‰∫Ü ResultHandlerÔºå‰Ω†ÂèØËÉΩ‰ºöÊé•Êî∂Âà∞ÂÖ≥ËÅîÔºàassociationÔºâÊàñËÄÖÈõÜÂêàÔºàcollectionÔºâ‰∏≠Â∞öÊú™Ë¢´ÂÆåÊï¥Â°´ÂÖÖÁöÑÂØπË±°„ÄÇ</li>
</ul>
<p><strong>Á´ãÂç≥ÊâπÈáèÊõ¥Êñ∞ÊñπÊ≥ï</strong></p>
<p>ÂΩì‰Ω†Â∞Ü <code>ExecutorType</code> ËÆæÁΩÆ‰∏∫ <code>ExecutorType.BATCH</code> Êó∂ÔºåÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™ÊñπÊ≥ïÊ∏ÖÈô§ÔºàÊâßË°åÔºâÁºìÂ≠òÂú® JDBC È©±Âä®Á±ª‰∏≠ÁöÑÊâπÈáèÊõ¥Êñ∞ËØ≠Âè•„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="n">List</span><span class="o">&lt;</span><span class="n">BatchResult</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">flushStatements</span><span class="p">()</span>
</code></pre></div>
<p><strong>‰∫ãÂä°ÊéßÂà∂ÊñπÊ≥ï</strong></p>
<p>ÊúâÂõõ‰∏™ÊñπÊ≥ïÁî®Êù•ÊéßÂà∂‰∫ãÂä°‰ΩúÁî®Âüü„ÄÇÂΩìÁÑ∂ÔºåÂ¶ÇÊûú‰Ω†Â∑≤ÁªèËÆæÁΩÆ‰∫ÜËá™Âä®Êèê‰∫§Êàñ‰Ω†‰ΩøÁî®‰∫ÜÂ§ñÈÉ®‰∫ãÂä°ÁÆ°ÁêÜÂô®ÔºåËøô‰∫õÊñπÊ≥ïÂ∞±Ê≤°‰ªÄ‰πà‰ΩúÁî®‰∫Ü„ÄÇÁÑ∂ËÄåÔºåÂ¶ÇÊûú‰Ω†Ê≠£Âú®‰ΩøÁî®Áî± Connection ÂÆû‰æãÊéßÂà∂ÁöÑ JDBC ‰∫ãÂä°ÁÆ°ÁêÜÂô®ÔºåÈÇ£‰πàËøôÂõõ‰∏™ÊñπÊ≥ïÂ∞±‰ºöÊ¥æ‰∏äÁî®Âú∫Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">commit</span><span class="p">()</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">commit</span><span class="p">(</span><span class="kt">boolean</span><span class="w"> </span><span class="n">force</span><span class="p">)</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">rollback</span><span class="p">()</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">rollback</span><span class="p">(</span><span class="kt">boolean</span><span class="w"> </span><span class="n">force</span><span class="p">)</span>
</code></pre></div>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ã MyBatis ‰∏ç‰ºöËá™Âä®Êèê‰∫§‰∫ãÂä°ÔºåÈô§ÈùûÂÆÉ‰æ¶ÊµãÂà∞Ë∞ÉÁî®‰∫ÜÊèíÂÖ•„ÄÅÊõ¥Êñ∞ÊàñÂà†Èô§ÊñπÊ≥ïÊîπÂèò‰∫ÜÊï∞ÊçÆÂ∫ì„ÄÇÂ¶ÇÊûú‰Ω†Ê≤°Êúâ‰ΩøÁî®Ëøô‰∫õÊñπÊ≥ïÊèê‰∫§‰øÆÊîπÔºåÈÇ£‰πà‰Ω†ÂèØ‰ª•Âú® commit Âíå rollback ÊñπÊ≥ïÂèÇÊï∞‰∏≠‰º†ÂÖ• true ÂÄºÔºåÊù•‰øùËØÅ‰∫ãÂä°Ë¢´Ê≠£Â∏∏Êèê‰∫§ÔºàÊ≥®ÊÑèÔºåÂú®Ëá™Âä®Êèê‰∫§Ê®°ÂºèÊàñËÄÖ‰ΩøÁî®‰∫ÜÂ§ñÈÉ®‰∫ãÂä°ÁÆ°ÁêÜÂô®ÁöÑÊÉÖÂÜµ‰∏ãÔºåËÆæÁΩÆ force ÂÄºÂØπ session Êó†ÊïàÔºâ„ÄÇÂ§ßÈÉ®ÂàÜÊÉÖÂÜµ‰∏ã‰Ω†Êó†ÈúÄË∞ÉÁî® rollback()ÔºåÂõ†‰∏∫ MyBatis ‰ºöÂú®‰Ω†Ê≤°ÊúâË∞ÉÁî® commit Êó∂Êõø‰Ω†ÂÆåÊàêÂõûÊªöÊìç‰Ωú„ÄÇ‰∏çËøáÔºåÂΩì‰Ω†Ë¶ÅÂú®‰∏Ä‰∏™ÂèØËÉΩÂ§öÊ¨°Êèê‰∫§ÊàñÂõûÊªöÁöÑ session ‰∏≠ËØ¶ÁªÜÊéßÂà∂‰∫ãÂä°ÔºåÂõûÊªöÊìç‰ΩúÂ∞±Ê¥æ‰∏äÁî®Âú∫‰∫Ü„ÄÇ</p>
<p><strong>ÊèêÁ§∫</strong> MyBatis-Spring Âíå MyBatis-Guice Êèê‰æõ‰∫ÜÂ£∞ÊòéÂºè‰∫ãÂä°Â§ÑÁêÜÔºåÊâÄ‰ª•Â¶ÇÊûú‰Ω†Âú®‰ΩøÁî® Mybatis ÁöÑÂêåÊó∂‰ΩøÁî®‰∫Ü Spring ÊàñËÄÖ GuiceÔºåËØ∑ÂèÇËÄÉÂÆÉ‰ª¨ÁöÑÊâãÂÜå‰ª•Ëé∑ÂèñÊõ¥Â§öÁöÑÂÜÖÂÆπ„ÄÇ</p>
<p><strong>Êú¨Âú∞ÁºìÂ≠ò</strong></p>
<p>Mybatis ‰ΩøÁî®Âà∞‰∫Ü‰∏§ÁßçÁºìÂ≠òÔºöÊú¨Âú∞ÁºìÂ≠òÔºàlocal cacheÔºâÂíå‰∫åÁ∫ßÁºìÂ≠òÔºàsecond level cacheÔºâ„ÄÇ</p>
<p>ÊØèÂΩì‰∏Ä‰∏™Êñ∞ session Ë¢´ÂàõÂª∫ÔºåMyBatis Â∞±‰ºöÂàõÂª∫‰∏Ä‰∏™‰∏é‰πãÁõ∏ÂÖ≥ËÅîÁöÑÊú¨Âú∞ÁºìÂ≠ò„ÄÇ‰ªª‰ΩïÂú® session ÊâßË°åËøáÁöÑÊü•ËØ¢ÁªìÊûúÈÉΩ‰ºöË¢´‰øùÂ≠òÂú®Êú¨Âú∞ÁºìÂ≠ò‰∏≠ÔºåÊâÄ‰ª•ÔºåÂΩìÂÜçÊ¨°ÊâßË°åÂèÇÊï∞Áõ∏ÂêåÁöÑÁõ∏ÂêåÊü•ËØ¢Êó∂ÔºåÂ∞±‰∏çÈúÄË¶ÅÂÆûÈôÖÊü•ËØ¢Êï∞ÊçÆÂ∫ì‰∫Ü„ÄÇÊú¨Âú∞ÁºìÂ≠òÂ∞Ü‰ºöÂú®ÂÅöÂá∫‰øÆÊîπ„ÄÅ‰∫ãÂä°Êèê‰∫§ÊàñÂõûÊªöÔºå‰ª•ÂèäÂÖ≥Èó≠ session Êó∂Ê∏ÖÁ©∫„ÄÇ</p>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÊú¨Âú∞ÁºìÂ≠òÊï∞ÊçÆÁöÑÁîüÂëΩÂë®ÊúüÁ≠âÂêå‰∫éÊï¥‰∏™ session ÁöÑÂë®Êúü„ÄÇÁî±‰∫éÁºìÂ≠ò‰ºöË¢´Áî®Êù•Ëß£ÂÜ≥Âæ™ÁéØÂºïÁî®ÈóÆÈ¢òÂíåÂä†Âø´ÈáçÂ§çÂµåÂ•óÊü•ËØ¢ÁöÑÈÄüÂ∫¶ÔºåÊâÄ‰ª•Êó†Ê≥ïÂ∞ÜÂÖ∂ÂÆåÂÖ®Á¶ÅÁî®„ÄÇ‰ΩÜÊòØ‰Ω†ÂèØ‰ª•ÈÄöËøáËÆæÁΩÆ localCacheScope=STATEMENT Êù•Âè™Âú®ËØ≠Âè•ÊâßË°åÊó∂‰ΩøÁî®ÁºìÂ≠ò„ÄÇ</p>
<p>Ê≥®ÊÑèÔºåÂ¶ÇÊûú localCacheScope Ë¢´ËÆæÁΩÆ‰∏∫ SESSIONÔºåÂØπ‰∫éÊüê‰∏™ÂØπË±°ÔºåMyBatis Â∞ÜËøîÂõûÂú®Êú¨Âú∞ÁºìÂ≠ò‰∏≠ÂîØ‰∏ÄÂØπË±°ÁöÑÂºïÁî®„ÄÇÂØπËøîÂõûÁöÑÂØπË±°Ôºà‰æãÂ¶Ç listÔºâÂÅöÂá∫ÁöÑ‰ªª‰Ωï‰øÆÊîπÂ∞Ü‰ºöÂΩ±ÂìçÊú¨Âú∞ÁºìÂ≠òÁöÑÂÜÖÂÆπÔºåËøõËÄåÂ∞Ü‰ºöÂΩ±ÂìçÂà∞Âú®Êú¨Ê¨° session ‰∏≠‰ªéÁºìÂ≠òËøîÂõûÁöÑÂÄº„ÄÇÂõ†Ê≠§Ôºå‰∏çË¶ÅÂØπ MyBatis ÊâÄËøîÂõûÁöÑÂØπË±°‰ΩúÂá∫Êõ¥ÊîπÔºå‰ª•Èò≤ÂêéÊÇ£„ÄÇ</p>
<p>‰Ω†ÂèØ‰ª•ÈöèÊó∂Ë∞ÉÁî®‰ª•‰∏ãÊñπÊ≥ïÊù•Ê∏ÖÁ©∫Êú¨Âú∞ÁºìÂ≠òÔºö</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">clearCache</span><span class="p">()</span>
</code></pre></div>
<p><strong>ÊèêÁ§∫</strong> Âíå SqlSessionFactory ‰∏ÄÊ†∑Ôºå‰Ω†ÂèØ‰ª•Ë∞ÉÁî®ÂΩìÂâç‰ΩøÁî®ÁöÑ SqlSession ÁöÑ getConfiguration ÊñπÊ≥ïÊù•Ëé∑Âæó Configuration ÂÆû‰æã„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="n">Configuration</span><span class="w"> </span><span class="nf">getConfiguration</span><span class="p">()</span>
</code></pre></div>
<h3 id="54">5.4„ÄÅ‰ΩøÁî®Êò†Â∞ÑÂô®<a class="headerlink" href="#54" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="nf">getMapper</span><span class="p">(</span><span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">type</span><span class="p">)</span>
</code></pre></div>
<p>‰∏äËø∞ÁöÑÂêÑ‰∏™ insert„ÄÅupdate„ÄÅdelete Âíå select ÊñπÊ≥ïÈÉΩÂæàÂº∫Â§ßÔºå‰ΩÜ‰πüÊúâ‰∫õÁπÅÁêêÔºåÂÆÉ‰ª¨Âπ∂‰∏çÁ¨¶ÂêàÁ±ªÂûãÂÆâÂÖ®ÔºåÂØπ‰Ω†ÁöÑ IDE ÂíåÂçïÂÖÉÊµãËØï‰πü‰∏çÊòØÈÇ£‰πàÂèãÂ•Ω„ÄÇÂõ†Ê≠§Ôºå‰ΩøÁî®Êò†Â∞ÑÂô®Á±ªÊù•ÊâßË°åÊò†Â∞ÑËØ≠Âè•ÊòØÊõ¥Â∏∏ËßÅÁöÑÂÅöÊ≥ï„ÄÇ</p>
<p>Êàë‰ª¨Â∑≤ÁªèÂú®‰πãÂâçÁöÑÂÖ•Èó®Á´†ËäÇ‰∏≠ËßÅÂà∞Ëøá‰∏Ä‰∏™‰ΩøÁî®Êò†Â∞ÑÂô®ÁöÑÁ§∫‰æã„ÄÇ‰∏Ä‰∏™Êò†Â∞ÑÂô®Á±ªÂ∞±ÊòØ‰∏Ä‰∏™‰ªÖÈúÄÂ£∞Êòé‰∏é SqlSession ÊñπÊ≥ïÁõ∏ÂåπÈÖçÊñπÊ≥ïÁöÑÊé•Âè£„ÄÇ‰∏ãÈù¢ÁöÑÁ§∫‰æãÂ±ïÁ§∫‰∫Ü‰∏Ä‰∫õÊñπÊ≥ïÁ≠æÂêç‰ª•ÂèäÂÆÉ‰ª¨ÊòØÂ¶Ç‰ΩïÊò†Â∞ÑÂà∞ SqlSession ‰∏äÁöÑ„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">AuthorMapper</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// (Author) selectOne(&quot;selectAuthor&quot;,5);</span>
<span class="w">  </span><span class="n">Author</span><span class="w"> </span><span class="nf">selectAuthor</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// (List&lt;Author&gt;) selectList(‚ÄúselectAuthors‚Äù)</span>
<span class="w">  </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Author</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">selectAuthors</span><span class="p">();</span>
<span class="w">  </span><span class="c1">// (Map&lt;Integer,Author&gt;) selectMap(&quot;selectAuthors&quot;, &quot;id&quot;)</span>
<span class="w">  </span><span class="nd">@MapKey</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span><span class="w"> </span><span class="n">Author</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">selectAuthors</span><span class="p">();</span>
<span class="w">  </span><span class="c1">// insert(&quot;insertAuthor&quot;, author)</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="nf">insertAuthor</span><span class="p">(</span><span class="n">Author</span><span class="w"> </span><span class="n">author</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// updateAuthor(&quot;updateAuthor&quot;, author)</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="nf">updateAuthor</span><span class="p">(</span><span class="n">Author</span><span class="w"> </span><span class="n">author</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// delete(&quot;deleteAuthor&quot;,5)</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="nf">deleteAuthor</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>ÊÄª‰πãÔºåÊØè‰∏™Êò†Â∞ÑÂô®ÊñπÊ≥ïÁ≠æÂêçÂ∫îËØ•ÂåπÈÖçÁõ∏ÂÖ≥ËÅîÁöÑ SqlSession ÊñπÊ≥ïÔºåÂ≠óÁ¨¶‰∏≤ÂèÇÊï∞ ID Êó†ÈúÄÂåπÈÖç„ÄÇËÄåÊòØÁî±ÊñπÊ≥ïÂêçÂåπÈÖçÊò†Â∞ÑËØ≠Âè•ÁöÑ ID„ÄÇ</p>
<p>Ê≠§Â§ñÔºåËøîÂõûÁ±ªÂûãÂøÖÈ°ªÂåπÈÖçÊúüÊúõÁöÑÁªìÊûúÁ±ªÂûãÔºåËøîÂõûÂçï‰∏™ÂÄºÊó∂ÔºåËøîÂõûÁ±ªÂûãÂ∫îËØ•ÊòØËøîÂõûÂÄºÁöÑÁ±ªÔºåËøîÂõûÂ§ö‰∏™ÂÄºÊó∂ÔºåÂàô‰∏∫Êï∞ÁªÑÊàñÈõÜÂêàÁ±ªÔºåÂè¶Â§ñ‰πüÂèØ‰ª•ÊòØÊ∏∏Ê†áÔºàCursorÔºâ„ÄÇÊâÄÊúâÂ∏∏Áî®ÁöÑÁ±ªÂûãÈÉΩÊòØÊîØÊåÅÁöÑÔºåÂåÖÊã¨ÔºöÂéüÂßãÁ±ªÂûã„ÄÅMap„ÄÅPOJO Âíå JavaBean„ÄÇ</p>
<p><strong>ÊèêÁ§∫</strong> Êò†Â∞ÑÂô®Êé•Âè£‰∏çÈúÄË¶ÅÂéªÂÆûÁé∞‰ªª‰ΩïÊé•Âè£ÊàñÁªßÊâøËá™‰ªª‰ΩïÁ±ª„ÄÇÂè™Ë¶ÅÊñπÊ≥ïÁ≠æÂêçÂèØ‰ª•Ë¢´Áî®Êù•ÂîØ‰∏ÄËØÜÂà´ÂØπÂ∫îÁöÑÊò†Â∞ÑËØ≠Âè•Â∞±ÂèØ‰ª•‰∫Ü„ÄÇ</p>
<p><strong>ÊèêÁ§∫</strong> Êò†Â∞ÑÂô®Êé•Âè£ÂèØ‰ª•ÁªßÊâøËá™ÂÖ∂‰ªñÊé•Âè£„ÄÇÂú®‰ΩøÁî® XML Êù•ÁªëÂÆöÊò†Â∞ÑÂô®Êé•Âè£Êó∂Ôºå‰øùËØÅËØ≠Âè•Â§Ñ‰∫éÂêàÈÄÇÁöÑÂëΩÂêçÁ©∫Èó¥‰∏≠Âç≥ÂèØ„ÄÇÂîØ‰∏ÄÁöÑÈôêÂà∂ÊòØÔºå‰∏çËÉΩÂú®‰∏§‰∏™ÂÖ∑ÊúâÁªßÊâøÂÖ≥Á≥ªÁöÑÊé•Âè£‰∏≠Êã•ÊúâÁõ∏ÂêåÁöÑÊñπÊ≥ïÁ≠æÂêçÔºàËøôÊòØÊΩúÂú®ÁöÑÂç±Èô©ÂÅöÊ≥ïÔºå‰∏çÂèØÂèñÔºâ„ÄÇ</p>
<p>‰Ω†ÂèØ‰ª•‰º†ÈÄíÂ§ö‰∏™ÂèÇÊï∞Áªô‰∏Ä‰∏™Êò†Â∞ÑÂô®ÊñπÊ≥ï„ÄÇÂú®Â§ö‰∏™ÂèÇÊï∞ÁöÑÊÉÖÂÜµ‰∏ãÔºåÈªòËÆ§ÂÆÉ‰ª¨Â∞Ü‰ºö‰ª• param Âä†‰∏äÂÆÉ‰ª¨Âú®ÂèÇÊï∞ÂàóË°®‰∏≠ÁöÑ‰ΩçÁΩÆÊù•ÂëΩÂêçÔºåÊØîÂ¶ÇÔºö#{param1}„ÄÅ#{param2}Á≠â„ÄÇÂ¶ÇÊûú‰Ω†ÊÉ≥ÔºàÂú®ÊúâÂ§ö‰∏™ÂèÇÊï∞Êó∂ÔºâËá™ÂÆö‰πâÂèÇÊï∞ÁöÑÂêçÁß∞ÔºåÈÇ£‰πà‰Ω†ÂèØ‰ª•Âú®ÂèÇÊï∞‰∏ä‰ΩøÁî® @Param("paramName") Ê≥®Ëß£„ÄÇ</p>
<p>‰Ω†‰πüÂèØ‰ª•ÁªôÊñπÊ≥ï‰º†ÈÄí‰∏Ä‰∏™ RowBounds ÂÆû‰æãÊù•ÈôêÂà∂Êü•ËØ¢ÁªìÊûú„ÄÇ</p>
<p><strong>Êò†Â∞ÑÂô®Ê≥®Ëß£</strong></p>
<p>ËÆæËÆ°ÂàùÊúüÁöÑ MyBatis ÊòØ‰∏Ä‰∏™ XML È©±Âä®ÁöÑÊ°ÜÊû∂„ÄÇÈÖçÁΩÆ‰ø°ÊÅØÊòØÂü∫‰∫é XML ÁöÑÔºåÊò†Â∞ÑËØ≠Âè•‰πüÊòØÂÆö‰πâÂú® XML ‰∏≠ÁöÑ„ÄÇËÄåÂú® MyBatis 3 ‰∏≠ÔºåÊàë‰ª¨Êèê‰æõ‰∫ÜÂÖ∂ÂÆÉÁöÑÈÖçÁΩÆÊñπÂºè„ÄÇMyBatis 3 ÊûÑÂª∫Âú®ÂÖ®Èù¢‰∏îÂº∫Â§ßÁöÑÂü∫‰∫é Java ËØ≠Ë®ÄÁöÑÈÖçÁΩÆ API ‰πã‰∏ä„ÄÇÂÆÉÊòØ XML ÂíåÊ≥®Ëß£ÈÖçÁΩÆÁöÑÂü∫Á°Ä„ÄÇÊ≥®Ëß£Êèê‰æõ‰∫Ü‰∏ÄÁßçÁÆÄÂçï‰∏î‰ΩéÊàêÊú¨ÁöÑÊñπÂºèÊù•ÂÆûÁé∞ÁÆÄÂçïÁöÑÊò†Â∞ÑËØ≠Âè•„ÄÇ</p>
<p><strong>ÊèêÁ§∫</strong> ‰∏çÂπ∏ÁöÑÊòØÔºåJava Ê≥®Ëß£ÁöÑË°®ËææËÉΩÂäõÂíåÁÅµÊ¥ªÊÄßÂçÅÂàÜÊúâÈôê„ÄÇÂ∞ΩÁÆ°Êàë‰ª¨Ëä±‰∫ÜÂæàÂ§öÊó∂Èó¥Âú®Ë∞ÉÊü•„ÄÅËÆæËÆ°ÂíåËØïÈ™å‰∏äÔºå‰ΩÜÊúÄÂº∫Â§ßÁöÑ MyBatis Êò†Â∞ÑÂπ∂‰∏çËÉΩÁî®Ê≥®Ëß£Êù•ÊûÑÂª∫‚Äî‚ÄîÊàë‰ª¨ÁúüÊ≤°ÂºÄÁé©Á¨ë„ÄÇËÄå C# Â±ûÊÄßÂ∞±Ê≤°ÊúâËøô‰∫õÈôêÂà∂ÔºåÂõ†Ê≠§ MyBatis.NET ÁöÑÈÖçÁΩÆ‰ºöÊØî XML ÊúâÊõ¥Â§ßÁöÑÈÄâÊã©‰ΩôÂú∞„ÄÇËôΩËØ¥Â¶ÇÊ≠§ÔºåÂü∫‰∫é Java Ê≥®Ëß£ÁöÑÈÖçÁΩÆËøòÊòØÊúâÂÆÉÁöÑÂ•ΩÂ§ÑÁöÑ„ÄÇ</p>
<p>Ê≥®Ëß£Â¶Ç‰∏ãË°®ÊâÄÁ§∫Ôºö</p>
<p><img src="!assets/Mybatis/image-20200616093839656.png" alt="image-20200616093839656" style="" /></p>
<p><strong>Êò†Â∞ÑÊ≥®Ëß£Á§∫‰æã</strong></p>
<p>Ëøô‰∏™‰æãÂ≠êÂ±ïÁ§∫‰∫ÜÂ¶Ç‰Ωï‰ΩøÁî® @SelectKey Ê≥®Ëß£Êù•Âú®ÊèíÂÖ•ÂâçËØªÂèñÊï∞ÊçÆÂ∫ìÂ∫èÂàóÁöÑÂÄºÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Insert</span><span class="p">(</span><span class="s">&quot;insert into table3 (id, name) values(#{nameId}, #{name})&quot;</span><span class="p">)</span>
<span class="nd">@SelectKey</span><span class="p">(</span><span class="n">statement</span><span class="o">=</span><span class="s">&quot;call next value for TestSequence&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">keyProperty</span><span class="o">=</span><span class="s">&quot;nameId&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">before</span><span class="o">=</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="n">resultType</span><span class="o">=</span><span class="kt">int</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">insertTable3</span><span class="p">(</span><span class="n">Name</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>
</code></pre></div>
<p>Ëøô‰∏™‰æãÂ≠êÂ±ïÁ§∫‰∫ÜÂ¶Ç‰Ωï‰ΩøÁî® @SelectKey Ê≥®Ëß£Êù•Âú®ÊèíÂÖ•ÂêéËØªÂèñÊï∞ÊçÆÂ∫ìËá™Â¢ûÂàóÁöÑÂÄºÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Insert</span><span class="p">(</span><span class="s">&quot;insert into table2 (name) values(#{name})&quot;</span><span class="p">)</span>
<span class="nd">@SelectKey</span><span class="p">(</span><span class="n">statement</span><span class="o">=</span><span class="s">&quot;call identity()&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">keyProperty</span><span class="o">=</span><span class="s">&quot;nameId&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">before</span><span class="o">=</span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="n">resultType</span><span class="o">=</span><span class="kt">int</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">insertTable2</span><span class="p">(</span><span class="n">Name</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>
</code></pre></div>
<p>Ëøô‰∏™‰æãÂ≠êÂ±ïÁ§∫‰∫ÜÂ¶Ç‰Ωï‰ΩøÁî® <code>@Flush</code> Ê≥®Ëß£Êù•Ë∞ÉÁî® <code>SqlSession#flushStatements()</code>Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Flush</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">BatchResult</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">flush</span><span class="p">();</span>
</code></pre></div>
<p>Ëøô‰∫õ‰æãÂ≠êÂ±ïÁ§∫‰∫ÜÂ¶Ç‰ΩïÈÄöËøáÊåáÂÆö @Result ÁöÑ id Â±ûÊÄßÊù•ÂëΩÂêçÁªìÊûúÈõÜÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Results</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;userResult&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nd">@Result</span><span class="p">(</span><span class="n">property</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;id&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">column</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;uid&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">),</span>
<span class="w">  </span><span class="nd">@Result</span><span class="p">(</span><span class="n">property</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;firstName&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">column</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;first_name&quot;</span><span class="p">),</span>
<span class="w">  </span><span class="nd">@Result</span><span class="p">(</span><span class="n">property</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;lastName&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">column</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;last_name&quot;</span><span class="p">)</span>
<span class="p">})</span>
<span class="nd">@Select</span><span class="p">(</span><span class="s">&quot;select * from users where id = #{id}&quot;</span><span class="p">)</span>
<span class="n">User</span><span class="w"> </span><span class="nf">getUserById</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>

<span class="nd">@Results</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;companyResults&quot;</span><span class="p">)</span>
<span class="nd">@ConstructorArgs</span><span class="p">({</span>
<span class="w">  </span><span class="nd">@Arg</span><span class="p">(</span><span class="n">column</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;cid&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">javaType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Integer</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">),</span>
<span class="w">  </span><span class="nd">@Arg</span><span class="p">(</span><span class="n">column</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">javaType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="p">})</span>
<span class="nd">@Select</span><span class="p">(</span><span class="s">&quot;select * from company where id = #{id}&quot;</span><span class="p">)</span>
<span class="n">Company</span><span class="w"> </span><span class="nf">getCompanyById</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>
</code></pre></div>
<p>Ëøô‰∏™‰æãÂ≠êÂ±ïÁ§∫‰∫ÜÂ¶Ç‰Ωï‰ΩøÁî®Âçï‰∏™ÂèÇÊï∞ÁöÑ @SqlProvider Ê≥®Ëß£Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SelectProvider</span><span class="p">(</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UserSqlBuilder</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;buildGetUsersByName&quot;</span><span class="p">)</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getUsersByName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>

<span class="kd">class</span> <span class="nc">UserSqlBuilder</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">buildGetUsersByName</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SQL</span><span class="p">(){{</span>
<span class="w">      </span><span class="n">SELECT</span><span class="p">(</span><span class="s">&quot;*&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="n">FROM</span><span class="p">(</span><span class="s">&quot;users&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">WHERE</span><span class="p">(</span><span class="s">&quot;name like #{value} || &#39;%&#39;&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="n">ORDER_BY</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}}.</span><span class="na">toString</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Ëøô‰∏™‰æãÂ≠êÂ±ïÁ§∫‰∫ÜÂ¶Ç‰Ωï‰ΩøÁî®Â§ö‰∏™ÂèÇÊï∞ÁöÑ @SqlProvider Ê≥®Ëß£Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SelectProvider</span><span class="p">(</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UserSqlBuilder</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;buildGetUsersByName&quot;</span><span class="p">)</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getUsersByName</span><span class="p">(</span>
<span class="w">    </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;orderByColumn&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">orderByColumn</span><span class="p">);</span>

<span class="kd">class</span> <span class="nc">UserSqlBuilder</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="c1">// Â¶ÇÊûú‰∏ç‰ΩøÁî® @ParamÔºåÂ∞±Â∫îËØ•ÂÆö‰πâ‰∏é mapper ÊñπÊ≥ïÁõ∏ÂêåÁöÑÂèÇÊï∞</span>
<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">buildGetUsersByName</span><span class="p">(</span>
<span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">orderByColumn</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SQL</span><span class="p">(){{</span>
<span class="w">      </span><span class="n">SELECT</span><span class="p">(</span><span class="s">&quot;*&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="n">FROM</span><span class="p">(</span><span class="s">&quot;users&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="n">WHERE</span><span class="p">(</span><span class="s">&quot;name like #{name} || &#39;%&#39;&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="n">ORDER_BY</span><span class="p">(</span><span class="n">orderByColumn</span><span class="p">);</span>
<span class="w">    </span><span class="p">}}.</span><span class="na">toString</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// Â¶ÇÊûú‰ΩøÁî® @ParamÔºåÂ∞±ÂèØ‰ª•Âè™ÂÆö‰πâÈúÄË¶Å‰ΩøÁî®ÁöÑÂèÇÊï∞</span>
<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">buildGetUsersByName</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;orderByColumn&quot;</span><span class="p">)</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">orderByColumn</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SQL</span><span class="p">(){{</span>
<span class="w">      </span><span class="n">SELECT</span><span class="p">(</span><span class="s">&quot;*&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="n">FROM</span><span class="p">(</span><span class="s">&quot;users&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="n">WHERE</span><span class="p">(</span><span class="s">&quot;name like #{name} || &#39;%&#39;&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="n">ORDER_BY</span><span class="p">(</span><span class="n">orderByColumn</span><span class="p">);</span>
<span class="w">    </span><span class="p">}}.</span><span class="na">toString</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>‰ª•‰∏ã‰æãÂ≠êÂ±ïÁ§∫‰∫Ü <code>ProviderMethodResolver</code>Ôºà3.5.1 ÂêéÂèØÁî®ÔºâÁöÑÈªòËÆ§ÂÆûÁé∞‰ΩøÁî®ÊñπÊ≥ïÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SelectProvider</span><span class="p">(</span><span class="n">UserSqlProvider</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getUsersByName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>

<span class="c1">// Âú®‰Ω†ÁöÑ provider Á±ª‰∏≠ÂÆûÁé∞ ProviderMethodResolver Êé•Âè£</span>
<span class="kd">class</span> <span class="nc">UserSqlProvider</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ProviderMethodResolver</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// ÈªòËÆ§ÂÆûÁé∞‰∏≠Ôºå‰ºöÂ∞ÜÊò†Â∞ÑÂô®ÊñπÊ≥ïÁöÑË∞ÉÁî®Ëß£ÊûêÂà∞ÂÆûÁé∞ÁöÑÂêåÂêçÊñπÊ≥ï‰∏ä</span>
<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getUsersByName</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SQL</span><span class="p">(){{</span>
<span class="w">      </span><span class="n">SELECT</span><span class="p">(</span><span class="s">&quot;*&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="n">FROM</span><span class="p">(</span><span class="s">&quot;users&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">WHERE</span><span class="p">(</span><span class="s">&quot;name like #{value} || &#39;%&#39;&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="n">ORDER_BY</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}}.</span><span class="na">toString</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="6sql">6„ÄÅSQL ËØ≠Âè•ÊûÑÂª∫Âô®<a class="headerlink" href="#6sql" title="Permanent link">&para;</a></h2>
<p>Java Á®ãÂ∫èÂëòÈù¢ÂØπÁöÑÊúÄÁóõËã¶ÁöÑ‰∫ãÊÉÖ‰πã‰∏ÄÂ∞±ÊòØÂú® Java ‰ª£Á†Å‰∏≠ÂµåÂÖ• SQL ËØ≠Âè•„ÄÇËøôÈÄöÂ∏∏ÊòØÂõ†‰∏∫ÈúÄË¶ÅÂä®ÊÄÅÁîüÊàê SQL ËØ≠Âè•Ôºå‰∏çÁÑ∂Êàë‰ª¨ÂèØ‰ª•Â∞ÜÂÆÉ‰ª¨ÊîæÂà∞Â§ñÈÉ®Êñá‰ª∂ÊàñËÄÖÂ≠òÂÇ®ËøáÁ®ã‰∏≠„ÄÇÂ¶Ç‰Ω†ÊâÄËßÅÔºåMyBatis Âú® XML Êò†Â∞Ñ‰∏≠ÂÖ∑Â§áÂº∫Â§ßÁöÑ SQL Âä®ÊÄÅÁîüÊàêËÉΩÂäõ„ÄÇ‰ΩÜÊúâÊó∂ÔºåÊàë‰ª¨ËøòÊòØÈúÄË¶ÅÂú® Java ‰ª£Á†ÅÈáåÊûÑÂª∫ SQL ËØ≠Âè•„ÄÇÊ≠§Êó∂ÔºåMyBatis ÊúâÂè¶Â§ñ‰∏Ä‰∏™ÁâπÊÄßÂèØ‰ª•Â∏ÆÂà∞‰Ω†ÔºåËÆ©‰Ω†‰ªéÂ§ÑÁêÜÂÖ∏ÂûãÈóÆÈ¢ò‰∏≠Ëß£ÊîæÂá∫Êù•ÔºåÊØîÂ¶ÇÂä†Âè∑„ÄÅÂºïÂè∑„ÄÅÊç¢Ë°å„ÄÅÊ†ºÂºèÂåñÈóÆÈ¢ò„ÄÅÂµåÂÖ•Êù°‰ª∂ÁöÑÈÄóÂè∑ÁÆ°ÁêÜÂèä AND ËøûÊé•„ÄÇÁ°ÆÂÆûÔºåÂú® Java ‰ª£Á†Å‰∏≠Âä®ÊÄÅÁîüÊàê SQL ‰ª£Á†ÅÁúüÁöÑÂ∞±ÊòØ‰∏ÄÂú∫Âô©Ê¢¶„ÄÇ‰æãÂ¶ÇÔºö</p>
<div class="highlight"><pre><span></span><code><span class="n">String</span><span class="w"> </span><span class="n">sql</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SELECT P.ID, P.USERNAME, P.PASSWORD, P.FULL_NAME, &quot;</span>
<span class="s">&quot;P.LAST_NAME,P.CREATED_ON, P.UPDATED_ON &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="s">&quot;FROM PERSON P, ACCOUNT A &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="s">&quot;INNER JOIN DEPARTMENT D on D.ID = P.DEPARTMENT_ID &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="s">&quot;INNER JOIN COMPANY C on D.COMPANY_ID = C.ID &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="s">&quot;WHERE (P.ID = A.ID AND P.FIRST_NAME like ?) &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="s">&quot;OR (P.LAST_NAME like ?) &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="s">&quot;GROUP BY P.ID &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="s">&quot;HAVING (P.LAST_NAME like ?) &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="s">&quot;OR (P.FIRST_NAME like ?) &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="s">&quot;ORDER BY P.ID, P.FULL_NAME&quot;</span><span class="p">;</span>
</code></pre></div>
<p><strong>Ëß£ÂÜ≥ÊñπÊ°à</strong></p>
<p>MyBatis 3 Êèê‰æõ‰∫ÜÊñπ‰æøÁöÑÂ∑•ÂÖ∑Á±ªÊù•Â∏ÆÂä©Ëß£ÂÜ≥Ê≠§ÈóÆÈ¢ò„ÄÇÂÄüÂä© SQL Á±ªÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÁÆÄÂçïÂú∞ÂàõÂª∫‰∏Ä‰∏™ÂÆû‰æãÔºåÂπ∂Ë∞ÉÁî®ÂÆÉÁöÑÊñπÊ≥ïÂç≥ÂèØÁîüÊàê SQL ËØ≠Âè•„ÄÇËÆ©Êàë‰ª¨Êù•Áî® SQL Á±ªÈáçÂÜô‰∏äÈù¢ÁöÑ‰æãÂ≠êÔºö</p>
<div class="highlight"><pre><span></span><code><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">selectPersonSql</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SQL</span><span class="p">()</span><span class="w"> </span><span class="p">{{</span>
<span class="w">    </span><span class="n">SELECT</span><span class="p">(</span><span class="s">&quot;P.ID, P.USERNAME, P.PASSWORD, P.FULL_NAME&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">SELECT</span><span class="p">(</span><span class="s">&quot;P.LAST_NAME, P.CREATED_ON, P.UPDATED_ON&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">FROM</span><span class="p">(</span><span class="s">&quot;PERSON P&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">FROM</span><span class="p">(</span><span class="s">&quot;ACCOUNT A&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">INNER_JOIN</span><span class="p">(</span><span class="s">&quot;DEPARTMENT D on D.ID = P.DEPARTMENT_ID&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">INNER_JOIN</span><span class="p">(</span><span class="s">&quot;COMPANY C on D.COMPANY_ID = C.ID&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">WHERE</span><span class="p">(</span><span class="s">&quot;P.ID = A.ID&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">WHERE</span><span class="p">(</span><span class="s">&quot;P.FIRST_NAME like ?&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">OR</span><span class="p">();</span>
<span class="w">    </span><span class="n">WHERE</span><span class="p">(</span><span class="s">&quot;P.LAST_NAME like ?&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">GROUP_BY</span><span class="p">(</span><span class="s">&quot;P.ID&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">HAVING</span><span class="p">(</span><span class="s">&quot;P.LAST_NAME like ?&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">OR</span><span class="p">();</span>
<span class="w">    </span><span class="n">HAVING</span><span class="p">(</span><span class="s">&quot;P.FIRST_NAME like ?&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">ORDER_BY</span><span class="p">(</span><span class="s">&quot;P.ID&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">ORDER_BY</span><span class="p">(</span><span class="s">&quot;P.FULL_NAME&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}}.</span><span class="na">toString</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>Ëøô‰∏™‰æãÂ≠êÊúâ‰ªÄ‰πàÁâπÂà´‰πãÂ§ÑÂêóÔºü‰ªîÁªÜÁúã‰∏Ä‰∏ã‰Ω†‰ºöÂèëÁé∞Ôºå‰Ω†‰∏çÁî®ÊãÖÂøÉÂèØËÉΩ‰ºöÈáçÂ§çÂá∫Áé∞ÁöÑ "AND" ÂÖ≥ÈîÆÂ≠óÔºåÊàñËÄÖË¶ÅÂÅöÂá∫Áî® "WHERE" ÊãºÊé•ËøòÊòØ "AND" ÊãºÊé•ËøòÊòØ‰∏çÁî®ÊãºÊé•ÁöÑÈÄâÊã©„ÄÇSQL Á±ªÂ∑≤Áªè‰∏∫‰Ω†Â§ÑÁêÜ‰∫ÜÂì™ÈáåÂ∫îËØ•ÊèíÂÖ• "WHERE"„ÄÅÂì™ÈáåÂ∫îËØ•‰ΩøÁî® "AND" ÁöÑÈóÆÈ¢òÔºåÂπ∂Â∏Æ‰Ω†ÂÆåÊàêÊâÄÊúâÁöÑÂ≠óÁ¨¶‰∏≤ÊãºÊé•Â∑•‰Ωú„ÄÇ</p>
<h4 id="sql">SQL Á±ª<a class="headerlink" href="#sql" title="Permanent link">&para;</a></h4>
<p>ËøôÈáåÊúâ‰∏Ä‰∫õÁ§∫‰æãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">// ÂåøÂêçÂÜÖÈÉ®Á±ªÈ£éÊ†º</span>
<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">deletePersonSql</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SQL</span><span class="p">()</span><span class="w"> </span><span class="p">{{</span>
<span class="w">    </span><span class="n">DELETE_FROM</span><span class="p">(</span><span class="s">&quot;PERSON&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">WHERE</span><span class="p">(</span><span class="s">&quot;ID = #{id}&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}}.</span><span class="na">toString</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// Builder / Fluent È£éÊ†º</span>
<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">insertPersonSql</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">String</span><span class="w"> </span><span class="n">sql</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SQL</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">INSERT_INTO</span><span class="p">(</span><span class="s">&quot;PERSON&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">VALUES</span><span class="p">(</span><span class="s">&quot;ID, FIRST_NAME&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;#{id}, #{firstName}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">VALUES</span><span class="p">(</span><span class="s">&quot;LAST_NAME&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;#{lastName}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">toString</span><span class="p">();</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">sql</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Âä®ÊÄÅÊù°‰ª∂ÔºàÊ≥®ÊÑèÂèÇÊï∞ÈúÄË¶Å‰ΩøÁî® final ‰øÆÈ•∞Ôºå‰ª•‰æøÂåøÂêçÂÜÖÈÉ®Á±ªÂØπÂÆÉ‰ª¨ËøõË°åËÆøÈóÆÔºâ</span>
<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">selectPersonLike</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">firstName</span><span class="p">,</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">lastName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SQL</span><span class="p">()</span><span class="w"> </span><span class="p">{{</span>
<span class="w">    </span><span class="n">SELECT</span><span class="p">(</span><span class="s">&quot;P.ID, P.USERNAME, P.PASSWORD, P.FIRST_NAME, P.LAST_NAME&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">FROM</span><span class="p">(</span><span class="s">&quot;PERSON P&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">WHERE</span><span class="p">(</span><span class="s">&quot;P.ID like #{id}&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">firstName</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">WHERE</span><span class="p">(</span><span class="s">&quot;P.FIRST_NAME like #{firstName}&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">lastName</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">WHERE</span><span class="p">(</span><span class="s">&quot;P.LAST_NAME like #{lastName}&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">ORDER_BY</span><span class="p">(</span><span class="s">&quot;P.LAST_NAME&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}}.</span><span class="na">toString</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">deletePersonSql</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SQL</span><span class="p">()</span><span class="w"> </span><span class="p">{{</span>
<span class="w">    </span><span class="n">DELETE_FROM</span><span class="p">(</span><span class="s">&quot;PERSON&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">WHERE</span><span class="p">(</span><span class="s">&quot;ID = #{id}&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}}.</span><span class="na">toString</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">insertPersonSql</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SQL</span><span class="p">()</span><span class="w"> </span><span class="p">{{</span>
<span class="w">    </span><span class="n">INSERT_INTO</span><span class="p">(</span><span class="s">&quot;PERSON&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">VALUES</span><span class="p">(</span><span class="s">&quot;ID, FIRST_NAME&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;#{id}, #{firstName}&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">VALUES</span><span class="p">(</span><span class="s">&quot;LAST_NAME&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;#{lastName}&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}}.</span><span class="na">toString</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">updatePersonSql</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SQL</span><span class="p">()</span><span class="w"> </span><span class="p">{{</span>
<span class="w">    </span><span class="n">UPDATE</span><span class="p">(</span><span class="s">&quot;PERSON&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">SET</span><span class="p">(</span><span class="s">&quot;FIRST_NAME = #{firstName}&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">WHERE</span><span class="p">(</span><span class="s">&quot;ID = #{id}&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}}.</span><span class="na">toString</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p><img src="!assets/Mybatis/QQÊà™Âõæ20200616101536.png" alt="" style="" /></p>
<p><strong>ÊèêÁ§∫</strong> Ê≥®ÊÑèÔºåSQL Á±ªÂ∞ÜÂéüÊ†∑ÊèíÂÖ• <code>LIMIT</code>„ÄÅ<code>OFFSET</code>„ÄÅ<code>OFFSET n ROWS</code> ‰ª•Âèä <code>FETCH FIRST n ROWS ONLY</code> Â≠êÂè•„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÁ±ªÂ∫ì‰∏ç‰ºö‰∏∫‰∏çÊîØÊåÅËøô‰∫õÂ≠êÂè•ÁöÑÊï∞ÊçÆÂ∫ìÊâßË°å‰ªª‰ΩïËΩ¨Êç¢„ÄÇ Âõ†Ê≠§ÔºåÁî®Êà∑Â∫îËØ•Ë¶Å‰∫ÜËß£ÁõÆÊ†áÊï∞ÊçÆÂ∫ìÊòØÂê¶ÊîØÊåÅËøô‰∫õÂ≠êÂè•„ÄÇÂ¶ÇÊûúÁõÆÊ†áÊï∞ÊçÆÂ∫ì‰∏çÊîØÊåÅËøô‰∫õÂ≠êÂè•Ôºå‰∫ßÁîüÁöÑ SQL ÂèØËÉΩ‰ºöÂºïËµ∑ËøêË°åÈîôËØØ„ÄÇ</p>
<p>‰ªéÁâàÊú¨ 3.4.2 ÂºÄÂßãÔºå‰Ω†ÂèØ‰ª•ÂÉè‰∏ãÈù¢ËøôÊ†∑‰ΩøÁî®ÂèØÂèòÈïøÂ∫¶ÂèÇÊï∞Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">selectPersonSql</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SQL</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">SELECT</span><span class="p">(</span><span class="s">&quot;P.ID&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;A.USERNAME&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;A.PASSWORD&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;P.FULL_NAME&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;D.DEPARTMENT_NAME&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;C.COMPANY_NAME&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">FROM</span><span class="p">(</span><span class="s">&quot;PERSON P&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ACCOUNT A&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">INNER_JOIN</span><span class="p">(</span><span class="s">&quot;DEPARTMENT D on D.ID = P.DEPARTMENT_ID&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;COMPANY C on D.COMPANY_ID = C.ID&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">WHERE</span><span class="p">(</span><span class="s">&quot;P.ID = A.ID&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;P.FULL_NAME like #{name}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">ORDER_BY</span><span class="p">(</span><span class="s">&quot;P.ID&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;P.FULL_NAME&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">toString</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">insertPersonSql</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SQL</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">INSERT_INTO</span><span class="p">(</span><span class="s">&quot;PERSON&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">INTO_COLUMNS</span><span class="p">(</span><span class="s">&quot;ID&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;FULL_NAME&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">INTO_VALUES</span><span class="p">(</span><span class="s">&quot;#{id}&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;#{fullName}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">toString</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">updatePersonSql</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SQL</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">UPDATE</span><span class="p">(</span><span class="s">&quot;PERSON&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">SET</span><span class="p">(</span><span class="s">&quot;FULL_NAME = #{fullName}&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;DATE_OF_BIRTH = #{dateOfBirth}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">WHERE</span><span class="p">(</span><span class="s">&quot;ID = #{id}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">toString</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>‰ªéÁâàÊú¨ 3.5.2 ÂºÄÂßãÔºå‰Ω†ÂèØ‰ª•ÂÉè‰∏ãÈù¢ËøôÊ†∑ÊûÑÂª∫ÊâπÈáèÊèíÂÖ•ËØ≠Âè•Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">insertPersonsSql</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// INSERT INTO PERSON (ID, FULL_NAME)</span>
<span class="w">  </span><span class="c1">//     VALUES (#{mainPerson.id}, #{mainPerson.fullName}) , (#{subPerson.id}, #{subPerson.fullName})</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SQL</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">INSERT_INTO</span><span class="p">(</span><span class="s">&quot;PERSON&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">INTO_COLUMNS</span><span class="p">(</span><span class="s">&quot;ID&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;FULL_NAME&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">INTO_VALUES</span><span class="p">(</span><span class="s">&quot;#{mainPerson.id}&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;#{mainPerson.fullName}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">ADD_ROW</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">INTO_VALUES</span><span class="p">(</span><span class="s">&quot;#{subPerson.id}&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;#{subPerson.fullName}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">toString</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>‰ªéÁâàÊú¨ 3.5.2 ÂºÄÂßãÔºå‰Ω†ÂèØ‰ª•ÂÉè‰∏ãÈù¢ËøôÊ†∑ÊûÑÂª∫ÈôêÂà∂ËøîÂõûÁªìÊûúÊï∞ÁöÑ SELECT ËØ≠Âè•,Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">selectPersonsWithOffsetLimitSql</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// SELECT id, name FROM PERSON</span>
<span class="w">  </span><span class="c1">//     LIMIT #{limit} OFFSET #{offset}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SQL</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">SELECT</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">FROM</span><span class="p">(</span><span class="s">&quot;PERSON&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">LIMIT</span><span class="p">(</span><span class="s">&quot;#{limit}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">OFFSET</span><span class="p">(</span><span class="s">&quot;#{offset}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">toString</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">selectPersonsWithFetchFirstSql</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// SELECT id, name FROM PERSON</span>
<span class="w">  </span><span class="c1">//     OFFSET #{offset} ROWS FETCH FIRST #{limit} ROWS ONLY</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SQL</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">SELECT</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">FROM</span><span class="p">(</span><span class="s">&quot;PERSON&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">OFFSET_ROWS</span><span class="p">(</span><span class="s">&quot;#{offset}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">FETCH_FIRST_ROWS_ONLY</span><span class="p">(</span><span class="s">&quot;#{limit}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">toString</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="7">7„ÄÅÊó•Âøó<a class="headerlink" href="#7" title="Permanent link">&para;</a></h2>
<p>Mybatis ÈÄöËøá‰ΩøÁî®ÂÜÖÁΩÆÁöÑÊó•ÂøóÂ∑•ÂéÇÊèê‰æõÊó•ÂøóÂäüËÉΩ„ÄÇÂÜÖÁΩÆÊó•ÂøóÂ∑•ÂéÇÂ∞Ü‰ºöÊääÊó•ÂøóÂ∑•‰ΩúÂßîÊâòÁªô‰∏ãÈù¢ÁöÑÂÆûÁé∞‰πã‰∏ÄÔºö</p>
<ul>
<li>SLF4J</li>
<li>Apache Commons Logging</li>
<li>Log4j 2</li>
<li>Log4j</li>
<li>JDK logging</li>
</ul>
<p>MyBatis ÂÜÖÁΩÆÊó•ÂøóÂ∑•ÂéÇ‰ºöÂü∫‰∫éËøêË°åÊó∂Ê£ÄÊµã‰ø°ÊÅØÈÄâÊã©Êó•ÂøóÂßîÊâòÂÆûÁé∞„ÄÇÂÆÉ‰ºöÔºàÊåâ‰∏äÈù¢ÁΩóÂàóÁöÑÈ°∫Â∫èÔºâ‰ΩøÁî®Á¨¨‰∏Ä‰∏™Êü•ÊâæÂà∞ÁöÑÂÆûÁé∞„ÄÇÂΩìÊ≤°ÊúâÊâæÂà∞Ëøô‰∫õÂÆûÁé∞Êó∂ÔºåÂ∞Ü‰ºöÁ¶ÅÁî®Êó•ÂøóÂäüËÉΩ„ÄÇ</p>
<p>‰∏çÂ∞ëÂ∫îÁî®ÊúçÂä°Âô®ÔºàÂ¶Ç Tomcat Âíå WebShpereÔºâÁöÑÁ±ªË∑ØÂæÑ‰∏≠Â∑≤ÁªèÂåÖÂê´ Commons Logging„ÄÇÊ≥®ÊÑèÔºåÂú®ËøôÁßçÈÖçÁΩÆÁéØÂ¢É‰∏ãÔºåMyBatis ‰ºöÊää Commons Logging ‰Ωú‰∏∫Êó•ÂøóÂ∑•ÂÖ∑„ÄÇËøôÂ∞±ÊÑèÂë≥ÁùÄÂú®ËØ∏Â¶Ç WebSphere ÁöÑÁéØÂ¢É‰∏≠ÔºåÁî±‰∫éÊèê‰æõ‰∫Ü Commons Logging ÁöÑÁßÅÊúâÂÆûÁé∞Ôºå‰Ω†ÁöÑ Log4J ÈÖçÁΩÆÂ∞ÜË¢´ÂøΩÁï•„ÄÇËøô‰∏™Êó∂ÂÄô‰Ω†Â∞±‰ºöÊÑüËßâÂæàÈÉÅÈó∑ÔºöÁúãËµ∑Êù• MyBatis Â∞Ü‰Ω†ÁöÑ Log4J ÈÖçÁΩÆÂøΩÁï•Êéâ‰∫ÜÔºàÂÖ∂ÂÆûÊòØÂõ†‰∏∫Âú®ËøôÁßçÈÖçÁΩÆÁéØÂ¢É‰∏ãÔºåMyBatis ‰ΩøÁî®‰∫Ü Commons Logging ‰Ωú‰∏∫Êó•ÂøóÂÆûÁé∞Ôºâ„ÄÇÂ¶ÇÊûú‰Ω†ÁöÑÂ∫îÁî®ÈÉ®ÁΩ≤Âú®‰∏Ä‰∏™Á±ªË∑ØÂæÑÂ∑≤ÁªèÂåÖÂê´ Commons Logging ÁöÑÁéØÂ¢É‰∏≠ÔºåËÄå‰Ω†ÂèàÊÉ≥‰ΩøÁî®ÂÖ∂ÂÆÉÊó•ÂøóÂÆûÁé∞Ôºå‰Ω†ÂèØ‰ª•ÈÄöËøáÂú® MyBatis ÈÖçÁΩÆÊñá‰ª∂ mybatis-config.xml ÈáåÈù¢Ê∑ªÂä†‰∏ÄÈ°π setting Êù•ÈÄâÊã©ÂÖ∂ÂÆÉÊó•ÂøóÂÆûÁé∞„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;configuration&gt;</span>
<span class="w">  </span><span class="nt">&lt;settings&gt;</span>
<span class="w">    </span>...
<span class="w">    </span><span class="nt">&lt;setting</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;logImpl&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;LOG4J&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span>...
<span class="w">  </span><span class="nt">&lt;/settings&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div>
<p>ÂèØÈÄâÁöÑÂÄºÊúâÔºöSLF4J„ÄÅLOG4J„ÄÅLOG4J2„ÄÅJDK_LOGGING„ÄÅCOMMONS_LOGGING„ÄÅSTDOUT_LOGGING„ÄÅNO_LOGGINGÔºåÊàñËÄÖÊòØÂÆûÁé∞‰∫Ü <code>org.apache.ibatis.logging.Log</code> Êé•Âè£Ôºå‰∏îÊûÑÈÄ†ÊñπÊ≥ï‰ª•Â≠óÁ¨¶‰∏≤‰∏∫ÂèÇÊï∞ÁöÑÁ±ªÂÆåÂÖ®ÈôêÂÆöÂêç„ÄÇ</p>
<p>‰Ω†‰πüÂèØ‰ª•Ë∞ÉÁî®‰ª•‰∏ã‰ªª‰∏ÄÊñπÊ≥ïÊù•ÈÄâÊã©Êó•ÂøóÂÆûÁé∞Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">ibatis</span><span class="p">.</span><span class="na">logging</span><span class="p">.</span><span class="na">LogFactory</span><span class="p">.</span><span class="na">useSlf4jLogging</span><span class="p">();</span>
<span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">ibatis</span><span class="p">.</span><span class="na">logging</span><span class="p">.</span><span class="na">LogFactory</span><span class="p">.</span><span class="na">useLog4JLogging</span><span class="p">();</span>
<span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">ibatis</span><span class="p">.</span><span class="na">logging</span><span class="p">.</span><span class="na">LogFactory</span><span class="p">.</span><span class="na">useJdkLogging</span><span class="p">();</span>
<span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">ibatis</span><span class="p">.</span><span class="na">logging</span><span class="p">.</span><span class="na">LogFactory</span><span class="p">.</span><span class="na">useCommonsLogging</span><span class="p">();</span>
<span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">ibatis</span><span class="p">.</span><span class="na">logging</span><span class="p">.</span><span class="na">LogFactory</span><span class="p">.</span><span class="na">useStdOutLogging</span><span class="p">();</span>
</code></pre></div>
<p>‰Ω†Â∫îËØ•Âú®Ë∞ÉÁî®ÂÖ∂ÂÆÉ MyBatis ÊñπÊ≥ï‰πãÂâçË∞ÉÁî®‰ª•‰∏äÁöÑÊüê‰∏™ÊñπÊ≥ï„ÄÇÂè¶Â§ñÔºå‰ªÖÂΩìËøêË°åÊó∂Á±ªË∑ØÂæÑ‰∏≠Â≠òÂú®ËØ•Êó•ÂøóÂÆûÁé∞Êó∂ÔºåÊó•ÂøóÂÆûÁé∞ÁöÑÂàáÊç¢Êâç‰ºöÁîüÊïà„ÄÇÂ¶ÇÊûú‰Ω†ÁöÑÁéØÂ¢É‰∏≠Âπ∂‰∏çÂ≠òÂú® Log4JÔºå‰Ω†Âç¥ËØïÂõæË∞ÉÁî®‰∫ÜÁõ∏Â∫îÁöÑÊñπÊ≥ïÔºåMyBatis Â∞±‰ºöÂøΩÁï•Ëøô‰∏ÄÂàáÊç¢ËØ∑Ê±ÇÔºåÂπ∂Â∞Ü‰ª•ÈªòËÆ§ÁöÑÊü•ÊâæÈ°∫Â∫èÂÜ≥ÂÆö‰ΩøÁî®ÁöÑÊó•ÂøóÂÆûÁé∞„ÄÇ</p>
<p><strong>Êó•ÂøóÈÖçÁΩÆ</strong></p>
<p>‰Ω†ÂèØ‰ª•ÈÄöËøáÂú®ÂåÖ„ÄÅÊò†Â∞ÑÁ±ªÁöÑÂÖ®ÈôêÂÆöÂêç„ÄÅÂëΩÂêçÁ©∫Èó¥ÊàñÂÖ®ÈôêÂÆöËØ≠Âè•Âêç‰∏äÂºÄÂêØÊó•ÂøóÂäüËÉΩÔºåÊù•Êü•Áúã MyBatis ÁöÑÊó•ÂøóËØ≠Âè•„ÄÇ</p>
<p>ÂÜçÊ¨°ÊèêÈÜíÔºåÂÖ∑‰ΩìÈÖçÁΩÆÊ≠•È™§ÂèñÂÜ≥‰∫éÊó•ÂøóÂÆûÁé∞„ÄÇÊé•‰∏ãÊù•Êàë‰ª¨‰ºö‰ª• Log4J ‰Ωú‰∏∫Á§∫ËåÉ„ÄÇÈÖçÁΩÆÊó•ÂøóÂäüËÉΩÈùûÂ∏∏ÁÆÄÂçïÔºöÊ∑ªÂä†‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÈÖçÁΩÆÊñá‰ª∂ÔºàÂ¶Ç log4j.propertiesÔºâÔºåÊúâÊó∂ËøòÈúÄË¶ÅÊ∑ªÂä† jar ÂåÖÔºàÂ¶Ç log4j.jarÔºâ„ÄÇ‰∏ãÈù¢ÁöÑ‰æãÂ≠êÂ∞Ü‰ΩøÁî® Log4J Êù•ÈÖçÁΩÆÂÆåÊï¥ÁöÑÊó•ÂøóÊúçÂä°„ÄÇ‰∏ÄÂÖ±‰∏§‰∏™Ê≠•È™§Ôºö</p>
<ol>
<li>
<p>Ê∑ªÂä†Log4JÁöÑjarÂåÖ</p>
<p>Áî±‰∫éÊàë‰ª¨‰ΩøÁî®ÁöÑÊòØ Log4JÔºåÊàë‰ª¨Ë¶ÅÁ°Æ‰øùÂÆÉÁöÑ jar ÂåÖÂèØ‰ª•Ë¢´Â∫îÁî®‰ΩøÁî®„ÄÇ‰∏∫Ê≠§ÔºåÈúÄË¶ÅÂ∞Ü jar ÂåÖÊ∑ªÂä†Âà∞Â∫îÁî®ÁöÑÁ±ªË∑ØÂæÑ‰∏≠„ÄÇLog4J ÁöÑ jar ÂåÖÂèØ‰ª•Âú®‰∏äÈù¢ÁöÑÈìæÊé•‰∏≠‰∏ãËΩΩ„ÄÇ</p>
<p>ÂØπ‰∫é web Â∫îÁî®Êàñ‰ºÅ‰∏öÁ∫ßÂ∫îÁî®Ôºå‰Ω†ÂèØ‰ª•Â∞Ü <code>log4j.jar</code> Ê∑ªÂä†Âà∞ <code>WEB-INF/lib</code> ÁõÆÂΩï‰∏ãÔºõÂØπ‰∫éÁã¨Á´ãÂ∫îÁî®ÔºåÂèØ‰ª•Â∞ÜÂÆÉÊ∑ªÂä†Âà∞ JVM ÁöÑ <code>-classpath</code> ÂêØÂä®ÂèÇÊï∞‰∏≠„ÄÇ</p>
</li>
<li>
<p>ÈÖçÁΩÆLog4J</p>
<p>ÈÖçÁΩÆ Log4J ÊØîËæÉÁÆÄÂçï„ÄÇÂÅáËÆæ‰Ω†ÈúÄË¶ÅËÆ∞ÂΩïËøô‰∏™Êò†Â∞ÑÂô®ÁöÑÊó•ÂøóÔºö</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">org.mybatis.example</span><span class="p">;</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">BlogMapper</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nd">@Select</span><span class="p">(</span><span class="s">&quot;SELECT * FROM blog WHERE id = #{id}&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="n">Blog</span><span class="w"> </span><span class="nf">selectBlog</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Âú®Â∫îÁî®ÁöÑÁ±ªË∑ØÂæÑ‰∏≠ÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫ <code>log4j.properties</code> ÁöÑÊñá‰ª∂ÔºåÊñá‰ª∂ÁöÑÂÖ∑‰ΩìÂÜÖÂÆπÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ÂÖ®Â±ÄÊó•ÂøóÈÖçÁΩÆ</span>
<span class="na">log4j.rootLogger</span><span class="o">=</span><span class="s">ERROR, stdout</span>
<span class="c1"># MyBatis Êó•ÂøóÈÖçÁΩÆ</span>
<span class="na">log4j.logger.org.mybatis.example.BlogMapper</span><span class="o">=</span><span class="s">TRACE</span>
<span class="c1"># ÊéßÂà∂Âè∞ËæìÂá∫</span>
<span class="na">log4j.appender.stdout</span><span class="o">=</span><span class="s">org.apache.log4j.ConsoleAppender</span>
<span class="na">log4j.appender.stdout.layout</span><span class="o">=</span><span class="s">org.apache.log4j.PatternLayout</span>
<span class="na">log4j.appender.stdout.layout.ConversionPattern</span><span class="o">=</span><span class="s">%5p [%t] - %m%n</span>
</code></pre></div>
<p>‰∏äËø∞ÈÖçÁΩÆÂ∞Ü‰Ωø Log4J ËØ¶ÁªÜÊâìÂç∞ <code>org.mybatis.example.BlogMapper</code> ÁöÑÊó•ÂøóÔºåÂØπ‰∫éÂ∫îÁî®ÁöÑÂÖ∂ÂÆÉÈÉ®ÂàÜÔºåÂè™ÊâìÂç∞ÈîôËØØ‰ø°ÊÅØ„ÄÇ</p>
<p>‰∏∫‰∫ÜÂÆûÁé∞Êõ¥ÁªÜÁ≤íÂ∫¶ÁöÑÊó•ÂøóËæìÂá∫Ôºå‰Ω†‰πüÂèØ‰ª•Âè™ÊâìÂç∞ÁâπÂÆöËØ≠Âè•ÁöÑÊó•Âøó„ÄÇ‰ª•‰∏ãÈÖçÁΩÆÂ∞ÜÂè™ÊâìÂç∞ËØ≠Âè• <code>selectBlog</code> ÁöÑÊó•ÂøóÔºö</p>
<div class="highlight"><pre><span></span><code><span class="na">log4j.logger.org.mybatis.example.BlogMapper.selectBlog</span><span class="o">=</span><span class="s">TRACE</span>
</code></pre></div>
<p>ÊàñËÄÖÔºå‰Ω†‰πüÂèØ‰ª•ÊâìÂç∞‰∏ÄÁªÑÊò†Â∞ÑÂô®ÁöÑÊó•ÂøóÔºåÂè™ÈúÄË¶ÅÊâìÂºÄÊò†Â∞ÑÂô®ÊâÄÂú®ÁöÑÂåÖÁöÑÊó•ÂøóÂäüËÉΩÂç≥ÂèØÔºö</p>
<div class="highlight"><pre><span></span><code><span class="na">log4j.logger.org.mybatis.example</span><span class="o">=</span><span class="s">TRACE</span>
</code></pre></div>
<p>Êüê‰∫õÊü•ËØ¢ÂèØËÉΩ‰ºöËøîÂõûÂ∫ûÂ§ßÁöÑÁªìÊûúÈõÜ„ÄÇËøôÊó∂Ôºå‰Ω†ÂèØËÉΩÂè™ÊÉ≥Êü•Áúã SQL ËØ≠Âè•ÔºåËÄåÂøΩÁï•ËøîÂõûÁöÑÁªìÊûúÈõÜ„ÄÇ‰∏∫Ê≠§ÔºåSQL ËØ≠Âè•Â∞Ü‰ºöÂú® DEBUG Êó•ÂøóÁ∫ßÂà´‰∏ãËÆ∞ÂΩïÔºàJDK Êó•ÂøóÂàô‰∏∫ FINEÔºâ„ÄÇËøîÂõûÁöÑÁªìÊûúÈõÜÂàô‰ºöÂú® TRACE Êó•ÂøóÁ∫ßÂà´‰∏ãËÆ∞ÂΩïÔºàJDK Êó•ÂøóÂàô‰∏∫ FINER)„ÄÇÂõ†Ê≠§ÔºåÂè™Ë¶ÅÂ∞ÜÊó•ÂøóÁ∫ßÂà´Ë∞ÉÊï¥‰∏∫ DEBUG Âç≥ÂèØÔºö</p>
<div class="highlight"><pre><span></span><code><span class="na">log4j.logger.org.mybatis.example</span><span class="o">=</span><span class="s">DEBUG</span>
</code></pre></div>
<p>‰ΩÜÂ¶ÇÊûú‰Ω†Ë¶Å‰∏∫‰∏ãÈù¢ÁöÑÊò†Â∞ÑÂô® XML Êñá‰ª∂ÊâìÂç∞Êó•ÂøóÔºåÂèàËØ•ÊÄé‰πàÂäûÂë¢Ôºü</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper</span>
<span class="cp">  PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
<span class="cp">  &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>
<span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">namespace=</span><span class="s">&quot;org.mybatis.example.BlogMapper&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;selectBlog&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;Blog&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>select<span class="w"> </span>*<span class="w"> </span>from<span class="w"> </span>Blog<span class="w"> </span>where<span class="w"> </span>id<span class="w"> </span>=<span class="w"> </span>#{id}
<span class="w">  </span><span class="nt">&lt;/select&gt;</span>
<span class="nt">&lt;/mapper&gt;</span>
</code></pre></div>
<p>ËøôÊó∂Ôºå‰Ω†ÂèØ‰ª•ÈÄöËøáÊâìÂºÄÂëΩÂêçÁ©∫Èó¥ÁöÑÊó•ÂøóÂäüËÉΩÊù•ÂØπÊï¥‰∏™ XML ËÆ∞ÂΩïÊó•ÂøóÔºö</p>
<div class="highlight"><pre><span></span><code><span class="na">log4j.logger.org.mybatis.example.BlogMapper</span><span class="o">=</span><span class="s">TRACE</span>
</code></pre></div>
<p>ËÄåË¶ÅËÆ∞ÂΩïÂÖ∑‰ΩìËØ≠Âè•ÁöÑÊó•ÂøóÔºåÂèØ‰ª•ËøôÊ†∑ÂÅöÔºö</p>
<div class="highlight"><pre><span></span><code><span class="na">log4j.logger.org.mybatis.example.BlogMapper.selectBlog</span><span class="o">=</span><span class="s">TRACE</span>
</code></pre></div>
<p>‰Ω†Â∫îËØ•‰ºöÂèëÁé∞Ôºå‰∏∫Êò†Â∞ÑÂô®Âíå XML Êñá‰ª∂ÊâìÂºÄÊó•ÂøóÂäüËÉΩÁöÑËØ≠Âè•ÊØ´Êó†Â∑ÆÂà´„ÄÇ</p>
<p><strong>ÊèêÁ§∫</strong> Â¶ÇÊûú‰Ω†‰ΩøÁî®ÁöÑÊòØ SLF4J Êàñ Log4j 2ÔºåMyBatis ‰ºöËÆæÁΩÆ tag ‰∏∫ MYBATIS„ÄÇ</p>
</li>
</ol>
<h2 id="8springboot">8„ÄÅSpringBoot ÈõÜÊàê<a class="headerlink" href="#8springboot" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p><strong>Âª∫Ë°®</strong></p>
<p>Âú® MySQL Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑ test Êï∞ÊçÆÂ∫ì‰∏ãÊñ∞Âª∫ person Ë°®ÔºåËÑöÊú¨Â¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">-- Êñ∞Â¢û person Ë°®</span>
<span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n">person</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">person</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">pId</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">AUTO_INCREMENT</span><span class="p">,</span>
<span class="w">  </span><span class="n">pName</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="n">birthday</span><span class="w"> </span><span class="kt">date</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="n">salary</span><span class="w"> </span><span class="kt">float</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="n">summary</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">256</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">pId</span><span class="p">)</span>
<span class="p">)</span><span class="w"> </span><span class="k">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span><span class="w"> </span><span class="k">AUTO_INCREMENT</span><span class="o">=</span><span class="mi">5</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CHARSET</span><span class="o">=</span><span class="n">utf8</span><span class="p">;</span>

<span class="c1">-- ----------------------------</span>
<span class="c1">-- Records of person</span>
<span class="c1">-- ----------------------------</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">person</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Âº†‰∏â&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2021-03-21&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;7867.00&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ÈáçË¶Å‰∫∫Áâ©&#39;</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">person</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ÊùéÂõõ&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2010-05-17&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;6878.00&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ÈáçË¶Å‰∫∫Áâ©&#39;</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">person</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Áéã‰∫î&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2020-02-09&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;99.00&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ÈáçË¶Å‰∫∫Áâ©&#39;</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">person</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;4&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;È©¨ÂÖ≠&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2016-07-22&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;8897.00&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ÁôΩÈ¢Ü&#39;</span><span class="p">);</span>
</code></pre></div>
</li>
<li>
<p><strong>ÂØºÂÖ• Maven ‰æùËµñ</strong></p>
<p>ÂÖ∂‰∏≠ MyBatis ÂÆòÊñπÊèê‰æõÁöÑÈÄÇÈÖç Spring Boot ÁöÑ‰æùËµñÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- ÂºïÂÖ• myBatisÔºåËøôÊòØ MyBatisÂÆòÊñπÊèê‰æõÁöÑÈÄÇÈÖç Spring Boot ÁöÑÔºåËÄå‰∏çÊòØSpring BootËá™Â∑±ÁöÑ--&gt;</span>
<span class="cm">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.mybatis.spring.boot<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>mybatis-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>2.1.2<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
</li>
<li>
<p><strong>ÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">#È°µÈù¢Êó•Êúü‰º†ÂÖ•ÂêéÂè∞Êó∂ÔºåÊåáÂÆöÊ†ºÂºèÂåñ</span>
<span class="nt">spring</span><span class="p">:</span>
<span class="w">  </span><span class="nt">mvc</span><span class="p">:</span>
<span class="w">    </span><span class="nt">date-format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yyyy-MM-dd HH:mm:ss</span>

<span class="w">  </span><span class="c1">#Êï∞ÊçÆÂ∫ìÈÖçÁΩÆ</span>
<span class="w">  </span><span class="nt">datasource</span><span class="p">:</span>
<span class="w">    </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jdbc:mysql://localhost:3306/test?characterEncoding=UTF-8&amp;serverTimezone=UTC</span>
<span class="w">    </span><span class="nt">driver-class-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">com.mysql.cj.jdbc.Driver</span>
</code></pre></div>
<blockquote>
<p>È´òÁâàÊú¨ÁöÑ MySQL È©±Âä®ÔºàÂ¶Ç mysql-connector-java:8.0.16ÔºâÁöÑ <code>driver-class-name</code> ÂÄº‰∏≠Èó¥Â∏¶ <code>cj</code>„ÄÅ<code>url</code> ÂÄºÂøÖÈ°ªÂ∏¶Êó∂Âå∫ <code>serverTimezone</code></p>
</blockquote>
</li>
<li>
<p><strong>Êï∞ÊçÆÊ∫êÊµãËØï</strong></p>
<p>Âõ†‰∏∫ Spring Boot Â∑≤ÁªèÈÖçÁΩÆ‰∫ÜÈªòËÆ§ÁöÑÊï∞ÊçÆÊ∫ê HikariDataSource ÔºåÊâÄ‰ª•Ê≠§Êó∂Â∞±ÂèØ‰ª•ÊµãËØï‰∏Ä‰∏ãËé∑ÂèñÊï∞ÊçÆÊ∫êÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@RunWith</span><span class="p">(</span><span class="n">SpringRunner</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="nd">@SpringBootTest</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ThymeleafappApplicationTests</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Spring Boot ÈªòËÆ§Â∑≤ÁªèÈÖçÁΩÆÂ•Ω‰∫ÜÊï∞ÊçÆÊ∫êÔºåÁ®ãÂ∫èÂëòÂèØ‰ª•Áõ¥Êé• DI Ê≥®ÂÖ•ÁÑ∂Âêé‰ΩøÁî®Âç≥ÂèØ</span>
<span class="cm">     * Êï∞ÊçÆÊ∫êËé∑ÂèñÊ≠£Â∏∏ÔºåËÉΩÊ≠£Â∏∏ÊãøÂà∞Êï∞ÊçÆÂ∫ìËøûÊé•ÔºåÂàôËØ¥ÊòéÊï∞ÊçÆÂ∫ìËøûÊé•ÊàêÂäü</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Resource</span>
<span class="w">    </span><span class="n">DataSource</span><span class="w"> </span><span class="n">dataSource</span><span class="p">;</span>
<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">contextLoads</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">SQLException</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Êï∞ÊçÆÊ∫ê&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dataSource</span><span class="p">.</span><span class="na">getClass</span><span class="p">());</span>
<span class="w">        </span><span class="n">Connection</span><span class="w"> </span><span class="n">connection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataSource</span><span class="p">.</span><span class="na">getConnection</span><span class="p">();</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;ËøûÊé•&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">connection</span><span class="p">);</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;ËøûÊé•Âú∞ÂùÄ&gt;&gt;&gt;&gt;&gt;&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">connection</span><span class="p">.</span><span class="na">getMetaData</span><span class="p">().</span><span class="na">getURL</span><span class="p">());</span>
<span class="w">        </span><span class="n">connection</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p><strong>Êñ∞Âª∫ POJO</strong></p>
<p>ÂàõÂª∫ Person Java Bean ÂÆû‰ΩìÊù•Â∞ÅË£ÖÊï∞ÊçÆÔºåÂà∞Ê≠§ÁéØÂ¢ÉÂáÜÂ§áÂÆåÊØïÔºå‰πãÂêéÂ∞±‰ΩøÁî® MyBatis Êìç‰ΩúÊï∞ÊçÆÂ∫ìÂç≥ÂèØÔºö</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>
<span class="cm">/**</span>
<span class="cm"> * @author wangmaoxiong</span>
<span class="cm"> * @version 1.0</span>
<span class="cm"> * @date 2020/5/9 15:56</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Pserson</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">pId</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">pName</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">birthday</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Float</span><span class="w"> </span><span class="n">salary</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">summary</span><span class="p">;</span>

<span class="w">    </span><span class="c1">//ÁúÅÁï• getter„ÄÅsettter ÊñπÊ≥ïÊú™Á≤òË¥¥</span>

<span class="p">}</span>
</code></pre></div>
</li>
</ol>
<h3 id="81">8.1„ÄÅÊ≥®Ëß£Áâà<a class="headerlink" href="#81" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Êñ∞Âª∫ <code>@Mapper</code> Ê≥®Ëß£Ê†áËØÜÁöÑÊé•Âè£ÔºåÊé•Âè£‰∏≠ÊñπÊ≥ï‰∏äÈù¢‰ΩøÁî® <code>@Insert</code>„ÄÅ<code>@Delete</code>„ÄÅ<code>@Update</code>„ÄÅ<code>@Select</code> Ê≥®Ëß£ÁºñÂÜôÊìç‰ΩúÊï∞ÊçÆÂ∫ìÂ¢ûÂà†ÊîπÊü•ÁöÑ SQLÔºö</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">com.wmx.thymeleafapp.pojo.Person</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.annotations.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * @author wangmaoxiong</span>
<span class="cm"> * @version 1.0</span>
<span class="cm"> * @date 2020/5/9 16:02</span>
<span class="cm"> * &lt;/p&gt;</span>
<span class="cm"> * @Mapper Ê≥®Ëß£Ë°®Á§∫Êú¨Á±ªÊòØ‰∏Ä‰∏™ MyBatis ÁöÑ MapperÔºàÊò†Â∞ÑÔºâ.</span>
<span class="cm"> * 1„ÄÅ‰ª•Ââç Spring Êï¥Âêà mybatis Êó∂Ôºå‰∏Ä‰∏™ POJO ÂØπÂ∫î MyBatis‰∏Ä‰∏™Êìç‰ΩúÊï∞ÊçÆÂ∫ìÁöÑ xml Êñá‰ª∂Ôºå xml Êñá‰ª∂ÂèàÊåáÂêë‰∏Ä‰∏™ mapper Êé•Âè£.</span>
<span class="cm"> * 2„ÄÅÁé∞Âú® Spring Boot ÂàôÁúÅÁï•‰∫Ü xml Êñá‰ª∂Ëøô‰∏ÄÁéØËäÇÔºåÁõ¥Êé•Â∞Ü sql ÂÜôÂú®‰∫ÜÊé•Âè£‰∏ä.</span>
<span class="cm"> */</span>
<span class="nd">@Mapper</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">PersonMapper</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Ê†πÊçÆÁî®Êà∑ id Êü•ËØ¢</span>
<span class="cm">     *</span>
<span class="cm">     * @param pId</span>
<span class="cm">     * @return :ËøîÂõûÊü•ËØ¢ÁªìÊûú,‰∏çÂ≠òÂú®Êó∂ËøîÂõû null</span>
<span class="cm">     * @Select ÔºöÁ≠â‰ª∑‰∫é‰ª•Ââç xml ÂΩ¢ÂºèÊó∂ÁöÑ &lt;select Ê†áÁ≠æ,sqlÂÜôÊ≥ï‰ªçÁÑ∂Âíå‰ª•Ââç‰∏ÄÊ†∑</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Select</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;select * from Person where pId=#{pId}&quot;</span><span class="p">})</span>
<span class="w">    </span><span class="n">Person</span><span class="w"> </span><span class="nf">findPersonById</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">pId</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Êü•ËØ¢ÊâÄÊúâÁî®Êà∑</span>
<span class="cm">     *</span>
<span class="cm">     * @return :ËøîÂõûÊü•ËØ¢ÁªìÊûú</span>
<span class="cm">     * @Select ÔºöÁ≠â‰ª∑‰∫é‰ª•Ââç xml ÂΩ¢ÂºèÊó∂ÁöÑ &lt;select Ê†áÁ≠æ,sqlÂÜôÊ≥ï‰ªçÁÑ∂Âíå‰ª•Ââç‰∏ÄÊ†∑</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Select</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;select * from Person&quot;</span><span class="p">})</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findAllPersons</span><span class="p">();</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Ê∑ªÂä†Áî®Êà∑</span>
<span class="cm">     *</span>
<span class="cm">     * @param Person ÔºöÂõ†‰∏∫‰∏ªÈîÆ pId Ëá™Â¢ûÔºåÊâÄ‰ª•Ê≤°ËÆæÂÄº</span>
<span class="cm">     * @return</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Insert</span><span class="p">(</span><span class="s">&quot;insert into Person(pName,birthday,salary,summary) values(#{pName},#{birthday},#{salary},#{summary})&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">Integer</span><span class="w"> </span><span class="nf">addPerson</span><span class="p">(</span><span class="n">Person</span><span class="w"> </span><span class="n">Person</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Ê†πÊçÆÁî®Êà∑ pId ‰øÆÊîπÁî®Êà∑</span>
<span class="cm">     *</span>
<span class="cm">     * @param Person</span>
<span class="cm">     * @return</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Update</span><span class="p">(</span><span class="s">&quot;update Person set pName=#{pName},birthday=#{birthday},salary=#{salary},summary=#{summary} where pId=#{pId}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">Integer</span><span class="w"> </span><span class="nf">updatePerson</span><span class="p">(</span><span class="n">Person</span><span class="w"> </span><span class="n">Person</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Ê†πÊçÆÁî®Êà∑ id Âà†Èô§Áî®Êà∑</span>
<span class="cm">     *</span>
<span class="cm">     * @return ÔºöËøîÂõûÊìç‰ΩúÁöÑË°åÊï∞Ôºå‰πüÂèØ‰ª•‰∏çËøîÂõû</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Delete</span><span class="p">(</span><span class="s">&quot;delete from Person where pId = #{pId}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">Integer</span><span class="w"> </span><span class="nf">deletePersonById</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">pId</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>ÁúÅÁï•‰∏öÂä°Â±ÇÔºåÁõ¥Êé•ÁºñÂÜôÊéßÂà∂Â±ÇË∞ÉÁî® Mapper Â±ÇÊìç‰ΩúÊï∞ÊçÆÂ∫ìÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@RestController</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PersonController</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Resource</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">PersonMapper</span><span class="w"> </span><span class="n">personMapper</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Ê†πÊçÆÁî®Êà∑ id Êü•ËØ¢----Áõ¥Êé•Â∞ÜÁªìÊûúËøîÂõûÁªôÁî®Êà∑È°µÈù¢</span>
<span class="cm">     * http://localhost:8080/person/1</span>
<span class="cm">     *</span>
<span class="cm">     * @param pId</span>
<span class="cm">     * @return</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/person/{pId}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="nf">findPersonById</span><span class="p">(</span><span class="nd">@PathVariable</span><span class="p">(</span><span class="s">&quot;pId&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">pId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Person</span><span class="w"> </span><span class="n">person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">personMapper</span><span class="p">.</span><span class="na">findPersonById</span><span class="p">(</span><span class="n">pId</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">person</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Êü•ËØ¢ÊâÄÊúâÁî®Êà∑----Áõ¥Êé•Â∞ÜÁªìÊûúËøîÂõûÁªôÁî®Êà∑È°µÈù¢</span>
<span class="cm">     * http://localhost:8080/person</span>
<span class="cm">     *</span>
<span class="cm">     * @return</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/person&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findAllPersons</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span><span class="w"> </span><span class="n">personList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">personMapper</span><span class="p">.</span><span class="na">findAllPersons</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">personList</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Ê∑ªÂä†Áî®Êà∑Ôºö http://localhost:8080/person/add</span>
<span class="cm">     * {&quot;pName&quot;:&quot;Âº†Êó†Âøå&quot;,&quot;salary&quot;:9999.99,&quot;birthday&quot;:&quot;1897-09-09T12:00:11&quot;,&quot;summary&quot;:&quot;Ê≠¶Â≠¶Â•áÊâç&quot;}</span>
<span class="cm">     *</span>
<span class="cm">     * @param person</span>
<span class="cm">     * @return</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&quot;/person/add&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">addPerson</span><span class="p">(</span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="n">person</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Integer</span><span class="w"> </span><span class="n">integer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">personMapper</span><span class="p">.</span><span class="na">addPerson</span><span class="p">(</span><span class="n">person</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">integer</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * ‰øÆÊîπÁî®Êà∑Ôºöhttp://localhost:8080/person/update</span>
<span class="cm">     * {&quot;pId&quot;:1,&quot;pName&quot;:&quot;Âº†Êó†Âøå&quot;,&quot;salary&quot;:9999.99,&quot;birthday&quot;:&quot;1897-09-09T12:00:11&quot;,&quot;summary&quot;:&quot;Ê≠¶Â≠¶Â•áÊâç&quot;}</span>
<span class="cm">     *</span>
<span class="cm">     * @param person</span>
<span class="cm">     * @return</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&quot;/person/update&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">updatePerson</span><span class="p">(</span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="n">person</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Integer</span><span class="w"> </span><span class="n">integer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">personMapper</span><span class="p">.</span><span class="na">updatePerson</span><span class="p">(</span><span class="n">person</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">integer</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Âà†Èô§Áî®Êà∑:    http://localhost:8080/person/del/2</span>
<span class="cm">     *</span>
<span class="cm">     * @param pId</span>
<span class="cm">     * @return</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/person/del/{pId}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">deletePerson</span><span class="p">(</span><span class="nd">@PathVariable</span><span class="p">(</span><span class="s">&quot;pId&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">pId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Integer</span><span class="w"> </span><span class="n">integer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">personMapper</span><span class="p">.</span><span class="na">deletePersonById</span><span class="p">(</span><span class="n">pId</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">integer</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</li>
</ol>
<p><strong>@MapperScan ÊâπÈáèÊâ´Êèè Mapper</strong></p>
<p><code>@Mapper</code> Ê≥®Ëß£Áõ¥Êé•ÂÜôÂú®ÁõÆÊ†á Mapper Êé•Âè£‰∏äÔºåË°®ÂêçÊú¨Êé•Âè£ÊòØ MyBatis ÁöÑ Mapper„ÄÇ</p>
<p><code>@MapperScan</code> Ê≥®Ëß£ÂèØ‰ª•ÊåáÂÆöËá™Âä®Êâ´ÊèèÂì™‰∫õË∑ØÂæÑ‰∏ãÁöÑÊé•Âè£‰Ωú‰∏∫ MyBatis ÁöÑ MapperÔºåÊ≠§Êó∂Êé•Âè£‰∏äÂèØ‰ª•‰∏çÈúÄË¶ÅÂÜçÂÜô <code>@Mapper</code>ÔºåÂõ†‰∏∫‰ºöËá™Âä®Â∏ÆÂÆÉ‰ª¨Âä†‰∏ä„ÄÇ<code>@MapperScan</code> ÈÄöÂ∏∏ÊîæÂú®Â∫îÁî®ÂêØÂä®Á±ª‰∏äÂç≥ÂèØÔºå<em>value</em> ÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåÂèØ‰ª•Êâ´ÊèèÂ§ö‰∏™Ë∑ØÂæÑ„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">org.mybatis.spring.annotation.MapperScan</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.SpringApplication</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * @MapperScan : ‰ΩúÁî®ÊòØÊâ´ÊèèÊüê‰∫õÂåÖ‰∏ãÈù¢ÊâÄÊúâÁöÑÁ±ª‰Ωú‰∏∫ Mapper Á±ª</span>
<span class="cm"> * 1)valueÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåÂèØ‰ª•Êâ´ÊèèÂ§ö‰∏™Ë∑ØÂæÑ</span>
<span class="cm"> * 2)Ë¢´Êâ´ÊèèÁöÑÂåÖ(com.lct.wmx.mapper)‰∏≠ÁöÑÁ±ªÔºàÊé•Âè£Ôºâ‰∏äÂèØ‰ª•‰∏çÁî®ÂÜçÂÜô @MapperÔºåÂõ†‰∏∫ÂÖ®ÈÉ®‰ºöËá™Âä®‰∏∫ÂÆÉ‰ª¨Ê∑ª‰∏ä</span>
<span class="cm"> * 3) @MapperScan ÁöÑ‰ΩçÁΩÆÈÄöÂ∏∏ÊîæÂú®Â∫îÁî®ÂêØÂä®Á±ª‰∏ä</span>
<span class="cm"> */</span>
<span class="nd">@MapperScan</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;com.lct.wmx.mapper&quot;</span><span class="p">})</span>
<span class="nd">@SpringBootApplication</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">HippoApplication</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">SpringApplication</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="n">HippoApplication</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="82xml">8.2„ÄÅXML ÈÖçÁΩÆÁâà<a class="headerlink" href="#82xml" title="Permanent link">&para;</a></h3>
<p>Èô§‰∫Ü‰ΩøÁî® <code>@Mapper</code> Ê≥®Ëß£ÁöÑÊñπÂºèÔºå‰πüÂèØ‰ª•‰ΩøÁî® MyBatis xml Êñá‰ª∂ÈÖçÁΩÆÁöÑÊñπÂºè„ÄÇÂÆûÈôÖÂºÄÂèë‰∏≠ÂèØ‰ª•ÂêåÊó∂Â≠òÂú® MyBatis ÁöÑÊ≥®Ëß£ÊñπÂºè‰∏éÈÖçÁΩÆÊñπÂºèÔºåÂ¶Ç User ÂÆû‰ΩìÂèØ‰ª•‰ΩøÁî®Ê≥®Ëß£ÊñπÂºèËøõË°å CRUDÔºåParty ÂÆû‰ΩìÂèØ‰ª•‰ΩøÁî®ÈÖçÁΩÆÊñπÂºèËøõË°å CRUD„ÄÇ</p>
<p>ËôΩÁÑ∂Áõ¥Êé•Âú®Êé•Âè£‰∏ä‰ΩøÁî®Ê≥®Ëß£ÊñπÂºèÂÜô SQL ÁúãËµ∑Êù•ÂæàÈ´òÁ∫ßÔºå‰ΩÜÂÆûÈôÖÁîü‰∫ß‰∏≠Âç¥Êé®Ëçê‰ΩøÁî® xml Êñá‰ª∂ÈÖçÁΩÆÁöÑÊñπÂºèÔºåÂõ†‰∏∫ÂØπ‰∫éÁª¥Êä§Ëµ∑Êù•Êõ¥Âä†Êñπ‰æøÔºåÂè™ÈúÄË¶ÅÁõ¥Êé•‰øÆÊîπ‰∏Ä‰∏ã xml Êñá‰ª∂Âç≥ÂèØÔºåËÄåÂ¶ÇÊûúÊòØÂÜôÊ≠ªÂú®Ê∫êÁ†Å‰∏≠ÔºåÂàôËøòÈúÄË¶ÅÈáçÊñ∞ÊâìÂåÖÊàñËÄÖÊõøÊç¢ <code>.class</code> Êñá‰ª∂ÊâçË°å„ÄÇ</p>
<ol>
<li>
<p>Êñ∞Âª∫ <code>@Mapper</code> Ê≥®Ëß£Ê†áËØÜÁöÑÊé•Âè£Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">com.wmx.thymeleafapp.pojo.Person</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.annotations.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * @author wangmaoxiong</span>
<span class="cm"> * @version 1.0</span>
<span class="cm"> * @date 2020/5/9 16:02</span>
<span class="cm"> * &lt;/p&gt;</span>
<span class="cm"> */</span>
<span class="nd">@Mapper</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">PersonMapper</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Ê†πÊçÆÁî®Êà∑ id Êü•ËØ¢</span>
<span class="cm">     *</span>
<span class="cm">     * @param pId</span>
<span class="cm">     * @return :ËøîÂõûÊü•ËØ¢ÁªìÊûú,‰∏çÂ≠òÂú®Êó∂ËøîÂõû null</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">Person</span><span class="w"> </span><span class="nf">findPersonById</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">pId</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Êü•ËØ¢ÊâÄÊúâÁî®Êà∑</span>
<span class="cm">     *</span>
<span class="cm">     * @return :ËøîÂõûÊü•ËØ¢ÁªìÊûú</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findAllPersons</span><span class="p">();</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Ê∑ªÂä†Áî®Êà∑</span>
<span class="cm">     *</span>
<span class="cm">     * @param Person ÔºöÂõ†‰∏∫‰∏ªÈîÆ pId Ëá™Â¢ûÔºåÊâÄ‰ª•Ê≤°ËÆæÂÄº</span>
<span class="cm">     * @return</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">Integer</span><span class="w"> </span><span class="nf">addPerson</span><span class="p">(</span><span class="n">Person</span><span class="w"> </span><span class="n">Person</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Ê†πÊçÆÁî®Êà∑ pId ‰øÆÊîπÁî®Êà∑</span>
<span class="cm">     *</span>
<span class="cm">     * @param Person</span>
<span class="cm">     * @return</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">Integer</span><span class="w"> </span><span class="nf">updatePerson</span><span class="p">(</span><span class="n">Person</span><span class="w"> </span><span class="n">Person</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Ê†πÊçÆÁî®Êà∑ id Âà†Èô§Áî®Êà∑</span>
<span class="cm">     *</span>
<span class="cm">     * @return ÔºöËøîÂõûÊìç‰ΩúÁöÑË°åÊï∞Ôºå‰πüÂèØ‰ª•‰∏çËøîÂõû</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">Integer</span><span class="w"> </span><span class="nf">deletePersonById</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">pId</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>Êèê‰æõ MyBatis Êìç‰ΩúÊï∞ÊçÆÂ∫ìÁöÑ Mapper Êé•Âè£ÂØπÂ∫îÁöÑ xml Êñá‰ª∂Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper</span>
<span class="cp">        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
<span class="cp">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span>

<span class="cm">&lt;!--namespace ÊåáÂêëÂØπÂ∫îÁöÑ Mapper Êé•Âè£ --&gt;</span>
<span class="nt">&lt;mapper</span><span class="w"> </span><span class="na">namespace=</span><span class="s">&quot;com.wmx.thymeleafapp.mapper.PersonMapper&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findPersonById&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;com.wmx.thymeleafapp.pojo.Person&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>select<span class="w"> </span>*<span class="w"> </span>from<span class="w"> </span>Person<span class="w"> </span>where<span class="w"> </span>pId<span class="w"> </span>=<span class="w"> </span>#{pId}
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;findAllPersons&quot;</span><span class="w"> </span><span class="na">resultType=</span><span class="s">&quot;person&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>select<span class="w"> </span>*<span class="w"> </span>from<span class="w"> </span>Person
<span class="w">    </span><span class="nt">&lt;/select&gt;</span>

<span class="w">    </span><span class="nt">&lt;insert</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;addPerson&quot;</span><span class="w"> </span><span class="na">parameterType=</span><span class="s">&quot;person&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>insert<span class="w"> </span>into<span class="w"> </span>
<span class="w">        </span>Person(pName,birthday,salary,summary)<span class="w"> </span>
<span class="w">        </span>values(#{pName},#{birthday},#{salary},#{summary}
<span class="w">    </span><span class="nt">&lt;/insert&gt;</span>

<span class="w">    </span><span class="nt">&lt;update</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;updatePerson&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>update<span class="w"> </span>Person<span class="w"> </span>set<span class="w"> </span>
<span class="w">        </span>pName=#{pName},birthday=#{birthday},salary=#{salary},summary=#{summary}<span class="w"> </span>
<span class="w">        </span>where<span class="w"> </span>pId=#{pId}
<span class="w">    </span><span class="nt">&lt;/update&gt;</span>

<span class="w">    </span><span class="nt">&lt;delete</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;deletePersonById&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>delete<span class="w"> </span>from<span class="w"> </span>Person<span class="w"> </span>where<span class="w"> </span>pId<span class="w"> </span>=<span class="w"> </span>#{pId}
<span class="w">    </span><span class="nt">&lt;/delete&gt;</span>

<span class="nt">&lt;/mapper&gt;</span>
</code></pre></div>
</li>
<li>
<p>Spring Boot ÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂ÊåáÂÆö mybatis ÈÖçÁΩÆÊñá‰ª∂Ë∑ØÂæÑÔºö</p>
<div class="highlight"><pre><span></span><code><span class="c1">#ÊåáÂÆö myBatis Ê†∏ÂøÉÈÖçÁΩÆÊñá‰ª∂‰∏é Mapper Êò†Â∞Ñ xml Êñá‰ª∂</span>
<span class="nt">mybatis</span><span class="p">:</span>
<span class="w">  </span><span class="nt">config-location</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">classpath:mybatis/mybatis-config.xml</span>
<span class="w">  </span><span class="nt">mapper-locations</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">classpath:mybatis/mapper/*.xml</span>
</code></pre></div>
</li>
<li>
<p>‰ΩøÁî®Ê≥®Ëß£ÁâàÂÜôÁöÑÊéßÂà∂Â±ÇÊµãËØï„ÄÇ</p>
</li>
</ol>
<h2 id="9">9„ÄÅÂºÇÂ∏∏<a class="headerlink" href="#9" title="Permanent link">&para;</a></h2>
<p>ËøôÈáåÂàóÂá∫‰∏Ä‰∫õÂºÄÂèëËøáÁ®ã‰∏≠ÈÅáÂà∞ÁöÑÂºÇÂ∏∏‰ª•ÂèäËß£ÂÜ≥ÂäûÊ≥ï„ÄÇ</p>
<h3 id="91netsfjsqlparserparserparseexception">9.1„ÄÅnet.sf.jsqlparser.parser.ParseException<a class="headerlink" href="#91netsfjsqlparserparserparseexception" title="Permanent link">&para;</a></h3>
<p>ËøêË°å Mybatis Êü•ËØ¢ SQL Êó∂Êä•ÈîôÂºÇÂ∏∏Ôºö</p>
<div class="highlight"><pre><span></span><code>Caused by: net.sf.jsqlparser.parser.ParseException: Encountered &quot; &quot;(&quot; &quot;( &quot;&quot; at line 10, column 42.
Was expecting one of:
    &quot;AS&quot; ...
    &quot;DO&quot; ...
    &quot;ANY&quot; ...
    &quot;KEY&quot; ...
    &quot;PERCENT&quot; ...
    &quot;END&quot; ...
    &quot;INTO&quot; ...
    &quot;FROM&quot; ...
    &quot;OPEN&quot; ...
    &quot;TABLE&quot; ...
    &quot;WHERE&quot; ...
    &quot;FOR&quot; ...
    &quot;XML&quot; ...
    &quot;UNION&quot; ...
    &quot;GROUP&quot; ...
    &quot;ORDER&quot; ...
    &quot;VALUE&quot; ...
    &quot;HAVING&quot; ...
    &quot;INSERT&quot; ...
    &quot;VALUES&quot; ...
    &quot;REPLACE&quot; ...
    &quot;TRUNCATE&quot; ...
    &quot;INTERSECT&quot; ...
    &quot;CAST&quot; ...
    &quot;EXCEPT&quot; ...
    &quot;MINUS&quot; ...
    &quot;OVER&quot; ...
    &quot;PARTITION&quot; ...
    &quot;EXTRACT&quot; ...
    &quot;MATERIALIZED&quot; ...
    &quot;START&quot; ...
    &quot;CONNECT&quot; ...
    &quot;PRIOR&quot; ...
    &quot;SIBLINGS&quot; ...
    &quot;COLUMN&quot; ...
    &quot;NULLS&quot; ...
    &quot;FIRST&quot; ...
    &quot;LAST&quot; ...
    &quot;ROWS&quot; ...
    &quot;RANGE&quot; ...
    &quot;FOLLOWING&quot; ...
    &quot;ROW&quot; ...
    &quot;COMMIT&quot; ...
    &quot;SEPARATOR&quot; ...
    &quot;CASCADE&quot; ...
    &quot;NO&quot; ...
    &quot;ACTION&quot; ...
    &lt;K_DATETIMELITERAL&gt; ...
    &quot;PRECISION&quot; ...
    &lt;S_IDENTIFIER&gt; ...
    &lt;S_QUOTED_IDENTIFIER&gt; ...
    &quot;,&quot; ...
    &quot;)&quot; ...
    &quot;|&quot; ...
    &quot;&amp;&quot; ...
    &quot;^&quot; ...
    &quot;::&quot; ...
    &quot;ORDER&quot; ...
    &quot;ORDER&quot; ...

    at net.sf.jsqlparser.parser.CCJSqlParser.generateParseException(CCJSqlParser.java:16395)
    at net.sf.jsqlparser.parser.CCJSqlParser.jj_consume_token(CCJSqlParser.java:16248)
    at net.sf.jsqlparser.parser.CCJSqlParser.PrimaryExpression(CCJSqlParser.java:6333)
    at net.sf.jsqlparser.parser.CCJSqlParser.BitwiseXor(CCJSqlParser.java:5926)
    at net.sf.jsqlparser.parser.CCJSqlParser.MultiplicativeExpression(CCJSqlParser.java:5883)
    at net.sf.jsqlparser.parser.CCJSqlParser.AdditiveExpression(CCJSqlParser.java:5845)
    at net.sf.jsqlparser.parser.CCJSqlParser.ConcatExpression(CCJSqlParser.java:5778)
    at net.sf.jsqlparser.parser.CCJSqlParser.BitwiseAndOr(CCJSqlParser.java:5802)
    at net.sf.jsqlparser.parser.CCJSqlParser.SimpleExpression(CCJSqlParser.java:5770)
    at net.sf.jsqlparser.parser.CCJSqlParser.CaseWhenExpression(CCJSqlParser.java:7275)
    at net.sf.jsqlparser.parser.CCJSqlParser.PrimaryExpression(CCJSqlParser.java:5964)
    at net.sf.jsqlparser.parser.CCJSqlParser.BitwiseXor(CCJSqlParser.java:5926)
</code></pre></div>
<p>Êü•ËØ¢ SQLÔºö</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span>
<span class="w">    </span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">CONCAT</span><span class="p">(</span>
<span class="w">        </span><span class="n">IFNULL</span><span class="p">(</span><span class="k">c</span><span class="p">.</span><span class="n">ZH_NAME</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">),</span>
<span class="w">        </span><span class="k">IF</span><span class="p">(</span>
<span class="w">            </span><span class="k">LENGTH</span><span class="p">(</span><span class="k">c</span><span class="p">.</span><span class="n">US_NAME</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="k">AND</span><span class="w"> </span><span class="k">LENGTH</span><span class="p">(</span><span class="k">c</span><span class="p">.</span><span class="n">ZH_NAME</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">            </span><span class="s1">&#39;/&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="s1">&#39;&#39;</span>
<span class="w">        </span><span class="p">),</span>
<span class="w">        </span><span class="n">IFNULL</span><span class="p">(</span><span class="k">c</span><span class="p">.</span><span class="n">US_NAME</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="k">FROM</span>
<span class="w">    </span><span class="k">TABLE</span><span class="w"> </span><span class="k">c</span>
</code></pre></div>
<p>Êä•ÈîôÂéüÂõ†ÔºöÊòØÂõ†‰∏∫ Mybatis ÁöÑÂàÜÈ°µÊèí‰ª∂ SQL ËØ≠Âè•‰∏≠ÂØπ <code>IF</code> ÂáΩÊï∞‰∏çÊîØÊåÅ„ÄÇ</p>
<p><strong>Ëß£ÂÜ≥ÊñπÊ≥ï</strong></p>
<p>Â∞Ü <code>IF</code> ÊõøÊç¢Êàê <code>CASE WHEN</code> ‰ΩøÁî®„ÄÇ</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  ÂõûÂà∞È°µÈù¢È°∂ÈÉ®
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.top", "navigation.indexes", "navigation.tracking"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../_javascripts/auto_title.js"></script>
      
    
  </body>
</html>